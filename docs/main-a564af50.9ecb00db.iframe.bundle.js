"use strict";(self.webpackChunk_mapcomponents_react_maplibre=self.webpackChunk_mapcomponents_react_maplibre||[]).push([[582],{59732:(e,t,r)=>{r.r(t),r.d(t,{Overlay:()=>d,Toolbar:()=>f,__namedExportsOrder:()=>y,default:()=>m});var n=r(67294),o=r(58725),i=r(18434),a=r(54553),l=r(98396);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m={title:"MapComponents/MlScaleReference",component:o.Z,argTypes:{url:{},layer:{}},decorators:a.Z};var f=function(e){return n.createElement(i.Z,{unmovableButtons:n.createElement(o.Z,e)})}.bind({});f.args={show:"toolbar"};var d=function(e){var t=(0,l.Z)("(max-width:900px)");return n.createElement("div",{style:{position:"absolute",zIndex:1e5,bottom:t?"40px":"20px",right:"20px"}},n.createElement(o.Z,e))}.bind({});d.args={show:"overlay"},f.parameters=s({storySource:{source:"(props) => {\n\treturn <TopToolbar unmovableButtons={<MlScaleReference {...props} />} />;\n}"}},f.parameters),d.parameters=s({storySource:{source:'(props) => {\n\tconst mediaIsMobile = useMediaQuery("(max-width:900px)");\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tposition: "absolute",\n\t\t\t\tzIndex: 100000,\n\t\t\t\tbottom: mediaIsMobile ? "40px" : "20px",\n\t\t\t\tright: "20px",\n\t\t\t}}\n\t\t>\n\t\t\t<MlScaleReference {...props} />\n\t\t</div>\n\t);\n}'}},d.parameters);var y=["Toolbar","Overlay"]},460:(e,t,r)=>{r.r(t),r.d(t,{ExampleConfig:()=>L,__namedExportsOrder:()=>C,default:()=>x});var n=r(67294),o=r(46871),i=r(54553),a=r(90686),l=r(31072),c=r(17781),u=r(70576),s=r(6867),p=r(22961),m=r(72450),f=r(59334),d=r(87455),y=r(52124),b=r(42440),v=r(76956),g=r(72642),S=r(33382),O=r(18037),h=r(32141),j=r(18434);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===w(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const x={title:"MapComponents/MlShareMapState",component:o.Z,argTypes:{},decorators:i.Z};var L=function(){var e,t=[d,y],r=I((0,n.useState)(!0),2),i=r[0],w=r[1],P=(0,l.Z)({mapId:"map_1"}),E=(0,a.Z)({mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}}),M=I((0,n.useState)(!0),2),x=M[0],L=M[1];return n.createElement(n.Fragment,null,n.createElement(j.Z,{buttons:n.createElement(g.Z,{variant:x?"contained":"outlined",onClick:function(){return L(!x)},sx:{marginRight:{xs:"0px",sm:"10px"}}},"Share Map State")}),n.createElement(o.Z,{active:i}),t.map((function(e,t){return n.createElement(v.Z,{layerId:"GeoJson_"+t,type:"line",geojson:e,key:"GeoJson_"+t})})),n.createElement(c.Z,{open:x,setOpen:L,name:"Share Map State"},n.createElement(S.Z,{size:"small",selected:i,value:i,onChange:function(){w(!i)}},i?n.createElement(O.Z,null):n.createElement(h.Z,null),i?"active":"inactive"),n.createElement(b.Z,{dense:!0,key:"layers"},null===(e=E.layers)||void 0===e?void 0:e.map((function(e){return n.createElement(u.ZP,{key:null==e?void 0:e.id,secondaryAction:n.createElement(s.Z,{edge:"end","aria-label":"toggle visibility",onClick:function(){if(null!=e&&e.id){var t,r,n,o,i,a,l,c=null===(t=P.map)||void 0===t||null===(r=t.getLayer)||void 0===r||null===(n=r.call(t,null==e?void 0:e.id))||void 0===n?void 0:n.getLayoutProperty("visibility");null===(o=P.map)||void 0===o||null===(i=o.getLayer)||void 0===i||null===(a=i.call(o,null==e?void 0:e.id))||void 0===a||a.setLayoutProperty("visibility","none"===c?"visible":"none"),null===(l=P.map)||void 0===l||l.map.fire("zoom")}}},null!=e&&e.visible?n.createElement(p.Z,null):n.createElement(m.Z,null))},n.createElement(f.Z,{primary:null==e?void 0:e.id,secondary:""}))})))))}.bind({});L.parameters={},L.args={},L.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"() => {\n\tconst geoJsonArray = [sample_geojson_1, sample_geojson_2];\n\tconst [watchState, setWatchState] = useState(true);\n\tconst mapHook = useMap({ mapId: 'map_1' });\n\tconst mapState = useMapState({\n\t\tmapId: 'map_1',\n\t\twatch: {\n\t\t\tviewport: false,\n\t\t\tlayers: true,\n\t\t\tsources: false,\n\t\t},\n\t\tfilter: {\n\t\t\tincludeBaseLayers: false,\n\t\t},\n\t});\n\tconst [openSidebar, setOpenSidebar] = useState(true);\n\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tbuttons={\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant={openSidebar ? 'contained' : 'outlined'}\n\t\t\t\t\t\tonClick={() => setOpenSidebar(!openSidebar)}\n\t\t\t\t\t\tsx={{ marginRight: { xs: '0px', sm: '10px' } }}\n\t\t\t\t\t>\n\t\t\t\t\t\tShare Map State\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<MlShareMapState active={watchState} />\n\t\t\t{geoJsonArray.map((el, i) => (\n\t\t\t\t<MlGeoJsonLayer\n\t\t\t\t\tlayerId={'GeoJson_' + i}\n\t\t\t\t\ttype=\"line\"\n\t\t\t\t\tgeojson={el as unknown as Feature}\n\t\t\t\t\tkey={'GeoJson_' + i}\n\t\t\t\t/>\n\t\t\t))}\n\t\t\t<Sidebar open={openSidebar} setOpen={setOpenSidebar} name={'Share Map State'}>\n\t\t\t\t<ToggleButton\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tselected={watchState}\n\t\t\t\t\tvalue={watchState}\n\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\tsetWatchState(!watchState);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{watchState ? <CheckCircleOutlineIcon /> : <ErrorOutlineIcon />}\n\n\t\t\t\t\t{watchState ? 'active' : 'inactive'}\n\t\t\t\t</ToggleButton>\n\t\t\t\t<List dense key=\"layers\">\n\t\t\t\t\t{mapState.layers?.map((el) => (\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tkey={el?.id}\n\t\t\t\t\t\t\tsecondaryAction={\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tedge=\"end\"\n\t\t\t\t\t\t\t\t\taria-label=\"toggle visibility\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tif (el?.id) {\n\t\t\t\t\t\t\t\t\t\t\tconst currentVisibility = mapHook.map\n\t\t\t\t\t\t\t\t\t\t\t\t?.getLayer?.(el?.id)\n\t\t\t\t\t\t\t\t\t\t\t\t?.getLayoutProperty('visibility');\n\t\t\t\t\t\t\t\t\t\t\tmapHook.map\n\t\t\t\t\t\t\t\t\t\t\t\t?.getLayer?.(el?.id)\n\t\t\t\t\t\t\t\t\t\t\t\t?.setLayoutProperty(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'visibility',\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentVisibility === 'none' ? 'visible' : 'none'\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tmapHook.map?.map.fire('zoom');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{el?.visible ? <VisibilityIcon /> : <VisibilityOffIcon />}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListItemText primary={el?.id} secondary={''} />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t))}\n\t\t\t\t</List>\n\t\t\t</Sidebar>\n\t\t</>\n\t);\n}"}},L.parameters);var C=["ExampleConfig"]},89545:(e,t,r)=>{r.r(t),r.d(t,{ExampleConfig:()=>de,__namedExportsOrder:()=>ye,default:()=>fe});var n=r(67294),o=r(87888),i=r(4085),a=r(7726),l=r(18377),c=r(72740),u=r(42440),s=r(77957),p=r(94229),m=r(76956),f=r(31072),d=r(41733),y=r(30062),b=r(8044),v=r(6867),g=r(4625),S=r(70576),O=r(48885),h=r(14212),j=r(59334),w=r(75395),P=r(63261),E=r(90068),I=r(10803);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==M(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===M(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=e.propKey,r=e.value,o=e.setPaintProps;return n.createElement(I.Z,{value:r,label:"Color",onChange:function(e){o((function(r){return L(L({},r),{},C({},t,e))}))}})}try{ColorPicker.displayName="ColorPicker",ColorPicker.__docgenInfo={description:"",displayName:"ColorPicker",props:{key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},propKey:{defaultValue:null,description:"",name:"propKey",required:!0,type:{name:"string"}},setPaintProps:{defaultValue:null,description:"",name:"setPaintProps",required:!0,type:{name:"(paintProps: paintPropsType | ((current: paintPropsType) => paintPropsType)) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlSketchTool/LayerList/ColorPicker.tsx#ColorPicker"]={docgenInfo:ColorPicker.__docgenInfo,name:"ColorPicker",path:"src/components/MlSketchTool/LayerList/ColorPicker.tsx#ColorPicker"})}catch(e){}var T=r(2658),k=r(41828),Z=r(45116);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(this,arguments)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===A(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F={"line-color":"colorpicker","line-width":"slider","line-blur":"slider","fill-color":"colorpicker","circle-color":"colorpicker"},G=Object.keys(F),V={"line-blur":{step:1,min:1,max:100},"line-width":{step:1,min:1,max:100}};function J(e){var t=e.paintProps,r=void 0===t?{}:t,o=e.setPaintProps,i=(0,n.useRef)(Math.round(1e10*Math.random()));return n.createElement(n.Fragment,null,n.createElement(S.ZP,{sx:{boxShadow:"inset 0px 0px 10px rgb(50 50 50 / 10%)",borderRadius:"5px"},key:i+"_paintPropForm"},n.createElement(l.Z,null,Object.keys(r).map((function(e){return function(e,t){if(-1!==G.indexOf(e)){var i=n.createElement(T.Z,{id:e+"_label",gutterBottom:!0},e);switch(F[e]){case"slider":return n.createElement(n.Fragment,null,i,n.createElement(k.ZP,R({},V[e],{inputProps:{inputMode:"decimal",pattern:"[0-9]*"},value:r[e],onChange:function(t,r,n){r&&o((function(t){return D(D({},t),{},q({},e,r))}))}})));case"numberfield":return n.createElement(n.Fragment,null,i,n.createElement(Z.Z,{inputProps:{inputMode:"decimal",pattern:"[0-9]*"},value:r[e],onChange:function(t){var r;null!=t&&null!==(r=t.target)&&void 0!==r&&r.value&&o((function(r){return D(D({},r),{},q({},e,parseInt(t.target.value)))}))}}));case"colorpicker":return n.createElement(n.Fragment,null,i,n.createElement(_,{key:e,value:r[e],propKey:e,setPaintProps:o}))}}return null}(e,r[e])})))))}try{J.displayName="LayerPropertyForm",J.__docgenInfo={description:"",displayName:"LayerPropertyForm",props:{paintProps:{defaultValue:{value:"{}"},description:"",name:"paintProps",required:!1,type:{name:"paintPropsType"}},setPaintProps:{defaultValue:null,description:"",name:"setPaintProps",required:!0,type:{name:"(paintProps: paintPropsType | ((current: paintPropsType) => paintPropsType)) => void"}},layerType:{defaultValue:null,description:"",name:"layerType",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlSketchTool/LayerList/LayerPropertyForm.tsx#LayerPropertyForm"]={docgenInfo:J.__docgenInfo,name:"LayerPropertyForm",path:"src/components/MlSketchTool/LayerList/LayerPropertyForm.tsx#LayerPropertyForm"})}catch(e){}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e){var t,r,o=e.layerComponent,i=e.visible,a=void 0===i||i,l=e.type,c=void 0===l?"layer":l,u=e.name,s=e.description,p=e.configurable,m=z((0,n.useState)(!0),2),f=m[0],d=m[1],y=z((0,n.useState)(!1),2),b=y[0],g=y[1],I=z((0,n.useState)((null==o||null===(t=o.props)||void 0===t?void 0:t.paint)||(0,E.Z)((null==o||null===(r=o.props)||void 0===r?void 0:r.type)||(0,P.Z)(o.props.geojson))),2),M=I[0],x=I[1],L=(0,n.useMemo)((function(){return!!a&&f}),[a,f]),C=(0,n.useMemo)((function(){return"layer"===c?n.cloneElement(o,{layout:{visibility:L?"visible":"none"},paint:M}):n.createElement(n.Fragment,null)}),[c,o,M,L]),_=(0,n.useMemo)((function(){if("layer"===c){if(o.props.type)return o.props.type;if(o.props.geojson)return(0,P.Z)(o.props.geojson)}}),[o]);return n.createElement(n.Fragment,null,n.createElement(S.ZP,{secondaryAction:p?n.createElement(v.Z,{edge:"end","aria-label":"comments",onClick:function(){g((function(e){return!e}))}},n.createElement(w.Z,null)):void 0},n.createElement(O.Z,null,n.createElement(h.Z,{disabled:!a,checked:f,onClick:function(){d((function(e){return!e}))}})),n.createElement(j.Z,{primary:u,secondary:s}),C),p&&b&&n.createElement(J,{paintProps:M,setPaintProps:x,layerType:_}))}const U=N;try{N.displayName="LayerListItem",N.__docgenInfo={description:"",displayName:"LayerListItem",props:{layerComponent:{defaultValue:null,description:"",name:"layerComponent",required:!0,type:{name:"Element"}},visible:{defaultValue:{value:"true"},description:"",name:"visible",required:!1,type:{name:"boolean"}},configurable:{defaultValue:null,description:"",name:"configurable",required:!0,type:{name:"boolean"}},type:{defaultValue:{value:"layer"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"background"'},{value:'"layer"'},{value:'"background-labels"'},{value:'"wms-layer"'},{value:'"vector-tile-layer"'}]}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string | undefined"}},additionalButtons:{defaultValue:null,description:"",name:"additionalButtons",required:!1,type:{name:"Element | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlSketchTool/LayerList/LayerListItem.tsx#LayerListItem"]={docgenInfo:N.__docgenInfo,name:"LayerListItem",path:"src/components/MlSketchTool/LayerList/LayerListItem.tsx#LayerListItem"})}catch(e){}var Y=r(47320);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function W(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==H(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===H(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){if(e){if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ne=function(e){var t,r,S,O,h=(0,f.Z)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),j=ee((0,n.useState)(),2),w=j[0],P=j[1],E=ee((0,n.useState)({activeGeometryIndex:0,selectedGeoJson:void 0,geometries:[],drawMode:""}),2),I=E[0],M=E[1],x=Q({},e.buttonStyleOverride),L=(0,n.useCallback)((function(e){console.log(e),I.drawMode!==e?M((function(t){return{drawMode:e,geometries:t.geometries,activeGeometryIndex:0,selectedGeoJson:void 0}})):M((function(e){return{drawMode:"",geometries:e.geometries,activeGeometryIndex:0,selectedGeoJson:void 0}}))}),[I]);return n.createElement(n.Fragment,null,n.createElement(l.Z,{sx:{zIndex:104}},n.createElement(b.Z,null,n.createElement(g.Z,{title:"point"},n.createElement(v.Z,{sx:x,onClick:function(){return L("draw_point")}},n.createElement(o.Z,null))),n.createElement(g.Z,{title:"Line"},n.createElement(v.Z,{sx:x,onClick:function(){return L("draw_line_string")}},n.createElement(i.Z,null))),n.createElement(g.Z,{title:"Polygon"},n.createElement(v.Z,{sx:x,onClick:function(){return L("custom_polygon")}},n.createElement(a.Z,null))))),I.drawMode&&n.createElement(c.Z,{mode:"edit"===I.drawMode?"LineString"===(null===(t=I.selectedGeoJson)||void 0===t||null===(r=t.geometry)||void 0===r?void 0:r.type)?"simple_select":"custom_select":I.drawMode,geojson:"edit"===I.drawMode?I.selectedGeoJson:void 0,onChange:function(e){M((function(t){var r=W(I.geometries);if("edit"===I.drawMode&&I.selectedGeoJson)r[r.indexOf(I.selectedGeoJson)]=e[0];else if(I.activeGeometryIndex)r[I.activeGeometryIndex]=e[0];else{var n=e[0];n.properties.id=n.id,r.push(n)}return Q(Q({},t),{},{activeGeometryIndex:"edit"!==t.drawMode&&"Point"!==e[0].geometry.type?r.length-1:t.activeGeometryIndex,geometries:r})}))},onFinish:function(){M((function(e){return Q(Q({},e),{},{drawMode:"",activeGeometryIndex:"draw_point"!==e.drawMode?0:e.activeGeometryIndex,selectedGeoJson:"draw_point"!==e.drawMode?void 0:e.selectedGeoJson})}))}}),n.createElement(u.Z,{sx:{zIndex:105}},I.geometries.map((function(t){return n.createElement(n.Fragment,null,n.createElement(l.Z,{key:t.id,sx:{display:"flex",flexDirection:"column"}},n.createElement("br",null),n.createElement(l.Z,{flexDirection:"row",sx:{"&:hover":{backgroundColor:"rgb(177, 177, 177, 0.2)"}},onMouseOver:function(){P(t)},onMouseLeave:function(){P(void 0)}},n.createElement(U,{sx:x,visible:!0,configurable:!0,layerComponent:n.createElement(m.Z,{mapId:e.mapId,geojson:t,layerId:String(t.id)}),type:"layer",name:String(t.id),description:t.geometry.type},n.createElement(p.Z,null)),n.createElement(v.Z,{onClick:function(){var e;null==h||null===(e=h.map)||void 0===e||e.map.setCenter("Point"===t.geometry.type?t.geometry.coordinates:y.MqI(t).geometry.coordinates)}},n.createElement(Y.Z,null)),n.createElement(v.Z,{sx:x,onClick:function(){M((function(e){return Q(Q({},e),{},{selectedGeoJson:t,drawMode:"edit"})}))}},n.createElement(s.Z,null)),n.createElement(v.Z,{sx:x,onClick:function(){var e;e=t,M((function(t){var r=W(t.geometries);return r.splice(r.indexOf(e),1),Q(Q({},t),{},{geometries:r,activeGeometryIndex:t.activeGeometryIndex-1})}))}},n.createElement(d.Z,null)))))})),w&&n.createElement(m.Z,{mapId:e.mapId,geojson:{type:"FeatureCollection",features:[w]},type:"line",layerId:"highlightBorder",paint:{"line-color":"#dd9900","line-opacity":.4,"line-width":10}})),"edit"===I.drawMode&&n.createElement(l.Z,null,"Edit ",null===(S=I.selectedGeoJson)||void 0===S||null===(O=S.geometry)||void 0===O?void 0:O.type))};ne.defaultProps={mapId:void 0,buttonStyleOverride:{}};const oe=ne;try{ne.displayName="MlSketchTool",ne.__docgenInfo={description:"Component template",displayName:"MlSketchTool",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},buttonStyleOverride:{defaultValue:{value:"{}"},description:"Style attribute for the button-style\nhttps://mui.com/system/getting-started/the-sx-prop/",name:"buttonStyleOverride",required:!1,type:{name:"SxProps<{}> | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlSketchTool/MlSketchTool.tsx#MlSketchTool"]={docgenInfo:ne.__docgenInfo,name:"MlSketchTool",path:"src/components/MlSketchTool/MlSketchTool.tsx#MlSketchTool"})}catch(e){}var ie=r(54553),ae=r(17781),le=r(18434),ce=r(72642);function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ue(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ue(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const fe={title:"MapComponents/MlSketchTool",component:oe,argTypes:{},decorators:ie.Z};var de=function(){var e,t,r=(e=(0,n.useState)(!0),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return n.createElement(n.Fragment,null,n.createElement(le.Z,{buttons:n.createElement(n.Fragment,null,n.createElement(ce.Z,{variant:o?"contained":"outlined",onClick:function(){return i(!o)},sx:{marginRight:{xs:"0px",sm:"10px"}}},"Sketch Tool"))}),n.createElement(ae.Z,{open:o,setOpen:i,name:"Sketch Tool"},n.createElement(oe,null)))}.bind({});de.parameters={},de.args={},de.parameters=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({storySource:{source:"() => {\n\tconst [openSidebar, setOpenSidebar] = useState(true);\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tbuttons={\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant={openSidebar ? 'contained' : 'outlined'}\n\t\t\t\t\t\t\tonClick={() => setOpenSidebar(!openSidebar)}\n\t\t\t\t\t\t\tsx={{ marginRight: { xs: '0px', sm: '10px' } }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSketch Tool\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<Sidebar\n\t\t\t\topen={openSidebar}\n\t\t\t\tsetOpen={setOpenSidebar}\n\t\t\t\tname={'Sketch Tool'}\n\t\t\t>\n\t\t\t\t<MlSketchTool />\n\t\t\t</Sidebar>\n\t\t</>\n\t);\n}"}},de.parameters);var ye=["ExampleConfig"]},78245:(e,t,r)=>{var n=r(67294),o=r(45697),i=r.n(o),a=r(31072);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){var t=(0,a.Z)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=(0,n.useRef)(e.layerId||"MlOsmLayer-"+t.componentId);return(0,n.useEffect)((function(){t.map&&(t.map.addSource(r.current,u({type:"raster",tileSize:256},e.sourceOptions),t.componentId),t.map.addLayer(u({id:r.current,type:"raster",source:r.current,minzoom:0,maxzoom:22},e.layerOptions),e.insertBeforeLayer,t.componentId))}),[e,t.map]),n.createElement(n.Fragment,null)};p.propTypes={mapId:i().string,idPrefix:i().string,sourceOptions:i().object,layerOptions:i().object,insertBeforeLayer:i().string},p.__docgenInfo={description:"Adds a standard OSM tile layer to the maplibre-gl instancereference by\nprops.mapId\n\n@component",methods:[],displayName:"MlOsmLayer",props:{mapId:{description:"Id of the target MapLibre instance in mapHook",type:{name:"string"},required:!1},idPrefix:{description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance",type:{name:"string"},required:!1},sourceOptions:{description:"Options object that will be used as first parameter on the MapLibreGl.addSource call see MapLibre source options documentation.",type:{name:"object"},required:!1},layerOptions:{description:"Options object that will be used as first parameter on the MapLibreGl.addLayer call see MapLibre layer options documentation.",type:{name:"object"},required:!1},insertBeforeLayer:{description:'The layerId of an existing layer this layer should be rendered visually beneath\nhttps://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property',type:{name:"string"},required:!1}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlOsmLayer/MlOsmLayer.js"]={name:"MlOsmLayer",docgenInfo:p.__docgenInfo,path:"src/components/MlOsmLayer/MlOsmLayer.js"})},58725:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(67294),o=r(31072);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){var t=(0,n.useRef)(0),r=(0,o.Z)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),a=i((0,n.useState)(0),2),l=a[0],c=a[1],u=i((0,n.useState)(""),2),s=u[0],p=u[1],m=(0,n.useCallback)((function(){var n,o;if(r.map&&(null===(n=r.map)||void 0===n?void 0:n.map.getZoom())!==t.current){t.current=null===(o=r.map)||void 0===o?void 0:o.map.getZoom();var i=e.maxWidth||100,a=r.map.map._container.clientHeight/2,l=r.map.map.unproject([0,a]),c=r.map.map.unproject([i,a]),u=l.distanceTo(c);if("imperial"===e.unit){var s=3.2808*u;s>5280?f(i,s/5280,r.map.map._getUIString("ScaleControl.Miles")):f(i,s,r.map.map._getUIString("ScaleControl.Feet"))}else"nautical"===e.unit?f(i,u/1852,r.map.map._getUIString("ScaleControl.NauticalMiles")):u>=1e3?f(i,u/1e3,r.map.map._getUIString("ScaleControl.Kilometers")):f(i,u,r.map.map._getUIString("ScaleControl.Meters"))}}),[r.map,e.unit,e.maxWidth]);(0,n.useEffect)((function(){if(r.map){var e=m;return r.map.on("move",e,r.componentId),m(),function(){var t;null===(t=r.map)||void 0===t||t.map.off("move",e)}}}),[r.map,m]);var f=function(e,t,r){var n=d(t);c(e*(n/t)),p(n+"&nbsp;"+r)},d=function(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),r=e/t;return t*(r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r))};return n.createElement(n.Fragment,null,n.createElement("div",{style:{backgroundColor:"hsla(0,0%,100%,.75)",fontSize:"10px",border:"2px solid #333",borderTop:"#333",padding:"0 5px",color:"#333",boxSizing:"border-box",width:l+"px",fontFamily:"sans-serif"},dangerouslySetInnerHTML:{__html:s}}))};const c=l;try{l.displayName="MlScaleReference",l.__docgenInfo={description:"",displayName:"MlScaleReference",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"number | undefined"}},unit:{defaultValue:null,description:"",name:"unit",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlScaleReference/MlScaleReference.tsx#MlScaleReference"]={docgenInfo:l.__docgenInfo,name:"MlScaleReference",path:"src/components/MlScaleReference/MlScaleReference.tsx#MlScaleReference"})}catch(e){}},46871:(e,t,r)=>{r.d(t,{Z:()=>v});var n=r(67294),o=r(45697),i=r.n(o),a=r(74736),l=r(28721),c=r(90686);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(){var e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(null!=e&&e.layers?e.layers:"[]"),e},y=d(),b=function(e){var t,r,o=(0,n.useContext)(a.Z),i=(0,n.useRef)(!1),u=(0,n.useRef)(),s=(t=(0,n.useState)(void 0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=s[0],b=s[1],v=(0,n.useRef)({}),g=(0,n.useRef)((e.idPrefix?e.idPrefix:"MlShareMapState-")+(0,l.Z)()),S=(0,c.Z)({watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}}),O=(0,n.useRef)(!1),h=(0,n.useRef)(),j=(0,n.useRef)({viewport:{center:!1,bearing:!1,pitch:!1,zoom:!1},layers:p({},v)}),w=(0,n.useRef)({}),P=(0,n.useCallback)((function(){if(e.active){var t=[];for(var r in S.layers){var n,o,i;t.push({id:null===(n=S.layers[r])||void 0===n?void 0:n.id,type:null===(o=S.layers[r])||void 0===o?void 0:o.type,visible:null===(i=S.layers[r])||void 0===i?void 0:i.visible})}E();var a=new URLSearchParams(p(p(p({},d()),w.current),{},{layers:JSON.stringify(t)}));JSON.parse(Object.fromEntries(a).layers).forEach((function(e){v.current[e.id]=!1}));var l=new URLSearchParams(window.location.search);a.toString()!==l.toString()&&window.history.pushState(p({},w.current),document.title,"?"+a.toString())}}),[S.layers,e.active]);(0,n.useEffect)((function(){var e=g.current;return w.current=d(),function(){u.current&&(u.current.cleanup(e),u.current=void 0),i.current=!1}}),[]),(0,n.useEffect)((function(){u.current&&P()}),[P]),(0,n.useEffect)((function(){if(u.current){var e=P;return u.current.on("moveend",e,g.current),function(){var t;null===(t=u.current)||void 0===t||t.map.off("moveend",e)}}}),[P,m]),(0,n.useEffect)((function(){var t;null!=o&&null!==(t=o.mapExists)&&void 0!==t&&t.call(o,e.mapId)&&!i.current&&(i.current=!0,u.current=o.getMap(e.mapId),b(u.current),w.current.lat&&w.current.lng&&I())}),[o.mapIds,o,e.mapId,e.active]),(0,n.useEffect)((function(){var e;if(null!=S&&null!==(e=S.layers)&&void 0!==e&&e.length){var t;for(var r in void 0===h.current&&(h.current=void 0,null==y||null===(t=y.layers)||void 0===t||t.forEach((function(e){var t;null!==(t=h.current)&&void 0!==t&&t[e.id]&&(h.current[e.id]=!1)}))),h.current){var n=!0;if(!1===h.current[r]&&(n=!1),n)return}y.layers&&y.layers.forEach((function(e){var t,r,n,o;null!==(t=u.current)&&void 0!==t&&t.map.getLayer(e.id)&&!1===(null===(r=h.current)||void 0===r?void 0:r[e.id])&&(h.current[e.id]=!0,null===(n=u.current.map)||void 0===n||null===(o=n.getLayer(e.id))||void 0===o||o.setLayoutProperty("visibility",e.visible?"visible":"none"))}))}}),[S.layers,e.mapId,e.active]),(0,n.useEffect)((function(){m&&S.layers&&(e.active||m.cleanup(g.current))}),[e.active,m,S.layers]);var E=function(){var e,t,r,n,o;w.current.lat=null===(e=u.current)||void 0===e?void 0:e.map.getCenter().lat,w.current.lng=null===(t=u.current)||void 0===t?void 0:t.map.getCenter().lng,w.current.zoom=null===(r=u.current)||void 0===r?void 0:r.map.getZoom(),w.current.bearing=null===(n=u.current)||void 0===n?void 0:n.map.getBearing(),w.current.pitch=null===(o=u.current)||void 0===o?void 0:o.map.getPitch()},I=function(){var e,t,r,n;j.current.viewport.center||(j.current.viewport.center=!0,w.current.lng&&w.current.lat&&(null===(e=u.current)||void 0===e||e.map.setCenter([w.current.lng,w.current.lat])),w.current.zoom&&(null===(t=u.current)||void 0===t||t.map.setZoom(w.current.zoom)),w.current.bearing&&(null===(r=u.current)||void 0===r||r.map.setBearing(w.current.bearing)),w.current.pitch&&(null===(n=u.current)||void 0===n||n.map.setPitch(w.current.pitch)));O.current=!0};return window.onpopstate=function(e){var t;e.state&&e.state.lng&&e.state.lat&&e.state.zoom&&(null===(t=u.current)||void 0===t||t.map.easeTo({zoom:e.state.zoom,center:[e.state.lng,e.state.lat]}))},n.createElement(n.Fragment,null)};b.defaultProps={mapId:void 0},b.propTypes={mapId:i().string};const v=b;try{b.displayName="MlShareMapState",b.__docgenInfo={description:"",displayName:"MlShareMapState",props:{mapId:{defaultValue:{value:"undefined"},description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},idPrefix:{defaultValue:null,description:"",name:"idPrefix",required:!1,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlShareMapState/MlShareMapState.tsx#MlShareMapState"]={docgenInfo:b.__docgenInfo,name:"MlShareMapState",path:"src/components/MlShareMapState/MlShareMapState.tsx#MlShareMapState"})}catch(e){}}}]);