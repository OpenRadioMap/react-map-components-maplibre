"use strict";(self.webpackChunk_mapcomponents_react_maplibre=self.webpackChunk_mapcomponents_react_maplibre||[]).push([[140],{8692:(t,e,n)=>{function r(t,e){return Array.from(t.getElementsByTagName(e))}function o(t){return"#"===t[0]?t:`#${t}`}function i(t){return t?.normalize(),t&&t.textContent||""}function s(t,e,n){const r=t.getElementsByTagName(e),o=r.length?r[0]:null;return o&&n&&n(o),o}function a(t,e,n){const r={};if(!t)return r;const o=t.getElementsByTagName(e),i=o.length?o[0]:null;return i&&n?n(i,r):r}function c(t,e,n){const r=i(s(t,e));return r&&n&&n(r)||{}}function l(t,e,n){const r=parseFloat(i(s(t,e)));if(!isNaN(r))return r&&n&&n(r)||{}}function u(t,e,n){const r=parseFloat(i(s(t,e)));if(!isNaN(r))return n&&n(r),r}function p(t,e){const n={};for(const r of e)c(t,r,(t=>{n[r]=t}));return n}function f(t){return 1===t?.nodeType}function g(t){return a(t,"line",(t=>Object.assign({},c(t,"color",(t=>({stroke:`#${t}`}))),l(t,"opacity",(t=>({"stroke-opacity":t}))),l(t,"width",(t=>({"stroke-width":96*t/25.4}))))))}function h(t){let e=[];if(null===t)return e;for(const n of Array.from(t.childNodes)){if(!f(n))continue;const t=m(n.nodeName);if("gpxtpx:TrackPointExtension"===t)e=e.concat(h(n));else{const r=i(n);e.push([t,d(r)])}}return e}function m(t){return["heart","gpxtpx:hr","hr"].includes(t)?"heart":t}function d(t){const e=parseFloat(t);return isNaN(e)?t:e}function y(t){const e=[parseFloat(t.getAttribute("lon")||""),parseFloat(t.getAttribute("lat")||"")];if(isNaN(e[0])||isNaN(e[1]))return null;u(t,"ele",(t=>{e.push(t)}));const n=s(t,"time");return{coordinates:e,time:n?i(n):null,extendedValues:h(s(t,"extensions"))}}function b(t){const e=p(t,["name","cmt","desc","type","time","keywords"]),n=Array.from(t.getElementsByTagNameNS("http://www.garmin.com/xmlschemas/GpxExtensions/v3","*"));for(const r of n)r.parentNode?.parentNode===t&&(e[r.tagName.replace(":","_")]=i(r));const o=r(t,"link");return o.length&&(e.links=o.map((t=>Object.assign({href:t.getAttribute("href")},p(t,["text","type"]))))),e}function N(t,e){const n=r(t,e),o=[],i=[],s={};for(let t=0;t<n.length;t++){const e=y(n[t]);if(e){o.push(e.coordinates),e.time&&i.push(e.time);for(const[r,o]of e.extendedValues){const e="heart"===r?r:r.replace("gpxtpx:","")+"s";s[e]||(s[e]=Array(n.length).fill(null)),s[e][t]=o}}}if(!(o.length<2))return{line:o,times:i,extendedValues:s}}function k(t){const e=N(t,"rtept");if(e)return{type:"Feature",properties:Object.assign({_gpxType:"rte"},b(t),g(s(t,"extensions"))),geometry:{type:"LineString",coordinates:e.line}}}function x(t){const e=r(t,"trkseg"),n=[],o=[],i=[];for(const t of e){const e=N(t,"trkpt");e&&(i.push(e),e.times&&e.times.length&&o.push(e.times))}if(0===i.length)return null;const a=i.length>1,c=Object.assign({_gpxType:"trk"},b(t),g(s(t,"extensions")),o.length?{coordinateProperties:{times:a?o:o[0]}}:{});for(const t of i){n.push(t.line),c.coordinateProperties||(c.coordinateProperties={});const e=c.coordinateProperties,r=Object.entries(t.extendedValues);for(let t=0;t<r.length;t++){const[n,o]=r[t];a?(e[n]||(e[n]=i.map((t=>new Array(t.line.length).fill(null)))),e[n][t]=o):e[n]=o}}return{type:"Feature",properties:c,geometry:a?{type:"MultiLineString",coordinates:n}:{type:"LineString",coordinates:n[0]}}}function v(t){const e=Object.assign(b(t),p(t,["sym"])),n=y(t);return n?{type:"Feature",properties:e,geometry:{type:"Point",coordinates:n.coordinates}}:null}function*A(t){for(const e of r(t,"trk")){const t=x(e);t&&(yield t)}for(const e of r(t,"rte")){const t=k(e);t&&(yield t)}for(const e of r(t,"wpt")){const t=v(e);t&&(yield t)}}function w(t){return{type:"FeatureCollection",features:Array.from(A(t))}}n.r(e),n.d(e,{gpx:()=>w,gpxGen:()=>A,kml:()=>ut,kmlGen:()=>lt,kmlWithFolders:()=>ct,tcx:()=>G,tcxGen:()=>j});const S="http://www.garmin.com/xmlschemas/ActivityExtension/v2",F=[["heartRate","heartRates"],["Cadence","cadences"],["Speed","speeds"],["Watts","watts"]],P=[["TotalTimeSeconds","totalTimeSeconds"],["DistanceMeters","distanceMeters"],["MaximumSpeed","maxSpeed"],["AverageHeartRateBpm","avgHeartRate"],["MaximumHeartRateBpm","maxHeartRate"],["AvgSpeed","avgSpeed"],["AvgWatts","avgWatts"],["MaxWatts","maxWatts"]];function T(t,e){const n=[];for(const[r,o]of e){let e=s(t,r);if(!e){const n=t.getElementsByTagNameNS(S,r);n.length&&(e=n[0])}const a=parseFloat(i(e));isNaN(a)||n.push([o,a])}return n}function M(t){const e=[u(t,"LongitudeDegrees"),u(t,"LatitudeDegrees")];if(void 0===e[0]||isNaN(e[0])||void 0===e[1]||isNaN(e[1]))return null;const n=s(t,"HeartRateBpm"),r=i(s(t,"Time"));return s(t,"AltitudeMeters",(t=>{const n=parseFloat(i(t));isNaN(n)||e.push(n)})),{coordinates:e,time:r||null,heartRate:n?parseFloat(i(n)):null,extensions:T(t,F)}}function O(t){const e=r(t,"Trackpoint"),n=[],o=[],i=[];if(e.length<2)return null;const s={},a={extendedProperties:s};for(let t=0;t<e.length;t++){const r=M(e[t]);if(null===r)continue;n.push(r.coordinates);const{time:a,heartRate:c,extensions:l}=r;a&&o.push(a),c&&i.push(c);for(const[n,r]of l)s[n]||(s[n]=Array(e.length).fill(null)),s[n][t]=r}return n.length<2?null:Object.assign(a,{line:n,times:o,heartRates:i})}function L(t){const e=r(t,"Track"),n=[],o=[],s=[],c=[];let l;const u=Object.assign(Object.fromEntries(T(t,P)),a(t,"Name",(t=>({name:i(t)}))));for(const t of e)l=O(t),l&&(n.push(l.line),l.times.length&&o.push(l.times),l.heartRates.length&&s.push(l.heartRates),c.push(l.extendedProperties));for(let t=0;t<c.length;t++){const r=c[t];for(const o in r)1===e.length?l&&(u[o]=l.extendedProperties[o]):(u[o]||(u[o]=n.map((t=>Array(t.length).fill(null)))),u[o][t]=r[o])}return 0===n.length?null:((o.length||s.length)&&(u.coordinateProperties=Object.assign(o.length?{times:1===n.length?o[0]:o}:{},s.length?{heart:1===n.length?s[0]:s}:{})),{type:"Feature",properties:u,geometry:1===n.length?{type:"LineString",coordinates:n[0]}:{type:"MultiLineString",coordinates:n}})}function*j(t){for(const e of r(t,"Lap")){const t=L(e);t&&(yield t)}for(const e of r(t,"Courses")){const t=L(e);t&&(yield t)}}function G(t){return{type:"FeatureCollection",features:Array.from(j(t))}}function R(t,e){const n={},r="stroke"==e||"fill"===e?e:e+"-color";return"#"===t[0]&&(t=t.substring(1)),6===t.length||3===t.length?n[r]="#"+t:8===t.length&&(n[e+"-opacity"]=parseInt(t.substring(0,2),16)/255,n[r]="#"+t.substring(6,8)+t.substring(4,6)+t.substring(2,4)),n}function _(t,e,n){const r={};return u(t,e,(t=>{r[n]=t})),r}function C(t,e){return a(t,"color",(t=>R(i(t),e)))}function B(t){return a(t,"Icon",((t,e)=>(c(t,"href",(t=>{e.icon=t})),e)))}function E(t){return Object.assign({},function(t){return a(t,"PolyStyle",((t,e)=>Object.assign(e,a(t,"color",(t=>R(i(t),"fill"))),c(t,"fill",(t=>{if("0"===t)return{"fill-opacity":0}})),c(t,"outline",(t=>{if("0"===t)return{"stroke-opacity":0}})))))}(t),function(t){return a(t,"LineStyle",(t=>Object.assign(C(t,"stroke"),_(t,"width","stroke-width"))))}(t),function(t){return a(t,"LabelStyle",(t=>Object.assign(C(t,"label"),_(t,"scale","label-scale"))))}(t),function(t){return a(t,"IconStyle",(t=>Object.assign(C(t,"icon"),_(t,"scale","icon-scale"),_(t,"heading","icon-heading"),a(t,"hotSpot",(t=>{const e=parseFloat(t.getAttribute("x")||""),n=parseFloat(t.getAttribute("y")||""),r=t.getAttribute("xunits")||"",o=t.getAttribute("yunits")||"";return isNaN(e)||isNaN(n)?{}:{"icon-offset":[e,n],"icon-offset-units":[r,o]}})),B(t))))}(t))}const D=t=>Number(t),W={string:t=>t,int:D,uint:D,short:D,ushort:D,float:D,double:D,bool:t=>Boolean(t)};function H(t,e){return a(t,"ExtendedData",((t,n)=>{for(const e of r(t,"Data"))n[e.getAttribute("name")||""]=i(s(e,"value"));for(const o of r(t,"SimpleData")){const t=o.getAttribute("name")||"",r=e[t]||W.string;n[t]=r(i(o))}return n}))}function U(t){const e=s(t,"description");for(const t of Array.from(e?.childNodes||[]))if(4===t.nodeType)return{description:{"@type":"html",value:i(t)}};return{}}function I(t){return a(t,"TimeSpan",(t=>({timespan:{begin:i(s(t,"begin")),end:i(s(t,"end"))}})))}function V(t){return a(t,"TimeStamp",(t=>({timestamp:i(s(t,"when"))})))}function $(t,e){return c(t,"styleUrl",(t=>(t=o(t),e[t]?Object.assign({styleUrl:t},e[t]):{styleUrl:t})))}const q=/\s*/g,z=/^\s*|\s*$/g,Q=/\s+/;function J(t){return t.replace(q,"").split(",").map(parseFloat).filter((t=>!isNaN(t))).slice(0,3)}function K(t){return t.replace(z,"").split(Q).map(J).filter((t=>t.length>=2))}function X(t){let e=r(t,"coord");var n;0===e.length&&(n=t,"coord","*",e=Array.from(n.getElementsByTagNameNS("*","coord")));const o=e.map((t=>i(t).split(" ").map(parseFloat)));return 0===o.length?null:{geometry:o.length>2?{type:"LineString",coordinates:o}:{type:"Point",coordinates:o[0]},times:r(t,"when").map((t=>i(t)))}}function Y(t){if(0===t.length)return t;const e=t[0],n=t[t.length-1];let r=!0;for(let t=0;t<Math.max(e.length,n.length);t++)if(e[t]!==n[t]){r=!1;break}return r?t:t.concat([t[0]])}function Z(t){return i(s(t,"coordinates"))}function tt(t){let e=[],n=[];for(let o=0;o<t.childNodes.length;o++){const i=t.childNodes.item(o);if(f(i))switch(i.tagName){case"MultiGeometry":case"MultiTrack":case"gx:MultiTrack":{const t=tt(i);e=e.concat(t.geometries),n=n.concat(t.coordTimes);break}case"Point":{const t=J(Z(i));t.length>=2&&e.push({type:"Point",coordinates:t});break}case"LinearRing":case"LineString":{const t=K(Z(i));t.length>=2&&e.push({type:"LineString",coordinates:t});break}case"Polygon":{const t=[];for(const e of r(i,"LinearRing")){const n=Y(K(Z(e)));n.length>=4&&t.push(n)}t.length&&e.push({type:"Polygon",coordinates:t});break}case"Track":case"gx:Track":{const t=X(i);if(!t)break;const{times:r,geometry:o}=t;e.push(o),r.length&&n.push(r);break}}}return{geometries:e,coordTimes:n}}function et(t,e,n,r){const{coordTimes:o,geometries:i}=tt(t),s=function(t){return 0===t.length?null:1===t.length?t[0]:{type:"GeometryCollection",geometries:t}}(i);if(!s&&r.skipNullGeometry)return null;const a={type:"Feature",geometry:s,properties:Object.assign(p(t,["name","address","visibility","open","phoneNumber","description"]),U(t),$(t,e),E(t),H(t,n),I(t),V(t),o.length?{coordinateProperties:{times:1===o.length?o[0]:o}}:{})};void 0!==a.properties?.visibility&&(a.properties.visibility="0"!==a.properties.visibility);const c=t.getAttribute("id");return null!==c&&""!==c&&(a.id=c),a}const nt=Math.PI/180;function rt(t,e,n,r){const o=function(t){return s(t,"gx:LatLonQuad")?{geometry:{type:"Polygon",coordinates:[Y(K(Z(t)))]}}:function(t){const e=s(t,"LatLonBox");if(e){const t=u(e,"north"),n=u(e,"west"),r=u(e,"east"),o=u(e,"south"),i=u(e,"rotation");if("number"==typeof t&&"number"==typeof o&&"number"==typeof n&&"number"==typeof r){const e=[n,o,r,t];let s=[[[n,t],[r,t],[r,o],[n,o],[n,t]]];return"number"==typeof i&&(s=function(t,e,n){const r=[(t[0]+t[2])/2,(t[1]+t[3])/2];return[e[0].map((t=>{const e=t[1]-r[1],o=t[0]-r[0],i=Math.sqrt(Math.pow(e,2)+Math.pow(o,2)),s=Math.atan2(e,o)+n*nt;return[r[0]+Math.cos(s)*i,r[1]+Math.sin(s)*i]}))]}(e,s,i)),{bbox:e,geometry:{type:"Polygon",coordinates:s}}}}return null}(t)}(t),i=o?.geometry||null;if(!i&&r.skipNullGeometry)return null;const a={type:"Feature",geometry:i,properties:Object.assign({"@geometry-type":"groundoverlay"},p(t,["name","address","visibility","open","phoneNumber","description"]),U(t),$(t,e),E(t),B(t),H(t,n),I(t),V(t))};o?.bbox&&(a.bbox=o.bbox),void 0!==a.properties?.visibility&&(a.properties.visibility="0"!==a.properties.visibility);const c=t.getAttribute("id");return null!==c&&""!==c&&(a.id=c),a}function ot(t){let e=t.getAttribute("id");const n=t.parentNode;return!e&&f(n)&&"CascadingStyle"===n.localName&&(e=n.getAttribute("kml:id")||n.getAttribute("id")),o(e||"")}function it(t){const e={};for(const n of r(t,"Style"))e[ot(n)]=E(n);for(const n of r(t,"StyleMap")){const t=o(n.getAttribute("id")||"");c(n,"styleUrl",(n=>{n=o(n),e[n]&&(e[t]=e[n])}))}return e}function st(t){const e={};for(const n of r(t,"SimpleField"))e[n.getAttribute("name")||""]=W[n.getAttribute("type")||""]||W.string;return e}const at=["name","visibility","open","address","description","phoneNumber","visibility"];function ct(t,e={skipNullGeometry:!1}){const n=it(t),r=st(t),o={type:"root",children:[]};return function t(e,o,s){if(f(e))switch(e.tagName){case"GroundOverlay":{const t=rt(e,n,r,s);t&&o.children.push(t);break}case"Placemark":{const t=et(e,n,r,s);t&&o.children.push(t);break}case"Folder":{const t=function(t){const e={};for(const n of Array.from(t.childNodes))f(n)&&at.includes(n.tagName)&&(e[n.tagName]=i(n));return{type:"folder",meta:e,children:[]}}(e);o.children.push(t),o=t;break}}if(e.childNodes)for(let n=0;n<e.childNodes.length;n++)t(e.childNodes[n],o,s)}(t,o,e),o}function*lt(t,e={skipNullGeometry:!1}){const n=it(t),o=st(t);for(const i of r(t,"Placemark")){const t=et(i,n,o,e);t&&(yield t)}for(const i of r(t,"GroundOverlay")){const t=rt(i,n,o,e);t&&(yield t)}}function ut(t,e={skipNullGeometry:!1}){return{type:"FeatureCollection",features:Array.from(lt(t,e))}}},19592:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});class r{constructor(t=[],e=o){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const o=t-1>>1,i=e[o];if(n(r,i)>=0)break;e[t]=i,t=o}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,o=e[t];for(;t<r;){let r=1+(t<<1),i=e[r];const s=r+1;if(s<this.length&&n(e[s],i)<0&&(r=s,i=e[s]),n(i,o)>=0)break;e[t]=i,t=r}e[t]=o}}function o(t,e){return t<e?-1:t>e?1:0}},57836:(t,e,n)=>{function r(t){return t}function o(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return i(t,e)}))}:i(t,e)}function i(t,e){var n=e.id,o=e.bbox,i=null==e.properties?{}:e.properties,s=function(t,e){var n=function(t){if(null==t)return r;var e,n,o=t.scale[0],i=t.scale[1],s=t.translate[0],a=t.translate[1];return function(t,r){r||(e=n=0);var c=2,l=t.length,u=new Array(l);for(u[0]=(e+=t[0])*o+s,u[1]=(n+=t[1])*i+a;c<l;)u[c]=t[c],++c;return u}}(t.transform),o=t.arcs;function i(t,e){e.length&&e.pop();for(var r=o[t<0?~t:t],i=0,s=r.length;i<s;++i)e.push(n(r[i],i));t<0&&function(t,e){for(var n,r=t.length,o=r-e;o<--r;)n=t[o],t[o++]=t[r],t[r]=n}(e,s)}function s(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function c(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(c)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=s(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(s);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}(t,e);return null==n&&null==o?{type:"Feature",properties:i,geometry:s}:null==o?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:o,properties:i,geometry:s}}n.d(e,{c:()=>o})},88408:()=>{Object.prototype.hasOwnProperty;var t=new ArrayBuffer(16);new Float64Array(t),new Uint32Array(t)}}]);