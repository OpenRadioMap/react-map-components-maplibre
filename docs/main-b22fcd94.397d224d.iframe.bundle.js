"use strict";(self.webpackChunk_mapcomponents_react_maplibre=self.webpackChunk_mapcomponents_react_maplibre||[]).push([[350],{59732:(t,e,r)=>{r.r(e),r.d(e,{Overlay:()=>d,Toolbar:()=>f,__namedExportsOrder:()=>y,default:()=>m});var n=r(67294),o=r(58725),a=r(18434),i=r(54553),l=r(98396);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const m={title:"MapComponents/MlScaleReference",component:o.Z,argTypes:{url:{},layer:{}},decorators:i.Z};var f=function(t){return n.createElement(a.Z,{unmovableButtons:n.createElement(o.Z,t)})}.bind({});f.args={show:"toolbar"};var d=function(t){var e=(0,l.Z)("(max-width:900px)");return n.createElement("div",{style:{position:"absolute",zIndex:1e5,bottom:e?"40px":"20px",right:"20px"}},n.createElement(o.Z,t))}.bind({});d.args={show:"overlay"},f.parameters=s({storySource:{source:"(props) => {\n\treturn <TopToolbar unmovableButtons={<MlScaleReference {...props} />} />;\n}"}},f.parameters),d.parameters=s({storySource:{source:'(props) => {\n\tconst mediaIsMobile = useMediaQuery("(max-width:900px)");\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tposition: "absolute",\n\t\t\t\tzIndex: 100000,\n\t\t\t\tbottom: mediaIsMobile ? "40px" : "20px",\n\t\t\t\tright: "20px",\n\t\t\t}}\n\t\t>\n\t\t\t<MlScaleReference {...props} />\n\t\t</div>\n\t);\n}'}},d.parameters);var y=["Toolbar","Overlay"]},460:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>C,__namedExportsOrder:()=>_,default:()=>M});var n=r(67294),o=r(46871),a=r(54553),i=r(90686),l=r(31072),u=r(17781),c=r(70576),s=r(6867),p=r(22961),m=r(72450),f=r(59334),d=r(87455),y=r(52124),b=r(42440),v=r(76956),g=r(72642),S=r(33382),h=r(18037),O=r(32141),w=r(18434);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===E(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return x(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const M={title:"MapComponents/MlShareMapState",component:o.Z,argTypes:{},decorators:a.Z};var C=function(){var t,e=[d,y],r=I((0,n.useState)(!0),2),a=r[0],E=r[1],P=(0,l.Z)({mapId:"map_1"}),j=(0,i.Z)({mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}}),x=I((0,n.useState)(!0),2),M=x[0],C=x[1];return n.createElement(n.Fragment,null,n.createElement(w.Z,{buttons:n.createElement(g.Z,{variant:M?"contained":"outlined",onClick:function(){return C(!M)},sx:{marginRight:{xs:"0px",sm:"10px"}}},"Share Map State")}),n.createElement(o.Z,{active:a}),e.map((function(t,e){return n.createElement(v.Z,{layerId:"GeoJson_"+e,type:"line",geojson:t,key:"GeoJson_"+e})})),n.createElement(u.Z,{open:M,setOpen:C,name:"Share Map State"},n.createElement(S.Z,{size:"small",selected:a,value:a,onChange:function(){E(!a)}},a?n.createElement(h.Z,null):n.createElement(O.Z,null),a?"active":"inactive"),n.createElement(b.Z,{dense:!0,key:"layers"},null===(t=j.layers)||void 0===t?void 0:t.map((function(t){return n.createElement(c.ZP,{key:null==t?void 0:t.id,secondaryAction:n.createElement(s.Z,{edge:"end","aria-label":"toggle visibility",onClick:function(){if(null!=t&&t.id){var e,r,n,o,a,i,l,u=null===(e=P.map)||void 0===e||null===(r=e.getLayer)||void 0===r||null===(n=r.call(e,null==t?void 0:t.id))||void 0===n?void 0:n.getLayoutProperty("visibility");null===(o=P.map)||void 0===o||null===(a=o.getLayer)||void 0===a||null===(i=a.call(o,null==t?void 0:t.id))||void 0===i||i.setLayoutProperty("visibility","none"===u?"visible":"none"),null===(l=P.map)||void 0===l||l.map.fire("zoom")}}},null!=t&&t.visible?n.createElement(p.Z,null):n.createElement(m.Z,null))},n.createElement(f.Z,{primary:null==t?void 0:t.id,secondary:""}))})))))}.bind({});C.parameters={},C.args={},C.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){j(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"() => {\n\tconst geoJsonArray = [sample_geojson_1, sample_geojson_2];\n\tconst [watchState, setWatchState] = useState(true);\n\tconst mapHook = useMap({ mapId: 'map_1' });\n\tconst mapState = useMapState({\n\t\tmapId: 'map_1',\n\t\twatch: {\n\t\t\tviewport: false,\n\t\t\tlayers: true,\n\t\t\tsources: false,\n\t\t},\n\t\tfilter: {\n\t\t\tincludeBaseLayers: false,\n\t\t},\n\t});\n\tconst [openSidebar, setOpenSidebar] = useState(true);\n\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tbuttons={\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant={openSidebar ? 'contained' : 'outlined'}\n\t\t\t\t\t\tonClick={() => setOpenSidebar(!openSidebar)}\n\t\t\t\t\t\tsx={{ marginRight: { xs: '0px', sm: '10px' } }}\n\t\t\t\t\t>\n\t\t\t\t\t\tShare Map State\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<MlShareMapState active={watchState} />\n\t\t\t{geoJsonArray.map((el, i) => (\n\t\t\t\t<MlGeoJsonLayer\n\t\t\t\t\tlayerId={'GeoJson_' + i}\n\t\t\t\t\ttype=\"line\"\n\t\t\t\t\tgeojson={el as unknown as Feature}\n\t\t\t\t\tkey={'GeoJson_' + i}\n\t\t\t\t/>\n\t\t\t))}\n\t\t\t<Sidebar open={openSidebar} setOpen={setOpenSidebar} name={'Share Map State'}>\n\t\t\t\t<ToggleButton\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tselected={watchState}\n\t\t\t\t\tvalue={watchState}\n\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\tsetWatchState(!watchState);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{watchState ? <CheckCircleOutlineIcon /> : <ErrorOutlineIcon />}\n\n\t\t\t\t\t{watchState ? 'active' : 'inactive'}\n\t\t\t\t</ToggleButton>\n\t\t\t\t<List dense key=\"layers\">\n\t\t\t\t\t{mapState.layers?.map((el) => (\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tkey={el?.id}\n\t\t\t\t\t\t\tsecondaryAction={\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tedge=\"end\"\n\t\t\t\t\t\t\t\t\taria-label=\"toggle visibility\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tif (el?.id) {\n\t\t\t\t\t\t\t\t\t\t\tconst currentVisibility = mapHook.map\n\t\t\t\t\t\t\t\t\t\t\t\t?.getLayer?.(el?.id)\n\t\t\t\t\t\t\t\t\t\t\t\t?.getLayoutProperty('visibility');\n\t\t\t\t\t\t\t\t\t\t\tmapHook.map\n\t\t\t\t\t\t\t\t\t\t\t\t?.getLayer?.(el?.id)\n\t\t\t\t\t\t\t\t\t\t\t\t?.setLayoutProperty(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'visibility',\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentVisibility === 'none' ? 'visible' : 'none'\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tmapHook.map?.map.fire('zoom');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{el?.visible ? <VisibilityIcon /> : <VisibilityOffIcon />}\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListItemText primary={el?.id} secondary={''} />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t))}\n\t\t\t\t</List>\n\t\t\t</Sidebar>\n\t\t</>\n\t);\n}"}},C.parameters);var _=["ExampleConfig"]},89545:(t,e,r)=>{r.r(e),r.d(e,{ExampleConfig:()=>dt,__namedExportsOrder:()=>yt,default:()=>ft});var n=r(67294),o=r(87888),a=r(4085),i=r(7726),l=r(18377),u=r(72740),c=r(42440),s=r(77957),p=r(94229),m=r(76956),f=r(31072),d=r(41733),y=r(30062),b=r(8044),v=r(6867),g=r(4625),S=r(70576),h=r(48885),O=r(14212),w=r(59334),E=r(75395),P=r(63261),j=r(90068),I=r(10803);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==x(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===x(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T(t){var e=t.propKey,r=t.value,o=t.setPaintProps;return n.createElement(I.Z,{value:r,label:"Color",onChange:function(t){o((function(r){return C(C({},r),{},_({},e,t))}))}})}try{ColorPicker.displayName="ColorPicker",ColorPicker.__docgenInfo={description:"",displayName:"ColorPicker",props:{key:{defaultValue:null,description:"",name:"key",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},propKey:{defaultValue:null,description:"",name:"propKey",required:!0,type:{name:"string"}},setPaintProps:{defaultValue:null,description:"",name:"setPaintProps",required:!0,type:{name:"(paintProps: paintPropsType | ((current: paintPropsType) => paintPropsType)) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlSketchTool/LayerList/ColorPicker.tsx#ColorPicker"]={docgenInfo:ColorPicker.__docgenInfo,name:"ColorPicker",path:"src/components/MlSketchTool/LayerList/ColorPicker.tsx#ColorPicker"})}catch(t){}var k=r(2658),L=r(41828),Z=r(45116);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function R(){return R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R.apply(this,arguments)}function B(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?B(Object(r),!0).forEach((function(e){F(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function F(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===A(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var V={"line-color":"colorpicker","line-width":"slider","line-blur":"slider","fill-color":"colorpicker","circle-color":"colorpicker"},G=Object.keys(V),q={"line-blur":{step:1,min:1,max:100},"line-width":{step:1,min:1,max:100}};function J(t){var e=t.paintProps,r=void 0===e?{}:e,o=t.setPaintProps,a=(0,n.useRef)(Math.round(1e10*Math.random()));return n.createElement(n.Fragment,null,n.createElement(S.ZP,{sx:{boxShadow:"inset 0px 0px 10px rgb(50 50 50 / 10%)",borderRadius:"5px"},key:a+"_paintPropForm"},n.createElement(l.Z,null,Object.keys(r).map((function(t){return function(t,e){if(-1!==G.indexOf(t)){var a=n.createElement(k.Z,{id:t+"_label",gutterBottom:!0},t);switch(V[t]){case"slider":return n.createElement(n.Fragment,null,a,n.createElement(L.ZP,R({},q[t],{inputProps:{inputMode:"decimal",pattern:"[0-9]*"},value:r[t],onChange:function(e,r,n){r&&o((function(e){return D(D({},e),{},F({},t,r))}))}})));case"numberfield":return n.createElement(n.Fragment,null,a,n.createElement(Z.Z,{inputProps:{inputMode:"decimal",pattern:"[0-9]*"},value:r[t],onChange:function(e){var r;null!=e&&null!==(r=e.target)&&void 0!==r&&r.value&&o((function(r){return D(D({},r),{},F({},t,parseInt(e.target.value)))}))}}));case"colorpicker":return n.createElement(n.Fragment,null,a,n.createElement(T,{key:t,value:r[t],propKey:t,setPaintProps:o}))}}return null}(t,r[t])})))))}try{J.displayName="LayerPropertyForm",J.__docgenInfo={description:"",displayName:"LayerPropertyForm",props:{paintProps:{defaultValue:{value:"{}"},description:"",name:"paintProps",required:!1,type:{name:"paintPropsType"}},setPaintProps:{defaultValue:null,description:"",name:"setPaintProps",required:!0,type:{name:"(paintProps: paintPropsType | ((current: paintPropsType) => paintPropsType)) => void"}},layerType:{defaultValue:null,description:"",name:"layerType",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlSketchTool/LayerList/LayerPropertyForm.tsx#LayerPropertyForm"]={docgenInfo:J.__docgenInfo,name:"LayerPropertyForm",path:"src/components/MlSketchTool/LayerList/LayerPropertyForm.tsx#LayerPropertyForm"})}catch(t){}function z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N(t){var e,r,o=t.layerComponent,a=t.visible,i=void 0===a||a,l=t.type,u=void 0===l?"layer":l,c=t.name,s=t.description,p=t.configurable,m=z((0,n.useState)(!0),2),f=m[0],d=m[1],y=z((0,n.useState)(!1),2),b=y[0],g=y[1],I=z((0,n.useState)((null==o||null===(e=o.props)||void 0===e?void 0:e.paint)||(0,j.Z)((null==o||null===(r=o.props)||void 0===r?void 0:r.type)||(0,P.Z)(o.props.geojson))),2),x=I[0],M=I[1],C=(0,n.useMemo)((function(){return!!i&&f}),[i,f]),_=(0,n.useMemo)((function(){return"layer"===u?n.cloneElement(o,{layout:{visibility:C?"visible":"none"},paint:x}):n.createElement(n.Fragment,null)}),[u,o,x,C]),T=(0,n.useMemo)((function(){if("layer"===u){if(o.props.type)return o.props.type;if(o.props.geojson)return(0,P.Z)(o.props.geojson)}}),[o]);return n.createElement(n.Fragment,null,n.createElement(S.ZP,{secondaryAction:p?n.createElement(v.Z,{edge:"end","aria-label":"comments",onClick:function(){g((function(t){return!t}))}},n.createElement(E.Z,null)):void 0},n.createElement(h.Z,null,n.createElement(O.Z,{disabled:!i,checked:f,onClick:function(){d((function(t){return!t}))}})),n.createElement(w.Z,{primary:c,secondary:s}),_),p&&b&&n.createElement(J,{paintProps:x,setPaintProps:M,layerType:T}))}const U=N;try{N.displayName="LayerListItem",N.__docgenInfo={description:"",displayName:"LayerListItem",props:{layerComponent:{defaultValue:null,description:"",name:"layerComponent",required:!0,type:{name:"Element"}},visible:{defaultValue:{value:"true"},description:"",name:"visible",required:!1,type:{name:"boolean"}},configurable:{defaultValue:null,description:"",name:"configurable",required:!0,type:{name:"boolean"}},type:{defaultValue:{value:"layer"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"background"'},{value:'"layer"'},{value:'"background-labels"'},{value:'"wms-layer"'},{value:'"vector-tile-layer"'}]}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string | undefined"}},additionalButtons:{defaultValue:null,description:"",name:"additionalButtons",required:!1,type:{name:"Element | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlSketchTool/LayerList/LayerListItem.tsx#LayerListItem"]={docgenInfo:N.__docgenInfo,name:"LayerListItem",path:"src/components/MlSketchTool/LayerList/LayerListItem.tsx#LayerListItem"})}catch(t){}var Y=r(47320);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function W(t){return function(t){if(Array.isArray(t))return rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||et(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){X(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==H(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===H(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||et(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){if(t){if("string"==typeof t)return rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(t,e):void 0}}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var nt=function(t){var e,r,S,h,O=(0,f.Z)({mapId:t.mapId,waitForLayer:t.insertBeforeLayer}),w=tt((0,n.useState)(),2),E=w[0],P=w[1],j=tt((0,n.useState)({activeGeometryIndex:0,selectedGeoJson:void 0,geometries:[],drawMode:""}),2),I=j[0],x=j[1],M=Q({},t.buttonStyleOverride),C=(0,n.useCallback)((function(t){console.log(t),I.drawMode!==t?x((function(e){return{drawMode:t,geometries:e.geometries,activeGeometryIndex:0,selectedGeoJson:void 0}})):x((function(t){return{drawMode:"",geometries:t.geometries,activeGeometryIndex:0,selectedGeoJson:void 0}}))}),[I]);return n.createElement(n.Fragment,null,n.createElement(l.Z,{sx:{zIndex:104}},n.createElement(b.Z,null,n.createElement(g.Z,{title:"point"},n.createElement(v.Z,{sx:M,onClick:function(){return C("draw_point")}},n.createElement(o.Z,null))),n.createElement(g.Z,{title:"Line"},n.createElement(v.Z,{sx:M,onClick:function(){return C("draw_line_string")}},n.createElement(a.Z,null))),n.createElement(g.Z,{title:"Polygon"},n.createElement(v.Z,{sx:M,onClick:function(){return C("custom_polygon")}},n.createElement(i.Z,null))))),I.drawMode&&n.createElement(u.Z,{mode:"edit"===I.drawMode?"LineString"===(null===(e=I.selectedGeoJson)||void 0===e||null===(r=e.geometry)||void 0===r?void 0:r.type)?"simple_select":"custom_select":I.drawMode,geojson:"edit"===I.drawMode?I.selectedGeoJson:void 0,onChange:function(t){x((function(e){var r=W(I.geometries);if("edit"===I.drawMode&&I.selectedGeoJson)r[r.indexOf(I.selectedGeoJson)]=t[0];else if(I.activeGeometryIndex)r[I.activeGeometryIndex]=t[0];else{var n=t[0];n.properties.id=n.id,r.push(n)}return Q(Q({},e),{},{activeGeometryIndex:"edit"!==e.drawMode&&"Point"!==t[0].geometry.type?r.length-1:e.activeGeometryIndex,geometries:r})}))},onFinish:function(){x((function(t){return Q(Q({},t),{},{drawMode:"",activeGeometryIndex:"draw_point"!==t.drawMode?0:t.activeGeometryIndex,selectedGeoJson:"draw_point"!==t.drawMode?void 0:t.selectedGeoJson})}))}}),n.createElement(c.Z,{sx:{zIndex:105}},I.geometries.map((function(e){return n.createElement(n.Fragment,null,n.createElement(l.Z,{key:e.id,sx:{display:"flex",flexDirection:"column"}},n.createElement("br",null),n.createElement(l.Z,{flexDirection:"row",sx:{"&:hover":{backgroundColor:"rgb(177, 177, 177, 0.2)"}},onMouseOver:function(){P(e)},onMouseLeave:function(){P(void 0)}},n.createElement(U,{sx:M,visible:!0,configurable:!0,layerComponent:n.createElement(m.Z,{mapId:t.mapId,geojson:e,layerId:String(e.id)}),type:"layer",name:String(e.id),description:e.geometry.type},n.createElement(p.Z,null)),n.createElement(v.Z,{onClick:function(){var t;null==O||null===(t=O.map)||void 0===t||t.map.setCenter("Point"===e.geometry.type?e.geometry.coordinates:y.MqI(e).geometry.coordinates)}},n.createElement(Y.Z,null)),n.createElement(v.Z,{sx:M,onClick:function(){x((function(t){return Q(Q({},t),{},{selectedGeoJson:e,drawMode:"edit"})}))}},n.createElement(s.Z,null)),n.createElement(v.Z,{sx:M,onClick:function(){var t;t=e,x((function(e){var r=W(e.geometries);return r.splice(r.indexOf(t),1),Q(Q({},e),{},{geometries:r,activeGeometryIndex:e.activeGeometryIndex-1})}))}},n.createElement(d.Z,null)))))})),E&&n.createElement(m.Z,{mapId:t.mapId,geojson:{type:"FeatureCollection",features:[E]},type:"line",layerId:"highlightBorder",paint:{"line-color":"#dd9900","line-opacity":.4,"line-width":10}})),"edit"===I.drawMode&&n.createElement(l.Z,null,"Edit ",null===(S=I.selectedGeoJson)||void 0===S||null===(h=S.geometry)||void 0===h?void 0:h.type))};nt.defaultProps={mapId:void 0,buttonStyleOverride:{}};const ot=nt;try{nt.displayName="MlSketchTool",nt.__docgenInfo={description:"Component template",displayName:"MlSketchTool",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},buttonStyleOverride:{defaultValue:{value:"{}"},description:"Style attribute for the button-style\nhttps://mui.com/system/getting-started/the-sx-prop/",name:"buttonStyleOverride",required:!1,type:{name:"SxProps<{}> | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlSketchTool/MlSketchTool.tsx#MlSketchTool"]={docgenInfo:nt.__docgenInfo,name:"MlSketchTool",path:"src/components/MlSketchTool/MlSketchTool.tsx#MlSketchTool"})}catch(t){}var at=r(54553),it=r(17781),lt=r(18434),ut=r(72642);function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function st(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==ct(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ct(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const ft={title:"MapComponents/MlSketchTool",component:ot,argTypes:{},decorators:at.Z};var dt=function(){var t,e,r=(t=(0,n.useState)(!0),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1];return n.createElement(n.Fragment,null,n.createElement(lt.Z,{buttons:n.createElement(n.Fragment,null,n.createElement(ut.Z,{variant:o?"contained":"outlined",onClick:function(){return a(!o)},sx:{marginRight:{xs:"0px",sm:"10px"}}},"Sketch Tool"))}),n.createElement(it.Z,{open:o,setOpen:a,name:"Sketch Tool"},n.createElement(ot,null)))}.bind({});dt.parameters={},dt.args={},dt.parameters=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?st(Object(r),!0).forEach((function(e){pt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({storySource:{source:"() => {\n\tconst [openSidebar, setOpenSidebar] = useState(true);\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tbuttons={\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant={openSidebar ? 'contained' : 'outlined'}\n\t\t\t\t\t\t\tonClick={() => setOpenSidebar(!openSidebar)}\n\t\t\t\t\t\t\tsx={{ marginRight: { xs: '0px', sm: '10px' } }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSketch Tool\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<Sidebar\n\t\t\t\topen={openSidebar}\n\t\t\t\tsetOpen={setOpenSidebar}\n\t\t\t\tname={'Sketch Tool'}\n\t\t\t>\n\t\t\t\t<MlSketchTool />\n\t\t\t</Sidebar>\n\t\t</>\n\t);\n}"}},dt.parameters);var yt=["ExampleConfig"]},58725:(t,e,r)=>{r.d(e,{Z:()=>u});var n=r(67294),o=r(31072);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=function(t){var e=(0,n.useRef)(0),r=(0,o.Z)({mapId:t.mapId,waitForLayer:t.insertBeforeLayer}),i=a((0,n.useState)(0),2),l=i[0],u=i[1],c=a((0,n.useState)(""),2),s=c[0],p=c[1],m=(0,n.useCallback)((function(){var n,o;if(r.map&&(null===(n=r.map)||void 0===n?void 0:n.map.getZoom())!==e.current){e.current=null===(o=r.map)||void 0===o?void 0:o.map.getZoom();var a=t.maxWidth||100,i=r.map.map._container.clientHeight/2,l=r.map.map.unproject([0,i]),u=r.map.map.unproject([a,i]),c=l.distanceTo(u);if("imperial"===t.unit){var s=3.2808*c;s>5280?f(a,s/5280,r.map.map._getUIString("ScaleControl.Miles")):f(a,s,r.map.map._getUIString("ScaleControl.Feet"))}else"nautical"===t.unit?f(a,c/1852,r.map.map._getUIString("ScaleControl.NauticalMiles")):c>=1e3?f(a,c/1e3,r.map.map._getUIString("ScaleControl.Kilometers")):f(a,c,r.map.map._getUIString("ScaleControl.Meters"))}}),[r.map,t.unit,t.maxWidth]);(0,n.useEffect)((function(){if(r.map){var t=m;return r.map.on("move",t,r.componentId),m(),function(){var e;null===(e=r.map)||void 0===e||e.map.off("move",t)}}}),[r.map,m]);var f=function(t,e,r){var n=d(e);u(t*(n/e)),p(n+"&nbsp;"+r)},d=function(t){var e=Math.pow(10,"".concat(Math.floor(t)).length-1),r=t/e;return e*(r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(r))};return n.createElement(n.Fragment,null,n.createElement("div",{style:{backgroundColor:"hsla(0,0%,100%,.75)",fontSize:"10px",border:"2px solid #333",borderTop:"#333",padding:"0 5px",color:"#333",boxSizing:"border-box",width:l+"px",fontFamily:"sans-serif"},dangerouslySetInnerHTML:{__html:s}}))};const u=l;try{l.displayName="MlScaleReference",l.__docgenInfo={description:"",displayName:"MlScaleReference",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:"",name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},maxWidth:{defaultValue:null,description:"",name:"maxWidth",required:!1,type:{name:"number | undefined"}},unit:{defaultValue:null,description:"",name:"unit",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlScaleReference/MlScaleReference.tsx#MlScaleReference"]={docgenInfo:l.__docgenInfo,name:"MlScaleReference",path:"src/components/MlScaleReference/MlScaleReference.tsx#MlScaleReference"})}catch(t){}},46871:(t,e,r)=>{r.d(e,{Z:()=>v});var n=r(67294),o=r(45697),a=r.n(o),i=r(74736),l=r(28721),u=r(90686);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var d=function(){var t=Object.fromEntries(new URLSearchParams(window.location.search));return t.layers=JSON.parse(null!=t&&t.layers?t.layers:"[]"),t},y=d(),b=function(t){var e,r,o=(0,n.useContext)(i.Z),a=(0,n.useRef)(!1),c=(0,n.useRef)(),s=(e=(0,n.useState)(void 0),r=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,l=[],u=!0,c=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,r)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=s[0],b=s[1],v=(0,n.useRef)({}),g=(0,n.useRef)((t.idPrefix?t.idPrefix:"MlShareMapState-")+(0,l.Z)()),S=(0,u.Z)({watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}}),h=(0,n.useRef)(!1),O=(0,n.useRef)(),w=(0,n.useRef)({viewport:{center:!1,bearing:!1,pitch:!1,zoom:!1},layers:p({},v)}),E=(0,n.useRef)({}),P=(0,n.useCallback)((function(){if(t.active){var e=[];for(var r in S.layers){var n,o,a;e.push({id:null===(n=S.layers[r])||void 0===n?void 0:n.id,type:null===(o=S.layers[r])||void 0===o?void 0:o.type,visible:null===(a=S.layers[r])||void 0===a?void 0:a.visible})}j();var i=new URLSearchParams(p(p(p({},d()),E.current),{},{layers:JSON.stringify(e)}));JSON.parse(Object.fromEntries(i).layers).forEach((function(t){v.current[t.id]=!1}));var l=new URLSearchParams(window.location.search);i.toString()!==l.toString()&&window.history.pushState(p({},E.current),document.title,"?"+i.toString())}}),[S.layers,t.active]);(0,n.useEffect)((function(){var t=g.current;return E.current=d(),function(){c.current&&(c.current.cleanup(t),c.current=void 0),a.current=!1}}),[]),(0,n.useEffect)((function(){c.current&&P()}),[P]),(0,n.useEffect)((function(){if(c.current){var t=P;return c.current.on("moveend",t,g.current),function(){var e;null===(e=c.current)||void 0===e||e.map.off("moveend",t)}}}),[P,m]),(0,n.useEffect)((function(){var e;null!=o&&null!==(e=o.mapExists)&&void 0!==e&&e.call(o,t.mapId)&&!a.current&&(a.current=!0,c.current=o.getMap(t.mapId),b(c.current),E.current.lat&&E.current.lng&&I())}),[o.mapIds,o,t.mapId,t.active]),(0,n.useEffect)((function(){var t;if(null!=S&&null!==(t=S.layers)&&void 0!==t&&t.length){var e;for(var r in void 0===O.current&&(O.current=void 0,null==y||null===(e=y.layers)||void 0===e||e.forEach((function(t){var e;null!==(e=O.current)&&void 0!==e&&e[t.id]&&(O.current[t.id]=!1)}))),O.current){var n=!0;if(!1===O.current[r]&&(n=!1),n)return}y.layers&&y.layers.forEach((function(t){var e,r,n,o;null!==(e=c.current)&&void 0!==e&&e.map.getLayer(t.id)&&!1===(null===(r=O.current)||void 0===r?void 0:r[t.id])&&(O.current[t.id]=!0,null===(n=c.current.map)||void 0===n||null===(o=n.getLayer(t.id))||void 0===o||o.setLayoutProperty("visibility",t.visible?"visible":"none"))}))}}),[S.layers,t.mapId,t.active]),(0,n.useEffect)((function(){m&&S.layers&&(t.active||m.cleanup(g.current))}),[t.active,m,S.layers]);var j=function(){var t,e,r,n,o;E.current.lat=null===(t=c.current)||void 0===t?void 0:t.map.getCenter().lat,E.current.lng=null===(e=c.current)||void 0===e?void 0:e.map.getCenter().lng,E.current.zoom=null===(r=c.current)||void 0===r?void 0:r.map.getZoom(),E.current.bearing=null===(n=c.current)||void 0===n?void 0:n.map.getBearing(),E.current.pitch=null===(o=c.current)||void 0===o?void 0:o.map.getPitch()},I=function(){var t,e,r,n;w.current.viewport.center||(w.current.viewport.center=!0,E.current.lng&&E.current.lat&&(null===(t=c.current)||void 0===t||t.map.setCenter([E.current.lng,E.current.lat])),E.current.zoom&&(null===(e=c.current)||void 0===e||e.map.setZoom(E.current.zoom)),E.current.bearing&&(null===(r=c.current)||void 0===r||r.map.setBearing(E.current.bearing)),E.current.pitch&&(null===(n=c.current)||void 0===n||n.map.setPitch(E.current.pitch)));h.current=!0};return window.onpopstate=function(t){var e;t.state&&t.state.lng&&t.state.lat&&t.state.zoom&&(null===(e=c.current)||void 0===e||e.map.easeTo({zoom:t.state.zoom,center:[t.state.lng,t.state.lat]}))},n.createElement(n.Fragment,null)};b.defaultProps={mapId:void 0},b.propTypes={mapId:a().string};const v=b;try{b.displayName="MlShareMapState",b.__docgenInfo={description:"",displayName:"MlShareMapState",props:{mapId:{defaultValue:{value:"undefined"},description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},idPrefix:{defaultValue:null,description:"",name:"idPrefix",required:!1,type:{name:"string | undefined"}},active:{defaultValue:null,description:"",name:"active",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlShareMapState/MlShareMapState.tsx#MlShareMapState"]={docgenInfo:b.__docgenInfo,name:"MlShareMapState",path:"src/components/MlShareMapState/MlShareMapState.tsx#MlShareMapState"})}catch(t){}}}]);