const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index.es-BhM1n_4y.js","./iframe-JT_GqxOV.js","./preload-helper-D9Z9MdNV.js","./iframe-DG6F43G8.css","./index-Ow4XiWUB.js"])))=>i.map(i=>d[i]);
import{R as q_,r as I,g as qs,a as je,c as Vh,b as ux,d as wX}from"./iframe-JT_GqxOV.js";import{_ as ww}from"./preload-helper-D9Z9MdNV.js";import{r as SX}from"./index-Ow4XiWUB.js";var Sw={exports:{}},Sy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk;function EX(){if(kk)return Sy;kk=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,o){var u=null;if(o!==void 0&&(u=""+o),i.key!==void 0&&(u=""+i.key),"key"in i){o={};for(var a in i)a!=="key"&&(o[a]=i[a])}else o=i;return i=o.ref,{$$typeof:e,type:n,key:u,ref:i!==void 0?i:null,props:o}}return Sy.Fragment=t,Sy.jsx=r,Sy.jsxs=r,Sy}var Lk;function CX(){return Lk||(Lk=1,Sw.exports=EX()),Sw.exports}var ze=CX(),d_={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.0/LICENSE.txt
 */var AX=d_.exports,Dk;function PX(){return Dk||(Dk=1,(function(e,t){(function(r,n){e.exports=n()})(AX,(function(){var r={},n={};function i(u,a,p){if(n[u]=p,u==="index"){var h="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",m={};return n.shared(m),n.index(r,m),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),r}}i("shared",["exports"],(function(u){function a(d,l,f,g){return new(f||(f=Promise))((function(_,C){function A(W){try{q(g.next(W))}catch(Q){C(Q)}}function L(W){try{q(g.throw(W))}catch(Q){C(Q)}}function q(W){var Q;W.done?_(W.value):(Q=W.value,Q instanceof f?Q:new f((function(ie){ie(Q)}))).then(A,L)}q((g=g.apply(d,l||[])).next())}))}function p(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var h,m;function v(){if(m)return h;function d(l,f){this.x=l,this.y=f}return m=1,h=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,f){return this.clone()._rotateAround(l,f)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var f=l.x-this.x,g=l.y-this.y;return f*f+g*g},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,f){return Math.atan2(this.x*f-this.y*l,this.x*l+this.y*f)},_matMult:function(l){var f=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=f,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var f=Math.cos(l),g=Math.sin(l),_=g*this.x+f*this.y;return this.x=f*this.x-g*this.y,this.y=_,this},_rotateAround:function(l,f){var g=Math.cos(l),_=Math.sin(l),C=f.y+_*(this.x-f.x)+g*(this.y-f.y);return this.x=f.x+g*(this.x-f.x)-_*(this.y-f.y),this.y=C,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(l){return l instanceof d?l:Array.isArray(l)?new d(l[0],l[1]):l},h}typeof SuppressedError=="function"&&SuppressedError;var w,x,P=p(v()),T=(function(){if(x)return w;function d(l,f,g,_){this.cx=3*l,this.bx=3*(g-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*f,this.by=3*(_-f)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=f,this.p2x=g,this.p2y=_}return x=1,w=d,d.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,f){if(f===void 0&&(f=1e-6),l<0)return 0;if(l>1)return 1;for(var g=l,_=0;_<8;_++){var C=this.sampleCurveX(g)-l;if(Math.abs(C)<f)return g;var A=this.sampleCurveDerivativeX(g);if(Math.abs(A)<1e-6)break;g-=C/A}var L=0,q=1;for(g=l,_=0;_<20&&(C=this.sampleCurveX(g),!(Math.abs(C-l)<f));_++)l>C?L=g:q=g,g=.5*(q-L)+L;return g},solve:function(l,f){return this.sampleCurveY(this.solveCurveX(l,f))}},w})(),R=p(T);let k,N;function F(){return k==null&&(k=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),k}function D(){if(N==null&&(N=!1,F())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let g=0;g<25;g++){const _=4*g;l.fillStyle=`rgb(${_},${_+1},${_+2})`,l.fillRect(g%5,Math.floor(g/5),1,1)}const f=l.getImageData(0,0,5,5).data;for(let g=0;g<100;g++)if(g%4!=3&&f[g]!==g){N=!0;break}}}return N||!1}var U=1e-6,B=typeof Float32Array<"u"?Float32Array:Array;function Z(){var d=new B(9);return B!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function J(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function X(){var d=new B(3);return B!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function le(d){return Math.hypot(d[0],d[1],d[2])}function H(d,l,f){var g=new B(3);return g[0]=d,g[1]=l,g[2]=f,g}function G(d,l,f){return d[0]=l[0]+f[0],d[1]=l[1]+f[1],d[2]=l[2]+f[2],d}function ae(d,l,f){return d[0]=l[0]*f,d[1]=l[1]*f,d[2]=l[2]*f,d}function se(d,l,f){var g=l[0],_=l[1],C=l[2],A=f[0],L=f[1],q=f[2];return d[0]=_*q-C*L,d[1]=C*A-g*q,d[2]=g*L-_*A,d}Math.hypot||(Math.hypot=function(){for(var d=0,l=arguments.length;l--;)d+=arguments[l]*arguments[l];return Math.sqrt(d)});var ue,me=le;function Ce(d,l,f){var g=l[0],_=l[1],C=l[2],A=l[3];return d[0]=f[0]*g+f[4]*_+f[8]*C+f[12]*A,d[1]=f[1]*g+f[5]*_+f[9]*C+f[13]*A,d[2]=f[2]*g+f[6]*_+f[10]*C+f[14]*A,d[3]=f[3]*g+f[7]*_+f[11]*C+f[15]*A,d}function pe(){var d=new B(4);return B!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function Ee(d,l,f,g){var _=.5*Math.PI/180;l*=_,f*=_,g*=_;var C=Math.sin(l),A=Math.cos(l),L=Math.sin(f),q=Math.cos(f),W=Math.sin(g),Q=Math.cos(g);return d[0]=C*q*Q-A*L*W,d[1]=A*L*Q+C*q*W,d[2]=A*q*W-C*L*Q,d[3]=A*q*Q+C*L*W,d}function Fe(){var d=new B(2);return B!=Float32Array&&(d[0]=0,d[1]=0),d}function Ke(d,l){var f=new B(2);return f[0]=d,f[1]=l,f}X(),ue=new B(4),B!=Float32Array&&(ue[0]=0,ue[1]=0,ue[2]=0,ue[3]=0),X(),H(1,0,0),H(0,1,0),pe(),pe(),Z(),Fe();const fe=8192;function _e(d,l,f){return l*(fe/(d.tileSize*Math.pow(2,f-d.tileID.overscaledZ)))}function Pe(d,l){return(d%l+l)%l}function ke(d,l,f){return d*(1-f)+l*f}function $e(d){if(d<=0)return 0;if(d>=1)return 1;const l=d*d,f=l*d;return 4*(d<.5?f:3*(d-l)+f-.75)}function ht(d,l,f,g){const _=new R(d,l,f,g);return C=>_.solve(C)}const Ot=ht(.25,.1,.25,1);function mt(d,l,f){return Math.min(f,Math.max(l,d))}function nt(d,l,f){const g=f-l,_=((d-l)%g+g)%g+l;return _===l?f:_}function Nt(d,...l){for(const f of l)for(const g in f)d[g]=f[g];return d}let kt=1;function It(d,l,f){const g={};for(const _ in d)g[_]=l.call(this,d[_],_,d);return g}function gt(d,l,f){const g={};for(const _ in d)l.call(this,d[_],_,d)&&(g[_]=d[_]);return g}function Le(d){return Array.isArray(d)?d.map(Le):typeof d=="object"&&d?It(d,Le):d}const pr={};function hr(d){pr[d]||(typeof console<"u"&&console.warn(d),pr[d]=!0)}function vr(d,l,f){return(f.y-d.y)*(l.x-d.x)>(l.y-d.y)*(f.x-d.x)}function Qt(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let qe=null;function rt(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ft(d,l,f,g,_){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const C=new VideoFrame(d,{timestamp:0});try{const A=C?.format;if(!A||!A.startsWith("BGR")&&!A.startsWith("RGB"))throw new Error(`Unrecognized format ${A}`);const L=A.startsWith("BGR"),q=new Uint8ClampedArray(g*_*4);if(yield C.copyTo(q,(function(W,Q,ie,ye,we){const Se=4*Math.max(1,0),Re=(Math.max(0,ie)-ie)*ye*4+Se,He=4*ye,it=Math.max(0,Q),Dt=Math.max(0,ie);return{rect:{x:it,y:Dt,width:Math.min(W.width,Q+ye)-it,height:Math.min(W.height,ie+we)-Dt},layout:[{offset:Re,stride:He}]}})(d,l,f,g,_)),L)for(let W=0;W<q.length;W+=4){const Q=q[W];q[W]=q[W+2],q[W+2]=Q}return q}finally{C.close()}}))}let Yt,Wt;function ur(d,l,f,g){return d.addEventListener(l,f,g),{unsubscribe:()=>{d.removeEventListener(l,f,g)}}}function br(d){return d*Math.PI/180}function xr(d){return d/Math.PI*180}const Rr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},wr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},fr="AbortError";function bt(){return new Error(fr)}const ve={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function xe(d){return ve.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const Ae="global-dispatcher";class Ue extends Error{constructor(l,f,g,_){super(`AJAXError: ${f} (${l}): ${g}`),this.status=l,this.statusText=f,this.url=g,this.body=_}}const tt=()=>Qt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,_t=function(d,l){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const g=xe(d.url);if(g)return g(d,l);if(Qt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:Ae},l)}if(!(/^file:/.test(f=d.url)||/^file:/.test(tt())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(g,_){return a(this,void 0,void 0,(function*(){const C=new Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,cache:g.cache,referrer:tt(),signal:_.signal});let A,L;g.type!=="json"||C.headers.has("Accept")||C.headers.set("Accept","application/json");try{A=yield fetch(C)}catch(W){throw new Ue(0,W.message,g.url,new Blob)}if(!A.ok){const W=yield A.blob();throw new Ue(A.status,A.statusText,g.url,W)}L=g.type==="arrayBuffer"||g.type==="image"?A.arrayBuffer():g.type==="json"?A.json():A.text();const q=yield L;if(_.signal.aborted)throw bt();return{data:q,cacheControl:A.headers.get("Cache-Control"),expires:A.headers.get("Expires")}}))})(d,l);if(Qt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:Ae},l)}var f;return(function(g,_){return new Promise(((C,A)=>{var L;const q=new XMLHttpRequest;q.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(q.responseType="arraybuffer");for(const W in g.headers)q.setRequestHeader(W,g.headers[W]);g.type==="json"&&(q.responseType="text",!((L=g.headers)===null||L===void 0)&&L.Accept||q.setRequestHeader("Accept","application/json")),q.withCredentials=g.credentials==="include",q.onerror=()=>{A(new Error(q.statusText))},q.onload=()=>{if(!_.signal.aborted)if((q.status>=200&&q.status<300||q.status===0)&&q.response!==null){let W=q.response;if(g.type==="json")try{W=JSON.parse(q.response)}catch(Q){return void A(Q)}C({data:W,cacheControl:q.getResponseHeader("Cache-Control"),expires:q.getResponseHeader("Expires")})}else{const W=new Blob([q.response],{type:q.getResponseHeader("Content-Type")});A(new Ue(q.status,q.statusText,g.url,W))}},_.signal.addEventListener("abort",(()=>{q.abort(),A(bt())})),q.send(g.body)}))})(d,l)};function Mt(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const l=new URL(d),f=window.location;return l.protocol===f.protocol&&l.host===f.host}function Pt(d,l,f){f[d]&&f[d].indexOf(l)!==-1||(f[d]=f[d]||[],f[d].push(l))}function Kt(d,l,f){if(f&&f[d]){const g=f[d].indexOf(l);g!==-1&&f[d].splice(g,1)}}class zt{constructor(l,f={}){Nt(this,f),this.type=l}}class Ct extends zt{constructor(l,f={}){super("error",Nt({error:l},f))}}class Gt{on(l,f){return this._listeners=this._listeners||{},Pt(l,f,this._listeners),{unsubscribe:()=>{this.off(l,f)}}}off(l,f){return Kt(l,f,this._listeners),Kt(l,f,this._oneTimeListeners),this}once(l,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},Pt(l,f,this._oneTimeListeners),this):new Promise((g=>this.once(l,g)))}fire(l,f){typeof l=="string"&&(l=new zt(l,f||{}));const g=l.type;if(this.listens(g)){l.target=this;const _=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const L of _)L.call(this,l);const C=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const L of C)Kt(g,L,this._oneTimeListeners),L.call(this,l);const A=this._eventedParent;A&&(Nt(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(l))}else l instanceof Ct&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,f){return this._eventedParent=l,this._eventedParentData=f,this}}var vt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Pr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Tr(d,l){const f={};for(const g in d)g!=="ref"&&(f[g]=d[g]);return Pr.forEach((g=>{g in l&&(f[g]=l[g])})),f}function Ye(d,l){if(Array.isArray(d)){if(!Array.isArray(l)||d.length!==l.length)return!1;for(let f=0;f<d.length;f++)if(!Ye(d[f],l[f]))return!1;return!0}if(typeof d=="object"&&d!==null&&l!==null){if(typeof l!="object"||Object.keys(d).length!==Object.keys(l).length)return!1;for(const f in d)if(!Ye(d[f],l[f]))return!1;return!0}return d===l}function ot(d,l){d.push(l)}function jt(d,l,f){ot(f,{command:"addSource",args:[d,l[d]]})}function ne(d,l,f){ot(l,{command:"removeSource",args:[d]}),f[d]=!0}function de(d,l,f,g){ne(d,f,g),jt(d,l,f)}function Be(d,l,f){let g;for(g in d[f])if(Object.prototype.hasOwnProperty.call(d[f],g)&&g!=="data"&&!Ye(d[f][g],l[f][g]))return!1;for(g in l[f])if(Object.prototype.hasOwnProperty.call(l[f],g)&&g!=="data"&&!Ye(d[f][g],l[f][g]))return!1;return!0}function et(d,l,f,g,_,C){d=d||{},l=l||{};for(const A in d)Object.prototype.hasOwnProperty.call(d,A)&&(Ye(d[A],l[A])||f.push({command:C,args:[g,A,l[A],_]}));for(const A in l)Object.prototype.hasOwnProperty.call(l,A)&&!Object.prototype.hasOwnProperty.call(d,A)&&(Ye(d[A],l[A])||f.push({command:C,args:[g,A,l[A],_]}))}function Lt(d){return d.id}function lr(d,l){return d[l.id]=l,d}class qt{constructor(l,f,g,_){this.message=(l?`${l}: `:"")+g,_&&(this.identifier=_),f!=null&&f.__line__&&(this.line=f.__line__)}}function zr(d,...l){for(const f of l)for(const g in f)d[g]=f[g];return d}class kr extends Error{constructor(l,f){super(f),this.message=f,this.key=l}}class sn{constructor(l,f=[]){this.parent=l,this.bindings={};for(const[g,_]of f)this.bindings[g]=_}concat(l){return new sn(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const xn={kind:"null"},yr={kind:"number"},Vr={kind:"string"},Kr={kind:"boolean"},An={kind:"color"},Ni={kind:"projectionDefinition"},Mi={kind:"object"},mn={kind:"value"},Pi={kind:"collator"},Ri={kind:"formatted"},ni={kind:"padding"},Ji={kind:"colorArray"},Eo={kind:"numberArray"},$n={kind:"resolvedImage"},qn={kind:"variableAnchorOffsetCollection"};function mi(d,l){return{kind:"array",itemType:d,N:l}}function Hn(d){if(d.kind==="array"){const l=Hn(d.itemType);return typeof d.N=="number"?`array<${l}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${l}>`}return d.kind}const da=[xn,yr,Vr,Kr,An,Ni,Ri,Mi,mi(mn),ni,Eo,Ji,$n,qn];function Ti(d,l){if(l.kind==="error")return null;if(d.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Ti(d.itemType,l.itemType))&&(typeof d.N!="number"||d.N===l.N))return null}else{if(d.kind===l.kind)return null;if(d.kind==="value"){for(const f of da)if(!Ti(f,l))return null}}return`Expected ${Hn(d)} but found ${Hn(l)} instead.`}function Ha(d,l){return l.some((f=>f.kind===d.kind))}function _a(d,l){return l.some((f=>f==="null"?d===null:f==="array"?Array.isArray(d):f==="object"?d&&!Array.isArray(d)&&typeof d=="object":f===typeof d))}function ts(d,l){return d.kind==="array"&&l.kind==="array"?d.itemType.kind===l.itemType.kind&&typeof d.N=="number":d.kind===l.kind}const xa=.96422,nc=.82521,ic=4/29,Co=6/29,Hs=3*Co*Co,rs=Co*Co*Co,gs=Math.PI/180,wa=180/Math.PI;function Fu(d){return(d%=360)<0&&(d+=360),d}function Ll([d,l,f,g]){let _,C;const A=$((.2225045*(d=Dl(d))+.7168786*(l=Dl(l))+.0606169*(f=Dl(f)))/1);d===l&&l===f?_=C=A:(_=$((.4360747*d+.3850649*l+.1430804*f)/xa),C=$((.0139322*d+.0971045*l+.7141733*f)/nc));const L=116*A-16;return[L<0?0:L,500*(_-A),200*(A-C),g]}function Dl(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function $(d){return d>rs?Math.pow(d,1/3):d/Hs+ic}function te([d,l,f,g]){let _=(d+16)/116,C=isNaN(l)?_:_+l/500,A=isNaN(f)?_:_-f/200;return _=1*pt(_),C=xa*pt(C),A=nc*pt(A),[Oe(3.1338561*C-1.6168667*_-.4906146*A),Oe(-.9787684*C+1.9161415*_+.033454*A),Oe(.0719453*C-.2289914*_+1.4052427*A),g]}function Oe(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function pt(d){return d>Co?d*d*d:Hs*(d-ic)}const At=Object.hasOwn||function(d,l){return Object.prototype.hasOwnProperty.call(d,l)};function xt(d,l){return At(d,l)?d[l]:void 0}function $t(d){return parseInt(d.padEnd(2,d),16)/255}function Ir(d,l){return Br(l?d/100:d,0,1)}function Br(d,l,f){return Math.min(Math.max(l,d),f)}function Xr(d){return!d.some(Number.isNaN)}const Zr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Nr(d,l,f){return d+f*(l-d)}function wn(d,l,f){return d.map(((g,_)=>Nr(g,l[_],f)))}class ln{constructor(l,f,g,_=1,C=!0){this.r=l,this.g=f,this.b=g,this.a=_,C||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[l,f,g,_]))}static parse(l){if(l instanceof ln)return l;if(typeof l!="string")return;const f=(function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=xt(Zr,g);if(_){const[A,L,q]=_;return[A/255,L/255,q/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const A=g.length<6?1:2;let L=1;return[$t(g.slice(L,L+=A)),$t(g.slice(L,L+=A)),$t(g.slice(L,L+=A)),$t(g.slice(L,L+A)||"ff")]}if(g.startsWith("rgb")){const A=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(A){const[L,q,W,Q,ie,ye,we,Se,Re,He,it,Dt]=A,yt=[Q||" ",we||" ",He].join("");if(yt==="  "||yt==="  /"||yt===",,"||yt===",,,"){const be=[W,ye,Re].join(""),Ve=be==="%%%"?100:be===""?255:0;if(Ve){const St=[Br(+q/Ve,0,1),Br(+ie/Ve,0,1),Br(+Se/Ve,0,1),it?Ir(+it,Dt):1];if(Xr(St))return St}}return}}const C=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[A,L,q,W,Q,ie,ye,we,Se]=C,Re=[q||" ",Q||" ",ye].join("");if(Re==="  "||Re==="  /"||Re===",,"||Re===",,,"){const He=[+L,Br(+W,0,100),Br(+ie,0,100),we?Ir(+we,Se):1];if(Xr(He))return(function([it,Dt,yt,be]){function Ve(St){const rr=(St+it/30)%12,Mr=Dt*Math.min(yt,1-yt);return yt-Mr*Math.max(-1,Math.min(rr-3,9-rr,1))}return it=Fu(it),Dt/=100,yt/=100,[Ve(0),Ve(8),Ve(4),be]})(He)}}})(l);return f?new ln(...f,!1):void 0}get rgb(){const{r:l,g:f,b:g,a:_}=this,C=_||1/0;return this.overwriteGetter("rgb",[l/C,f/C,g/C,_])}get hcl(){return this.overwriteGetter("hcl",(function(l){const[f,g,_,C]=Ll(l),A=Math.sqrt(g*g+_*_);return[Math.round(1e4*A)?Fu(Math.atan2(_,g)*wa):NaN,A,f,C]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Ll(this.rgb))}overwriteGetter(l,f){return Object.defineProperty(this,l,{value:f}),f}toString(){const[l,f,g,_]=this.rgb;return`rgba(${[l,f,g].map((C=>Math.round(255*C))).join(",")},${_})`}static interpolate(l,f,g,_="rgb"){switch(_){case"rgb":{const[C,A,L,q]=wn(l.rgb,f.rgb,g);return new ln(C,A,L,q,!1)}case"hcl":{const[C,A,L,q]=l.hcl,[W,Q,ie,ye]=f.hcl;let we,Se;if(isNaN(C)||isNaN(W))isNaN(C)?isNaN(W)?we=NaN:(we=W,L!==1&&L!==0||(Se=Q)):(we=C,ie!==1&&ie!==0||(Se=A));else{let yt=W-C;W>C&&yt>180?yt-=360:W<C&&C-W>180&&(yt+=360),we=C+g*yt}const[Re,He,it,Dt]=(function([yt,be,Ve,St]){return yt=isNaN(yt)?0:yt*gs,te([Ve,Math.cos(yt)*be,Math.sin(yt)*be,St])})([we,Se??Nr(A,Q,g),Nr(L,ie,g),Nr(q,ye,g)]);return new ln(Re,He,it,Dt,!1)}case"lab":{const[C,A,L,q]=te(wn(l.lab,f.lab,g));return new ln(C,A,L,q,!1)}}}}ln.black=new ln(0,0,0,1),ln.white=new ln(1,1,1,1),ln.transparent=new ln(0,0,0,0),ln.red=new ln(1,0,0,1);class Rn{constructor(l,f,g){this.sensitivity=l?f?"variant":"case":f?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,f){return this.collator.compare(l,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const un=["bottom","center","top"];class Sr{constructor(l,f,g,_,C,A){this.text=l,this.image=f,this.scale=g,this.fontStack=_,this.textColor=C,this.verticalAlign=A}}class Jr{constructor(l){this.sections=l}static fromString(l){return new Jr([new Sr(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((l=>l.text.length!==0||l.image&&l.image.name.length!==0))}static factory(l){return l instanceof Jr?l:Jr.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map((l=>l.text)).join("")}}class Dn{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Dn)return l;if(typeof l=="number")return new Dn([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const f of l)if(typeof f!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new Dn(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,f,g){return new Dn(wn(l.values,f.values,g))}}class li{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof li)return l;if(typeof l=="number")return new li([l]);if(Array.isArray(l)){for(const f of l)if(typeof f!="number")return;return new li(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,f,g){return new li(wn(l.values,f.values,g))}}class jn{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof jn)return l;if(typeof l=="string"){const g=ln.parse(l);return g?new jn([g]):void 0}if(!Array.isArray(l))return;const f=[];for(const g of l){if(typeof g!="string")return;const _=ln.parse(g);if(!_)return;f.push(_)}return new jn(f)}toString(){return JSON.stringify(this.values)}static interpolate(l,f,g,_="rgb"){const C=[];if(l.values.length!=f.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${f.values.length}), cannot interpolate.`);for(let A=0;A<l.values.length;A++)C.push(ln.interpolate(l.values[A],f.values[A],g,_));return new jn(C)}}class gi extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const Bu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class dn{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof dn)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let f=0;f<l.length;f+=2){const g=l[f],_=l[f+1];if(typeof g!="string"||!Bu.has(g)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new dn(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,f,g){const _=l.values,C=f.values;if(_.length!==C.length)throw new gi(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${f.toString()}`);const A=[];for(let L=0;L<_.length;L+=2){if(_[L]!==C[L])throw new gi(`Cannot interpolate values containing mismatched anchors. from[${L}]: ${_[L]}, to[${L}]: ${C[L]}`);A.push(_[L]);const[q,W]=_[L+1],[Q,ie]=C[L+1];A.push([Nr(q,Q,g),Nr(W,ie,g)])}return new dn(A)}}class Ta{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Ta({name:l,available:!1}):null}}class On{constructor(l,f,g){this.from=l,this.to=f,this.transition=g}static interpolate(l,f,g){return new On(l,f,g)}static parse(l){return l instanceof On?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new On(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new On(l.from,l.to,l.transition):typeof l=="string"?new On(l,l,1):void 0}}function Sn(d,l,f,g){return typeof d=="number"&&d>=0&&d<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof f=="number"&&f>=0&&f<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[d,l,f,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[d,l,f,g]:[d,l,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ns(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof On||d instanceof ln||d instanceof Rn||d instanceof Jr||d instanceof Dn||d instanceof li||d instanceof jn||d instanceof dn||d instanceof Ta)return!0;if(Array.isArray(d)){for(const l of d)if(!ns(l))return!1;return!0}if(typeof d=="object"){for(const l in d)if(!ns(d[l]))return!1;return!0}return!1}function bn(d){if(d===null)return xn;if(typeof d=="string")return Vr;if(typeof d=="boolean")return Kr;if(typeof d=="number")return yr;if(d instanceof ln)return An;if(d instanceof On)return Ni;if(d instanceof Rn)return Pi;if(d instanceof Jr)return Ri;if(d instanceof Dn)return ni;if(d instanceof li)return Eo;if(d instanceof jn)return Ji;if(d instanceof dn)return qn;if(d instanceof Ta)return $n;if(Array.isArray(d)){const l=d.length;let f;for(const g of d){const _=bn(g);if(f){if(f===_)continue;f=mn;break}f=_}return mi(f||mn,l)}return Mi}function Ws(d){const l=typeof d;return d===null?"":l==="string"||l==="number"||l==="boolean"?String(d):d instanceof ln||d instanceof On||d instanceof Jr||d instanceof Dn||d instanceof li||d instanceof jn||d instanceof dn||d instanceof Ta?d.toString():JSON.stringify(d)}class Sa{constructor(l,f){this.type=l,this.value=f}static parse(l,f){if(l.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!ns(l[1]))return f.error("invalid value");const g=l[1];let _=bn(g);const C=f.expectedType;return _.kind!=="array"||_.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(_=C),new Sa(_,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ms={string:Vr,number:yr,boolean:Kr,object:Mi};class Na{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let g,_=1;const C=l[0];if(C==="array"){let L,q;if(l.length>2){const W=l[1];if(typeof W!="string"||!(W in Ms)||W==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);L=Ms[W],_++}else L=mn;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return f.error('The length argument to "array" must be a positive integer literal',2);q=l[2],_++}g=mi(L,q)}else{if(!Ms[C])throw new Error(`Types doesn't contain name = ${C}`);g=Ms[C]}const A=[];for(;_<l.length;_++){const L=f.parse(l[_],_,mn);if(!L)return null;A.push(L)}return new Na(g,A)}evaluate(l){for(let f=0;f<this.args.length;f++){const g=this.args[f].evaluate(l);if(!Ti(this.type,bn(g)))return g;if(f===this.args.length-1)throw new gi(`Expected value to be of type ${Hn(this.type)}, but found ${Hn(bn(g))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const vl={"to-boolean":Kr,"to-color":An,"to-number":yr,"to-string":Vr};class zo{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");const g=l[0];if(!vl[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&l.length!==2)return f.error("Expected one argument.");const _=vl[g],C=[];for(let A=1;A<l.length;A++){const L=f.parse(l[A],A,mn);if(!L)return null;C.push(L)}return new zo(_,C)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let f,g;for(const _ of this.args){if(f=_.evaluate(l),g=null,f instanceof ln)return f;if(typeof f=="string"){const C=l.parseColor(f);if(C)return C}else if(Array.isArray(f)&&(g=f.length<3||f.length>4?`Invalid rgba value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Sn(f[0],f[1],f[2],f[3]),!g))return new ln(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new gi(g||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(const g of this.args){f=g.evaluate(l);const _=Dn.parse(f);if(_)return _}throw new gi(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"numberArray":{let f;for(const g of this.args){f=g.evaluate(l);const _=li.parse(f);if(_)return _}throw new gi(`Could not parse numberArray from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"colorArray":{let f;for(const g of this.args){f=g.evaluate(l);const _=jn.parse(f);if(_)return _}throw new gi(`Could not parse colorArray from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(const g of this.args){f=g.evaluate(l);const _=dn.parse(f);if(_)return _}throw new gi(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(const g of this.args){if(f=g.evaluate(l),f===null)return 0;const _=Number(f);if(!isNaN(_))return _}throw new gi(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return Jr.fromString(Ws(this.args[0].evaluate(l)));case"resolvedImage":return Ta.fromString(Ws(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return Ws(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const lu=["Unknown","Point","LineString","Polygon"];class uu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?lu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let f=this._parseColorCache.get(l);return f||(f=ln.parse(l),this._parseColorCache.set(l,f)),f}}class ys{constructor(l,f,g=[],_,C=new sn,A=[]){this.registry=l,this.path=g,this.key=g.map((L=>`[${L}]`)).join(""),this.scope=C,this.errors=A,this.expectedType=_,this._isConstant=f}parse(l,f,g,_,C={}){return f?this.concat(f,g,_)._parse(l,C):this._parse(l,C)}_parse(l,f){function g(_,C,A){return A==="assert"?new Na(C,[_]):A==="coerce"?new zo(C,[_]):_}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=l[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[_];if(C){let A=C.parse(l,this);if(!A)return null;if(this.expectedType){const L=this.expectedType,q=A.type;if(L.kind!=="string"&&L.kind!=="number"&&L.kind!=="boolean"&&L.kind!=="object"&&L.kind!=="array"||q.kind!=="value"){if(L.kind==="projectionDefinition"&&["string","array"].includes(q.kind)||["color","formatted","resolvedImage"].includes(L.kind)&&["value","string"].includes(q.kind)||["padding","numberArray"].includes(L.kind)&&["value","number","array"].includes(q.kind)||L.kind==="colorArray"&&["value","string","array"].includes(q.kind)||L.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(q.kind))A=g(A,L,f.typeAnnotation||"coerce");else if(this.checkSubtype(L,q))return null}else A=g(A,L,f.typeAnnotation||"assert")}if(!(A instanceof Sa)&&A.type.kind!=="resolvedImage"&&this._isConstant(A)){const L=new uu;try{A=new Sa(A.type,A.evaluate(L))}catch(q){return this.error(q.message),null}}return A}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,f,g){const _=typeof l=="number"?this.path.concat(l):this.path,C=g?this.scope.concat(g):this.scope;return new ys(this.registry,this._isConstant,_,f||null,C,this.errors)}error(l,...f){const g=`${this.key}${f.map((_=>`[${_}]`)).join("")}`;this.errors.push(new kr(g,l))}checkSubtype(l,f){const g=Ti(l,f);return g&&this.error(g),g}}class Zs{constructor(l,f){this.type=f.type,this.bindings=[].concat(l),this.result=f}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const f of this.bindings)l(f[1]);l(this.result)}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const g=[];for(let C=1;C<l.length-1;C+=2){const A=l[C];if(typeof A!="string")return f.error(`Expected string, but found ${typeof A} instead.`,C);if(/[^a-zA-Z0-9_]/.test(A))return f.error("Variable names must contain only alphanumeric characters or '_'.",C);const L=f.parse(l[C+1],C+1);if(!L)return null;g.push([A,L])}const _=f.parse(l[l.length-1],l.length-1,f.expectedType,g);return _?new Zs(g,_):null}outputDefined(){return this.result.outputDefined()}}class Ao{constructor(l,f){this.type=f.type,this.name=l,this.boundExpression=f}static parse(l,f){if(l.length!==2||typeof l[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");const g=l[1];return f.scope.has(g)?new Ao(g,f.scope.get(g)):f.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class Oi{constructor(l,f,g){this.type=l,this.index=f,this.input=g}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const g=f.parse(l[1],1,yr),_=f.parse(l[2],2,mi(f.expectedType||mn));return g&&_?new Oi(_.type.itemType,g,_):null}evaluate(l){const f=this.index.evaluate(l),g=this.input.evaluate(l);if(f<0)throw new gi(`Array index out of bounds: ${f} < 0.`);if(f>=g.length)throw new gi(`Array index out of bounds: ${f} > ${g.length-1}.`);if(f!==Math.floor(f))throw new gi(`Array index must be an integer, but found ${f} instead.`);return g[f]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class Wa{constructor(l,f){this.type=Kr,this.needle=l,this.haystack=f}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const g=f.parse(l[1],1,mn),_=f.parse(l[2],2,mn);return g&&_?Ha(g.type,[Kr,Vr,yr,xn,mn])?new Wa(g,_):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hn(g.type)} instead`):null}evaluate(l){const f=this.needle.evaluate(l),g=this.haystack.evaluate(l);if(!g)return!1;if(!_a(f,["boolean","string","number","null"]))throw new gi(`Expected first argument to be of type boolean, string, number or null, but found ${Hn(bn(f))} instead.`);if(!_a(g,["string","array"]))throw new gi(`Expected second argument to be of type array or string, but found ${Hn(bn(g))} instead.`);return g.indexOf(f)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class K{constructor(l,f,g){this.type=yr,this.needle=l,this.haystack=f,this.fromIndex=g}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const g=f.parse(l[1],1,mn),_=f.parse(l[2],2,mn);if(!g||!_)return null;if(!Ha(g.type,[Kr,Vr,yr,xn,mn]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${Hn(g.type)} instead`);if(l.length===4){const C=f.parse(l[3],3,yr);return C?new K(g,_,C):null}return new K(g,_)}evaluate(l){const f=this.needle.evaluate(l),g=this.haystack.evaluate(l);if(!_a(f,["boolean","string","number","null"]))throw new gi(`Expected first argument to be of type boolean, string, number or null, but found ${Hn(bn(f))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(l)),_a(g,["string"])){const C=g.indexOf(f,_);return C===-1?-1:[...g.slice(0,C)].length}if(_a(g,["array"]))return g.indexOf(f,_);throw new gi(`Expected second argument to be of type array or string, but found ${Hn(bn(g))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class Te{constructor(l,f,g,_,C,A){this.inputType=l,this.type=f,this.input=g,this.cases=_,this.outputs=C,this.otherwise=A}static parse(l,f){if(l.length<5)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return f.error("Expected an even number of arguments.");let g,_;f.expectedType&&f.expectedType.kind!=="value"&&(_=f.expectedType);const C={},A=[];for(let W=2;W<l.length-1;W+=2){let Q=l[W];const ie=l[W+1];Array.isArray(Q)||(Q=[Q]);const ye=f.concat(W);if(Q.length===0)return ye.error("Expected at least one branch label.");for(const Se of Q){if(typeof Se!="number"&&typeof Se!="string")return ye.error("Branch labels must be numbers or strings.");if(typeof Se=="number"&&Math.abs(Se)>Number.MAX_SAFE_INTEGER)return ye.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Se=="number"&&Math.floor(Se)!==Se)return ye.error("Numeric branch labels must be integer values.");if(g){if(ye.checkSubtype(g,bn(Se)))return null}else g=bn(Se);if(C[String(Se)]!==void 0)return ye.error("Branch labels must be unique.");C[String(Se)]=A.length}const we=f.parse(ie,W,_);if(!we)return null;_=_||we.type,A.push(we)}const L=f.parse(l[1],1,mn);if(!L)return null;const q=f.parse(l[l.length-1],l.length-1,_);return q?L.type.kind!=="value"&&f.concat(1).checkSubtype(g,L.type)?null:new Te(g,_,L,C,A,q):null}evaluate(l){const f=this.input.evaluate(l);return(bn(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))&&this.otherwise.outputDefined()}}class Qe{constructor(l,f,g){this.type=l,this.branches=f,this.otherwise=g}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return f.error("Expected an odd number of arguments.");let g;f.expectedType&&f.expectedType.kind!=="value"&&(g=f.expectedType);const _=[];for(let A=1;A<l.length-1;A+=2){const L=f.parse(l[A],A,Kr);if(!L)return null;const q=f.parse(l[A+1],A+1,g);if(!q)return null;_.push([L,q]),g=g||q.type}const C=f.parse(l[l.length-1],l.length-1,g);if(!C)return null;if(!g)throw new Error("Can't infer output type");return new Qe(g,_,C)}evaluate(l){for(const[f,g]of this.branches)if(f.evaluate(l))return g.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[f,g]of this.branches)l(f),l(g);l(this.otherwise)}outputDefined(){return this.branches.every((([l,f])=>f.outputDefined()))&&this.otherwise.outputDefined()}}class Rt{constructor(l,f,g,_){this.type=l,this.input=f,this.beginIndex=g,this.endIndex=_}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const g=f.parse(l[1],1,mn),_=f.parse(l[2],2,yr);if(!g||!_)return null;if(!Ha(g.type,[mi(mn),Vr,mn]))return f.error(`Expected first argument to be of type array or string, but found ${Hn(g.type)} instead`);if(l.length===4){const C=f.parse(l[3],3,yr);return C?new Rt(g.type,g,_,C):null}return new Rt(g.type,g,_)}evaluate(l){const f=this.input.evaluate(l),g=this.beginIndex.evaluate(l);let _;if(this.endIndex&&(_=this.endIndex.evaluate(l)),_a(f,["string"]))return[...f].slice(g,_).join("");if(_a(f,["array"]))return f.slice(g,_);throw new gi(`Expected first argument to be of type array or string, but found ${Hn(bn(f))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Ht(d,l){const f=d.length-1;let g,_,C=0,A=f,L=0;for(;C<=A;)if(L=Math.floor((C+A)/2),g=d[L],_=d[L+1],g<=l){if(L===f||l<_)return L;C=L+1}else{if(!(g>l))throw new gi("Input is not a number.");A=L-1}return 0}class _r{constructor(l,f,g){this.type=l,this.input=f,this.labels=[],this.outputs=[];for(const[_,C]of g)this.labels.push(_),this.outputs.push(C)}static parse(l,f){if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");const g=f.parse(l[1],1,yr);if(!g)return null;const _=[];let C=null;f.expectedType&&f.expectedType.kind!=="value"&&(C=f.expectedType);for(let A=1;A<l.length;A+=2){const L=A===1?-1/0:l[A],q=l[A+1],W=A,Q=A+1;if(typeof L!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(_.length&&_[_.length-1][0]>=L)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);const ie=f.parse(q,Q,C);if(!ie)return null;C=C||ie.type,_.push([L,ie])}return new _r(C,g,_)}evaluate(l){const f=this.labels,g=this.outputs;if(f.length===1)return g[0].evaluate(l);const _=this.input.evaluate(l);if(_<=f[0])return g[0].evaluate(l);const C=f.length;return _>=f[C-1]?g[C-1].evaluate(l):g[Ht(f,_)].evaluate(l)}eachChild(l){l(this.input);for(const f of this.outputs)l(f)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function Dr(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var rn,pn,Nn=(function(){if(pn)return rn;function d(l,f,g,_){this.cx=3*l,this.bx=3*(g-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*f,this.by=3*(_-f)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=f,this.p2x=g,this.p2y=_}return pn=1,rn=d,d.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,f){if(f===void 0&&(f=1e-6),l<0)return 0;if(l>1)return 1;for(var g=l,_=0;_<8;_++){var C=this.sampleCurveX(g)-l;if(Math.abs(C)<f)return g;var A=this.sampleCurveDerivativeX(g);if(Math.abs(A)<1e-6)break;g-=C/A}var L=0,q=1;for(g=l,_=0;_<20&&(C=this.sampleCurveX(g),!(Math.abs(C-l)<f));_++)l>C?L=g:q=g,g=.5*(q-L)+L;return g},solve:function(l,f){return this.sampleCurveY(this.solveCurveX(l,f))}},rn})(),Wn=Dr(Nn);class kn{constructor(l,f,g,_,C){this.type=l,this.operator=f,this.interpolation=g,this.input=_,this.labels=[],this.outputs=[];for(const[A,L]of C)this.labels.push(A),this.outputs.push(L)}static interpolationFactor(l,f,g,_){let C=0;if(l.name==="exponential")C=Fi(f,l.base,g,_);else if(l.name==="linear")C=Fi(f,1,g,_);else if(l.name==="cubic-bezier"){const A=l.controlPoints;C=new Wn(A[0],A[1],A[2],A[3]).solve(Fi(f,1,g,_))}return C}static parse(l,f){let[g,_,C,...A]=l;if(!Array.isArray(_)||_.length===0)return f.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const W=_[1];if(typeof W!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:W}}else{if(_[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const W=_.slice(1);if(W.length!==4||W.some((Q=>typeof Q!="number"||Q<0||Q>1)))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:W}}}if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(C=f.parse(C,2,yr),!C)return null;const L=[];let q=null;g!=="interpolate-hcl"&&g!=="interpolate-lab"||f.expectedType==Ji?f.expectedType&&f.expectedType.kind!=="value"&&(q=f.expectedType):q=An;for(let W=0;W<A.length;W+=2){const Q=A[W],ie=A[W+1],ye=W+3,we=W+4;if(typeof Q!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ye);if(L.length&&L[L.length-1][0]>=Q)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ye);const Se=f.parse(ie,we,q);if(!Se)return null;q=q||Se.type,L.push([Q,Se])}return ts(q,yr)||ts(q,Ni)||ts(q,An)||ts(q,ni)||ts(q,Eo)||ts(q,Ji)||ts(q,qn)||ts(q,mi(yr))?new kn(q,g,_,C,L):f.error(`Type ${Hn(q)} is not interpolatable.`)}evaluate(l){const f=this.labels,g=this.outputs;if(f.length===1)return g[0].evaluate(l);const _=this.input.evaluate(l);if(_<=f[0])return g[0].evaluate(l);const C=f.length;if(_>=f[C-1])return g[C-1].evaluate(l);const A=Ht(f,_),L=kn.interpolationFactor(this.interpolation,_,f[A],f[A+1]),q=g[A].evaluate(l),W=g[A+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Nr(q,W,L);case"color":return ln.interpolate(q,W,L);case"padding":return Dn.interpolate(q,W,L);case"colorArray":return jn.interpolate(q,W,L);case"numberArray":return li.interpolate(q,W,L);case"variableAnchorOffsetCollection":return dn.interpolate(q,W,L);case"array":return wn(q,W,L);case"projectionDefinition":return On.interpolate(q,W,L)}case"interpolate-hcl":switch(this.type.kind){case"color":return ln.interpolate(q,W,L,"hcl");case"colorArray":return jn.interpolate(q,W,L,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ln.interpolate(q,W,L,"lab");case"colorArray":return jn.interpolate(q,W,L,"lab")}}}eachChild(l){l(this.input);for(const f of this.outputs)l(f)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function Fi(d,l,f,g){const _=g-f,C=d-f;return _===0?0:l===1?C/_:(Math.pow(l,C)-1)/(Math.pow(l,_)-1)}const Ai={color:ln.interpolate,number:Nr,padding:Dn.interpolate,numberArray:li.interpolate,colorArray:jn.interpolate,variableAnchorOffsetCollection:dn.interpolate,array:wn};class Yn{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let g=null;const _=f.expectedType;_&&_.kind!=="value"&&(g=_);const C=[];for(const L of l.slice(1)){const q=f.parse(L,1+C.length,g,void 0,{typeAnnotation:"omit"});if(!q)return null;g=g||q.type,C.push(q)}if(!g)throw new Error("No output type");const A=_&&C.some((L=>Ti(_,L.type)));return new Yn(A?mn:g,C)}evaluate(l){let f,g=null,_=0;for(const C of this.args)if(_++,g=C.evaluate(l),g&&g instanceof Ta&&!g.available&&(f||(f=g.name),g=null,_===this.args.length&&(g=f)),g!==null)break;return g}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}function ia(d,l){return d==="=="||d==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function qi(d,l,f,g){return g.compare(l,f)===0}function ta(d,l,f){const g=d!=="=="&&d!=="!=";return class A${constructor(C,A,L){this.type=Kr,this.lhs=C,this.rhs=A,this.collator=L,this.hasUntypedArgument=C.type.kind==="value"||A.type.kind==="value"}static parse(C,A){if(C.length!==3&&C.length!==4)return A.error("Expected two or three arguments.");const L=C[0];let q=A.parse(C[1],1,mn);if(!q)return null;if(!ia(L,q.type))return A.concat(1).error(`"${L}" comparisons are not supported for type '${Hn(q.type)}'.`);let W=A.parse(C[2],2,mn);if(!W)return null;if(!ia(L,W.type))return A.concat(2).error(`"${L}" comparisons are not supported for type '${Hn(W.type)}'.`);if(q.type.kind!==W.type.kind&&q.type.kind!=="value"&&W.type.kind!=="value")return A.error(`Cannot compare types '${Hn(q.type)}' and '${Hn(W.type)}'.`);g&&(q.type.kind==="value"&&W.type.kind!=="value"?q=new Na(W.type,[q]):q.type.kind!=="value"&&W.type.kind==="value"&&(W=new Na(q.type,[W])));let Q=null;if(C.length===4){if(q.type.kind!=="string"&&W.type.kind!=="string"&&q.type.kind!=="value"&&W.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(Q=A.parse(C[3],3,Pi),!Q)return null}return new A$(q,W,Q)}evaluate(C){const A=this.lhs.evaluate(C),L=this.rhs.evaluate(C);if(g&&this.hasUntypedArgument){const q=bn(A),W=bn(L);if(q.kind!==W.kind||q.kind!=="string"&&q.kind!=="number")throw new gi(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${q.kind}, ${W.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const q=bn(A),W=bn(L);if(q.kind!=="string"||W.kind!=="string")return l(C,A,L)}return this.collator?f(C,A,L,this.collator.evaluate(C)):l(C,A,L)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const is=ta("==",(function(d,l,f){return l===f}),qi),Ks=ta("!=",(function(d,l,f){return l!==f}),(function(d,l,f,g){return!qi(0,l,f,g)})),cu=ta("<",(function(d,l,f){return l<f}),(function(d,l,f,g){return g.compare(l,f)<0})),$c=ta(">",(function(d,l,f){return l>f}),(function(d,l,f,g){return g.compare(l,f)>0})),fu=ta("<=",(function(d,l,f){return l<=f}),(function(d,l,f,g){return g.compare(l,f)<=0})),$o=ta(">=",(function(d,l,f){return l>=f}),(function(d,l,f,g){return g.compare(l,f)>=0}));class Nl{constructor(l,f,g){this.type=Pi,this.locale=g,this.caseSensitive=l,this.diacriticSensitive=f}static parse(l,f){if(l.length!==2)return f.error("Expected one argument.");const g=l[1];if(typeof g!="object"||Array.isArray(g))return f.error("Collator options argument must be an object.");const _=f.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Kr);if(!_)return null;const C=f.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Kr);if(!C)return null;let A=null;return g.locale&&(A=f.parse(g.locale,1,Vr),!A)?null:new Nl(_,C,A)}evaluate(l){return new Rn(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class bl{constructor(l,f,g,_,C){this.type=Vr,this.number=l,this.locale=f,this.currency=g,this.minFractionDigits=_,this.maxFractionDigits=C}static parse(l,f){if(l.length!==3)return f.error("Expected two arguments.");const g=f.parse(l[1],1,yr);if(!g)return null;const _=l[2];if(typeof _!="object"||Array.isArray(_))return f.error("NumberFormat options argument must be an object.");let C=null;if(_.locale&&(C=f.parse(_.locale,1,Vr),!C))return null;let A=null;if(_.currency&&(A=f.parse(_.currency,1,Vr),!A))return null;let L=null;if(_["min-fraction-digits"]&&(L=f.parse(_["min-fraction-digits"],1,yr),!L))return null;let q=null;return _["max-fraction-digits"]&&(q=f.parse(_["max-fraction-digits"],1,yr),!q)?null:new bl(g,C,A,L,q)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class as{constructor(l){this.type=Ri,this.sections=l}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");const g=l[1];if(!Array.isArray(g)&&typeof g=="object")return f.error("First argument must be an image or text section.");const _=[];let C=!1;for(let A=1;A<=l.length-1;++A){const L=l[A];if(C&&typeof L=="object"&&!Array.isArray(L)){C=!1;let q=null;if(L["font-scale"]&&(q=f.parse(L["font-scale"],1,yr),!q))return null;let W=null;if(L["text-font"]&&(W=f.parse(L["text-font"],1,mi(Vr)),!W))return null;let Q=null;if(L["text-color"]&&(Q=f.parse(L["text-color"],1,An),!Q))return null;let ie=null;if(L["vertical-align"]){if(typeof L["vertical-align"]=="string"&&!un.includes(L["vertical-align"]))return f.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${L["vertical-align"]}' instead.`);if(ie=f.parse(L["vertical-align"],1,Vr),!ie)return null}const ye=_[_.length-1];ye.scale=q,ye.font=W,ye.textColor=Q,ye.verticalAlign=ie}else{const q=f.parse(l[A],1,mn);if(!q)return null;const W=q.type.kind;if(W!=="string"&&W!=="value"&&W!=="null"&&W!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,_.push({content:q,scale:null,font:null,textColor:null,verticalAlign:null})}}return new as(_)}evaluate(l){return new Jr(this.sections.map((f=>{const g=f.content.evaluate(l);return bn(g)===$n?new Sr("",g,null,null,null,f.verticalAlign?f.verticalAlign.evaluate(l):null):new Sr(Ws(g),null,f.scale?f.scale.evaluate(l):null,f.font?f.font.evaluate(l).join(","):null,f.textColor?f.textColor.evaluate(l):null,f.verticalAlign?f.verticalAlign.evaluate(l):null)})))}eachChild(l){for(const f of this.sections)l(f.content),f.scale&&l(f.scale),f.font&&l(f.font),f.textColor&&l(f.textColor),f.verticalAlign&&l(f.verticalAlign)}outputDefined(){return!1}}class pa{constructor(l){this.type=$n,this.input=l}static parse(l,f){if(l.length!==2)return f.error("Expected two arguments.");const g=f.parse(l[1],1,Vr);return g?new pa(g):f.error("No image name provided.")}evaluate(l){const f=this.input.evaluate(l),g=Ta.fromString(f);return g&&l.availableImages&&(g.available=l.availableImages.indexOf(f)>-1),g}eachChild(l){l(this.input)}outputDefined(){return!1}}class Za{constructor(l){this.type=yr,this.input=l}static parse(l,f){if(l.length!==2)return f.error(`Expected 1 argument, but found ${l.length-1} instead.`);const g=f.parse(l[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${Hn(g.type)} instead.`):new Za(g):null}evaluate(l){const f=this.input.evaluate(l);if(typeof f=="string")return[...f].length;if(Array.isArray(f))return f.length;throw new gi(`Expected value to be of type string or array, but found ${Hn(bn(f))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const Gi=8192;function vs(d,l){const f=(180+d[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,_=Math.pow(2,l.z);return[Math.round(f*_*Gi),Math.round(g*_*Gi)]}function Xs(d,l){const f=Math.pow(2,l.z);return[(_=(d[0]/Gi+l.x)/f,360*_-180),(g=(d[1]/Gi+l.y)/f,360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90)];var g,_}function Hi(d,l){d[0]=Math.min(d[0],l[0]),d[1]=Math.min(d[1],l[1]),d[2]=Math.max(d[2],l[0]),d[3]=Math.max(d[3],l[1])}function Fl(d,l){return!(d[0]<=l[0]||d[2]>=l[2]||d[1]<=l[1]||d[3]>=l[3])}function Ys(d,l,f){const g=d[0]-l[0],_=d[1]-l[1],C=d[0]-f[0],A=d[1]-f[1];return g*A-C*_==0&&g*C<=0&&_*A<=0}function bs(d,l,f,g){return(_=[g[0]-f[0],g[1]-f[1]])[0]*(C=[l[0]-d[0],l[1]-d[1]])[1]-_[1]*C[0]!=0&&!(!Js(d,l,f,g)||!Js(f,g,d,l));var _,C}function Ea(d,l,f){for(const g of f)for(let _=0;_<g.length-1;++_)if(bs(d,l,g[_],g[_+1]))return!0;return!1}function Ka(d,l,f=!1){let g=!1;for(const L of l)for(let q=0;q<L.length-1;q++){if(Ys(d,L[q],L[q+1]))return f;(C=L[q])[1]>(_=d)[1]!=(A=L[q+1])[1]>_[1]&&_[0]<(A[0]-C[0])*(_[1]-C[1])/(A[1]-C[1])+C[0]&&(g=!g)}var _,C,A;return g}function ac(d,l){for(const f of l)if(Ka(d,f))return!0;return!1}function ju(d,l){for(const f of d)if(!Ka(f,l))return!1;for(let f=0;f<d.length-1;++f)if(Ea(d[f],d[f+1],l))return!1;return!0}function _l(d,l){for(const f of l)if(ju(d,f))return!0;return!1}function Js(d,l,f,g){const _=g[0]-f[0],C=g[1]-f[1],A=(d[0]-f[0])*C-_*(d[1]-f[1]),L=(l[0]-f[0])*C-_*(l[1]-f[1]);return A>0&&L<0||A<0&&L>0}function Fa(d,l,f){const g=[];for(let _=0;_<d.length;_++){const C=[];for(let A=0;A<d[_].length;A++){const L=vs(d[_][A],f);Hi(l,L),C.push(L)}g.push(C)}return g}function Ia(d,l,f){const g=[];for(let _=0;_<d.length;_++){const C=Fa(d[_],l,f);g.push(C)}return g}function Bl(d,l,f,g){if(d[0]<f[0]||d[0]>f[2]){const _=.5*g;let C=d[0]-f[0]>_?-g:f[0]-d[0]>_?g:0;C===0&&(C=d[0]-f[2]>_?-g:f[2]-d[0]>_?g:0),d[0]+=C}Hi(l,d)}function Ba(d,l,f,g){const _=Math.pow(2,g.z)*Gi,C=[g.x*Gi,g.y*Gi],A=[];for(const L of d)for(const q of L){const W=[q.x+C[0],q.y+C[1]];Bl(W,l,f,_),A.push(W)}return A}function Qs(d,l,f,g){const _=Math.pow(2,g.z)*Gi,C=[g.x*Gi,g.y*Gi],A=[];for(const q of d){const W=[];for(const Q of q){const ie=[Q.x+C[0],Q.y+C[1]];Hi(l,ie),W.push(ie)}A.push(W)}if(l[2]-l[0]<=_/2){(L=l)[0]=L[1]=1/0,L[2]=L[3]=-1/0;for(const q of A)for(const W of q)Bl(W,l,f,_)}var L;return A}class no{constructor(l,f){this.type=Kr,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(ns(l[1])){const g=l[1];if(g.type==="FeatureCollection"){const _=[];for(const C of g.features){const{type:A,coordinates:L}=C.geometry;A==="Polygon"&&_.push(L),A==="MultiPolygon"&&_.push(...L)}if(_.length)return new no(g,{type:"MultiPolygon",coordinates:_})}else if(g.type==="Feature"){const _=g.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new no(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new no(g,g)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(f,g){const _=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],A=f.canonicalID();if(g.type==="Polygon"){const L=Fa(g.coordinates,C,A),q=Ba(f.geometry(),_,C,A);if(!Fl(_,C))return!1;for(const W of q)if(!Ka(W,L))return!1}if(g.type==="MultiPolygon"){const L=Ia(g.coordinates,C,A),q=Ba(f.geometry(),_,C,A);if(!Fl(_,C))return!1;for(const W of q)if(!ac(W,L))return!1}return!0})(l,this.geometries);if(l.geometryType()==="LineString")return(function(f,g){const _=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],A=f.canonicalID();if(g.type==="Polygon"){const L=Fa(g.coordinates,C,A),q=Qs(f.geometry(),_,C,A);if(!Fl(_,C))return!1;for(const W of q)if(!ju(W,L))return!1}if(g.type==="MultiPolygon"){const L=Ia(g.coordinates,C,A),q=Qs(f.geometry(),_,C,A);if(!Fl(_,C))return!1;for(const W of q)if(!_l(W,L))return!1}return!0})(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let el=class{constructor(d=[],l=(f,g)=>f<g?-1:f>g?1:0){if(this.data=d,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:l,compare:f}=this,g=l[d];for(;d>0;){const _=d-1>>1,C=l[_];if(f(g,C)>=0)break;l[d]=C,d=_}l[d]=g}_down(d){const{data:l,compare:f}=this,g=this.length>>1,_=l[d];for(;d<g;){let C=1+(d<<1);const A=C+1;if(A<this.length&&f(l[A],l[C])<0&&(C=A),f(l[C],_)>=0)break;l[d]=l[C],d=C}l[d]=_}};function aa(d,l,f=0,g=d.length-1,_=_s){for(;g>f;){if(g-f>600){const q=g-f+1,W=l-f+1,Q=Math.log(q),ie=.5*Math.exp(2*Q/3),ye=.5*Math.sqrt(Q*ie*(q-ie)/q)*(W-q/2<0?-1:1);aa(d,l,Math.max(f,Math.floor(l-W*ie/q+ye)),Math.min(g,Math.floor(l+(q-W)*ie/q+ye)),_)}const C=d[l];let A=f,L=g;for(Rs(d,f,l),_(d[g],C)>0&&Rs(d,f,g);A<L;){for(Rs(d,A,L),A++,L--;_(d[A],C)<0;)A++;for(;_(d[L],C)>0;)L--}_(d[f],C)===0?Rs(d,f,L):(L++,Rs(d,L,g)),L<=l&&(f=L+1),l<=L&&(g=L-1)}}function Rs(d,l,f){const g=d[l];d[l]=d[f],d[f]=g}function _s(d,l){return d<l?-1:d>l?1:0}function qo(d,l){if(d.length<=1)return[d];const f=[];let g,_;for(const C of d){const A=du(C);A!==0&&(C.area=Math.abs(A),_===void 0&&(_=A<0),_===A<0?(g&&f.push(g),g=[C]):g.push(C))}if(g&&f.push(g),l>1)for(let C=0;C<f.length;C++)f[C].length<=l||(aa(f[C],l,1,f[C].length-1,hu),f[C]=f[C].slice(0,l));return f}function hu(d,l){return l.area-d.area}function du(d){let l=0;for(let f,g,_=0,C=d.length,A=C-1;_<C;A=_++)f=d[_],g=d[A],l+=(g.x-f.x)*(f.y+g.y);return l}const Os=1/298.257223563,jl=Os*(2-Os),zl=Math.PI/180;class Ut{constructor(l){const f=6378.137*zl*1e3,g=Math.cos(l*zl),_=1/(1-jl*(1-g*g)),C=Math.sqrt(_);this.kx=f*C*g,this.ky=f*C*_*(1-jl)}distance(l,f){const g=this.wrap(l[0]-f[0])*this.kx,_=(l[1]-f[1])*this.ky;return Math.sqrt(g*g+_*_)}pointOnLine(l,f){let g,_,C,A,L=1/0;for(let q=0;q<l.length-1;q++){let W=l[q][0],Q=l[q][1],ie=this.wrap(l[q+1][0]-W)*this.kx,ye=(l[q+1][1]-Q)*this.ky,we=0;ie===0&&ye===0||(we=(this.wrap(f[0]-W)*this.kx*ie+(f[1]-Q)*this.ky*ye)/(ie*ie+ye*ye),we>1?(W=l[q+1][0],Q=l[q+1][1]):we>0&&(W+=ie/this.kx*we,Q+=ye/this.ky*we)),ie=this.wrap(f[0]-W)*this.kx,ye=(f[1]-Q)*this.ky;const Se=ie*ie+ye*ye;Se<L&&(L=Se,g=W,_=Q,C=q,A=we)}return{point:[g,_],index:C,t:Math.max(0,Math.min(1,A))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function Zt(d,l){return l[0]-d[0]}function Wr(d){return d[1]-d[0]+1}function en(d,l){return d[1]>=d[0]&&d[1]<l}function ai(d,l){if(d[0]>d[1])return[null,null];const f=Wr(d);if(l){if(f===2)return[d,null];const _=Math.floor(f/2);return[[d[0],d[0]+_],[d[0]+_,d[1]]]}if(f===1)return[d,null];const g=Math.floor(f/2)-1;return[[d[0],d[0]+g],[d[0]+g+1,d[1]]]}function gn(d,l){if(!en(l,d.length))return[1/0,1/0,-1/0,-1/0];const f=[1/0,1/0,-1/0,-1/0];for(let g=l[0];g<=l[1];++g)Hi(f,d[g]);return f}function Fn(d){const l=[1/0,1/0,-1/0,-1/0];for(const f of d)for(const g of f)Hi(l,g);return l}function Jn(d){return d[0]!==-1/0&&d[1]!==-1/0&&d[2]!==1/0&&d[3]!==1/0}function wi(d,l,f){if(!Jn(d)||!Jn(l))return NaN;let g=0,_=0;return d[2]<l[0]&&(g=l[0]-d[2]),d[0]>l[2]&&(g=d[0]-l[2]),d[1]>l[3]&&(_=d[1]-l[3]),d[3]<l[1]&&(_=l[1]-d[3]),f.distance([0,0],[g,_])}function Si(d,l,f){const g=f.pointOnLine(l,d);return f.distance(d,g.point)}function Wi(d,l,f,g,_){const C=Math.min(Si(d,[f,g],_),Si(l,[f,g],_)),A=Math.min(Si(f,[d,l],_),Si(g,[d,l],_));return Math.min(C,A)}function ja(d,l,f,g,_){if(!en(l,d.length)||!en(g,f.length))return 1/0;let C=1/0;for(let A=l[0];A<l[1];++A){const L=d[A],q=d[A+1];for(let W=g[0];W<g[1];++W){const Q=f[W],ie=f[W+1];if(bs(L,q,Q,ie))return 0;C=Math.min(C,Wi(L,q,Q,ie,_))}}return C}function os(d,l,f,g,_){if(!en(l,d.length)||!en(g,f.length))return NaN;let C=1/0;for(let A=l[0];A<=l[1];++A)for(let L=g[0];L<=g[1];++L)if(C=Math.min(C,_.distance(d[A],f[L])),C===0)return C;return C}function ho(d,l,f){if(Ka(d,l,!0))return 0;let g=1/0;for(const _ of l){const C=_[0],A=_[_.length-1];if(C!==A&&(g=Math.min(g,Si(d,[A,C],f)),g===0))return g;const L=f.pointOnLine(_,d);if(g=Math.min(g,f.distance(d,L.point)),g===0)return g}return g}function tl(d,l,f,g){if(!en(l,d.length))return NaN;for(let C=l[0];C<=l[1];++C)if(Ka(d[C],f,!0))return 0;let _=1/0;for(let C=l[0];C<l[1];++C){const A=d[C],L=d[C+1];for(const q of f)for(let W=0,Q=q.length,ie=Q-1;W<Q;ie=W++){const ye=q[ie],we=q[W];if(bs(A,L,ye,we))return 0;_=Math.min(_,Wi(A,L,ye,we,g))}}return _}function $l(d,l){for(const f of d)for(const g of f)if(Ka(g,l,!0))return!0;return!1}function oc(d,l,f,g=1/0){const _=Fn(d),C=Fn(l);if(g!==1/0&&wi(_,C,f)>=g)return g;if(Fl(_,C)){if($l(d,l))return 0}else if($l(l,d))return 0;let A=1/0;for(const L of d)for(let q=0,W=L.length,Q=W-1;q<W;Q=q++){const ie=L[Q],ye=L[q];for(const we of l)for(let Se=0,Re=we.length,He=Re-1;Se<Re;He=Se++){const it=we[He],Dt=we[Se];if(bs(ie,ye,it,Dt))return 0;A=Math.min(A,Wi(ie,ye,it,Dt,f))}}return A}function ql(d,l,f,g,_,C){if(!C)return;const A=wi(gn(g,C),_,f);A<l&&d.push([A,C,[0,0]])}function xl(d,l,f,g,_,C,A){if(!C||!A)return;const L=wi(gn(g,C),gn(_,A),f);L<l&&d.push([L,C,A])}function zu(d,l,f,g,_=1/0){let C=Math.min(g.distance(d[0],f[0][0]),_);if(C===0)return C;const A=new el([[0,[0,d.length-1],[0,0]]],Zt),L=Fn(f);for(;A.length>0;){const q=A.pop();if(q[0]>=C)continue;const W=q[1],Q=l?50:100;if(Wr(W)<=Q){if(!en(W,d.length))return NaN;if(l){const ie=tl(d,W,f,g);if(isNaN(ie)||ie===0)return ie;C=Math.min(C,ie)}else for(let ie=W[0];ie<=W[1];++ie){const ye=ho(d[ie],f,g);if(C=Math.min(C,ye),C===0)return 0}}else{const ie=ai(W,l);ql(A,C,g,d,L,ie[0]),ql(A,C,g,d,L,ie[1])}}return C}function sc(d,l,f,g,_,C=1/0){let A=Math.min(C,_.distance(d[0],f[0]));if(A===0)return A;const L=new el([[0,[0,d.length-1],[0,f.length-1]]],Zt);for(;L.length>0;){const q=L.pop();if(q[0]>=A)continue;const W=q[1],Q=q[2],ie=l?50:100,ye=g?50:100;if(Wr(W)<=ie&&Wr(Q)<=ye){if(!en(W,d.length)&&en(Q,f.length))return NaN;let we;if(l&&g)we=ja(d,W,f,Q,_),A=Math.min(A,we);else if(l&&!g){const Se=d.slice(W[0],W[1]+1);for(let Re=Q[0];Re<=Q[1];++Re)if(we=Si(f[Re],Se,_),A=Math.min(A,we),A===0)return A}else if(!l&&g){const Se=f.slice(Q[0],Q[1]+1);for(let Re=W[0];Re<=W[1];++Re)if(we=Si(d[Re],Se,_),A=Math.min(A,we),A===0)return A}else we=os(d,W,f,Q,_),A=Math.min(A,we)}else{const we=ai(W,l),Se=ai(Q,g);xl(L,A,_,d,f,we[0],Se[0]),xl(L,A,_,d,f,we[0],Se[1]),xl(L,A,_,d,f,we[1],Se[0]),xl(L,A,_,d,f,we[1],Se[1])}}return A}function qc(d){return d.type==="MultiPolygon"?d.coordinates.map((l=>({type:"Polygon",coordinates:l}))):d.type==="MultiLineString"?d.coordinates.map((l=>({type:"LineString",coordinates:l}))):d.type==="MultiPoint"?d.coordinates.map((l=>({type:"Point",coordinates:l}))):[d]}class yi{constructor(l,f){this.type=yr,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(ns(l[1])){const g=l[1];if(g.type==="FeatureCollection")return new yi(g,g.features.map((_=>qc(_.geometry))).flat());if(g.type==="Feature")return new yi(g,qc(g.geometry));if("type"in g&&"coordinates"in g)return new yi(g,qc(g))}return f.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(f,g){const _=f.geometry(),C=_.flat().map((q=>Xs([q.x,q.y],f.canonical)));if(_.length===0)return NaN;const A=new Ut(C[0][1]);let L=1/0;for(const q of g){switch(q.type){case"Point":L=Math.min(L,sc(C,!1,[q.coordinates],!1,A,L));break;case"LineString":L=Math.min(L,sc(C,!1,q.coordinates,!0,A,L));break;case"Polygon":L=Math.min(L,zu(C,!1,q.coordinates,A,L))}if(L===0)return L}return L})(l,this.geometries);if(l.geometryType()==="LineString")return(function(f,g){const _=f.geometry(),C=_.flat().map((q=>Xs([q.x,q.y],f.canonical)));if(_.length===0)return NaN;const A=new Ut(C[0][1]);let L=1/0;for(const q of g){switch(q.type){case"Point":L=Math.min(L,sc(C,!0,[q.coordinates],!1,A,L));break;case"LineString":L=Math.min(L,sc(C,!0,q.coordinates,!0,A,L));break;case"Polygon":L=Math.min(L,zu(C,!0,q.coordinates,A,L))}if(L===0)return L}return L})(l,this.geometries);if(l.geometryType()==="Polygon")return(function(f,g){const _=f.geometry();if(_.length===0||_[0].length===0)return NaN;const C=qo(_,0).map((q=>q.map((W=>W.map((Q=>Xs([Q.x,Q.y],f.canonical))))))),A=new Ut(C[0][0][0][1]);let L=1/0;for(const q of g)for(const W of C){switch(q.type){case"Point":L=Math.min(L,zu([q.coordinates],!1,W,A,L));break;case"LineString":L=Math.min(L,zu(q.coordinates,!0,W,A,L));break;case"Polygon":L=Math.min(L,oc(W,q.coordinates,A,L))}if(L===0)return L}return L})(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class vi{constructor(l){this.type=mn,this.key=l}static parse(l,f){if(l.length!==2)return f.error(`Expected 1 argument, but found ${l.length-1} instead.`);const g=l[1];return g==null?f.error("Global state property must be defined."):typeof g!="string"?f.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new vi(g)}evaluate(l){var f;const g=(f=l.globals)===null||f===void 0?void 0:f.globalState;return g&&Object.keys(g).length!==0?xt(g,this.key):null}eachChild(){}outputDefined(){return!1}}const rl={"==":is,"!=":Ks,">":$c,"<":cu,">=":$o,"<=":fu,array:Na,at:Oi,boolean:Na,case:Qe,coalesce:Yn,collator:Nl,format:as,image:pa,in:Wa,"index-of":K,interpolate:kn,"interpolate-hcl":kn,"interpolate-lab":kn,length:Za,let:Zs,literal:Sa,match:Te,number:Na,"number-format":bl,object:Na,slice:Rt,step:_r,string:Na,"to-boolean":zo,"to-color":zo,"to-number":zo,"to-string":zo,var:Ao,within:no,distance:yi,"global-state":vi};class oa{constructor(l,f,g,_){this.name=l,this.type=f,this._evaluate=g,this.args=_}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,f){const g=l[0],_=oa.definitions[g];if(!_)return f.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(_)?_[0]:_.type,A=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,L=A.filter((([W])=>!Array.isArray(W)||W.length===l.length-1));let q=null;for(const[W,Q]of L){q=new ys(f.registry,wl,f.path,null,f.scope);const ie=[];let ye=!1;for(let we=1;we<l.length;we++){const Se=l[we],Re=Array.isArray(W)?W[we-1]:W.type,He=q.parse(Se,1+ie.length,Re);if(!He){ye=!0;break}ie.push(He)}if(!ye)if(Array.isArray(W)&&W.length!==ie.length)q.error(`Expected ${W.length} arguments, but found ${ie.length} instead.`);else{for(let we=0;we<ie.length;we++){const Se=Array.isArray(W)?W[we]:W.type,Re=ie[we];q.concat(we+1).checkSubtype(Se,Re.type)}if(q.errors.length===0)return new oa(g,C,Q,ie)}}if(L.length===1)f.errors.push(...q.errors);else{const W=(L.length?L:A).map((([ie])=>{return ye=ie,Array.isArray(ye)?`(${ye.map(Hn).join(", ")})`:`(${Hn(ye.type)}...)`;var ye})).join(" | "),Q=[];for(let ie=1;ie<l.length;ie++){const ye=f.parse(l[ie],1+Q.length);if(!ye)return null;Q.push(Hn(ye.type))}f.error(`Expected arguments of type ${W}, but found (${Q.join(", ")}) instead.`)}return null}static register(l,f){oa.definitions=f;for(const g in f)l[g]=oa}}function lc(d,[l,f,g,_]){l=l.evaluate(d),f=f.evaluate(d),g=g.evaluate(d);const C=_?_.evaluate(d):1,A=Sn(l,f,g,C);if(A)throw new gi(A);return new ln(l/255,f/255,g/255,C,!1)}function Uo(d,l){return d in l}function xs(d,l){const f=l[d];return f===void 0?null:f}function Po(d){return{type:d}}function wl(d){if(d instanceof Ao)return wl(d.boundExpression);if(d instanceof oa&&d.name==="error"||d instanceof Nl||d instanceof no||d instanceof yi||d instanceof vi)return!1;const l=d instanceof zo||d instanceof Na;let f=!0;return d.eachChild((g=>{f=l?f&&wl(g):f&&g instanceof Sa})),!!f&&Ul(d)&&ss(d,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Ul(d){if(d instanceof oa&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof no||d instanceof yi)return!1;let l=!0;return d.eachChild((f=>{l&&!Ul(f)&&(l=!1)})),l}function ks(d){if(d instanceof oa&&d.name==="feature-state")return!1;let l=!0;return d.eachChild((f=>{l&&!ks(f)&&(l=!1)})),l}function ss(d,l){if(d instanceof oa&&l.indexOf(d.name)>=0)return!1;let f=!0;return d.eachChild((g=>{f&&!ss(g,l)&&(f=!1)})),f}function uc(d){return{result:"success",value:d}}function ws(d){return{result:"error",value:d}}function Ma(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function io(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function Sl(d){return!!d.expression&&d.expression.interpolated}function zn(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function Ls(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)&&bn(d)===Mi}function Vl(d){return d}function Of(d,l){const f=d.stops&&typeof d.stops[0][0]=="object",g=f||!(f||d.property!==void 0),_=d.type||(Sl(l)?"exponential":"interval"),C=(function(Q){switch(Q.type){case"color":return ln.parse;case"padding":return Dn.parse;case"numberArray":return li.parse;case"colorArray":return jn.parse;default:return null}})(l);if(C&&((d=zr({},d)).stops&&(d.stops=d.stops.map((Q=>[Q[0],C(Q[1])]))),d.default=C(d.default?d.default:l.default)),d.colorSpace&&(A=d.colorSpace)!=="rgb"&&A!=="hcl"&&A!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var A;const L=(function(Q){switch(Q){case"exponential":return vh;case"interval":return gd;case"categorical":return Np;case"identity":return kf;default:throw new Error(`Unknown function type "${Q}"`)}})(_);let q,W;if(_==="categorical"){q=Object.create(null);for(const Q of d.stops)q[Q[0]]=Q[1];W=typeof d.stops[0][0]}if(f){const Q={},ie=[];for(let Se=0;Se<d.stops.length;Se++){const Re=d.stops[Se],He=Re[0].zoom;Q[He]===void 0&&(Q[He]={zoom:He,type:d.type,property:d.property,default:d.default,stops:[]},ie.push(He)),Q[He].stops.push([Re[0].value,Re[1]])}const ye=[];for(const Se of ie)ye.push([Q[Se].zoom,Of(Q[Se],l)]);const we={name:"linear"};return{kind:"composite",interpolationType:we,interpolationFactor:kn.interpolationFactor.bind(void 0,we),zoomStops:ye.map((Se=>Se[0])),evaluate:({zoom:Se},Re)=>vh({stops:ye,base:d.base},l,Se).evaluate(Se,Re)}}if(g){const Q=_==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:Q,interpolationFactor:kn.interpolationFactor.bind(void 0,Q),zoomStops:d.stops.map((ie=>ie[0])),evaluate:({zoom:ie})=>L(d,l,ie,q,W)}}return{kind:"source",evaluate(Q,ie){const ye=ie&&ie.properties?ie.properties[d.property]:void 0;return ye===void 0?cc(d.default,l.default):L(d,l,ye,q,W)}}}function cc(d,l,f){return d!==void 0?d:l!==void 0?l:f!==void 0?f:void 0}function Np(d,l,f,g,_){return cc(typeof f===_?g[f]:void 0,d.default,l.default)}function gd(d,l,f){if(zn(f)!=="number")return cc(d.default,l.default);const g=d.stops.length;if(g===1||f<=d.stops[0][0])return d.stops[0][1];if(f>=d.stops[g-1][0])return d.stops[g-1][1];const _=Ht(d.stops.map((C=>C[0])),f);return d.stops[_][1]}function vh(d,l,f){const g=d.base!==void 0?d.base:1;if(zn(f)!=="number")return cc(d.default,l.default);const _=d.stops.length;if(_===1||f<=d.stops[0][0])return d.stops[0][1];if(f>=d.stops[_-1][0])return d.stops[_-1][1];const C=Ht(d.stops.map((Q=>Q[0])),f),A=(function(Q,ie,ye,we){const Se=we-ye,Re=Q-ye;return Se===0?0:ie===1?Re/Se:(Math.pow(ie,Re)-1)/(Math.pow(ie,Se)-1)})(f,g,d.stops[C][0],d.stops[C+1][0]),L=d.stops[C][1],q=d.stops[C+1][1],W=Ai[l.type]||Vl;return typeof L.evaluate=="function"?{evaluate(...Q){const ie=L.evaluate.apply(void 0,Q),ye=q.evaluate.apply(void 0,Q);if(ie!==void 0&&ye!==void 0)return W(ie,ye,A,d.colorSpace)}}:W(L,q,A,d.colorSpace)}function kf(d,l,f){switch(l.type){case"color":f=ln.parse(f);break;case"formatted":f=Jr.fromString(f.toString());break;case"resolvedImage":f=Ta.fromString(f.toString());break;case"padding":f=Dn.parse(f);break;case"colorArray":f=jn.parse(f);break;case"numberArray":f=li.parse(f);break;default:zn(f)===l.type||l.type==="enum"&&l.values[f]||(f=void 0)}return cc(f,d.default,l.default)}oa.register(rl,{error:[{kind:"error"},[Vr],(d,[l])=>{throw new gi(l.evaluate(d))}],typeof:[Vr,[mn],(d,[l])=>Hn(bn(l.evaluate(d)))],"to-rgba":[mi(yr,4),[An],(d,[l])=>{const[f,g,_,C]=l.evaluate(d).rgb;return[255*f,255*g,255*_,C]}],rgb:[An,[yr,yr,yr],lc],rgba:[An,[yr,yr,yr,yr],lc],has:{type:Kr,overloads:[[[Vr],(d,[l])=>Uo(l.evaluate(d),d.properties())],[[Vr,Mi],(d,[l,f])=>Uo(l.evaluate(d),f.evaluate(d))]]},get:{type:mn,overloads:[[[Vr],(d,[l])=>xs(l.evaluate(d),d.properties())],[[Vr,Mi],(d,[l,f])=>xs(l.evaluate(d),f.evaluate(d))]]},"feature-state":[mn,[Vr],(d,[l])=>xs(l.evaluate(d),d.featureState||{})],properties:[Mi,[],d=>d.properties()],"geometry-type":[Vr,[],d=>d.geometryType()],id:[mn,[],d=>d.id()],zoom:[yr,[],d=>d.globals.zoom],"heatmap-density":[yr,[],d=>d.globals.heatmapDensity||0],elevation:[yr,[],d=>d.globals.elevation||0],"line-progress":[yr,[],d=>d.globals.lineProgress||0],accumulated:[mn,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[yr,Po(yr),(d,l)=>{let f=0;for(const g of l)f+=g.evaluate(d);return f}],"*":[yr,Po(yr),(d,l)=>{let f=1;for(const g of l)f*=g.evaluate(d);return f}],"-":{type:yr,overloads:[[[yr,yr],(d,[l,f])=>l.evaluate(d)-f.evaluate(d)],[[yr],(d,[l])=>-l.evaluate(d)]]},"/":[yr,[yr,yr],(d,[l,f])=>l.evaluate(d)/f.evaluate(d)],"%":[yr,[yr,yr],(d,[l,f])=>l.evaluate(d)%f.evaluate(d)],ln2:[yr,[],()=>Math.LN2],pi:[yr,[],()=>Math.PI],e:[yr,[],()=>Math.E],"^":[yr,[yr,yr],(d,[l,f])=>Math.pow(l.evaluate(d),f.evaluate(d))],sqrt:[yr,[yr],(d,[l])=>Math.sqrt(l.evaluate(d))],log10:[yr,[yr],(d,[l])=>Math.log(l.evaluate(d))/Math.LN10],ln:[yr,[yr],(d,[l])=>Math.log(l.evaluate(d))],log2:[yr,[yr],(d,[l])=>Math.log(l.evaluate(d))/Math.LN2],sin:[yr,[yr],(d,[l])=>Math.sin(l.evaluate(d))],cos:[yr,[yr],(d,[l])=>Math.cos(l.evaluate(d))],tan:[yr,[yr],(d,[l])=>Math.tan(l.evaluate(d))],asin:[yr,[yr],(d,[l])=>Math.asin(l.evaluate(d))],acos:[yr,[yr],(d,[l])=>Math.acos(l.evaluate(d))],atan:[yr,[yr],(d,[l])=>Math.atan(l.evaluate(d))],min:[yr,Po(yr),(d,l)=>Math.min(...l.map((f=>f.evaluate(d))))],max:[yr,Po(yr),(d,l)=>Math.max(...l.map((f=>f.evaluate(d))))],abs:[yr,[yr],(d,[l])=>Math.abs(l.evaluate(d))],round:[yr,[yr],(d,[l])=>{const f=l.evaluate(d);return f<0?-Math.round(-f):Math.round(f)}],floor:[yr,[yr],(d,[l])=>Math.floor(l.evaluate(d))],ceil:[yr,[yr],(d,[l])=>Math.ceil(l.evaluate(d))],"filter-==":[Kr,[Vr,mn],(d,[l,f])=>d.properties()[l.value]===f.value],"filter-id-==":[Kr,[mn],(d,[l])=>d.id()===l.value],"filter-type-==":[Kr,[Vr],(d,[l])=>d.geometryType()===l.value],"filter-<":[Kr,[Vr,mn],(d,[l,f])=>{const g=d.properties()[l.value],_=f.value;return typeof g==typeof _&&g<_}],"filter-id-<":[Kr,[mn],(d,[l])=>{const f=d.id(),g=l.value;return typeof f==typeof g&&f<g}],"filter->":[Kr,[Vr,mn],(d,[l,f])=>{const g=d.properties()[l.value],_=f.value;return typeof g==typeof _&&g>_}],"filter-id->":[Kr,[mn],(d,[l])=>{const f=d.id(),g=l.value;return typeof f==typeof g&&f>g}],"filter-<=":[Kr,[Vr,mn],(d,[l,f])=>{const g=d.properties()[l.value],_=f.value;return typeof g==typeof _&&g<=_}],"filter-id-<=":[Kr,[mn],(d,[l])=>{const f=d.id(),g=l.value;return typeof f==typeof g&&f<=g}],"filter->=":[Kr,[Vr,mn],(d,[l,f])=>{const g=d.properties()[l.value],_=f.value;return typeof g==typeof _&&g>=_}],"filter-id->=":[Kr,[mn],(d,[l])=>{const f=d.id(),g=l.value;return typeof f==typeof g&&f>=g}],"filter-has":[Kr,[mn],(d,[l])=>l.value in d.properties()],"filter-has-id":[Kr,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[Kr,[mi(Vr)],(d,[l])=>l.value.indexOf(d.geometryType())>=0],"filter-id-in":[Kr,[mi(mn)],(d,[l])=>l.value.indexOf(d.id())>=0],"filter-in-small":[Kr,[Vr,mi(mn)],(d,[l,f])=>f.value.indexOf(d.properties()[l.value])>=0],"filter-in-large":[Kr,[Vr,mi(mn)],(d,[l,f])=>(function(g,_,C,A){for(;C<=A;){const L=C+A>>1;if(_[L]===g)return!0;_[L]>g?A=L-1:C=L+1}return!1})(d.properties()[l.value],f.value,0,f.value.length-1)],all:{type:Kr,overloads:[[[Kr,Kr],(d,[l,f])=>l.evaluate(d)&&f.evaluate(d)],[Po(Kr),(d,l)=>{for(const f of l)if(!f.evaluate(d))return!1;return!0}]]},any:{type:Kr,overloads:[[[Kr,Kr],(d,[l,f])=>l.evaluate(d)||f.evaluate(d)],[Po(Kr),(d,l)=>{for(const f of l)if(f.evaluate(d))return!0;return!1}]]},"!":[Kr,[Kr],(d,[l])=>!l.evaluate(d)],"is-supported-script":[Kr,[Vr],(d,[l])=>{const f=d.globals&&d.globals.isSupportedScript;return!f||f(l.evaluate(d))}],upcase:[Vr,[Vr],(d,[l])=>l.evaluate(d).toUpperCase()],downcase:[Vr,[Vr],(d,[l])=>l.evaluate(d).toLowerCase()],concat:[Vr,Po(mn),(d,l)=>l.map((f=>Ws(f.evaluate(d)))).join("")],"resolved-locale":[Vr,[Pi],(d,[l])=>l.evaluate(d).resolvedLocale()]});class Uc{constructor(l,f){this.expression=l,this._warningHistory={},this._evaluator=new uu,this._defaultValue=f?(function(g){if(g.type==="color"&&Ls(g.default))return new ln(0,0,0,0);switch(g.type){case"color":return ln.parse(g.default)||null;case"padding":return Dn.parse(g.default)||null;case"numberArray":return li.parse(g.default)||null;case"colorArray":return jn.parse(g.default)||null;case"variableAnchorOffsetCollection":return dn.parse(g.default)||null;case"projectionDefinition":return On.parse(g.default)||null;default:return g.default===void 0?null:g.default}})(f):null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(l,f,g,_,C,A){return this._evaluator.globals=l,this._evaluator.feature=f,this._evaluator.featureState=g,this._evaluator.canonical=_,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=A,this.expression.evaluate(this._evaluator)}evaluate(l,f,g,_,C,A){this._evaluator.globals=l,this._evaluator.feature=f||null,this._evaluator.featureState=g||null,this._evaluator.canonical=_,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=A||null;try{const L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new gi(`Expected value to be one of ${Object.keys(this._enumValues).map((q=>JSON.stringify(q))).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(L.message)),this._defaultValue}}}function bh(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in rl}function _h(d,l){const f=new ys(rl,wl,[],l?(function(_){const C={color:An,string:Vr,number:yr,enum:Vr,boolean:Kr,formatted:Ri,padding:ni,numberArray:Eo,colorArray:Ji,projectionDefinition:Ni,resolvedImage:$n,variableAnchorOffsetCollection:qn};return _.type==="array"?mi(C[_.value]||mn,_.length):C[_.type]})(l):void 0),g=f.parse(d,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?uc(new Uc(g,l)):ws(f.errors)}class Vc{constructor(l,f){this.kind=l,this._styleExpression=f,this.isStateDependent=l!=="constant"&&!ks(f.expression),this.globalStateRefs=Hc(f.expression)}evaluateWithoutErrorHandling(l,f,g,_,C,A){return this._styleExpression.evaluateWithoutErrorHandling(l,f,g,_,C,A)}evaluate(l,f,g,_,C,A){return this._styleExpression.evaluate(l,f,g,_,C,A)}}class xh{constructor(l,f,g,_){this.kind=l,this.zoomStops=g,this._styleExpression=f,this.isStateDependent=l!=="camera"&&!ks(f.expression),this.globalStateRefs=Hc(f.expression),this.interpolationType=_}evaluateWithoutErrorHandling(l,f,g,_,C,A){return this._styleExpression.evaluateWithoutErrorHandling(l,f,g,_,C,A)}evaluate(l,f,g,_,C,A){return this._styleExpression.evaluate(l,f,g,_,C,A)}interpolationFactor(l,f,g){return this.interpolationType?kn.interpolationFactor(this.interpolationType,l,f,g):0}}function yd(d,l){const f=_h(d,l);if(f.result==="error")return f;const g=f.value.expression,_=Ul(g);if(!_&&!Ma(l))return ws([new kr("","data expressions not supported")]);const C=ss(g,["zoom"]);if(!C&&!io(l))return ws([new kr("","zoom expressions not supported")]);const A=Gc(g);return A||C?A instanceof kr?ws([A]):A instanceof kn&&!Sl(l)?ws([new kr("",'"interpolate" expressions cannot be used with this property')]):uc(A?new xh(_?"camera":"composite",f.value,A.labels,A instanceof kn?A.interpolation:void 0):new Vc(_?"constant":"source",f.value)):ws([new kr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Lf{constructor(l,f){this._parameters=l,this._specification=f,zr(this,Of(this._parameters,this._specification))}static deserialize(l){return new Lf(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Gc(d){let l=null;if(d instanceof Zs)l=Gc(d.result);else if(d instanceof Yn){for(const f of d.args)if(l=Gc(f),l)break}else(d instanceof _r||d instanceof kn)&&d.input instanceof oa&&d.input.name==="zoom"&&(l=d);return l instanceof kr||d.eachChild((f=>{const g=Gc(f);g instanceof kr?l=g:!l&&g?l=new kr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&g&&l!==g&&(l=new kr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),l}function Hc(d,l=new Set){return d instanceof vi&&l.add(d.key),d.eachChild((f=>{Hc(f,l)})),l}function fc(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const l of d.slice(1))if(!fc(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const Df={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function nl(d){if(d==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};fc(d)||(d=Nf(d));const l=_h(d,Df);if(l.result==="error")throw new Error(l.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,g,_)=>l.value.evaluate(f,g,{},_),needGeometry:Fp(d),getGlobalStateRefs:()=>Hc(l.value.expression)}}function ry(d,l){return d<l?-1:d>l?1:0}function Fp(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let l=1;l<d.length;l++)if(Fp(d[l]))return!0;return!1}function Nf(d){if(!d)return!0;const l=d[0];return d.length<=1?l!=="any":l==="=="?vd(d[1],d[2],"=="):l==="!="?Ff(vd(d[1],d[2],"==")):l==="<"||l===">"||l==="<="||l===">="?vd(d[1],d[2],l):l==="any"?(f=d.slice(1),["any"].concat(f.map(Nf))):l==="all"?["all"].concat(d.slice(1).map(Nf)):l==="none"?["all"].concat(d.slice(1).map(Nf).map(Ff)):l==="in"?Bp(d[1],d.slice(2)):l==="!in"?Ff(Bp(d[1],d.slice(2))):l==="has"?jp(d[1]):l!=="!has"||Ff(jp(d[1]));var f}function vd(d,l,f){switch(d){case"$type":return[`filter-type-${f}`,l];case"$id":return[`filter-id-${f}`,l];default:return[`filter-${f}`,d,l]}}function Bp(d,l){if(l.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some((f=>typeof f!=typeof l[0]))?["filter-in-large",d,["literal",l.sort(ry)]]:["filter-in-small",d,["literal",l]]}}function jp(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Ff(d){return["!",d]}function El(d){const l=typeof d;if(l==="number"||l==="boolean"||l==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let _="[";for(const C of d)_+=`${El(C)},`;return`${_}]`}const f=Object.keys(d).sort();let g="{";for(let _=0;_<f.length;_++)g+=`${JSON.stringify(f[_])}:${El(d[f[_]])},`;return`${g}}`}function Ss(d){let l="";for(const f of Pr)l+=`/${El(d[f])}`;return l}function Gl(d){const l=d.value;return l?[new qt(d.key,l,"constants have been deprecated as of v8")]:[]}function Ca(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function pu(d){if(Array.isArray(d))return d.map(pu);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const l={};for(const f in d)l[f]=pu(d[f]);return l}return Ca(d)}function ao(d){const l=d.key,f=d.value,g=d.valueSpec||{},_=d.objectElementValidators||{},C=d.style,A=d.styleSpec,L=d.validateSpec;let q=[];const W=zn(f);if(W!=="object")return[new qt(l,f,`object expected, ${W} found`)];for(const Q in f){const ie=Q.split(".")[0],ye=xt(g,ie)||g["*"];let we;if(xt(_,ie))we=_[ie];else if(xt(g,ie))we=L;else if(_["*"])we=_["*"];else{if(!g["*"]){q.push(new qt(l,f[Q],`unknown property "${Q}"`));continue}we=L}q=q.concat(we({key:(l&&`${l}.`)+Q,value:f[Q],valueSpec:ye,style:C,styleSpec:A,object:f,objectKey:Q,validateSpec:L},f))}for(const Q in g)_[Q]||g[Q].required&&g[Q].default===void 0&&f[Q]===void 0&&q.push(new qt(l,f,`missing required property "${Q}"`));return q}function ls(d){const l=d.value,f=d.valueSpec,g=d.style,_=d.styleSpec,C=d.key,A=d.arrayElementValidator||d.validateSpec;if(zn(l)!=="array")return[new qt(C,l,`array expected, ${zn(l)} found`)];if(f.length&&l.length!==f.length)return[new qt(C,l,`array length ${f.length} expected, length ${l.length} found`)];if(f["min-length"]&&l.length<f["min-length"])return[new qt(C,l,`array length at least ${f["min-length"]} expected, length ${l.length} found`)];let L={type:f.value,values:f.values};_.$version<7&&(L.function=f.function),zn(f.value)==="object"&&(L=f.value);let q=[];for(let W=0;W<l.length;W++)q=q.concat(A({array:l,arrayIndex:W,value:l[W],valueSpec:L,validateSpec:d.validateSpec,style:g,styleSpec:_,key:`${C}[${W}]`}));return q}function Bf(d){const l=d.key,f=d.value,g=d.valueSpec;let _=zn(f);return _==="number"&&f!=f&&(_="NaN"),_!=="number"?[new qt(l,f,`number expected, ${_} found`)]:"minimum"in g&&f<g.minimum?[new qt(l,f,`${f} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&f>g.maximum?[new qt(l,f,`${f} is greater than the maximum value ${g.maximum}`)]:[]}function Wc(d){const l=d.valueSpec,f=Ca(d.value.type);let g,_,C,A={};const L=f!=="categorical"&&d.value.property===void 0,q=!L,W=zn(d.value.stops)==="array"&&zn(d.value.stops[0])==="array"&&zn(d.value.stops[0][0])==="object",Q=ao({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(we){if(f==="identity")return[new qt(we.key,we.value,'identity function may not have a "stops" property')];let Se=[];const Re=we.value;return Se=Se.concat(ls({key:we.key,value:Re,valueSpec:we.valueSpec,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec,arrayElementValidator:ie})),zn(Re)==="array"&&Re.length===0&&Se.push(new qt(we.key,Re,"array must have at least one stop")),Se},default:function(we){return we.validateSpec({key:we.key,value:we.value,valueSpec:l,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec})}}});return f==="identity"&&L&&Q.push(new qt(d.key,d.value,'missing required property "property"')),f==="identity"||d.value.stops||Q.push(new qt(d.key,d.value,'missing required property "stops"')),f==="exponential"&&d.valueSpec.expression&&!Sl(d.valueSpec)&&Q.push(new qt(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(q&&!Ma(d.valueSpec)?Q.push(new qt(d.key,d.value,"property functions not supported")):L&&!io(d.valueSpec)&&Q.push(new qt(d.key,d.value,"zoom functions not supported"))),f!=="categorical"&&!W||d.value.property!==void 0||Q.push(new qt(d.key,d.value,'"property" property is required')),Q;function ie(we){let Se=[];const Re=we.value,He=we.key;if(zn(Re)!=="array")return[new qt(He,Re,`array expected, ${zn(Re)} found`)];if(Re.length!==2)return[new qt(He,Re,`array length 2 expected, length ${Re.length} found`)];if(W){if(zn(Re[0])!=="object")return[new qt(He,Re,`object expected, ${zn(Re[0])} found`)];if(Re[0].zoom===void 0)return[new qt(He,Re,"object stop key must have zoom")];if(Re[0].value===void 0)return[new qt(He,Re,"object stop key must have value")];if(C&&C>Ca(Re[0].zoom))return[new qt(He,Re[0].zoom,"stop zoom values must appear in ascending order")];Ca(Re[0].zoom)!==C&&(C=Ca(Re[0].zoom),_=void 0,A={}),Se=Se.concat(ao({key:`${He}[0]`,value:Re[0],valueSpec:{zoom:{}},validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec,objectElementValidators:{zoom:Bf,value:ye}}))}else Se=Se.concat(ye({key:`${He}[0]`,value:Re[0],validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec},Re));return bh(pu(Re[1]))?Se.concat([new qt(`${He}[1]`,Re[1],"expressions are not allowed in function stops.")]):Se.concat(we.validateSpec({key:`${He}[1]`,value:Re[1],valueSpec:l,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec}))}function ye(we,Se){const Re=zn(we.value),He=Ca(we.value),it=we.value!==null?we.value:Se;if(g){if(Re!==g)return[new qt(we.key,it,`${Re} stop domain type must match previous stop domain type ${g}`)]}else g=Re;if(Re!=="number"&&Re!=="string"&&Re!=="boolean")return[new qt(we.key,it,"stop domain value must be a number, string, or boolean")];if(Re!=="number"&&f!=="categorical"){let Dt=`number expected, ${Re} found`;return Ma(l)&&f===void 0&&(Dt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qt(we.key,it,Dt)]}return f!=="categorical"||Re!=="number"||isFinite(He)&&Math.floor(He)===He?f!=="categorical"&&Re==="number"&&_!==void 0&&He<_?[new qt(we.key,it,"stop domain values must appear in ascending order")]:(_=He,f==="categorical"&&He in A?[new qt(we.key,it,"stop domain values must be unique")]:(A[He]=!0,[])):[new qt(we.key,it,`integer expected, found ${He}`)]}}function hc(d){const l=(d.expressionContext==="property"?yd:_h)(pu(d.value),d.valueSpec);if(l.result==="error")return l.value.map((g=>new qt(`${d.key}${g.key}`,d.value,g.message)));const f=l.value.expression||l.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!f.outputDefined())return[new qt(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!ks(f))return[new qt(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!ks(f))return[new qt(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!ss(f,["zoom","feature-state"]))return[new qt(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!Ul(f))return[new qt(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wh(d){const l=d.key,f=d.value,g=zn(f);return g!=="string"?[new qt(l,f,`color expected, ${g} found`)]:ln.parse(String(f))?[]:[new qt(l,f,`color expected, "${f}" found`)]}function Zc(d){const l=d.key,f=d.value,g=d.valueSpec,_=[];return Array.isArray(g.values)?g.values.indexOf(Ca(f))===-1&&_.push(new qt(l,f,`expected one of [${g.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(g.values).indexOf(Ca(f))===-1&&_.push(new qt(l,f,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(f)} found`)),_}function Sh(d){return fc(pu(d.value))?hc(zr({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zp(d)}function zp(d){const l=d.value,f=d.key;if(zn(l)!=="array")return[new qt(f,l,`array expected, ${zn(l)} found`)];const g=d.styleSpec;let _,C=[];if(l.length<1)return[new qt(f,l,"filter array must have at least 1 element")];switch(C=C.concat(Zc({key:`${f}[0]`,value:l[0],valueSpec:g.filter_operator,style:d.style,styleSpec:d.styleSpec})),Ca(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Ca(l[1])==="$type"&&C.push(new qt(f,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&C.push(new qt(f,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(_=zn(l[1]),_!=="string"&&C.push(new qt(`${f}[1]`,l[1],`string expected, ${_} found`)));for(let A=2;A<l.length;A++)_=zn(l[A]),Ca(l[1])==="$type"?C=C.concat(Zc({key:`${f}[${A}]`,value:l[A],valueSpec:g.geometry_type,style:d.style,styleSpec:d.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&C.push(new qt(`${f}[${A}]`,l[A],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let A=1;A<l.length;A++)C=C.concat(zp({key:`${f}[${A}]`,value:l[A],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":_=zn(l[1]),l.length!==2?C.push(new qt(f,l,`filter array for "${l[0]}" operator must have 2 elements`)):_!=="string"&&C.push(new qt(`${f}[1]`,l[1],`string expected, ${_} found`))}return C}function jf(d,l){const f=d.key,g=d.validateSpec,_=d.style,C=d.styleSpec,A=d.value,L=d.objectKey,q=C[`${l}_${d.layerType}`];if(!q)return[];const W=L.match(/^(.*)-transition$/);if(l==="paint"&&W&&q[W[1]]&&q[W[1]].transition)return g({key:f,value:A,valueSpec:C.transition,style:_,styleSpec:C});const Q=d.valueSpec||q[L];if(!Q)return[new qt(f,A,`unknown property "${L}"`)];let ie;if(zn(A)==="string"&&Ma(Q)&&!Q.tokens&&(ie=/^{([^}]+)}$/.exec(A)))return[new qt(f,A,`"${L}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ie[1])} }\`.`)];const ye=[];return d.layerType==="symbol"&&(L==="text-field"&&_&&!_.glyphs&&ye.push(new qt(f,A,'use of "text-field" requires a style "glyphs" property')),L==="text-font"&&Ls(pu(A))&&Ca(A.type)==="identity"&&ye.push(new qt(f,A,'"text-font" does not support identity functions'))),ye.concat(g({key:d.key,value:A,valueSpec:Q,style:_,styleSpec:C,expressionContext:"property",propertyType:l,propertyKey:L}))}function mu(d){return jf(d,"paint")}function Hl(d){return jf(d,"layout")}function Vo(d){let l=[];const f=d.value,g=d.key,_=d.style,C=d.styleSpec;if(zn(f)!=="object")return[new qt(g,f,`object expected, ${zn(f)} found`)];f.type||f.ref||l.push(new qt(g,f,'either "type" or "ref" is required'));let A=Ca(f.type);const L=Ca(f.ref);if(f.id){const q=Ca(f.id);for(let W=0;W<d.arrayIndex;W++){const Q=_.layers[W];Ca(Q.id)===q&&l.push(new qt(g,f.id,`duplicate layer id "${f.id}", previously used at line ${Q.id.__line__}`))}}if("ref"in f){let q;["type","source","source-layer","filter","layout"].forEach((W=>{W in f&&l.push(new qt(g,f[W],`"${W}" is prohibited for ref layers`))})),_.layers.forEach((W=>{Ca(W.id)===L&&(q=W)})),q?q.ref?l.push(new qt(g,f.ref,"ref cannot reference another ref layer")):A=Ca(q.type):l.push(new qt(g,f.ref,`ref layer "${L}" not found`))}else if(A!=="background")if(f.source){const q=_.sources&&_.sources[f.source],W=q&&Ca(q.type);q?W==="vector"&&A==="raster"?l.push(new qt(g,f.source,`layer "${f.id}" requires a raster source`)):W!=="raster-dem"&&A==="hillshade"||W!=="raster-dem"&&A==="color-relief"?l.push(new qt(g,f.source,`layer "${f.id}" requires a raster-dem source`)):W==="raster"&&A!=="raster"?l.push(new qt(g,f.source,`layer "${f.id}" requires a vector source`)):W!=="vector"||f["source-layer"]?W==="raster-dem"&&A!=="hillshade"&&A!=="color-relief"?l.push(new qt(g,f.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):A!=="line"||!f.paint||!f.paint["line-gradient"]||W==="geojson"&&q.lineMetrics||l.push(new qt(g,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new qt(g,f,`layer "${f.id}" must specify a "source-layer"`)):l.push(new qt(g,f.source,`source "${f.source}" not found`))}else l.push(new qt(g,f,'missing required property "source"'));return l=l.concat(ao({key:g,value:f,valueSpec:C.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${g}.type`,value:f.type,valueSpec:C.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:f,objectKey:"type"}),filter:Sh,layout:q=>ao({layer:f,key:q.key,value:q.value,style:q.style,styleSpec:q.styleSpec,validateSpec:q.validateSpec,objectElementValidators:{"*":W=>Hl(zr({layerType:A},W))}}),paint:q=>ao({layer:f,key:q.key,value:q.value,style:q.style,styleSpec:q.styleSpec,validateSpec:q.validateSpec,objectElementValidators:{"*":W=>mu(zr({layerType:A},W))}})}})),l}function Cl(d){const l=d.value,f=d.key,g=zn(l);return g!=="string"?[new qt(f,l,`string expected, ${g} found`)]:[]}const Eh={promoteId:function({key:d,value:l}){if(zn(l)==="string")return Cl({key:d,value:l});{const f=[];for(const g in l)f.push(...Cl({key:`${d}.${g}`,value:l[g]}));return f}}};function $p(d){const l=d.value,f=d.key,g=d.styleSpec,_=d.style,C=d.validateSpec;if(!l.type)return[new qt(f,l,'"type" is required')];const A=Ca(l.type);let L;switch(A){case"vector":case"raster":return L=ao({key:f,value:l,valueSpec:g[`source_${A.replace("-","_")}`],style:d.style,styleSpec:g,objectElementValidators:Eh,validateSpec:C}),L;case"raster-dem":return L=(function(q){var W;const Q=(W=q.sourceName)!==null&&W!==void 0?W:"",ie=q.value,ye=q.styleSpec,we=ye.source_raster_dem,Se=q.style;let Re=[];const He=zn(ie);if(ie===void 0)return Re;if(He!=="object")return Re.push(new qt("source_raster_dem",ie,`object expected, ${He} found`)),Re;const it=Ca(ie.encoding)==="custom",Dt=["redFactor","greenFactor","blueFactor","baseShift"],yt=q.value.encoding?`"${q.value.encoding}"`:"Default";for(const be in ie)!it&&Dt.includes(be)?Re.push(new qt(be,ie[be],`In "${Q}": "${be}" is only valid when "encoding" is set to "custom". ${yt} encoding found`)):we[be]?Re=Re.concat(q.validateSpec({key:be,value:ie[be],valueSpec:we[be],validateSpec:q.validateSpec,style:Se,styleSpec:ye})):Re.push(new qt(be,ie[be],`unknown property "${be}"`));return Re})({sourceName:f,value:l,style:d.style,styleSpec:g,validateSpec:C}),L;case"geojson":if(L=ao({key:f,value:l,valueSpec:g.source_geojson,style:_,styleSpec:g,validateSpec:C,objectElementValidators:Eh}),l.cluster)for(const q in l.clusterProperties){const[W,Q]=l.clusterProperties[q],ie=typeof W=="string"?[W,["accumulated"],["get",q]]:W;L.push(...hc({key:`${f}.${q}.map`,value:Q,expressionContext:"cluster-map"})),L.push(...hc({key:`${f}.${q}.reduce`,value:ie,expressionContext:"cluster-reduce"}))}return L;case"video":return ao({key:f,value:l,valueSpec:g.source_video,style:_,validateSpec:C,styleSpec:g});case"image":return ao({key:f,value:l,valueSpec:g.source_image,style:_,validateSpec:C,styleSpec:g});case"canvas":return[new qt(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zc({key:`${f}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function qp(d){const l=d.value,f=d.styleSpec,g=f.light,_=d.style;let C=[];const A=zn(l);if(l===void 0)return C;if(A!=="object")return C=C.concat([new qt("light",l,`object expected, ${A} found`)]),C;for(const L in l){const q=L.match(/^(.*)-transition$/);C=C.concat(q&&g[q[1]]&&g[q[1]].transition?d.validateSpec({key:L,value:l[L],valueSpec:f.transition,validateSpec:d.validateSpec,style:_,styleSpec:f}):g[L]?d.validateSpec({key:L,value:l[L],valueSpec:g[L],validateSpec:d.validateSpec,style:_,styleSpec:f}):[new qt(L,l[L],`unknown property "${L}"`)])}return C}function Kc(d){const l=d.value,f=d.styleSpec,g=f.sky,_=d.style,C=zn(l);if(l===void 0)return[];if(C!=="object")return[new qt("sky",l,`object expected, ${C} found`)];let A=[];for(const L in l)A=A.concat(g[L]?d.validateSpec({key:L,value:l[L],valueSpec:g[L],style:_,styleSpec:f}):[new qt(L,l[L],`unknown property "${L}"`)]);return A}function bd(d){const l=d.value,f=d.styleSpec,g=f.terrain,_=d.style;let C=[];const A=zn(l);if(l===void 0)return C;if(A!=="object")return C=C.concat([new qt("terrain",l,`object expected, ${A} found`)]),C;for(const L in l)C=C.concat(g[L]?d.validateSpec({key:L,value:l[L],valueSpec:g[L],validateSpec:d.validateSpec,style:_,styleSpec:f}):[new qt(L,l[L],`unknown property "${L}"`)]);return C}function Ch(d){let l=[];const f=d.value,g=d.key;if(Array.isArray(f)){const _=[],C=[];for(const A in f)f[A].id&&_.includes(f[A].id)&&l.push(new qt(g,f,`all the sprites' ids must be unique, but ${f[A].id} is duplicated`)),_.push(f[A].id),f[A].url&&C.includes(f[A].url)&&l.push(new qt(g,f,`all the sprites' URLs must be unique, but ${f[A].url} is duplicated`)),C.push(f[A].url),l=l.concat(ao({key:`${g}[${A}]`,value:f[A],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return l}return Cl({key:g,value:f})}function Up(d){return l=d.value,l&&l.constructor===Object?[]:[new qt(d.key,d.value,`object expected, ${zn(d.value)} found`)];var l}const zf={"*":()=>[],array:ls,boolean:function(d){const l=d.value,f=d.key,g=zn(l);return g!=="boolean"?[new qt(f,l,`boolean expected, ${g} found`)]:[]},number:Bf,color:wh,constants:Gl,enum:Zc,filter:Sh,function:Wc,layer:Vo,object:ao,source:$p,light:qp,sky:Kc,terrain:bd,projection:function(d){const l=d.value,f=d.styleSpec,g=f.projection,_=d.style,C=zn(l);if(l===void 0)return[];if(C!=="object")return[new qt("projection",l,`object expected, ${C} found`)];let A=[];for(const L in l)A=A.concat(g[L]?d.validateSpec({key:L,value:l[L],valueSpec:g[L],style:_,styleSpec:f}):[new qt(L,l[L],`unknown property "${L}"`)]);return A},projectionDefinition:function(d){const l=d.key;let f=d.value;f=f instanceof String?f.valueOf():f;const g=zn(f);return g!=="array"||(function(_){return Array.isArray(_)&&_.length===3&&typeof _[0]=="string"&&typeof _[1]=="string"&&typeof _[2]=="number"})(f)||(function(_){return!!["interpolate","step","literal"].includes(_[0])})(f)?["array","string"].includes(g)?[]:[new qt(l,f,`projection expected, invalid type "${g}" found`)]:[new qt(l,f,`projection expected, invalid array ${JSON.stringify(f)} found`)]},string:Cl,formatted:function(d){return Cl(d).length===0?[]:hc(d)},resolvedImage:function(d){return Cl(d).length===0?[]:hc(d)},padding:function(d){const l=d.key,f=d.value;if(zn(f)==="array"){if(f.length<1||f.length>4)return[new qt(l,f,`padding requires 1 to 4 values; ${f.length} values found`)];const g={type:"number"};let _=[];for(let C=0;C<f.length;C++)_=_.concat(d.validateSpec({key:`${l}[${C}]`,value:f[C],validateSpec:d.validateSpec,valueSpec:g}));return _}return Bf({key:l,value:f,valueSpec:{}})},numberArray:function(d){const l=d.key,f=d.value;if(zn(f)==="array"){const g={type:"number"};if(f.length<1)return[new qt(l,f,"array length at least 1 expected, length 0 found")];let _=[];for(let C=0;C<f.length;C++)_=_.concat(d.validateSpec({key:`${l}[${C}]`,value:f[C],validateSpec:d.validateSpec,valueSpec:g}));return _}return Bf({key:l,value:f,valueSpec:{}})},colorArray:function(d){const l=d.key,f=d.value;if(zn(f)==="array"){if(f.length<1)return[new qt(l,f,"array length at least 1 expected, length 0 found")];let g=[];for(let _=0;_<f.length;_++)g=g.concat(wh({key:`${l}[${_}]`,value:f[_]}));return g}return wh({key:l,value:f})},variableAnchorOffsetCollection:function(d){const l=d.key,f=d.value,g=zn(f),_=d.styleSpec;if(g!=="array"||f.length<1||f.length%2!=0)return[new qt(l,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let C=[];for(let A=0;A<f.length;A+=2)C=C.concat(Zc({key:`${l}[${A}]`,value:f[A],valueSpec:_.layout_symbol["text-anchor"]})),C=C.concat(ls({key:`${l}[${A+1}]`,value:f[A+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:_}));return C},sprite:Ch,state:Up};function dc(d){const l=d.value,f=d.valueSpec,g=d.styleSpec;return d.validateSpec=dc,f.expression&&Ls(Ca(l))?Wc(d):f.expression&&bh(pu(l))?hc(d):f.type&&zf[f.type]?zf[f.type](d):ao(zr({},d,{valueSpec:f.type?g[f.type]:f}))}function Xc(d){const l=d.value,f=d.key,g=Cl(d);return g.length||(l.indexOf("{fontstack}")===-1&&g.push(new qt(f,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&g.push(new qt(f,l,'"glyphs" url must include a "{range}" token'))),g}function il(d,l=vt){let f=[];return f=f.concat(dc({key:"",value:d,valueSpec:l.$root,styleSpec:l,style:d,validateSpec:dc,objectElementValidators:{glyphs:Xc,"*":()=>[]}})),d.constants&&(f=f.concat(Gl({key:"constants",value:d.constants}))),O(f)}function al(d){return function(l){return d({...l,validateSpec:dc})}}function O(d){return[].concat(d).sort(((l,f)=>l.line-f.line))}function z(d){return function(...l){return O(d.apply(this,l))}}il.source=z(al($p)),il.sprite=z(al(Ch)),il.glyphs=z(al(Xc)),il.light=z(al(qp)),il.sky=z(al(Kc)),il.terrain=z(al(bd)),il.state=z(al(Up)),il.layer=z(al(Vo)),il.filter=z(al(Sh)),il.paintProperty=z(al(mu)),il.layoutProperty=z(al(Hl));const ee=il,he=ee.light,Ie=ee.sky,De=ee.paintProperty,Ne=ee.layoutProperty;function Ge(d,l){let f=!1;if(l&&l.length)for(const g of l)d.fire(new Ct(new Error(g.message))),f=!0;return f}class Je{constructor(l,f,g){const _=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const A=new Int32Array(this.arrayBuffer);l=A[0],this.d=(f=A[1])+2*(g=A[2]);for(let q=0;q<this.d*this.d;q++){const W=A[3+q],Q=A[3+q+1];_.push(W===Q?null:A.subarray(W,Q))}const L=A[3+_.length+1];this.keys=A.subarray(A[3+_.length],L),this.bboxes=A.subarray(L),this.insert=this._insertReadonly}else{this.d=f+2*g;for(let A=0;A<this.d*this.d;A++)_.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=l,this.padding=g,this.scale=f/l,this.uid=0;const C=g/f*l;this.min=-C,this.max=l+C}insert(l,f,g,_,C){this._forEachCell(f,g,_,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,f,g,_,C,A){this.cells[C].push(A)}query(l,f,g,_,C){const A=this.min,L=this.max;if(l<=A&&f<=A&&L<=g&&L<=_&&!C)return Array.prototype.slice.call(this.keys);{const q=[];return this._forEachCell(l,f,g,_,this._queryCell,q,{},C),q}}_queryCell(l,f,g,_,C,A,L,q){const W=this.cells[C];if(W!==null){const Q=this.keys,ie=this.bboxes;for(let ye=0;ye<W.length;ye++){const we=W[ye];if(L[we]===void 0){const Se=4*we;(q?q(ie[Se+0],ie[Se+1],ie[Se+2],ie[Se+3]):l<=ie[Se+2]&&f<=ie[Se+3]&&g>=ie[Se+0]&&_>=ie[Se+1])?(L[we]=!0,A.push(Q[we])):L[we]=!1}}}}_forEachCell(l,f,g,_,C,A,L,q){const W=this._convertToCellCoord(l),Q=this._convertToCellCoord(f),ie=this._convertToCellCoord(g),ye=this._convertToCellCoord(_);for(let we=W;we<=ie;we++)for(let Se=Q;Se<=ye;Se++){const Re=this.d*Se+we;if((!q||q(this._convertFromCellCoord(we),this._convertFromCellCoord(Se),this._convertFromCellCoord(we+1),this._convertFromCellCoord(Se+1)))&&C.call(this,l,f,g,_,Re,A,L,q))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,f=3+this.cells.length+1+1;let g=0;for(let A=0;A<this.cells.length;A++)g+=this.cells[A].length;const _=new Int32Array(f+g+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let C=f;for(let A=0;A<l.length;A++){const L=l[A];_[3+A]=C,_.set(L,C),C+=L.length}return _[3+l.length]=C,_.set(this.keys,C),C+=this.keys.length,_[3+l.length+1]=C,_.set(this.bboxes,C),C+=this.bboxes.length,_.buffer}static serialize(l,f){const g=l.toArrayBuffer();return f&&f.push(g),{buffer:g}}static deserialize(l){return new Je(l.buffer)}}const st={};function lt(d,l,f={}){if(st[d])throw new Error(`${d} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:d,writeable:!1}),st[d]={klass:l,omit:f.omit||[],shallow:f.shallow||[]}}lt("Object",Object),lt("Set",Set),lt("TransferableGridIndex",Je),lt("Color",ln),lt("Error",Error),lt("AJAXError",Ue),lt("ResolvedImage",Ta),lt("StylePropertyFunction",Lf),lt("StyleExpression",Uc,{omit:["_evaluator"]}),lt("ZoomDependentExpression",xh),lt("ZoomConstantExpression",Vc),lt("CompoundExpression",oa,{omit:["_evaluate"]});for(const d in rl)rl[d]._classRegistryKey||lt(`Expression_${d}`,rl[d]);function sr(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function ut(d){return d.$name||d.constructor._classRegistryKey}function Vt(d){return!(function(l){if(l===null||typeof l!="object")return!1;const f=ut(l);return!(!f||f==="Object")})(d)&&(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||sr(d)||rt(d)||ArrayBuffer.isView(d)||d instanceof ImageData)}function Xt(d,l){if(Vt(d))return(sr(d)||rt(d))&&l&&l.push(d),ArrayBuffer.isView(d)&&l&&l.push(d.buffer),d instanceof ImageData&&l&&l.push(d.data.buffer),d;if(Array.isArray(d)){const C=[];for(const A of d)C.push(Xt(A,l));return C}if(typeof d!="object")throw new Error("can't serialize object of type "+typeof d);const f=ut(d);if(!f)throw new Error(`can't serialize object of unregistered class ${d.constructor.name}`);if(!st[f])throw new Error(`${f} is not registered.`);const{klass:g}=st[f],_=g.serialize?g.serialize(d,l):{};if(g.serialize){if(l&&_===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in d){if(!d.hasOwnProperty(C)||st[f].omit.indexOf(C)>=0)continue;const A=d[C];_[C]=st[f].shallow.indexOf(C)>=0?A:Xt(A,l)}d instanceof Error&&(_.message=d.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(_.$name=f),_}function gr(d){if(Vt(d))return d;if(Array.isArray(d))return d.map(gr);if(typeof d!="object")throw new Error("can't deserialize object of type "+typeof d);const l=ut(d)||"Object";if(!st[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:f}=st[l];if(!f)throw new Error(`can't deserialize unregistered class ${l}`);if(f.deserialize)return f.deserialize(d);const g=Object.create(f.prototype);for(const _ of Object.keys(d)){if(_==="$name")continue;const C=d[_];g[_]=st[l].shallow.indexOf(_)>=0?C:gr(C)}return g}class ar{constructor(){this.first=!0}update(l,f){const g=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=f),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=g,!0))}}const tr={"Latin-1 Supplement":d=>d>=128&&d<=255,"Hangul Jamo":d=>d>=4352&&d<=4607,Khmer:d=>d>=6016&&d<=6143,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Kanbun:d=>d>=12688&&d<=12703,"CJK Strokes":d=>d>=12736&&d<=12783,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Hangul Syllables":d=>d>=44032&&d<=55215,"Private Use Area":d=>d>=57344&&d<=63743,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519};function Er(d){for(const l of d)if(vn(l.charCodeAt(0)))return!0;return!1}function qr(d){for(const l of d)if(!yn(l.charCodeAt(0)))return!1;return!0}function Lr(d){const l=d.map((f=>{try{return new RegExp(`\\p{sc=${f}}`,"u").source}catch{return null}})).filter((f=>f));return new RegExp(l.join("|"),"u")}const Pn=Lr(["Arab","Dupl","Mong","Ougr","Syrc"]);function yn(d){return!Pn.test(String.fromCodePoint(d))}const Qn=Lr(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function vn(d){return!(d!==746&&d!==747&&(d<4352||!(tr["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||tr["CJK Compatibility"](d)||tr["CJK Strokes"](d)||!(!tr["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||tr["Enclosed CJK Letters and Months"](d)||tr["Ideographic Description Characters"](d)||tr.Kanbun(d)||tr.Katakana(d)&&d!==12540||!(!tr["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!tr["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||tr["Vertical Forms"](d)||tr["Yijing Hexagram Symbols"](d)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(d))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(d))||Qn.test(String.fromCodePoint(d)))))}function ui(d){return!(vn(d)||(function(l){return!!(tr["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||tr["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||tr["Letterlike Symbols"](l)||tr["Number Forms"](l)||tr["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||tr["Control Pictures"](l)&&l!==9251||tr["Optical Character Recognition"](l)||tr["Enclosed Alphanumerics"](l)||tr["Geometric Shapes"](l)||tr["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||tr["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||tr["CJK Symbols and Punctuation"](l)||tr.Katakana(l)||tr["Private Use Area"](l)||tr["CJK Compatibility Forms"](l)||tr["Small Form Variants"](l)||tr["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)})(d))}const Xa=Lr(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Un(d){return Xa.test(String.fromCodePoint(d))}function _n(d,l){return!(!l&&Un(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||tr.Khmer(d))}function Qr(d){for(const l of d)if(Un(l.charCodeAt(0)))return!0;return!1}const Zi=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){if(Zi.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(d,l){return a(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(d.pluginStatus!=="loading")return this.setState(d),d;const f=d.pluginURL,g=new Promise((C=>{this.loadScriptResolve=C}));l(f);const _=new Promise((C=>setTimeout((()=>C()),this.TIMEOUT)));if(yield Promise.race([g,_]),this.isParsed()){const C={pluginStatus:"loaded",pluginURL:f};return this.setState(C),C}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${f}`)}))}};class fn{constructor(l,f){this.zoom=l,f?(this.now=f.now||0,this.fadeDuration=f.fadeDuration||0,this.zoomHistory=f.zoomHistory||new ar,this.transition=f.transition||{},this.globalState=f.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ar,this.transition={},this.globalState={})}isSupportedScript(l){return(function(f,g){for(const _ of f)if(!_n(_.charCodeAt(0),g))return!1;return!0})(l,Zi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,f=l-Math.floor(l),g=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*f}}}class oi{constructor(l,f){this.property=l,this.value=f,this.expression=(function(g,_){if(Ls(g))return new Lf(g,_);if(bh(g)){const C=yd(g,_);if(C.result==="error")throw new Error(C.value.map((A=>`${A.key}: ${A.message}`)).join(", "));return C.value}{let C=g;return _.type==="color"&&typeof g=="string"?C=ln.parse(g):_.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?_.type!=="numberArray"||typeof g!="number"&&!Array.isArray(g)?_.type!=="colorArray"||typeof g!="string"&&!Array.isArray(g)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(g)?C=dn.parse(g):_.type==="projectionDefinition"&&typeof g=="string"&&(C=On.parse(g)):C=jn.parse(g):C=li.parse(g):C=Dn.parse(g),{globalStateRefs:new Set,kind:"constant",evaluate:()=>C}}})(f===void 0?l.specification.default:f,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,f,g){return this.property.possiblyEvaluate(this,l,f,g)}}class Ki{constructor(l){this.property=l,this.value=new oi(l,void 0)}transitioned(l,f){return new Go(this.property,this.value,f,Nt({},l.transition,this.transition),l.now)}untransitioned(){return new Go(this.property,this.value,null,{},0)}}class oo{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return Le(this._values[l].value.value)}setValue(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Ki(this._values[l].property)),this._values[l].value=new oi(this._values[l].property,f===null?void 0:Le(f))}getTransition(l){return Le(this._values[l].transition)}setTransition(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Ki(this._values[l].property)),this._values[l].transition=Le(f)||void 0}serialize(){const l={};for(const f of Object.keys(this._values)){const g=this.getValue(f);g!==void 0&&(l[f]=g);const _=this.getTransition(f);_!==void 0&&(l[`${f}-transition`]=_)}return l}transitioned(l,f){const g=new Aa(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].transitioned(l,f._values[_]);return g}untransitioned(){const l=new Aa(this._properties);for(const f of Object.keys(this._values))l._values[f]=this._values[f].untransitioned();return l}}class Go{constructor(l,f,g,_,C){this.property=l,this.value=f,this.begin=C+_.delay||0,this.end=this.begin+_.duration||0,l.specification.transition&&(_.delay||_.duration)&&(this.prior=g)}possiblyEvaluate(l,f,g){const _=l.now||0,C=this.value.possiblyEvaluate(l,f,g),A=this.prior;if(A){if(_>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(_<this.begin)return A.possiblyEvaluate(l,f,g);{const L=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(A.possiblyEvaluate(l,f,g),C,$e(L))}}return C}}class Aa{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,f,g){const _=new Ra(this._properties);for(const C of Object.keys(this._values))_._values[C]=this._values[C].possiblyEvaluate(l,f,g);return _}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class Ho{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return this._values[l].value!==void 0}getValue(l){return Le(this._values[l].value)}setValue(l,f){this._values[l]=new oi(this._values[l].property,f===null?void 0:Le(f))}serialize(){const l={};for(const f of Object.keys(this._values)){const g=this.getValue(f);g!==void 0&&(l[f]=g)}return l}possiblyEvaluate(l,f,g){const _=new Ra(this._properties);for(const C of Object.keys(this._values))_._values[C]=this._values[C].possiblyEvaluate(l,f,g);return _}}class ma{constructor(l,f,g){this.property=l,this.value=f,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,f,g,_){return this.property.evaluate(this.value,this.parameters,l,f,g,_)}}class Ra{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Fr{constructor(l){this.specification=l}possiblyEvaluate(l,f){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(f)}interpolate(l,f,g){const _=Ai[this.specification.type];return _?_(l,f,g):l}}class Yr{constructor(l,f){this.specification=l,this.overrides=f}possiblyEvaluate(l,f,g,_){return new ma(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(f,null,{},g,_)}:l.expression,f)}interpolate(l,f,g){if(l.value.kind!=="constant"||f.value.kind!=="constant")return l;if(l.value.value===void 0||f.value.value===void 0)return new ma(this,{kind:"constant",value:void 0},l.parameters);const _=Ai[this.specification.type];if(_){const C=_(l.value.value,f.value.value,g);return new ma(this,{kind:"constant",value:C},l.parameters)}return l}evaluate(l,f,g,_,C,A){return l.kind==="constant"?l.value:l.evaluate(f,g,_,C,A)}}class sa extends Yr{possiblyEvaluate(l,f,g,_){if(l.value===void 0)return new ma(this,{kind:"constant",value:void 0},f);if(l.expression.kind==="constant"){const C=l.expression.evaluate(f,null,{},g,_),A=l.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,L=this._calculate(A,A,A,f);return new ma(this,{kind:"constant",value:L},f)}if(l.expression.kind==="camera"){const C=this._calculate(l.expression.evaluate({zoom:f.zoom-1}),l.expression.evaluate({zoom:f.zoom}),l.expression.evaluate({zoom:f.zoom+1}),f);return new ma(this,{kind:"constant",value:C},f)}return new ma(this,l.expression,f)}evaluate(l,f,g,_,C,A){if(l.kind==="source"){const L=l.evaluate(f,g,_,C,A);return this._calculate(L,L,L,f)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(f.zoom)-1},g,_),l.evaluate({zoom:Math.floor(f.zoom)},g,_),l.evaluate({zoom:Math.floor(f.zoom)+1},g,_),f):l.value}_calculate(l,f,g,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:g,to:f}}interpolate(l){return l}}class Bi{constructor(l){this.specification=l}possiblyEvaluate(l,f,g,_){if(l.value!==void 0){if(l.expression.kind==="constant"){const C=l.expression.evaluate(f,null,{},g,_);return this._calculate(C,C,C,f)}return this._calculate(l.expression.evaluate(new fn(Math.floor(f.zoom-1),f)),l.expression.evaluate(new fn(Math.floor(f.zoom),f)),l.expression.evaluate(new fn(Math.floor(f.zoom+1),f)),f)}}_calculate(l,f,g,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:g,to:f}}interpolate(l){return l}}class za{constructor(l){this.specification=l}possiblyEvaluate(l,f,g,_){return!!l.expression.evaluate(f,null,{},g,_)}interpolate(){return!1}}class la{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const f in l){const g=l[f];g.specification.overridable&&this.overridableProperties.push(f);const _=this.defaultPropertyValues[f]=new oi(g,void 0),C=this.defaultTransitionablePropertyValues[f]=new Ki(g);this.defaultTransitioningPropertyValues[f]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=_.possiblyEvaluate({})}}}lt("DataDrivenProperty",Yr),lt("DataConstantProperty",Fr),lt("CrossFadedDataDrivenProperty",sa),lt("CrossFadedProperty",Bi),lt("ColorRampProperty",za);const Oa="-transition";class Ui extends Gt{constructor(l,f){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=nl(l.filter)),f.layout&&(this._unevaluatedLayout=new Ho(f.layout)),f.paint)){this._transitionablePaint=new oo(f.paint);for(const g in l.paint)this.setPaintProperty(g,l.paint[g],{validate:!1});for(const g in l.layout)this.setLayoutProperty(g,l.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ra(f.paint)}}setFilter(l){this.filter=l,this._featureFilter=nl(l)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;if(this._unevaluatedLayout)for(const f in this._unevaluatedLayout._values){const g=this._unevaluatedLayout._values[f];for(const _ of g.getGlobalStateRefs())l.add(_)}for(const f of this._featureFilter.getGlobalStateRefs())l.add(f);return l}setLayoutProperty(l,f,g={}){f!=null&&this._validate(Ne,`layers.${this.id}.layout.${l}`,l,f,g)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,f):this.visibility=f)}getPaintProperty(l){return l.endsWith(Oa)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,f,g={}){if(f!=null&&this._validate(De,`layers.${this.id}.paint.${l}`,l,f,g))return!1;if(l.endsWith(Oa))return this._transitionablePaint.setTransition(l.slice(0,-11),f||void 0),!1;{const _=this._transitionablePaint._values[l],C=_.property.specification["property-type"]==="cross-faded-data-driven",A=_.value.isDataDriven(),L=_.value;this._transitionablePaint.setValue(l,f),this._handleSpecialPaintPropertyUpdate(l);const q=this._transitionablePaint._values[l].value;return q.isDataDriven()||A||C||this._handleOverridablePaintPropertyUpdate(l,L,q)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,f,g){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,f){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,f)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),gt(l,((f,g)=>!(f===void 0||g==="layout"&&!Object.keys(f).length||g==="paint"&&!Object.keys(f).length)))}_validate(l,f,g,_,C={}){return(!C||C.validate!==!1)&&Ge(this,l.call(ee,{key:f,layerType:this.type,objectKey:g,value:_,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const f=this.paint.get(l);if(f instanceof ma&&Ma(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}const Xi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ua{constructor(l,f){this._structArray=l,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class bi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,f){return l._trim(),f&&(l.isTransferred=!0,f.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const f=Object.create(this.prototype);return f.arrayBuffer=l.arrayBuffer,f.length=l.length,f.capacity=l.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ci(d,l=1){let f=0,g=0;return{members:d.map((_=>{const C=Xi[_.type].BYTES_PER_ELEMENT,A=f=Es(f,Math.max(l,C)),L=_.components||1;return g=Math.max(g,C),f+=C*L,{name:_.name,type:_.type,components:L,offset:A}})),size:Es(f,Math.max(g,l)),alignment:l}}function Es(d,l){return Math.ceil(d/l)*l}class Ya extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f){const g=this.length;return this.resize(g+1),this.emplace(g,l,f)}emplace(l,f,g){const _=2*l;return this.int16[_+0]=f,this.int16[_+1]=g,l}}Ya.prototype.bytesPerElement=4,lt("StructArrayLayout2i4",Ya);class $a extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,g){const _=this.length;return this.resize(_+1),this.emplace(_,l,f,g)}emplace(l,f,g,_){const C=3*l;return this.int16[C+0]=f,this.int16[C+1]=g,this.int16[C+2]=_,l}}$a.prototype.bytesPerElement=6,lt("StructArrayLayout3i6",$a);class us extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,g,_){const C=this.length;return this.resize(C+1),this.emplace(C,l,f,g,_)}emplace(l,f,g,_,C){const A=4*l;return this.int16[A+0]=f,this.int16[A+1]=g,this.int16[A+2]=_,this.int16[A+3]=C,l}}us.prototype.bytesPerElement=8,lt("StructArrayLayout4i8",us);class Vi extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,g,_,C,A){const L=this.length;return this.resize(L+1),this.emplace(L,l,f,g,_,C,A)}emplace(l,f,g,_,C,A,L){const q=6*l;return this.int16[q+0]=f,this.int16[q+1]=g,this.int16[q+2]=_,this.int16[q+3]=C,this.int16[q+4]=A,this.int16[q+5]=L,l}}Vi.prototype.bytesPerElement=12,lt("StructArrayLayout2i4i12",Vi);class so extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,g,_,C,A){const L=this.length;return this.resize(L+1),this.emplace(L,l,f,g,_,C,A)}emplace(l,f,g,_,C,A,L){const q=4*l,W=8*l;return this.int16[q+0]=f,this.int16[q+1]=g,this.uint8[W+4]=_,this.uint8[W+5]=C,this.uint8[W+6]=A,this.uint8[W+7]=L,l}}so.prototype.bytesPerElement=8,lt("StructArrayLayout2i4ub8",so);class cs extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f){const g=this.length;return this.resize(g+1),this.emplace(g,l,f)}emplace(l,f,g){const _=2*l;return this.float32[_+0]=f,this.float32[_+1]=g,l}}cs.prototype.bytesPerElement=8,lt("StructArrayLayout2f8",cs);class gu extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,g,_,C,A,L,q,W,Q){const ie=this.length;return this.resize(ie+1),this.emplace(ie,l,f,g,_,C,A,L,q,W,Q)}emplace(l,f,g,_,C,A,L,q,W,Q,ie){const ye=10*l;return this.uint16[ye+0]=f,this.uint16[ye+1]=g,this.uint16[ye+2]=_,this.uint16[ye+3]=C,this.uint16[ye+4]=A,this.uint16[ye+5]=L,this.uint16[ye+6]=q,this.uint16[ye+7]=W,this.uint16[ye+8]=Q,this.uint16[ye+9]=ie,l}}gu.prototype.bytesPerElement=20,lt("StructArrayLayout10ui20",gu);class ol extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,g,_,C,A,L,q,W,Q,ie,ye){const we=this.length;return this.resize(we+1),this.emplace(we,l,f,g,_,C,A,L,q,W,Q,ie,ye)}emplace(l,f,g,_,C,A,L,q,W,Q,ie,ye,we){const Se=12*l;return this.int16[Se+0]=f,this.int16[Se+1]=g,this.int16[Se+2]=_,this.int16[Se+3]=C,this.uint16[Se+4]=A,this.uint16[Se+5]=L,this.uint16[Se+6]=q,this.uint16[Se+7]=W,this.int16[Se+8]=Q,this.int16[Se+9]=ie,this.int16[Se+10]=ye,this.int16[Se+11]=we,l}}ol.prototype.bytesPerElement=24,lt("StructArrayLayout4i4ui4i24",ol);class lo extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,g){const _=this.length;return this.resize(_+1),this.emplace(_,l,f,g)}emplace(l,f,g,_){const C=3*l;return this.float32[C+0]=f,this.float32[C+1]=g,this.float32[C+2]=_,l}}lo.prototype.bytesPerElement=12,lt("StructArrayLayout3f12",lo);class S extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint32[1*l+0]=f,l}}S.prototype.bytesPerElement=4,lt("StructArrayLayout1ul4",S);class s extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,g,_,C,A,L,q,W){const Q=this.length;return this.resize(Q+1),this.emplace(Q,l,f,g,_,C,A,L,q,W)}emplace(l,f,g,_,C,A,L,q,W,Q){const ie=10*l,ye=5*l;return this.int16[ie+0]=f,this.int16[ie+1]=g,this.int16[ie+2]=_,this.int16[ie+3]=C,this.int16[ie+4]=A,this.int16[ie+5]=L,this.uint32[ye+3]=q,this.uint16[ie+8]=W,this.uint16[ie+9]=Q,l}}s.prototype.bytesPerElement=20,lt("StructArrayLayout6i1ul2ui20",s);class c extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,g,_,C,A){const L=this.length;return this.resize(L+1),this.emplace(L,l,f,g,_,C,A)}emplace(l,f,g,_,C,A,L){const q=6*l;return this.int16[q+0]=f,this.int16[q+1]=g,this.int16[q+2]=_,this.int16[q+3]=C,this.int16[q+4]=A,this.int16[q+5]=L,l}}c.prototype.bytesPerElement=12,lt("StructArrayLayout2i2i2i12",c);class y extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,g,_,C){const A=this.length;return this.resize(A+1),this.emplace(A,l,f,g,_,C)}emplace(l,f,g,_,C,A){const L=4*l,q=8*l;return this.float32[L+0]=f,this.float32[L+1]=g,this.float32[L+2]=_,this.int16[q+6]=C,this.int16[q+7]=A,l}}y.prototype.bytesPerElement=16,lt("StructArrayLayout2f1f2i16",y);class b extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,g,_,C,A){const L=this.length;return this.resize(L+1),this.emplace(L,l,f,g,_,C,A)}emplace(l,f,g,_,C,A,L){const q=16*l,W=4*l,Q=8*l;return this.uint8[q+0]=f,this.uint8[q+1]=g,this.float32[W+1]=_,this.float32[W+2]=C,this.int16[Q+6]=A,this.int16[Q+7]=L,l}}b.prototype.bytesPerElement=16,lt("StructArrayLayout2ub2f2i16",b);class E extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,g){const _=this.length;return this.resize(_+1),this.emplace(_,l,f,g)}emplace(l,f,g,_){const C=3*l;return this.uint16[C+0]=f,this.uint16[C+1]=g,this.uint16[C+2]=_,l}}E.prototype.bytesPerElement=6,lt("StructArrayLayout3ui6",E);class M extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,g,_,C,A,L,q,W,Q,ie,ye,we,Se,Re,He,it){const Dt=this.length;return this.resize(Dt+1),this.emplace(Dt,l,f,g,_,C,A,L,q,W,Q,ie,ye,we,Se,Re,He,it)}emplace(l,f,g,_,C,A,L,q,W,Q,ie,ye,we,Se,Re,He,it,Dt){const yt=24*l,be=12*l,Ve=48*l;return this.int16[yt+0]=f,this.int16[yt+1]=g,this.uint16[yt+2]=_,this.uint16[yt+3]=C,this.uint32[be+2]=A,this.uint32[be+3]=L,this.uint32[be+4]=q,this.uint16[yt+10]=W,this.uint16[yt+11]=Q,this.uint16[yt+12]=ie,this.float32[be+7]=ye,this.float32[be+8]=we,this.uint8[Ve+36]=Se,this.uint8[Ve+37]=Re,this.uint8[Ve+38]=He,this.uint32[be+10]=it,this.int16[yt+22]=Dt,l}}M.prototype.bytesPerElement=48,lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",M);class j extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,g,_,C,A,L,q,W,Q,ie,ye,we,Se,Re,He,it,Dt,yt,be,Ve,St,rr,Mr,cr,dr,jr,Or){const $r=this.length;return this.resize($r+1),this.emplace($r,l,f,g,_,C,A,L,q,W,Q,ie,ye,we,Se,Re,He,it,Dt,yt,be,Ve,St,rr,Mr,cr,dr,jr,Or)}emplace(l,f,g,_,C,A,L,q,W,Q,ie,ye,we,Se,Re,He,it,Dt,yt,be,Ve,St,rr,Mr,cr,dr,jr,Or,$r){const mr=32*l,on=16*l;return this.int16[mr+0]=f,this.int16[mr+1]=g,this.int16[mr+2]=_,this.int16[mr+3]=C,this.int16[mr+4]=A,this.int16[mr+5]=L,this.int16[mr+6]=q,this.int16[mr+7]=W,this.uint16[mr+8]=Q,this.uint16[mr+9]=ie,this.uint16[mr+10]=ye,this.uint16[mr+11]=we,this.uint16[mr+12]=Se,this.uint16[mr+13]=Re,this.uint16[mr+14]=He,this.uint16[mr+15]=it,this.uint16[mr+16]=Dt,this.uint16[mr+17]=yt,this.uint16[mr+18]=be,this.uint16[mr+19]=Ve,this.uint16[mr+20]=St,this.uint16[mr+21]=rr,this.uint16[mr+22]=Mr,this.uint32[on+12]=cr,this.float32[on+13]=dr,this.float32[on+14]=jr,this.uint16[mr+30]=Or,this.uint16[mr+31]=$r,l}}j.prototype.bytesPerElement=64,lt("StructArrayLayout8i15ui1ul2f2ui64",j);class V extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.float32[1*l+0]=f,l}}V.prototype.bytesPerElement=4,lt("StructArrayLayout1f4",V);class Y extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,g){const _=this.length;return this.resize(_+1),this.emplace(_,l,f,g)}emplace(l,f,g,_){const C=3*l;return this.uint16[6*l+0]=f,this.float32[C+1]=g,this.float32[C+2]=_,l}}Y.prototype.bytesPerElement=12,lt("StructArrayLayout1ui2f12",Y);class re extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,g){const _=this.length;return this.resize(_+1),this.emplace(_,l,f,g)}emplace(l,f,g,_){const C=4*l;return this.uint32[2*l+0]=f,this.uint16[C+2]=g,this.uint16[C+3]=_,l}}re.prototype.bytesPerElement=8,lt("StructArrayLayout1ul2ui8",re);class ce extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f){const g=this.length;return this.resize(g+1),this.emplace(g,l,f)}emplace(l,f,g){const _=2*l;return this.uint16[_+0]=f,this.uint16[_+1]=g,l}}ce.prototype.bytesPerElement=4,lt("StructArrayLayout2ui4",ce);class oe extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint16[1*l+0]=f,l}}oe.prototype.bytesPerElement=2,lt("StructArrayLayout1ui2",oe);class ge extends bi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,g,_){const C=this.length;return this.resize(C+1),this.emplace(C,l,f,g,_)}emplace(l,f,g,_,C){const A=4*l;return this.float32[A+0]=f,this.float32[A+1]=g,this.float32[A+2]=_,this.float32[A+3]=C,l}}ge.prototype.bytesPerElement=16,lt("StructArrayLayout4f16",ge);class Me extends ua{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}Me.prototype.size=20;class Ze extends s{get(l){return new Me(this,l)}}lt("CollisionBoxArray",Ze);class We extends ua{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}We.prototype.size=48;class Xe extends M{get(l){return new We(this,l)}}lt("PlacedSymbolArray",Xe);class at extends ua{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}at.prototype.size=64;class wt extends j{get(l){return new at(this,l)}}lt("SymbolInstanceArray",wt);class dt extends V{getoffsetX(l){return this.float32[1*l+0]}}lt("GlyphOffsetArray",dt);class Et extends $a{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}lt("SymbolLineVertexArray",Et);class Tt extends ua{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Tt.prototype.size=12;class ft extends Y{get(l){return new Tt(this,l)}}lt("TextAnchorOffsetArray",ft);class Bt extends ua{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Bt.prototype.size=8;class ir extends re{get(l){return new Bt(this,l)}}lt("FeatureIndexArray",ir);class Jt extends Ya{}class er extends Ya{}class or extends Ya{}class Gr extends Vi{}class Ur extends so{}class Ar extends cs{}class nn extends gu{}class Zn extends ol{}class fi extends lo{}class ra extends S{}class ki extends c{}class Li extends b{}class Ei extends E{}class _i extends ce{}const ji=ci([{name:"a_pos",components:2,type:"Int16"}],4),{members:uo}=ji;class si{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,f,g,_){const C=this.segments[this.segments.length-1];return l>si.MAX_VERTEX_ARRAY_LENGTH&&hr(`Max vertices per segment is ${si.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${si.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!C||C.vertexLength+l>si.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==_?this.createNewSegment(f,g,_):C}createNewSegment(l,f,g){const _={vertexOffset:l.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0,vaos:{}};return g!==void 0&&(_.sortKey=g),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(_),_}getOrCreateLatestSegment(l,f,g){return this.prepareSegment(0,l,f,g)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const f in l.vaos)l.vaos[f].destroy()}static simpleSegment(l,f,g,_){return new si([{vertexOffset:l,primitiveOffset:f,vertexLength:g,primitiveLength:_,vaos:{},sortKey:0}])}}function po(d,l){return 256*(d=mt(Math.floor(d),0,255))+mt(Math.floor(l),0,255)}si.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,lt("SegmentVector",si);const co=ci([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Wl,Yc,Jc,$u={exports:{}},_d={exports:{}},xd={exports:{}},Ah=(function(){if(Jc)return $u.exports;Jc=1;var d=(Wl||(Wl=1,_d.exports=function(f,g){var _,C,A,L,q,W,Q,ie;for(C=f.length-(_=3&f.length),A=g,q=3432918353,W=461845907,ie=0;ie<C;)Q=255&f.charCodeAt(ie)|(255&f.charCodeAt(++ie))<<8|(255&f.charCodeAt(++ie))<<16|(255&f.charCodeAt(++ie))<<24,++ie,A=27492+(65535&(L=5*(65535&(A=(A^=Q=(65535&(Q=(Q=(65535&Q)*q+(((Q>>>16)*q&65535)<<16)&4294967295)<<15|Q>>>17))*W+(((Q>>>16)*W&65535)<<16)&4294967295)<<13|A>>>19))+((5*(A>>>16)&65535)<<16)&4294967295))+((58964+(L>>>16)&65535)<<16);switch(Q=0,_){case 3:Q^=(255&f.charCodeAt(ie+2))<<16;case 2:Q^=(255&f.charCodeAt(ie+1))<<8;case 1:A^=Q=(65535&(Q=(Q=(65535&(Q^=255&f.charCodeAt(ie)))*q+(((Q>>>16)*q&65535)<<16)&4294967295)<<15|Q>>>17))*W+(((Q>>>16)*W&65535)<<16)&4294967295}return A^=f.length,A=2246822507*(65535&(A^=A>>>16))+((2246822507*(A>>>16)&65535)<<16)&4294967295,A=3266489909*(65535&(A^=A>>>13))+((3266489909*(A>>>16)&65535)<<16)&4294967295,(A^=A>>>16)>>>0}),_d.exports),l=(Yc||(Yc=1,xd.exports=function(f,g){for(var _,C=f.length,A=g^C,L=0;C>=4;)_=1540483477*(65535&(_=255&f.charCodeAt(L)|(255&f.charCodeAt(++L))<<8|(255&f.charCodeAt(++L))<<16|(255&f.charCodeAt(++L))<<24))+((1540483477*(_>>>16)&65535)<<16),A=1540483477*(65535&A)+((1540483477*(A>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),C-=4,++L;switch(C){case 3:A^=(255&f.charCodeAt(L+2))<<16;case 2:A^=(255&f.charCodeAt(L+1))<<8;case 1:A=1540483477*(65535&(A^=255&f.charCodeAt(L)))+((1540483477*(A>>>16)&65535)<<16)}return A=1540483477*(65535&(A^=A>>>13))+((1540483477*(A>>>16)&65535)<<16),(A^=A>>>15)>>>0}),xd.exports);return $u.exports=d,$u.exports.murmur3=d,$u.exports.murmur2=l,$u.exports})(),sl=p(Ah);class yu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,f,g,_){this.ids.push(Qc(l)),this.positions.push(f,g,_)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const f=Qc(l);let g=0,_=this.ids.length-1;for(;g<_;){const A=g+_>>1;this.ids[A]>=f?_=A:g=A+1}const C=[];for(;this.ids[g]===f;)C.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return C}static serialize(l,f){const g=new Float64Array(l.ids),_=new Uint32Array(l.positions);return $f(g,_,0,g.length-1),f&&f.push(g.buffer,_.buffer),{ids:g,positions:_}}static deserialize(l){const f=new yu;return f.ids=l.ids,f.positions=l.positions,f.indexed=!0,f}}function Qc(d){const l=+d;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:sl(String(d))}function $f(d,l,f,g){for(;f<g;){const _=d[f+g>>1];let C=f-1,A=g+1;for(;;){do C++;while(d[C]<_);do A--;while(d[A]>_);if(C>=A)break;Ja(d,C,A),Ja(l,3*C,3*A),Ja(l,3*C+1,3*A+1),Ja(l,3*C+2,3*A+2)}A-f<g-A?($f(d,l,f,A),f=A+1):($f(d,l,A+1,g),g=A)}}function Ja(d,l,f){const g=d[l];d[l]=d[f],d[f]=g}lt("FeaturePositionMap",yu);class ga{constructor(l,f){this.gl=l.gl,this.location=f}}class Ds extends ga{constructor(l,f){super(l,f),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class To extends ga{constructor(l,f){super(l,f),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class ib extends ga{constructor(l,f){super(l,f),this.current=ln.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const O2=new Float32Array(16);function ny(d){return[po(255*d.r,255*d.g),po(255*d.b,255*d.a)]}class wd{constructor(l,f,g){this.value=l,this.uniformNames=f.map((_=>`u_${_}`)),this.type=g}setUniform(l,f,g){l.set(g.constantOr(this.value))}getBinding(l,f,g){return this.type==="color"?new ib(l,f):new Ds(l,f)}}class Ph{constructor(l,f){this.uniformNames=f.map((g=>`u_${g}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=l.tlbr}setUniform(l,f,g,_){const C=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;C&&l.set(C)}getBinding(l,f,g){return g.substr(0,9)==="u_pattern"?new To(l,f):new Ds(l,f)}}class pc{constructor(l,f,g,_){this.expression=l,this.type=g,this.maxValue=0,this.paintVertexAttributes=f.map((C=>({name:`a_${C}`,type:"Float32",components:g==="color"?2:1,offset:0}))),this.paintVertexArray=new _}populatePaintArray(l,f,g,_,C){const A=this.paintVertexArray.length,L=this.expression.evaluate(new fn(0),f,{},_,[],C);this.paintVertexArray.resize(l),this._setPaintValue(A,l,L)}updatePaintArray(l,f,g,_){const C=this.expression.evaluate({zoom:0},g,_);this._setPaintValue(l,f,C)}_setPaintValue(l,f,g){if(this.type==="color"){const _=ny(g);for(let C=l;C<f;C++)this.paintVertexArray.emplace(C,_[0],_[1])}else{for(let _=l;_<f;_++)this.paintVertexArray.emplace(_,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class fs{constructor(l,f,g,_,C,A){this.expression=l,this.uniformNames=f.map((L=>`u_${L}_t`)),this.type=g,this.useIntegerZoom=_,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=f.map((L=>({name:`a_${L}`,type:"Float32",components:g==="color"?4:2,offset:0}))),this.paintVertexArray=new A}populatePaintArray(l,f,g,_,C){const A=this.expression.evaluate(new fn(this.zoom),f,{},_,[],C),L=this.expression.evaluate(new fn(this.zoom+1),f,{},_,[],C),q=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(q,l,A,L)}updatePaintArray(l,f,g,_){const C=this.expression.evaluate({zoom:this.zoom},g,_),A=this.expression.evaluate({zoom:this.zoom+1},g,_);this._setPaintValue(l,f,C,A)}_setPaintValue(l,f,g,_){if(this.type==="color"){const C=ny(g),A=ny(_);for(let L=l;L<f;L++)this.paintVertexArray.emplace(L,C[0],C[1],A[0],A[1])}else{for(let C=l;C<f;C++)this.paintVertexArray.emplace(C,g,_);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(_))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,f){const g=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,_=mt(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);l.set(_)}getBinding(l,f,g){return new Ds(l,f)}}class mc{constructor(l,f,g,_,C,A){this.expression=l,this.type=f,this.useIntegerZoom=g,this.zoom=_,this.layerId=A,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(l,f,g){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(_,l,f.patterns&&f.patterns[this.layerId],g)}updatePaintArray(l,f,g,_,C){this._setPaintValues(l,f,g.patterns&&g.patterns[this.layerId],C)}_setPaintValues(l,f,g,_){if(!_||!g)return;const{min:C,mid:A,max:L}=g,q=_[C],W=_[A],Q=_[L];if(q&&W&&Q)for(let ie=l;ie<f;ie++)this.zoomInPaintVertexArray.emplace(ie,W.tl[0],W.tl[1],W.br[0],W.br[1],q.tl[0],q.tl[1],q.br[0],q.br[1],W.pixelRatio,q.pixelRatio),this.zoomOutPaintVertexArray.emplace(ie,W.tl[0],W.tl[1],W.br[0],W.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],W.pixelRatio,Q.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,co.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,co.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class iy{constructor(l,f,g){this.binders={},this._buffers=[];const _=[];for(const C in l.paint._values){if(!g(C))continue;const A=l.paint.get(C);if(!(A instanceof ma&&Ma(A.property.specification)))continue;const L=ay(C,l.type),q=A.value,W=A.property.specification.type,Q=A.property.useIntegerZoom,ie=A.property.specification["property-type"],ye=ie==="cross-faded"||ie==="cross-faded-data-driven";if(q.kind==="constant")this.binders[C]=ye?new Ph(q.value,L):new wd(q.value,L,W),_.push(`/u_${C}`);else if(q.kind==="source"||ye){const we=oy(C,W,"source");this.binders[C]=ye?new mc(q,W,Q,f,we,l.id):new pc(q,L,W,we),_.push(`/a_${C}`)}else{const we=oy(C,W,"composite");this.binders[C]=new fs(q,L,W,Q,f,we),_.push(`/z_${C}`)}}this.cacheKey=_.sort().join("")}getMaxValue(l){const f=this.binders[l];return f instanceof pc||f instanceof fs?f.maxValue:0}populatePaintArrays(l,f,g,_,C){for(const A in this.binders){const L=this.binders[A];(L instanceof pc||L instanceof fs||L instanceof mc)&&L.populatePaintArray(l,f,g,_,C)}}setConstantPatternPositions(l,f){for(const g in this.binders){const _=this.binders[g];_ instanceof Ph&&_.setConstantPatternPositions(l,f)}}updatePaintArrays(l,f,g,_,C){let A=!1;for(const L in l){const q=f.getPositions(L);for(const W of q){const Q=g.feature(W.index);for(const ie in this.binders){const ye=this.binders[ie];if((ye instanceof pc||ye instanceof fs||ye instanceof mc)&&ye.expression.isStateDependent===!0){const we=_.paint.get(ie);ye.expression=we.value,ye.updatePaintArray(W.start,W.end,Q,l[L],C),A=!0}}}}return A}defines(){const l=[];for(const f in this.binders){const g=this.binders[f];(g instanceof wd||g instanceof Ph)&&l.push(...g.uniformNames.map((_=>`#define HAS_UNIFORM_${_}`)))}return l}getBinderAttributes(){const l=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof pc||g instanceof fs)for(let _=0;_<g.paintVertexAttributes.length;_++)l.push(g.paintVertexAttributes[_].name);else if(g instanceof mc)for(let _=0;_<co.members.length;_++)l.push(co.members[_].name)}return l}getBinderUniforms(){const l=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof wd||g instanceof Ph||g instanceof fs)for(const _ of g.uniformNames)l.push(_)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,f){const g=[];for(const _ in this.binders){const C=this.binders[_];if(C instanceof wd||C instanceof Ph||C instanceof fs){for(const A of C.uniformNames)if(f[A]){const L=C.getBinding(l,f[A],A);g.push({name:A,property:_,binding:L})}}}return g}setUniforms(l,f,g,_){for(const{name:C,property:A,binding:L}of f)this.binders[A].setUniform(L,_,g.get(A),C)}updatePaintBuffers(l){this._buffers=[];for(const f in this.binders){const g=this.binders[f];if(l&&g instanceof mc){const _=l.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(g instanceof pc||g instanceof fs)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(l){for(const f in this.binders){const g=this.binders[f];(g instanceof pc||g instanceof fs||g instanceof mc)&&g.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const f=this.binders[l];(f instanceof pc||f instanceof fs||f instanceof mc)&&f.destroy()}}}class ef{constructor(l,f,g=()=>!0){this.programConfigurations={};for(const _ of l)this.programConfigurations[_.id]=new iy(_,f,g);this.needsUpload=!1,this._featureMap=new yu,this._bufferOffset=0}populatePaintArrays(l,f,g,_,C,A){for(const L in this.programConfigurations)this.programConfigurations[L].populatePaintArrays(l,f,_,C,A);f.id!==void 0&&this._featureMap.add(f.id,g,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,f,g,_){for(const C of g)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(l,this._featureMap,f,C,_)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const f in this.programConfigurations)this.programConfigurations[f].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function ay(d,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${l}-`,"").replace(/-/g,"_")]}function oy(d,l,f){const g={color:{source:cs,composite:ge},number:{source:V,composite:cs}},_=(function(C){return{"line-pattern":{source:nn,composite:nn},"fill-pattern":{source:nn,composite:nn},"fill-extrusion-pattern":{source:nn,composite:nn}}[C]})(d);return _&&_[f]||g[l][f]}lt("ConstantBinder",wd),lt("CrossFadedConstantBinder",Ph),lt("SourceExpressionBinder",pc),lt("CrossFadedCompositeBinder",mc),lt("CompositeExpressionBinder",fs),lt("ProgramConfiguration",iy,{omit:["_buffers"]}),lt("ProgramConfigurationSet",ef);const Sd=Math.pow(2,14)-1,WR=-Sd-1;function Ed(d){const l=fe/d.extent,f=d.loadGeometry();for(let g=0;g<f.length;g++){const _=f[g];for(let C=0;C<_.length;C++){const A=_[C],L=Math.round(A.x*l),q=Math.round(A.y*l);A.x=mt(L,WR,Sd),A.y=mt(q,WR,Sd),(L<A.x||L>A.x+1||q<A.y||q>A.y+1)&&hr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function Cd(d,l){return{type:d.type,id:d.id,properties:d.properties,geometry:l?Ed(d):[]}}const ZR=-32768;function FZ(d,l,f,g,_){d.emplaceBack(ZR+8*l+g,ZR+8*f+_)}class k2{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new er,this.indexArray=new Ei,this.segments=new si,this.programConfigurations=new ef(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(l,f,g){const _=this.layers[0],C=[];let A=null,L=!1,q=_.type==="heatmap";if(_.type==="circle"){const Q=_;A=Q.layout.get("circle-sort-key"),L=!A.isConstant(),q=q||Q.paint.get("circle-pitch-alignment")==="map"}const W=q?f.subdivisionGranularity.circle:1;for(const{feature:Q,id:ie,index:ye,sourceLayerIndex:we}of l){const Se=this.layers[0]._featureFilter.needGeometry,Re=Cd(Q,Se);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom,{globalState:this.globalState}),Re,g))continue;const He=L?A.evaluate(Re,{},g):void 0,it={id:ie,properties:Q.properties,type:Q.type,sourceLayerIndex:we,index:ye,geometry:Se?Re.geometry:Ed(Q),patterns:{},sortKey:He};C.push(it)}L&&C.sort(((Q,ie)=>Q.sortKey-ie.sortKey));for(const Q of C){const{geometry:ie,index:ye,sourceLayerIndex:we}=Q,Se=l[ye].feature;this.addFeature(Q,ie,ye,g,W),f.featureIndex.insert(Se,ie,ye,we,this.index)}}update(l,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,uo),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,f,g,_,C=1){let A;switch(C){case 1:A=[0,7];break;case 3:A=[0,2,5,7];break;case 5:A=[0,1,3,4,6,7];break;case 7:A=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${C}; valid values are 1, 3, 5, 7.`)}const L=A.length;for(const q of f)for(const W of q){const Q=W.x,ie=W.y;if(Q<0||Q>=fe||ie<0||ie>=fe)continue;const ye=this.segments.prepareSegment(L*L,this.layoutVertexArray,this.indexArray,l.sortKey),we=ye.vertexLength;for(let Se=0;Se<L;Se++)for(let Re=0;Re<L;Re++)FZ(this.layoutVertexArray,Q,ie,A[Re],A[Se]);for(let Se=0;Se<L-1;Se++)for(let Re=0;Re<L-1;Re++){const He=we+Se*L+Re,it=we+(Se+1)*L+Re;this.indexArray.emplaceBack(He,it+1,He+1),this.indexArray.emplaceBack(He,it,it+1)}ye.vertexLength+=L*L,ye.primitiveLength+=(L-1)*(L-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{},_)}}function KR(d,l){for(let f=0;f<d.length;f++)if(Vp(l,d[f]))return!0;for(let f=0;f<l.length;f++)if(Vp(d,l[f]))return!0;return!!L2(d,l)}function BZ(d,l,f){return!!Vp(d,l)||!!D2(l,d,f)}function XR(d,l){if(d.length===1)return JR(l,d[0]);for(let f=0;f<l.length;f++){const g=l[f];for(let _=0;_<g.length;_++)if(Vp(d,g[_]))return!0}for(let f=0;f<d.length;f++)if(JR(l,d[f]))return!0;for(let f=0;f<l.length;f++)if(L2(d,l[f]))return!0;return!1}function jZ(d,l,f){if(d.length>1){if(L2(d,l))return!0;for(let g=0;g<l.length;g++)if(D2(l[g],d,f))return!0}for(let g=0;g<d.length;g++)if(D2(d[g],l,f))return!0;return!1}function L2(d,l){if(d.length===0||l.length===0)return!1;for(let f=0;f<d.length-1;f++){const g=d[f],_=d[f+1];for(let C=0;C<l.length-1;C++)if(zZ(g,_,l[C],l[C+1]))return!0}return!1}function zZ(d,l,f,g){return vr(d,f,g)!==vr(l,f,g)&&vr(d,l,f)!==vr(d,l,g)}function D2(d,l,f){const g=f*f;if(l.length===1)return d.distSqr(l[0])<g;for(let _=1;_<l.length;_++)if(YR(d,l[_-1],l[_])<g)return!0;return!1}function YR(d,l,f){const g=l.distSqr(f);if(g===0)return d.distSqr(l);const _=((d.x-l.x)*(f.x-l.x)+(d.y-l.y)*(f.y-l.y))/g;return d.distSqr(_<0?l:_>1?f:f.sub(l)._mult(_)._add(l))}function JR(d,l){let f,g,_,C=!1;for(let A=0;A<d.length;A++){f=d[A];for(let L=0,q=f.length-1;L<f.length;q=L++)g=f[L],_=f[q],g.y>l.y!=_.y>l.y&&l.x<(_.x-g.x)*(l.y-g.y)/(_.y-g.y)+g.x&&(C=!C)}return C}function Vp(d,l){let f=!1;for(let g=0,_=d.length-1;g<d.length;_=g++){const C=d[g],A=d[_];C.y>l.y!=A.y>l.y&&l.x<(A.x-C.x)*(l.y-C.y)/(A.y-C.y)+C.x&&(f=!f)}return f}function $Z(d,l,f){const g=f[0],_=f[2];if(d.x<g.x&&l.x<g.x||d.x>_.x&&l.x>_.x||d.y<g.y&&l.y<g.y||d.y>_.y&&l.y>_.y)return!1;const C=vr(d,l,f[0]);return C!==vr(d,l,f[1])||C!==vr(d,l,f[2])||C!==vr(d,l,f[3])}function sy(d,l,f){const g=l.paint.get(d).value;return g.kind==="constant"?g.value:f.programConfigurations.get(l.id).getMaxValue(d)}function ab(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function ob(d,l,f,g,_){if(!l[0]&&!l[1])return d;const C=P.convert(l)._mult(_);f==="viewport"&&C._rotate(-g);const A=[];for(let L=0;L<d.length;L++)A.push(d[L].sub(C));return A}let QR,eO;lt("CircleBucket",k2,{omit:["layers"]});var qZ={get paint(){return eO=eO||new la({"circle-radius":new Yr(vt.paint_circle["circle-radius"]),"circle-color":new Yr(vt.paint_circle["circle-color"]),"circle-blur":new Yr(vt.paint_circle["circle-blur"]),"circle-opacity":new Yr(vt.paint_circle["circle-opacity"]),"circle-translate":new Fr(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new Fr(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fr(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fr(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yr(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yr(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yr(vt.paint_circle["circle-stroke-opacity"])})},get layout(){return QR=QR||new la({"circle-sort-key":new Yr(vt.layout_circle["circle-sort-key"])})}};class UZ extends Ui{constructor(l){super(l,qZ)}createBucket(l){return new k2(l)}queryRadius(l){const f=l;return sy("circle-radius",this,f)+sy("circle-stroke-width",this,f)+ab(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:f,featureState:g,geometry:_,transform:C,pixelsToTileUnits:A,unwrappedTileID:L,getElevation:q}){const W=ob(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-C.bearingInRadians,A),Q=this.paint.get("circle-radius").evaluate(f,g)+this.paint.get("circle-stroke-width").evaluate(f,g),ie=this.paint.get("circle-pitch-alignment")==="map",ye=ie?W:(function(Se,Re,He,it){return Se.map((Dt=>tO(Dt,Re,He,it)))})(W,C,L,q),we=ie?Q*A:Q;for(const Se of _)for(const Re of Se){const He=ie?Re:tO(Re,C,L,q);let it=we;const Dt=C.projectTileCoordinates(Re.x,Re.y,L,q).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?it*=Dt/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(it*=C.cameraToCenterDistance/Dt),BZ(ye,He,it))return!0}return!1}}function tO(d,l,f,g){const _=l.projectTileCoordinates(d.x,d.y,f,g).point;return new P((.5*_.x+.5)*l.width,(.5*-_.y+.5)*l.height)}class rO extends k2{}let nO;lt("HeatmapBucket",rO,{omit:["layers"]});var VZ={get paint(){return nO=nO||new la({"heatmap-radius":new Yr(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yr(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fr(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new za(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fr(vt.paint_heatmap["heatmap-opacity"])})}};function N2(d,{width:l,height:f},g,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==l*f*g)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${l*f*g}`)}else _=new Uint8Array(l*f*g);return d.width=l,d.height=f,d.data=_,d}function iO(d,{width:l,height:f},g){if(l===d.width&&f===d.height)return;const _=N2({},{width:l,height:f},g);F2(d,_,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,l),height:Math.min(d.height,f)},g),d.width=l,d.height=f,d.data=_.data}function F2(d,l,f,g,_,C){if(_.width===0||_.height===0)return l;if(_.width>d.width||_.height>d.height||f.x>d.width-_.width||f.y>d.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>l.width||_.height>l.height||g.x>l.width-_.width||g.y>l.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const A=d.data,L=l.data;if(A===L)throw new Error("srcData equals dstData, so image is already copied");for(let q=0;q<_.height;q++){const W=((f.y+q)*d.width+f.x)*C,Q=((g.y+q)*l.width+g.x)*C;for(let ie=0;ie<_.width*C;ie++)L[Q+ie]=A[W+ie]}return l}class ly{constructor(l,f){N2(this,l,1,f)}resize(l){iO(this,l,1)}clone(){return new ly({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,g,_,C){F2(l,f,g,_,C,1)}}class Al{constructor(l,f){N2(this,l,4,f)}resize(l){iO(this,l,4)}replace(l,f){f?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Al({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,g,_,C){F2(l,f,g,_,C,4)}setPixel(l,f,g){const _=4*(l*this.width+f);this.data[_+0]=Math.round(255*g.r/g.a),this.data[_+1]=Math.round(255*g.g/g.a),this.data[_+2]=Math.round(255*g.b/g.a),this.data[_+3]=Math.round(255*g.a)}}function aO(d){const l={},f=d.resolution||256,g=d.clips?d.clips.length:1,_=d.image||new Al({width:f,height:g});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);const C=(A,L,q)=>{l[d.evaluationKey]=q;const W=d.expression.evaluate(l);_.setPixel(A/4/f,L/4,W)};if(d.clips)for(let A=0,L=0;A<g;++A,L+=4*f)for(let q=0,W=0;q<f;q++,W+=4){const Q=q/(f-1),{start:ie,end:ye}=d.clips[A];C(L,W,ie*(1-Q)+ye*Q)}else for(let A=0,L=0;A<f;A++,L+=4)C(0,L,A/(f-1));return _}lt("AlphaImage",ly),lt("RGBAImage",Al);const B2="big-fb";class GZ extends Ui{createBucket(l){return new rO(l)}constructor(l){super(l,VZ),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=aO({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(B2)&&this.heatmapFbos.delete(B2)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let oO;var HZ={get paint(){return oO=oO||new la({"hillshade-illumination-direction":new Fr(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Fr(vt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Fr(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fr(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fr(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fr(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fr(vt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Fr(vt.paint_hillshade["hillshade-method"])})}};class WZ extends Ui{constructor(l){super(l,HZ),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,f=this.paint.get("hillshade-illumination-altitude").values,g=this.paint.get("hillshade-highlight-color").values,_=this.paint.get("hillshade-shadow-color").values;const C=Math.max(l.length,f.length,g.length,_.length);l=l.concat(Array(C-l.length).fill(l.at(-1))),f=f.concat(Array(C-f.length).fill(f.at(-1))),g=g.concat(Array(C-g.length).fill(g.at(-1))),_=_.concat(Array(C-_.length).fill(_.at(-1)));const A=f.map(br);return{directionRadians:l.map(br),altitudeRadians:A,shadowColor:_,highlightColor:g}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let sO;var ZZ={get paint(){return sO=sO||new la({"color-relief-opacity":new Fr(vt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new za(vt["paint_color-relief"]["color-relief-color"])})}};class j2{constructor(l,f,g,_){this.context=l,this.format=g,this.texture=l.gl.createTexture(),this.update(f,_)}update(l,f,g){const{width:_,height:C}=l,A=!(this.size&&this.size[0]===_&&this.size[1]===C||g),{context:L}=this,{gl:q}=L;if(this.useMipmap=!!(f&&f.useMipmap),q.bindTexture(q.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===q.RGBA&&(!f||f.premultiply!==!1)),A)this.size=[_,C],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||rt(l)?q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,q.UNSIGNED_BYTE,l):q.texImage2D(q.TEXTURE_2D,0,this.format,_,C,0,this.format,q.UNSIGNED_BYTE,l.data);else{const{x:W,y:Q}=g||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||rt(l)?q.texSubImage2D(q.TEXTURE_2D,0,W,Q,q.RGBA,q.UNSIGNED_BYTE,l):q.texSubImage2D(q.TEXTURE_2D,0,W,Q,_,C,q.RGBA,q.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&q.generateMipmap(q.TEXTURE_2D),L.pixelStoreUnpackFlipY.setDefault(),L.pixelStoreUnpack.setDefault(),L.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,f,g){const{context:_}=this,{gl:C}=_;C.bindTexture(C.TEXTURE_2D,this.texture),g!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=C.LINEAR),l!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,l),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,g||l),this.filter=l),f!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,f),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,f),this.wrap=f)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class lO{constructor(l,f,g,_=1,C=1,A=1,L=0){if(this.uid=l,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void hr(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;const q=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=C,this.blueFactor=A,this.baseShift=L;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let W=0;W<q;W++)this.data[this._idx(-1,W)]=this.data[this._idx(0,W)],this.data[this._idx(q,W)]=this.data[this._idx(q-1,W)],this.data[this._idx(W,-1)]=this.data[this._idx(W,0)],this.data[this._idx(W,q)]=this.data[this._idx(W,q-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(q,-1)]=this.data[this._idx(q-1,0)],this.data[this._idx(-1,q)]=this.data[this._idx(0,q-1)],this.data[this._idx(q,q)]=this.data[this._idx(q-1,q-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let W=0;W<q;W++)for(let Q=0;Q<q;Q++){const ie=this.get(W,Q);ie>this.max&&(this.max=ie),ie<this.min&&(this.min=ie)}}get(l,f){const g=new Uint8Array(this.data.buffer),_=4*this._idx(l,f);return this.unpack(g[_],g[_+1],g[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,f){if(l<-1||l>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(l+1)}unpack(l,f,g){return l*this.redFactor+f*this.greenFactor+g*this.blueFactor-this.baseShift}pack(l){return uO(l,this.getUnpackVector())}getPixels(){return new Al({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,f,g){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let _=f*this.dim,C=f*this.dim+this.dim,A=g*this.dim,L=g*this.dim+this.dim;switch(f){case-1:_=C-1;break;case 1:C=_+1}switch(g){case-1:A=L-1;break;case 1:L=A+1}const q=-f*this.dim,W=-g*this.dim;for(let Q=A;Q<L;Q++)for(let ie=_;ie<C;ie++)this.data[this._idx(ie,Q)]=l.data[this._idx(ie+q,Q+W)]}}function uO(d,l){const f=l[0],g=l[1],_=l[2],C=l[3],A=Math.min(f,g,_),L=Math.round((d+C)/A);return{r:Math.floor(L*A/f)%256,g:Math.floor(L*A/g)%256,b:Math.floor(L*A/_)%256}}lt("DEMData",lO);class KZ extends Ui{constructor(l){super(l,ZZ)}_createColorRamp(l){const f={elevationStops:[],colorStops:[]},g=this._transitionablePaint._values["color-relief-color"].value.expression;if(g instanceof Vc&&g._styleExpression.expression instanceof kn){this.colorRampExpression=g;const A=g._styleExpression.expression;f.elevationStops=A.labels,f.colorStops=[];for(const L of f.elevationStops)f.colorStops.push(A.evaluate({globals:{elevation:L}}))}if(f.elevationStops.length<1&&(f.elevationStops=[0],f.colorStops=[ln.transparent]),f.elevationStops.length<2&&(f.elevationStops.push(f.elevationStops[0]+1),f.colorStops.push(f.colorStops[0])),f.elevationStops.length<=l)return f;const _={elevationStops:[],colorStops:[]},C=(f.elevationStops.length-1)/(l-1);for(let A=0;A<f.elevationStops.length-.5;A+=C)_.elevationStops.push(f.elevationStops[Math.round(A)]),_.colorStops.push(f.colorStops[Math.round(A)]);return hr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),_}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,f,g){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const _=this._createColorRamp(f),C=new Al({width:_.colorStops.length,height:1}),A=new Al({width:_.colorStops.length,height:1});for(let L=0;L<_.elevationStops.length;L++){const q=uO(_.elevationStops[L],g);A.setPixel(0,L,new ln(q.r/255,q.g/255,q.b/255,1)),C.setPixel(0,L,_.colorStops[L])}return this.colorRampTextures={elevationTexture:new j2(l,A,l.gl.RGBA),colorTexture:new j2(l,C,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const XZ=ci([{name:"a_pos",components:2,type:"Int16"}],4),{members:YZ}=XZ;function z2(d,l,f){const g=f.patternDependencies;let _=!1;for(const C of l){const A=C.paint.get(`${d}-pattern`);A.isConstant()||(_=!0);const L=A.constantOr(null);L&&(_=!0,g[L.to]=!0,g[L.from]=!0)}return _}function $2(d,l,f,g,_){const C=_.patternDependencies;for(const A of l){const L=A.paint.get(`${d}-pattern`).value;if(L.kind!=="constant"){let q=L.evaluate({zoom:g-1},f,{},_.availableImages),W=L.evaluate({zoom:g},f,{},_.availableImages),Q=L.evaluate({zoom:g+1},f,{},_.availableImages);q=q&&q.name?q.name:q,W=W&&W.name?W.name:W,Q=Q&&Q.name?Q.name:Q,C[q]=!0,C[W]=!0,C[Q]=!0,f.patterns[A.id]={min:q,mid:W,max:Q}}}return f}function cO(d,l,f,g,_){let C;if(_===(function(A,L,q,W){let Q=0;for(let ie=L,ye=q-W;ie<q;ie+=W)Q+=(A[ye]-A[ie])*(A[ie+1]+A[ye+1]),ye=ie;return Q})(d,l,f,g)>0)for(let A=l;A<f;A+=g)C=pO(A/g|0,d[A],d[A+1],C);else for(let A=f-g;A>=l;A-=g)C=pO(A/g|0,d[A],d[A+1],C);return C&&Gp(C,C.next)&&(hy(C),C=C.next),C}function Ad(d,l){if(!d)return d;l||(l=d);let f,g=d;do if(f=!1,g.steiner||!Gp(g,g.next)&&fo(g.prev,g,g.next)!==0)g=g.next;else{if(hy(g),g=l=g.prev,g===g.next)break;f=!0}while(f||g!==l);return l}function uy(d,l,f,g,_,C,A){if(!d)return;!A&&C&&(function(q,W,Q,ie){let ye=q;do ye.z===0&&(ye.z=q2(ye.x,ye.y,W,Q,ie)),ye.prevZ=ye.prev,ye.nextZ=ye.next,ye=ye.next;while(ye!==q);ye.prevZ.nextZ=null,ye.prevZ=null,(function(we){let Se,Re=1;do{let He,it=we;we=null;let Dt=null;for(Se=0;it;){Se++;let yt=it,be=0;for(let St=0;St<Re&&(be++,yt=yt.nextZ,yt);St++);let Ve=Re;for(;be>0||Ve>0&&yt;)be!==0&&(Ve===0||!yt||it.z<=yt.z)?(He=it,it=it.nextZ,be--):(He=yt,yt=yt.nextZ,Ve--),Dt?Dt.nextZ=He:we=He,He.prevZ=Dt,Dt=He;it=yt}Dt.nextZ=null,Re*=2}while(Se>1)})(ye)})(d,g,_,C);let L=d;for(;d.prev!==d.next;){const q=d.prev,W=d.next;if(C?QZ(d,g,_,C):JZ(d))l.push(q.i,d.i,W.i),hy(d),d=W.next,L=W.next;else if((d=W)===L){A?A===1?uy(d=eK(Ad(d),l),l,f,g,_,C,2):A===2&&tK(d,l,f,g,_,C):uy(Ad(d),l,f,g,_,C,1);break}}}function JZ(d){const l=d.prev,f=d,g=d.next;if(fo(l,f,g)>=0)return!1;const _=l.x,C=f.x,A=g.x,L=l.y,q=f.y,W=g.y,Q=Math.min(_,C,A),ie=Math.min(L,q,W),ye=Math.max(_,C,A),we=Math.max(L,q,W);let Se=g.next;for(;Se!==l;){if(Se.x>=Q&&Se.x<=ye&&Se.y>=ie&&Se.y<=we&&cy(_,L,C,q,A,W,Se.x,Se.y)&&fo(Se.prev,Se,Se.next)>=0)return!1;Se=Se.next}return!0}function QZ(d,l,f,g){const _=d.prev,C=d,A=d.next;if(fo(_,C,A)>=0)return!1;const L=_.x,q=C.x,W=A.x,Q=_.y,ie=C.y,ye=A.y,we=Math.min(L,q,W),Se=Math.min(Q,ie,ye),Re=Math.max(L,q,W),He=Math.max(Q,ie,ye),it=q2(we,Se,l,f,g),Dt=q2(Re,He,l,f,g);let yt=d.prevZ,be=d.nextZ;for(;yt&&yt.z>=it&&be&&be.z<=Dt;){if(yt.x>=we&&yt.x<=Re&&yt.y>=Se&&yt.y<=He&&yt!==_&&yt!==A&&cy(L,Q,q,ie,W,ye,yt.x,yt.y)&&fo(yt.prev,yt,yt.next)>=0||(yt=yt.prevZ,be.x>=we&&be.x<=Re&&be.y>=Se&&be.y<=He&&be!==_&&be!==A&&cy(L,Q,q,ie,W,ye,be.x,be.y)&&fo(be.prev,be,be.next)>=0))return!1;be=be.nextZ}for(;yt&&yt.z>=it;){if(yt.x>=we&&yt.x<=Re&&yt.y>=Se&&yt.y<=He&&yt!==_&&yt!==A&&cy(L,Q,q,ie,W,ye,yt.x,yt.y)&&fo(yt.prev,yt,yt.next)>=0)return!1;yt=yt.prevZ}for(;be&&be.z<=Dt;){if(be.x>=we&&be.x<=Re&&be.y>=Se&&be.y<=He&&be!==_&&be!==A&&cy(L,Q,q,ie,W,ye,be.x,be.y)&&fo(be.prev,be,be.next)>=0)return!1;be=be.nextZ}return!0}function eK(d,l){let f=d;do{const g=f.prev,_=f.next.next;!Gp(g,_)&&hO(g,f,f.next,_)&&fy(g,_)&&fy(_,g)&&(l.push(g.i,f.i,_.i),hy(f),hy(f.next),f=d=_),f=f.next}while(f!==d);return Ad(f)}function tK(d,l,f,g,_,C){let A=d;do{let L=A.next.next;for(;L!==A.prev;){if(A.i!==L.i&&oK(A,L)){let q=dO(A,L);return A=Ad(A,A.next),q=Ad(q,q.next),uy(A,l,f,g,_,C,0),void uy(q,l,f,g,_,C,0)}L=L.next}A=A.next}while(A!==d)}function rK(d,l){let f=d.x-l.x;return f===0&&(f=d.y-l.y,f===0)&&(f=(d.next.y-d.y)/(d.next.x-d.x)-(l.next.y-l.y)/(l.next.x-l.x)),f}function nK(d,l){const f=(function(_,C){let A=C;const L=_.x,q=_.y;let W,Q=-1/0;if(Gp(_,A))return A;do{if(Gp(_,A.next))return A.next;if(q<=A.y&&q>=A.next.y&&A.next.y!==A.y){const Re=A.x+(q-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(Re<=L&&Re>Q&&(Q=Re,W=A.x<A.next.x?A:A.next,Re===L))return W}A=A.next}while(A!==C);if(!W)return null;const ie=W,ye=W.x,we=W.y;let Se=1/0;A=W;do{if(L>=A.x&&A.x>=ye&&L!==A.x&&fO(q<we?L:Q,q,ye,we,q<we?Q:L,q,A.x,A.y)){const Re=Math.abs(q-A.y)/(L-A.x);fy(A,_)&&(Re<Se||Re===Se&&(A.x>W.x||A.x===W.x&&iK(W,A)))&&(W=A,Se=Re)}A=A.next}while(A!==ie);return W})(d,l);if(!f)return l;const g=dO(f,d);return Ad(g,g.next),Ad(f,f.next)}function iK(d,l){return fo(d.prev,d,l.prev)<0&&fo(l.next,d,d.next)<0}function q2(d,l,f,g,_){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-f)*_|0)|d<<8))|d<<4))|d<<2))|d<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-g)*_|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function aK(d){let l=d,f=d;do(l.x<f.x||l.x===f.x&&l.y<f.y)&&(f=l),l=l.next;while(l!==d);return f}function fO(d,l,f,g,_,C,A,L){return(_-A)*(l-L)>=(d-A)*(C-L)&&(d-A)*(g-L)>=(f-A)*(l-L)&&(f-A)*(C-L)>=(_-A)*(g-L)}function cy(d,l,f,g,_,C,A,L){return!(d===A&&l===L)&&fO(d,l,f,g,_,C,A,L)}function oK(d,l){return d.next.i!==l.i&&d.prev.i!==l.i&&!(function(f,g){let _=f;do{if(_.i!==f.i&&_.next.i!==f.i&&_.i!==g.i&&_.next.i!==g.i&&hO(_,_.next,f,g))return!0;_=_.next}while(_!==f);return!1})(d,l)&&(fy(d,l)&&fy(l,d)&&(function(f,g){let _=f,C=!1;const A=(f.x+g.x)/2,L=(f.y+g.y)/2;do _.y>L!=_.next.y>L&&_.next.y!==_.y&&A<(_.next.x-_.x)*(L-_.y)/(_.next.y-_.y)+_.x&&(C=!C),_=_.next;while(_!==f);return C})(d,l)&&(fo(d.prev,d,l.prev)||fo(d,l.prev,l))||Gp(d,l)&&fo(d.prev,d,d.next)>0&&fo(l.prev,l,l.next)>0)}function fo(d,l,f){return(l.y-d.y)*(f.x-l.x)-(l.x-d.x)*(f.y-l.y)}function Gp(d,l){return d.x===l.x&&d.y===l.y}function hO(d,l,f,g){const _=lb(fo(d,l,f)),C=lb(fo(d,l,g)),A=lb(fo(f,g,d)),L=lb(fo(f,g,l));return _!==C&&A!==L||!(_!==0||!sb(d,f,l))||!(C!==0||!sb(d,g,l))||!(A!==0||!sb(f,d,g))||!(L!==0||!sb(f,l,g))}function sb(d,l,f){return l.x<=Math.max(d.x,f.x)&&l.x>=Math.min(d.x,f.x)&&l.y<=Math.max(d.y,f.y)&&l.y>=Math.min(d.y,f.y)}function lb(d){return d>0?1:d<0?-1:0}function fy(d,l){return fo(d.prev,d,d.next)<0?fo(d,l,d.next)>=0&&fo(d,d.prev,l)>=0:fo(d,l,d.prev)<0||fo(d,d.next,l)<0}function dO(d,l){const f=U2(d.i,d.x,d.y),g=U2(l.i,l.x,l.y),_=d.next,C=l.prev;return d.next=l,l.prev=d,f.next=_,_.prev=f,g.next=f,f.prev=g,C.next=g,g.prev=C,g}function pO(d,l,f,g){const _=U2(d,l,f);return g?(_.next=g.next,_.prev=g,g.next.prev=_,g.next=_):(_.prev=_,_.next=_),_}function hy(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function U2(d,l,f){return{i:d,x:l,y:f,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Hp{constructor(l,f){if(f>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=f}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class ub{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}ub.noSubdivision=new ub({fill:new Hp(0,0),line:new Hp(0,0),tile:new Hp(0,0),stencil:new Hp(0,0),circle:1}),lt("SubdivisionGranularityExpression",Hp),lt("SubdivisionGranularitySetting",ub);const Wp=-32768,dy=32767;class sK{constructor(l,f){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=fe/l,this._canonical=f}_getKey(l,f){return(l+=32768)<<16|f+32768}_vertexToIndex(l,f){if(l<-32768||f<-32768||l>32767||f>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const g=0|Math.round(l),_=0|Math.round(f),C=this._getKey(g,_);if(this._vertexDictionary.has(C))return this._vertexDictionary.get(C);const A=this._vertexBuffer.length/2;return this._vertexDictionary.set(C,A),this._vertexBuffer.push(g,_),A}_subdivideTrianglesScanline(l){if(this._granularity<2)return(function(_,C){const A=[];for(let L=0;L<C.length;L+=3){const q=C[L],W=C[L+1],Q=C[L+2],ie=_[2*q],ye=_[2*q+1];(_[2*W]-ie)*(_[2*Q+1]-ye)-(_[2*W+1]-ye)*(_[2*Q]-ie)>0?(A.push(q),A.push(Q),A.push(W)):(A.push(q),A.push(W),A.push(Q))}return A})(this._vertexBuffer,l);const f=[],g=l.length;for(let _=0;_<g;_+=3){const C=[l[_+0],l[_+1],l[_+2]],A=[this._vertexBuffer[2*l[_+0]+0],this._vertexBuffer[2*l[_+0]+1],this._vertexBuffer[2*l[_+1]+0],this._vertexBuffer[2*l[_+1]+1],this._vertexBuffer[2*l[_+2]+0],this._vertexBuffer[2*l[_+2]+1]];let L=1/0,q=1/0,W=-1/0,Q=-1/0;for(let Re=0;Re<3;Re++){const He=A[2*Re],it=A[2*Re+1];L=Math.min(L,He),W=Math.max(W,He),q=Math.min(q,it),Q=Math.max(Q,it)}if(L===W||q===Q)continue;const ie=Math.floor(L/this._granularityCellSize),ye=Math.ceil(W/this._granularityCellSize),we=Math.floor(q/this._granularityCellSize),Se=Math.ceil(Q/this._granularityCellSize);if(ie!==ye||we!==Se)for(let Re=we;Re<Se;Re++){const He=this._scanlineGenerateVertexRingForCellRow(Re,A,C);lK(this._vertexBuffer,He,f)}else f.push(...C)}return f}_scanlineGenerateVertexRingForCellRow(l,f,g){const _=l*this._granularityCellSize,C=_+this._granularityCellSize,A=[];for(let L=0;L<3;L++){const q=f[2*L],W=f[2*L+1],Q=f[2*(L+1)%6],ie=f[(2*(L+1)+1)%6],ye=f[2*(L+2)%6],we=f[(2*(L+2)+1)%6],Se=Q-q,Re=ie-W,He=Se===0,it=Re===0,Dt=(_-W)/Re,yt=(C-W)/Re,be=Math.min(Dt,yt),Ve=Math.max(Dt,yt);if(!it&&(be>=1||Ve<=0)||it&&(W<_||W>C)){ie>=_&&ie<=C&&A.push(g[(L+1)%3]);continue}!it&&be>0&&A.push(this._vertexToIndex(q+Se*be,W+Re*be));const St=q+Se*Math.max(be,0),rr=q+Se*Math.min(Ve,1);He||this._generateIntraEdgeVertices(A,q,W,Q,ie,St,rr),!it&&Ve<1&&A.push(this._vertexToIndex(q+Se*Ve,W+Re*Ve)),(it||ie>=_&&ie<=C)&&A.push(g[(L+1)%3]),!it&&(ie<=_||ie>=C)&&this._generateInterEdgeVertices(A,q,W,Q,ie,ye,we,rr,_,C)}return A}_generateIntraEdgeVertices(l,f,g,_,C,A,L){const q=_-f,W=C-g,Q=W===0,ie=Q?Math.min(f,_):Math.min(A,L),ye=Q?Math.max(f,_):Math.max(A,L),we=Math.floor(ie/this._granularityCellSize)+1,Se=Math.ceil(ye/this._granularityCellSize)-1;if(Q?f<_:A<L)for(let Re=we;Re<=Se;Re++){const He=Re*this._granularityCellSize;l.push(this._vertexToIndex(He,g+W*(He-f)/q))}else for(let Re=Se;Re>=we;Re--){const He=Re*this._granularityCellSize;l.push(this._vertexToIndex(He,g+W*(He-f)/q))}}_generateInterEdgeVertices(l,f,g,_,C,A,L,q,W,Q){const ie=C-g,ye=A-_,we=L-C,Se=(W-C)/we,Re=(Q-C)/we,He=Math.min(Se,Re),it=Math.max(Se,Re),Dt=_+ye*He;let yt=Math.floor(Math.min(Dt,q)/this._granularityCellSize)+1,be=Math.ceil(Math.max(Dt,q)/this._granularityCellSize)-1,Ve=q<Dt;const St=we===0;if(St&&(L===W||L===Q))return;if(St||He>=1||it<=0){const Mr=g-L,cr=A+(f-A)*Math.min((W-L)/Mr,(Q-L)/Mr);yt=Math.floor(Math.min(cr,q)/this._granularityCellSize)+1,be=Math.ceil(Math.max(cr,q)/this._granularityCellSize)-1,Ve=q<cr}const rr=ie>0?Q:W;if(Ve)for(let Mr=yt;Mr<=be;Mr++)l.push(this._vertexToIndex(Mr*this._granularityCellSize,rr));else for(let Mr=be;Mr>=yt;Mr--)l.push(this._vertexToIndex(Mr*this._granularityCellSize,rr))}_generateOutline(l){const f=[];for(const g of l){const _=Pd(g,this._granularity,!0),C=this._pointArrayToIndices(_),A=[];for(let L=1;L<C.length;L++)A.push(C[L-1]),A.push(C[L]);f.push(A)}return f}_handlePoles(l){let f=!1,g=!1;this._canonical&&(this._canonical.y===0&&(f=!0),this._canonical.y===(1<<this._canonical.z)-1&&(g=!0)),(f||g)&&this._fillPoles(l,f,g)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let f=0;f<l.length;f+=2){const g=l[f+1];g===Wp&&(l[f+1]=-32767),g===dy&&(l[f+1]=32766)}}_generatePoleQuad(l,f,g,_,C,A){_>C!=(A===Wp)?(l.push(f),l.push(g),l.push(this._vertexToIndex(_,A)),l.push(g),l.push(this._vertexToIndex(C,A)),l.push(this._vertexToIndex(_,A))):(l.push(g),l.push(f),l.push(this._vertexToIndex(_,A)),l.push(this._vertexToIndex(C,A)),l.push(g),l.push(this._vertexToIndex(_,A)))}_fillPoles(l,f,g){const _=this._vertexBuffer,C=fe,A=l.length;for(let L=2;L<A;L+=3){const q=l[L-2],W=l[L-1],Q=l[L],ie=_[2*q],ye=_[2*q+1],we=_[2*W],Se=_[2*W+1],Re=_[2*Q],He=_[2*Q+1];f&&(ye===0&&Se===0&&this._generatePoleQuad(l,q,W,ie,we,Wp),Se===0&&He===0&&this._generatePoleQuad(l,W,Q,we,Re,Wp),He===0&&ye===0&&this._generatePoleQuad(l,Q,q,Re,ie,Wp)),g&&(ye===C&&Se===C&&this._generatePoleQuad(l,q,W,ie,we,dy),Se===C&&He===C&&this._generatePoleQuad(l,W,Q,we,Re,dy),He===C&&ye===C&&this._generatePoleQuad(l,Q,q,Re,ie,dy))}}_initializeVertices(l){for(let f=0;f<l.length;f+=2)this._vertexToIndex(l[f],l[f+1])}subdividePolygonInternal(l,f){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:g,holeIndices:_}=(function(L){const q=[],W=[];for(const Q of L)if(Q.length!==0){Q!==L[0]&&q.push(W.length/2);for(let ie=0;ie<Q.length;ie++)W.push(Q[ie].x),W.push(Q[ie].y)}return{flattened:W,holeIndices:q}})(l);let C;this._initializeVertices(g);try{const L=(function(W,Q,ie=2){const ye=Q&&Q.length,we=ye?Q[0]*ie:W.length;let Se=cO(W,0,we,ie,!0);const Re=[];if(!Se||Se.next===Se.prev)return Re;let He,it,Dt;if(ye&&(Se=(function(yt,be,Ve,St){const rr=[];for(let Mr=0,cr=be.length;Mr<cr;Mr++){const dr=cO(yt,be[Mr]*St,Mr<cr-1?be[Mr+1]*St:yt.length,St,!1);dr===dr.next&&(dr.steiner=!0),rr.push(aK(dr))}rr.sort(rK);for(let Mr=0;Mr<rr.length;Mr++)Ve=nK(rr[Mr],Ve);return Ve})(W,Q,Se,ie)),W.length>80*ie){He=1/0,it=1/0;let yt=-1/0,be=-1/0;for(let Ve=ie;Ve<we;Ve+=ie){const St=W[Ve],rr=W[Ve+1];St<He&&(He=St),rr<it&&(it=rr),St>yt&&(yt=St),rr>be&&(be=rr)}Dt=Math.max(yt-He,be-it),Dt=Dt!==0?32767/Dt:0}return uy(Se,Re,ie,He,it,Dt,0),Re})(g,_),q=this._convertIndices(g,L);C=this._subdivideTrianglesScanline(q)}catch(L){console.error(L)}let A=[];return f&&(A=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(C),{verticesFlattened:this._vertexBuffer,indicesTriangles:C,indicesLineList:A}}_convertIndices(l,f){const g=[];for(let _=0;_<f.length;_++)g.push(this._vertexToIndex(l[2*f[_]],l[2*f[_]+1]));return g}_pointArrayToIndices(l){const f=[];for(let g=0;g<l.length;g++){const _=l[g];f.push(this._vertexToIndex(_.x,_.y))}return f}}function mO(d,l,f,g=!0){return new sK(f,l).subdividePolygonInternal(d,g)}function Pd(d,l,f=!1){if(!d||d.length<1)return[];if(d.length<2)return[];const g=d[0],_=d[d.length-1],C=f&&(g.x!==_.x||g.y!==_.y);if(l<2)return C?[...d,d[0]]:[...d];const A=Math.floor(fe/l),L=[];L.push(new P(d[0].x,d[0].y));const q=d.length,W=C?q:q-1;for(let Q=0;Q<W;Q++){const ie=d[Q],ye=Q<q-1?d[Q+1]:d[0],we=ie.x,Se=ie.y,Re=ye.x,He=ye.y,it=we!==Re,Dt=Se!==He;if(!it&&!Dt)continue;const yt=Re-we,be=He-Se,Ve=Math.abs(yt),St=Math.abs(be);let rr=we,Mr=Se;for(;;){const dr=yt>0?(Math.floor(rr/A)+1)*A:(Math.ceil(rr/A)-1)*A,jr=be>0?(Math.floor(Mr/A)+1)*A:(Math.ceil(Mr/A)-1)*A,Or=Math.abs(rr-dr),$r=Math.abs(Mr-jr),mr=Math.abs(rr-Re),on=Math.abs(Mr-He),Tn=it?Or/Ve:Number.POSITIVE_INFINITY,Cn=Dt?$r/St:Number.POSITIVE_INFINITY;if((mr<=Or||!it)&&(on<=$r||!Dt))break;if(Tn<Cn&&it||!Dt){rr=dr,Mr+=be*Tn;const hn=new P(rr,Math.round(Mr));L[L.length-1].x===hn.x&&L[L.length-1].y===hn.y||L.push(hn)}else{rr+=yt*Cn,Mr=jr;const hn=new P(Math.round(rr),Mr);L[L.length-1].x===hn.x&&L[L.length-1].y===hn.y||L.push(hn)}}const cr=new P(Re,He);L[L.length-1].x===cr.x&&L[L.length-1].y===cr.y||L.push(cr)}return L}function lK(d,l,f){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let g=0,_=d[2*l[0]];for(let q=1;q<l.length;q++){const W=d[2*l[q]];W<_&&(_=W,g=q)}const C=l.length;let A=g,L=(A+1)%C;for(;;){const q=A-1>=0?A-1:C-1,W=(L+1)%C,Q=d[2*l[q]],ie=d[2*l[W]],ye=d[2*l[A]],we=d[2*l[A]+1],Se=d[2*l[L]+1];let Re=!1;if(Q<ie)Re=!0;else if(Q>ie)Re=!1;else{const He=Se-we,it=-(d[2*l[L]]-ye),Dt=we<Se?1:-1;((Q-ye)*He+(d[2*l[q]+1]-we)*it)*Dt>((ie-ye)*He+(d[2*l[W]+1]-we)*it)*Dt&&(Re=!0)}if(Re){const He=l[q],it=l[A],Dt=l[L];He!==it&&He!==Dt&&it!==Dt&&f.push(Dt,it,He),A--,A<0&&(A=C-1)}else{const He=l[W],it=l[A],Dt=l[L];He!==it&&He!==Dt&&it!==Dt&&f.push(Dt,it,He),L++,L>=C&&(L=0)}if(q===W)break}}function gO(d,l,f,g,_,C,A,L,q){const W=_.length/2,Q=A&&L&&q;if(W<si.MAX_VERTEX_ARRAY_LENGTH){const ie=l.prepareSegment(W,f,g),ye=ie.vertexLength;for(let Re=0;Re<C.length;Re+=3)g.emplaceBack(ye+C[Re],ye+C[Re+1],ye+C[Re+2]);let we,Se;ie.vertexLength+=W,ie.primitiveLength+=C.length/3,Q&&(Se=A.prepareSegment(W,f,L),we=Se.vertexLength,Se.vertexLength+=W);for(let Re=0;Re<_.length;Re+=2)d(_[Re],_[Re+1]);if(Q)for(let Re=0;Re<q.length;Re++){const He=q[Re];for(let it=1;it<He.length;it+=2)L.emplaceBack(we+He[it-1],we+He[it]);Se.primitiveLength+=He.length/2}}else(function(ie,ye,we,Se,Re,He){const it=[];for(let St=0;St<Se.length/2;St++)it.push(-1);const Dt={count:0};let yt=0,be=ie.getOrCreateLatestSegment(ye,we),Ve=be.vertexLength;for(let St=2;St<Re.length;St+=3){const rr=Re[St-2],Mr=Re[St-1],cr=Re[St];let dr=it[rr]<yt,jr=it[Mr]<yt,Or=it[cr]<yt;be.vertexLength+((dr?1:0)+(jr?1:0)+(Or?1:0))>si.MAX_VERTEX_ARRAY_LENGTH&&(be=ie.createNewSegment(ye,we),yt=Dt.count,dr=!0,jr=!0,Or=!0,Ve=0);const $r=py(it,Se,He,Dt,rr,dr,be),mr=py(it,Se,He,Dt,Mr,jr,be),on=py(it,Se,He,Dt,cr,Or,be);we.emplaceBack(Ve+$r-yt,Ve+mr-yt,Ve+on-yt),be.primitiveLength++}})(l,f,g,_,C,d),Q&&(function(ie,ye,we,Se,Re,He){const it=[];for(let St=0;St<Se.length/2;St++)it.push(-1);const Dt={count:0};let yt=0,be=ie.getOrCreateLatestSegment(ye,we),Ve=be.vertexLength;for(let St=0;St<Re.length;St++){const rr=Re[St];for(let Mr=1;Mr<Re[St].length;Mr+=2){const cr=rr[Mr-1],dr=rr[Mr];let jr=it[cr]<yt,Or=it[dr]<yt;be.vertexLength+((jr?1:0)+(Or?1:0))>si.MAX_VERTEX_ARRAY_LENGTH&&(be=ie.createNewSegment(ye,we),yt=Dt.count,jr=!0,Or=!0,Ve=0);const $r=py(it,Se,He,Dt,cr,jr,be),mr=py(it,Se,He,Dt,dr,Or,be);we.emplaceBack(Ve+$r-yt,Ve+mr-yt),be.primitiveLength++}}})(A,f,L,_,q,d),l.forceNewSegmentOnNextPrepare(),A?.forceNewSegmentOnNextPrepare()}function py(d,l,f,g,_,C,A){if(C){const L=g.count;return f(l[2*_],l[2*_+1]),d[_]=g.count,g.count++,A.vertexLength++,L}return d[_]}class V2{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new or,this.indexArray=new Ei,this.indexArray2=new _i,this.programConfigurations=new ef(l.layers,l.zoom),this.segments=new si,this.segments2=new si,this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(l,f,g){this.hasPattern=z2("fill",this.layers,f);const _=this.layers[0].layout.get("fill-sort-key"),C=!_.isConstant(),A=[];for(const{feature:L,id:q,index:W,sourceLayerIndex:Q}of l){const ie=this.layers[0]._featureFilter.needGeometry,ye=Cd(L,ie);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom,{globalState:this.globalState}),ye,g))continue;const we=C?_.evaluate(ye,{},g,f.availableImages):void 0,Se={id:q,properties:L.properties,type:L.type,sourceLayerIndex:Q,index:W,geometry:ie?ye.geometry:Ed(L),patterns:{},sortKey:we};A.push(Se)}C&&A.sort(((L,q)=>L.sortKey-q.sortKey));for(const L of A){const{geometry:q,index:W,sourceLayerIndex:Q}=L;if(this.hasPattern){const ie=$2("fill",this.layers,L,this.zoom,f);this.patternFeatures.push(ie)}else this.addFeature(L,q,W,g,{},f.subdivisionGranularity);f.featureIndex.insert(l[W].feature,q,W,Q,this.index)}}update(l,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,g)}addFeatures(l,f,g){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,g,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,YZ),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,f,g,_,C,A){for(const L of qo(f,500)){const q=mO(L,_,A.fill.getGranularityForZoomLevel(_.z)),W=this.layoutVertexArray;gO(((Q,ie)=>{W.emplaceBack(Q,ie)}),this.segments,this.layoutVertexArray,this.indexArray,q.verticesFlattened,q.indicesTriangles,this.segments2,this.indexArray2,q.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,C,_)}}let yO,vO;lt("FillBucket",V2,{omit:["layers","patternFeatures"]});var uK={get paint(){return vO=vO||new la({"fill-antialias":new Fr(vt.paint_fill["fill-antialias"]),"fill-opacity":new Yr(vt.paint_fill["fill-opacity"]),"fill-color":new Yr(vt.paint_fill["fill-color"]),"fill-outline-color":new Yr(vt.paint_fill["fill-outline-color"]),"fill-translate":new Fr(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new Fr(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new sa(vt.paint_fill["fill-pattern"])})},get layout(){return yO=yO||new la({"fill-sort-key":new Yr(vt.layout_fill["fill-sort-key"])})}};class cK extends Ui{constructor(l){super(l,uK)}recalculate(l,f){super.recalculate(l,f);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new V2(l)}queryRadius(){return ab(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:f,transform:g,pixelsToTileUnits:_}){return XR(ob(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-g.bearingInRadians,_),f)}isTileClipped(){return!0}}const fK=ci([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),hK=ci([{name:"a_centroid",components:2,type:"Int16"}],4),{members:dK}=fK;var G2,bO,H2,_O,W2,xO,wO,cb={};function SO(){if(bO)return G2;bO=1;var d=v();function l(_,C,A,L,q){this.properties={},this.extent=A,this.type=0,this._pbf=_,this._geometry=-1,this._keys=L,this._values=q,_.readFields(f,this,C)}function f(_,C,A){_==1?C.id=A.readVarint():_==2?(function(L,q){for(var W=L.readVarint()+L.pos;L.pos<W;){var Q=q._keys[L.readVarint()],ie=q._values[L.readVarint()];q.properties[Q]=ie}})(A,C):_==3?C.type=A.readVarint():_==4&&(C._geometry=A.pos)}function g(_){for(var C,A,L=0,q=0,W=_.length,Q=W-1;q<W;Q=q++)L+=((A=_[Q]).x-(C=_[q]).x)*(C.y+A.y);return L}return G2=l,l.types=["Unknown","Point","LineString","Polygon"],l.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var C,A=_.readVarint()+_.pos,L=1,q=0,W=0,Q=0,ie=[];_.pos<A;){if(q<=0){var ye=_.readVarint();L=7&ye,q=ye>>3}if(q--,L===1||L===2)W+=_.readSVarint(),Q+=_.readSVarint(),L===1&&(C&&ie.push(C),C=[]),C.push(new d(W,Q));else{if(L!==7)throw new Error("unknown command "+L);C&&C.push(C[0].clone())}}return C&&ie.push(C),ie},l.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var C=_.readVarint()+_.pos,A=1,L=0,q=0,W=0,Q=1/0,ie=-1/0,ye=1/0,we=-1/0;_.pos<C;){if(L<=0){var Se=_.readVarint();A=7&Se,L=Se>>3}if(L--,A===1||A===2)(q+=_.readSVarint())<Q&&(Q=q),q>ie&&(ie=q),(W+=_.readSVarint())<ye&&(ye=W),W>we&&(we=W);else if(A!==7)throw new Error("unknown command "+A)}return[Q,ye,ie,we]},l.prototype.toGeoJSON=function(_,C,A){var L,q,W=this.extent*Math.pow(2,A),Q=this.extent*_,ie=this.extent*C,ye=this.loadGeometry(),we=l.types[this.type];function Se(it){for(var Dt=0;Dt<it.length;Dt++){var yt=it[Dt];it[Dt]=[360*(yt.x+Q)/W-180,360/Math.PI*Math.atan(Math.exp((180-360*(yt.y+ie)/W)*Math.PI/180))-90]}}switch(this.type){case 1:var Re=[];for(L=0;L<ye.length;L++)Re[L]=ye[L][0];Se(ye=Re);break;case 2:for(L=0;L<ye.length;L++)Se(ye[L]);break;case 3:for(ye=(function(it){var Dt=it.length;if(Dt<=1)return[it];for(var yt,be,Ve=[],St=0;St<Dt;St++){var rr=g(it[St]);rr!==0&&(be===void 0&&(be=rr<0),be===rr<0?(yt&&Ve.push(yt),yt=[it[St]]):yt.push(it[St]))}return yt&&Ve.push(yt),Ve})(ye),L=0;L<ye.length;L++)for(q=0;q<ye[L].length;q++)Se(ye[L][q])}ye.length===1?ye=ye[0]:we="Multi"+we;var He={type:"Feature",geometry:{type:we,coordinates:ye},properties:this.properties};return"id"in this&&(He.id=this.id),He},G2}function EO(){if(_O)return H2;_O=1;var d=SO();function l(g,_){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=g,this._keys=[],this._values=[],this._features=[],g.readFields(f,this,_),this.length=this._features.length}function f(g,_,C){g===15?_.version=C.readVarint():g===1?_.name=C.readString():g===5?_.extent=C.readVarint():g===2?_._features.push(C.pos):g===3?_._keys.push(C.readString()):g===4&&_._values.push((function(A){for(var L=null,q=A.readVarint()+A.pos;A.pos<q;){var W=A.readVarint()>>3;L=W===1?A.readString():W===2?A.readFloat():W===3?A.readDouble():W===4?A.readVarint64():W===5?A.readVarint():W===6?A.readSVarint():W===7?A.readBoolean():null}return L})(C))}return H2=l,l.prototype.feature=function(g){if(g<0||g>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[g];var _=this._pbf.readVarint()+this._pbf.pos;return new d(this._pbf,_,this.extent,this._keys,this._values)},H2}function CO(){return wO||(wO=1,cb.VectorTile=(function(){if(xO)return W2;xO=1;var d=EO();function l(f,g,_){if(f===3){var C=new d(_,_.readVarint()+_.pos);C.length&&(g[C.name]=C)}}return W2=function(f,g){this.layers=f.readFields(l,{},g)},W2})(),cb.VectorTileFeature=SO(),cb.VectorTileLayer=EO()),cb}var my=p(CO());const pK=my.VectorTileFeature.types,Z2=Math.pow(2,13);function gy(d,l,f,g,_,C,A,L){d.emplaceBack(l,f,2*Math.floor(g*Z2)+A,_*Z2*2,C*Z2*2,Math.round(L))}class K2{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Gr,this.centroidVertexArray=new Jt,this.indexArray=new Ei,this.programConfigurations=new ef(l.layers,l.zoom),this.segments=new si,this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(l,f,g){this.features=[],this.hasPattern=z2("fill-extrusion",this.layers,f);for(const{feature:_,id:C,index:A,sourceLayerIndex:L}of l){const q=this.layers[0]._featureFilter.needGeometry,W=Cd(_,q);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom,{globalState:this.globalState}),W,g))continue;const Q={id:C,sourceLayerIndex:L,index:A,geometry:q?W.geometry:Ed(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push($2("fill-extrusion",this.layers,Q,this.zoom,f)):this.addFeature(Q,Q.geometry,A,g,{},f.subdivisionGranularity),f.featureIndex.insert(_,Q.geometry,A,L,this.index,!0)}}addFeatures(l,f,g){for(const _ of this.features){const{geometry:C}=_;this.addFeature(_,C,_.index,f,g,l.subdivisionGranularity)}}update(l,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,dK),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,hK.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,f,g,_,C,A){for(const L of qo(f,500)){const q={x:0,y:0,sampleCount:0},W=this.layoutVertexArray.length;this.processPolygon(q,_,l,L,A);const Q=this.layoutVertexArray.length-W,ie=Math.floor(q.x/q.sampleCount),ye=Math.floor(q.y/q.sampleCount);for(let we=0;we<Q;we++)this.centroidVertexArray.emplaceBack(ie,ye)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,C,_)}processPolygon(l,f,g,_,C){if(_.length<1||AO(_[0]))return;for(const ie of _)ie.length!==0&&mK(l,ie);const A={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},L=C.fill.getGranularityForZoomLevel(f.z),q=pK[g.type]==="Polygon";for(const ie of _){if(ie.length===0||AO(ie))continue;const ye=Pd(ie,L,q);this._generateSideFaces(ye,A)}if(!q)return;const W=mO(_,f,L,!1),Q=this.layoutVertexArray;gO(((ie,ye)=>{gy(Q,ie,ye,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,W.verticesFlattened,W.indicesTriangles)}_generateSideFaces(l,f){let g=0;for(let _=1;_<l.length;_++){const C=l[_],A=l[_-1];if(gK(C,A))continue;f.segment.vertexLength+4>si.MAX_VERTEX_ARRAY_LENGTH&&(f.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const L=C.sub(A)._perp()._unit(),q=A.dist(C);g+q>32768&&(g=0),gy(this.layoutVertexArray,C.x,C.y,L.x,L.y,0,0,g),gy(this.layoutVertexArray,C.x,C.y,L.x,L.y,0,1,g),g+=q,gy(this.layoutVertexArray,A.x,A.y,L.x,L.y,0,0,g),gy(this.layoutVertexArray,A.x,A.y,L.x,L.y,0,1,g);const W=f.segment.vertexLength;this.indexArray.emplaceBack(W,W+2,W+1),this.indexArray.emplaceBack(W+1,W+2,W+3),f.segment.vertexLength+=4,f.segment.primitiveLength+=2}}}function mK(d,l){for(let f=0;f<l.length;f++){const g=l[f];f===l.length-1&&l[0].x===g.x&&l[0].y===g.y||(d.x+=g.x,d.y+=g.y,d.sampleCount++)}}function gK(d,l){return d.x===l.x&&(d.x<0||d.x>fe)||d.y===l.y&&(d.y<0||d.y>fe)}function AO(d){return d.every((l=>l.x<0))||d.every((l=>l.x>fe))||d.every((l=>l.y<0))||d.every((l=>l.y>fe))}let PO;lt("FillExtrusionBucket",K2,{omit:["layers","features"]});var yK={get paint(){return PO=PO||new la({"fill-extrusion-opacity":new Fr(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yr(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fr(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fr(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sa(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yr(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yr(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fr(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class vK extends Ui{constructor(l){super(l,yK)}createBucket(l){return new K2(l)}queryRadius(){return ab(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:f,featureState:g,geometry:_,transform:C,pixelsToTileUnits:A,pixelPosMatrix:L}){const q=ob(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-C.bearingInRadians,A),W=this.paint.get("fill-extrusion-height").evaluate(f,g),Q=this.paint.get("fill-extrusion-base").evaluate(f,g),ie=(function(we,Se){const Re=[];for(const He of we){const it=[He.x,He.y,0,1];Ce(it,it,Se),Re.push(new P(it[0]/it[3],it[1]/it[3]))}return Re})(q,L),ye=(function(we,Se,Re,He){const it=[],Dt=[],yt=He[8]*Se,be=He[9]*Se,Ve=He[10]*Se,St=He[11]*Se,rr=He[8]*Re,Mr=He[9]*Re,cr=He[10]*Re,dr=He[11]*Re;for(const jr of we){const Or=[],$r=[];for(const mr of jr){const on=mr.x,Tn=mr.y,Cn=He[0]*on+He[4]*Tn+He[12],hn=He[1]*on+He[5]*Tn+He[13],hi=He[2]*on+He[6]*Tn+He[14],qa=He[3]*on+He[7]*Tn+He[15],Io=hi+Ve,As=qa+St,bu=Cn+rr,Pl=hn+Mr,hs=hi+cr,ka=qa+dr,Zo=new P((Cn+yt)/As,(hn+be)/As);Zo.z=Io/As,Or.push(Zo);const ds=new P(bu/ka,Pl/ka);ds.z=hs/ka,$r.push(ds)}it.push(Or),Dt.push($r)}return[it,Dt]})(_,Q,W,L);return(function(we,Se,Re){let He=1/0;XR(Re,Se)&&(He=TO(Re,Se[0]));for(let it=0;it<Se.length;it++){const Dt=Se[it],yt=we[it];for(let be=0;be<Dt.length-1;be++){const Ve=Dt[be],St=[Ve,Dt[be+1],yt[be+1],yt[be],Ve];KR(Re,St)&&(He=Math.min(He,TO(Re,St)))}}return He!==1/0&&He})(ye[0],ye[1],ie)}}function yy(d,l){return d.x*l.x+d.y*l.y}function TO(d,l){if(d.length===1){let f=0;const g=l[f++];let _;for(;!_||g.equals(_);)if(_=l[f++],!_)return 1/0;for(;f<l.length;f++){const C=l[f],A=d[0],L=_.sub(g),q=C.sub(g),W=A.sub(g),Q=yy(L,L),ie=yy(L,q),ye=yy(q,q),we=yy(W,L),Se=yy(W,q),Re=Q*ye-ie*ie,He=(ye*we-ie*Se)/Re,it=(Q*Se-ie*we)/Re,Dt=g.z*(1-He-it)+_.z*He+C.z*it;if(isFinite(Dt))return Dt}return 1/0}{let f=1/0;for(const g of l)f=Math.min(f,g.z);return f}}const bK=ci([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:_K}=bK,xK=ci([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:wK}=xK,SK=my.VectorTileFeature.types,EK=Math.cos(Math.PI/180*37.5),IO=Math.pow(2,14)/.5;class X2{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((f=>f.id)),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((f=>{this.gradients[f.id]={}})),this.layoutVertexArray=new Ur,this.layoutVertexArray2=new Ar,this.indexArray=new Ei,this.programConfigurations=new ef(l.layers,l.zoom),this.segments=new si,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((f=>f.isStateDependent())).map((f=>f.id))}populate(l,f,g){this.hasPattern=z2("line",this.layers,f);const _=this.layers[0].layout.get("line-sort-key"),C=!_.isConstant(),A=[];for(const{feature:L,id:q,index:W,sourceLayerIndex:Q}of l){const ie=this.layers[0]._featureFilter.needGeometry,ye=Cd(L,ie);if(!this.layers[0]._featureFilter.filter(new fn(this.zoom,{globalState:this.globalState}),ye,g))continue;const we=C?_.evaluate(ye,{},g):void 0,Se={id:q,properties:L.properties,type:L.type,sourceLayerIndex:Q,index:W,geometry:ie?ye.geometry:Ed(L),patterns:{},sortKey:we};A.push(Se)}C&&A.sort(((L,q)=>L.sortKey-q.sortKey));for(const L of A){const{geometry:q,index:W,sourceLayerIndex:Q}=L;if(this.hasPattern){const ie=$2("line",this.layers,L,this.zoom,f);this.patternFeatures.push(ie)}else this.addFeature(L,q,W,g,{},f.subdivisionGranularity);f.featureIndex.insert(l[W].feature,q,W,Q,this.index)}}update(l,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,g)}addFeatures(l,f,g){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,g,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,wK)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,_K),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,f,g,_,C,A){const L=this.layers[0].layout,q=L.get("line-join").evaluate(l,{}),W=L.get("line-cap"),Q=L.get("line-miter-limit"),ie=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const ye of f)this.addLine(ye,l,q,W,Q,ie,_,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,C,_)}addLine(l,f,g,_,C,A,L,q){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=Pd(l,L?q.line.getGranularityForZoomLevel(L.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let yt=0;yt<l.length-1;yt++)this.totalDistance+=l[yt].dist(l[yt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const W=SK[f.type]==="Polygon";let Q=l.length;for(;Q>=2&&l[Q-1].equals(l[Q-2]);)Q--;let ie=0;for(;ie<Q-1&&l[ie].equals(l[ie+1]);)ie++;if(Q<(W?3:2))return;g==="bevel"&&(C=1.05);const ye=this.overscaling<=16?122880/(512*this.overscaling):0,we=this.segments.prepareSegment(10*Q,this.layoutVertexArray,this.indexArray);let Se,Re,He,it,Dt;this.e1=this.e2=-1,W&&(Se=l[Q-2],Dt=l[ie].sub(Se)._unit()._perp());for(let yt=ie;yt<Q;yt++){if(He=yt===Q-1?W?l[ie+1]:void 0:l[yt+1],He&&l[yt].equals(He))continue;Dt&&(it=Dt),Se&&(Re=Se),Se=l[yt],Dt=He?He.sub(Se)._unit()._perp():it,it=it||Dt;let be=it.add(Dt);be.x===0&&be.y===0||be._unit();const Ve=it.x*Dt.x+it.y*Dt.y,St=be.x*Dt.x+be.y*Dt.y,rr=St!==0?1/St:1/0,Mr=2*Math.sqrt(2-2*St),cr=St<EK&&Re&&He,dr=it.x*Dt.y-it.y*Dt.x>0;if(cr&&yt>ie){const $r=Se.dist(Re);if($r>2*ye){const mr=Se.sub(Se.sub(Re)._mult(ye/$r)._round());this.updateDistance(Re,mr),this.addCurrentVertex(mr,it,0,0,we),Re=mr}}const jr=Re&&He;let Or=jr?g:W?"butt":_;if(jr&&Or==="round"&&(rr<A?Or="miter":rr<=2&&(Or="fakeround")),Or==="miter"&&rr>C&&(Or="bevel"),Or==="bevel"&&(rr>2&&(Or="flipbevel"),rr<C&&(Or="miter")),Re&&this.updateDistance(Re,Se),Or==="miter")be._mult(rr),this.addCurrentVertex(Se,be,0,0,we);else if(Or==="flipbevel"){if(rr>100)be=Dt.mult(-1);else{const $r=rr*it.add(Dt).mag()/it.sub(Dt).mag();be._perp()._mult($r*(dr?-1:1))}this.addCurrentVertex(Se,be,0,0,we),this.addCurrentVertex(Se,be.mult(-1),0,0,we)}else if(Or==="bevel"||Or==="fakeround"){const $r=-Math.sqrt(rr*rr-1),mr=dr?$r:0,on=dr?0:$r;if(Re&&this.addCurrentVertex(Se,it,mr,on,we),Or==="fakeround"){const Tn=Math.round(180*Mr/Math.PI/20);for(let Cn=1;Cn<Tn;Cn++){let hn=Cn/Tn;if(hn!==.5){const qa=hn-.5;hn+=hn*qa*(hn-1)*((1.0904+Ve*(Ve*(3.55645-1.43519*Ve)-3.2452))*qa*qa+(.848013+Ve*(.215638*Ve-1.06021)))}const hi=Dt.sub(it)._mult(hn)._add(it)._unit()._mult(dr?-1:1);this.addHalfVertex(Se,hi.x,hi.y,!1,dr,0,we)}}He&&this.addCurrentVertex(Se,Dt,-mr,-on,we)}else if(Or==="butt")this.addCurrentVertex(Se,be,0,0,we);else if(Or==="square"){const $r=Re?1:-1;this.addCurrentVertex(Se,be,$r,$r,we)}else Or==="round"&&(Re&&(this.addCurrentVertex(Se,it,0,0,we),this.addCurrentVertex(Se,it,1,1,we,!0)),He&&(this.addCurrentVertex(Se,Dt,-1,-1,we,!0),this.addCurrentVertex(Se,Dt,0,0,we)));if(cr&&yt<Q-1){const $r=Se.dist(He);if($r>2*ye){const mr=Se.add(He.sub(Se)._mult(ye/$r)._round());this.updateDistance(Se,mr),this.addCurrentVertex(mr,Dt,0,0,we),Se=mr}}}}addCurrentVertex(l,f,g,_,C,A=!1){const L=f.y*_-f.x,q=-f.y-f.x*_;this.addHalfVertex(l,f.x+f.y*g,f.y-f.x*g,A,!1,g,C),this.addHalfVertex(l,L,q,A,!0,-_,C),this.distance>IO/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,f,g,_,C,A))}addHalfVertex({x:l,y:f},g,_,C,A,L,q){const W=.5*(this.lineClips?this.scaledDistance*(IO-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(C?1:0),(f<<1)+(A?1:0),Math.round(63*g)+128,Math.round(63*_)+128,1+(L===0?0:L<0?-1:1)|(63&W)<<2,W>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Q=q.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Q,this.e2),q.primitiveLength++),A?this.e2=Q:this.e1=Q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,f){this.distance+=l.dist(f),this.updateScaledDistance()}}let MO,RO;lt("LineBucket",X2,{omit:["layers","patternFeatures"]});var OO={get paint(){return RO=RO||new la({"line-opacity":new Yr(vt.paint_line["line-opacity"]),"line-color":new Yr(vt.paint_line["line-color"]),"line-translate":new Fr(vt.paint_line["line-translate"]),"line-translate-anchor":new Fr(vt.paint_line["line-translate-anchor"]),"line-width":new Yr(vt.paint_line["line-width"]),"line-gap-width":new Yr(vt.paint_line["line-gap-width"]),"line-offset":new Yr(vt.paint_line["line-offset"]),"line-blur":new Yr(vt.paint_line["line-blur"]),"line-dasharray":new Bi(vt.paint_line["line-dasharray"]),"line-pattern":new sa(vt.paint_line["line-pattern"]),"line-gradient":new za(vt.paint_line["line-gradient"])})},get layout(){return MO=MO||new la({"line-cap":new Fr(vt.layout_line["line-cap"]),"line-join":new Yr(vt.layout_line["line-join"]),"line-miter-limit":new Fr(vt.layout_line["line-miter-limit"]),"line-round-limit":new Fr(vt.layout_line["line-round-limit"]),"line-sort-key":new Yr(vt.layout_line["line-sort-key"])})}};class CK extends Yr{possiblyEvaluate(l,f){return f=new fn(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(l,f)}evaluate(l,f,g,_){return f=Nt({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(l,f,g,_)}}let fb;class AK extends Ui{constructor(l){super(l,OO),this.gradientVersion=0,fb||(fb=new CK(OO.paint.properties["line-width"].specification),fb.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const f=this.gradientExpression();this.stepInterpolant=!!(function(g){return g._styleExpression!==void 0})(f)&&f._styleExpression.expression instanceof _r,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,f){super.recalculate(l,f),this.paint._values["line-floorwidth"]=fb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new X2(l)}queryRadius(l){const f=l,g=kO(sy("line-width",this,f),sy("line-gap-width",this,f)),_=sy("line-offset",this,f);return g/2+Math.abs(_)+ab(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:f,featureState:g,geometry:_,transform:C,pixelsToTileUnits:A}){const L=ob(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-C.bearingInRadians,A),q=A/2*kO(this.paint.get("line-width").evaluate(f,g),this.paint.get("line-gap-width").evaluate(f,g)),W=this.paint.get("line-offset").evaluate(f,g);return W&&(_=(function(Q,ie){const ye=[];for(let we=0;we<Q.length;we++){const Se=Q[we],Re=[];for(let He=0;He<Se.length;He++){const it=Se[He-1],Dt=Se[He],yt=Se[He+1],be=He===0?new P(0,0):Dt.sub(it)._unit()._perp(),Ve=He===Se.length-1?new P(0,0):yt.sub(Dt)._unit()._perp(),St=be._add(Ve)._unit(),rr=St.x*Ve.x+St.y*Ve.y;rr!==0&&St._mult(1/rr),Re.push(St._mult(ie)._add(Dt))}ye.push(Re)}return ye})(_,W*A)),(function(Q,ie,ye){for(let we=0;we<ie.length;we++){const Se=ie[we];if(Q.length>=3){for(let Re=0;Re<Se.length;Re++)if(Vp(Q,Se[Re]))return!0}if(jZ(Q,Se,ye))return!0}return!1})(L,_,q)}isTileClipped(){return!0}}function kO(d,l){return l>0?l+2*d:d}const PK=ci([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),TK=ci([{name:"a_projected_pos",components:3,type:"Float32"}],4);ci([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const IK=ci([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ci([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const LO=ci([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),MK=ci([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function RK(d,l,f){return d.sections.forEach((g=>{g.text=(function(_,C,A){const L=C.layout.get("text-transform").evaluate(A,{});return L==="uppercase"?_=_.toLocaleUpperCase():L==="lowercase"&&(_=_.toLocaleLowerCase()),Zi.applyArabicShaping&&(_=Zi.applyArabicShaping(_)),_})(g.text,l,f)})),d}ci([{name:"triangle",components:3,type:"Uint16"}]),ci([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ci([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ci([{type:"Float32",name:"offsetX"}]),ci([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ci([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const vy={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var DO,Y2,NO,Wo=24,J2={};function OK(){return DO||(DO=1,J2.read=function(d,l,f,g,_){var C,A,L=8*_-g-1,q=(1<<L)-1,W=q>>1,Q=-7,ie=f?_-1:0,ye=f?-1:1,we=d[l+ie];for(ie+=ye,C=we&(1<<-Q)-1,we>>=-Q,Q+=L;Q>0;C=256*C+d[l+ie],ie+=ye,Q-=8);for(A=C&(1<<-Q)-1,C>>=-Q,Q+=g;Q>0;A=256*A+d[l+ie],ie+=ye,Q-=8);if(C===0)C=1-W;else{if(C===q)return A?NaN:1/0*(we?-1:1);A+=Math.pow(2,g),C-=W}return(we?-1:1)*A*Math.pow(2,C-g)},J2.write=function(d,l,f,g,_,C){var A,L,q,W=8*C-_-1,Q=(1<<W)-1,ie=Q>>1,ye=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,we=g?0:C-1,Se=g?1:-1,Re=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(L=isNaN(l)?1:0,A=Q):(A=Math.floor(Math.log(l)/Math.LN2),l*(q=Math.pow(2,-A))<1&&(A--,q*=2),(l+=A+ie>=1?ye/q:ye*Math.pow(2,1-ie))*q>=2&&(A++,q/=2),A+ie>=Q?(L=0,A=Q):A+ie>=1?(L=(l*q-1)*Math.pow(2,_),A+=ie):(L=l*Math.pow(2,ie-1)*Math.pow(2,_),A=0));_>=8;d[f+we]=255&L,we+=Se,L/=256,_-=8);for(A=A<<_|L,W+=_;W>0;d[f+we]=255&A,we+=Se,A/=256,W-=8);d[f+we-Se]|=128*Re}),J2}function FO(){if(NO)return Y2;NO=1,Y2=l;var d=OK();function l(be){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(be)?be:new Uint8Array(be||0),this.pos=0,this.type=0,this.length=this.buf.length}l.Varint=0,l.Fixed64=1,l.Bytes=2,l.Fixed32=5;var f=4294967296,g=1/f,_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function C(be){return be.type===l.Bytes?be.readVarint()+be.pos:be.pos+1}function A(be,Ve,St){return St?4294967296*Ve+(be>>>0):4294967296*(Ve>>>0)+(be>>>0)}function L(be,Ve,St){var rr=Ve<=16383?1:Ve<=2097151?2:Ve<=268435455?3:Math.floor(Math.log(Ve)/(7*Math.LN2));St.realloc(rr);for(var Mr=St.pos-1;Mr>=be;Mr--)St.buf[Mr+rr]=St.buf[Mr]}function q(be,Ve){for(var St=0;St<be.length;St++)Ve.writeVarint(be[St])}function W(be,Ve){for(var St=0;St<be.length;St++)Ve.writeSVarint(be[St])}function Q(be,Ve){for(var St=0;St<be.length;St++)Ve.writeFloat(be[St])}function ie(be,Ve){for(var St=0;St<be.length;St++)Ve.writeDouble(be[St])}function ye(be,Ve){for(var St=0;St<be.length;St++)Ve.writeBoolean(be[St])}function we(be,Ve){for(var St=0;St<be.length;St++)Ve.writeFixed32(be[St])}function Se(be,Ve){for(var St=0;St<be.length;St++)Ve.writeSFixed32(be[St])}function Re(be,Ve){for(var St=0;St<be.length;St++)Ve.writeFixed64(be[St])}function He(be,Ve){for(var St=0;St<be.length;St++)Ve.writeSFixed64(be[St])}function it(be,Ve){return(be[Ve]|be[Ve+1]<<8|be[Ve+2]<<16)+16777216*be[Ve+3]}function Dt(be,Ve,St){be[St]=Ve,be[St+1]=Ve>>>8,be[St+2]=Ve>>>16,be[St+3]=Ve>>>24}function yt(be,Ve){return(be[Ve]|be[Ve+1]<<8|be[Ve+2]<<16)+(be[Ve+3]<<24)}return l.prototype={destroy:function(){this.buf=null},readFields:function(be,Ve,St){for(St=St||this.length;this.pos<St;){var rr=this.readVarint(),Mr=rr>>3,cr=this.pos;this.type=7&rr,be(Mr,Ve,this),this.pos===cr&&this.skip(rr)}return Ve},readMessage:function(be,Ve){return this.readFields(be,Ve,this.readVarint()+this.pos)},readFixed32:function(){var be=it(this.buf,this.pos);return this.pos+=4,be},readSFixed32:function(){var be=yt(this.buf,this.pos);return this.pos+=4,be},readFixed64:function(){var be=it(this.buf,this.pos)+it(this.buf,this.pos+4)*f;return this.pos+=8,be},readSFixed64:function(){var be=it(this.buf,this.pos)+yt(this.buf,this.pos+4)*f;return this.pos+=8,be},readFloat:function(){var be=d.read(this.buf,this.pos,!0,23,4);return this.pos+=4,be},readDouble:function(){var be=d.read(this.buf,this.pos,!0,52,8);return this.pos+=8,be},readVarint:function(be){var Ve,St,rr=this.buf;return Ve=127&(St=rr[this.pos++]),St<128?Ve:(Ve|=(127&(St=rr[this.pos++]))<<7,St<128?Ve:(Ve|=(127&(St=rr[this.pos++]))<<14,St<128?Ve:(Ve|=(127&(St=rr[this.pos++]))<<21,St<128?Ve:(function(Mr,cr,dr){var jr,Or,$r=dr.buf;if(jr=(112&(Or=$r[dr.pos++]))>>4,Or<128||(jr|=(127&(Or=$r[dr.pos++]))<<3,Or<128)||(jr|=(127&(Or=$r[dr.pos++]))<<10,Or<128)||(jr|=(127&(Or=$r[dr.pos++]))<<17,Or<128)||(jr|=(127&(Or=$r[dr.pos++]))<<24,Or<128)||(jr|=(1&(Or=$r[dr.pos++]))<<31,Or<128))return A(Mr,jr,cr);throw new Error("Expected varint not more than 10 bytes")})(Ve|=(15&(St=rr[this.pos]))<<28,be,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var be=this.readVarint();return be%2==1?(be+1)/-2:be/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var be=this.readVarint()+this.pos,Ve=this.pos;return this.pos=be,be-Ve>=12&&_?(function(St,rr,Mr){return _.decode(St.subarray(rr,Mr))})(this.buf,Ve,be):(function(St,rr,Mr){for(var cr="",dr=rr;dr<Mr;){var jr,Or,$r,mr=St[dr],on=null,Tn=mr>239?4:mr>223?3:mr>191?2:1;if(dr+Tn>Mr)break;Tn===1?mr<128&&(on=mr):Tn===2?(192&(jr=St[dr+1]))==128&&(on=(31&mr)<<6|63&jr)<=127&&(on=null):Tn===3?(Or=St[dr+2],(192&(jr=St[dr+1]))==128&&(192&Or)==128&&((on=(15&mr)<<12|(63&jr)<<6|63&Or)<=2047||on>=55296&&on<=57343)&&(on=null)):Tn===4&&(Or=St[dr+2],$r=St[dr+3],(192&(jr=St[dr+1]))==128&&(192&Or)==128&&(192&$r)==128&&((on=(15&mr)<<18|(63&jr)<<12|(63&Or)<<6|63&$r)<=65535||on>=1114112)&&(on=null)),on===null?(on=65533,Tn=1):on>65535&&(on-=65536,cr+=String.fromCharCode(on>>>10&1023|55296),on=56320|1023&on),cr+=String.fromCharCode(on),dr+=Tn}return cr})(this.buf,Ve,be)},readBytes:function(){var be=this.readVarint()+this.pos,Ve=this.buf.subarray(this.pos,be);return this.pos=be,Ve},readPackedVarint:function(be,Ve){if(this.type!==l.Bytes)return be.push(this.readVarint(Ve));var St=C(this);for(be=be||[];this.pos<St;)be.push(this.readVarint(Ve));return be},readPackedSVarint:function(be){if(this.type!==l.Bytes)return be.push(this.readSVarint());var Ve=C(this);for(be=be||[];this.pos<Ve;)be.push(this.readSVarint());return be},readPackedBoolean:function(be){if(this.type!==l.Bytes)return be.push(this.readBoolean());var Ve=C(this);for(be=be||[];this.pos<Ve;)be.push(this.readBoolean());return be},readPackedFloat:function(be){if(this.type!==l.Bytes)return be.push(this.readFloat());var Ve=C(this);for(be=be||[];this.pos<Ve;)be.push(this.readFloat());return be},readPackedDouble:function(be){if(this.type!==l.Bytes)return be.push(this.readDouble());var Ve=C(this);for(be=be||[];this.pos<Ve;)be.push(this.readDouble());return be},readPackedFixed32:function(be){if(this.type!==l.Bytes)return be.push(this.readFixed32());var Ve=C(this);for(be=be||[];this.pos<Ve;)be.push(this.readFixed32());return be},readPackedSFixed32:function(be){if(this.type!==l.Bytes)return be.push(this.readSFixed32());var Ve=C(this);for(be=be||[];this.pos<Ve;)be.push(this.readSFixed32());return be},readPackedFixed64:function(be){if(this.type!==l.Bytes)return be.push(this.readFixed64());var Ve=C(this);for(be=be||[];this.pos<Ve;)be.push(this.readFixed64());return be},readPackedSFixed64:function(be){if(this.type!==l.Bytes)return be.push(this.readSFixed64());var Ve=C(this);for(be=be||[];this.pos<Ve;)be.push(this.readSFixed64());return be},skip:function(be){var Ve=7&be;if(Ve===l.Varint)for(;this.buf[this.pos++]>127;);else if(Ve===l.Bytes)this.pos=this.readVarint()+this.pos;else if(Ve===l.Fixed32)this.pos+=4;else{if(Ve!==l.Fixed64)throw new Error("Unimplemented type: "+Ve);this.pos+=8}},writeTag:function(be,Ve){this.writeVarint(be<<3|Ve)},realloc:function(be){for(var Ve=this.length||16;Ve<this.pos+be;)Ve*=2;if(Ve!==this.length){var St=new Uint8Array(Ve);St.set(this.buf),this.buf=St,this.length=Ve}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(be){this.realloc(4),Dt(this.buf,be,this.pos),this.pos+=4},writeSFixed32:function(be){this.realloc(4),Dt(this.buf,be,this.pos),this.pos+=4},writeFixed64:function(be){this.realloc(8),Dt(this.buf,-1&be,this.pos),Dt(this.buf,Math.floor(be*g),this.pos+4),this.pos+=8},writeSFixed64:function(be){this.realloc(8),Dt(this.buf,-1&be,this.pos),Dt(this.buf,Math.floor(be*g),this.pos+4),this.pos+=8},writeVarint:function(be){(be=+be||0)>268435455||be<0?(function(Ve,St){var rr,Mr;if(Ve>=0?(rr=Ve%4294967296|0,Mr=Ve/4294967296|0):(Mr=~(-Ve/4294967296),4294967295^(rr=~(-Ve%4294967296))?rr=rr+1|0:(rr=0,Mr=Mr+1|0)),Ve>=18446744073709552e3||Ve<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");St.realloc(10),(function(cr,dr,jr){jr.buf[jr.pos++]=127&cr|128,cr>>>=7,jr.buf[jr.pos++]=127&cr|128,cr>>>=7,jr.buf[jr.pos++]=127&cr|128,cr>>>=7,jr.buf[jr.pos++]=127&cr|128,jr.buf[jr.pos]=127&(cr>>>=7)})(rr,0,St),(function(cr,dr){var jr=(7&cr)<<4;dr.buf[dr.pos++]|=jr|((cr>>>=3)?128:0),cr&&(dr.buf[dr.pos++]=127&cr|((cr>>>=7)?128:0),cr&&(dr.buf[dr.pos++]=127&cr|((cr>>>=7)?128:0),cr&&(dr.buf[dr.pos++]=127&cr|((cr>>>=7)?128:0),cr&&(dr.buf[dr.pos++]=127&cr|((cr>>>=7)?128:0),cr&&(dr.buf[dr.pos++]=127&cr)))))})(Mr,St)})(be,this):(this.realloc(4),this.buf[this.pos++]=127&be|(be>127?128:0),be<=127||(this.buf[this.pos++]=127&(be>>>=7)|(be>127?128:0),be<=127||(this.buf[this.pos++]=127&(be>>>=7)|(be>127?128:0),be<=127||(this.buf[this.pos++]=be>>>7&127))))},writeSVarint:function(be){this.writeVarint(be<0?2*-be-1:2*be)},writeBoolean:function(be){this.writeVarint(!!be)},writeString:function(be){be=String(be),this.realloc(4*be.length),this.pos++;var Ve=this.pos;this.pos=(function(rr,Mr,cr){for(var dr,jr,Or=0;Or<Mr.length;Or++){if((dr=Mr.charCodeAt(Or))>55295&&dr<57344){if(!jr){dr>56319||Or+1===Mr.length?(rr[cr++]=239,rr[cr++]=191,rr[cr++]=189):jr=dr;continue}if(dr<56320){rr[cr++]=239,rr[cr++]=191,rr[cr++]=189,jr=dr;continue}dr=jr-55296<<10|dr-56320|65536,jr=null}else jr&&(rr[cr++]=239,rr[cr++]=191,rr[cr++]=189,jr=null);dr<128?rr[cr++]=dr:(dr<2048?rr[cr++]=dr>>6|192:(dr<65536?rr[cr++]=dr>>12|224:(rr[cr++]=dr>>18|240,rr[cr++]=dr>>12&63|128),rr[cr++]=dr>>6&63|128),rr[cr++]=63&dr|128)}return cr})(this.buf,be,this.pos);var St=this.pos-Ve;St>=128&&L(Ve,St,this),this.pos=Ve-1,this.writeVarint(St),this.pos+=St},writeFloat:function(be){this.realloc(4),d.write(this.buf,be,this.pos,!0,23,4),this.pos+=4},writeDouble:function(be){this.realloc(8),d.write(this.buf,be,this.pos,!0,52,8),this.pos+=8},writeBytes:function(be){var Ve=be.length;this.writeVarint(Ve),this.realloc(Ve);for(var St=0;St<Ve;St++)this.buf[this.pos++]=be[St]},writeRawMessage:function(be,Ve){this.pos++;var St=this.pos;be(Ve,this);var rr=this.pos-St;rr>=128&&L(St,rr,this),this.pos=St-1,this.writeVarint(rr),this.pos+=rr},writeMessage:function(be,Ve,St){this.writeTag(be,l.Bytes),this.writeRawMessage(Ve,St)},writePackedVarint:function(be,Ve){Ve.length&&this.writeMessage(be,q,Ve)},writePackedSVarint:function(be,Ve){Ve.length&&this.writeMessage(be,W,Ve)},writePackedBoolean:function(be,Ve){Ve.length&&this.writeMessage(be,ye,Ve)},writePackedFloat:function(be,Ve){Ve.length&&this.writeMessage(be,Q,Ve)},writePackedDouble:function(be,Ve){Ve.length&&this.writeMessage(be,ie,Ve)},writePackedFixed32:function(be,Ve){Ve.length&&this.writeMessage(be,we,Ve)},writePackedSFixed32:function(be,Ve){Ve.length&&this.writeMessage(be,Se,Ve)},writePackedFixed64:function(be,Ve){Ve.length&&this.writeMessage(be,Re,Ve)},writePackedSFixed64:function(be,Ve){Ve.length&&this.writeMessage(be,He,Ve)},writeBytesField:function(be,Ve){this.writeTag(be,l.Bytes),this.writeBytes(Ve)},writeFixed32Field:function(be,Ve){this.writeTag(be,l.Fixed32),this.writeFixed32(Ve)},writeSFixed32Field:function(be,Ve){this.writeTag(be,l.Fixed32),this.writeSFixed32(Ve)},writeFixed64Field:function(be,Ve){this.writeTag(be,l.Fixed64),this.writeFixed64(Ve)},writeSFixed64Field:function(be,Ve){this.writeTag(be,l.Fixed64),this.writeSFixed64(Ve)},writeVarintField:function(be,Ve){this.writeTag(be,l.Varint),this.writeVarint(Ve)},writeSVarintField:function(be,Ve){this.writeTag(be,l.Varint),this.writeSVarint(Ve)},writeStringField:function(be,Ve){this.writeTag(be,l.Bytes),this.writeString(Ve)},writeFloatField:function(be,Ve){this.writeTag(be,l.Fixed32),this.writeFloat(Ve)},writeDoubleField:function(be,Ve){this.writeTag(be,l.Fixed64),this.writeDouble(Ve)},writeBooleanField:function(be,Ve){this.writeVarintField(be,!!Ve)}},Y2}var Th,Q2=p(FO());function kK(d,l,f){d===1&&f.readMessage(LK,l)}function LK(d,l,f){if(d===3){const{id:g,bitmap:_,width:C,height:A,left:L,top:q,advance:W}=f.readMessage(DK,{});l.push({id:g,bitmap:new ly({width:C+6,height:A+6},_),metrics:{width:C,height:A,left:L,top:q,advance:W}})}}function DK(d,l,f){d===1?l.id=f.readVarint():d===2?l.bitmap=f.readBytes():d===3?l.width=f.readVarint():d===4?l.height=f.readVarint():d===5?l.left=f.readSVarint():d===6?l.top=f.readSVarint():d===7&&(l.advance=f.readVarint())}function BO(d){let l=0,f=0;for(const A of d)l+=A.w*A.h,f=Math.max(f,A.w);d.sort(((A,L)=>L.h-A.h));const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),f),h:1/0}];let _=0,C=0;for(const A of d)for(let L=g.length-1;L>=0;L--){const q=g[L];if(!(A.w>q.w||A.h>q.h)){if(A.x=q.x,A.y=q.y,C=Math.max(C,A.y+A.h),_=Math.max(_,A.x+A.w),A.w===q.w&&A.h===q.h){const W=g.pop();L<g.length&&(g[L]=W)}else A.h===q.h?(q.x+=A.w,q.w-=A.w):A.w===q.w?(q.y+=A.h,q.h-=A.h):(g.push({x:q.x+A.w,y:q.y,w:q.w-A.w,h:A.h}),q.y+=A.h,q.h-=A.h);break}}return{w:_,h:C,fill:l/(_*C)||0}}class ew{constructor(l,{pixelRatio:f,version:g,stretchX:_,stretchY:C,content:A,textFitWidth:L,textFitHeight:q}){this.paddedRect=l,this.pixelRatio=f,this.stretchX=_,this.stretchY=C,this.content=A,this.version=g,this.textFitWidth=L,this.textFitHeight=q}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class jO{constructor(l,f){const g={},_={};this.haveRenderCallbacks=[];const C=[];this.addImages(l,g,C),this.addImages(f,_,C);const{w:A,h:L}=BO(C),q=new Al({width:A||1,height:L||1});for(const W in l){const Q=l[W],ie=g[W].paddedRect;Al.copy(Q.data,q,{x:0,y:0},{x:ie.x+1,y:ie.y+1},Q.data)}for(const W in f){const Q=f[W],ie=_[W].paddedRect,ye=ie.x+1,we=ie.y+1,Se=Q.data.width,Re=Q.data.height;Al.copy(Q.data,q,{x:0,y:0},{x:ye,y:we},Q.data),Al.copy(Q.data,q,{x:0,y:Re-1},{x:ye,y:we-1},{width:Se,height:1}),Al.copy(Q.data,q,{x:0,y:0},{x:ye,y:we+Re},{width:Se,height:1}),Al.copy(Q.data,q,{x:Se-1,y:0},{x:ye-1,y:we},{width:1,height:Re}),Al.copy(Q.data,q,{x:0,y:0},{x:ye+Se,y:we},{width:1,height:Re})}this.image=q,this.iconPositions=g,this.patternPositions=_}addImages(l,f,g){for(const _ in l){const C=l[_],A={x:0,y:0,w:C.data.width+2,h:C.data.height+2};g.push(A),f[_]=new ew(A,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(l,f){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in l.updatedImages)this.patchUpdatedImage(this.iconPositions[g],l.getImage(g),f),this.patchUpdatedImage(this.patternPositions[g],l.getImage(g),f)}patchUpdatedImage(l,f,g){if(!l||!f||l.version===f.version)return;l.version=f.version;const[_,C]=l.tl;g.update(f.data,void 0,{x:_,y:C})}}lt("ImagePosition",ew),lt("ImageAtlas",jO),u.an=void 0,(Th=u.an||(u.an={}))[Th.none=0]="none",Th[Th.horizontal=1]="horizontal",Th[Th.vertical=2]="vertical",Th[Th.horizontalOnly=3]="horizontalOnly";class by{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(l,f,g){const _=new by;return _.scale=l||1,_.fontStack=f,_.verticalAlign=g||"bottom",_}static forImage(l,f){const g=new by;return g.imageName=l,g.verticalAlign=f||"bottom",g}}class Zp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,f){const g=new Zp;for(let _=0;_<l.sections.length;_++){const C=l.sections[_];C.image?g.addImageSection(C):g.addTextSection(C,f)}return g}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=(function(l){let f="";for(let g=0;g<l.length;g++){const _=l.charCodeAt(g+1)||null,C=l.charCodeAt(g-1)||null;f+=_&&ui(_)&&!vy[l[g+1]]||C&&ui(C)&&!vy[l[g-1]]||!vy[l[g]]?l[g]:vy[l[g]]}return f})(this.text)}trim(){let l=0;for(let g=0;g<this.text.length&&db[this.text.charCodeAt(g)];g++)l++;let f=this.text.length;for(let g=this.text.length-1;g>=0&&g>=l&&db[this.text.charCodeAt(g)];g--)f--;this.text=this.text.substring(l,f),this.sectionIndex=this.sectionIndex.slice(l,f)}substring(l,f){const g=new Zp;return g.text=this.text.substring(l,f),g.sectionIndex=this.sectionIndex.slice(l,f),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((l,f)=>Math.max(l,this.sections[f].scale)),0)}getMaxImageSize(l){let f=0,g=0;for(let _=0;_<this.length();_++){const C=this.getSection(_);if(C.imageName){const A=l[C.imageName];if(!A)continue;const L=A.displaySize;f=Math.max(f,L[0]),g=Math.max(g,L[1])}}return{maxImageWidth:f,maxImageHeight:g}}addTextSection(l,f){this.text+=l.text,this.sections.push(by.forText(l.scale,l.fontStack||f,l.verticalAlign));const g=this.sections.length-1;for(let _=0;_<l.text.length;++_)this.sectionIndex.push(g)}addImageSection(l){const f=l.image?l.image.name:"";if(f.length===0)return void hr("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(by.forImage(f,l.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):hr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hb(d,l,f,g,_,C,A,L,q,W,Q,ie,ye,we,Se){const Re=Zp.fromFeature(d,_);let He;ie===u.an.vertical&&Re.verticalizePunctuation();const{processBidirectionalText:it,processStyledBidirectionalText:Dt}=Zi;if(it&&Re.sections.length===1){He=[];const Ve=it(Re.toString(),tw(Re,W,C,l,g,we));for(const St of Ve){const rr=new Zp;rr.text=St,rr.sections=Re.sections;for(let Mr=0;Mr<St.length;Mr++)rr.sectionIndex.push(0);He.push(rr)}}else if(Dt){He=[];const Ve=Dt(Re.text,Re.sectionIndex,tw(Re,W,C,l,g,we));for(const St of Ve){const rr=new Zp;rr.text=St[0],rr.sectionIndex=St[1],rr.sections=Re.sections,He.push(rr)}}else He=(function(Ve,St){const rr=[],Mr=Ve.text;let cr=0;for(const dr of St)rr.push(Ve.substring(cr,dr)),cr=dr;return cr<Mr.length&&rr.push(Ve.substring(cr,Mr.length)),rr})(Re,tw(Re,W,C,l,g,we));const yt=[],be={positionedLines:yt,text:Re.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:ie,iconsInText:!1,verticalizable:!1};return(function(Ve,St,rr,Mr,cr,dr,jr,Or,$r,mr,on,Tn){let Cn=0,hn=0,hi=0,qa=0;const Io=Or==="right"?1:Or==="left"?0:.5,As=Wo/Tn;let bu=0;for(const ka of cr){ka.trim();const Zo=ka.getMaxScale(),ds={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[bu]=ds;const ps=ds.positionedGlyphs;let ll=0;if(!ka.length()){hn+=dr,++bu;continue}const _u=jK(Mr,ka,As);for(let Tl=0;Tl<ka.length();Tl++){const Mo=ka.getSection(Tl),Xo=ka.getSectionIndex(Tl),Yo=ka.getCharCode(Tl),mo=zK($r,on,Yo);let ya;if(Mo.imageName){if(Ve.iconsInText=!0,Mo.scale=Mo.scale*As,ya=qK(Mo,mo,Zo,_u,Mr),!ya)continue;ll=Math.max(ll,ya.imageOffset)}else if(ya=$K(Mo,Yo,mo,_u,St,rr),!ya)continue;const{rect:gc,metrics:Jp,baselineOffset:yc}=ya;ps.push({glyph:Yo,imageName:Mo.imageName,x:Cn,y:hn+yc+-17,vertical:mo,scale:Mo.scale,fontStack:Mo.fontStack,sectionIndex:Xo,metrics:Jp,rect:gc}),mo?(Ve.verticalizable=!0,Cn+=(Mo.imageName?Jp.advance:Wo)*Mo.scale+mr):Cn+=Jp.advance*Mo.scale+mr}ps.length!==0&&(hi=Math.max(Cn-mr,hi),UK(ps,0,ps.length-1,Io)),Cn=0,ds.lineOffset=Math.max(ll,(Zo-1)*Wo);const Ko=dr*Zo+ll;hn+=Ko,qa=Math.max(Ko,qa),++bu}const{horizontalAlign:Pl,verticalAlign:hs}=rw(jr);(function(ka,Zo,ds,ps,ll,_u,Ko,Tl,Mo){const Xo=(Zo-ds)*ll;let Yo=0;Yo=_u!==Ko?-Tl*ps- -17:-ps*Mo*Ko+.5*Ko;for(const mo of ka)for(const ya of mo.positionedGlyphs)ya.x+=Xo,ya.y+=Yo})(Ve.positionedLines,Io,Pl,hs,hi,qa,dr,hn,cr.length),Ve.top+=-hs*hn,Ve.bottom=Ve.top+hn,Ve.left+=-Pl*hi,Ve.right=Ve.left+hi})(be,l,f,g,He,A,L,q,ie,W,ye,Se),!(function(Ve){for(const St of Ve)if(St.positionedGlyphs.length!==0)return!1;return!0})(yt)&&be}const db={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},NK={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},FK={40:!0};function zO(d,l,f,g,_,C){if(l.imageName){const A=g[l.imageName];return A?A.displaySize[0]*l.scale*Wo/C+_:0}{const A=f[l.fontStack],L=A&&A[d];return L?L.metrics.advance*l.scale+_:0}}function $O(d,l,f,g){const _=Math.pow(d-l,2);return g?d<l?_/2:2*_:_+Math.abs(f)*f}function BK(d,l,f){let g=0;return d===10&&(g-=1e4),f&&(g+=150),d!==40&&d!==65288||(g+=50),l!==41&&l!==65289||(g+=50),g}function qO(d,l,f,g,_,C){let A=null,L=$O(l,f,_,C);for(const q of g){const W=$O(l-q.x,f,_,C)+q.badness;W<=L&&(A=q,L=W)}return{index:d,x:l,priorBreak:A,badness:L}}function UO(d){return d?UO(d.priorBreak).concat(d.index):[]}function tw(d,l,f,g,_,C){if(!d)return[];const A=[],L=(function(ie,ye,we,Se,Re,He){let it=0;for(let Dt=0;Dt<ie.length();Dt++){const yt=ie.getSection(Dt);it+=zO(ie.getCharCode(Dt),yt,Se,Re,ye,He)}return it/Math.max(1,Math.ceil(it/we))})(d,l,f,g,_,C),q=d.text.indexOf("​")>=0;let W=0;for(let ie=0;ie<d.length();ie++){const ye=d.getSection(ie),we=d.getCharCode(ie);if(db[we]||(W+=zO(we,ye,g,_,l,C)),ie<d.length()-1){const Se=!((Q=we)<11904)&&(!!tr["CJK Compatibility Forms"](Q)||!!tr["CJK Compatibility"](Q)||!!tr["CJK Strokes"](Q)||!!tr["CJK Symbols and Punctuation"](Q)||!!tr["Enclosed CJK Letters and Months"](Q)||!!tr["Halfwidth and Fullwidth Forms"](Q)||!!tr["Ideographic Description Characters"](Q)||!!tr["Vertical Forms"](Q)||Qn.test(String.fromCodePoint(Q)));(NK[we]||Se||ye.imageName||ie!==d.length()-2&&FK[d.getCharCode(ie+1)])&&A.push(qO(ie+1,W,L,A,BK(we,d.getCharCode(ie+1),Se&&q),!1))}}var Q;return UO(qO(d.length(),W,L,A,0,!0))}function rw(d){let l=.5,f=.5;switch(d){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:l,verticalAlign:f}}function jK(d,l,f){const g=l.getMaxScale()*Wo,{maxImageWidth:_,maxImageHeight:C}=l.getMaxImageSize(d),A=Math.max(g,C*f);return{verticalLineContentWidth:Math.max(g,_*f),horizontalLineContentHeight:A}}function VO(d){switch(d){case"top":return 0;case"center":return .5;default:return 1}}function zK(d,l,f){return!(d===u.an.horizontal||!l&&!vn(f)||l&&(db[f]||(g=f,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(g)))));var g}function $K(d,l,f,g,_,C){const A=C[d.fontStack],L=(function(W,Q,ie,ye){if(W&&W.rect)return W;const we=Q[ie.fontStack],Se=we&&we[ye];return Se?{rect:null,metrics:Se.metrics}:null})(A&&A[l],_,d,l);if(L===null)return null;let q;if(f)q=g.verticalLineContentWidth-d.scale*Wo;else{const W=VO(d.verticalAlign);q=(g.horizontalLineContentHeight-d.scale*Wo)*W}return{rect:L.rect,metrics:L.metrics,baselineOffset:q}}function qK(d,l,f,g,_){const C=_[d.imageName];if(!C)return null;const A=C.paddedRect,L=C.displaySize,q={width:L[0],height:L[1],left:1,top:-3,advance:l?L[1]:L[0]};let W;if(l)W=g.verticalLineContentWidth-L[1]*d.scale;else{const Q=VO(d.verticalAlign);W=(g.horizontalLineContentHeight-L[1]*d.scale)*Q}return{rect:A,metrics:q,baselineOffset:W,imageOffset:(l?L[0]:L[1])*d.scale-Wo*f}}function UK(d,l,f,g){if(g===0)return;const _=d[f],C=(d[f].x+_.metrics.advance*_.scale)*g;for(let A=l;A<=f;A++)d[A].x-=C}function VK(d,l,f){const{horizontalAlign:g,verticalAlign:_}=rw(f),C=l[0]-d.displaySize[0]*g,A=l[1]-d.displaySize[1]*_;return{image:d,top:A,bottom:A+d.displaySize[1],left:C,right:C+d.displaySize[0]}}function GO(d){var l,f;let g=d.left,_=d.top,C=d.right-g,A=d.bottom-_;const L=(l=d.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",q=(f=d.image.textFitHeight)!==null&&f!==void 0?f:"stretchOrShrink",W=(d.image.content[2]-d.image.content[0])/(d.image.content[3]-d.image.content[1]);if(q==="proportional"){if(L==="stretchOnly"&&C/A<W||L==="proportional"){const Q=Math.ceil(A*W);g*=Q/C,C=Q}}else if(L==="proportional"&&q==="stretchOnly"&&W!==0&&C/A>W){const Q=Math.ceil(C/W);_*=Q/A,A=Q}return{x1:g,y1:_,x2:g+C,y2:_+A}}function HO(d,l,f,g,_,C){const A=d.image;let L;if(A.content){const He=A.content,it=A.pixelRatio||1;L=[He[0]/it,He[1]/it,A.displaySize[0]-He[2]/it,A.displaySize[1]-He[3]/it]}const q=l.left*C,W=l.right*C;let Q,ie,ye,we;f==="width"||f==="both"?(we=_[0]+q-g[3],ie=_[0]+W+g[1]):(we=_[0]+(q+W-A.displaySize[0])/2,ie=we+A.displaySize[0]);const Se=l.top*C,Re=l.bottom*C;return f==="height"||f==="both"?(Q=_[1]+Se-g[0],ye=_[1]+Re+g[2]):(Q=_[1]+(Se+Re-A.displaySize[1])/2,ye=Q+A.displaySize[1]),{image:A,top:Q,right:ie,bottom:ye,left:we,collisionPadding:L}}const qf=128,Ih=32640;function WO(d,l){const{expression:f}=l;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new fn(d+1))};if(f.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:_}=f;let C=0;for(;C<g.length&&g[C]<=d;)C++;C=Math.max(0,C-1);let A=C;for(;A<g.length&&g[A]<d+1;)A++;A=Math.min(g.length-1,A);const L=g[C],q=g[A];return f.kind==="composite"?{kind:"composite",minZoom:L,maxZoom:q,interpolationType:_}:{kind:"camera",minZoom:L,maxZoom:q,minSize:f.evaluate(new fn(L)),maxSize:f.evaluate(new fn(q)),interpolationType:_}}}function nw(d,l,f){let g="never";const _=d.get(l);return _?g=_:d.get(f)&&(g="always"),g}const GK=my.VectorTileFeature.types,HK=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pb(d,l,f,g,_,C,A,L,q,W,Q,ie,ye){const we=L?Math.min(Ih,Math.round(L[0])):0,Se=L?Math.min(Ih,Math.round(L[1])):0;d.emplaceBack(l,f,Math.round(32*g),Math.round(32*_),C,A,(we<<1)+(q?1:0),Se,16*W,16*Q,256*ie,256*ye)}function iw(d,l,f){d.emplaceBack(l.x,l.y,f),d.emplaceBack(l.x,l.y,f),d.emplaceBack(l.x,l.y,f),d.emplaceBack(l.x,l.y,f)}function WK(d){for(const l of d.sections)if(Qr(l.text))return!0;return!1}class aw{constructor(l){this.layoutVertexArray=new Zn,this.indexArray=new Ei,this.programConfigurations=l,this.segments=new si,this.dynamicLayoutVertexArray=new fi,this.opacityVertexArray=new ra,this.hasVisibleVertices=!1,this.placedSymbolArray=new Xe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,f,g,_){this.isEmpty()||(g&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,PK.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,TK.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,HK,!0),this.opacityVertexBuffer.itemSize=1),(g||_)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}lt("SymbolBuffers",aw);class ow{constructor(l,f,g){this.layoutVertexArray=new l,this.layoutAttributes=f,this.indexArray=new g,this.segments=new si,this.collisionVertexArray=new Li}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,IK.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}lt("CollisionBuffers",ow);class Kp{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((A=>A.id)),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=WO(this.zoom,f["text-size"]),this.iconSizeData=WO(this.zoom,f["icon-size"]);const g=this.layers[0].layout,_=g.get("symbol-sort-key"),C=g.get("symbol-z-order");this.canOverlap=nw(g,"text-overlap","text-allow-overlap")!=="never"||nw(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map((A=>u.an[A]))),this.stateDependentLayerIds=this.layers.filter((A=>A.isStateDependent())).map((A=>A.id)),this.sourceID=l.sourceID}createArrays(){this.text=new aw(new ef(this.layers,this.zoom,(l=>/^text/.test(l)))),this.icon=new aw(new ef(this.layers,this.zoom,(l=>/^icon/.test(l)))),this.glyphOffsetArray=new dt,this.lineVertexArray=new Et,this.symbolInstances=new wt,this.textAnchorOffsets=new ft}calculateGlyphDependencies(l,f,g,_,C){for(let A=0;A<l.length;A++)if(f[l.charCodeAt(A)]=!0,(g||_)&&C){const L=vy[l.charAt(A)];L&&(f[L.charCodeAt(0)]=!0)}}populate(l,f,g){const _=this.layers[0],C=_.layout,A=C.get("text-font"),L=C.get("text-field"),q=C.get("icon-image"),W=(L.value.kind!=="constant"||L.value.value instanceof Jr&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),Q=q.value.kind!=="constant"||!!q.value.value||Object.keys(q.parameters).length>0,ie=C.get("symbol-sort-key");if(this.features=[],!W&&!Q)return;const ye=f.iconDependencies,we=f.glyphDependencies,Se=f.availableImages,Re=new fn(this.zoom,{globalState:this.globalState});for(const{feature:He,id:it,index:Dt,sourceLayerIndex:yt}of l){const be=_._featureFilter.needGeometry,Ve=Cd(He,be);if(!_._featureFilter.filter(Re,Ve,g))continue;let St,rr;if(be||(Ve.geometry=Ed(He)),W){const cr=_.getValueAndResolveTokens("text-field",Ve,g,Se),dr=Jr.factory(cr),jr=this.hasRTLText=this.hasRTLText||WK(dr);(!jr||Zi.getRTLTextPluginStatus()==="unavailable"||jr&&Zi.isParsed())&&(St=RK(dr,_,Ve))}if(Q){const cr=_.getValueAndResolveTokens("icon-image",Ve,g,Se);rr=cr instanceof Ta?cr:Ta.fromString(cr)}if(!St&&!rr)continue;const Mr=this.sortFeaturesByKey?ie.evaluate(Ve,{},g):void 0;if(this.features.push({id:it,text:St,icon:rr,index:Dt,sourceLayerIndex:yt,geometry:Ve.geometry,properties:He.properties,type:GK[He.type],sortKey:Mr}),rr&&(ye[rr.name]=!0),St){const cr=A.evaluate(Ve,{},g).join(","),dr=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.an.vertical)>=0;for(const jr of St.sections)if(jr.image)ye[jr.image.name]=!0;else{const Or=Er(St.toString()),$r=jr.fontStack||cr,mr=we[$r]=we[$r]||{};this.calculateGlyphDependencies(jr.text,mr,dr,this.allowVerticalPlacement,Or)}}}C.get("symbol-placement")==="line"&&(this.features=(function(He){const it={},Dt={},yt=[];let be=0;function Ve(cr){yt.push(He[cr]),be++}function St(cr,dr,jr){const Or=Dt[cr];return delete Dt[cr],Dt[dr]=Or,yt[Or].geometry[0].pop(),yt[Or].geometry[0]=yt[Or].geometry[0].concat(jr[0]),Or}function rr(cr,dr,jr){const Or=it[dr];return delete it[dr],it[cr]=Or,yt[Or].geometry[0].shift(),yt[Or].geometry[0]=jr[0].concat(yt[Or].geometry[0]),Or}function Mr(cr,dr,jr){const Or=jr?dr[0][dr[0].length-1]:dr[0][0];return`${cr}:${Or.x}:${Or.y}`}for(let cr=0;cr<He.length;cr++){const dr=He[cr],jr=dr.geometry,Or=dr.text?dr.text.toString():null;if(!Or){Ve(cr);continue}const $r=Mr(Or,jr),mr=Mr(Or,jr,!0);if($r in Dt&&mr in it&&Dt[$r]!==it[mr]){const on=rr($r,mr,jr),Tn=St($r,mr,yt[on].geometry);delete it[$r],delete Dt[mr],Dt[Mr(Or,yt[Tn].geometry,!0)]=Tn,yt[on].geometry=null}else $r in Dt?St($r,mr,jr):mr in it?rr($r,mr,jr):(Ve(cr),it[$r]=be-1,Dt[mr]=be-1)}return yt.filter((cr=>cr.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((He,it)=>He.sortKey-it.sortKey))}update(l,f,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,f,this.layers,g),this.icon.programConfigurations.updatePaintArrays(l,f,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,f){const g=this.lineVertexArray.length;if(l.segment!==void 0){let _=l.dist(f[l.segment+1]),C=l.dist(f[l.segment]);const A={};for(let L=l.segment+1;L<f.length;L++)A[L]={x:f[L].x,y:f[L].y,tileUnitDistanceFromAnchor:_},L<f.length-1&&(_+=f[L+1].dist(f[L]));for(let L=l.segment||0;L>=0;L--)A[L]={x:f[L].x,y:f[L].y,tileUnitDistanceFromAnchor:C},L>0&&(C+=f[L-1].dist(f[L]));for(let L=0;L<f.length;L++){const q=A[L];this.lineVertexArray.emplaceBack(q.x,q.y,q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(l,f,g,_,C,A,L,q,W,Q,ie,ye){const we=l.indexArray,Se=l.layoutVertexArray,Re=l.segments.prepareSegment(4*f.length,Se,we,this.canOverlap?A.sortKey:void 0),He=this.glyphOffsetArray.length,it=Re.vertexLength,Dt=this.allowVerticalPlacement&&L===u.an.vertical?Math.PI/2:0,yt=A.text&&A.text.sections;for(let be=0;be<f.length;be++){const{tl:Ve,tr:St,bl:rr,br:Mr,tex:cr,pixelOffsetTL:dr,pixelOffsetBR:jr,minFontScaleX:Or,minFontScaleY:$r,glyphOffset:mr,isSDF:on,sectionIndex:Tn}=f[be],Cn=Re.vertexLength,hn=mr[1];pb(Se,q.x,q.y,Ve.x,hn+Ve.y,cr.x,cr.y,g,on,dr.x,dr.y,Or,$r),pb(Se,q.x,q.y,St.x,hn+St.y,cr.x+cr.w,cr.y,g,on,jr.x,dr.y,Or,$r),pb(Se,q.x,q.y,rr.x,hn+rr.y,cr.x,cr.y+cr.h,g,on,dr.x,jr.y,Or,$r),pb(Se,q.x,q.y,Mr.x,hn+Mr.y,cr.x+cr.w,cr.y+cr.h,g,on,jr.x,jr.y,Or,$r),iw(l.dynamicLayoutVertexArray,q,Dt),we.emplaceBack(Cn,Cn+2,Cn+1),we.emplaceBack(Cn+1,Cn+2,Cn+3),Re.vertexLength+=4,Re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(mr[0]),be!==f.length-1&&Tn===f[be+1].sectionIndex||l.programConfigurations.populatePaintArrays(Se.length,A,A.index,{},ye,yt&&yt[Tn])}l.placedSymbolArray.emplaceBack(q.x,q.y,He,this.glyphOffsetArray.length-He,it,W,Q,q.segment,g?g[0]:0,g?g[1]:0,_[0],_[1],L,0,!1,0,ie)}_addCollisionDebugVertex(l,f,g,_,C,A){return f.emplaceBack(0,0),l.emplaceBack(g.x,g.y,_,C,Math.round(A.x),Math.round(A.y))}addCollisionDebugVertices(l,f,g,_,C,A,L){const q=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),W=q.vertexLength,Q=C.layoutVertexArray,ie=C.collisionVertexArray,ye=L.anchorX,we=L.anchorY;this._addCollisionDebugVertex(Q,ie,A,ye,we,new P(l,f)),this._addCollisionDebugVertex(Q,ie,A,ye,we,new P(g,f)),this._addCollisionDebugVertex(Q,ie,A,ye,we,new P(g,_)),this._addCollisionDebugVertex(Q,ie,A,ye,we,new P(l,_)),q.vertexLength+=4;const Se=C.indexArray;Se.emplaceBack(W,W+1),Se.emplaceBack(W+1,W+2),Se.emplaceBack(W+2,W+3),Se.emplaceBack(W+3,W),q.primitiveLength+=4}addDebugCollisionBoxes(l,f,g,_){for(let C=l;C<f;C++){const A=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(A.x1,A.y1,A.x2,A.y2,_?this.textCollisionBox:this.iconCollisionBox,A.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ow(ki,LO.members,_i),this.iconCollisionBox=new ow(ki,LO.members,_i);for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(l,f,g,_,C,A,L,q,W){const Q={};for(let ie=f;ie<g;ie++){const ye=l.get(ie);Q.textBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},Q.textFeatureIndex=ye.featureIndex;break}for(let ie=_;ie<C;ie++){const ye=l.get(ie);Q.verticalTextBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},Q.verticalTextFeatureIndex=ye.featureIndex;break}for(let ie=A;ie<L;ie++){const ye=l.get(ie);Q.iconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},Q.iconFeatureIndex=ye.featureIndex;break}for(let ie=q;ie<W;ie++){const ye=l.get(ie);Q.verticalIconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},Q.verticalIconFeatureIndex=ye.featureIndex;break}return Q}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){const g=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,f){const g=l.placedSymbolArray.get(f),_=g.vertexStartIndex+4*g.numGlyphs;for(let C=g.vertexStartIndex;C<_;C+=4)l.indexArray.emplaceBack(C,C+2,C+1),l.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const f=Math.sin(l),g=Math.cos(l),_=[],C=[],A=[];for(let L=0;L<this.symbolInstances.length;++L){A.push(L);const q=this.symbolInstances.get(L);_.push(0|Math.round(f*q.anchorX+g*q.anchorY)),C.push(q.featureIndex)}return A.sort(((L,q)=>_[L]-_[q]||C[q]-C[L])),A}addToSortKeyRanges(l,f){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===f?g.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const f of this.symbolInstanceIndexes){const g=this.symbolInstances.get(f);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach(((_,C,A)=>{_>=0&&A.indexOf(_)===C&&this.addIndicesForPlacedSymbol(this.text,_)})),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ZO,KO;lt("SymbolBucket",Kp,{omit:["layers","collisionBoxArray","features","compareText"]}),Kp.MAX_GLYPHS=65535,Kp.addDynamicAttributes=iw;var sw={get paint(){return KO=KO||new la({"icon-opacity":new Yr(vt.paint_symbol["icon-opacity"]),"icon-color":new Yr(vt.paint_symbol["icon-color"]),"icon-halo-color":new Yr(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yr(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yr(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new Fr(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fr(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yr(vt.paint_symbol["text-opacity"]),"text-color":new Yr(vt.paint_symbol["text-color"],{runtimeType:An,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Yr(vt.paint_symbol["text-halo-color"]),"text-halo-width":new Yr(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new Yr(vt.paint_symbol["text-halo-blur"]),"text-translate":new Fr(vt.paint_symbol["text-translate"]),"text-translate-anchor":new Fr(vt.paint_symbol["text-translate-anchor"])})},get layout(){return ZO=ZO||new la({"symbol-placement":new Fr(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new Fr(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fr(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yr(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fr(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fr(vt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Fr(vt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Fr(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fr(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fr(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yr(vt.layout_symbol["icon-size"]),"icon-text-fit":new Fr(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fr(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yr(vt.layout_symbol["icon-image"]),"icon-rotate":new Yr(vt.layout_symbol["icon-rotate"]),"icon-padding":new Yr(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new Fr(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new Yr(vt.layout_symbol["icon-offset"]),"icon-anchor":new Yr(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fr(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fr(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fr(vt.layout_symbol["text-rotation-alignment"]),"text-field":new Yr(vt.layout_symbol["text-field"]),"text-font":new Yr(vt.layout_symbol["text-font"]),"text-size":new Yr(vt.layout_symbol["text-size"]),"text-max-width":new Yr(vt.layout_symbol["text-max-width"]),"text-line-height":new Fr(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new Yr(vt.layout_symbol["text-letter-spacing"]),"text-justify":new Yr(vt.layout_symbol["text-justify"]),"text-radial-offset":new Yr(vt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Fr(vt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Yr(vt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Yr(vt.layout_symbol["text-anchor"]),"text-max-angle":new Fr(vt.layout_symbol["text-max-angle"]),"text-writing-mode":new Fr(vt.layout_symbol["text-writing-mode"]),"text-rotate":new Yr(vt.layout_symbol["text-rotate"]),"text-padding":new Fr(vt.layout_symbol["text-padding"]),"text-keep-upright":new Fr(vt.layout_symbol["text-keep-upright"]),"text-transform":new Yr(vt.layout_symbol["text-transform"]),"text-offset":new Yr(vt.layout_symbol["text-offset"]),"text-allow-overlap":new Fr(vt.layout_symbol["text-allow-overlap"]),"text-overlap":new Fr(vt.layout_symbol["text-overlap"]),"text-ignore-placement":new Fr(vt.layout_symbol["text-ignore-placement"]),"text-optional":new Fr(vt.layout_symbol["text-optional"])})}};class XO{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:xn,this.defaultValue=l}evaluate(l){if(l.formattedSection){const f=this.defaultValue.property.overrides;if(f&&f.hasOverride(l.formattedSection))return f.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}lt("FormatSectionOverride",XO,{omit:["defaultValue"]});class mb extends Ui{constructor(l){super(l,sw)}recalculate(l,f){if(super.recalculate(l,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const _=[];for(const C of g)_.indexOf(C)<0&&_.push(C);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,f,g,_){const C=this.layout.get(l).evaluate(f,{},g,_),A=this._unevaluatedLayout._values[l];return A.isDataDriven()||bh(A.value)||!C?C:(function(L,q){return q.replace(/{([^{}]+)}/g,((W,Q)=>L&&Q in L?String(L[Q]):""))})(f.properties,C)}createBucket(l){return new Kp(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of sw.paint.overridableProperties){if(!mb.hasPaintOverride(this.layout,l))continue;const f=this.paint.get(l),g=new XO(f),_=new Uc(g,f.property.specification);let C=null;C=f.value.kind==="constant"||f.value.kind==="source"?new Vc("source",_):new xh("composite",_,f.value.zoomStops),this.paint._values[l]=new ma(f.property,C,f.parameters)}}_handleOverridablePaintPropertyUpdate(l,f,g){return!(!this.layout||f.isDataDriven()||g.isDataDriven())&&mb.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,f){const g=l.get("text-field"),_=sw.paint.properties[f];let C=!1;const A=L=>{for(const q of L)if(_.overrides&&_.overrides.hasOverride(q))return void(C=!0)};if(g.value.kind==="constant"&&g.value.value instanceof Jr)A(g.value.value.sections);else if(g.value.kind==="source"){const L=W=>{C||(W instanceof Sa&&bn(W.value)===Ri?A(W.value.sections):W instanceof as?A(W.sections):W.eachChild(L))},q=g.value;q._styleExpression&&L(q._styleExpression.expression)}return C}}let YO;var ZK={get paint(){return YO=YO||new la({"background-color":new Fr(vt.paint_background["background-color"]),"background-pattern":new Bi(vt.paint_background["background-pattern"]),"background-opacity":new Fr(vt.paint_background["background-opacity"])})}};class KK extends Ui{constructor(l){super(l,ZK)}}let JO;var XK={get paint(){return JO=JO||new la({"raster-opacity":new Fr(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fr(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fr(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fr(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new Fr(vt.paint_raster["raster-saturation"]),"raster-contrast":new Fr(vt.paint_raster["raster-contrast"]),"raster-resampling":new Fr(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new Fr(vt.paint_raster["raster-fade-duration"])})}};class YK extends Ui{constructor(l){super(l,XK)}}class JK extends Ui{constructor(l){super(l,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class QK{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const eX={once:!0},lw=63710088e-1;class Mh{constructor(l,f){if(isNaN(l)||isNaN(f))throw new Error(`Invalid LngLat object: (${l}, ${f})`);if(this.lng=+l,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Mh(nt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const f=Math.PI/180,g=this.lat*f,_=l.lat*f,C=Math.sin(g)*Math.sin(_)+Math.cos(g)*Math.cos(_)*Math.cos((l.lng-this.lng)*f);return lw*Math.acos(Math.min(C,1))}static convert(l){if(l instanceof Mh)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Mh(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Mh(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const QO=2*Math.PI*lw;function ek(d){return QO*Math.cos(d*Math.PI/180)}function tk(d){return(180+d)/360}function rk(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function nk(d,l){return d/ek(l)}function uw(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function ik(d,l){return d*ek(uw(l))}class _y{constructor(l,f,g=0){this.x=+l,this.y=+f,this.z=+g}static fromLngLat(l,f=0){const g=Mh.convert(l);return new _y(tk(g.lng),rk(g.lat),nk(f,g.lat))}toLngLat(){return new Mh(360*this.x-180,uw(this.y))}toAltitude(){return ik(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/QO*(l=uw(this.y),1/Math.cos(l*Math.PI/180));var l}}function ak(d,l,f){var g=2*Math.PI*6378137/256/Math.pow(2,f);return[d*g-2*Math.PI*6378137/2,l*g-2*Math.PI*6378137/2]}class cw{constructor(l,f,g){if(!(function(_,C,A){return!(_<0||_>25||A<0||A>=Math.pow(2,_)||C<0||C>=Math.pow(2,_))})(l,f,g))throw new Error(`x=${f}, y=${g}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=f,this.y=g,this.key=Xp(0,l,l,f,g)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,f,g){const _=(A=this.y,L=this.z,q=ak(256*(C=this.x),256*(A=Math.pow(2,L)-A-1),L),W=ak(256*(C+1),256*(A+1),L),q[0]+","+q[1]+","+W[0]+","+W[1]);var C,A,L,q,W;const Q=(function(ie,ye,we){let Se,Re="";for(let He=ie;He>0;He--)Se=1<<He-1,Re+=(ye&Se?1:0)+(we&Se?2:0);return Re})(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,Q).replace(/{bbox-epsg-3857}/g,_)}isChildOf(l){const f=this.z-l.z;return f>0&&l.x===this.x>>f&&l.y===this.y>>f}getTilePoint(l){const f=Math.pow(2,this.z);return new P((l.x*f-this.x)*fe,(l.y*f-this.y)*fe)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ok{constructor(l,f){this.wrap=l,this.canonical=f,this.key=Xp(l,f.z,f.z,f.x,f.y)}}class vu{constructor(l,f,g,_,C){if(this.terrainRttPosMatrix32f=null,l<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${g}`);this.overscaledZ=l,this.wrap=f,this.canonical=new cw(g,+_,+C),this.key=Xp(f,l,g,_,C)}clone(){return new vu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-l;return l>this.canonical.z?new vu(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vu(l,this.wrap,l,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(l,f){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-l;return l>this.canonical.z?Xp(this.wrap*+f,l,this.canonical.z,this.canonical.x,this.canonical.y):Xp(this.wrap*+f,l,l,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(l){if(l.wrap!==this.wrap)return!1;const f=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>f&&l.canonical.y===this.canonical.y>>f}children(l){if(this.overscaledZ>=l)return[new vu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const f=this.canonical.z+1,g=2*this.canonical.x,_=2*this.canonical.y;return[new vu(f,this.wrap,f,g,_),new vu(f,this.wrap,f,g+1,_),new vu(f,this.wrap,f,g,_+1),new vu(f,this.wrap,f,g+1,_+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new vu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new vu(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ok(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new _y(l.x-this.wrap,l.y))}}function Xp(d,l,f,g,_){(d*=2)<0&&(d=-1*d-1);const C=1<<f;return(C*C*d+C*_+g).toString(36)+f.toString(36)+l.toString(36)}lt("CanonicalTileID",cw),lt("OverscaledTileID",vu,{omit:["terrainRttPosMatrix32f"]});class Td{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const f=new Td;return f.extend(l(new P(this.minX,this.minY))),f.extend(l(new P(this.maxX,this.minY))),f.extend(l(new P(this.minX,this.maxY))),f.extend(l(new P(this.maxX,this.maxY))),f}static fromPoints(l){const f=new Td;for(const g of l)f.extend(g);return f}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class sk{constructor(l){this._stringToNumber={},this._numberToString=[];for(let f=0;f<l.length;f++){const g=l[f];this._stringToNumber[g]=f,this._numberToString[f]=g}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class lk{constructor(l,f,g,_,C){this.type="Feature",this._vectorTileFeature=l,l._z=f,l._x=g,l._y=_,this.properties=l.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(l[f]=this[f]);return l}}class uk{constructor(l,f){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Je(fe,16,0),this.grid3D=new Je(fe,16,0),this.featureIndexArray=new ir,this.promoteId=f}insert(l,f,g,_,C,A){const L=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,_,C);const q=A?this.grid3D:this.grid;for(let W=0;W<f.length;W++){const Q=f[W],ie=[1/0,1/0,-1/0,-1/0];for(let ye=0;ye<Q.length;ye++){const we=Q[ye];ie[0]=Math.min(ie[0],we.x),ie[1]=Math.min(ie[1],we.y),ie[2]=Math.max(ie[2],we.x),ie[3]=Math.max(ie[3],we.y)}ie[0]<fe&&ie[1]<fe&&ie[2]>=0&&ie[3]>=0&&q.insert(L,ie[0],ie[1],ie[2],ie[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new my.VectorTile(new Q2(this.rawTileData)).layers,this.sourceLayerCoder=new sk(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,f,g,_){this.loadVTLayers();const C=l.params,A=fe/l.tileSize/l.scale,L=nl(C.filter),q=l.queryGeometry,W=l.queryPadding*A,Q=Td.fromPoints(q),ie=this.grid.query(Q.minX-W,Q.minY-W,Q.maxX+W,Q.maxY+W),ye=Td.fromPoints(l.cameraQueryGeometry).expandBy(W),we=this.grid3D.query(ye.minX,ye.minY,ye.maxX,ye.maxY,((He,it,Dt,yt)=>(function(be,Ve,St,rr,Mr){for(const dr of be)if(Ve<=dr.x&&St<=dr.y&&rr>=dr.x&&Mr>=dr.y)return!0;const cr=[new P(Ve,St),new P(Ve,Mr),new P(rr,Mr),new P(rr,St)];if(be.length>2){for(const dr of cr)if(Vp(be,dr))return!0}for(let dr=0;dr<be.length-1;dr++)if($Z(be[dr],be[dr+1],cr))return!0;return!1})(l.cameraQueryGeometry,He-W,it-W,Dt+W,yt+W)));for(const He of we)ie.push(He);ie.sort(tX);const Se={};let Re;for(let He=0;He<ie.length;He++){const it=ie[He];if(it===Re)continue;Re=it;const Dt=this.featureIndexArray.get(it);let yt=null;this.loadMatchingFeature(Se,Dt.bucketIndex,Dt.sourceLayerIndex,Dt.featureIndex,L,C.layers,C.availableImages,f,g,_,((be,Ve,St)=>(yt||(yt=Ed(be)),Ve.queryIntersectsFeature({queryGeometry:q,feature:be,featureState:St,geometry:yt,zoom:this.z,transform:l.transform,pixelsToTileUnits:A,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation}))))}return Se}loadMatchingFeature(l,f,g,_,C,A,L,q,W,Q,ie){const ye=this.bucketLayerIDs[f];if(A&&!ye.some((He=>A.has(He))))return;const we=this.sourceLayerCoder.decode(g),Se=this.vtLayers[we].feature(_);if(C.needGeometry){const He=Cd(Se,!0);if(!C.filter(new fn(this.tileID.overscaledZ),He,this.tileID.canonical))return}else if(!C.filter(new fn(this.tileID.overscaledZ),Se))return;const Re=this.getId(Se,we);for(let He=0;He<ye.length;He++){const it=ye[He];if(A&&!A.has(it))continue;const Dt=q[it];if(!Dt)continue;let yt={};Re&&Q&&(yt=Q.getState(Dt.sourceLayer||"_geojsonTileLayer",Re));const be=Nt({},W[it]);be.paint=ck(be.paint,Dt.paint,Se,yt,L),be.layout=ck(be.layout,Dt.layout,Se,yt,L);const Ve=!ie||ie(Se,Dt,yt);if(!Ve)continue;const St=new lk(Se,this.z,this.x,this.y,Re);St.layer=be;let rr=l[it];rr===void 0&&(rr=l[it]=[]),rr.push({featureIndex:_,feature:St,intersectionZ:Ve})}}lookupSymbolFeatures(l,f,g,_,C,A,L,q){const W={};this.loadVTLayers();const Q=nl(C);for(const ie of l)this.loadMatchingFeature(W,g,_,ie,Q,A,L,q,f);return W}hasLayer(l){for(const f of this.bucketLayerIDs)for(const g of f)if(l===g)return!0;return!1}getId(l,f){var g;let _=l.id;return this.promoteId&&(_=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof _=="boolean"&&(_=Number(_)),_===void 0&&(!((g=l.properties)===null||g===void 0)&&g.cluster)&&this.promoteId&&(_=Number(l.properties.cluster_id))),_}}function ck(d,l,f,g,_){return It(d,((C,A)=>{const L=l instanceof Ra?l.get(A):null;return L&&L.evaluate?L.evaluate(f,g,_):L}))}function tX(d,l){return l-d}function fk(d,l,f,g,_){const C=[];for(let A=0;A<d.length;A++){const L=d[A];let q;for(let W=0;W<L.length-1;W++){let Q=L[W],ie=L[W+1];Q.x<l&&ie.x<l||(Q.x<l?Q=new P(l,Q.y+(l-Q.x)/(ie.x-Q.x)*(ie.y-Q.y))._round():ie.x<l&&(ie=new P(l,Q.y+(l-Q.x)/(ie.x-Q.x)*(ie.y-Q.y))._round()),Q.y<f&&ie.y<f||(Q.y<f?Q=new P(Q.x+(f-Q.y)/(ie.y-Q.y)*(ie.x-Q.x),f)._round():ie.y<f&&(ie=new P(Q.x+(f-Q.y)/(ie.y-Q.y)*(ie.x-Q.x),f)._round()),Q.x>=g&&ie.x>=g||(Q.x>=g?Q=new P(g,Q.y+(g-Q.x)/(ie.x-Q.x)*(ie.y-Q.y))._round():ie.x>=g&&(ie=new P(g,Q.y+(g-Q.x)/(ie.x-Q.x)*(ie.y-Q.y))._round()),Q.y>=_&&ie.y>=_||(Q.y>=_?Q=new P(Q.x+(_-Q.y)/(ie.y-Q.y)*(ie.x-Q.x),_)._round():ie.y>=_&&(ie=new P(Q.x+(_-Q.y)/(ie.y-Q.y)*(ie.x-Q.x),_)._round()),q&&Q.equals(q[q.length-1])||(q=[Q],C.push(q)),q.push(ie)))))}}return C}lt("FeatureIndex",uk,{omit:["rawTileData","sourceLayerCoder"]});class Rh extends P{constructor(l,f,g,_){super(l,f),this.angle=g,_!==void 0&&(this.segment=_)}clone(){return new Rh(this.x,this.y,this.angle,this.segment)}}function hk(d,l,f,g,_){if(l.segment===void 0||f===0)return!0;let C=l,A=l.segment+1,L=0;for(;L>-f/2;){if(A--,A<0)return!1;L-=d[A].dist(C),C=d[A]}L+=d[A].dist(d[A+1]),A++;const q=[];let W=0;for(;L<f/2;){const Q=d[A],ie=d[A+1];if(!ie)return!1;let ye=d[A-1].angleTo(Q)-Q.angleTo(ie);for(ye=Math.abs((ye+3*Math.PI)%(2*Math.PI)-Math.PI),q.push({distance:L,angleDelta:ye}),W+=ye;L-q[0].distance>g;)W-=q.shift().angleDelta;if(W>_)return!1;A++,L+=Q.dist(ie)}return!0}function dk(d){let l=0;for(let f=0;f<d.length-1;f++)l+=d[f].dist(d[f+1]);return l}function pk(d,l,f){return d?.6*l*f:0}function mk(d,l){return Math.max(d?d.right-d.left:0,l?l.right-l.left:0)}function rX(d,l,f,g,_,C){const A=pk(f,_,C),L=mk(f,g)*C;let q=0;const W=dk(d)/2;for(let Q=0;Q<d.length-1;Q++){const ie=d[Q],ye=d[Q+1],we=ie.dist(ye);if(q+we>W){const Se=(W-q)/we,Re=Ai.number(ie.x,ye.x,Se),He=Ai.number(ie.y,ye.y,Se),it=new Rh(Re,He,ye.angleTo(ie),Q);return it._round(),!A||hk(d,it,L,A,l)?it:void 0}q+=we}}function nX(d,l,f,g,_,C,A,L,q){const W=pk(g,C,A),Q=mk(g,_),ie=Q*A,ye=d[0].x===0||d[0].x===q||d[0].y===0||d[0].y===q;return l-ie<l/4&&(l=ie+l/4),gk(d,ye?l/2*L%l:(Q/2+2*C)*A*L%l,l,W,f,ie,ye,!1,q)}function gk(d,l,f,g,_,C,A,L,q){const W=C/2,Q=dk(d);let ie=0,ye=l-f,we=[];for(let Se=0;Se<d.length-1;Se++){const Re=d[Se],He=d[Se+1],it=Re.dist(He),Dt=He.angleTo(Re);for(;ye+f<ie+it;){ye+=f;const yt=(ye-ie)/it,be=Ai.number(Re.x,He.x,yt),Ve=Ai.number(Re.y,He.y,yt);if(be>=0&&be<q&&Ve>=0&&Ve<q&&ye-W>=0&&ye+W<=Q){const St=new Rh(be,Ve,Dt,Se);St._round(),g&&!hk(d,St,C,g,_)||we.push(St)}}ie+=it}return L||we.length||A||(we=gk(d,ie/2,f,g,_,C,A,!0,q)),we}function yk(d,l,f,g){const _=[],C=d.image,A=C.pixelRatio,L=C.paddedRect.w-2,q=C.paddedRect.h-2;let W={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};const Q=C.stretchX||[[0,L]],ie=C.stretchY||[[0,q]],ye=(mr,on)=>mr+on[1]-on[0],we=Q.reduce(ye,0),Se=ie.reduce(ye,0),Re=L-we,He=q-Se;let it=0,Dt=we,yt=0,be=Se,Ve=0,St=Re,rr=0,Mr=He;if(C.content&&g){const mr=C.content,on=mr[2]-mr[0],Tn=mr[3]-mr[1];(C.textFitWidth||C.textFitHeight)&&(W=GO(d)),it=gb(Q,0,mr[0]),yt=gb(ie,0,mr[1]),Dt=gb(Q,mr[0],mr[2]),be=gb(ie,mr[1],mr[3]),Ve=mr[0]-it,rr=mr[1]-yt,St=on-Dt,Mr=Tn-be}const cr=W.x1,dr=W.y1,jr=W.x2-cr,Or=W.y2-dr,$r=(mr,on,Tn,Cn)=>{const hn=yb(mr.stretch-it,Dt,jr,cr),hi=vb(mr.fixed-Ve,St,mr.stretch,we),qa=yb(on.stretch-yt,be,Or,dr),Io=vb(on.fixed-rr,Mr,on.stretch,Se),As=yb(Tn.stretch-it,Dt,jr,cr),bu=vb(Tn.fixed-Ve,St,Tn.stretch,we),Pl=yb(Cn.stretch-yt,be,Or,dr),hs=vb(Cn.fixed-rr,Mr,Cn.stretch,Se),ka=new P(hn,qa),Zo=new P(As,qa),ds=new P(As,Pl),ps=new P(hn,Pl),ll=new P(hi/A,Io/A),_u=new P(bu/A,hs/A),Ko=l*Math.PI/180;if(Ko){const Xo=Math.sin(Ko),Yo=Math.cos(Ko),mo=[Yo,-Xo,Xo,Yo];ka._matMult(mo),Zo._matMult(mo),ps._matMult(mo),ds._matMult(mo)}const Tl=mr.stretch+mr.fixed,Mo=on.stretch+on.fixed;return{tl:ka,tr:Zo,bl:ps,br:ds,tex:{x:C.paddedRect.x+1+Tl,y:C.paddedRect.y+1+Mo,w:Tn.stretch+Tn.fixed-Tl,h:Cn.stretch+Cn.fixed-Mo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ll,pixelOffsetBR:_u,minFontScaleX:St/A/jr,minFontScaleY:Mr/A/Or,isSDF:f}};if(g&&(C.stretchX||C.stretchY)){const mr=vk(Q,Re,we),on=vk(ie,He,Se);for(let Tn=0;Tn<mr.length-1;Tn++){const Cn=mr[Tn],hn=mr[Tn+1];for(let hi=0;hi<on.length-1;hi++)_.push($r(Cn,on[hi],hn,on[hi+1]))}}else _.push($r({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:L+1},{fixed:0,stretch:q+1}));return _}function gb(d,l,f){let g=0;for(const _ of d)g+=Math.max(l,Math.min(f,_[1]))-Math.max(l,Math.min(f,_[0]));return g}function vk(d,l,f){const g=[{fixed:-1,stretch:0}];for(const[_,C]of d){const A=g[g.length-1];g.push({fixed:_-A.stretch,stretch:A.stretch}),g.push({fixed:_-A.stretch,stretch:A.stretch+(C-_)})}return g.push({fixed:l+1,stretch:f}),g}function yb(d,l,f,g){return d/l*f+g}function vb(d,l,f,g){return d-l*f/g}lt("Anchor",Rh);class bb{constructor(l,f,g,_,C,A,L,q,W,Q){var ie;if(this.boxStartIndex=l.length,W){let ye=A.top,we=A.bottom;const Se=A.collisionPadding;Se&&(ye-=Se[1],we+=Se[3]);let Re=we-ye;Re>0&&(Re=Math.max(10,Re),this.circleDiameter=Re)}else{const ye=!((ie=A.image)===null||ie===void 0)&&ie.content&&(A.image.textFitWidth||A.image.textFitHeight)?GO(A):{x1:A.left,y1:A.top,x2:A.right,y2:A.bottom};ye.y1=ye.y1*L-q[0],ye.y2=ye.y2*L+q[2],ye.x1=ye.x1*L-q[3],ye.x2=ye.x2*L+q[1];const we=A.collisionPadding;if(we&&(ye.x1-=we[0]*L,ye.y1-=we[1]*L,ye.x2+=we[2]*L,ye.y2+=we[3]*L),Q){const Se=new P(ye.x1,ye.y1),Re=new P(ye.x2,ye.y1),He=new P(ye.x1,ye.y2),it=new P(ye.x2,ye.y2),Dt=Q*Math.PI/180;Se._rotate(Dt),Re._rotate(Dt),He._rotate(Dt),it._rotate(Dt),ye.x1=Math.min(Se.x,Re.x,He.x,it.x),ye.x2=Math.max(Se.x,Re.x,He.x,it.x),ye.y1=Math.min(Se.y,Re.y,He.y,it.y),ye.y2=Math.max(Se.y,Re.y,He.y,it.y)}l.emplaceBack(f.x,f.y,ye.x1,ye.y1,ye.x2,ye.y2,g,_,C)}this.boxEndIndex=l.length}}class iX{constructor(l=[],f=(g,_)=>g<_?-1:g>_?1:0){if(this.data=l,this.length=this.data.length,this.compare=f,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:f,compare:g}=this,_=f[l];for(;l>0;){const C=l-1>>1,A=f[C];if(g(_,A)>=0)break;f[l]=A,l=C}f[l]=_}_down(l){const{data:f,compare:g}=this,_=this.length>>1,C=f[l];for(;l<_;){let A=1+(l<<1);const L=A+1;if(L<this.length&&g(f[L],f[A])<0&&(A=L),g(f[A],C)>=0)break;f[l]=f[A],l=A}f[l]=C}}function aX(d,l=1,f=!1){const g=Td.fromPoints(d[0]),_=Math.min(g.width(),g.height());let C=_/2;const A=new iX([],oX),{minX:L,minY:q,maxX:W,maxY:Q}=g;if(_===0)return new P(L,q);for(let we=L;we<W;we+=_)for(let Se=q;Se<Q;Se+=_)A.push(new Yp(we+C,Se+C,C,d));let ie=(function(we){let Se=0,Re=0,He=0;const it=we[0];for(let Dt=0,yt=it.length,be=yt-1;Dt<yt;be=Dt++){const Ve=it[Dt],St=it[be],rr=Ve.x*St.y-St.x*Ve.y;Re+=(Ve.x+St.x)*rr,He+=(Ve.y+St.y)*rr,Se+=3*rr}return new Yp(Re/Se,He/Se,0,we)})(d),ye=A.length;for(;A.length;){const we=A.pop();(we.d>ie.d||!ie.d)&&(ie=we,f&&console.log("found best %d after %d probes",Math.round(1e4*we.d)/1e4,ye)),we.max-ie.d<=l||(C=we.h/2,A.push(new Yp(we.p.x-C,we.p.y-C,C,d)),A.push(new Yp(we.p.x+C,we.p.y-C,C,d)),A.push(new Yp(we.p.x-C,we.p.y+C,C,d)),A.push(new Yp(we.p.x+C,we.p.y+C,C,d)),ye+=4)}return f&&(console.log(`num probes: ${ye}`),console.log(`best distance: ${ie.d}`)),ie.p}function oX(d,l){return l.max-d.max}function Yp(d,l,f,g){this.p=new P(d,l),this.h=f,this.d=(function(_,C){let A=!1,L=1/0;for(let q=0;q<C.length;q++){const W=C[q];for(let Q=0,ie=W.length,ye=ie-1;Q<ie;ye=Q++){const we=W[Q],Se=W[ye];we.y>_.y!=Se.y>_.y&&_.x<(Se.x-we.x)*(_.y-we.y)/(Se.y-we.y)+we.x&&(A=!A),L=Math.min(L,YR(_,we,Se))}}return(A?1:-1)*Math.sqrt(L)})(this.p,g),this.max=this.d+this.h*Math.SQRT2}var Cs;u.aD=void 0,(Cs=u.aD||(u.aD={}))[Cs.center=1]="center",Cs[Cs.left=2]="left",Cs[Cs.right=3]="right",Cs[Cs.top=4]="top",Cs[Cs.bottom=5]="bottom",Cs[Cs["top-left"]=6]="top-left",Cs[Cs["top-right"]=7]="top-right",Cs[Cs["bottom-left"]=8]="bottom-left",Cs[Cs["bottom-right"]=9]="bottom-right";const fw=Number.POSITIVE_INFINITY;function bk(d,l){return l[1]!==fw?(function(f,g,_){let C=0,A=0;switch(g=Math.abs(g),_=Math.abs(_),f){case"top-right":case"top-left":case"top":A=_-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-_}switch(f){case"top-right":case"bottom-right":case"right":C=-g;break;case"top-left":case"bottom-left":case"left":C=g}return[C,A]})(d,l[0],l[1]):(function(f,g){let _=0,C=0;g<0&&(g=0);const A=g/Math.SQRT2;switch(f){case"top-right":case"top-left":C=A-7;break;case"bottom-right":case"bottom-left":C=7-A;break;case"bottom":C=7-g;break;case"top":C=g-7}switch(f){case"top-right":case"bottom-right":_=-A;break;case"top-left":case"bottom-left":_=A;break;case"left":_=g;break;case"right":_=-g}return[_,C]})(d,l[0])}function _k(d,l,f){var g;const _=d.layout,C=(g=_.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(l,{},f);if(C){const L=C.values,q=[];for(let W=0;W<L.length;W+=2){const Q=q[W]=L[W],ie=L[W+1].map((ye=>ye*Wo));Q.startsWith("top")?ie[1]-=7:Q.startsWith("bottom")&&(ie[1]+=7),q[W+1]=ie}return new dn(q)}const A=_.get("text-variable-anchor");if(A){let L;L=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(l,{},f)*Wo,fw]:_.get("text-offset").evaluate(l,{},f).map((W=>W*Wo));const q=[];for(const W of A)q.push(W,bk(W,L));return new dn(q)}return null}function hw(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sX(d,l,f,g,_,C,A,L,q,W,Q,ie){let ye=C.textMaxSize.evaluate(l,{});ye===void 0&&(ye=A);const we=d.layers[0].layout,Se=we.get("icon-offset").evaluate(l,{},Q),Re=wk(f.horizontal),He=A/24,it=d.tilePixelRatio*He,Dt=d.tilePixelRatio*ye/24,yt=d.tilePixelRatio*L,be=d.tilePixelRatio*we.get("symbol-spacing"),Ve=we.get("text-padding")*d.tilePixelRatio,St=(function(Tn,Cn,hn,hi=1){const qa=Tn.get("icon-padding").evaluate(Cn,{},hn),Io=qa&&qa.values;return[Io[0]*hi,Io[1]*hi,Io[2]*hi,Io[3]*hi]})(we,l,Q,d.tilePixelRatio),rr=we.get("text-max-angle")/180*Math.PI,Mr=we.get("text-rotation-alignment")!=="viewport"&&we.get("symbol-placement")!=="point",cr=we.get("icon-rotation-alignment")==="map"&&we.get("symbol-placement")!=="point",dr=we.get("symbol-placement"),jr=be/2,Or=we.get("icon-text-fit");let $r;g&&Or!=="none"&&(d.allowVerticalPlacement&&f.vertical&&($r=HO(g,f.vertical,Or,we.get("icon-text-fit-padding"),Se,He)),Re&&(g=HO(g,Re,Or,we.get("icon-text-fit-padding"),Se,He)));const mr=Q?ie.line.getGranularityForZoomLevel(Q.z):1,on=(Tn,Cn)=>{Cn.x<0||Cn.x>=fe||Cn.y<0||Cn.y>=fe||(function(hn,hi,qa,Io,As,bu,Pl,hs,ka,Zo,ds,ps,ll,_u,Ko,Tl,Mo,Xo,Yo,mo,ya,gc,Jp,yc,cX){const Qp=hn.addToLineVertexArray(hi,qa);let Id,em,tm,rm,Ak=0,Pk=0,Tk=0,Ik=0,_w=-1,xw=-1;const Uf={};let Mk=sl("");if(hn.allowVerticalPlacement&&Io.vertical){const Ns=hs.layout.get("text-rotate").evaluate(ya,{},yc)+90;tm=new bb(ka,hi,Zo,ds,ps,Io.vertical,ll,_u,Ko,Ns),Pl&&(rm=new bb(ka,hi,Zo,ds,ps,Pl,Mo,Xo,Ko,Ns))}if(As){const Ns=hs.layout.get("icon-rotate").evaluate(ya,{}),xu=hs.layout.get("icon-text-fit")!=="none",Md=yk(As,Ns,Jp,xu),bc=Pl?yk(Pl,Ns,Jp,xu):void 0;em=new bb(ka,hi,Zo,ds,ps,As,Mo,Xo,!1,Ns),Ak=4*Md.length;const Rd=hn.iconSizeData;let tf=null;Rd.kind==="source"?(tf=[qf*hs.layout.get("icon-size").evaluate(ya,{})],tf[0]>Ih&&hr(`${hn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Rd.kind==="composite"&&(tf=[qf*gc.compositeIconSizes[0].evaluate(ya,{},yc),qf*gc.compositeIconSizes[1].evaluate(ya,{},yc)],(tf[0]>Ih||tf[1]>Ih)&&hr(`${hn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),hn.addSymbols(hn.icon,Md,tf,mo,Yo,ya,u.an.none,hi,Qp.lineStartIndex,Qp.lineLength,-1,yc),_w=hn.icon.placedSymbolArray.length-1,bc&&(Pk=4*bc.length,hn.addSymbols(hn.icon,bc,tf,mo,Yo,ya,u.an.vertical,hi,Qp.lineStartIndex,Qp.lineLength,-1,yc),xw=hn.icon.placedSymbolArray.length-1)}const Rk=Object.keys(Io.horizontal);for(const Ns of Rk){const xu=Io.horizontal[Ns];if(!Id){Mk=sl(xu.text);const bc=hs.layout.get("text-rotate").evaluate(ya,{},yc);Id=new bb(ka,hi,Zo,ds,ps,xu,ll,_u,Ko,bc)}const Md=xu.positionedLines.length===1;if(Tk+=xk(hn,hi,xu,bu,hs,Ko,ya,Tl,Qp,Io.vertical?u.an.horizontal:u.an.horizontalOnly,Md?Rk:[Ns],Uf,_w,gc,yc),Md)break}Io.vertical&&(Ik+=xk(hn,hi,Io.vertical,bu,hs,Ko,ya,Tl,Qp,u.an.vertical,["vertical"],Uf,xw,gc,yc));const fX=Id?Id.boxStartIndex:hn.collisionBoxArray.length,hX=Id?Id.boxEndIndex:hn.collisionBoxArray.length,dX=tm?tm.boxStartIndex:hn.collisionBoxArray.length,pX=tm?tm.boxEndIndex:hn.collisionBoxArray.length,mX=em?em.boxStartIndex:hn.collisionBoxArray.length,gX=em?em.boxEndIndex:hn.collisionBoxArray.length,yX=rm?rm.boxStartIndex:hn.collisionBoxArray.length,vX=rm?rm.boxEndIndex:hn.collisionBoxArray.length;let vc=-1;const xb=(Ns,xu)=>Ns&&Ns.circleDiameter?Math.max(Ns.circleDiameter,xu):xu;vc=xb(Id,vc),vc=xb(tm,vc),vc=xb(em,vc),vc=xb(rm,vc);const Ok=vc>-1?1:0;Ok&&(vc*=cX/Wo),hn.glyphOffsetArray.length>=Kp.MAX_GLYPHS&&hr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ya.sortKey!==void 0&&hn.addToSortKeyRanges(hn.symbolInstances.length,ya.sortKey);const bX=_k(hs,ya,yc),[_X,xX]=(function(Ns,xu){const Md=Ns.length,bc=xu?.values;if(bc?.length>0)for(let Rd=0;Rd<bc.length;Rd+=2){const tf=bc[Rd+1];Ns.emplaceBack(u.aD[bc[Rd]],tf[0],tf[1])}return[Md,Ns.length]})(hn.textAnchorOffsets,bX);hn.symbolInstances.emplaceBack(hi.x,hi.y,Uf.right>=0?Uf.right:-1,Uf.center>=0?Uf.center:-1,Uf.left>=0?Uf.left:-1,Uf.vertical||-1,_w,xw,Mk,fX,hX,dX,pX,mX,gX,yX,vX,Zo,Tk,Ik,Ak,Pk,Ok,0,ll,vc,_X,xX)})(d,Cn,Tn,f,g,_,$r,d.layers[0],d.collisionBoxArray,l.index,l.sourceLayerIndex,d.index,it,[Ve,Ve,Ve,Ve],Mr,q,yt,St,cr,Se,l,C,W,Q,A)};if(dr==="line")for(const Tn of fk(l.geometry,0,0,fe,fe)){const Cn=Pd(Tn,mr),hn=nX(Cn,be,rr,f.vertical||Re,g,24,Dt,d.overscaling,fe);for(const hi of hn)Re&&lX(d,Re.text,jr,hi)||on(Cn,hi)}else if(dr==="line-center"){for(const Tn of l.geometry)if(Tn.length>1){const Cn=Pd(Tn,mr),hn=rX(Cn,rr,f.vertical||Re,g,24,Dt);hn&&on(Cn,hn)}}else if(l.type==="Polygon")for(const Tn of qo(l.geometry,0)){const Cn=aX(Tn,16);on(Pd(Tn[0],mr,!0),new Rh(Cn.x,Cn.y,0))}else if(l.type==="LineString")for(const Tn of l.geometry){const Cn=Pd(Tn,mr);on(Cn,new Rh(Cn[0].x,Cn[0].y,0))}else if(l.type==="Point")for(const Tn of l.geometry)for(const Cn of Tn)on([Cn],new Rh(Cn.x,Cn.y,0))}function xk(d,l,f,g,_,C,A,L,q,W,Q,ie,ye,we,Se){const Re=(function(Dt,yt,be,Ve,St,rr,Mr,cr){const dr=Ve.layout.get("text-rotate").evaluate(rr,{})*Math.PI/180,jr=[];for(const Or of yt.positionedLines)for(const $r of Or.positionedGlyphs){if(!$r.rect)continue;const mr=$r.rect||{};let on=4,Tn=!0,Cn=1,hn=0;const hi=(St||cr)&&$r.vertical,qa=$r.metrics.advance*$r.scale/2;if(cr&&yt.verticalizable&&(hn=Or.lineOffset/2-($r.imageName?-(Wo-$r.metrics.width*$r.scale)/2:($r.scale-1)*Wo)),$r.imageName){const Xo=Mr[$r.imageName];Tn=Xo.sdf,Cn=Xo.pixelRatio,on=1/Cn}const Io=St?[$r.x+qa,$r.y]:[0,0];let As=St?[0,0]:[$r.x+qa+be[0],$r.y+be[1]-hn],bu=[0,0];hi&&(bu=As,As=[0,0]);const Pl=$r.metrics.isDoubleResolution?2:1,hs=($r.metrics.left-on)*$r.scale-qa+As[0],ka=(-$r.metrics.top-on)*$r.scale+As[1],Zo=hs+mr.w/Pl*$r.scale/Cn,ds=ka+mr.h/Pl*$r.scale/Cn,ps=new P(hs,ka),ll=new P(Zo,ka),_u=new P(hs,ds),Ko=new P(Zo,ds);if(hi){const Xo=new P(-qa,qa- -17),Yo=-Math.PI/2,mo=12-qa,ya=new P(22-mo,-($r.imageName?mo:0)),gc=new P(...bu);ps._rotateAround(Yo,Xo)._add(ya)._add(gc),ll._rotateAround(Yo,Xo)._add(ya)._add(gc),_u._rotateAround(Yo,Xo)._add(ya)._add(gc),Ko._rotateAround(Yo,Xo)._add(ya)._add(gc)}if(dr){const Xo=Math.sin(dr),Yo=Math.cos(dr),mo=[Yo,-Xo,Xo,Yo];ps._matMult(mo),ll._matMult(mo),_u._matMult(mo),Ko._matMult(mo)}const Tl=new P(0,0),Mo=new P(0,0);jr.push({tl:ps,tr:ll,bl:_u,br:Ko,tex:mr,writingMode:yt.writingMode,glyphOffset:Io,sectionIndex:$r.sectionIndex,isSDF:Tn,pixelOffsetTL:Tl,pixelOffsetBR:Mo,minFontScaleX:0,minFontScaleY:0})}return jr})(0,f,L,_,C,A,g,d.allowVerticalPlacement),He=d.textSizeData;let it=null;He.kind==="source"?(it=[qf*_.layout.get("text-size").evaluate(A,{})],it[0]>Ih&&hr(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):He.kind==="composite"&&(it=[qf*we.compositeTextSizes[0].evaluate(A,{},Se),qf*we.compositeTextSizes[1].evaluate(A,{},Se)],(it[0]>Ih||it[1]>Ih)&&hr(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),d.addSymbols(d.text,Re,it,L,C,A,W,l,q.lineStartIndex,q.lineLength,ye,Se);for(const Dt of Q)ie[Dt]=d.text.placedSymbolArray.length-1;return 4*Re.length}function wk(d){for(const l in d)return d[l];return null}function lX(d,l,f,g){const _=d.compareText;if(l in _){const C=_[l];for(let A=C.length-1;A>=0;A--)if(g.dist(C[A])<f)return!0}else _[l]=[];return _[l].push(g),!1}const Sk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class dw{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[f,g]=new Uint8Array(l,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=g>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const C=Sk[15&g];if(!C)throw new Error("Unrecognized array type.");const[A]=new Uint16Array(l,2,1),[L]=new Uint32Array(l,4,1);return new dw(L,A,C,l)}constructor(l,f=64,g=Float64Array,_){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=g,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const C=Sk.indexOf(this.ArrayType),A=2*l*this.ArrayType.BYTES_PER_ELEMENT,L=l*this.IndexArrayType.BYTES_PER_ELEMENT,q=(8-L%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${g}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+L+q,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+A+L+q),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+L+q,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=l)}add(l,f){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=l,this.coords[this._pos++]=f,g}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return pw(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,f,g,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:A,nodeSize:L}=this,q=[0,C.length-1,0],W=[];for(;q.length;){const Q=q.pop()||0,ie=q.pop()||0,ye=q.pop()||0;if(ie-ye<=L){for(let He=ye;He<=ie;He++){const it=A[2*He],Dt=A[2*He+1];it>=l&&it<=g&&Dt>=f&&Dt<=_&&W.push(C[He])}continue}const we=ye+ie>>1,Se=A[2*we],Re=A[2*we+1];Se>=l&&Se<=g&&Re>=f&&Re<=_&&W.push(C[we]),(Q===0?l<=Se:f<=Re)&&(q.push(ye),q.push(we-1),q.push(1-Q)),(Q===0?g>=Se:_>=Re)&&(q.push(we+1),q.push(ie),q.push(1-Q))}return W}within(l,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:C,nodeSize:A}=this,L=[0,_.length-1,0],q=[],W=g*g;for(;L.length;){const Q=L.pop()||0,ie=L.pop()||0,ye=L.pop()||0;if(ie-ye<=A){for(let He=ye;He<=ie;He++)Ck(C[2*He],C[2*He+1],l,f)<=W&&q.push(_[He]);continue}const we=ye+ie>>1,Se=C[2*we],Re=C[2*we+1];Ck(Se,Re,l,f)<=W&&q.push(_[we]),(Q===0?l-g<=Se:f-g<=Re)&&(L.push(ye),L.push(we-1),L.push(1-Q)),(Q===0?l+g>=Se:f+g>=Re)&&(L.push(we+1),L.push(ie),L.push(1-Q))}return q}}function pw(d,l,f,g,_,C){if(_-g<=f)return;const A=g+_>>1;Ek(d,l,A,g,_,C),pw(d,l,f,g,A-1,1-C),pw(d,l,f,A+1,_,1-C)}function Ek(d,l,f,g,_,C){for(;_>g;){if(_-g>600){const W=_-g+1,Q=f-g+1,ie=Math.log(W),ye=.5*Math.exp(2*ie/3),we=.5*Math.sqrt(ie*ye*(W-ye)/W)*(Q-W/2<0?-1:1);Ek(d,l,f,Math.max(g,Math.floor(f-Q*ye/W+we)),Math.min(_,Math.floor(f+(W-Q)*ye/W+we)),C)}const A=l[2*f+C];let L=g,q=_;for(xy(d,l,g,f),l[2*_+C]>A&&xy(d,l,g,_);L<q;){for(xy(d,l,L,q),L++,q--;l[2*L+C]<A;)L++;for(;l[2*q+C]>A;)q--}l[2*g+C]===A?xy(d,l,g,q):(q++,xy(d,l,q,_)),q<=f&&(g=q+1),f<=q&&(_=q-1)}}function xy(d,l,f,g){mw(d,f,g),mw(l,2*f,2*g),mw(l,2*f+1,2*g+1)}function mw(d,l,f){const g=d[l];d[l]=d[f],d[f]=g}function Ck(d,l,f,g){const _=d-f,C=l-g;return _*_+C*C}var gw;u.cw=void 0,(gw=u.cw||(u.cw={})).create="create",gw.load="load",gw.fullLoad="fullLoad";let _b=null,wy=[];const yw=1e3/60,vw="loadTime",bw="fullLoadTime",uX={mark(d){performance.mark(d)},frame(d){const l=d;_b!=null&&wy.push(l-_b),_b=l},clearMetrics(){_b=null,wy=[],performance.clearMeasures(vw),performance.clearMeasures(bw);for(const d in u.cw)performance.clearMarks(u.cw[d])},getPerformanceMetrics(){performance.measure(vw,u.cw.create,u.cw.load),performance.measure(bw,u.cw.create,u.cw.fullLoad);const d=performance.getEntriesByName(vw)[0].duration,l=performance.getEntriesByName(bw)[0].duration,f=wy.length,g=1/(wy.reduce(((C,A)=>C+A),0)/f/1e3),_=wy.filter((C=>C>yw)).reduce(((C,A)=>C+(A-yw)/yw),0);return{loadTime:d,fullLoadTime:l,fps:g,percentDroppedFrames:_/(f+_)*100,totalFrames:f}}};u.$=fe,u.A=B,u.B=function([d,l,f]){return l+=90,l*=Math.PI/180,f*=Math.PI/180,{x:d*Math.cos(l)*Math.sin(f),y:d*Math.sin(l)*Math.sin(f),z:d*Math.cos(f)}},u.C=Ai,u.D=Fr,u.E=Gt,u.F=fn,u.G=Ie,u.H=function(d){if(qe==null){const l=d.navigator?d.navigator.userAgent:null;qe=!!d.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return qe},u.I=ew,u.J=class{constructor(d,l){this.target=d,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new QK((()=>this.process())),this.subscription=ur(this.target,"message",(f=>this.receive(f)),!1),this.globalScope=Qt(self)?d:window}registerMessageHandler(d,l){this.messageHandlers[d]=l}sendAsync(d,l){return new Promise(((f,g)=>{const _=Math.round(1e18*Math.random()).toString(36).substring(0,10),C=l?ur(l.signal,"abort",(()=>{C?.unsubscribe(),delete this.resolveRejects[_];const q={id:_,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(q)}),eX):null;this.resolveRejects[_]={resolve:q=>{C?.unsubscribe(),f(q)},reject:q=>{C?.unsubscribe(),g(q)}};const A=[],L=Object.assign(Object.assign({},d),{id:_,sourceMapId:this.mapId,origin:location.origin,data:Xt(d.data,A)});this.target.postMessage(L,{transfer:A})}))}receive(d){const l=d.data,f=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[f];const g=this.abortControllers[f];return delete this.abortControllers[f],void(g&&g.abort())}if(Qt(self)||l.mustQueue)return this.tasks[f]=l,this.taskQueue.push(f),void this.invoker.trigger();this.processTask(f,l)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),l=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(d,l)}processTask(d,l){return a(this,void 0,void 0,(function*(){if(l.type==="<response>"){const _=this.resolveRejects[d];return delete this.resolveRejects[d],_?void(l.error?_.reject(gr(l.error)):_.resolve(gr(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const f=gr(l.data),g=new AbortController;this.abortControllers[d]=g;try{const _=yield this.messageHandlers[l.type](l.sourceMapId,f,g);this.completeTask(d,null,_)}catch(_){this.completeTask(d,_)}}))}completeTask(d,l,f){const g=[];delete this.abortControllers[d];const _={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?Xt(l):null,data:Xt(f,g)};this.target.postMessage(_,{transfer:g})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.K=Ae,u.L=function(){var d=new B(16);return B!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},u.M=function(d,l,f){var g,_,C,A,L,q,W,Q,ie,ye,we,Se,Re=f[0],He=f[1],it=f[2];return l===d?(d[12]=l[0]*Re+l[4]*He+l[8]*it+l[12],d[13]=l[1]*Re+l[5]*He+l[9]*it+l[13],d[14]=l[2]*Re+l[6]*He+l[10]*it+l[14],d[15]=l[3]*Re+l[7]*He+l[11]*it+l[15]):(_=l[1],C=l[2],A=l[3],L=l[4],q=l[5],W=l[6],Q=l[7],ie=l[8],ye=l[9],we=l[10],Se=l[11],d[0]=g=l[0],d[1]=_,d[2]=C,d[3]=A,d[4]=L,d[5]=q,d[6]=W,d[7]=Q,d[8]=ie,d[9]=ye,d[10]=we,d[11]=Se,d[12]=g*Re+L*He+ie*it+l[12],d[13]=_*Re+q*He+ye*it+l[13],d[14]=C*Re+W*He+we*it+l[14],d[15]=A*Re+Q*He+Se*it+l[15]),d},u.N=function(d,l,f){var g=f[0],_=f[1],C=f[2];return d[0]=l[0]*g,d[1]=l[1]*g,d[2]=l[2]*g,d[3]=l[3]*g,d[4]=l[4]*_,d[5]=l[5]*_,d[6]=l[6]*_,d[7]=l[7]*_,d[8]=l[8]*C,d[9]=l[9]*C,d[10]=l[10]*C,d[11]=l[11]*C,d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15],d},u.O=function(d,l,f){var g=l[0],_=l[1],C=l[2],A=l[3],L=l[4],q=l[5],W=l[6],Q=l[7],ie=l[8],ye=l[9],we=l[10],Se=l[11],Re=l[12],He=l[13],it=l[14],Dt=l[15],yt=f[0],be=f[1],Ve=f[2],St=f[3];return d[0]=yt*g+be*L+Ve*ie+St*Re,d[1]=yt*_+be*q+Ve*ye+St*He,d[2]=yt*C+be*W+Ve*we+St*it,d[3]=yt*A+be*Q+Ve*Se+St*Dt,d[4]=(yt=f[4])*g+(be=f[5])*L+(Ve=f[6])*ie+(St=f[7])*Re,d[5]=yt*_+be*q+Ve*ye+St*He,d[6]=yt*C+be*W+Ve*we+St*it,d[7]=yt*A+be*Q+Ve*Se+St*Dt,d[8]=(yt=f[8])*g+(be=f[9])*L+(Ve=f[10])*ie+(St=f[11])*Re,d[9]=yt*_+be*q+Ve*ye+St*He,d[10]=yt*C+be*W+Ve*we+St*it,d[11]=yt*A+be*Q+Ve*Se+St*Dt,d[12]=(yt=f[12])*g+(be=f[13])*L+(Ve=f[14])*ie+(St=f[15])*Re,d[13]=yt*_+be*q+Ve*ye+St*He,d[14]=yt*C+be*W+Ve*we+St*it,d[15]=yt*A+be*Q+Ve*Se+St*Dt,d},u.P=P,u.Q=function(d,l){const f={};for(let g=0;g<l.length;g++){const _=l[g];_ in d&&(f[_]=d[_])}return f},u.R=Al,u.S=Mh,u.T=j2,u.U=rk,u.V=tk,u.W=F,u.X=D,u.Y=Ft,u.Z=vu,u._=a,u.a=ve,u.a$=function(d,l,f){return d[0]=l[0]*f,d[1]=l[1]*f,d[2]=l[2]*f,d[3]=l[3]*f,d},u.a0=_y,u.a1=Td,u.a2=25,u.a3=cw,u.a4=d=>{const l=window.document.createElement("video");return l.muted=!0,new Promise((f=>{l.onloadstart=()=>{f(l)};for(const g of d){const _=window.document.createElement("source");Mt(g)||(l.crossOrigin="Anonymous"),_.src=g,l.appendChild(_)}}))},u.a5=qt,u.a6=function(){return kt++},u.a7=Ze,u.a8=Kp,u.a9=nl,u.aA=Wo,u.aB=_e,u.aC=function(d,l,f,g,_=!1){if(!f[0]&&!f[1])return[0,0];const C=_?g==="map"?-d.bearingInRadians:0:g==="viewport"?d.bearingInRadians:0;if(C){const A=Math.sin(C),L=Math.cos(C);f=[f[0]*L-f[1]*A,f[0]*A+f[1]*L]}return[_?f[0]:_e(l,f[0],d.zoom),_?f[1]:_e(l,f[1],d.zoom)]},u.aE=nw,u.aF=hw,u.aG=rw,u.aH=dw,u.aI=ci,u.aJ=ub,u.aK=Jt,u.aL=si,u.aM=Ei,u.aN=nt,u.aO=xr,u.aP=ik,u.aQ=ae,u.aR=G,u.aS=function(d){var l=new B(3);return l[0]=d[0],l[1]=d[1],l[2]=d[2],l},u.aT=function(d,l,f){return d[0]=l[0]-f[0],d[1]=l[1]-f[1],d[2]=l[2]-f[2],d},u.aU=function(d,l){var f=l[0],g=l[1],_=l[2],C=f*f+g*g+_*_;return C>0&&(C=1/Math.sqrt(C)),d[0]=l[0]*C,d[1]=l[1]*C,d[2]=l[2]*C,d},u.aV=se,u.aW=function(d,l){return d[0]*l[0]+d[1]*l[1]+d[2]*l[2]},u.aX=function(d,l,f){return d[0]=l[0]*f[0],d[1]=l[1]*f[1],d[2]=l[2]*f[2],d[3]=l[3]*f[3],d},u.aY=le,u.aZ=function(d,l,f){const g=l[0]*f[0]+l[1]*f[1]+l[2]*f[2];return g===0?null:(-(d[0]*f[0]+d[1]*f[1]+d[2]*f[2])-f[3])/g},u.a_=me,u.aa=Cd,u.ab=lk,u.ac=function(d){const l={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((f,g,_,C)=>{const A=_||C;return l[g]=!A||A.toLowerCase(),""})),l["max-age"]){const f=parseInt(l["max-age"],10);isNaN(f)?delete l["max-age"]:l["max-age"]=f}return l},u.ad=br,u.ae=function(d){return Math.pow(2,d)},u.af=J,u.ag=mt,u.ah=85.051129,u.ai=nk,u.aj=function(d){return Math.log(d)/Math.LN2},u.ak=function(d){var l=d[0],f=d[1];return l*l+f*f},u.al=function(d,l){const f=[];for(const g in d)g in l||f.push(g);return f},u.am=function(d,l){let f=0,g=0;if(d.kind==="constant")g=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:_,minZoom:C,maxZoom:A}=d,L=_?mt(kn.interpolationFactor(_,l,C,A),0,1):0;d.kind==="camera"?g=Ai.number(d.minSize,d.maxSize,L):f=L}return{uSizeT:f,uSize:g}},u.ao=function(d,{uSize:l,uSizeT:f},{lowerSize:g,upperSize:_}){return d.kind==="source"?g/qf:d.kind==="composite"?Ai.number(g/qf,_/qf,f):l},u.ap=function(d,l){var f=l[0],g=l[1],_=l[2],C=l[3],A=l[4],L=l[5],q=l[6],W=l[7],Q=l[8],ie=l[9],ye=l[10],we=l[11],Se=l[12],Re=l[13],He=l[14],it=l[15],Dt=f*L-g*A,yt=f*q-_*A,be=f*W-C*A,Ve=g*q-_*L,St=g*W-C*L,rr=_*W-C*q,Mr=Q*Re-ie*Se,cr=Q*He-ye*Se,dr=Q*it-we*Se,jr=ie*He-ye*Re,Or=ie*it-we*Re,$r=ye*it-we*He,mr=Dt*$r-yt*Or+be*jr+Ve*dr-St*cr+rr*Mr;return mr?(d[0]=(L*$r-q*Or+W*jr)*(mr=1/mr),d[1]=(_*Or-g*$r-C*jr)*mr,d[2]=(Re*rr-He*St+it*Ve)*mr,d[3]=(ye*St-ie*rr-we*Ve)*mr,d[4]=(q*dr-A*$r-W*cr)*mr,d[5]=(f*$r-_*dr+C*cr)*mr,d[6]=(He*be-Se*rr-it*yt)*mr,d[7]=(Q*rr-ye*be+we*yt)*mr,d[8]=(A*Or-L*dr+W*Mr)*mr,d[9]=(g*dr-f*Or-C*Mr)*mr,d[10]=(Se*St-Re*be+it*Dt)*mr,d[11]=(ie*be-Q*St-we*Dt)*mr,d[12]=(L*cr-A*jr-q*Mr)*mr,d[13]=(f*jr-g*cr+_*Mr)*mr,d[14]=(Re*yt-Se*Ve-He*Dt)*mr,d[15]=(Q*Ve-ie*yt+ye*Dt)*mr,d):null},u.aq=Fe,u.ar=function(d){return Math.hypot(d[0],d[1])},u.as=function(d){return d[0]=0,d[1]=0,d},u.at=function(d,l,f){return d[0]=l[0]*f,d[1]=l[1]*f,d},u.au=iw,u.av=Ce,u.aw=function(d,l,f,g){const _=l.y-d.y,C=l.x-d.x,A=g.y-f.y,L=g.x-f.x,q=A*C-L*_;if(q===0)return null;const W=(L*(d.y-f.y)-A*(d.x-f.x))/q;return new P(d.x+W*C,d.y+W*_)},u.ax=fk,u.ay=KR,u.az=function(d){let l=1/0,f=1/0,g=-1/0,_=-1/0;for(const C of d)l=Math.min(l,C.x),f=Math.min(f,C.y),g=Math.max(g,C.x),_=Math.max(_,C.y);return[l,f,g,_]},u.b=rt,u.b$=MK,u.b0=function(d,l){return d[0]*l[0]+d[1]*l[1]+d[2]*l[2]+d[3]},u.b1=ok,u.b2=Xp,u.b3=function(d,l,f,g,_){var C,A=1/Math.tan(l/2);return d[0]=A/f,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=A,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,_!=null&&_!==1/0?(d[10]=(_+g)*(C=1/(g-_)),d[14]=2*_*g*C):(d[10]=-1,d[14]=-2*g),d},u.b4=function(d){var l=new B(16);return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=d[6],l[7]=d[7],l[8]=d[8],l[9]=d[9],l[10]=d[10],l[11]=d[11],l[12]=d[12],l[13]=d[13],l[14]=d[14],l[15]=d[15],l},u.b5=function(d,l,f){var g=Math.sin(f),_=Math.cos(f),C=l[0],A=l[1],L=l[2],q=l[3],W=l[4],Q=l[5],ie=l[6],ye=l[7];return l!==d&&(d[8]=l[8],d[9]=l[9],d[10]=l[10],d[11]=l[11],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15]),d[0]=C*_+W*g,d[1]=A*_+Q*g,d[2]=L*_+ie*g,d[3]=q*_+ye*g,d[4]=W*_-C*g,d[5]=Q*_-A*g,d[6]=ie*_-L*g,d[7]=ye*_-q*g,d},u.b6=function(d,l,f){var g=Math.sin(f),_=Math.cos(f),C=l[4],A=l[5],L=l[6],q=l[7],W=l[8],Q=l[9],ie=l[10],ye=l[11];return l!==d&&(d[0]=l[0],d[1]=l[1],d[2]=l[2],d[3]=l[3],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15]),d[4]=C*_+W*g,d[5]=A*_+Q*g,d[6]=L*_+ie*g,d[7]=q*_+ye*g,d[8]=W*_-C*g,d[9]=Q*_-A*g,d[10]=ie*_-L*g,d[11]=ye*_-q*g,d},u.b7=function(){const d=new Float32Array(16);return J(d),d},u.b8=function(){const d=new Float64Array(16);return J(d),d},u.b9=function(){return new Float64Array(16)},u.bA=function(d){return d[0]=0,d[1]=0,d[2]=0,d},u.bB=function(d,l,f,g){const _=Math.sqrt(d*d+l*l),C=Math.sqrt(f*f+g*g);d/=_,l/=_,f/=C,g/=C;const A=Math.acos(d*f+l*g);return-l*f+d*g>0?A:-A},u.bC=function(d,l){const f=Pe(d,2*Math.PI),g=Pe(l,2*Math.PI);return Math.min(Math.abs(f-g),Math.abs(f-g+2*Math.PI),Math.abs(f-g-2*Math.PI))},u.bD=function(){const d={},l=vt.$version;for(const f in vt.$root){const g=vt.$root[f];if(g.required){let _=null;_=f==="version"?l:g.type==="array"?[]:{},_!=null&&(d[f]=_)}}return d},u.bE=ar,u.bF=tt,u.bG=function d(l,f){if(Array.isArray(l)){if(!Array.isArray(f)||l.length!==f.length)return!1;for(let g=0;g<l.length;g++)if(!d(l[g],f[g]))return!1;return!0}if(typeof l=="object"&&l!==null&&f!==null){if(typeof f!="object"||Object.keys(l).length!==Object.keys(f).length)return!1;for(const g in l)if(!d(l[g],f[g]))return!1;return!0}return l===f},u.bH=function(d){d=d.slice();const l=Object.create(null);for(let f=0;f<d.length;f++)l[d[f].id]=d[f];for(let f=0;f<d.length;f++)"ref"in d[f]&&(d[f]=Tr(d[f],l[d[f].ref]));return d},u.bI=function(d){if(d.type==="custom")return new JK(d);switch(d.type){case"background":return new KK(d);case"circle":return new UZ(d);case"color-relief":return new KZ(d);case"fill":return new cK(d);case"fill-extrusion":return new vK(d);case"heatmap":return new GZ(d);case"hillshade":return new WZ(d);case"line":return new AK(d);case"raster":return new YK(d);case"symbol":return new mb(d)}},u.bJ=Le,u.bK=function(d,l){if(!d)return[{command:"setStyle",args:[l]}];let f=[];try{if(!Ye(d.version,l.version))return[{command:"setStyle",args:[l]}];Ye(d.center,l.center)||f.push({command:"setCenter",args:[l.center]}),Ye(d.state,l.state)||f.push({command:"setGlobalState",args:[l.state]}),Ye(d.centerAltitude,l.centerAltitude)||f.push({command:"setCenterAltitude",args:[l.centerAltitude]}),Ye(d.zoom,l.zoom)||f.push({command:"setZoom",args:[l.zoom]}),Ye(d.bearing,l.bearing)||f.push({command:"setBearing",args:[l.bearing]}),Ye(d.pitch,l.pitch)||f.push({command:"setPitch",args:[l.pitch]}),Ye(d.roll,l.roll)||f.push({command:"setRoll",args:[l.roll]}),Ye(d.sprite,l.sprite)||f.push({command:"setSprite",args:[l.sprite]}),Ye(d.glyphs,l.glyphs)||f.push({command:"setGlyphs",args:[l.glyphs]}),Ye(d.transition,l.transition)||f.push({command:"setTransition",args:[l.transition]}),Ye(d.light,l.light)||f.push({command:"setLight",args:[l.light]}),Ye(d.terrain,l.terrain)||f.push({command:"setTerrain",args:[l.terrain]}),Ye(d.sky,l.sky)||f.push({command:"setSky",args:[l.sky]}),Ye(d.projection,l.projection)||f.push({command:"setProjection",args:[l.projection]});const g={},_=[];(function(A,L,q,W){let Q;for(Q in L=L||{},A=A||{})Object.prototype.hasOwnProperty.call(A,Q)&&(Object.prototype.hasOwnProperty.call(L,Q)||ne(Q,q,W));for(Q in L)Object.prototype.hasOwnProperty.call(L,Q)&&(Object.prototype.hasOwnProperty.call(A,Q)?Ye(A[Q],L[Q])||(A[Q].type==="geojson"&&L[Q].type==="geojson"&&Be(A,L,Q)?ot(q,{command:"setGeoJSONSourceData",args:[Q,L[Q].data]}):de(Q,L,q,W)):jt(Q,L,q))})(d.sources,l.sources,_,g);const C=[];d.layers&&d.layers.forEach((A=>{"source"in A&&g[A.source]?f.push({command:"removeLayer",args:[A.id]}):C.push(A)})),f=f.concat(_),(function(A,L,q){L=L||[];const W=(A=A||[]).map(Lt),Q=L.map(Lt),ie=A.reduce(lr,{}),ye=L.reduce(lr,{}),we=W.slice(),Se=Object.create(null);let Re,He,it,Dt,yt;for(let be=0,Ve=0;be<W.length;be++)Re=W[be],Object.prototype.hasOwnProperty.call(ye,Re)?Ve++:(ot(q,{command:"removeLayer",args:[Re]}),we.splice(we.indexOf(Re,Ve),1));for(let be=0,Ve=0;be<Q.length;be++)Re=Q[Q.length-1-be],we[we.length-1-be]!==Re&&(Object.prototype.hasOwnProperty.call(ie,Re)?(ot(q,{command:"removeLayer",args:[Re]}),we.splice(we.lastIndexOf(Re,we.length-Ve),1)):Ve++,Dt=we[we.length-be],ot(q,{command:"addLayer",args:[ye[Re],Dt]}),we.splice(we.length-be,0,Re),Se[Re]=!0);for(let be=0;be<Q.length;be++)if(Re=Q[be],He=ie[Re],it=ye[Re],!Se[Re]&&!Ye(He,it))if(Ye(He.source,it.source)&&Ye(He["source-layer"],it["source-layer"])&&Ye(He.type,it.type)){for(yt in et(He.layout,it.layout,q,Re,null,"setLayoutProperty"),et(He.paint,it.paint,q,Re,null,"setPaintProperty"),Ye(He.filter,it.filter)||ot(q,{command:"setFilter",args:[Re,it.filter]}),Ye(He.minzoom,it.minzoom)&&Ye(He.maxzoom,it.maxzoom)||ot(q,{command:"setLayerZoomRange",args:[Re,it.minzoom,it.maxzoom]}),He)Object.prototype.hasOwnProperty.call(He,yt)&&yt!=="layout"&&yt!=="paint"&&yt!=="filter"&&yt!=="metadata"&&yt!=="minzoom"&&yt!=="maxzoom"&&(yt.indexOf("paint.")===0?et(He[yt],it[yt],q,Re,yt.slice(6),"setPaintProperty"):Ye(He[yt],it[yt])||ot(q,{command:"setLayerProperty",args:[Re,yt,it[yt]]}));for(yt in it)Object.prototype.hasOwnProperty.call(it,yt)&&!Object.prototype.hasOwnProperty.call(He,yt)&&yt!=="layout"&&yt!=="paint"&&yt!=="filter"&&yt!=="metadata"&&yt!=="minzoom"&&yt!=="maxzoom"&&(yt.indexOf("paint.")===0?et(He[yt],it[yt],q,Re,yt.slice(6),"setPaintProperty"):Ye(He[yt],it[yt])||ot(q,{command:"setLayerProperty",args:[Re,yt,it[yt]]}))}else ot(q,{command:"removeLayer",args:[Re]}),Dt=we[we.lastIndexOf(Re)+1],ot(q,{command:"addLayer",args:[it,Dt]})})(C,l.layers,f)}catch(g){console.warn("Unable to compute style diff:",g),f=[{command:"setStyle",args:[l]}]}return f},u.bL=function(d){const l=[],f=d.id;return f===void 0&&l.push({message:`layers.${f}: missing required property "id"`}),d.render===void 0&&l.push({message:`layers.${f}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&l.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),l},u.bM=It,u.bN=gt,u.bO=class extends ga{constructor(d,l){super(d,l),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},u.bP=ib,u.bQ=class extends ga{constructor(d,l){super(d,l),this.current=O2}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let l=1;l<16;l++)if(d[l]!==this.current[l]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},u.bR=To,u.bS=class extends ga{constructor(d,l){super(d,l),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},u.bT=class extends ga{constructor(d,l){super(d,l),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},u.bU=Z,u.bV=function(d,l){var f=Math.sin(l),g=Math.cos(l);return d[0]=g,d[1]=f,d[2]=0,d[3]=-f,d[4]=g,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},u.bW=function(d,l,f){var g=l[0],_=l[1],C=l[2];return d[0]=g*f[0]+_*f[3]+C*f[6],d[1]=g*f[1]+_*f[4]+C*f[7],d[2]=g*f[2]+_*f[5]+C*f[8],d},u.bX=function(d,l,f,g,_,C,A){var L=1/(l-f),q=1/(g-_),W=1/(C-A);return d[0]=-2*L,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*q,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*W,d[11]=0,d[12]=(l+f)*L,d[13]=(_+g)*q,d[14]=(A+C)*W,d[15]=1,d},u.bY=class extends ga{constructor(d,l){super(d,l),this.current=new Array}set(d){if(d!=this.current){this.current=d;const l=new Float32Array(4*d.length);for(let f=0;f<d.length;f++)l[4*f]=d[f].r,l[4*f+1]=d[f].g,l[4*f+2]=d[f].b,l[4*f+3]=d[f].a;this.gl.uniform4fv(this.location,l)}}},u.bZ=class extends ga{constructor(d,l){super(d,l),this.current=new Array}set(d){if(d!=this.current){this.current=d;const l=new Float32Array(d);this.gl.uniform1fv(this.location,l)}}},u.b_=class extends y{},u.ba=function(d,l,f){const g=new Float64Array(4);return Ee(g,d,l-90,f),g},u.bb=function(d,l,f,g){var _,C,A,L,q,W=l[0],Q=l[1],ie=l[2],ye=l[3],we=f[0],Se=f[1],Re=f[2],He=f[3];return(C=W*we+Q*Se+ie*Re+ye*He)<0&&(C=-C,we=-we,Se=-Se,Re=-Re,He=-He),1-C>U?(_=Math.acos(C),A=Math.sin(_),L=Math.sin((1-g)*_)/A,q=Math.sin(g*_)/A):(L=1-g,q=g),d[0]=L*W+q*we,d[1]=L*Q+q*Se,d[2]=L*ie+q*Re,d[3]=L*ye+q*He,d},u.bc=function(d){const l=new Float64Array(9);var f,g,_,C,A,L,q,W,Q,ie,ye,we,Se,Re,He,it,Dt,yt;ie=(_=(g=d)[0])*(q=_+_),ye=(C=g[1])*q,Se=(A=g[2])*q,Re=A*(W=C+C),it=(L=g[3])*q,Dt=L*W,yt=L*(Q=A+A),(f=l)[0]=1-(we=C*W)-(He=A*Q),f[3]=ye-yt,f[6]=Se+Dt,f[1]=ye+yt,f[4]=1-ie-He,f[7]=Re-it,f[2]=Se-Dt,f[5]=Re+it,f[8]=1-ie-we;const be=xr(-Math.asin(mt(l[2],-1,1)));let Ve,St;return Math.hypot(l[5],l[8])<.001?(Ve=0,St=-xr(Math.atan2(l[3],l[4]))):(Ve=xr(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),St=xr(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:Ve,pitch:be+90,bearing:St}},u.bd=function(d,l){return d.roll==l.roll&&d.pitch==l.pitch&&d.bearing==l.bearing},u.be=ln,u.bf=Ds,u.bg=Wp,u.bh=dy,u.bi=Hp,u.bj=ke,u.bk=$e,u.bl=On,u.bm=function(d,l,f,g,_){return ke(g,_,mt((d-l)/(f-l),0,1))},u.bn=Pe,u.bo=function(){return new Float64Array(3)},u.bp=function(d,l,f,g){return d[0]=l[0]+f[0]*g,d[1]=l[1]+f[1]*g,d[2]=l[2]+f[2]*g,d},u.bq=Ee,u.br=function(d,l,f){var g=f[0],_=f[1],C=f[2],A=l[0],L=l[1],q=l[2],W=_*q-C*L,Q=C*A-g*q,ie=g*L-_*A,ye=_*ie-C*Q,we=C*W-g*ie,Se=g*Q-_*W,Re=2*f[3];return Q*=Re,ie*=Re,we*=2,Se*=2,d[0]=A+(W*=Re)+(ye*=2),d[1]=L+Q+we,d[2]=q+ie+Se,d},u.bs=function(d,l,f){const g=(_=[d[0],d[1],d[2],l[0],l[1],l[2],f[0],f[1],f[2]])[0]*((Q=_[8])*(A=_[4])-(L=_[5])*(W=_[7]))+_[1]*(-Q*(C=_[3])+L*(q=_[6]))+_[2]*(W*C-A*q);var _,C,A,L,q,W,Q;if(g===0)return null;const ie=se([],[l[0],l[1],l[2]],[f[0],f[1],f[2]]),ye=se([],[f[0],f[1],f[2]],[d[0],d[1],d[2]]),we=se([],[d[0],d[1],d[2]],[l[0],l[1],l[2]]),Se=ae([],ie,-d[3]);return G(Se,Se,ae([],ye,-l[3])),G(Se,Se,ae([],we,-f[3])),ae(Se,Se,1/g),Se},u.bt=lw,u.bu=function(){return new Float64Array(4)},u.bv=function(d,l,f,g){var _=[],C=[];return _[0]=l[0]-f[0],_[1]=l[1]-f[1],_[2]=l[2]-f[2],C[0]=_[0]*Math.cos(g)-_[1]*Math.sin(g),C[1]=_[0]*Math.sin(g)+_[1]*Math.cos(g),C[2]=_[2],d[0]=C[0]+f[0],d[1]=C[1]+f[1],d[2]=C[2]+f[2],d},u.bw=function(d,l,f,g){var _=[],C=[];return _[0]=l[0]-f[0],_[1]=l[1]-f[1],_[2]=l[2]-f[2],C[0]=_[0],C[1]=_[1]*Math.cos(g)-_[2]*Math.sin(g),C[2]=_[1]*Math.sin(g)+_[2]*Math.cos(g),d[0]=C[0]+f[0],d[1]=C[1]+f[1],d[2]=C[2]+f[2],d},u.bx=function(d,l,f,g){var _=[],C=[];return _[0]=l[0]-f[0],_[1]=l[1]-f[1],_[2]=l[2]-f[2],C[0]=_[2]*Math.sin(g)+_[0]*Math.cos(g),C[1]=_[1],C[2]=_[2]*Math.cos(g)-_[0]*Math.sin(g),d[0]=C[0]+f[0],d[1]=C[1]+f[1],d[2]=C[2]+f[2],d},u.by=function(d,l,f){var g=Math.sin(f),_=Math.cos(f),C=l[0],A=l[1],L=l[2],q=l[3],W=l[8],Q=l[9],ie=l[10],ye=l[11];return l!==d&&(d[4]=l[4],d[5]=l[5],d[6]=l[6],d[7]=l[7],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15]),d[0]=C*_-W*g,d[1]=A*_-Q*g,d[2]=L*_-ie*g,d[3]=q*_-ye*g,d[8]=C*g+W*_,d[9]=A*g+Q*_,d[10]=L*g+ie*_,d[11]=q*g+ye*_,d},u.bz=function(d,l){const f=Pe(d,360),g=Pe(l,360),_=g-f,C=g>f?_-360:_+360;return Math.abs(_)<Math.abs(C)?_:C},u.c=bt,u.c0=class extends E{},u.c1=B2,u.c2=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},u.c3=aO,u.c4=function(d,l,f){var g=l[0],_=l[1],C=l[2],A=f[3]*g+f[7]*_+f[11]*C+f[15];return d[0]=(f[0]*g+f[4]*_+f[8]*C+f[12])/(A=A||1),d[1]=(f[1]*g+f[5]*_+f[9]*C+f[13])/A,d[2]=(f[2]*g+f[6]*_+f[10]*C+f[14])/A,d},u.c5=class extends us{},u.c6=class extends oe{},u.c7=function(d,l){return d[0]===l[0]&&d[1]===l[1]&&d[2]===l[2]&&d[3]===l[3]&&d[4]===l[4]&&d[5]===l[5]&&d[6]===l[6]&&d[7]===l[7]&&d[8]===l[8]&&d[9]===l[9]&&d[10]===l[10]&&d[11]===l[11]&&d[12]===l[12]&&d[13]===l[13]&&d[14]===l[14]&&d[15]===l[15]},u.c8=function(d,l){var f=d[0],g=d[1],_=d[2],C=d[3],A=d[4],L=d[5],q=d[6],W=d[7],Q=d[8],ie=d[9],ye=d[10],we=d[11],Se=d[12],Re=d[13],He=d[14],it=d[15],Dt=l[0],yt=l[1],be=l[2],Ve=l[3],St=l[4],rr=l[5],Mr=l[6],cr=l[7],dr=l[8],jr=l[9],Or=l[10],$r=l[11],mr=l[12],on=l[13],Tn=l[14],Cn=l[15];return Math.abs(f-Dt)<=U*Math.max(1,Math.abs(f),Math.abs(Dt))&&Math.abs(g-yt)<=U*Math.max(1,Math.abs(g),Math.abs(yt))&&Math.abs(_-be)<=U*Math.max(1,Math.abs(_),Math.abs(be))&&Math.abs(C-Ve)<=U*Math.max(1,Math.abs(C),Math.abs(Ve))&&Math.abs(A-St)<=U*Math.max(1,Math.abs(A),Math.abs(St))&&Math.abs(L-rr)<=U*Math.max(1,Math.abs(L),Math.abs(rr))&&Math.abs(q-Mr)<=U*Math.max(1,Math.abs(q),Math.abs(Mr))&&Math.abs(W-cr)<=U*Math.max(1,Math.abs(W),Math.abs(cr))&&Math.abs(Q-dr)<=U*Math.max(1,Math.abs(Q),Math.abs(dr))&&Math.abs(ie-jr)<=U*Math.max(1,Math.abs(ie),Math.abs(jr))&&Math.abs(ye-Or)<=U*Math.max(1,Math.abs(ye),Math.abs(Or))&&Math.abs(we-$r)<=U*Math.max(1,Math.abs(we),Math.abs($r))&&Math.abs(Se-mr)<=U*Math.max(1,Math.abs(Se),Math.abs(mr))&&Math.abs(Re-on)<=U*Math.max(1,Math.abs(Re),Math.abs(on))&&Math.abs(He-Tn)<=U*Math.max(1,Math.abs(He),Math.abs(Tn))&&Math.abs(it-Cn)<=U*Math.max(1,Math.abs(it),Math.abs(Cn))},u.c9=function(d,l){return d[0]=l[0],d[1]=l[1],d[2]=l[2],d[3]=l[3],d[4]=l[4],d[5]=l[5],d[6]=l[6],d[7]=l[7],d[8]=l[8],d[9]=l[9],d[10]=l[10],d[11]=l[11],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15],d},u.cA=function(d){delete ve.REGISTERED_PROTOCOLS[d]},u.cB=function(d,l){const f={};for(let _=0;_<d.length;_++){const C=l&&l[d[_].id]||Ss(d[_]);l&&(l[d[_].id]=C);let A=f[C];A||(A=f[C]=[]),A.push(d[_])}const g=[];for(const _ in f)g.push(f[_]);return g},u.cC=lt,u.cD=sk,u.cE=uk,u.cF=jO,u.cG=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=fe/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const l=d.bucket.layers[0],f=l.layout,g=l._unevaluatedLayout._values,_={layoutIconSize:g["icon-size"].possiblyEvaluate(new fn(d.bucket.zoom+1),d.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new fn(d.bucket.zoom+1),d.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new fn(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:W,maxZoom:Q}=d.bucket.textSizeData;_.compositeTextSizes=[g["text-size"].possiblyEvaluate(new fn(W),d.canonical),g["text-size"].possiblyEvaluate(new fn(Q),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:W,maxZoom:Q}=d.bucket.iconSizeData;_.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new fn(W),d.canonical),g["icon-size"].possiblyEvaluate(new fn(Q),d.canonical)]}const C=f.get("text-line-height")*Wo,A=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",L=f.get("text-keep-upright"),q=f.get("text-size");for(const W of d.bucket.features){const Q=f.get("text-font").evaluate(W,{},d.canonical).join(","),ie=q.evaluate(W,{},d.canonical),ye=_.layoutTextSize.evaluate(W,{},d.canonical),we=_.layoutIconSize.evaluate(W,{},d.canonical),Se={horizontal:{},vertical:void 0},Re=W.text;let He,it=[0,0];if(Re){const be=Re.toString(),Ve=f.get("text-letter-spacing").evaluate(W,{},d.canonical)*Wo,St=qr(be)?Ve:0,rr=f.get("text-anchor").evaluate(W,{},d.canonical),Mr=_k(l,W,d.canonical);if(!Mr){const Or=f.get("text-radial-offset").evaluate(W,{},d.canonical);it=Or?bk(rr,[Or*Wo,fw]):f.get("text-offset").evaluate(W,{},d.canonical).map(($r=>$r*Wo))}let cr=A?"center":f.get("text-justify").evaluate(W,{},d.canonical);const dr=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(W,{},d.canonical)*Wo:1/0,jr=()=>{d.bucket.allowVerticalPlacement&&Er(be)&&(Se.vertical=hb(Re,d.glyphMap,d.glyphPositions,d.imagePositions,Q,dr,C,rr,"left",St,it,u.an.vertical,!0,ye,ie))};if(!A&&Mr){const Or=new Set;if(cr==="auto")for(let mr=0;mr<Mr.values.length;mr+=2)Or.add(hw(Mr.values[mr]));else Or.add(cr);let $r=!1;for(const mr of Or)if(!Se.horizontal[mr])if($r)Se.horizontal[mr]=Se.horizontal[0];else{const on=hb(Re,d.glyphMap,d.glyphPositions,d.imagePositions,Q,dr,C,"center",mr,St,it,u.an.horizontal,!1,ye,ie);on&&(Se.horizontal[mr]=on,$r=on.positionedLines.length===1)}jr()}else{cr==="auto"&&(cr=hw(rr));const Or=hb(Re,d.glyphMap,d.glyphPositions,d.imagePositions,Q,dr,C,rr,cr,St,it,u.an.horizontal,!1,ye,ie);Or&&(Se.horizontal[cr]=Or),jr(),Er(be)&&A&&L&&(Se.vertical=hb(Re,d.glyphMap,d.glyphPositions,d.imagePositions,Q,dr,C,rr,cr,St,it,u.an.vertical,!1,ye,ie))}}let Dt=!1;if(W.icon&&W.icon.name){const be=d.imageMap[W.icon.name];be&&(He=VK(d.imagePositions[W.icon.name],f.get("icon-offset").evaluate(W,{},d.canonical),f.get("icon-anchor").evaluate(W,{},d.canonical)),Dt=!!be.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=Dt:d.bucket.sdfIcons!==Dt&&hr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(be.pixelRatio!==d.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const yt=wk(Se.horizontal)||Se.vertical;d.bucket.iconsInText=!!yt&&yt.iconsInText,(yt||He)&&sX(d.bucket,W,Se,He,d.imageMap,_,ye,we,it,Dt,d.canonical,d.subdivisionGranularity)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},u.cH=X2,u.cI=V2,u.cJ=K2,u.cK=my,u.cL=Q2,u.cM=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},u.cN=function(d,l,f,g,_){return a(this,void 0,void 0,(function*(){if(D())try{return yield Ft(d,l,f,g,_)}catch{}return(function(C,A,L,q,W){const Q=C.width,ie=C.height;Yt&&Wt||(Yt=new OffscreenCanvas(Q,ie),Wt=Yt.getContext("2d",{willReadFrequently:!0})),Yt.width=Q,Yt.height=ie,Wt.drawImage(C,0,0,Q,ie);const ye=Wt.getImageData(A,L,q,W);return Wt.clearRect(0,0,Q,ie),ye.data})(d,l,f,g,_)}))},u.cO=lO,u.cP=p,u.cQ=v,u.cR=CO,u.cS=FO,u.cT=_h,u.cU=Zi,u.ca=d=>d.type==="symbol",u.cb=d=>d.type==="circle",u.cc=d=>d.type==="heatmap",u.cd=d=>d.type==="line",u.ce=d=>d.type==="fill",u.cf=d=>d.type==="fill-extrusion",u.cg=d=>d.type==="hillshade",u.ch=d=>d.type==="color-relief",u.ci=d=>d.type==="raster",u.cj=d=>d.type==="background",u.ck=d=>d.type==="custom",u.cl=ht,u.cm=function(d,l,f){const g=Ke(l.x-f.x,l.y-f.y),_=Ke(d.x-f.x,d.y-f.y);var C,A;return xr(Math.atan2(g[0]*_[1]-g[1]*_[0],(C=g)[0]*(A=_)[0]+C[1]*A[1]))},u.cn=Ot,u.co=function(d,l){return wr[l]&&(d instanceof MouseEvent||d instanceof WheelEvent)},u.cp=function(d,l){return Rr[l]&&"touches"in d},u.cq=function(d){return Rr[d]||wr[d]},u.cr=function(d,l,f){var g=l[0],_=l[1];return d[0]=f[0]*g+f[4]*_+f[12],d[1]=f[1]*g+f[5]*_+f[13],d},u.cs=function(d,l){const{x:f,y:g}=_y.fromLngLat(l);return!(d<0||d>25||g<0||g>=1||f<0||f>=1)},u.ct=function(d,l){return d[0]=l[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=l[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=l[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},u.cu=class extends $a{},u.cv=uX,u.cx=function(d){return d.message===fr},u.cy=Ue,u.cz=function(d,l){ve.REGISTERED_PROTOCOLS[d]=l},u.d=Mt,u.e=Nt,u.f=d=>a(void 0,void 0,void 0,(function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(l)}catch(f){throw new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),u.g=xe,u.h=d=>new Promise(((l,f)=>{const g=new Image;g.onload=()=>{l(g),URL.revokeObjectURL(g.src),g.onload=null,window.requestAnimationFrame((()=>{g.src=ct}))},g.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(d)],{type:"image/png"});g.src=d.byteLength?URL.createObjectURL(_):ct})),u.i=Qt,u.j=(d,l)=>_t(Nt(d,{type:"json"}),l),u.k=Ct,u.l=zt,u.m=_t,u.n=(d,l)=>_t(Nt(d,{type:"arrayBuffer"}),l),u.o=function(d){return new Q2(d).readFields(kK,[])},u.p=BO,u.q=ly,u.r=la,u.s=ur,u.t=oo,u.u=tr,u.v=vt,u.w=hr,u.x=he,u.y=Ge,u.z=ee})),i("worker",["./shared"],(function(u){class a{constructor(ve){this.keyCache={},ve&&this.replace(ve)}replace(ve){this._layerConfigs={},this._layers={},this.update(ve,[])}update(ve,xe){for(const Ue of ve){this._layerConfigs[Ue.id]=Ue;const tt=this._layers[Ue.id]=u.bI(Ue);tt._featureFilter=u.a9(tt.filter),this.keyCache[Ue.id]&&delete this.keyCache[Ue.id]}for(const Ue of xe)delete this.keyCache[Ue],delete this._layerConfigs[Ue],delete this._layers[Ue];this.familiesBySource={};const Ae=u.cB(Object.values(this._layerConfigs),this.keyCache);for(const Ue of Ae){const tt=Ue.map((Ct=>this._layers[Ct.id])),_t=tt[0];if(_t.visibility==="none")continue;const Mt=_t.source||"";let Pt=this.familiesBySource[Mt];Pt||(Pt=this.familiesBySource[Mt]={});const Kt=_t.sourceLayer||"_geojsonTileLayer";let zt=Pt[Kt];zt||(zt=Pt[Kt]=[]),zt.push(tt)}}}class p{constructor(ve){const xe={},Ae=[];for(const Mt in ve){const Pt=ve[Mt],Kt=xe[Mt]={};for(const zt in Pt){const Ct=Pt[+zt];if(!Ct||Ct.bitmap.width===0||Ct.bitmap.height===0)continue;const Gt={x:0,y:0,w:Ct.bitmap.width+2,h:Ct.bitmap.height+2};Ae.push(Gt),Kt[zt]={rect:Gt,metrics:Ct.metrics}}}const{w:Ue,h:tt}=u.p(Ae),_t=new u.q({width:Ue||1,height:tt||1});for(const Mt in ve){const Pt=ve[Mt];for(const Kt in Pt){const zt=Pt[+Kt];if(!zt||zt.bitmap.width===0||zt.bitmap.height===0)continue;const Ct=xe[Mt][Kt].rect;u.q.copy(zt.bitmap,_t,{x:0,y:0},{x:Ct.x+1,y:Ct.y+1},zt.bitmap)}}this.image=_t,this.positions=xe}}u.cC("GlyphAtlas",p);class h{constructor(ve){this.tileID=new u.Z(ve.tileID.overscaledZ,ve.tileID.wrap,ve.tileID.canonical.z,ve.tileID.canonical.x,ve.tileID.canonical.y),this.uid=ve.uid,this.zoom=ve.zoom,this.pixelRatio=ve.pixelRatio,this.tileSize=ve.tileSize,this.source=ve.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ve.showCollisionBoxes,this.collectResourceTiming=!!ve.collectResourceTiming,this.returnDependencies=!!ve.returnDependencies,this.promoteId=ve.promoteId,this.inFlightDependencies=[],this.globalState=ve.globalState}parse(ve,xe,Ae,Ue,tt){return u._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ve,this.collisionBoxArray=new u.a7;const _t=new u.cD(Object.keys(ve.layers).sort()),Mt=new u.cE(this.tileID,this.promoteId);Mt.bucketLayerIDs=[];const Pt={},Kt={featureIndex:Mt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ae,subdivisionGranularity:tt},zt=xe.familiesBySource[this.source];for(const et in zt){const Lt=ve.layers[et];if(!Lt)continue;Lt.version===1&&u.w(`Vector tile source "${this.source}" layer "${et}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const lr=_t.encode(et),qt=[];for(let zr=0;zr<Lt.length;zr++){const kr=Lt.feature(zr),sn=Mt.getId(kr,et);qt.push({feature:kr,id:sn,index:zr,sourceLayerIndex:lr})}for(const zr of zt[et]){const kr=zr[0];kr.source!==this.source&&u.w(`layer.source = ${kr.source} does not equal this.source = ${this.source}`),kr.minzoom&&this.zoom<Math.floor(kr.minzoom)||kr.maxzoom&&this.zoom>=kr.maxzoom||kr.visibility!=="none"&&(m(zr,this.zoom,Ae),(Pt[kr.id]=kr.createBucket({index:Mt.bucketLayerIDs.length,layers:zr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:lr,sourceID:this.source,globalState:this.globalState})).populate(qt,Kt,this.tileID.canonical),Mt.bucketLayerIDs.push(zr.map((sn=>sn.id))))}}const Ct=u.bM(Kt.glyphDependencies,(et=>Object.keys(et).map(Number)));this.inFlightDependencies.forEach((et=>et?.abort())),this.inFlightDependencies=[];let Gt=Promise.resolve({});if(Object.keys(Ct).length){const et=new AbortController;this.inFlightDependencies.push(et),Gt=Ue.sendAsync({type:"GG",data:{stacks:Ct,source:this.source,tileID:this.tileID,type:"glyphs"}},et)}const vt=Object.keys(Kt.iconDependencies);let Pr=Promise.resolve({});if(vt.length){const et=new AbortController;this.inFlightDependencies.push(et),Pr=Ue.sendAsync({type:"GI",data:{icons:vt,source:this.source,tileID:this.tileID,type:"icons"}},et)}const Tr=Object.keys(Kt.patternDependencies);let Ye=Promise.resolve({});if(Tr.length){const et=new AbortController;this.inFlightDependencies.push(et),Ye=Ue.sendAsync({type:"GI",data:{icons:Tr,source:this.source,tileID:this.tileID,type:"patterns"}},et)}const[ot,jt,ne]=yield Promise.all([Gt,Pr,Ye]),de=new p(ot),Be=new u.cF(jt,ne);for(const et in Pt){const Lt=Pt[et];Lt instanceof u.a8?(m(Lt.layers,this.zoom,Ae),u.cG({bucket:Lt,glyphMap:ot,glyphPositions:de.positions,imageMap:jt,imagePositions:Be.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Kt.subdivisionGranularity})):Lt.hasPattern&&(Lt instanceof u.cH||Lt instanceof u.cI||Lt instanceof u.cJ)&&(m(Lt.layers,this.zoom,Ae),Lt.addFeatures(Kt,this.tileID.canonical,Be.patternPositions))}return this.status="done",{buckets:Object.values(Pt).filter((et=>!et.isEmpty())),featureIndex:Mt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:de.image,imageAtlas:Be,glyphMap:this.returnDependencies?ot:null,iconMap:this.returnDependencies?jt:null,glyphPositions:this.returnDependencies?de.positions:null}}))}}function m(bt,ve,xe){const Ae=new u.F(ve);for(const Ue of bt)Ue.recalculate(Ae,xe)}class v{constructor(ve,xe,Ae){this.actor=ve,this.layerIndex=xe,this.availableImages=Ae,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ve,xe){return u._(this,void 0,void 0,(function*(){const Ae=yield u.n(ve.request,xe);try{return{vectorTile:new u.cK.VectorTile(new u.cL(Ae.data)),rawData:Ae.data,cacheControl:Ae.cacheControl,expires:Ae.expires}}catch(Ue){const tt=new Uint8Array(Ae.data);let _t=`Unable to parse the tile at ${ve.request.url}, `;throw _t+=tt[0]===31&&tt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ue.message}`,new Error(_t)}}))}loadTile(ve){return u._(this,void 0,void 0,(function*(){const xe=ve.uid,Ae=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new u.cM(ve.request),Ue=new h(ve);this.loading[xe]=Ue;const tt=new AbortController;Ue.abort=tt;try{const _t=yield this.loadVectorTile(ve,tt);if(delete this.loading[xe],!_t)return null;const Mt=_t.rawData,Pt={};_t.expires&&(Pt.expires=_t.expires),_t.cacheControl&&(Pt.cacheControl=_t.cacheControl);const Kt={};if(Ae){const Ct=Ae.finish();Ct&&(Kt.resourceTiming=JSON.parse(JSON.stringify(Ct)))}Ue.vectorTile=_t.vectorTile;const zt=Ue.parse(_t.vectorTile,this.layerIndex,this.availableImages,this.actor,ve.subdivisionGranularity);this.loaded[xe]=Ue,this.fetching[xe]={rawTileData:Mt,cacheControl:Pt,resourceTiming:Kt};try{const Ct=yield zt;return u.e({rawTileData:Mt.slice(0)},Ct,Pt,Kt)}finally{delete this.fetching[xe]}}catch(_t){throw delete this.loading[xe],Ue.status="done",this.loaded[xe]=Ue,_t}}))}reloadTile(ve){return u._(this,void 0,void 0,(function*(){const xe=ve.uid;if(!this.loaded||!this.loaded[xe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Ae=this.loaded[xe];if(Ae.showCollisionBoxes=ve.showCollisionBoxes,Ae.globalState=ve.globalState,Ae.status==="parsing"){const Ue=yield Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,ve.subdivisionGranularity);let tt;if(this.fetching[xe]){const{rawTileData:_t,cacheControl:Mt,resourceTiming:Pt}=this.fetching[xe];delete this.fetching[xe],tt=u.e({rawTileData:_t.slice(0)},Ue,Mt,Pt)}else tt=Ue;return tt}if(Ae.status==="done"&&Ae.vectorTile)return Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,ve.subdivisionGranularity)}))}abortTile(ve){return u._(this,void 0,void 0,(function*(){const xe=this.loading,Ae=ve.uid;xe&&xe[Ae]&&xe[Ae].abort&&(xe[Ae].abort.abort(),delete xe[Ae])}))}removeTile(ve){return u._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ve.uid]&&delete this.loaded[ve.uid]}))}}class w{constructor(){this.loaded={}}loadTile(ve){return u._(this,void 0,void 0,(function*(){const{uid:xe,encoding:Ae,rawImageData:Ue,redFactor:tt,greenFactor:_t,blueFactor:Mt,baseShift:Pt}=ve,Kt=Ue.width+2,zt=Ue.height+2,Ct=u.b(Ue)?new u.R({width:Kt,height:zt},yield u.cN(Ue,-1,-1,Kt,zt)):Ue,Gt=new u.cO(xe,Ct,Ae,tt,_t,Mt,Pt);return this.loaded=this.loaded||{},this.loaded[xe]=Gt,Gt}))}removeTile(ve){const xe=this.loaded,Ae=ve.uid;xe&&xe[Ae]&&delete xe[Ae]}}var x,P,T=(function(){if(P)return x;function bt(xe,Ae){if(xe.length!==0){ve(xe[0],Ae);for(var Ue=1;Ue<xe.length;Ue++)ve(xe[Ue],!Ae)}}function ve(xe,Ae){for(var Ue=0,tt=0,_t=0,Mt=xe.length,Pt=Mt-1;_t<Mt;Pt=_t++){var Kt=(xe[_t][0]-xe[Pt][0])*(xe[Pt][1]+xe[_t][1]),zt=Ue+Kt;tt+=Math.abs(Ue)>=Math.abs(Kt)?Ue-zt+Kt:Kt-zt+Ue,Ue=zt}Ue+tt>=0!=!!Ae&&xe.reverse()}return P=1,x=function xe(Ae,Ue){var tt,_t=Ae&&Ae.type;if(_t==="FeatureCollection")for(tt=0;tt<Ae.features.length;tt++)xe(Ae.features[tt],Ue);else if(_t==="GeometryCollection")for(tt=0;tt<Ae.geometries.length;tt++)xe(Ae.geometries[tt],Ue);else if(_t==="Feature")xe(Ae.geometry,Ue);else if(_t==="Polygon")bt(Ae.coordinates,Ue);else if(_t==="MultiPolygon")for(tt=0;tt<Ae.coordinates.length;tt++)bt(Ae.coordinates[tt],Ue);return Ae}})(),R=u.cP(T);const k=u.cK.VectorTileFeature.prototype.toGeoJSON;class N{constructor(ve){this._feature=ve,this.extent=u.$,this.type=ve.type,this.properties=ve.tags,"id"in ve&&!isNaN(ve.id)&&(this.id=parseInt(ve.id,10))}loadGeometry(){if(this._feature.type===1){const ve=[];for(const xe of this._feature.geometry)ve.push([new u.P(xe[0],xe[1])]);return ve}{const ve=[];for(const xe of this._feature.geometry){const Ae=[];for(const Ue of xe)Ae.push(new u.P(Ue[0],Ue[1]));ve.push(Ae)}return ve}}toGeoJSON(ve,xe,Ae){return k.call(this,ve,xe,Ae)}}class F{constructor(ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.$,this.length=ve.length,this._features=ve}feature(ve){return new N(this._features[ve])}}var D,U,B,Z={exports:{}},J=(function(){if(B)return Z.exports;B=1;var bt=u.cS(),ve=(function(){if(U)return D;U=1;var zt=u.cQ(),Ct=u.cR().VectorTileFeature;function Gt(Pr,Tr){this.options=Tr||{},this.features=Pr,this.length=Pr.length}function vt(Pr,Tr){this.id=typeof Pr.id=="number"?Pr.id:void 0,this.type=Pr.type,this.rawGeometry=Pr.type===1?[Pr.geometry]:Pr.geometry,this.properties=Pr.tags,this.extent=Tr||4096}return D=Gt,Gt.prototype.feature=function(Pr){return new vt(this.features[Pr],this.options.extent)},vt.prototype.loadGeometry=function(){var Pr=this.rawGeometry;this.geometry=[];for(var Tr=0;Tr<Pr.length;Tr++){for(var Ye=Pr[Tr],ot=[],jt=0;jt<Ye.length;jt++)ot.push(new zt(Ye[jt][0],Ye[jt][1]));this.geometry.push(ot)}return this.geometry},vt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pr=this.geometry,Tr=1/0,Ye=-1/0,ot=1/0,jt=-1/0,ne=0;ne<Pr.length;ne++)for(var de=Pr[ne],Be=0;Be<de.length;Be++){var et=de[Be];Tr=Math.min(Tr,et.x),Ye=Math.max(Ye,et.x),ot=Math.min(ot,et.y),jt=Math.max(jt,et.y)}return[Tr,ot,Ye,jt]},vt.prototype.toGeoJSON=Ct.prototype.toGeoJSON,D})();function xe(zt){var Ct=new bt;return(function(Gt,vt){for(var Pr in Gt.layers)vt.writeMessage(3,Ae,Gt.layers[Pr])})(zt,Ct),Ct.finish()}function Ae(zt,Ct){var Gt;Ct.writeVarintField(15,zt.version||1),Ct.writeStringField(1,zt.name||""),Ct.writeVarintField(5,zt.extent||4096);var vt={keys:[],values:[],keycache:{},valuecache:{}};for(Gt=0;Gt<zt.length;Gt++)vt.feature=zt.feature(Gt),Ct.writeMessage(2,Ue,vt);var Pr=vt.keys;for(Gt=0;Gt<Pr.length;Gt++)Ct.writeStringField(3,Pr[Gt]);var Tr=vt.values;for(Gt=0;Gt<Tr.length;Gt++)Ct.writeMessage(4,Kt,Tr[Gt])}function Ue(zt,Ct){var Gt=zt.feature;Gt.id!==void 0&&Ct.writeVarintField(1,Gt.id),Ct.writeMessage(2,tt,zt),Ct.writeVarintField(3,Gt.type),Ct.writeMessage(4,Pt,Gt)}function tt(zt,Ct){var Gt=zt.feature,vt=zt.keys,Pr=zt.values,Tr=zt.keycache,Ye=zt.valuecache;for(var ot in Gt.properties){var jt=Gt.properties[ot],ne=Tr[ot];if(jt!==null){ne===void 0&&(vt.push(ot),Tr[ot]=ne=vt.length-1),Ct.writeVarint(ne);var de=typeof jt;de!=="string"&&de!=="boolean"&&de!=="number"&&(jt=JSON.stringify(jt));var Be=de+":"+jt,et=Ye[Be];et===void 0&&(Pr.push(jt),Ye[Be]=et=Pr.length-1),Ct.writeVarint(et)}}}function _t(zt,Ct){return(Ct<<3)+(7&zt)}function Mt(zt){return zt<<1^zt>>31}function Pt(zt,Ct){for(var Gt=zt.loadGeometry(),vt=zt.type,Pr=0,Tr=0,Ye=Gt.length,ot=0;ot<Ye;ot++){var jt=Gt[ot],ne=1;vt===1&&(ne=jt.length),Ct.writeVarint(_t(1,ne));for(var de=vt===3?jt.length-1:jt.length,Be=0;Be<de;Be++){Be===1&&vt!==1&&Ct.writeVarint(_t(2,de-1));var et=jt[Be].x-Pr,Lt=jt[Be].y-Tr;Ct.writeVarint(Mt(et)),Ct.writeVarint(Mt(Lt)),Pr+=et,Tr+=Lt}vt===3&&Ct.writeVarint(_t(7,1))}}function Kt(zt,Ct){var Gt=typeof zt;Gt==="string"?Ct.writeStringField(1,zt):Gt==="boolean"?Ct.writeBooleanField(7,zt):Gt==="number"&&(zt%1!=0?Ct.writeDoubleField(3,zt):zt<0?Ct.writeSVarintField(6,zt):Ct.writeVarintField(5,zt))}return Z.exports=xe,Z.exports.fromVectorTileJs=xe,Z.exports.fromGeojsonVt=function(zt,Ct){Ct=Ct||{};var Gt={};for(var vt in zt)Gt[vt]=new ve(zt[vt].features,Ct),Gt[vt].name=vt,Gt[vt].version=Ct.version,Gt[vt].extent=Ct.extent;return xe({layers:Gt})},Z.exports.GeoJSONWrapper=ve,Z.exports})(),X=u.cP(J);const le={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:bt=>bt},H=Math.fround||(G=new Float32Array(1),bt=>(G[0]=+bt,G[0]));var G;class ae{constructor(ve){this.options=Object.assign(Object.create(le),ve),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ve){const{log:xe,minZoom:Ae,maxZoom:Ue}=this.options;xe&&console.time("total time");const tt=`prepare ${ve.length} points`;xe&&console.time(tt),this.points=ve;const _t=[];for(let Pt=0;Pt<ve.length;Pt++){const Kt=ve[Pt];if(!Kt.geometry)continue;const[zt,Ct]=Kt.geometry.coordinates,Gt=H(me(zt)),vt=H(Ce(Ct));_t.push(Gt,vt,1/0,Pt,-1,1),this.options.reduce&&_t.push(0)}let Mt=this.trees[Ue+1]=this._createTree(_t);xe&&console.timeEnd(tt);for(let Pt=Ue;Pt>=Ae;Pt--){const Kt=+Date.now();Mt=this.trees[Pt]=this._createTree(this._cluster(Mt,Pt)),xe&&console.log("z%d: %d clusters in %dms",Pt,Mt.numItems,+Date.now()-Kt)}return xe&&console.timeEnd("total time"),this}getClusters(ve,xe){let Ae=((ve[0]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,ve[1]));let tt=ve[2]===180?180:((ve[2]+180)%360+360)%360-180;const _t=Math.max(-90,Math.min(90,ve[3]));if(ve[2]-ve[0]>=360)Ae=-180,tt=180;else if(Ae>tt){const Ct=this.getClusters([Ae,Ue,180,_t],xe),Gt=this.getClusters([-180,Ue,tt,_t],xe);return Ct.concat(Gt)}const Mt=this.trees[this._limitZoom(xe)],Pt=Mt.range(me(Ae),Ce(_t),me(tt),Ce(Ue)),Kt=Mt.data,zt=[];for(const Ct of Pt){const Gt=this.stride*Ct;zt.push(Kt[Gt+5]>1?se(Kt,Gt,this.clusterProps):this.points[Kt[Gt+3]])}return zt}getChildren(ve){const xe=this._getOriginId(ve),Ae=this._getOriginZoom(ve),Ue="No cluster with the specified id.",tt=this.trees[Ae];if(!tt)throw new Error(Ue);const _t=tt.data;if(xe*this.stride>=_t.length)throw new Error(Ue);const Mt=this.options.radius/(this.options.extent*Math.pow(2,Ae-1)),Pt=tt.within(_t[xe*this.stride],_t[xe*this.stride+1],Mt),Kt=[];for(const zt of Pt){const Ct=zt*this.stride;_t[Ct+4]===ve&&Kt.push(_t[Ct+5]>1?se(_t,Ct,this.clusterProps):this.points[_t[Ct+3]])}if(Kt.length===0)throw new Error(Ue);return Kt}getLeaves(ve,xe,Ae){const Ue=[];return this._appendLeaves(Ue,ve,xe=xe||10,Ae=Ae||0,0),Ue}getTile(ve,xe,Ae){const Ue=this.trees[this._limitZoom(ve)],tt=Math.pow(2,ve),{extent:_t,radius:Mt}=this.options,Pt=Mt/_t,Kt=(Ae-Pt)/tt,zt=(Ae+1+Pt)/tt,Ct={features:[]};return this._addTileFeatures(Ue.range((xe-Pt)/tt,Kt,(xe+1+Pt)/tt,zt),Ue.data,xe,Ae,tt,Ct),xe===0&&this._addTileFeatures(Ue.range(1-Pt/tt,Kt,1,zt),Ue.data,tt,Ae,tt,Ct),xe===tt-1&&this._addTileFeatures(Ue.range(0,Kt,Pt/tt,zt),Ue.data,-1,Ae,tt,Ct),Ct.features.length?Ct:null}getClusterExpansionZoom(ve){let xe=this._getOriginZoom(ve)-1;for(;xe<=this.options.maxZoom;){const Ae=this.getChildren(ve);if(xe++,Ae.length!==1)break;ve=Ae[0].properties.cluster_id}return xe}_appendLeaves(ve,xe,Ae,Ue,tt){const _t=this.getChildren(xe);for(const Mt of _t){const Pt=Mt.properties;if(Pt&&Pt.cluster?tt+Pt.point_count<=Ue?tt+=Pt.point_count:tt=this._appendLeaves(ve,Pt.cluster_id,Ae,Ue,tt):tt<Ue?tt++:ve.push(Mt),ve.length===Ae)break}return tt}_createTree(ve){const xe=new u.aH(ve.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ae=0;Ae<ve.length;Ae+=this.stride)xe.add(ve[Ae],ve[Ae+1]);return xe.finish(),xe.data=ve,xe}_addTileFeatures(ve,xe,Ae,Ue,tt,_t){for(const Mt of ve){const Pt=Mt*this.stride,Kt=xe[Pt+5]>1;let zt,Ct,Gt;if(Kt)zt=ue(xe,Pt,this.clusterProps),Ct=xe[Pt],Gt=xe[Pt+1];else{const Tr=this.points[xe[Pt+3]];zt=Tr.properties;const[Ye,ot]=Tr.geometry.coordinates;Ct=me(Ye),Gt=Ce(ot)}const vt={type:1,geometry:[[Math.round(this.options.extent*(Ct*tt-Ae)),Math.round(this.options.extent*(Gt*tt-Ue))]],tags:zt};let Pr;Pr=Kt||this.options.generateId?xe[Pt+3]:this.points[xe[Pt+3]].id,Pr!==void 0&&(vt.id=Pr),_t.features.push(vt)}}_limitZoom(ve){return Math.max(this.options.minZoom,Math.min(Math.floor(+ve),this.options.maxZoom+1))}_cluster(ve,xe){const{radius:Ae,extent:Ue,reduce:tt,minPoints:_t}=this.options,Mt=Ae/(Ue*Math.pow(2,xe)),Pt=ve.data,Kt=[],zt=this.stride;for(let Ct=0;Ct<Pt.length;Ct+=zt){if(Pt[Ct+2]<=xe)continue;Pt[Ct+2]=xe;const Gt=Pt[Ct],vt=Pt[Ct+1],Pr=ve.within(Pt[Ct],Pt[Ct+1],Mt),Tr=Pt[Ct+5];let Ye=Tr;for(const ot of Pr){const jt=ot*zt;Pt[jt+2]>xe&&(Ye+=Pt[jt+5])}if(Ye>Tr&&Ye>=_t){let ot,jt=Gt*Tr,ne=vt*Tr,de=-1;const Be=(Ct/zt<<5)+(xe+1)+this.points.length;for(const et of Pr){const Lt=et*zt;if(Pt[Lt+2]<=xe)continue;Pt[Lt+2]=xe;const lr=Pt[Lt+5];jt+=Pt[Lt]*lr,ne+=Pt[Lt+1]*lr,Pt[Lt+4]=Be,tt&&(ot||(ot=this._map(Pt,Ct,!0),de=this.clusterProps.length,this.clusterProps.push(ot)),tt(ot,this._map(Pt,Lt)))}Pt[Ct+4]=Be,Kt.push(jt/Ye,ne/Ye,1/0,Be,-1,Ye),tt&&Kt.push(de)}else{for(let ot=0;ot<zt;ot++)Kt.push(Pt[Ct+ot]);if(Ye>1)for(const ot of Pr){const jt=ot*zt;if(!(Pt[jt+2]<=xe)){Pt[jt+2]=xe;for(let ne=0;ne<zt;ne++)Kt.push(Pt[jt+ne])}}}}return Kt}_getOriginId(ve){return ve-this.points.length>>5}_getOriginZoom(ve){return(ve-this.points.length)%32}_map(ve,xe,Ae){if(ve[xe+5]>1){const _t=this.clusterProps[ve[xe+6]];return Ae?Object.assign({},_t):_t}const Ue=this.points[ve[xe+3]].properties,tt=this.options.map(Ue);return Ae&&tt===Ue?Object.assign({},tt):tt}}function se(bt,ve,xe){return{type:"Feature",id:bt[ve+3],properties:ue(bt,ve,xe),geometry:{type:"Point",coordinates:[(Ae=bt[ve],360*(Ae-.5)),pe(bt[ve+1])]}};var Ae}function ue(bt,ve,xe){const Ae=bt[ve+5],Ue=Ae>=1e4?`${Math.round(Ae/1e3)}k`:Ae>=1e3?Math.round(Ae/100)/10+"k":Ae,tt=bt[ve+6],_t=tt===-1?{}:Object.assign({},xe[tt]);return Object.assign(_t,{cluster:!0,cluster_id:bt[ve+3],point_count:Ae,point_count_abbreviated:Ue})}function me(bt){return bt/360+.5}function Ce(bt){const ve=Math.sin(bt*Math.PI/180),xe=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return xe<0?0:xe>1?1:xe}function pe(bt){const ve=(180-360*bt)*Math.PI/180;return 360*Math.atan(Math.exp(ve))/Math.PI-90}function Ee(bt,ve,xe,Ae){let Ue=Ae;const tt=ve+(xe-ve>>1);let _t,Mt=xe-ve;const Pt=bt[ve],Kt=bt[ve+1],zt=bt[xe],Ct=bt[xe+1];for(let Gt=ve+3;Gt<xe;Gt+=3){const vt=Fe(bt[Gt],bt[Gt+1],Pt,Kt,zt,Ct);if(vt>Ue)_t=Gt,Ue=vt;else if(vt===Ue){const Pr=Math.abs(Gt-tt);Pr<Mt&&(_t=Gt,Mt=Pr)}}Ue>Ae&&(_t-ve>3&&Ee(bt,ve,_t,Ae),bt[_t+2]=Ue,xe-_t>3&&Ee(bt,_t,xe,Ae))}function Fe(bt,ve,xe,Ae,Ue,tt){let _t=Ue-xe,Mt=tt-Ae;if(_t!==0||Mt!==0){const Pt=((bt-xe)*_t+(ve-Ae)*Mt)/(_t*_t+Mt*Mt);Pt>1?(xe=Ue,Ae=tt):Pt>0&&(xe+=_t*Pt,Ae+=Mt*Pt)}return _t=bt-xe,Mt=ve-Ae,_t*_t+Mt*Mt}function Ke(bt,ve,xe,Ae){const Ue={id:bt??null,type:ve,geometry:xe,tags:Ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")fe(Ue,xe);else if(ve==="Polygon")fe(Ue,xe[0]);else if(ve==="MultiLineString")for(const tt of xe)fe(Ue,tt);else if(ve==="MultiPolygon")for(const tt of xe)fe(Ue,tt[0]);return Ue}function fe(bt,ve){for(let xe=0;xe<ve.length;xe+=3)bt.minX=Math.min(bt.minX,ve[xe]),bt.minY=Math.min(bt.minY,ve[xe+1]),bt.maxX=Math.max(bt.maxX,ve[xe]),bt.maxY=Math.max(bt.maxY,ve[xe+1])}function _e(bt,ve,xe,Ae){if(!ve.geometry)return;const Ue=ve.geometry.coordinates;if(Ue&&Ue.length===0)return;const tt=ve.geometry.type,_t=Math.pow(xe.tolerance/((1<<xe.maxZoom)*xe.extent),2);let Mt=[],Pt=ve.id;if(xe.promoteId?Pt=ve.properties[xe.promoteId]:xe.generateId&&(Pt=Ae||0),tt==="Point")Pe(Ue,Mt);else if(tt==="MultiPoint")for(const Kt of Ue)Pe(Kt,Mt);else if(tt==="LineString")ke(Ue,Mt,_t,!1);else if(tt==="MultiLineString"){if(xe.lineMetrics){for(const Kt of Ue)Mt=[],ke(Kt,Mt,_t,!1),bt.push(Ke(Pt,"LineString",Mt,ve.properties));return}$e(Ue,Mt,_t,!1)}else if(tt==="Polygon")$e(Ue,Mt,_t,!0);else{if(tt!=="MultiPolygon"){if(tt==="GeometryCollection"){for(const Kt of ve.geometry.geometries)_e(bt,{id:Pt,geometry:Kt,properties:ve.properties},xe,Ae);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Kt of Ue){const zt=[];$e(Kt,zt,_t,!0),Mt.push(zt)}}bt.push(Ke(Pt,tt,Mt,ve.properties))}function Pe(bt,ve){ve.push(ht(bt[0]),Ot(bt[1]),0)}function ke(bt,ve,xe,Ae){let Ue,tt,_t=0;for(let Pt=0;Pt<bt.length;Pt++){const Kt=ht(bt[Pt][0]),zt=Ot(bt[Pt][1]);ve.push(Kt,zt,0),Pt>0&&(_t+=Ae?(Ue*zt-Kt*tt)/2:Math.sqrt(Math.pow(Kt-Ue,2)+Math.pow(zt-tt,2))),Ue=Kt,tt=zt}const Mt=ve.length-3;ve[2]=1,Ee(ve,0,Mt,xe),ve[Mt+2]=1,ve.size=Math.abs(_t),ve.start=0,ve.end=ve.size}function $e(bt,ve,xe,Ae){for(let Ue=0;Ue<bt.length;Ue++){const tt=[];ke(bt[Ue],tt,xe,Ae),ve.push(tt)}}function ht(bt){return bt/360+.5}function Ot(bt){const ve=Math.sin(bt*Math.PI/180),xe=.5-.25*Math.log((1+ve)/(1-ve))/Math.PI;return xe<0?0:xe>1?1:xe}function mt(bt,ve,xe,Ae,Ue,tt,_t,Mt){if(Ae/=ve,tt>=(xe/=ve)&&_t<Ae)return bt;if(_t<xe||tt>=Ae)return null;const Pt=[];for(const Kt of bt){const zt=Kt.geometry;let Ct=Kt.type;const Gt=Ue===0?Kt.minX:Kt.minY,vt=Ue===0?Kt.maxX:Kt.maxY;if(Gt>=xe&&vt<Ae){Pt.push(Kt);continue}if(vt<xe||Gt>=Ae)continue;let Pr=[];if(Ct==="Point"||Ct==="MultiPoint")nt(zt,Pr,xe,Ae,Ue);else if(Ct==="LineString")Nt(zt,Pr,xe,Ae,Ue,!1,Mt.lineMetrics);else if(Ct==="MultiLineString")It(zt,Pr,xe,Ae,Ue,!1);else if(Ct==="Polygon")It(zt,Pr,xe,Ae,Ue,!0);else if(Ct==="MultiPolygon")for(const Tr of zt){const Ye=[];It(Tr,Ye,xe,Ae,Ue,!0),Ye.length&&Pr.push(Ye)}if(Pr.length){if(Mt.lineMetrics&&Ct==="LineString"){for(const Tr of Pr)Pt.push(Ke(Kt.id,Ct,Tr,Kt.tags));continue}Ct!=="LineString"&&Ct!=="MultiLineString"||(Pr.length===1?(Ct="LineString",Pr=Pr[0]):Ct="MultiLineString"),Ct!=="Point"&&Ct!=="MultiPoint"||(Ct=Pr.length===3?"Point":"MultiPoint"),Pt.push(Ke(Kt.id,Ct,Pr,Kt.tags))}}return Pt.length?Pt:null}function nt(bt,ve,xe,Ae,Ue){for(let tt=0;tt<bt.length;tt+=3){const _t=bt[tt+Ue];_t>=xe&&_t<=Ae&&gt(ve,bt[tt],bt[tt+1],bt[tt+2])}}function Nt(bt,ve,xe,Ae,Ue,tt,_t){let Mt=kt(bt);const Pt=Ue===0?Le:pr;let Kt,zt,Ct=bt.start;for(let Ye=0;Ye<bt.length-3;Ye+=3){const ot=bt[Ye],jt=bt[Ye+1],ne=bt[Ye+2],de=bt[Ye+3],Be=bt[Ye+4],et=Ue===0?ot:jt,Lt=Ue===0?de:Be;let lr=!1;_t&&(Kt=Math.sqrt(Math.pow(ot-de,2)+Math.pow(jt-Be,2))),et<xe?Lt>xe&&(zt=Pt(Mt,ot,jt,de,Be,xe),_t&&(Mt.start=Ct+Kt*zt)):et>Ae?Lt<Ae&&(zt=Pt(Mt,ot,jt,de,Be,Ae),_t&&(Mt.start=Ct+Kt*zt)):gt(Mt,ot,jt,ne),Lt<xe&&et>=xe&&(zt=Pt(Mt,ot,jt,de,Be,xe),lr=!0),Lt>Ae&&et<=Ae&&(zt=Pt(Mt,ot,jt,de,Be,Ae),lr=!0),!tt&&lr&&(_t&&(Mt.end=Ct+Kt*zt),ve.push(Mt),Mt=kt(bt)),_t&&(Ct+=Kt)}let Gt=bt.length-3;const vt=bt[Gt],Pr=bt[Gt+1],Tr=Ue===0?vt:Pr;Tr>=xe&&Tr<=Ae&&gt(Mt,vt,Pr,bt[Gt+2]),Gt=Mt.length-3,tt&&Gt>=3&&(Mt[Gt]!==Mt[0]||Mt[Gt+1]!==Mt[1])&&gt(Mt,Mt[0],Mt[1],Mt[2]),Mt.length&&ve.push(Mt)}function kt(bt){const ve=[];return ve.size=bt.size,ve.start=bt.start,ve.end=bt.end,ve}function It(bt,ve,xe,Ae,Ue,tt){for(const _t of bt)Nt(_t,ve,xe,Ae,Ue,tt,!1)}function gt(bt,ve,xe,Ae){bt.push(ve,xe,Ae)}function Le(bt,ve,xe,Ae,Ue,tt){const _t=(tt-ve)/(Ae-ve);return gt(bt,tt,xe+(Ue-xe)*_t,1),_t}function pr(bt,ve,xe,Ae,Ue,tt){const _t=(tt-xe)/(Ue-xe);return gt(bt,ve+(Ae-ve)*_t,tt,1),_t}function hr(bt,ve){const xe=[];for(let Ae=0;Ae<bt.length;Ae++){const Ue=bt[Ae],tt=Ue.type;let _t;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")_t=vr(Ue.geometry,ve);else if(tt==="MultiLineString"||tt==="Polygon"){_t=[];for(const Mt of Ue.geometry)_t.push(vr(Mt,ve))}else if(tt==="MultiPolygon"){_t=[];for(const Mt of Ue.geometry){const Pt=[];for(const Kt of Mt)Pt.push(vr(Kt,ve));_t.push(Pt)}}xe.push(Ke(Ue.id,tt,_t,Ue.tags))}return xe}function vr(bt,ve){const xe=[];xe.size=bt.size,bt.start!==void 0&&(xe.start=bt.start,xe.end=bt.end);for(let Ae=0;Ae<bt.length;Ae+=3)xe.push(bt[Ae]+ve,bt[Ae+1],bt[Ae+2]);return xe}function Qt(bt,ve){if(bt.transformed)return bt;const xe=1<<bt.z,Ae=bt.x,Ue=bt.y;for(const tt of bt.features){const _t=tt.geometry,Mt=tt.type;if(tt.geometry=[],Mt===1)for(let Pt=0;Pt<_t.length;Pt+=2)tt.geometry.push(qe(_t[Pt],_t[Pt+1],ve,xe,Ae,Ue));else for(let Pt=0;Pt<_t.length;Pt++){const Kt=[];for(let zt=0;zt<_t[Pt].length;zt+=2)Kt.push(qe(_t[Pt][zt],_t[Pt][zt+1],ve,xe,Ae,Ue));tt.geometry.push(Kt)}}return bt.transformed=!0,bt}function qe(bt,ve,xe,Ae,Ue,tt){return[Math.round(xe*(bt*Ae-Ue)),Math.round(xe*(ve*Ae-tt))]}function rt(bt,ve,xe,Ae,Ue){const tt=ve===Ue.maxZoom?0:Ue.tolerance/((1<<ve)*Ue.extent),_t={features:[],numPoints:0,numSimplified:0,numFeatures:bt.length,source:null,x:xe,y:Ae,z:ve,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Mt of bt)ct(_t,Mt,tt,Ue);return _t}function ct(bt,ve,xe,Ae){const Ue=ve.geometry,tt=ve.type,_t=[];if(bt.minX=Math.min(bt.minX,ve.minX),bt.minY=Math.min(bt.minY,ve.minY),bt.maxX=Math.max(bt.maxX,ve.maxX),bt.maxY=Math.max(bt.maxY,ve.maxY),tt==="Point"||tt==="MultiPoint")for(let Mt=0;Mt<Ue.length;Mt+=3)_t.push(Ue[Mt],Ue[Mt+1]),bt.numPoints++,bt.numSimplified++;else if(tt==="LineString")Ft(_t,Ue,bt,xe,!1,!1);else if(tt==="MultiLineString"||tt==="Polygon")for(let Mt=0;Mt<Ue.length;Mt++)Ft(_t,Ue[Mt],bt,xe,tt==="Polygon",Mt===0);else if(tt==="MultiPolygon")for(let Mt=0;Mt<Ue.length;Mt++){const Pt=Ue[Mt];for(let Kt=0;Kt<Pt.length;Kt++)Ft(_t,Pt[Kt],bt,xe,!0,Kt===0)}if(_t.length){let Mt=ve.tags||null;if(tt==="LineString"&&Ae.lineMetrics){Mt={};for(const Kt in ve.tags)Mt[Kt]=ve.tags[Kt];Mt.mapbox_clip_start=Ue.start/Ue.size,Mt.mapbox_clip_end=Ue.end/Ue.size}const Pt={geometry:_t,type:tt==="Polygon"||tt==="MultiPolygon"?3:tt==="LineString"||tt==="MultiLineString"?2:1,tags:Mt};ve.id!==null&&(Pt.id=ve.id),bt.features.push(Pt)}}function Ft(bt,ve,xe,Ae,Ue,tt){const _t=Ae*Ae;if(Ae>0&&ve.size<(Ue?_t:Ae))return void(xe.numPoints+=ve.length/3);const Mt=[];for(let Pt=0;Pt<ve.length;Pt+=3)(Ae===0||ve[Pt+2]>_t)&&(xe.numSimplified++,Mt.push(ve[Pt],ve[Pt+1])),xe.numPoints++;Ue&&(function(Pt,Kt){let zt=0;for(let Ct=0,Gt=Pt.length,vt=Gt-2;Ct<Gt;vt=Ct,Ct+=2)zt+=(Pt[Ct]-Pt[vt])*(Pt[Ct+1]+Pt[vt+1]);if(zt>0===Kt)for(let Ct=0,Gt=Pt.length;Ct<Gt/2;Ct+=2){const vt=Pt[Ct],Pr=Pt[Ct+1];Pt[Ct]=Pt[Gt-2-Ct],Pt[Ct+1]=Pt[Gt-1-Ct],Pt[Gt-2-Ct]=vt,Pt[Gt-1-Ct]=Pr}})(Mt,tt),bt.push(Mt)}const Yt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Wt{constructor(ve,xe){const Ae=(xe=this.options=(function(tt,_t){for(const Mt in _t)tt[Mt]=_t[Mt];return tt})(Object.create(Yt),xe)).debug;if(Ae&&console.time("preprocess data"),xe.maxZoom<0||xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(xe.promoteId&&xe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ue=(function(tt,_t){const Mt=[];if(tt.type==="FeatureCollection")for(let Pt=0;Pt<tt.features.length;Pt++)_e(Mt,tt.features[Pt],_t,Pt);else _e(Mt,tt.type==="Feature"?tt:{geometry:tt},_t);return Mt})(ve,xe);this.tiles={},this.tileCoords=[],Ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",xe.indexMaxZoom,xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ue=(function(tt,_t){const Mt=_t.buffer/_t.extent;let Pt=tt;const Kt=mt(tt,1,-1-Mt,Mt,0,-1,2,_t),zt=mt(tt,1,1-Mt,2+Mt,0,-1,2,_t);return(Kt||zt)&&(Pt=mt(tt,1,-Mt,1+Mt,0,-1,2,_t)||[],Kt&&(Pt=hr(Kt,1).concat(Pt)),zt&&(Pt=Pt.concat(hr(zt,-1)))),Pt})(Ue,xe),Ue.length&&this.splitTile(Ue,0,0,0),Ae&&(Ue.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ve,xe,Ae,Ue,tt,_t,Mt){const Pt=[ve,xe,Ae,Ue],Kt=this.options,zt=Kt.debug;for(;Pt.length;){Ue=Pt.pop(),Ae=Pt.pop(),xe=Pt.pop(),ve=Pt.pop();const Ct=1<<xe,Gt=ur(xe,Ae,Ue);let vt=this.tiles[Gt];if(!vt&&(zt>1&&console.time("creation"),vt=this.tiles[Gt]=rt(ve,xe,Ae,Ue,Kt),this.tileCoords.push({z:xe,x:Ae,y:Ue}),zt)){zt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",xe,Ae,Ue,vt.numFeatures,vt.numPoints,vt.numSimplified),console.timeEnd("creation"));const lr=`z${xe}`;this.stats[lr]=(this.stats[lr]||0)+1,this.total++}if(vt.source=ve,tt==null){if(xe===Kt.indexMaxZoom||vt.numPoints<=Kt.indexMaxPoints)continue}else{if(xe===Kt.maxZoom||xe===tt)continue;if(tt!=null){const lr=tt-xe;if(Ae!==_t>>lr||Ue!==Mt>>lr)continue}}if(vt.source=null,ve.length===0)continue;zt>1&&console.time("clipping");const Pr=.5*Kt.buffer/Kt.extent,Tr=.5-Pr,Ye=.5+Pr,ot=1+Pr;let jt=null,ne=null,de=null,Be=null,et=mt(ve,Ct,Ae-Pr,Ae+Ye,0,vt.minX,vt.maxX,Kt),Lt=mt(ve,Ct,Ae+Tr,Ae+ot,0,vt.minX,vt.maxX,Kt);ve=null,et&&(jt=mt(et,Ct,Ue-Pr,Ue+Ye,1,vt.minY,vt.maxY,Kt),ne=mt(et,Ct,Ue+Tr,Ue+ot,1,vt.minY,vt.maxY,Kt),et=null),Lt&&(de=mt(Lt,Ct,Ue-Pr,Ue+Ye,1,vt.minY,vt.maxY,Kt),Be=mt(Lt,Ct,Ue+Tr,Ue+ot,1,vt.minY,vt.maxY,Kt),Lt=null),zt>1&&console.timeEnd("clipping"),Pt.push(jt||[],xe+1,2*Ae,2*Ue),Pt.push(ne||[],xe+1,2*Ae,2*Ue+1),Pt.push(de||[],xe+1,2*Ae+1,2*Ue),Pt.push(Be||[],xe+1,2*Ae+1,2*Ue+1)}}getTile(ve,xe,Ae){ve=+ve,xe=+xe,Ae=+Ae;const Ue=this.options,{extent:tt,debug:_t}=Ue;if(ve<0||ve>24)return null;const Mt=1<<ve,Pt=ur(ve,xe=xe+Mt&Mt-1,Ae);if(this.tiles[Pt])return Qt(this.tiles[Pt],tt);_t>1&&console.log("drilling down to z%d-%d-%d",ve,xe,Ae);let Kt,zt=ve,Ct=xe,Gt=Ae;for(;!Kt&&zt>0;)zt--,Ct>>=1,Gt>>=1,Kt=this.tiles[ur(zt,Ct,Gt)];return Kt&&Kt.source?(_t>1&&(console.log("found parent tile z%d-%d-%d",zt,Ct,Gt),console.time("drilling down")),this.splitTile(Kt.source,zt,Ct,Gt,ve,xe,Ae),_t>1&&console.timeEnd("drilling down"),this.tiles[Pt]?Qt(this.tiles[Pt],tt):null):null}}function ur(bt,ve,xe){return 32*((1<<bt)*xe+ve)+bt}function br(bt,ve){return ve?bt.properties[ve]:bt.id}function xr(bt,ve){if(bt==null)return!0;if(bt.type==="Feature")return br(bt,ve)!=null;if(bt.type==="FeatureCollection"){const xe=new Set;for(const Ae of bt.features){const Ue=br(Ae,ve);if(Ue==null||xe.has(Ue))return!1;xe.add(Ue)}return!0}return!1}function Rr(bt,ve){const xe=new Map;if(bt!=null)if(bt.type==="Feature")xe.set(br(bt,ve),bt);else for(const Ae of bt.features)xe.set(br(Ae,ve),Ae);return xe}class wr extends v{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ve,xe){return u._(this,void 0,void 0,(function*(){const Ae=ve.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ue=this._geoJSONIndex.getTile(Ae.z,Ae.x,Ae.y);if(!Ue)return null;const tt=new F(Ue.features);let _t=X(tt);return _t.byteOffset===0&&_t.byteLength===_t.buffer.byteLength||(_t=new Uint8Array(_t)),{vectorTile:tt,rawData:_t.buffer}}))}loadData(ve){return u._(this,void 0,void 0,(function*(){var xe;(xe=this._pendingRequest)===null||xe===void 0||xe.abort();const Ae=!!(ve&&ve.request&&ve.request.collectResourceTiming)&&new u.cM(ve.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ve,this._pendingRequest),this._geoJSONIndex=ve.cluster?new ae((function({superclusterOptions:_t,clusterProperties:Mt}){if(!Mt||!_t)return _t;const Pt={},Kt={},zt={accumulated:null,zoom:0},Ct={properties:null},Gt=Object.keys(Mt);for(const vt of Gt){const[Pr,Tr]=Mt[vt],Ye=u.cT(Tr),ot=u.cT(typeof Pr=="string"?[Pr,["accumulated"],["get",vt]]:Pr);Pt[vt]=Ye.value,Kt[vt]=ot.value}return _t.map=vt=>{Ct.properties=vt;const Pr={};for(const Tr of Gt)Pr[Tr]=Pt[Tr].evaluate(zt,Ct);return Pr},_t.reduce=(vt,Pr)=>{Ct.properties=Pr;for(const Tr of Gt)zt.accumulated=vt[Tr],vt[Tr]=Kt[Tr].evaluate(zt,Ct)},_t})(ve)).load((yield this._pendingData).features):(Ue=yield this._pendingData,new Wt(Ue,ve.geojsonVtOptions)),this.loaded={};const tt={};if(Ae){const _t=Ae.finish();_t&&(tt.resourceTiming={},tt.resourceTiming[ve.source]=JSON.parse(JSON.stringify(_t)))}return tt}catch(tt){if(delete this._pendingRequest,u.cx(tt))return{abandoned:!0};throw tt}var Ue}))}getData(){return u._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ve){const xe=this.loaded;return xe&&xe[ve.uid]?super.reloadTile(ve):this.loadTile(ve)}loadAndProcessGeoJSON(ve,xe){return u._(this,void 0,void 0,(function*(){let Ae=yield this.loadGeoJSON(ve,xe);if(delete this._pendingRequest,typeof Ae!="object")throw new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`);if(R(Ae,!0),ve.filter){const Ue=u.cT(ve.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ue.result==="error")throw new Error(Ue.value.map((_t=>`${_t.key}: ${_t.message}`)).join(", "));Ae={type:"FeatureCollection",features:Ae.features.filter((_t=>Ue.value.evaluate({zoom:0},_t)))}}return Ae}))}loadGeoJSON(ve,xe){return u._(this,void 0,void 0,(function*(){const{promoteId:Ae}=ve;if(ve.request){const Ue=yield u.j(ve.request,xe);return this._dataUpdateable=xr(Ue.data,Ae)?Rr(Ue.data,Ae):void 0,Ue.data}if(typeof ve.data=="string")try{const Ue=JSON.parse(ve.data);return this._dataUpdateable=xr(Ue,Ae)?Rr(Ue,Ae):void 0,Ue}catch{throw new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`)}if(!ve.dataDiff)throw new Error(`Input data given to '${ve.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ve.source}`);return(function(Ue,tt,_t){var Mt,Pt,Kt,zt;if(tt.removeAll&&Ue.clear(),tt.remove)for(const Ct of tt.remove)Ue.delete(Ct);if(tt.add)for(const Ct of tt.add){const Gt=br(Ct,_t);Gt!=null&&Ue.set(Gt,Ct)}if(tt.update)for(const Ct of tt.update){let Gt=Ue.get(Ct.id);if(Gt==null)continue;const vt=!Ct.removeAllProperties&&(((Mt=Ct.removeProperties)===null||Mt===void 0?void 0:Mt.length)>0||((Pt=Ct.addOrUpdateProperties)===null||Pt===void 0?void 0:Pt.length)>0);if((Ct.newGeometry||Ct.removeAllProperties||vt)&&(Gt=Object.assign({},Gt),Ue.set(Ct.id,Gt),vt&&(Gt.properties=Object.assign({},Gt.properties))),Ct.newGeometry&&(Gt.geometry=Ct.newGeometry),Ct.removeAllProperties)Gt.properties={};else if(((Kt=Ct.removeProperties)===null||Kt===void 0?void 0:Kt.length)>0)for(const Pr of Ct.removeProperties)Object.prototype.hasOwnProperty.call(Gt.properties,Pr)&&delete Gt.properties[Pr];if(((zt=Ct.addOrUpdateProperties)===null||zt===void 0?void 0:zt.length)>0)for(const{key:Pr,value:Tr}of Ct.addOrUpdateProperties)Gt.properties[Pr]=Tr}})(this._dataUpdateable,ve.dataDiff,Ae),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(ve){return u._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ve){return this._geoJSONIndex.getClusterExpansionZoom(ve.clusterId)}getClusterChildren(ve){return this._geoJSONIndex.getChildren(ve.clusterId)}getClusterLeaves(ve){return this._geoJSONIndex.getLeaves(ve.clusterId,ve.limit,ve.offset)}}class fr{constructor(ve){this.self=ve,this.actor=new u.J(ve),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(xe,Ae)=>{if(this.externalWorkerSourceTypes[xe])throw new Error(`Worker source with name "${xe}" already registered.`);this.externalWorkerSourceTypes[xe]=Ae},this.self.addProtocol=u.cz,this.self.removeProtocol=u.cA,this.self.registerRTLTextPlugin=xe=>{u.cU.setMethods(xe)},this.actor.registerMessageHandler("LDT",((xe,Ae)=>this._getDEMWorkerSource(xe,Ae.source).loadTile(Ae))),this.actor.registerMessageHandler("RDT",((xe,Ae)=>u._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(xe,Ae.source).removeTile(Ae)})))),this.actor.registerMessageHandler("GCEZ",((xe,Ae)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(xe,Ae.type,Ae.source).getClusterExpansionZoom(Ae)})))),this.actor.registerMessageHandler("GCC",((xe,Ae)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(xe,Ae.type,Ae.source).getClusterChildren(Ae)})))),this.actor.registerMessageHandler("GCL",((xe,Ae)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(xe,Ae.type,Ae.source).getClusterLeaves(Ae)})))),this.actor.registerMessageHandler("LD",((xe,Ae)=>this._getWorkerSource(xe,Ae.type,Ae.source).loadData(Ae))),this.actor.registerMessageHandler("GD",((xe,Ae)=>this._getWorkerSource(xe,Ae.type,Ae.source).getData())),this.actor.registerMessageHandler("LT",((xe,Ae)=>this._getWorkerSource(xe,Ae.type,Ae.source).loadTile(Ae))),this.actor.registerMessageHandler("RT",((xe,Ae)=>this._getWorkerSource(xe,Ae.type,Ae.source).reloadTile(Ae))),this.actor.registerMessageHandler("AT",((xe,Ae)=>this._getWorkerSource(xe,Ae.type,Ae.source).abortTile(Ae))),this.actor.registerMessageHandler("RMT",((xe,Ae)=>this._getWorkerSource(xe,Ae.type,Ae.source).removeTile(Ae))),this.actor.registerMessageHandler("RS",((xe,Ae)=>u._(this,void 0,void 0,(function*(){if(!this.workerSources[xe]||!this.workerSources[xe][Ae.type]||!this.workerSources[xe][Ae.type][Ae.source])return;const Ue=this.workerSources[xe][Ae.type][Ae.source];delete this.workerSources[xe][Ae.type][Ae.source],Ue.removeSource!==void 0&&Ue.removeSource(Ae)})))),this.actor.registerMessageHandler("RM",(xe=>u._(this,void 0,void 0,(function*(){delete this.layerIndexes[xe],delete this.availableImages[xe],delete this.workerSources[xe],delete this.demWorkerSources[xe]})))),this.actor.registerMessageHandler("SR",((xe,Ae)=>u._(this,void 0,void 0,(function*(){this.referrer=Ae})))),this.actor.registerMessageHandler("SRPS",((xe,Ae)=>this._syncRTLPluginState(xe,Ae))),this.actor.registerMessageHandler("IS",((xe,Ae)=>u._(this,void 0,void 0,(function*(){this.self.importScripts(Ae)})))),this.actor.registerMessageHandler("SI",((xe,Ae)=>this._setImages(xe,Ae))),this.actor.registerMessageHandler("UL",((xe,Ae)=>u._(this,void 0,void 0,(function*(){this._getLayerIndex(xe).update(Ae.layers,Ae.removedIds)})))),this.actor.registerMessageHandler("SL",((xe,Ae)=>u._(this,void 0,void 0,(function*(){this._getLayerIndex(xe).replace(Ae)}))))}_setImages(ve,xe){return u._(this,void 0,void 0,(function*(){this.availableImages[ve]=xe;for(const Ae in this.workerSources[ve]){const Ue=this.workerSources[ve][Ae];for(const tt in Ue)Ue[tt].availableImages=xe}}))}_syncRTLPluginState(ve,xe){return u._(this,void 0,void 0,(function*(){return yield u.cU.syncState(xe,this.self.importScripts)}))}_getAvailableImages(ve){let xe=this.availableImages[ve];return xe||(xe=[]),xe}_getLayerIndex(ve){let xe=this.layerIndexes[ve];return xe||(xe=this.layerIndexes[ve]=new a),xe}_getWorkerSource(ve,xe,Ae){if(this.workerSources[ve]||(this.workerSources[ve]={}),this.workerSources[ve][xe]||(this.workerSources[ve][xe]={}),!this.workerSources[ve][xe][Ae]){const Ue={sendAsync:(tt,_t)=>(tt.targetMapId=ve,this.actor.sendAsync(tt,_t))};switch(xe){case"vector":this.workerSources[ve][xe][Ae]=new v(Ue,this._getLayerIndex(ve),this._getAvailableImages(ve));break;case"geojson":this.workerSources[ve][xe][Ae]=new wr(Ue,this._getLayerIndex(ve),this._getAvailableImages(ve));break;default:this.workerSources[ve][xe][Ae]=new this.externalWorkerSourceTypes[xe](Ue,this._getLayerIndex(ve),this._getAvailableImages(ve))}}return this.workerSources[ve][xe][Ae]}_getDEMWorkerSource(ve,xe){return this.demWorkerSources[ve]||(this.demWorkerSources[ve]={}),this.demWorkerSources[ve][xe]||(this.demWorkerSources[ve][xe]=new w),this.demWorkerSources[ve][xe]}}return u.i(self)&&(self.worker=new fr(self)),fr})),i("index",["exports","./shared"],(function(u,a){var p="5.6.0";function h(){var S=new a.A(4);return a.A!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S}let m,v;const w={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(S,s,c){const y=requestAnimationFrame((E=>{b(),s(E)})),{unsubscribe:b}=a.s(S.signal,"abort",(()=>{b(),cancelAnimationFrame(y),c(a.c())}),!1)},frameAsync(S){return new Promise(((s,c)=>{this.frame(S,s,c)}))},getImageData(S,s=0){return this.getImageCanvasContext(S).getImageData(-s,-s,S.width+2*s,S.height+2*s)},getImageCanvasContext(S){const s=window.document.createElement("canvas"),c=s.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return s.width=S.width,s.height=S.height,c.drawImage(S,0,0,S.width,S.height),c},resolveURL:S=>(m||(m=document.createElement("a")),m.href=S,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};class x{static testProp(s){if(!x.docStyle)return s[0];for(let c=0;c<s.length;c++)if(s[c]in x.docStyle)return s[c];return s[0]}static create(s,c,y){const b=window.document.createElement(s);return c!==void 0&&(b.className=c),y&&y.appendChild(b),b}static createNS(s,c){return window.document.createElementNS(s,c)}static disableDrag(){x.docStyle&&x.selectProp&&(x.userSelect=x.docStyle[x.selectProp],x.docStyle[x.selectProp]="none")}static enableDrag(){x.docStyle&&x.selectProp&&(x.docStyle[x.selectProp]=x.userSelect)}static setTransform(s,c){s.style[x.transformProp]=c}static addEventListener(s,c,y,b={}){s.addEventListener(c,y,"passive"in b?b:b.capture)}static removeEventListener(s,c,y,b={}){s.removeEventListener(c,y,"passive"in b?b:b.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",x.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",x.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",x.suppressClickInternal,!0)}),0)}static getScale(s){const c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}static getPoint(s,c,y){const b=c.boundingClientRect;return new a.P((y.clientX-b.left)/c.x-s.clientLeft,(y.clientY-b.top)/c.y-s.clientTop)}static mousePos(s,c){const y=x.getScale(s);return x.getPoint(s,y,c)}static touchPos(s,c){const y=[],b=x.getScale(s);for(let E=0;E<c.length;E++)y.push(x.getPoint(s,b,c[E]));return y}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){const c=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),y=c.querySelectorAll("script");for(const b of y)b.remove();return x.clean(c),c.innerHTML}static isPossiblyDangerous(s,c){const y=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!y.includes("javascript:")&&!y.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){const c=s.children;for(const y of c)x.removeAttributes(y),x.clean(y)}static removeAttributes(s){for(const{name:c,value:y}of s.attributes)x.isPossiblyDangerous(c,y)&&s.removeAttribute(c)}}x.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,x.selectProp=x.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),x.transformProp=x.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function(S){!k&&R&&(N?F(S):T=S)}};let T,R,k=!1,N=!1;function F(S){const s=S.createTexture();S.bindTexture(S.TEXTURE_2D,s);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,R),S.isContextLost())return;P.supported=!0}catch{}S.deleteTexture(s),k=!0}var D;typeof document<"u"&&(R=document.createElement("img"),R.onload=()=>{T&&F(T),T=null,N=!0},R.onerror=()=>{k=!0,T=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(S){let s,c,y,b;S.resetRequestQueue=()=>{s=[],c=0,y=0,b={}},S.addThrottleControl=V=>{const Y=y++;return b[Y]=V,Y},S.removeThrottleControl=V=>{delete b[V],M()},S.getImage=(V,Y,re=!0)=>new Promise(((ce,oe)=>{P.supported&&(V.headers||(V.headers={}),V.headers.accept="image/webp,*/*"),a.e(V,{type:"image"}),s.push({abortController:Y,requestParameters:V,supportImageRefresh:re,state:"queued",onError:ge=>{oe(ge)},onSuccess:ge=>{ce(ge)}}),M()}));const E=V=>a._(this,void 0,void 0,(function*(){V.state="running";const{requestParameters:Y,supportImageRefresh:re,onError:ce,onSuccess:oe,abortController:ge}=V,Me=re===!1&&!a.i(self)&&!a.g(Y.url)&&(!Y.headers||Object.keys(Y.headers).reduce(((Xe,at)=>Xe&&at==="accept"),!0));c++;const Ze=Me?j(Y,ge):a.m(Y,ge);try{const Xe=yield Ze;delete V.abortController,V.state="completed",Xe.data instanceof HTMLImageElement||a.b(Xe.data)?oe(Xe):Xe.data&&oe({data:yield(We=Xe.data,typeof createImageBitmap=="function"?a.f(We):a.h(We)),cacheControl:Xe.cacheControl,expires:Xe.expires})}catch(Xe){delete V.abortController,ce(Xe)}finally{c--,M()}var We})),M=()=>{const V=(()=>{for(const Y of Object.keys(b))if(b[Y]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let Y=c;Y<V&&s.length>0;Y++){const re=s.shift();re.abortController.signal.aborted?Y--:E(re)}},j=(V,Y)=>new Promise(((re,ce)=>{const oe=new Image,ge=V.url,Me=V.credentials;Me&&Me==="include"?oe.crossOrigin="use-credentials":(Me&&Me==="same-origin"||!a.d(ge))&&(oe.crossOrigin="anonymous"),Y.signal.addEventListener("abort",(()=>{oe.src="",ce(a.c())})),oe.fetchPriority="high",oe.onload=()=>{oe.onerror=oe.onload=null,re({data:oe})},oe.onerror=()=>{oe.onerror=oe.onload=null,Y.signal.aborted||ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},oe.src=ge}))})(D||(D={})),D.resetRequestQueue();class U{constructor(s){this._transformRequestFn=s}transformRequest(s,c){return this._transformRequestFn&&this._transformRequestFn(s,c)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function B(S){const s=[];if(typeof S=="string")s.push({id:"default",url:S});else if(S&&S.length>0){const c=[];for(const{id:y,url:b}of S){const E=`${y}${b}`;c.indexOf(E)===-1&&(c.push(E),s.push({id:y,url:b}))}}return s}function Z(S,s,c){try{const y=new URL(S);return y.pathname+=`${s}${c}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${S}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function J(S){const{userImage:s}=S;return!!(s&&s.render&&s.render())&&(S.data.replace(new Uint8Array(s.data.buffer)),!0)}class X extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:c,promiseResolve:y}of this.requestors)y(this._getImagesForIds(c));this.requestors=[]}}getImage(s){const c=this.images[s];if(c&&!c.data&&c.spriteData){const y=c.spriteData;c.data=new a.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),c.spriteData=null}return c}addImage(s,c){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,c)&&(this.images[s]=c)}_validate(s,c){let y=!0;const b=c.data||c.spriteData;return this._validateStretch(c.stretchX,b&&b.width)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchX" value`))),y=!1),this._validateStretch(c.stretchY,b&&b.height)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "stretchY" value`))),y=!1),this._validateContent(c.content,c)||(this.fire(new a.k(new Error(`Image "${s}" has invalid "content" value`))),y=!1),y}_validateStretch(s,c){if(!s)return!0;let y=0;for(const b of s){if(b[0]<y||b[1]<b[0]||c<b[1])return!1;y=b[1]}return!0}_validateContent(s,c){if(!s)return!0;if(s.length!==4)return!1;const y=c.spriteData,b=y&&y.width||c.data.width,E=y&&y.height||c.data.height;return!(s[0]<0||b<s[0]||s[1]<0||E<s[1]||s[2]<0||b<s[2]||s[3]<0||E<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,c,y=!0){const b=this.getImage(s);if(y&&(b.data.width!==c.data.width||b.data.height!==c.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=b.version+1,this.images[s]=c,this.updatedImages[s]=!0}removeImage(s){const c=this.images[s];delete this.images[s],delete this.patterns[s],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise(((c,y)=>{let b=!0;if(!this.isLoaded())for(const E of s)this.images[E]||(b=!1);this.isLoaded()||b?c(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:c})}))}_getImagesForIds(s){const c={};for(const y of s){let b=this.getImage(y);b||(this.fire(new a.l("styleimagemissing",{id:y})),b=this.getImage(y)),b?c[y]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,textFitWidth:b.textFitWidth,textFitHeight:b.textFitHeight,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:a.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:s,height:c}=this.atlasImage;return{width:s,height:c}}getPattern(s){const c=this.patterns[s],y=this.getImage(s);if(!y)return null;if(c&&c.position.version===y.version)return c.position;if(c)c.position.version=y.version;else{const b={w:y.data.width+2,h:y.data.height+2,x:0,y:0},E=new a.I(b,y);this.patterns[s]={bin:b,position:E}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const c=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(s,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const E in this.patterns)s.push(this.patterns[E].bin);const{w:c,h:y}=a.p(s),b=this.atlasImage;b.resize({width:c||1,height:y||1});for(const E in this.patterns){const{bin:M}=this.patterns[E],j=M.x+1,V=M.y+1,Y=this.getImage(E).data,re=Y.width,ce=Y.height;a.R.copy(Y,b,{x:0,y:0},{x:j,y:V},{width:re,height:ce}),a.R.copy(Y,b,{x:0,y:ce-1},{x:j,y:V-1},{width:re,height:1}),a.R.copy(Y,b,{x:0,y:0},{x:j,y:V+ce},{width:re,height:1}),a.R.copy(Y,b,{x:re-1,y:0},{x:j-1,y:V},{width:1,height:ce}),a.R.copy(Y,b,{x:0,y:0},{x:j+re,y:V},{width:1,height:ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const c of s){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const y=this.getImage(c);y||a.w(`Image with ID: "${c}" was not found`),J(y)&&this.updateImage(c,y)}}}const le=1e20;function H(S,s,c,y,b,E,M,j,V){for(let Y=s;Y<s+y;Y++)G(S,c*E+Y,E,b,M,j,V);for(let Y=c;Y<c+b;Y++)G(S,Y*E+s,1,y,M,j,V)}function G(S,s,c,y,b,E,M){E[0]=0,M[0]=-1e20,M[1]=le,b[0]=S[s];for(let j=1,V=0,Y=0;j<y;j++){b[j]=S[s+j*c];const re=j*j;do{const ce=E[V];Y=(b[j]-b[ce]+re-ce*ce)/(j-ce)/2}while(Y<=M[V]&&--V>-1);V++,E[V]=j,M[V]=Y,M[V+1]=le}for(let j=0,V=0;j<y;j++){for(;M[V+1]<j;)V++;const Y=E[V],re=j-Y;S[s+j*c]=b[Y]+re*re}}class ae{constructor(s,c){this.requestManager=s,this.localIdeographFontFamily=c,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return a._(this,void 0,void 0,(function*(){const c=[];for(const E in s)for(const M of s[E])c.push(this._getAndCacheGlyphsPromise(E,M));const y=yield Promise.all(c),b={};for(const{stack:E,id:M,glyph:j}of y)b[E]||(b[E]={}),b[E][M]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics};return b}))}_getAndCacheGlyphsPromise(s,c){return a._(this,void 0,void 0,(function*(){let y=this.entries[s];y||(y=this.entries[s]={glyphs:{},requests:{},ranges:{}});let b=y.glyphs[c];if(b!==void 0)return{stack:s,id:c,glyph:b};if(b=this._tinySDF(y,s,c),b)return y.glyphs[c]=b,{stack:s,id:c,glyph:b};const E=Math.floor(c/256);if(256*E>65535)throw new Error("glyphs > 65535 not supported");if(y.ranges[E])return{stack:s,id:c,glyph:b};if(!this.url)throw new Error("glyphsUrl is not set");if(!y.requests[E]){const j=ae.loadGlyphRange(s,E,this.url,this.requestManager);y.requests[E]=j}const M=yield y.requests[E];for(const j in M)this._doesCharSupportLocalGlyph(+j)||(y.glyphs[+j]=M[+j]);return y.ranges[E]=!0,{stack:s,id:c,glyph:M[c]||null}}))}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||a.u["CJK Unified Ideographs"](s)||a.u["Hangul Syllables"](s)||a.u.Hiragana(s)||a.u.Katakana(s)||a.u["CJK Symbols and Punctuation"](s)||a.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,c,y){const b=this.localIdeographFontFamily;if(!b||!this._doesCharSupportLocalGlyph(y))return;let E=s.tinySDF;if(!E){let j="400";/bold/i.test(c)?j="900":/medium/i.test(c)?j="500":/light/i.test(c)&&(j="200"),E=s.tinySDF=new ae.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:b,fontWeight:j})}const M=E.draw(String.fromCharCode(y));return{id:y,bitmap:new a.q({width:M.width||60,height:M.height||60},M.data),metrics:{width:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:M.glyphAdvance/2||24,isDoubleResolution:!0}}}}ae.loadGlyphRange=function(S,s,c,y){return a._(this,void 0,void 0,(function*(){const b=256*s,E=b+255,M=y.transformRequest(c.replace("{fontstack}",S).replace("{range}",`${b}-${E}`),"Glyphs"),j=yield a.n(M,new AbortController);if(!j||!j.data)throw new Error(`Could not load glyph range. range: ${s}, ${b}-${E}`);const V={};for(const Y of a.o(j.data))V[Y.id]=Y;return V}))},ae.TinySDF=class{constructor({fontSize:S=24,buffer:s=3,radius:c=8,cutoff:y=.25,fontFamily:b="sans-serif",fontWeight:E="normal",fontStyle:M="normal"}={}){this.buffer=s,this.cutoff=y,this.radius=c;const j=this.size=S+4*s,V=this._createCanvas(j),Y=this.ctx=V.getContext("2d",{willReadFrequently:!0});Y.font=`${M} ${E} ${S}px ${b}`,Y.textBaseline="alphabetic",Y.textAlign="left",Y.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(S){const s=document.createElement("canvas");return s.width=s.height=S,s}draw(S){const{width:s,actualBoundingBoxAscent:c,actualBoundingBoxDescent:y,actualBoundingBoxLeft:b,actualBoundingBoxRight:E}=this.ctx.measureText(S),M=Math.ceil(c),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-b))),V=Math.min(this.size-this.buffer,M+Math.ceil(y)),Y=j+2*this.buffer,re=V+2*this.buffer,ce=Math.max(Y*re,0),oe=new Uint8ClampedArray(ce),ge={data:oe,width:Y,height:re,glyphWidth:j,glyphHeight:V,glyphTop:M,glyphLeft:0,glyphAdvance:s};if(j===0||V===0)return ge;const{ctx:Me,buffer:Ze,gridInner:We,gridOuter:Xe}=this;Me.clearRect(Ze,Ze,j,V),Me.fillText(S,Ze,Ze+M);const at=Me.getImageData(Ze,Ze,j,V);Xe.fill(le,0,ce),We.fill(0,0,ce);for(let wt=0;wt<V;wt++)for(let dt=0;dt<j;dt++){const Et=at.data[4*(wt*j+dt)+3]/255;if(Et===0)continue;const Tt=(wt+Ze)*Y+dt+Ze;if(Et===1)Xe[Tt]=0,We[Tt]=le;else{const ft=.5-Et;Xe[Tt]=ft>0?ft*ft:0,We[Tt]=ft<0?ft*ft:0}}H(Xe,0,0,Y,re,Y,this.f,this.v,this.z),H(We,Ze,Ze,j,V,Y,this.f,this.v,this.z);for(let wt=0;wt<ce;wt++){const dt=Math.sqrt(Xe[wt])-Math.sqrt(We[wt]);oe[wt]=Math.round(255-255*(dt/this.radius+this.cutoff))}return ge}};class se{constructor(){this.specification=a.v.light.position}possiblyEvaluate(s,c){return a.B(s.expression.evaluate(c))}interpolate(s,c,y){return{x:a.C.number(s.x,c.x,y),y:a.C.number(s.y,c.y,y),z:a.C.number(s.z,c.z,y)}}}let ue;class me extends a.E{constructor(s){super(),ue=ue||new a.r({anchor:new a.D(a.v.light.anchor),position:new se,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(ue),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,c={}){if(!this._validate(a.x,s,c))for(const y in s){const b=s[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),b):this._transitionable.setValue(y,b)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,c,y){return(!y||y.validate!==!1)&&a.y(this,s.call(a.z,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Ce=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class pe extends a.E{constructor(s){super(),this._transitionable=new a.t(Ce),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(s,c={}){if(!this._validate(a.G,s,c)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in s){const b=s[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),b):this._transitionable.setValue(y,b)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,c,y={}){return y?.validate!==!1&&a.y(this,s.call(a.z,a.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class Ee{constructor(s,c){this.width=s,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,c){const y=s.join(",")+String(c);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(s,c)),this.dashEntry[y]}getDashRanges(s,c,y){const b=[];let E=s.length%2==1?-s[s.length-1]*y:0,M=s[0]*y,j=!0;b.push({left:E,right:M,isDash:j,zeroLength:s[0]===0});let V=s[0];for(let Y=1;Y<s.length;Y++){j=!j;const re=s[Y];E=V*y,V+=re,M=V*y,b.push({left:E,right:M,isDash:j,zeroLength:re===0})}return b}addRoundDash(s,c,y){const b=c/2;for(let E=-y;E<=y;E++){const M=this.width*(this.nextRow+y+E);let j=0,V=s[j];for(let Y=0;Y<this.width;Y++){Y/V.right>1&&(V=s[++j]);const re=Math.abs(Y-V.left),ce=Math.abs(Y-V.right),oe=Math.min(re,ce);let ge;const Me=E/y*(b+1);if(V.isDash){const Ze=b-Math.abs(Me);ge=Math.sqrt(oe*oe+Ze*Ze)}else ge=b-Math.sqrt(oe*oe+Me*Me);this.data[M+Y]=Math.max(0,Math.min(255,ge+128))}}}addRegularDash(s){for(let j=s.length-1;j>=0;--j){const V=s[j],Y=s[j+1];V.zeroLength?s.splice(j,1):Y&&Y.isDash===V.isDash&&(Y.left=V.left,s.splice(j,1))}const c=s[0],y=s[s.length-1];c.isDash===y.isDash&&(c.left=y.left-this.width,y.right=c.right+this.width);const b=this.width*this.nextRow;let E=0,M=s[E];for(let j=0;j<this.width;j++){j/M.right>1&&(M=s[++E]);const V=Math.abs(j-M.left),Y=Math.abs(j-M.right),re=Math.min(V,Y);this.data[b+j]=Math.max(0,Math.min(255,(M.isDash?re:-re)+128))}}addDash(s,c){const y=c?7:0,b=2*y+1;if(this.nextRow+b>this.height)return a.w("LineAtlas out of space"),null;let E=0;for(let j=0;j<s.length;j++)E+=s[j];if(E!==0){const j=this.width/E,V=this.getDashRanges(s,this.width,j);c?this.addRoundDash(V,j,y):this.addRegularDash(V)}const M={y:(this.nextRow+y+.5)/this.height,height:2*y/this.height,width:E};return this.nextRow+=b,this.dirty=!0,M}bind(s){const c=s.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Fe="maplibre_preloaded_worker_pool";class Ke{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Ke.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}const fe=Math.floor(w.hardwareConcurrency/2);let _e,Pe;function ke(){return _e||(_e=new Ke),_e}Ke.workerCount=a.H(globalThis)?Math.max(Math.min(fe,3),1):1;class $e{constructor(s,c){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=c;const y=this.workerPool.acquire(c);for(let b=0;b<y.length;b++){const E=new a.J(y[b],c);E.name=`Worker ${b}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,c){const y=[];for(const b of this.actors)y.push(b.sendAsync({type:s,data:c}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,c){for(const y of this.actors)y.registerMessageHandler(s,c)}}function ht(){return Pe||(Pe=new $e(ke(),a.K),Pe.registerMessageHandler("GR",((S,s,c)=>a.m(s,c)))),Pe}function Ot(S,s){const c=a.L();return a.M(c,c,[1,1,0]),a.N(c,c,[.5*S.width,.5*S.height,1]),S.calculatePosMatrix?a.O(c,c,S.calculatePosMatrix(s.toUnwrapped())):c}function mt(S,s,c,y,b,E,M){var j;const V=(function(oe,ge,Me){if(oe)for(const Ze of oe){const We=ge[Ze];if(We&&We.source===Me&&We.type==="fill-extrusion")return!0}else for(const Ze in ge){const We=ge[Ze];if(We.source===Me&&We.type==="fill-extrusion")return!0}return!1})((j=b?.layers)!==null&&j!==void 0?j:null,s,S.id),Y=E.maxPitchScaleFactor(),re=S.tilesIn(y,Y,V);re.sort(nt);const ce=[];for(const oe of re)ce.push({wrappedTileID:oe.tileID.wrapped().key,queryResults:oe.tile.queryRenderedFeatures(s,c,S._state,oe.queryGeometry,oe.cameraQueryGeometry,oe.scale,b,E,Y,Ot(S.transform,oe.tileID),M?(ge,Me)=>M(oe.tileID,ge,Me):void 0)});return(function(oe,ge){for(const Me in oe)for(const Ze of oe[Me])Nt(Ze,ge);return oe})((function(oe){const ge={},Me={};for(const Ze of oe){const We=Ze.queryResults,Xe=Ze.wrappedTileID,at=Me[Xe]=Me[Xe]||{};for(const wt in We){const dt=We[wt],Et=at[wt]=at[wt]||{},Tt=ge[wt]=ge[wt]||[];for(const ft of dt)Et[ft.featureIndex]||(Et[ft.featureIndex]=!0,Tt.push(ft))}}return ge})(ce),S)}function nt(S,s){const c=S.tileID,y=s.tileID;return c.overscaledZ-y.overscaledZ||c.canonical.y-y.canonical.y||c.wrap-y.wrap||c.canonical.x-y.canonical.x}function Nt(S,s){const c=S.feature,y=s.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=y}function kt(S,s,c){return a._(this,void 0,void 0,(function*(){let y=S;if(S.url?y=(yield a.j(s.transformRequest(S.url,"Source"),c)).data:yield w.frameAsync(c),!y)return null;const b=a.Q(a.e(y,S),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(b.vectorLayerIds=y.vector_layers.map((E=>E.id))),b}))}class It{constructor(s,c){s&&(c?this.setSouthWest(s).setNorthEast(c):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}setSouthWest(s){return this._sw=s instanceof a.S?new a.S(s.lng,s.lat):a.S.convert(s),this}extend(s){const c=this._sw,y=this._ne;let b,E;if(s instanceof a.S)b=s,E=s;else{if(!(s instanceof It))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(It.convert(s)):this.extend(a.S.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(a.S.convert(s)):this;if(b=s._sw,E=s._ne,!b||!E)return this}return c||y?(c.lng=Math.min(b.lng,c.lng),c.lat=Math.min(b.lat,c.lat),y.lng=Math.max(E.lng,y.lng),y.lat=Math.max(E.lat,y.lat)):(this._sw=new a.S(b.lng,b.lat),this._ne=new a.S(E.lng,E.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:c,lat:y}=a.S.convert(s);let b=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&b}static convert(s){return s instanceof It?s:s&&new It(s)}static fromLngLat(s,c=0){const y=360*c/40075017,b=y/Math.cos(Math.PI/180*s.lat);return new It(new a.S(s.lng-b,s.lat-y),new a.S(s.lng+b,s.lat+y))}adjustAntiMeridian(){const s=new a.S(this._sw.lng,this._sw.lat),c=new a.S(this._ne.lng,this._ne.lat);return new It(s,s.lng>c.lng?new a.S(c.lng+360,c.lat):c)}}class gt{constructor(s,c,y){this.bounds=It.convert(this.validateBounds(s)),this.minzoom=c||0,this.maxzoom=y||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const c=Math.pow(2,s.z),y=Math.floor(a.V(this.bounds.getWest())*c),b=Math.floor(a.U(this.bounds.getNorth())*c),E=Math.ceil(a.V(this.bounds.getEast())*c),M=Math.ceil(a.U(this.bounds.getSouth())*c);return s.x>=y&&s.x<E&&s.y>=b&&s.y<M}}class Le extends a.E{constructor(s,c,y,b){if(super(),this.id=s,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(c,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield kt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(a.e(this,s),s.bounds&&(this.tileBounds=new gt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new a.k(s))}}))}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty((()=>{this._options.tiles=s})),this}setUrl(s){return this.setSourceProperty((()=>{this.url=s,this._options.url=s})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(s){return a._(this,void 0,void 0,(function*(){const c=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(c,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};y.request.collectResourceTiming=this._collectResourceTiming;let b="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise(((E,M)=>{s.reloadPromise={resolve:E,reject:M}}))}else s.actor=this.dispatcher.getActor(),b="LT";s.abortController=new AbortController;try{const E=yield s.actor.sendAsync({type:b,data:y},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,E)}catch(E){if(delete s.abortController,s.aborted)return;if(E&&E.status!==404)throw E;this._afterTileLoadWorkerResponse(s,null)}}))}_afterTileLoadWorkerResponse(s,c){if(c&&c.resourceTiming&&(s.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&s.setExpiryData(c),s.loadVectorData(c,this.map.painter),s.reloadPromise){const y=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(y.resolve).catch(y.reject)}}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class pr extends a.E{constructor(s,c,y,b){super(),this.id=s,this.dispatcher=y,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},c),a.e(this,a.Q(c,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,(function*(s=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield kt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(a.e(this,c),c.bounds&&(this.tileBounds=new gt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(c){this._tileJSONRequest=null,this.fire(new a.k(c))}}))}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty((()=>{this._options.tiles=s})),this}setUrl(s){return this.setSourceProperty((()=>{this.url=s,this._options.url=s})),this}serialize(){return a.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return a._(this,void 0,void 0,(function*(){const c=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const y=yield D.getImage(this.map._requestManager.transformRequest(c,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&s.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const b=this.map.painter.context,E=b.gl,M=y.data;s.texture=this.map.painter.getTileTexture(M.width),s.texture?s.texture.update(M,{useMipmap:!0}):(s.texture=new a.T(b,M,E.RGBA,{useMipmap:!0}),s.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(y){if(delete s.abortController,s.aborted)s.state="unloaded";else if(y)throw s.state="errored",y}}))}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)}))}hasTransition(){return!1}}class hr extends pr{constructor(s,c,y,b){super(s,c,y,b),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(s){return a._(this,void 0,void 0,(function*(){const c=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(c,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const b=yield D.getImage(y,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(b&&b.data){const E=b.data;this.map._refreshExpiredTiles&&(b.cacheControl||b.expires)&&s.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const M=a.b(E)&&a.W()?E:yield this.readImageNow(E),j={type:this.type,uid:s.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const V=yield s.actor.sendAsync({type:"LDT",data:j});s.dem=V,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(b){if(delete s.abortController,s.aborted)s.state="unloaded";else if(b)throw s.state="errored",b}}))}readImageNow(s){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.X()){const c=s.width+2,y=s.height+2;try{return new a.R({width:c,height:y},yield a.Y(s,-1,-1,c,y))}catch{}}return w.getImageData(s,1)}))}_getNeighboringTiles(s){const c=s.canonical,y=Math.pow(2,c.z),b=(c.x-1+y)%y,E=c.x===0?s.wrap-1:s.wrap,M=(c.x+1+y)%y,j=c.x+1===y?s.wrap+1:s.wrap,V={};return V[new a.Z(s.overscaledZ,E,c.z,b,c.y).key]={backfilled:!1},V[new a.Z(s.overscaledZ,j,c.z,M,c.y).key]={backfilled:!1},c.y>0&&(V[new a.Z(s.overscaledZ,E,c.z,b,c.y-1).key]={backfilled:!1},V[new a.Z(s.overscaledZ,s.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},V[new a.Z(s.overscaledZ,j,c.z,M,c.y-1).key]={backfilled:!1}),c.y+1<y&&(V[new a.Z(s.overscaledZ,E,c.z,b,c.y+1).key]={backfilled:!1},V[new a.Z(s.overscaledZ,s.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},V[new a.Z(s.overscaledZ,j,c.z,M,c.y+1).key]={backfilled:!1}),V}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))}))}}class vr extends a.E{constructor(s,c,y,b){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=y.getActor(),this.setEventedParent(b),this._data=c.data,this._options=a.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(a.$/this.tileSize)}_getClusterMaxZoom(s){const c=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${c}"`),c}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}getData(){return a._(this,void 0,void 0,(function*(){const s=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})}))}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map((c=>c.coordinates)).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,(function*(){const s=new It,c=yield this.getData();let y;switch(c.type){case"FeatureCollection":y=c.features.map((b=>this.getCoordinatesFromGeometry(b.geometry))).flat(1/0);break;case"Feature":y=this.getCoordinatesFromGeometry(c.geometry);break;default:y=this.getCoordinatesFromGeometry(c)}if(y.length==0)return s;for(let b=0;b<y.length-1;b+=2)s.extend([y[b],y[b+1]]);return s}))}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,c,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:c,offset:y}})}_updateWorkerData(s){return a._(this,void 0,void 0,(function*(){const c=a.e({type:this.type},this.workerOptions);s?c.dataDiff=s:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(w.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{const y=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||y.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let b=null;y.resourceTiming&&y.resourceTiming[this.id]&&(b=y.resourceTiming[this.id].slice(0));const E={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&a.e(E,{resourceTiming:b}),this.fire(new a.l("data",Object.assign(Object.assign({},E),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},E),{sourceDataType:"content"})))}catch(y){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(y))}}))}loaded(){return this._pendingLoads===0}loadTile(s){return a._(this,void 0,void 0,(function*(){const c=s.actor?"RT":"LT";s.actor=this.actor;const y={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};s.abortController=new AbortController;const b=yield this.actor.sendAsync({type:c,data:y},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(b,this.map.painter,c==="RT")}))}abortTile(s){return a._(this,void 0,void 0,(function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0}))}unloadTile(s){return a._(this,void 0,void 0,(function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Qt extends a.E{constructor(s,c,y,b){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=y,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=c}load(s){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield D.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,s&&(this.coordinates=s),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new a.k(c))}}))}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const c=s.map(a.a0.fromLngLat);var y;return this.tileID=(function(b){const E=a.a1.fromPoints(b),M=E.width(),j=E.height(),V=Math.max(M,j),Y=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),re=Math.pow(2,Y);return new a.a3(Y,Math.floor((E.minX+E.maxX)/2*re),Math.floor((E.minY+E.maxY)/2*re))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((b=>this.tileID.getTilePoint(b)._round())),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,c=s.gl;this.texture||(this.texture=new a.T(s,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const E=this.tiles[b];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,y=!0)}y&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){const{minX:c,minY:y,maxX:b,maxY:E}=a.a1.fromPoints(s),M={};for(let j=0;j<=a.a2;j++){const V=Math.pow(2,j),Y=Math.floor(c*V),re=Math.floor(y*V),ce=Math.floor(b*V),oe=Math.floor(E*V);M[j]={minTileX:Y,minTileY:re,maxTileX:ce,maxTileY:oe}}return M}}class qe extends Qt{constructor(s,c,y,b){super(s,c,y,b),this.roundZoom=!0,this.type="video",this.options=c}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const c of s.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield a.a4(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new a.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const c=this.video.seekable;s<c.start(0)||s>c.end(0)?this.fire(new a.k(new a.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,c=s.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(s,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const E=this.tiles[b];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,y=!0)}y&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class rt extends Qt{constructor(s,c,y,b){super(s,c,y,b),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((E=>!Array.isArray(E)||E.length!==2||E.some((M=>typeof M!="number"))))||this.fire(new a.k(new a.a5(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a5(`sources.${s}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new a.k(new a.a5(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a5(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a5(`sources.${s}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,y=c.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(c,this.canvas,y.RGBA,{premultiply:!0});let b=!1;for(const E in this.tiles){const M=this.tiles[E];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,b=!0)}b&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const ct={},Ft=S=>{switch(S){case"geojson":return vr;case"image":return Qt;case"raster":return pr;case"raster-dem":return hr;case"vector":return Le;case"video":return qe;case"canvas":return rt}return ct[S]},Yt="RTLPluginLoaded";class Wt extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ht()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return a._(this,arguments,void 0,(function*(c,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=w.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Yt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ur=null;function br(){return ur||(ur=new Wt),ur}class xr{constructor(s,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=a.a6(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const c=s+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,c,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=(function(b,E){const M={};if(!E)return M;for(const j of b){const V=j.layerIds.map((Y=>E.getLayer(Y))).filter(Boolean);if(V.length!==0){j.layers=V,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map((Y=>V.filter((re=>re.id===Y))[0])));for(const Y of V)M[Y.id]=j}}return M})(s.buckets,c?.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const E=this.buckets[b];if(E instanceof a.a8){if(this.hasSymbolBuckets=!0,!y)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const E=this.buckets[b];if(E instanceof a.a8&&E.hasRTLText){this.hasRTLText=!0,br().lazyLoad();break}}this.queryPadding=0;for(const b in this.buckets){const E=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(b).queryRadius(E))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new a.a7}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const y in this.buckets){const b=this.buckets[y];b.uploadPending()&&b.upload(s)}const c=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(s,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(s,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,c,y,b,E,M,j,V,Y,re,ce){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:E,scale:M,tileSize:this.tileSize,pixelPosMatrix:re,transform:V,params:j,queryPadding:this.queryPadding*Y,getElevation:ce},s,c,y):{}}querySourceFeatures(s,c){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const b=y.loadVTLayers(),E=c&&c.sourceLayer?c.sourceLayer:"",M=b._geojsonTileLayer||b[E];if(!M)return;const j=a.a9(c&&c.filter),{z:V,x:Y,y:re}=this.tileID.canonical,ce={z:V,x:Y,y:re};for(let oe=0;oe<M.length;oe++){const ge=M.feature(oe);if(j.needGeometry){const We=a.aa(ge,!0);if(!j.filter(new a.F(this.tileID.overscaledZ),We,this.tileID.canonical))continue}else if(!j.filter(new a.F(this.tileID.overscaledZ),ge))continue;const Me=y.getId(ge,E),Ze=new a.ab(ge,V,Y,re,Me);Ze.tile=ce,s.push(Ze)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const c=this.expirationTime;if(s.cacheControl){const y=a.ac(s.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const y=Date.now();let b=!1;if(this.expirationTime>y)b=!1;else if(c)if(this.expirationTime<c)b=!0;else{const E=this.expirationTime-c;E?this.expirationTime=y+Math.max(E,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!c.style.hasLayer(b))continue;const E=this.buckets[b],M=E.layers[0].sourceLayer||"_geojsonTileLayer",j=y[M],V=s[M];if(!j||!V||Object.keys(V).length===0)continue;E.update(V,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Y=c&&c.style&&c.style.getLayer(b);Y&&(this.queryPadding=Math.max(this.queryPadding,Y.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<w.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=w.now()+s}setDependencies(s,c){const y={};for(const b of c)y[b]=!0;this.dependencies[s]=y}hasDependency(s,c){for(const y of s){const b=this.dependencies[y];if(b){for(const E of c)if(b[E])return!0}}return!1}}class Rr{constructor(s,c){this.max=s,this.onRemove=c,this.reset()}reset(){for(const s in this.data)for(const c of this.data[s])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(s,c,y){const b=s.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);const E={value:c,timeout:void 0};if(y!==void 0&&(E.timeout=setTimeout((()=>{this.remove(s,E)}),y)),this.data[b].push(E),this.order.push(b),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const c=this.data[s].shift();return c.timeout&&clearTimeout(c.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),c.value}getByKey(s){const c=this.data[s];return c?c[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,c){if(!this.has(s))return this;const y=s.wrapped().key,b=c===void 0?0:this.data[y].indexOf(c),E=this.data[y][b];return this.data[y].splice(b,1),E.timeout&&clearTimeout(E.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(E.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(s){const c=[];for(const y in this.data)for(const b of this.data[y])s(b.value)||c.push(b);for(const y of c)this.remove(y.value.tileID,y)}}class wr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,c,y){const b=String(c);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][b]=this.stateChanges[s][b]||{},a.e(this.stateChanges[s][b],y),this.deletedStates[s]===null){this.deletedStates[s]={};for(const E in this.state[s])E!==b&&(this.deletedStates[s][E]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][b]===null){this.deletedStates[s][b]={};for(const E in this.state[s][b])y[E]||(this.deletedStates[s][b][E]=null)}else for(const E in y)this.deletedStates[s]&&this.deletedStates[s][b]&&this.deletedStates[s][b][E]===null&&delete this.deletedStates[s][b][E]}removeFeatureState(s,c,y){if(this.deletedStates[s]===null)return;const b=String(c);if(this.deletedStates[s]=this.deletedStates[s]||{},y&&c!==void 0)this.deletedStates[s][b]!==null&&(this.deletedStates[s][b]=this.deletedStates[s][b]||{},this.deletedStates[s][b][y]=null);else if(c!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][b])for(y in this.deletedStates[s][b]={},this.stateChanges[s][b])this.deletedStates[s][b][y]=null;else this.deletedStates[s][b]=null;else this.deletedStates[s]=null}getState(s,c){const y=String(c),b=a.e({},(this.state[s]||{})[y],(this.stateChanges[s]||{})[y]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const E=this.deletedStates[s][c];if(E===null)return{};for(const M in E)delete b[M]}return b}initializeTileState(s,c){s.setFeatureState(this.state,c)}coalesceChanges(s,c){const y={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const E={};for(const M in this.stateChanges[b])this.state[b][M]||(this.state[b][M]={}),a.e(this.state[b][M],this.stateChanges[b][M]),E[M]=this.state[b][M];y[b]=E}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const E={};if(this.deletedStates[b]===null)for(const M in this.state[b])E[M]={},this.state[b][M]={};else for(const M in this.deletedStates[b]){if(this.deletedStates[b][M]===null)this.state[b][M]={};else for(const j of Object.keys(this.deletedStates[b][M]))delete this.state[b][M][j];E[M]=this.state[b][M]}y[b]=y[b]||{},a.e(y[b],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const b in s)s[b].setFeatureState(y,c)}}const fr=89.25;function bt(S,s){const c=a.ag(s.lat,-85.051129,a.ah);return new a.P(a.V(s.lng)*S,a.U(c)*S)}function ve(S,s){return new a.a0(s.x/S,s.y/S).toLngLat()}function xe(S){return S.cameraToCenterDistance*Math.min(.85*Math.tan(a.ad(90-S.pitch)),Math.tan(a.ad(fr-S.pitch)))}function Ae(S,s){const c=S.canonical,y=s/a.ae(c.z),b=c.x+Math.pow(2,c.z)*S.wrap,E=a.af(new Float64Array(16));return a.M(E,E,[b*y,c.y*y,0]),a.N(E,E,[y/a.$,y/a.$,1]),E}function Ue(S,s,c,y,b){const E=a.a0.fromLngLat(S,s),M=b*a.ai(1,S.lat),j=M*Math.cos(a.ad(c)),V=Math.sqrt(M*M-j*j),Y=V*Math.sin(a.ad(-y)),re=V*Math.cos(a.ad(-y));return new a.a0(E.x+Y,E.y+re,E.z+j)}function tt(S,s,c){const y=s.intersectsFrustum(S);if(!c||y===0)return y;const b=s.intersectsPlane(c);return b===0?0:y===2&&b===2?2:1}function _t(S,s,c){let y=0;const b=(c-s)/10;for(let E=0;E<10;E++)y+=b*Math.pow(Math.cos(s+(E+.5)/10*(c-s)),S);return y}function Mt(S,s){return function(c,y,b,E,M){const j=2*((S-1)/a.aj(Math.cos(a.ad(fr-M))/Math.cos(a.ad(fr)))-1),V=Math.acos(b/E),Y=2*_t(j-1,0,a.ad(M/2)),re=Math.min(a.ad(fr),V+a.ad(M/2)),ce=_t(j-1,Math.min(re,V-a.ad(M/2)),re),oe=Math.atan(y/b),ge=Math.hypot(y,b);let Me=c;return Me+=a.aj(E/ge/Math.max(.5,Math.cos(a.ad(M/2)))),Me+=j*a.aj(Math.cos(oe))/2,Me-=a.aj(Math.max(1,ce/Y/s))/2,Me}}const Pt=Mt(9.314,3);function Kt(S,s){const c=(s.roundZoom?Math.round:Math.floor)(S.zoom+a.aj(S.tileSize/s.tileSize));return Math.max(0,c)}function zt(S,s){const c=S.getCameraFrustum(),y=S.getClippingPlane(),b=S.screenPointToMercatorCoordinate(S.getCameraPoint()),E=a.a0.fromLngLat(S.center,S.elevation);b.z=E.z+Math.cos(S.pitchInRadians)*S.cameraToCenterDistance/S.worldSize;const M=S.getCoveringTilesDetailsProvider(),j=M.allowVariableZoom(S,s),V=Kt(S,s),Y=s.minzoom||0,re=s.maxzoom!==void 0?s.maxzoom:S.maxZoom,ce=Math.min(Math.max(0,V),re),oe=Math.pow(2,ce),ge=[oe*b.x,oe*b.y,0],Me=[oe*E.x,oe*E.y,0],Ze=Math.hypot(E.x-b.x,E.y-b.y),We=Math.abs(E.z-b.z),Xe=Math.hypot(Ze,We),at=Et=>({zoom:0,x:0,y:0,wrap:Et,fullyVisible:!1}),wt=[],dt=[];if(S.renderWorldCopies&&M.allowWorldCopies())for(let Et=1;Et<=3;Et++)wt.push(at(-Et)),wt.push(at(Et));for(wt.push(at(0));wt.length>0;){const Et=wt.pop(),Tt=Et.x,ft=Et.y;let Bt=Et.fullyVisible;const ir={x:Tt,y:ft,z:Et.zoom},Jt=M.getTileBoundingVolume(ir,Et.wrap,S.elevation,s);if(!Bt){const Ur=tt(c,Jt,y);if(Ur===0)continue;Bt=Ur===2}const er=M.distanceToTile2d(b.x,b.y,ir,Jt);let or=V;j&&(or=(s.calculateTileZoom||Pt)(S.zoom+a.aj(S.tileSize/s.tileSize),er,We,Xe,S.fov)),or=(s.roundZoom?Math.round:Math.floor)(or),or=Math.max(0,or);const Gr=Math.min(or,re);if(Et.wrap=M.getWrap(E,ir,Et.wrap),Et.zoom>=Gr){if(Et.zoom<Y)continue;const Ur=ce-Et.zoom,Ar=ge[0]-.5-(Tt<<Ur),nn=ge[1]-.5-(ft<<Ur),Zn=s.reparseOverscaled?Math.max(Et.zoom,or):Et.zoom;dt.push({tileID:new a.Z(Et.zoom===re?Zn:Et.zoom,Et.wrap,Et.zoom,Tt,ft),distanceSq:a.ak([Me[0]-.5-Tt,Me[1]-.5-ft]),tileDistanceToCamera:Math.sqrt(Ar*Ar+nn*nn)})}else for(let Ur=0;Ur<4;Ur++)wt.push({zoom:Et.zoom+1,x:(Tt<<1)+Ur%2,y:(ft<<1)+(Ur>>1),wrap:Et.wrap,fullyVisible:Bt})}return dt.sort(((Et,Tt)=>Et.distanceSq-Tt.distanceSq)).map((Et=>Et.tileID))}const Ct=a.a1.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Gt extends a.E{constructor(s,c,y){super(),this.id=s,this.dispatcher=y,this.on("data",(b=>this._dataHandler(b))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((b,E,M,j)=>{const V=new(Ft(E.type))(b,E,M,j);if(V.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${V.id}`);return V})(s,c,y,this),this._tiles={},this._cache=new Rr(0,(b=>this._unloadTile(b))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new wr,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const c=this._tiles[s];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,c,y){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,c,y)}catch(b){s.state="errored",b.status!==404?this._source.fire(new a.k(b,{tile:s})):this.update(this.transform,this.terrain)}}))}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new a.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const y=this._tiles[c];y.upload(s),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((s=>s.tileID)).sort(vt).map((s=>s.key))}getRenderableIds(s){const c=[];for(const y in this._tiles)this._isIdRenderable(y,s)&&c.push(this._tiles[y]);return s?c.sort(((y,b)=>{const E=y.tileID,M=b.tileID,j=new a.P(E.canonical.x,E.canonical.y)._rotate(-this.transform.bearingInRadians),V=new a.P(M.canonical.x,M.canonical.y)._rotate(-this.transform.bearingInRadians);return E.overscaledZ-M.overscaledZ||V.y-j.y||V.x-j.x})).map((y=>y.tileID.key)):c.map((y=>y.tileID)).sort(vt).map((y=>y.key))}hasRenderableParent(s){const c=this.findLoadedParent(s,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(s,c){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(c||!this._tiles[s].holdingForFade())}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)s?this._reloadTile(c,"expired"):this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")}}_reloadTile(s,c){return a._(this,void 0,void 0,(function*(){const y=this._tiles[s];y&&(y.state!=="loading"&&(y.state=c),yield this._loadTile(y,s,c))}))}_tileLoaded(s,c,y){s.timeAdded=w.now(),y==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(c,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const c=this.getRenderableIds();for(let b=0;b<c.length;b++){const E=c[b];if(s.neighboringTiles&&s.neighboringTiles[E]){const M=this.getTileByID(E);y(s,M),y(M,s)}}function y(b,E){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let M=E.tileID.canonical.x-b.tileID.canonical.x;const j=E.tileID.canonical.y-b.tileID.canonical.y,V=Math.pow(2,b.tileID.canonical.z),Y=E.tileID.key;M===0&&j===0||Math.abs(j)>1||(Math.abs(M)>1&&(Math.abs(M+V)===1?M+=V:Math.abs(M-V)===1&&(M-=V)),E.dem&&b.dem&&(b.dem.backfillBorder(E.dem,M,j),b.neighboringTiles&&b.neighboringTiles[Y]&&(b.neighboringTiles[Y].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,c,y,b){for(const E in this._tiles){let M=this._tiles[E];if(b[E]||!M.hasData()||M.tileID.overscaledZ<=c||M.tileID.overscaledZ>y)continue;let j=M.tileID;for(;M&&M.tileID.overscaledZ>c+1;){const Y=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[Y.key],M&&M.hasData()&&(j=Y)}let V=j;for(;V.overscaledZ>c;)if(V=V.scaledTo(V.overscaledZ-1),s[V.key]||s[V.canonical.key]){b[j.key]=j;break}}}findLoadedParent(s,c){if(s.key in this._loadedParentTiles){const y=this._loadedParentTiles[s.key];return y&&y.tileID.overscaledZ>=c?y:null}for(let y=s.overscaledZ-1;y>=c;y--){const b=s.scaledTo(y),E=this._getLoadedTile(b);if(E)return E}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){const c=this._tiles[s.key];return c&&c.hasData()?c:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const c=Math.ceil(s.width/this._source.tileSize)+1,y=Math.ceil(s.height/this._source.tileSize)+1,b=Math.floor(c*y*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(E)}handleWrapJump(s){const c=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,c){const y={};for(const b in this._tiles){const E=this._tiles[b];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+c),y[E.tileID.key]=E}this._tiles=y;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(b,this._tiles[b])}}_updateCoveredAndRetainedTiles(s,c,y,b,E,M){const j={},V={},Y=Object.keys(s),re=w.now();for(const ce of Y){const oe=s[ce],ge=this._tiles[ce];if(!ge||ge.fadeEndTime!==0&&ge.fadeEndTime<=re)continue;const Me=this.findLoadedParent(oe,c),Ze=this.findLoadedSibling(oe),We=Me||Ze||null;We&&(this._addTile(We.tileID),j[We.tileID.key]=We.tileID),V[ce]=oe}this._retainLoadedChildren(V,b,y,s);for(const ce in j)s[ce]||(this._coveredTiles[ce]=!0,s[ce]=j[ce]);if(M){const ce={},oe={};for(const ge of E)this._tiles[ge.key].hasData()?ce[ge.key]=ge:oe[ge.key]=ge;for(const ge in oe){const Me=oe[ge].children(this._source.maxzoom);this._tiles[Me[0].key]&&this._tiles[Me[1].key]&&this._tiles[Me[2].key]&&this._tiles[Me[3].key]&&(ce[Me[0].key]=s[Me[0].key]=Me[0],ce[Me[1].key]=s[Me[1].key]=Me[1],ce[Me[2].key]=s[Me[2].key]=Me[2],ce[Me[3].key]=s[Me[3].key]=Me[3],delete oe[ge])}for(const ge in oe){const Me=oe[ge],Ze=this.findLoadedParent(Me,this._source.minzoom),We=this.findLoadedSibling(Me),Xe=Ze||We||null;if(Xe){ce[Xe.tileID.key]=s[Xe.tileID.key]=Xe.tileID;for(const at in ce)ce[at].isChildOf(Xe.tileID)&&delete ce[at]}}for(const ge in this._tiles)ce[ge]||(this._coveredTiles[ge]=!0)}}update(s,c){if(!this._sourceLoaded||this._paused)return;let y;this.transform=s,this.terrain=c,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=s.getVisibleUnwrappedCoordinates(this._source.tileID).map((re=>new a.Z(re.canonical.z,re.wrap,re.canonical.z,re.canonical.x,re.canonical.y))):(y=zt(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter((re=>this._source.hasTile(re))))):y=[];const b=Kt(s,this._source),E=Math.max(b-Gt.maxOverzooming,this._source.minzoom),M=Math.max(b+Gt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const re={};for(const ce of y)if(ce.canonical.z>this._source.minzoom){const oe=ce.scaledTo(ce.canonical.z-1);re[oe.key]=oe;const ge=ce.scaledTo(Math.max(this._source.minzoom,Math.min(ce.canonical.z,5)));re[ge.key]=ge}y=y.concat(Object.values(re))}const j=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,j&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const V=this._updateRetainedTiles(y,b);Pr(this._source.type)&&this._updateCoveredAndRetainedTiles(V,E,M,b,y,c);for(const re in V)this._tiles[re].clearFadeHold();const Y=a.al(this._tiles,V);for(const re of Y){const ce=this._tiles[re];ce.hasSymbolBuckets&&!ce.holdingForFade()?ce.setHoldDuration(this.map._fadeDuration):ce.hasSymbolBuckets&&!ce.symbolFadeFinished()||this._removeTile(re)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,c){var y;const b={},E={},M=Math.max(c-Gt.maxOverzooming,this._source.minzoom),j=Math.max(c+Gt.maxUnderzooming,this._source.minzoom),V={};for(const Y of s){const re=this._addTile(Y);b[Y.key]=Y,re.hasData()||c<this._source.maxzoom&&(V[Y.key]=Y)}this._retainLoadedChildren(V,c,j,b);for(const Y of s){let re=this._tiles[Y.key];if(re.hasData())continue;if(c+1>this._source.maxzoom){const oe=Y.children(this._source.maxzoom)[0],ge=this.getTile(oe);if(ge&&ge.hasData()){b[oe.key]=oe;continue}}else{const oe=Y.children(this._source.maxzoom);if(b[oe[0].key]&&b[oe[1].key]&&b[oe[2].key]&&b[oe[3].key])continue}let ce=re.wasRequested();for(let oe=Y.overscaledZ-1;oe>=M;--oe){const ge=Y.scaledTo(oe);if(E[ge.key])break;if(E[ge.key]=!0,re=this.getTile(ge),!re&&ce&&(re=this._addTile(ge)),re){const Me=re.hasData();if((Me||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||ce)&&(b[ge.key]=ge),ce=re.wasRequested(),Me)break}}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const c=[];let y,b=this._tiles[s].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){y=this._loadedParentTiles[b.key];break}c.push(b.key);const E=b.scaledTo(b.overscaledZ-1);if(y=this._getLoadedTile(E),y)break;b=E}for(const E of c)this._loadedParentTiles[E]=y}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const s in this._tiles){const c=this._tiles[s].tileID,y=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=y}}_addTile(s){let c=this._tiles[s.key];if(c)return c;c=this._cache.getAndRemove(s),c&&(this._setTileReloadTimer(s.key,c),c.tileID=s,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,c)));const y=c;return c||(c=new xr(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(c,s.key,c.state)),c.uses++,this._tiles[s.key]=c,y||this._source.fire(new a.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(s,c){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const y=c.getExpiryTimeout();y&&(this._timers[s]=setTimeout((()=>{this._reloadTile(s,"expired"),delete this._timers[s]}),y))}refreshTiles(s){for(const c in this._tiles)(this._isIdRenderable(c)||this._tiles[c].state=="errored")&&s.some((y=>y.equals(this._tiles[c].tileID.canonical)))&&this._reloadTile(c,"expired")}_removeTile(s){const c=this._tiles[s];c&&(c.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(s){const c=s.sourceDataType;s.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&c==="content"&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,c,y){const b=[],E=this.transform;if(!E)return b;const M=E.getCoveringTilesDetailsProvider().allowWorldCopies(),j=y?E.getCameraQueryGeometry(s):s,V=ge=>E.screenPointToMercatorCoordinate(ge,this.terrain),Y=this.transformBbox(s,V,!M),re=this.transformBbox(j,V,!M),ce=this.getIds(),oe=a.a1.fromPoints(re);for(let ge=0;ge<ce.length;ge++){const Me=this._tiles[ce[ge]];if(Me.holdingForFade())continue;const Ze=M?[Me.tileID]:[Me.tileID.unwrapTo(-1),Me.tileID.unwrapTo(0)],We=Math.pow(2,E.zoom-Me.tileID.overscaledZ),Xe=c*Me.queryPadding*a.$/Me.tileSize/We;for(const at of Ze){const wt=oe.map((dt=>at.getTilePoint(new a.a0(dt.x,dt.y))));if(wt.expandBy(Xe),wt.intersects(Ct)){const dt=Y.map((Tt=>at.getTilePoint(Tt))),Et=re.map((Tt=>at.getTilePoint(Tt)));b.push({tile:Me,tileID:M?at:at.unwrapTo(0),queryGeometry:dt,cameraQueryGeometry:Et,scale:We})}}}return b}transformBbox(s,c,y){let b=s.map(c);if(y){const E=a.a1.fromPoints(s);E.shrinkBy(.001*Math.min(E.width(),E.height()));const M=E.map(c);a.a1.fromPoints(b).covers(M)||(b=b.map((j=>j.x>.5?new a.a0(j.x-1,j.y,j.z):j)))}return b}getVisibleCoordinates(s){const c=this.getRenderableIds(s).map((y=>this._tiles[y].tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(Pr(this._source.type)){const s=w.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=s)return!0}return!1}setFeatureState(s,c,y){this._state.updateState(s=s||"_geojsonTileLayer",c,y)}removeFeatureState(s,c,y){this._state.removeFeatureState(s=s||"_geojsonTileLayer",c,y)}getFeatureState(s,c){return this._state.getState(s=s||"_geojsonTileLayer",c)}setDependencies(s,c,y){const b=this._tiles[s];b&&b.setDependencies(c,y)}reloadTilesForDependencies(s,c){for(const y in this._tiles)this._tiles[y].hasDependency(s,c)&&this._reloadTile(y,"reloading");this._cache.filter((y=>!y.hasDependency(s,c)))}}function vt(S,s){const c=Math.abs(2*S.wrap)-+(S.wrap<0),y=Math.abs(2*s.wrap)-+(s.wrap<0);return S.overscaledZ-s.overscaledZ||y-c||s.canonical.y-S.canonical.y||s.canonical.x-S.canonical.x}function Pr(S){return S==="raster"||S==="image"||S==="video"}Gt.maxOverzooming=10,Gt.maxUnderzooming=3;class Tr{constructor(s,c){this.reset(s,c)}reset(s,c){this.points=s||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=a.ag(s,0,1);let c=1,y=this._distances[c];const b=s*this.paddedLength+this.padding;for(;y<b&&c<this._distances.length;)y=this._distances[++c];const E=c-1,M=this._distances[E],j=y-M,V=j>0?(b-M)/j:0;return this.points[E].mult(1-V).add(this.points[c].mult(V))}}function Ye(S,s){let c=!0;return S==="always"||S!=="never"&&s!=="never"||(c=!1),c}class ot{constructor(s,c,y){const b=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(s/y),this.yCellCount=Math.ceil(c/y);for(let M=0;M<this.xCellCount*this.yCellCount;M++)b.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=c,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,c,y,b,E){this._forEachCell(c,y,b,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(c),this.bboxes.push(y),this.bboxes.push(b),this.bboxes.push(E)}insertCircle(s,c,y,b){this._forEachCell(c-b,y-b,c+b,y+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(c),this.circles.push(y),this.circles.push(b)}_insertBoxCell(s,c,y,b,E,M){this.boxCells[E].push(M)}_insertCircleCell(s,c,y,b,E,M){this.circleCells[E].push(M)}_query(s,c,y,b,E,M,j){if(y<0||s>this.width||b<0||c>this.height)return[];const V=[];if(s<=0&&c<=0&&this.width<=y&&this.height<=b){if(E)return[{key:null,x1:s,y1:c,x2:y,y2:b}];for(let Y=0;Y<this.boxKeys.length;Y++)V.push({key:this.boxKeys[Y],x1:this.bboxes[4*Y],y1:this.bboxes[4*Y+1],x2:this.bboxes[4*Y+2],y2:this.bboxes[4*Y+3]});for(let Y=0;Y<this.circleKeys.length;Y++){const re=this.circles[3*Y],ce=this.circles[3*Y+1],oe=this.circles[3*Y+2];V.push({key:this.circleKeys[Y],x1:re-oe,y1:ce-oe,x2:re+oe,y2:ce+oe})}}else this._forEachCell(s,c,y,b,this._queryCell,V,{hitTest:E,overlapMode:M,seenUids:{box:{},circle:{}}},j);return V}query(s,c,y,b){return this._query(s,c,y,b,!1,null)}hitTest(s,c,y,b,E,M){return this._query(s,c,y,b,!0,E,M).length>0}hitTestCircle(s,c,y,b,E){const M=s-y,j=s+y,V=c-y,Y=c+y;if(j<0||M>this.width||Y<0||V>this.height)return!1;const re=[];return this._forEachCell(M,V,j,Y,this._queryCellCircle,re,{hitTest:!0,overlapMode:b,circle:{x:s,y:c,radius:y},seenUids:{box:{},circle:{}}},E),re.length>0}_queryCell(s,c,y,b,E,M,j,V){const{seenUids:Y,hitTest:re,overlapMode:ce}=j,oe=this.boxCells[E];if(oe!==null){const Me=this.bboxes;for(const Ze of oe)if(!Y.box[Ze]){Y.box[Ze]=!0;const We=4*Ze,Xe=this.boxKeys[Ze];if(s<=Me[We+2]&&c<=Me[We+3]&&y>=Me[We+0]&&b>=Me[We+1]&&(!V||V(Xe))&&(!re||!Ye(ce,Xe.overlapMode))&&(M.push({key:Xe,x1:Me[We],y1:Me[We+1],x2:Me[We+2],y2:Me[We+3]}),re))return!0}}const ge=this.circleCells[E];if(ge!==null){const Me=this.circles;for(const Ze of ge)if(!Y.circle[Ze]){Y.circle[Ze]=!0;const We=3*Ze,Xe=this.circleKeys[Ze];if(this._circleAndRectCollide(Me[We],Me[We+1],Me[We+2],s,c,y,b)&&(!V||V(Xe))&&(!re||!Ye(ce,Xe.overlapMode))){const at=Me[We],wt=Me[We+1],dt=Me[We+2];if(M.push({key:Xe,x1:at-dt,y1:wt-dt,x2:at+dt,y2:wt+dt}),re)return!0}}}return!1}_queryCellCircle(s,c,y,b,E,M,j,V){const{circle:Y,seenUids:re,overlapMode:ce}=j,oe=this.boxCells[E];if(oe!==null){const Me=this.bboxes;for(const Ze of oe)if(!re.box[Ze]){re.box[Ze]=!0;const We=4*Ze,Xe=this.boxKeys[Ze];if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,Me[We+0],Me[We+1],Me[We+2],Me[We+3])&&(!V||V(Xe))&&!Ye(ce,Xe.overlapMode))return M.push(!0),!0}}const ge=this.circleCells[E];if(ge!==null){const Me=this.circles;for(const Ze of ge)if(!re.circle[Ze]){re.circle[Ze]=!0;const We=3*Ze,Xe=this.circleKeys[Ze];if(this._circlesCollide(Me[We],Me[We+1],Me[We+2],Y.x,Y.y,Y.radius)&&(!V||V(Xe))&&!Ye(ce,Xe.overlapMode))return M.push(!0),!0}}}_forEachCell(s,c,y,b,E,M,j,V){const Y=this._convertToXCellCoord(s),re=this._convertToYCellCoord(c),ce=this._convertToXCellCoord(y),oe=this._convertToYCellCoord(b);for(let ge=Y;ge<=ce;ge++)for(let Me=re;Me<=oe;Me++)if(E.call(this,s,c,y,b,this.xCellCount*Me+ge,M,j,V))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,c,y,b,E,M){const j=b-s,V=E-c,Y=y+M;return Y*Y>j*j+V*V}_circleAndRectCollide(s,c,y,b,E,M,j){const V=(M-b)/2,Y=Math.abs(s-(b+V));if(Y>V+y)return!1;const re=(j-E)/2,ce=Math.abs(c-(E+re));if(ce>re+y)return!1;if(Y<=V||ce<=re)return!0;const oe=Y-V,ge=ce-re;return oe*oe+ge*ge<=y*y}}function jt(S,s,c){const y=a.L();if(!S){const{vecSouth:ce,vecEast:oe}=de(s),ge=h();ge[0]=oe[0],ge[1]=oe[1],ge[2]=ce[0],ge[3]=ce[1],b=ge,(re=(M=(E=ge)[0])*(Y=E[3])-(V=E[2])*(j=E[1]))&&(b[0]=Y*(re=1/re),b[1]=-j*re,b[2]=-V*re,b[3]=M*re),y[0]=ge[0],y[1]=ge[1],y[4]=ge[2],y[5]=ge[3]}var b,E,M,j,V,Y,re;return a.N(y,y,[1/c,1/c,1]),y}function ne(S,s,c,y){if(S){const b=a.L();if(!s){const{vecSouth:E,vecEast:M}=de(c);b[0]=M[0],b[1]=M[1],b[4]=E[0],b[5]=E[1]}return a.N(b,b,[y,y,1]),b}return c.pixelsToClipSpaceMatrix}function de(S){const s=Math.cos(S.rollInRadians),c=Math.sin(S.rollInRadians),y=Math.cos(S.pitchInRadians),b=Math.cos(S.bearingInRadians),E=Math.sin(S.bearingInRadians),M=a.aq();M[0]=-b*y*c-E*s,M[1]=-E*y*c+b*s;const j=a.ar(M);j<1e-9?a.as(M):a.at(M,M,1/j);const V=a.aq();V[0]=b*y*s-E*c,V[1]=E*y*s+b*c;const Y=a.ar(V);return Y<1e-9?a.as(V):a.at(V,V,1/Y),{vecEast:V,vecSouth:M}}function Be(S,s,c,y){let b;y?(b=[S,s,y(S,s),1],a.av(b,b,c)):(b=[S,s,0,1],Ri(b,b,c));const E=b[3];return{point:new a.P(b[0]/E,b[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}function et(S,s){return .5+S/s*.5}function Lt(S,s){return S.x>=-s[0]&&S.x<=s[0]&&S.y>=-s[1]&&S.y<=s[1]}function lr(S,s,c,y,b,E,M,j,V,Y,re,ce,oe){const ge=c?S.textSizeData:S.iconSizeData,Me=a.am(ge,s.transform.zoom),Ze=[256/s.width*2+1,256/s.height*2+1],We=c?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;We.clear();const Xe=S.lineVertexArray,at=c?S.text.placedSymbolArray:S.icon.placedSymbolArray,wt=s.transform.width/s.transform.height;let dt=!1;for(let Et=0;Et<at.length;Et++){const Tt=at.get(Et);if(Tt.hidden||Tt.writingMode===a.an.vertical&&!dt){Pi(Tt.numGlyphs,We);continue}dt=!1;const ft=new a.P(Tt.anchorX,Tt.anchorY),Bt={getElevation:oe,pitchedLabelPlaneMatrix:y,lineVertexArray:Xe,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:ft,unwrappedTileID:V,width:Y,height:re,translation:ce},ir=Kr(Tt.anchorX,Tt.anchorY,Bt);if(!Lt(ir.point,Ze)){Pi(Tt.numGlyphs,We);continue}const Jt=et(s.transform.cameraToCenterDistance,ir.signedDistanceFromCamera),er=a.ao(ge,Me,Tt),or=E?er*s.transform.getPitchedTextCorrection(Tt.anchorX,Tt.anchorY,V)/Jt:er*Jt,Gr=kr({projectionContext:Bt,pitchedLabelPlaneMatrixInverse:b,symbol:Tt,fontSize:or,flip:!1,keepUpright:M,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:We,aspectRatio:wt,rotateToLine:j});dt=Gr.useVertical,(Gr.notEnoughRoom||dt||Gr.needsFlipping&&kr({projectionContext:Bt,pitchedLabelPlaneMatrixInverse:b,symbol:Tt,fontSize:or,flip:!0,keepUpright:M,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:We,aspectRatio:wt,rotateToLine:j}).notEnoughRoom)&&Pi(Tt.numGlyphs,We)}c?S.text.dynamicLayoutVertexBuffer.updateData(We):S.icon.dynamicLayoutVertexBuffer.updateData(We)}function qt(S,s,c,y,b,E,M,j){const V=E.glyphStartIndex+E.numGlyphs,Y=E.lineStartIndex,re=E.lineStartIndex+E.lineLength,ce=s.getoffsetX(E.glyphStartIndex),oe=s.getoffsetX(V-1),ge=Mi(S*ce,c,y,b,E.segment,Y,re,j,M);if(!ge)return null;const Me=Mi(S*oe,c,y,b,E.segment,Y,re,j,M);return Me?j.projectionCache.anyProjectionOccluded?null:{first:ge,last:Me}:null}function zr(S,s,c,y){return S===a.an.horizontal&&Math.abs(c.y-s.y)>Math.abs(c.x-s.x)*y?{useVertical:!0}:(S===a.an.vertical?s.y<c.y:s.x>c.x)?{needsFlipping:!0}:null}function kr(S){const{projectionContext:s,pitchedLabelPlaneMatrixInverse:c,symbol:y,fontSize:b,flip:E,keepUpright:M,glyphOffsetArray:j,dynamicLayoutVertexArray:V,aspectRatio:Y,rotateToLine:re}=S,ce=b/24,oe=y.lineOffsetX*ce,ge=y.lineOffsetY*ce;let Me;if(y.numGlyphs>1){const Ze=y.glyphStartIndex+y.numGlyphs,We=y.lineStartIndex,Xe=y.lineStartIndex+y.lineLength,at=qt(ce,j,oe,ge,E,y,re,s);if(!at)return{notEnoughRoom:!0};const wt=Vr(at.first.point.x,at.first.point.y,s,c),dt=Vr(at.last.point.x,at.last.point.y,s,c);if(M&&!E){const Et=zr(y.writingMode,wt,dt,Y);if(Et)return Et}Me=[at.first];for(let Et=y.glyphStartIndex+1;Et<Ze-1;Et++){const Tt=Mi(ce*j.getoffsetX(Et),oe,ge,E,y.segment,We,Xe,s,re);if(!Tt)return{notEnoughRoom:!0};Me.push(Tt)}Me.push(at.last)}else{if(M&&!E){const We=yr(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,Xe=y.lineStartIndex+y.segment+1,at=new a.P(s.lineVertexArray.getx(Xe),s.lineVertexArray.gety(Xe)),wt=yr(at.x,at.y,s),dt=wt.signedDistanceFromCamera>0?wt.point:sn(s.tileAnchorPoint,at,We,1,s),Et=Vr(We.x,We.y,s,c),Tt=Vr(dt.x,dt.y,s,c),ft=zr(y.writingMode,Et,Tt,Y);if(ft)return ft}const Ze=Mi(ce*j.getoffsetX(y.glyphStartIndex),oe,ge,E,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,s,re);if(!Ze||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Me=[Ze]}for(const Ze of Me)a.au(V,Ze.point,Ze.angle);return{}}function sn(S,s,c,y,b){const E=S.add(S.sub(s)._unit()),M=yr(E.x,E.y,b).point,j=c.sub(M);return c.add(j._mult(y/j.mag()))}function xn(S,s,c){const y=s.projectionCache;if(y.projections[S])return y.projections[S];const b=new a.P(s.lineVertexArray.getx(S),s.lineVertexArray.gety(S)),E=yr(b.x,b.y,s);if(E.signedDistanceFromCamera>0)return y.projections[S]=E.point,y.anyProjectionOccluded=y.anyProjectionOccluded||E.isOccluded,E.point;const M=S-c.direction;return sn(c.distanceFromAnchor===0?s.tileAnchorPoint:new a.P(s.lineVertexArray.getx(M),s.lineVertexArray.gety(M)),b,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,s)}function yr(S,s,c){const y=S+c.translation[0],b=s+c.translation[1];let E;return c.pitchWithMap?(E=Be(y,b,c.pitchedLabelPlaneMatrix,c.getElevation),E.isOccluded=!1):(E=c.transform.projectTileCoordinates(y,b,c.unwrappedTileID,c.getElevation),E.point.x=(.5*E.point.x+.5)*c.width,E.point.y=(.5*-E.point.y+.5)*c.height),E}function Vr(S,s,c,y){if(c.pitchWithMap){const b=[S,s,0,1];return a.av(b,b,y),c.transform.projectTileCoordinates(b[0]/b[3],b[1]/b[3],c.unwrappedTileID,c.getElevation).point}return{x:S/c.width*2-1,y:s/c.height*2-1}}function Kr(S,s,c){return c.transform.projectTileCoordinates(S,s,c.unwrappedTileID,c.getElevation)}function An(S,s,c){return S._unit()._perp()._mult(s*c)}function Ni(S,s,c,y,b,E,M,j,V){if(j.projectionCache.offsets[S])return j.projectionCache.offsets[S];const Y=c.add(s);if(S+V.direction<y||S+V.direction>=b)return j.projectionCache.offsets[S]=Y,Y;const re=xn(S+V.direction,j,V),ce=An(re.sub(c),M,V.direction),oe=c.add(ce),ge=re.add(ce);return j.projectionCache.offsets[S]=a.aw(E,Y,oe,ge)||Y,j.projectionCache.offsets[S]}function Mi(S,s,c,y,b,E,M,j,V){const Y=y?S-s:S+s;let re=Y>0?1:-1,ce=0;y&&(re*=-1,ce=Math.PI),re<0&&(ce+=Math.PI);let oe,ge=re>0?E+b:E+b+1;j.projectionCache.cachedAnchorPoint?oe=j.projectionCache.cachedAnchorPoint:(oe=yr(j.tileAnchorPoint.x,j.tileAnchorPoint.y,j).point,j.projectionCache.cachedAnchorPoint=oe);let Me,Ze,We=oe,Xe=oe,at=0,wt=0;const dt=Math.abs(Y),Et=[];let Tt;for(;at+wt<=dt;){if(ge+=re,ge<E||ge>=M)return null;at+=wt,Xe=We,Ze=Me;const ir={absOffsetX:dt,direction:re,distanceFromAnchor:at,previousVertex:Xe};if(We=xn(ge,j,ir),c===0)Et.push(Xe),Tt=We.sub(Xe);else{let Jt;const er=We.sub(Xe);Jt=er.mag()===0?An(xn(ge+re,j,ir).sub(We),c,re):An(er,c,re),Ze||(Ze=Xe.add(Jt)),Me=Ni(ge,Jt,We,E,M,Ze,c,j,ir),Et.push(Ze),Tt=Me.sub(Ze)}wt=Tt.mag()}const ft=Tt._mult((dt-at)/wt)._add(Ze||Xe),Bt=ce+Math.atan2(We.y-Xe.y,We.x-Xe.x);return Et.push(ft),{point:ft,angle:V?Bt:0,path:Et}}const mn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pi(S,s){for(let c=0;c<S;c++){const y=s.length;s.resize(y+4),s.float32.set(mn,3*y)}}function Ri(S,s,c){const y=s[0],b=s[1];return S[0]=c[0]*y+c[4]*b+c[12],S[1]=c[1]*y+c[5]*b+c[13],S[3]=c[3]*y+c[7]*b+c[15],S}const ni=100;class Ji{constructor(s,c=new ot(s.width+200,s.height+200,25),y=new ot(s.width+200,s.height+200,25)){this.transform=s,this.grid=c,this.ignoredGrid=y,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+ni,this.screenBottomBoundary=s.height+ni,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,c,y,b,E,M,j,V,Y,re,ce,oe){const ge=this.projectAndGetPerspectiveRatio(s.anchorPointX+V[0],s.anchorPointY+V[1],E,re,oe),Me=y*ge.perspectiveRatio;let Ze;if(M||j)Ze=this._projectCollisionBox(s,Me,b,E,M,j,V,ge,re,ce,oe);else{const Tt=ge.x+(ce?ce.x*Me:0),ft=ge.y+(ce?ce.y*Me:0);Ze={allPointsOccluded:!1,box:[Tt+s.x1*Me,ft+s.y1*Me,Tt+s.x2*Me,ft+s.y2*Me]}}const[We,Xe,at,wt]=Ze.box,dt=M?Ze.allPointsOccluded:ge.isOccluded;let Et=dt;return Et||(Et=ge.perspectiveRatio<this.perspectiveRatioCutoff),Et||(Et=!this.isInsideGrid(We,Xe,at,wt)),Et||c!=="always"&&this.grid.hitTest(We,Xe,at,wt,c,Y)?{box:[We,Xe,at,wt],placeable:!1,offscreen:!1,occluded:dt}:{box:[We,Xe,at,wt],placeable:!0,offscreen:this.isOffscreen(We,Xe,at,wt),occluded:dt}}placeCollisionCircles(s,c,y,b,E,M,j,V,Y,re,ce,oe,ge,Me){const Ze=[],We=new a.P(c.anchorX,c.anchorY),Xe=this.getPerspectiveRatio(We.x,We.y,M,Me),at=(Y?E*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,M)/Xe:E*Xe)/a.aA,wt={getElevation:Me,pitchedLabelPlaneMatrix:j,lineVertexArray:y,pitchWithMap:Y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:We,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:ge},dt=qt(at,b,c.lineOffsetX*at,c.lineOffsetY*at,!1,c,!1,wt);let Et=!1,Tt=!1,ft=!0;if(dt){const Bt=.5*ce*Xe+oe,ir=new a.P(-100,-100),Jt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),er=new Tr,or=dt.first,Gr=dt.last;let Ur=[];for(let Zn=or.path.length-1;Zn>=1;Zn--)Ur.push(or.path[Zn]);for(let Zn=1;Zn<Gr.path.length;Zn++)Ur.push(Gr.path[Zn]);const Ar=2.5*Bt;if(Y){const Zn=this.projectPathToScreenSpace(Ur,wt);Ur=Zn.some((fi=>fi.signedDistanceFromCamera<=0))?[]:Zn.map((fi=>fi.point))}let nn=[];if(Ur.length>0){const Zn=Ur[0].clone(),fi=Ur[0].clone();for(let ra=1;ra<Ur.length;ra++)Zn.x=Math.min(Zn.x,Ur[ra].x),Zn.y=Math.min(Zn.y,Ur[ra].y),fi.x=Math.max(fi.x,Ur[ra].x),fi.y=Math.max(fi.y,Ur[ra].y);nn=Zn.x>=ir.x&&fi.x<=Jt.x&&Zn.y>=ir.y&&fi.y<=Jt.y?[Ur]:fi.x<ir.x||Zn.x>Jt.x||fi.y<ir.y||Zn.y>Jt.y?[]:a.ax([Ur],ir.x,ir.y,Jt.x,Jt.y)}for(const Zn of nn){er.reset(Zn,.25*Bt);let fi=0;fi=er.length<=.5*Bt?1:Math.ceil(er.paddedLength/Ar)+1;for(let ra=0;ra<fi;ra++){const ki=ra/Math.max(fi-1,1),Li=er.lerp(ki),Ei=Li.x+ni,_i=Li.y+ni;Ze.push(Ei,_i,Bt,0);const ji=Ei-Bt,uo=_i-Bt,si=Ei+Bt,po=_i+Bt;if(ft=ft&&this.isOffscreen(ji,uo,si,po),Tt=Tt||this.isInsideGrid(ji,uo,si,po),s!=="always"&&this.grid.hitTestCircle(Ei,_i,Bt,s,re)&&(Et=!0,!V))return{circles:[],offscreen:!1,collisionDetected:Et}}}}return{circles:!V&&Et||!Tt||Xe<this.perspectiveRatioCutoff?[]:Ze,offscreen:ft,collisionDetected:Et}}projectPathToScreenSpace(s,c){const y=(function(b,E){const M=a.L();return a.ap(M,E.pitchedLabelPlaneMatrix),b.map((j=>{const V=Be(j.x,j.y,M,E.getElevation),Y=E.transform.projectTileCoordinates(V.point.x,V.point.y,E.unwrappedTileID,E.getElevation);return Y.point.x=(.5*Y.point.x+.5)*E.width,Y.point.y=(.5*-Y.point.y+.5)*E.height,Y}))})(s,c);return(function(b){let E=0,M=0,j=0,V=0;for(let Y=0;Y<b.length;Y++)b[Y].isOccluded?(j=Y+1,V=0):(V++,V>M&&(M=V,E=j));return b.slice(E,E+M)})(y)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],y=new a.a1;for(const ce of s){const oe=new a.P(ce.x+ni,ce.y+ni);y.extend(oe),c.push(oe)}const{minX:b,minY:E,maxX:M,maxY:j}=y,V=this.grid.query(b,E,M,j).concat(this.ignoredGrid.query(b,E,M,j)),Y={},re={};for(const ce of V){const oe=ce.key;if(Y[oe.bucketInstanceId]===void 0&&(Y[oe.bucketInstanceId]={}),Y[oe.bucketInstanceId][oe.featureIndex])continue;const ge=[new a.P(ce.x1,ce.y1),new a.P(ce.x2,ce.y1),new a.P(ce.x2,ce.y2),new a.P(ce.x1,ce.y2)];a.ay(c,ge)&&(Y[oe.bucketInstanceId][oe.featureIndex]=!0,re[oe.bucketInstanceId]===void 0&&(re[oe.bucketInstanceId]=[]),re[oe.bucketInstanceId].push(oe.featureIndex))}return re}insertCollisionBox(s,c,y,b,E,M){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:E,collisionGroupID:M,overlapMode:c},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,c,y,b,E,M){const j=y?this.ignoredGrid:this.grid,V={bucketInstanceId:b,featureIndex:E,collisionGroupID:M,overlapMode:c};for(let Y=0;Y<s.length;Y+=4)j.insertCircle(V,s[Y],s[Y+1],s[Y+2])}projectAndGetPerspectiveRatio(s,c,y,b,E){if(E){let M;b?(M=[s,c,b(s,c),1],a.av(M,M,E)):(M=[s,c,0,1],Ri(M,M,E));const j=M[3];return{x:(M[0]/j+1)/2*this.transform.width+ni,y:(-M[1]/j+1)/2*this.transform.height+ni,perspectiveRatio:.5+this.transform.cameraToCenterDistance/j*.5,isOccluded:!1,signedDistanceFromCamera:j}}{const M=this.transform.projectTileCoordinates(s,c,y,b);return{x:(M.point.x+1)/2*this.transform.width+ni,y:(1-M.point.y)/2*this.transform.height+ni,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(s,c,y,b){const E=this.transform.projectTileCoordinates(s,c,y,b);return .5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5}isOffscreen(s,c,y,b){return y<ni||s>=this.screenRightBoundary||b<ni||c>this.screenBottomBoundary}isInsideGrid(s,c,y,b){return y>=0&&s<this.gridRightBoundary&&b>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const s=a.af([]);return a.M(s,s,[-100,-100,0]),s}_projectCollisionBox(s,c,y,b,E,M,j,V,Y,re,ce){let oe=1,ge=0,Me=0,Ze=1;const We=s.anchorPointX+j[0],Xe=s.anchorPointY+j[1];if(M&&!E){const Ur=this.projectAndGetPerspectiveRatio(We+1,Xe,b,Y,ce),Ar=Ur.x-V.x,nn=Math.atan((Ur.y-V.y)/Ar)+(Ar<0?Math.PI:0),Zn=Math.sin(nn),fi=Math.cos(nn);oe=fi,ge=Zn,Me=-Zn,Ze=fi}else if(!M&&E){const Ur=de(this.transform);oe=Ur.vecEast[0],ge=Ur.vecEast[1],Me=Ur.vecSouth[0],Ze=Ur.vecSouth[1]}let at=V.x,wt=V.y,dt=c;E&&(at=We,wt=Xe,dt=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),dt*=this.transform.getPitchedTextCorrection(We,Xe,b),re||(dt*=a.ag(.5+V.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),re&&(at+=oe*re.x*dt+Me*re.y*dt,wt+=ge*re.x*dt+Ze*re.y*dt);const Et=s.x1*dt,Tt=s.x2*dt,ft=(Et+Tt)/2,Bt=s.y1*dt,ir=s.y2*dt,Jt=(Bt+ir)/2,er=[{offsetX:Et,offsetY:Bt},{offsetX:ft,offsetY:Bt},{offsetX:Tt,offsetY:Bt},{offsetX:Tt,offsetY:Jt},{offsetX:Tt,offsetY:ir},{offsetX:ft,offsetY:ir},{offsetX:Et,offsetY:ir},{offsetX:Et,offsetY:Jt}];let or=[];for(const{offsetX:Ur,offsetY:Ar}of er)or.push(new a.P(at+oe*Ur+Me*Ar,wt+ge*Ur+Ze*Ar));let Gr=!1;if(E){const Ur=or.map((Ar=>this.projectAndGetPerspectiveRatio(Ar.x,Ar.y,b,Y,ce)));Gr=Ur.some((Ar=>!Ar.isOccluded)),or=Ur.map((Ar=>new a.P(Ar.x,Ar.y)))}else Gr=!0;return{box:a.az(or),allPointsOccluded:!Gr}}}class Eo{constructor(s,c,y,b){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?c:-c))):b&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class $n{constructor(s,c,y,b,E){this.text=new Eo(s?s.text:null,c,y,E),this.icon=new Eo(s?s.icon:null,c,b,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class qn{constructor(s,c,y){this.text=s,this.icon=c,this.skipFade=y}}class mi{constructor(s,c,y,b,E){this.bucketInstanceId=s,this.featureIndex=c,this.sourceLayerIndex=y,this.bucketIndex=b,this.tileID=E}}class Hn{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const c=++this.maxGroupID;this.collisionGroups[s]={ID:c,predicate:y=>y.collisionGroupID===c}}return this.collisionGroups[s]}}function da(S,s,c,y,b){const{horizontalAlign:E,verticalAlign:M}=a.aG(S);return new a.P(-(E-.5)*s+y[0]*b,-(M-.5)*c+y[1]*b)}class Ti{constructor(s,c,y,b,E){this.transform=s.clone(),this.terrain=c,this.collisionIndex=new Ji(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Hn(b),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const c=this.terrain;return c?(y,b)=>c.getElevation(s,y,b):null}getBucketParts(s,c,y,b){const E=y.getBucket(c),M=y.latestFeatureIndex;if(!E||!M||c.id!==E.layerIds[0])return;const j=y.collisionBoxArray,V=E.layers[0].layout,Y=E.layers[0].paint,re=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),ce=y.tileSize/a.$,oe=y.tileID.toUnwrapped(),ge=V.get("text-rotation-alignment")==="map",Me=a.aB(y,1,this.transform.zoom),Ze=a.aC(this.collisionIndex.transform,y,Y.get("text-translate"),Y.get("text-translate-anchor")),We=a.aC(this.collisionIndex.transform,y,Y.get("icon-translate"),Y.get("icon-translate-anchor")),Xe=jt(ge,this.transform,Me);this.retainedQueryData[E.bucketInstanceId]=new mi(E.bucketInstanceId,M,E.sourceLayerIndex,E.index,y.tileID);const at={bucket:E,layout:V,translationText:Ze,translationIcon:We,unwrappedTileID:oe,pitchedLabelPlaneMatrix:Xe,scale:re,textPixelRatio:ce,holdingForFade:y.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:a.am(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(b)for(const wt of E.sortKeyRanges){const{sortKey:dt,symbolInstanceStart:Et,symbolInstanceEnd:Tt}=wt;s.push({sortKey:dt,symbolInstanceStart:Et,symbolInstanceEnd:Tt,parameters:at})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:at})}attemptAnchorPlacement(s,c,y,b,E,M,j,V,Y,re,ce,oe,ge,Me,Ze,We,Xe,at,wt,dt){const Et=a.aD[s.textAnchor],Tt=[s.textOffset0,s.textOffset1],ft=da(Et,y,b,Tt,E),Bt=this.collisionIndex.placeCollisionBox(c,oe,V,Y,re,j,M,We,ce.predicate,wt,ft,dt);if((!at||this.collisionIndex.placeCollisionBox(at,oe,V,Y,re,j,M,Xe,ce.predicate,wt,ft,dt).placeable)&&Bt.placeable){let ir;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID].text&&(ir=this.prevPlacement.variableOffsets[ge.crossTileID].anchor),ge.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ge.crossTileID]={textOffset:Tt,width:y,height:b,anchor:Et,textBoxScale:E,prevAnchor:ir},this.markUsedJustification(Me,Et,ge,Ze),Me.allowVerticalPlacement&&(this.markUsedOrientation(Me,Ze,ge),this.placedOrientations[ge.crossTileID]=Ze),{shift:ft,placedGlyphBoxes:Bt}}}placeLayerBucketPart(s,c,y){const{bucket:b,layout:E,translationText:M,translationIcon:j,unwrappedTileID:V,pitchedLabelPlaneMatrix:Y,textPixelRatio:re,holdingForFade:ce,collisionBoxArray:oe,partiallyEvaluatedTextSize:ge,collisionGroup:Me}=s.parameters,Ze=E.get("text-optional"),We=E.get("icon-optional"),Xe=a.aE(E,"text-overlap","text-allow-overlap"),at=Xe==="always",wt=a.aE(E,"icon-overlap","icon-allow-overlap"),dt=wt==="always",Et=E.get("text-rotation-alignment")==="map",Tt=E.get("text-pitch-alignment")==="map",ft=E.get("icon-text-fit")!=="none",Bt=E.get("symbol-z-order")==="viewport-y",ir=at&&(dt||!b.hasIconData()||We),Jt=dt&&(at||!b.hasTextData()||Ze);!b.collisionArrays&&oe&&b.deserializeCollisionBoxes(oe);const er=this.retainedQueryData[b.bucketInstanceId].tileID,or=this._getTerrainElevationFunc(er),Gr=this.transform.getFastPathSimpleProjectionMatrix(er),Ur=(Ar,nn,Zn)=>{var fi,ra;if(c[Ar.crossTileID])return;if(ce)return void(this.placements[Ar.crossTileID]=new qn(!1,!1,!1));let ki=!1,Li=!1,Ei=!0,_i=null,ji={box:null,placeable:!1,offscreen:null,occluded:!1},uo={placeable:!1},si=null,po=null,co=null,Wl=0,Yc=0,Jc=0;nn.textFeatureIndex?Wl=nn.textFeatureIndex:Ar.useRuntimeCollisionCircles&&(Wl=Ar.featureIndex),nn.verticalTextFeatureIndex&&(Yc=nn.verticalTextFeatureIndex);const $u=nn.textBox;if($u){const sl=Ja=>{let ga=a.an.horizontal;if(b.allowVerticalPlacement&&!Ja&&this.prevPlacement){const Ds=this.prevPlacement.placedOrientations[Ar.crossTileID];Ds&&(this.placedOrientations[Ar.crossTileID]=Ds,ga=Ds,this.markUsedOrientation(b,ga,Ar))}return ga},yu=(Ja,ga)=>{if(b.allowVerticalPlacement&&Ar.numVerticalGlyphVertices>0&&nn.verticalTextBox){for(const Ds of b.writingModes)if(Ds===a.an.vertical?(ji=ga(),uo=ji):ji=Ja(),ji&&ji.placeable)break}else ji=Ja()},Qc=Ar.textAnchorOffsetStartIndex,$f=Ar.textAnchorOffsetEndIndex;if($f===Qc){const Ja=(ga,Ds)=>{const To=this.collisionIndex.placeCollisionBox(ga,Xe,re,er,V,Tt,Et,M,Me.predicate,or,void 0,Gr);return To&&To.placeable&&(this.markUsedOrientation(b,Ds,Ar),this.placedOrientations[Ar.crossTileID]=Ds),To};yu((()=>Ja($u,a.an.horizontal)),(()=>{const ga=nn.verticalTextBox;return b.allowVerticalPlacement&&Ar.numVerticalGlyphVertices>0&&ga?Ja(ga,a.an.vertical):{box:null,offscreen:null}})),sl(ji&&ji.placeable)}else{let Ja=a.aD[(ra=(fi=this.prevPlacement)===null||fi===void 0?void 0:fi.variableOffsets[Ar.crossTileID])===null||ra===void 0?void 0:ra.anchor];const ga=(To,ib,O2)=>{const ny=To.x2-To.x1,wd=To.y2-To.y1,Ph=Ar.textBoxScale,pc=ft&&wt==="never"?ib:null;let fs=null,mc=Xe==="never"?1:2,iy="never";Ja&&mc++;for(let ef=0;ef<mc;ef++){for(let ay=Qc;ay<$f;ay++){const oy=b.textAnchorOffsets.get(ay);if(Ja&&oy.textAnchor!==Ja)continue;const Sd=this.attemptAnchorPlacement(oy,To,ny,wd,Ph,Et,Tt,re,er,V,Me,iy,Ar,b,O2,M,j,pc,or);if(Sd&&(fs=Sd.placedGlyphBoxes,fs&&fs.placeable))return ki=!0,_i=Sd.shift,fs}Ja?Ja=null:iy=Xe}return y&&!fs&&(fs={box:this.collisionIndex.placeCollisionBox($u,"always",re,er,V,Tt,Et,M,Me.predicate,or,void 0,Gr).box,offscreen:!1,placeable:!1,occluded:!1}),fs};yu((()=>ga($u,nn.iconBox,a.an.horizontal)),(()=>{const To=nn.verticalTextBox;return b.allowVerticalPlacement&&(!ji||!ji.placeable)&&Ar.numVerticalGlyphVertices>0&&To?ga(To,nn.verticalIconBox,a.an.vertical):{box:null,occluded:!0,offscreen:null}})),ji&&(ki=ji.placeable,Ei=ji.offscreen);const Ds=sl(ji&&ji.placeable);if(!ki&&this.prevPlacement){const To=this.prevPlacement.variableOffsets[Ar.crossTileID];To&&(this.variableOffsets[Ar.crossTileID]=To,this.markUsedJustification(b,To.anchor,Ar,Ds))}}}if(si=ji,ki=si&&si.placeable,Ei=si&&si.offscreen,Ar.useRuntimeCollisionCircles){const sl=b.text.placedSymbolArray.get(Ar.centerJustifiedTextSymbolIndex),yu=a.ao(b.textSizeData,ge,sl),Qc=E.get("text-padding");po=this.collisionIndex.placeCollisionCircles(Xe,sl,b.lineVertexArray,b.glyphOffsetArray,yu,V,Y,y,Tt,Me.predicate,Ar.collisionCircleDiameter,Qc,M,or),po.circles.length&&po.collisionDetected&&!y&&a.w("Collisions detected, but collision boxes are not shown"),ki=at||po.circles.length>0&&!po.collisionDetected,Ei=Ei&&po.offscreen}if(nn.iconFeatureIndex&&(Jc=nn.iconFeatureIndex),nn.iconBox){const sl=yu=>this.collisionIndex.placeCollisionBox(yu,wt,re,er,V,Tt,Et,j,Me.predicate,or,ft&&_i?_i:void 0,Gr);uo&&uo.placeable&&nn.verticalIconBox?(co=sl(nn.verticalIconBox),Li=co.placeable):(co=sl(nn.iconBox),Li=co.placeable),Ei=Ei&&co.offscreen}const _d=Ze||Ar.numHorizontalGlyphVertices===0&&Ar.numVerticalGlyphVertices===0,xd=We||Ar.numIconVertices===0;_d||xd?xd?_d||(Li=Li&&ki):ki=Li&&ki:Li=ki=Li&&ki;const Ah=Li&&co.placeable;if(ki&&si.placeable&&this.collisionIndex.insertCollisionBox(si.box,Xe,E.get("text-ignore-placement"),b.bucketInstanceId,uo&&uo.placeable&&Yc?Yc:Wl,Me.ID),Ah&&this.collisionIndex.insertCollisionBox(co.box,wt,E.get("icon-ignore-placement"),b.bucketInstanceId,Jc,Me.ID),po&&ki&&this.collisionIndex.insertCollisionCircles(po.circles,Xe,E.get("text-ignore-placement"),b.bucketInstanceId,Wl,Me.ID),y&&this.storeCollisionData(b.bucketInstanceId,Zn,nn,si,co,po),Ar.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(b.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ar.crossTileID]=new qn((ki||ir)&&!si?.occluded,(Li||Jt)&&!co?.occluded,Ei||b.justReloaded),c[Ar.crossTileID]=!0};if(Bt){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ar=b.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let nn=Ar.length-1;nn>=0;--nn){const Zn=Ar[nn];Ur(b.symbolInstances.get(Zn),b.collisionArrays[Zn],Zn)}}else for(let Ar=s.symbolInstanceStart;Ar<s.symbolInstanceEnd;Ar++)Ur(b.symbolInstances.get(Ar),b.collisionArrays[Ar],Ar);b.justReloaded=!1}storeCollisionData(s,c,y,b,E,M){if(y.textBox||y.iconBox){let j,V;this.collisionBoxArrays.has(s)?j=this.collisionBoxArrays.get(s):(j=new Map,this.collisionBoxArrays.set(s,j)),j.has(c)?V=j.get(c):(V={text:null,icon:null},j.set(c,V)),y.textBox&&(V.text=b.box),y.iconBox&&(V.icon=E.box)}if(M){let j=this.collisionCircleArrays[s];j===void 0&&(j=this.collisionCircleArrays[s]=[]);for(let V=0;V<M.circles.length;V+=4)j.push(M.circles[V+0]-ni),j.push(M.circles[V+1]-ni),j.push(M.circles[V+2]),j.push(M.collisionDetected?1:0)}}markUsedJustification(s,c,y,b){let E;E=b===a.an.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[a.aF(c)];const M=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const j of M)j>=0&&(s.text.placedSymbolArray.get(j).crossTileID=E>=0&&j!==E?0:y.crossTileID)}markUsedOrientation(s,c,y){const b=c===a.an.horizontal||c===a.an.horizontalOnly?c:0,E=c===a.an.vertical?c:0,M=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const j of M)s.text.placedSymbolArray.get(j).placedOrientation=b;y.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let y=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const b=c?c.symbolFadeChange(s):1,E=c?c.opacities:{},M=c?c.variableOffsets:{},j=c?c.placedOrientations:{};for(const V in this.placements){const Y=this.placements[V],re=E[V];re?(this.opacities[V]=new $n(re,b,Y.text,Y.icon),y=y||Y.text!==re.text.placed||Y.icon!==re.icon.placed):(this.opacities[V]=new $n(null,b,Y.text,Y.icon,Y.skipFade),y=y||Y.text||Y.icon)}for(const V in E){const Y=E[V];if(!this.opacities[V]){const re=new $n(Y,b,!1,!1);re.isHidden()||(this.opacities[V]=re,y=y||Y.text.placed||Y.icon.placed)}}for(const V in M)this.variableOffsets[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.variableOffsets[V]=M[V]);for(const V in j)this.placedOrientations[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.placedOrientations[V]=j[V]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:s)}updateLayerOpacities(s,c){const y={};for(const b of c){const E=b.getBucket(s);E&&b.latestFeatureIndex&&s.id===E.layerIds[0]&&this.updateBucketOpacities(E,b.tileID,y,b.collisionBoxArray)}}updateBucketOpacities(s,c,y,b){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const E=s.layers[0],M=E.layout,j=new $n(null,0,!1,!1,!0),V=M.get("text-allow-overlap"),Y=M.get("icon-allow-overlap"),re=E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ce=M.get("text-rotation-alignment")==="map",oe=M.get("text-pitch-alignment")==="map",ge=M.get("icon-text-fit")!=="none",Me=new $n(null,0,V&&(Y||!s.hasIconData()||M.get("icon-optional")),Y&&(V||!s.hasTextData()||M.get("text-optional")),!0);!s.collisionArrays&&b&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(b);const Ze=(Xe,at,wt)=>{for(let dt=0;dt<at/4;dt++)Xe.opacityVertexArray.emplaceBack(wt);Xe.hasVisibleVertices=Xe.hasVisibleVertices||wt!==gs},We=this.collisionBoxArrays.get(s.bucketInstanceId);for(let Xe=0;Xe<s.symbolInstances.length;Xe++){const at=s.symbolInstances.get(Xe),{numHorizontalGlyphVertices:wt,numVerticalGlyphVertices:dt,crossTileID:Et}=at;let Tt=this.opacities[Et];y[Et]?Tt=j:Tt||(Tt=Me,this.opacities[Et]=Tt),y[Et]=!0;const ft=at.numIconVertices>0,Bt=this.placedOrientations[at.crossTileID],ir=Bt===a.an.vertical,Jt=Bt===a.an.horizontal||Bt===a.an.horizontalOnly;if(wt>0||dt>0){const or=rs(Tt.text);Ze(s.text,wt,ir?gs:or),Ze(s.text,dt,Jt?gs:or);const Gr=Tt.text.isHidden();[at.rightJustifiedTextSymbolIndex,at.centerJustifiedTextSymbolIndex,at.leftJustifiedTextSymbolIndex].forEach((nn=>{nn>=0&&(s.text.placedSymbolArray.get(nn).hidden=Gr||ir?1:0)})),at.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(at.verticalPlacedTextSymbolIndex).hidden=Gr||Jt?1:0);const Ur=this.variableOffsets[at.crossTileID];Ur&&this.markUsedJustification(s,Ur.anchor,at,Bt);const Ar=this.placedOrientations[at.crossTileID];Ar&&(this.markUsedJustification(s,"left",at,Ar),this.markUsedOrientation(s,Ar,at))}if(ft){const or=rs(Tt.icon),Gr=!(ge&&at.verticalPlacedIconSymbolIndex&&ir);at.placedIconSymbolIndex>=0&&(Ze(s.icon,at.numIconVertices,Gr?or:gs),s.icon.placedSymbolArray.get(at.placedIconSymbolIndex).hidden=Tt.icon.isHidden()),at.verticalPlacedIconSymbolIndex>=0&&(Ze(s.icon,at.numVerticalIconVertices,Gr?gs:or),s.icon.placedSymbolArray.get(at.verticalPlacedIconSymbolIndex).hidden=Tt.icon.isHidden())}const er=We&&We.has(Xe)?We.get(Xe):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const or=s.collisionArrays[Xe];if(or){let Gr=new a.P(0,0);if(or.textBox||or.verticalTextBox){let Ur=!0;if(re){const Ar=this.variableOffsets[Et];Ar?(Gr=da(Ar.anchor,Ar.width,Ar.height,Ar.textOffset,Ar.textBoxScale),ce&&Gr._rotate(oe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ur=!1}if(or.textBox||or.verticalTextBox){let Ar;or.textBox&&(Ar=ir),or.verticalTextBox&&(Ar=Jt),Ha(s.textCollisionBox.collisionVertexArray,Tt.text.placed,!Ur||Ar,er.text,Gr.x,Gr.y)}}if(or.iconBox||or.verticalIconBox){const Ur=!!(!Jt&&or.verticalIconBox);let Ar;or.iconBox&&(Ar=Ur),or.verticalIconBox&&(Ar=!Ur),Ha(s.iconCollisionBox.collisionVertexArray,Tt.icon.placed,Ar,er.icon,ge?Gr.x:0,ge?Gr.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,c){const y=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*y>s}setStale(){this.stale=!0}}function Ha(S,s,c,y,b,E){y&&y.length!==0||(y=[0,0,0,0]);const M=y[0]-ni,j=y[1]-ni,V=y[2]-ni,Y=y[3]-ni;S.emplaceBack(s?1:0,c?1:0,b||0,E||0,M,j),S.emplaceBack(s?1:0,c?1:0,b||0,E||0,V,j),S.emplaceBack(s?1:0,c?1:0,b||0,E||0,V,Y),S.emplaceBack(s?1:0,c?1:0,b||0,E||0,M,Y)}const _a=Math.pow(2,25),ts=Math.pow(2,24),xa=Math.pow(2,17),nc=Math.pow(2,16),ic=Math.pow(2,9),Co=Math.pow(2,8),Hs=Math.pow(2,1);function rs(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;const s=S.placed?1:0,c=Math.floor(127*S.opacity);return c*_a+s*ts+c*xa+s*nc+c*ic+s*Co+c*Hs+s}const gs=0;class wa{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,c,y,b,E){const M=this._bucketParts;for(;this._currentTileIndex<s.length;)if(c.getBucketParts(M,b,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort(((j,V)=>j.sortKey-V.sortKey)));this._currentPartIndex<M.length;)if(c.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,E())return!0;return!1}}class Fu{constructor(s,c,y,b,E,M,j,V){this.placement=new Ti(s,c,M,j,V),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(s,c,y){const b=w.now(),E=()=>!this._forceFullPlacement&&w.now()-b>2;for(;this._currentPlacementIndex>=0;){const M=c[s[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=j)&&(!M.maxzoom||M.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new wa(M)),this._inProgressLayer.continuePlacement(y[M.source],this.placement,this._showCollisionBoxes,M,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Ll=512/a.$/2;class Dl{constructor(s,c,y){this.tileID=s,this.bucketInstanceId=y,this._symbolsByKey={};const b=new Map;for(let E=0;E<c.length;E++){const M=c.get(E),j=M.key,V=b.get(j);V?V.push(M):b.set(j,[M])}for(const[E,M]of b){const j={positions:M.map((V=>({x:Math.floor(V.anchorX*Ll),y:Math.floor(V.anchorY*Ll)}))),crossTileIDs:M.map((V=>V.crossTileID))};if(j.positions.length>128){const V=new a.aH(j.positions.length,16,Uint16Array);for(const{x:Y,y:re}of j.positions)V.add(Y,re);V.finish(),delete j.positions,j.index=V}this._symbolsByKey[E]=j}}getScaledCoordinates(s,c){const{x:y,y:b,z:E}=this.tileID.canonical,{x:M,y:j,z:V}=c.canonical,Y=Ll/Math.pow(2,V-E),re=(j*a.$+s.anchorY)*Y,ce=b*a.$*Ll;return{x:Math.floor((M*a.$+s.anchorX)*Y-y*a.$*Ll),y:Math.floor(re-ce)}}findMatches(s,c,y){const b=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let E=0;E<s.length;E++){const M=s.get(E);if(M.crossTileID)continue;const j=this._symbolsByKey[M.key];if(!j)continue;const V=this.getScaledCoordinates(M,c);if(j.index){const Y=j.index.range(V.x-b,V.y-b,V.x+b,V.y+b).sort();for(const re of Y){const ce=j.crossTileIDs[re];if(!y[ce]){y[ce]=!0,M.crossTileID=ce;break}}}else if(j.positions)for(let Y=0;Y<j.positions.length;Y++){const re=j.positions[Y],ce=j.crossTileIDs[Y];if(Math.abs(re.x-V.x)<=b&&Math.abs(re.y-V.y)<=b&&!y[ce]){y[ce]=!0,M.crossTileID=ce;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:s})=>s))}}class ${constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class te{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const c=Math.round((s-this.lng)/360);if(c!==0)for(const y in this.indexes){const b=this.indexes[y],E={};for(const M in b){const j=b[M];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+c),E[j.tileID.key]=j}this.indexes[y]=E}this.lng=s}addBucket(s,c,y){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let E=0;E<c.symbolInstances.length;E++)c.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const b=this.usedCrossTileIDs[s.overscaledZ];for(const E in this.indexes){const M=this.indexes[E];if(Number(E)>s.overscaledZ)for(const j in M){const V=M[j];V.tileID.isChildOf(s)&&V.findMatches(c.symbolInstances,s,b)}else{const j=M[s.scaledTo(Number(E)).key];j&&j.findMatches(c.symbolInstances,s,b)}}for(let E=0;E<c.symbolInstances.length;E++){const M=c.symbolInstances.get(E);M.crossTileID||(M.crossTileID=y.generate(),b[M.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new Dl(s,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(s,c){for(const y of c.getCrossTileIDsLists())for(const b of y)delete this.usedCrossTileIDs[s][b]}removeStaleBuckets(s){let c=!1;for(const y in this.indexes){const b=this.indexes[y];for(const E in b)s[b[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,b[E]),delete b[E],c=!0)}return c}}class Oe{constructor(){this.layerIndexes={},this.crossTileIDs=new $,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,c,y){let b=this.layerIndexes[s.id];b===void 0&&(b=this.layerIndexes[s.id]=new te);let E=!1;const M={};b.handleWrapJump(y);for(const j of c){const V=j.getBucket(s);V&&s.id===V.layerIds[0]&&(V.bucketInstanceId||(V.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(j.tileID,V,this.crossTileIDs)&&(E=!0),M[V.bucketInstanceId]=!0)}return b.removeStaleBuckets(M)&&(E=!0),E}pruneUnusedLayers(s){const c={};s.forEach((y=>{c[y]=!0}));for(const y in this.layerIndexes)c[y]||delete this.layerIndexes[y]}}var pt="void main() {fragColor=vec4(1.0);}";const At={prelude:xt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:xt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:xt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:xt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:xt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:xt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:xt(pt,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:xt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:xt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:xt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:xt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:xt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(textureSize(u_elevation_stops,0)[0]);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int num_elevation_stops=textureSize(u_elevation_stops,0)[0];int r=(num_elevation_stops-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(textureSize(u_color_stops,0)[0]);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:xt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:xt(pt,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:xt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:xt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:xt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:xt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:xt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:xt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:xt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:xt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:xt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:xt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:xt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:xt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:xt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:xt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:xt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:xt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:xt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:xt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:xt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:xt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function xt(S,s){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=s.match(/in ([\w]+) ([\w]+)/g),b=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=E?E.concat(b):b,j={};return{fragmentSource:S=S.replace(c,((V,Y,re,ce,oe)=>(j[oe]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
in ${re} ${ce} ${oe};
#else
uniform ${re} ${ce} u_${oe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${oe}
    ${re} ${ce} ${oe} = u_${oe};
#endif
`))),vertexSource:s=s.replace(c,((V,Y,re,ce,oe)=>{const ge=ce==="float"?"vec2":"vec4",Me=oe.match(/color/)?"color":ge;return j[oe]?Y==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
in ${re} ${ge} a_${oe};
out ${re} ${ce} ${oe};
#else
uniform ${re} ${ce} u_${oe};
#endif
`:Me==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = a_${oe};
#else
    ${re} ${ce} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = unpack_mix_${Me}(a_${oe}, u_${oe}_t);
#else
    ${re} ${ce} ${oe} = u_${oe};
#endif
`:Y==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
in ${re} ${ge} a_${oe};
#else
uniform ${re} ${ce} u_${oe};
#endif
`:Me==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${re} ${ce} ${oe} = a_${oe};
#else
    ${re} ${ce} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${re} ${ce} ${oe} = unpack_mix_${Me}(a_${oe}, u_${oe}_t);
#else
    ${re} ${ce} ${oe} = u_${oe};
#endif
`})),staticAttributes:y,staticUniforms:M}}class $t{constructor(s,c,y){this.vertexBuffer=s,this.indexBuffer=c,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ir=a.aI([{name:"a_pos",type:"Int16",components:2}]);const Br="#define PROJECTION_MERCATOR",Xr="mercator";class Zr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Xr}get shaderDefine(){return Br}get shaderPreludeCode(){return At.projectionMercator}get vertexShaderPreludeCode(){return At.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,c,y,b,E){if(this._cachedMesh)return this._cachedMesh;const M=new a.aK;M.emplaceBack(0,0),M.emplaceBack(a.$,0),M.emplaceBack(0,a.$),M.emplaceBack(a.$,a.$);const j=s.createVertexBuffer(M,Ir.members),V=a.aL.simpleSegment(0,0,4,2),Y=new a.aM;Y.emplaceBack(1,0,2),Y.emplaceBack(1,2,3);const re=s.createIndexBuffer(Y);return this._cachedMesh=new $t(j,re,V),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class Nr{constructor(s=0,c=0,y=0,b=0){if(isNaN(s)||s<0||isNaN(c)||c<0||isNaN(y)||y<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=c,this.left=y,this.right=b}interpolate(s,c,y){return c.top!=null&&s.top!=null&&(this.top=a.C.number(s.top,c.top,y)),c.bottom!=null&&s.bottom!=null&&(this.bottom=a.C.number(s.bottom,c.bottom,y)),c.left!=null&&s.left!=null&&(this.left=a.C.number(s.left,c.left,y)),c.right!=null&&s.right!=null&&(this.right=a.C.number(s.right,c.right,y)),this}getCenter(s,c){const y=a.ag((this.left+s-this.right)/2,0,s),b=a.ag((this.top+c-this.bottom)/2,0,c);return new a.P(y,b)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Nr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function wn(S,s){if(!S.renderWorldCopies||S.lngRange)return;const c=s.lng-S.center.lng;s.lng+=c>180?-360:c<-180?360:0}function ln(S){return Math.max(0,Math.floor(S))}class Rn{constructor(s,c,y,b,E,M){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=M===void 0||!!M,this._minZoom=c||0,this._maxZoom=y||22,this._minPitch=b??0,this._maxPitch=E??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ln(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Nr,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,c,y){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=ln(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new Nr(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!y&&s.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){const c=a.aN(s,-180,180)*Math.PI/180;var y,b,E,M,j,V,Y,re,ce;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=h(),y=this._rotationMatrix,E=-this._bearingInRadians,M=(b=this._rotationMatrix)[0],j=b[1],V=b[2],Y=b[3],re=Math.sin(E),ce=Math.cos(E),y[0]=M*ce+V*re,y[1]=j*ce+Y*re,y[2]=M*-re+V*ce,y[3]=j*-re+Y*ce)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){const c=a.ag(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){const c=s/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aO(this._fovInRadians)}setFov(s){s=a.ag(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=a.ad(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){const c=this.getConstrained(this._center,s).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=a.ae(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,c){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,c,y){this._unmodified=!1,this._edgeInsets.interpolate(s,c,y),this._constrain(),this._calcMatrices()}resize(s,c,y=!0){this._width=s,this._height=c,y&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new It([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,a.ah])}getConstrained(s,c){return this._callbacks.getConstrained(s,c)}getCameraQueryGeometry(s,c){if(c.length===1)return[c[0],s];{const{minX:y,minY:b,maxX:E,maxY:M}=a.a1.fromPoints(c).extend(s);return[new a.P(y,b),new a.P(E,b),new a.P(E,M),new a.P(y,M),new a.P(y,b)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:c,zoom:y}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(y),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=a.af(new Float64Array(16));a.N(s,s,[this._width/2,-this._height/2,1]),a.M(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=a.af(new Float64Array(16)),a.N(s,s,[1,-1,1]),a.M(s,s,[-1,-1,0]),a.N(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,c,y,b){const E=y!==void 0?y:this.bearing,M=b=b!==void 0?b:this.pitch,j=a.a0.fromLngLat(s,c),V=-Math.cos(a.ad(M)),Y=Math.sin(a.ad(M)),re=Y*Math.sin(a.ad(E)),ce=-Y*Math.cos(a.ad(E));let oe=this.elevation;const ge=c-oe;let Me;V*ge>=0||Math.abs(V)<.1?(Me=1e4,oe=c+Me*V):Me=-ge/V;let Ze,We,Xe=a.aP(1,j.y),at=0;do{if(at+=1,at>10)break;We=Me/Xe,Ze=new a.a0(j.x+re*We,j.y+ce*We),Xe=1/Ze.meterInMercatorCoordinateUnits()}while(Math.abs(Me-We*Xe)>1e-12);return{center:Ze.toLngLat(),elevation:oe,zoom:a.aj(this.height/2/Math.tan(this.fovInRadians/2)/We/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;const c=a.ai(1,this.center.lat)*this.worldSize,y=this.cameraToCenterDistance/c,b=a.a0.fromLngLat(this.center,this.elevation),E=Ue(this.center,this.elevation,this.pitch,this.bearing,y);this._elevation=s;const M=this.calculateCenterFromCameraLngLatAlt(E.toLngLat(),a.aP(E.z,b.y),this.bearing,this.pitch);this._elevation=M.elevation,this._center=M.center,this.setZoom(M.zoom)}getCameraPoint(){const s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const s=a.ai(1,this.center.lat)*this.worldSize;return Ue(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];const c=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/c,s.canonical.y/c,1/c/a.$,1/c/a.$]}}class un{constructor(s,c){this.min=s,this.max=c,this.center=a.aQ([],a.aR([],this.min,this.max),.5)}quadrant(s){const c=[s%2==0,s<2],y=a.aS(this.min),b=a.aS(this.max);for(let E=0;E<c.length;E++)y[E]=c[E]?this.min[E]:this.center[E],b[E]=c[E]?this.center[E]:this.max[E];return b[2]=this.max[2],new un(y,b)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let c=!0;for(let y=0;y<s.planes.length;y++){const b=this.intersectsPlane(s.planes[y]);if(b===0)return 0;b===1&&(c=!1)}return c?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let c=s[3],y=s[3];for(let b=0;b<3;b++)s[b]>0?(c+=s[b]*this.min[b],y+=s[b]*this.max[b]):(y+=s[b]*this.min[b],c+=s[b]*this.max[b]);return c>=0?2:y<0?0:1}}class Sr{distanceToTile2d(s,c,y,b){const E=b.distanceX([s,c]),M=b.distanceY([s,c]);return Math.hypot(E,M)}getWrap(s,c,y){return y}getTileBoundingVolume(s,c,y,b){var E,M;let j=y,V=y;if(b?.terrain){const re=new a.Z(s.z,c,s.z,s.x,s.y),ce=b.terrain.getMinMaxElevation(re);j=(E=ce.minElevation)!==null&&E!==void 0?E:y,V=(M=ce.maxElevation)!==null&&M!==void 0?M:y}const Y=1<<s.z;return new un([c+s.x/Y,s.y/Y,j],[c+(s.x+1)/Y,(s.y+1)/Y,V])}allowVariableZoom(s,c){const y=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,b=a.ag(78.5-y/2,0,60);return!!c.terrain||s.pitch>b}allowWorldCopies(){return!0}prepareNextFrame(){}}class Jr{constructor(s,c,y){this.points=s,this.planes=c,this.aabb=y}static fromInvProjectionMatrix(s,c=1,y=0,b,E){const M=E?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],j=Math.pow(2,y),V=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((oe=>(function(ge,Me,Ze,We){const Xe=a.av([],ge,Me),at=1/Xe[3]/Ze*We;return a.aX(Xe,Xe,[at,at,1/Xe[3],at])})(oe,s,c,j)));b&&(function(oe,ge,Me,Ze){const We=Ze?4:0,Xe=Ze?0:4;let at=0;const wt=[],dt=[];for(let ft=0;ft<4;ft++){const Bt=a.aT([],oe[ft+Xe],oe[ft+We]),ir=a.aY(Bt);a.aQ(Bt,Bt,1/ir),wt.push(ir),dt.push(Bt)}for(let ft=0;ft<4;ft++){const Bt=a.aZ(oe[ft+We],dt[ft],Me);at=Bt!==null&&Bt>=0?Math.max(at,Bt):Math.max(at,wt[ft])}const Et=(function(ft,Bt){const ir=a.aT([],ft[Bt[0]],ft[Bt[1]]),Jt=a.aT([],ft[Bt[2]],ft[Bt[1]]),er=[0,0,0,0];return a.aU(er,a.aV([],ir,Jt)),er[3]=-a.aW(er,ft[Bt[0]]),er})(oe,ge),Tt=(function(ft,Bt){const ir=a.a_(ft),Jt=a.a$([],ft,1/ir),er=a.aT([],Bt,a.aQ([],Jt,a.aW(Bt,Jt))),or=a.a_(er);if(or>0){const Gr=Math.sqrt(1-Jt[3]*Jt[3]),Ur=a.aQ([],Jt,-Jt[3]),Ar=a.aR([],Ur,a.aQ([],er,Gr/or));return a.b0(Bt,Ar)}return null})(Me,Et);if(Tt!==null){const ft=Tt/a.aW(dt[0],Et);at=Math.min(at,ft)}for(let ft=0;ft<4;ft++){const Bt=Math.min(at,wt[ft]);oe[ft+Xe]=[oe[ft+We][0]+dt[ft][0]*Bt,oe[ft+We][1]+dt[ft][1]*Bt,oe[ft+We][2]+dt[ft][2]*Bt,1]}})(V,M[0],b,E);const Y=M.map((oe=>{const ge=a.aT([],V[oe[0]],V[oe[1]]),Me=a.aT([],V[oe[2]],V[oe[1]]),Ze=a.aU([],a.aV([],ge,Me)),We=-a.aW(Ze,V[oe[1]]);return Ze.concat(We)})),re=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ce=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const oe of V)for(let ge=0;ge<3;ge++)re[ge]=Math.min(re[ge],oe[ge]),ce[ge]=Math.max(ce[ge],oe[ge]);return new Jr(V,Y,new un(re,ce))}}class Dn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,c,y){return this._helper.interpolatePadding(s,c,y)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,c,y=!0){this._helper.resize(s,c,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,c){this._helper.overrideNearFarZ(s,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,c){}constructor(s,c,y,b,E){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Rn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(M,j)=>this.getConstrained(M,j)},s,c,y,b,E),this._coveringTilesDetailsProvider=new Sr}clone(){const s=new Dn;return s.apply(this),s}apply(s,c,y){this._helper.apply(s,c,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){const c=[new a.b1(0,s)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new a.P(0,0)),b=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),E=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),j=Math.floor(Math.min(y.x,b.x,E.x,M.x)),V=Math.floor(Math.max(y.x,b.x,E.x,M.x)),Y=1;for(let re=j-Y;re<=V+Y;re++)re!==0&&c.push(new a.b1(re,s))}return c}getCameraFrustum(){return Jr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){const c=this.screenPointToLocation(this.centerPoint,s),y=s?s.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(s,c){const y=a.ai(this.elevation,this.center.lat),b=this.screenPointToMercatorCoordinateAtZ(c,y),E=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),M=a.a0.fromLngLat(s),j=new a.a0(M.x-(b.x-E.x),M.y-(b.y-E.y));this.setCenter(j?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,c){return c?this.coordinatePoint(a.a0.fromLngLat(s),c.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a0.fromLngLat(s))}screenPointToLocation(s,c){var y;return(y=this.screenPointToMercatorCoordinate(s,c))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(s,c){if(c){const y=c.pointCoordinate(s);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,c){const y=c||0,b=[s.x,s.y,0,1],E=[s.x,s.y,1,1];a.av(b,b,this._pixelMatrixInverse),a.av(E,E,this._pixelMatrixInverse);const M=b[3],j=E[3],V=b[1]/M,Y=E[1]/j,re=b[2]/M,ce=E[2]/j,oe=re===ce?0:(y-re)/(ce-re);return new a.a0(a.C.number(b[0]/M,E[0]/j,oe)/this.worldSize,a.C.number(V,Y,oe)/this.worldSize,y)}coordinatePoint(s,c=0,y=this._pixelMatrix){const b=[s.x*this.worldSize,s.y*this.worldSize,c,1];return a.av(b,b,y),new a.P(b[0]/b[3],b[1]/b[3])}getBounds(){const s=Math.max(0,this._helper._height/2-xe(this));return new It().extend(this.screenPointToLocation(new a.P(0,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,s))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(s,c){return c?c.pointCoordinate(s)!=null:s.y>this.height/2-xe(this)}calculatePosMatrix(s,c=!1,y){var b;const E=(b=s.key)!==null&&b!==void 0?b:a.b2(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),M=c?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(E)){const Y=M.get(E);return y?Y.f32:Y.f64}const j=Ae(s,this.worldSize);a.O(j,c?this._alignedProjMatrix:this._viewProjMatrix,j);const V={f64:j,f32:new Float32Array(j)};return M.set(E,V),y?V.f32:V.f64}calculateFogMatrix(s){const c=s.key,y=this._fogMatrixCacheF32;if(y.has(c))return y.get(c);const b=Ae(s,this.worldSize);return a.O(b,this._fogMatrix,b),y.set(c,new Float32Array(b)),y.get(c)}getConstrained(s,c){c=a.ag(+c,this.minZoom,this.maxZoom);const y={center:new a.S(s.lng,s.lat),zoom:c};let b=this._helper._lngRange;this._helper._renderWorldCopies||b!==null||(b=[-179.9999999999,180-1e-10]);const E=this.tileSize*a.ae(y.zoom);let M=0,j=E,V=0,Y=E,re=0,ce=0;const{x:oe,y:ge}=this.size;if(this._helper._latRange){const wt=this._helper._latRange;M=a.U(wt[1])*E,j=a.U(wt[0])*E,j-M<ge&&(re=ge/(j-M))}b&&(V=a.aN(a.V(b[0])*E,0,E),Y=a.aN(a.V(b[1])*E,0,E),Y<V&&(Y+=E),Y-V<oe&&(ce=oe/(Y-V)));const{x:Me,y:Ze}=bt(E,s);let We,Xe;const at=Math.max(ce||0,re||0);if(at){const wt=new a.P(ce?(Y+V)/2:Me,re?(j+M)/2:Ze);return y.center=ve(E,wt).wrap(),y.zoom+=a.aj(at),y}if(this._helper._latRange){const wt=ge/2;Ze-wt<M&&(Xe=M+wt),Ze+wt>j&&(Xe=j-wt)}if(b){const wt=(V+Y)/2;let dt=Me;this._helper._renderWorldCopies&&(dt=a.aN(Me,wt-E/2,wt+E/2));const Et=oe/2;dt-Et<V&&(We=V+Et),dt+Et>Y&&(We=Y-Et)}if(We!==void 0||Xe!==void 0){const wt=new a.P(We??Me,Xe??Ze);y.center=ve(E,wt).wrap()}return y}calculateCenterFromCameraLngLatAlt(s,c,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(s,c,y,b)}_calculateNearFarZIfNeeded(s,c,y){if(!this._helper.autoCalculateNearFarZ)return;const b=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),E=s-b*this._helper._pixelPerMeter/Math.cos(c),M=b<0?E:s,j=Math.PI/2+this.pitchInRadians,V=a.ad(this.fov)*(Math.abs(Math.cos(a.ad(this.roll)))*this.height+Math.abs(Math.sin(a.ad(this.roll)))*this.width)/this.height*(.5+y.y/this.height),Y=Math.sin(V)*M/Math.sin(a.ag(Math.PI-j-V,.01,Math.PI-.01)),re=xe(this),ce=Math.atan(re/this._helper.cameraToCenterDistance),oe=a.ad(.75),ge=ce>oe?2*ce*(.5+y.y/(2*re)):oe,Me=Math.sin(ge)*M/Math.sin(a.ag(Math.PI-j-ge,.01,Math.PI-.01)),Ze=Math.min(Y,Me);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*Ze+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const s=this.centerOffset,c=bt(this.worldSize,this.center),y=c.x,b=c.y;this._helper._pixelPerMeter=a.ai(1,this.center.lat)*this.worldSize;const E=a.ad(Math.min(this.pitch,fr)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(E));let j;this._calculateNearFarZIfNeeded(M,E,s),j=new Float64Array(16),a.b3(j,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.ap(this._invProjMatrix,j),j[8]=2*-s.x/this._helper._width,j[9]=2*s.y/this._helper._height,this._projectionMatrix=a.b4(j),a.N(j,j,[1,-1,1]),a.M(j,j,[0,0,-this._helper.cameraToCenterDistance]),a.b5(j,j,-this.rollInRadians),a.b6(j,j,this.pitchInRadians),a.b5(j,j,-this.bearingInRadians),a.M(j,j,[-y,-b,0]),this._mercatorMatrix=a.N([],j,[this.worldSize,this.worldSize,this.worldSize]),a.N(j,j,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,j),a.M(j,j,[0,0,-this.elevation]),this._viewProjMatrix=j,this._invViewProjMatrix=a.ap([],j);const V=[0,0,-1,1];a.av(V,V,this._invViewProjMatrix),this._cameraPosition=[V[0]/V[3],V[1]/V[3],V[2]/V[3]],this._fogMatrix=new Float64Array(16),a.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-y,-b,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,j);const Y=this._helper._width%2/2,re=this._helper._height%2/2,ce=Math.cos(this.bearingInRadians),oe=Math.sin(-this.bearingInRadians),ge=y-Math.round(y)+ce*Y+oe*re,Me=b-Math.round(b)+ce*re+oe*Y,Ze=new Float64Array(j);if(a.M(Ze,Ze,[ge>.5?ge-1:ge,Me>.5?Me-1:Me,0]),this._alignedProjMatrix=Ze,j=a.ap(new Float64Array(16),this._pixelMatrix),!j)throw new Error("failed to invert matrix");this._pixelMatrixInverse=j,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const s=this.screenPointToMercatorCoordinate(new a.P(0,0)),c=[s.x*this.worldSize,s.y*this.worldSize,0,1];return a.av(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const s=a.ai(1,this.center.lat)*this.worldSize;return Ue(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,c){const y=a.a0.fromLngLat(s),b=[y.x*this.worldSize,y.y*this.worldSize,c,1];return a.av(b,b,this._viewProjMatrix),b[2]/b[3]}getProjectionData(s){const{overscaledTileID:c,aligned:y,applyTerrainMatrix:b}=s,E=this._helper.getMercatorTileCoordinates(c),M=c?this.calculatePosMatrix(c,y,!0):null;let j;return j=c&&c.terrainRttPosMatrix32f&&b?c.terrainRttPosMatrix32f:M||a.b7(),{mainMatrix:j,tileMercatorCoords:E,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:j}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,c,y){return 1}transformLightDirection(s){return a.aS(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,c,y,b){const E=this.calculatePosMatrix(y);let M;b?(M=[s,c,b(s,c),1],a.av(M,M,E)):(M=[s,c,0,1],Ri(M,M,E));const j=M[3];return{point:new a.P(M[0]/j,M[1]/j),signedDistanceFromCamera:j,isOccluded:!1}}populateCache(s){for(const c of s)this.calculatePosMatrix(c)}getMatrixForModel(s,c){const y=a.a0.fromLngLat(s,c),b=y.meterInMercatorCoordinateUnits(),E=a.b8();return a.M(E,E,[y.x,y.y,y.z]),a.b5(E,E,Math.PI),a.b6(E,E,Math.PI/2),a.N(E,E,[-b,b,b]),E}getProjectionDataForCustomLayer(s=!0){const c=new a.Z(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:s}),b=Ae(c,this.worldSize);a.O(b,this._viewProjMatrix,b),y.tileMercatorCoords=[0,0,1,1];const E=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],M=a.b9();return a.N(M,b,E),y.fallbackMatrix=M,y.mainMatrix=M,y}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function li(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function jn(S){if(S.useSlerp)if(S.k<1){const s=a.ba(S.startEulerAngles.roll,S.startEulerAngles.pitch,S.startEulerAngles.bearing),c=a.ba(S.endEulerAngles.roll,S.endEulerAngles.pitch,S.endEulerAngles.bearing),y=new Float64Array(4);a.bb(y,s,c,S.k);const b=a.bc(y);S.tr.setRoll(b.roll),S.tr.setPitch(b.pitch),S.tr.setBearing(b.bearing)}else S.tr.setRoll(S.endEulerAngles.roll),S.tr.setPitch(S.endEulerAngles.pitch),S.tr.setBearing(S.endEulerAngles.bearing);else S.tr.setRoll(a.C.number(S.startEulerAngles.roll,S.endEulerAngles.roll,S.k)),S.tr.setPitch(a.C.number(S.startEulerAngles.pitch,S.endEulerAngles.pitch,S.k)),S.tr.setBearing(a.C.number(S.startEulerAngles.bearing,S.endEulerAngles.bearing,S.k))}function gi(S,s,c,y,b){const E=b.padding,M=bt(b.worldSize,c.getNorthWest()),j=bt(b.worldSize,c.getNorthEast()),V=bt(b.worldSize,c.getSouthEast()),Y=bt(b.worldSize,c.getSouthWest()),re=a.ad(-y),ce=M.rotate(re),oe=j.rotate(re),ge=V.rotate(re),Me=Y.rotate(re),Ze=new a.P(Math.max(ce.x,oe.x,Me.x,ge.x),Math.max(ce.y,oe.y,Me.y,ge.y)),We=new a.P(Math.min(ce.x,oe.x,Me.x,ge.x),Math.min(ce.y,oe.y,Me.y,ge.y)),Xe=Ze.sub(We),at=(b.width-(E.left+E.right+s.left+s.right))/Xe.x,wt=(b.height-(E.top+E.bottom+s.top+s.bottom))/Xe.y;if(wt<0||at<0)return void li();const dt=Math.min(a.aj(b.scale*Math.min(at,wt)),S.maxZoom),Et=a.P.convert(S.offset),Tt=new a.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(a.ad(y)),ft=Et.add(Tt).mult(b.scale/a.ae(dt));return{center:ve(b.worldSize,M.add(V).div(2).sub(ft)),zoom:dt,bearing:y}}class Bu{get useGlobeControls(){return!1}handlePanInertia(s,c){return{easingOffset:s,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(s,c){s.bearingDelta&&c.setBearing(c.bearing+s.bearingDelta),s.pitchDelta&&c.setPitch(c.pitch+s.pitchDelta),s.rollDelta&&c.setRoll(c.roll+s.rollDelta),s.zoomDelta&&c.setZoom(c.zoom+s.zoomDelta)}handleMapControlsPan(s,c,y){s.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(y,s.around)}cameraForBoxAndBearing(s,c,y,b,E){return gi(s,c,y,b,E)}handleJumpToCenterZoom(s,c){s.zoom!==(c.zoom!==void 0?+c.zoom:s.zoom)&&s.setZoom(+c.zoom),c.center!==void 0&&s.setCenter(a.S.convert(c.center))}handleEaseTo(s,c){const y=s.zoom,b=s.padding,E={roll:s.roll,pitch:s.pitch,bearing:s.bearing},M={roll:c.roll===void 0?s.roll:c.roll,pitch:c.pitch===void 0?s.pitch:c.pitch,bearing:c.bearing===void 0?s.bearing:c.bearing},j=c.zoom!==void 0,V=!s.isPaddingEqual(c.padding);let Y=!1;const re=j?+c.zoom:s.zoom;let ce=s.centerPoint.add(c.offsetAsPoint);const oe=s.screenPointToLocation(ce),{center:ge,zoom:Me}=s.getConstrained(a.S.convert(c.center||oe),re??y);wn(s,ge);const Ze=bt(s.worldSize,oe),We=bt(s.worldSize,ge).sub(Ze),Xe=a.ae(Me-y);return Y=Me!==y,{easeFunc:at=>{if(Y&&s.setZoom(a.C.number(y,Me,at)),a.bd(E,M)||jn({startEulerAngles:E,endEulerAngles:M,tr:s,k:at,useSlerp:E.roll!=M.roll}),V&&(s.interpolatePadding(b,c.padding,at),ce=s.centerPoint.add(c.offsetAsPoint)),c.around)s.setLocationAtPoint(c.around,c.aroundPoint);else{const wt=a.ae(s.zoom-y),dt=Me>y?Math.min(2,Xe):Math.max(.5,Xe),Et=Math.pow(dt,1-at),Tt=ve(s.worldSize,Ze.add(We.mult(at*Et)).mult(wt));s.setLocationAtPoint(s.renderWorldCopies?Tt.wrap():Tt,ce)}},isZooming:Y,elevationCenter:ge}}handleFlyTo(s,c){const y=c.zoom!==void 0,b=s.zoom,E=s.getConstrained(a.S.convert(c.center||c.locationAtOffset),y?+c.zoom:b),M=E.center,j=E.zoom;wn(s,M);const V=bt(s.worldSize,c.locationAtOffset),Y=bt(s.worldSize,M).sub(V),re=Y.mag(),ce=a.ae(j-b);let oe;if(c.minZoom!==void 0){const ge=Math.min(+c.minZoom,b,j),Me=s.getConstrained(M,ge).zoom;oe=a.ae(Me-b)}return{easeFunc:(ge,Me,Ze,We)=>{s.setZoom(ge===1?j:b+a.aj(Me));const Xe=ge===1?M:ve(s.worldSize,V.add(Y.mult(Ze)).mult(Me));s.setLocationAtPoint(s.renderWorldCopies?Xe.wrap():Xe,We)},scaleOfZoom:ce,targetCenter:M,scaleOfMinZoom:oe,pixelPathLength:re}}}class dn{constructor(s,c,y){this.blendFunction=s,this.blendColor=c,this.mask=y}}dn.Replace=[1,0],dn.disabled=new dn(dn.Replace,a.be.transparent,[!1,!1,!1,!1]),dn.unblended=new dn(dn.Replace,a.be.transparent,[!0,!0,!0,!0]),dn.alphaBlended=new dn([1,771],a.be.transparent,[!0,!0,!0,!0]);const Ta=2305;class On{constructor(s,c,y){this.enable=s,this.mode=c,this.frontFace=y}}On.disabled=new On(!1,1029,Ta),On.backCCW=new On(!0,1029,Ta),On.frontCCW=new On(!0,1028,Ta);class Sn{constructor(s,c,y){this.func=s,this.mask=c,this.range=y}}Sn.ReadOnly=!1,Sn.ReadWrite=!0,Sn.disabled=new Sn(519,Sn.ReadOnly,[0,1]);const ns=7680;class bn{constructor(s,c,y,b,E,M){this.test=s,this.ref=c,this.mask=y,this.fail=b,this.depthFail=E,this.pass=M}}bn.disabled=new bn({func:519,mask:0},0,0,ns,ns,ns);const Ws=new WeakMap;function Sa(S){var s;if(Ws.has(S))return Ws.get(S);{const c=(s=S.getParameter(S.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Ws.set(S,c),c}}class Ms{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;const c=s.context,y=c.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const b=new a.aK;b.emplaceBack(-1,-1),b.emplaceBack(2,-1),b.emplaceBack(-1,2);const E=new a.aM;E.emplaceBack(0,1,2),this._fullscreenTriangle=new $t(c.createVertexBuffer(b,Ir.members),c.createIndexBuffer(E),a.aL.simpleSegment(0,0,b.length,E.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(y.TEXTURE1);const M=y.createTexture();y.bindTexture(y.TEXTURE_2D,M),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),Sa(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,c){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const s=this._cachedRenderContext.context,c=s.gl;s.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,c){const y=this._cachedRenderContext.context,b=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:a.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,b.TRIANGLES,Sn.disabled,bn.disabled,dn.unblended,On.disabled,((E,M)=>({u_input:E,u_output_expected:M}))(s,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Sa(b)){b.bindBuffer(b.PIXEL_PACK_BUFFER,this._pbo),b.readBuffer(b.COLOR_ATTACHMENT0),b.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),b.bindBuffer(b.PIXEL_PACK_BUFFER,null);const E=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);b.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:E}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Sa(s)){const c=s.clientWaitSync(this._readbackQueue.sync,0,0);if(c===s.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ms._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let c=0;return c+=s[0]/256,c+=s[1]/65536,c+=s[2]/16777216,s[3]<127&&(c=-c),c/128}}const Na=a.$/128;function vl(S,s){const c=S.granularity!==void 0?Math.max(S.granularity,1):1,y=c+(S.generateBorders?2:0),b=c+(S.extendToNorthPole||S.generateBorders?1:0)+(S.extendToSouthPole||S.generateBorders?1:0),E=y+1,M=b+1,j=S.generateBorders?-1:0,V=S.generateBorders||S.extendToNorthPole?-1:0,Y=c+(S.generateBorders?1:0),re=c+(S.generateBorders||S.extendToSouthPole?1:0),ce=E*M,oe=y*b*6,ge=E*M>65536;if(ge&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Me=ge||s==="32bit",Ze=new Int16Array(2*ce);let We=0;for(let wt=V;wt<=re;wt++)for(let dt=j;dt<=Y;dt++){let Et=dt/c*a.$;dt===-1&&(Et=-64),dt===c+1&&(Et=a.$+Na);let Tt=wt/c*a.$;wt===-1&&(Tt=S.extendToNorthPole?a.bg:-64),wt===c+1&&(Tt=S.extendToSouthPole?a.bh:a.$+Na),Ze[We++]=Et,Ze[We++]=Tt}const Xe=Me?new Uint32Array(oe):new Uint16Array(oe);let at=0;for(let wt=0;wt<b;wt++)for(let dt=0;dt<y;dt++){const Et=dt+1+wt*E,Tt=dt+(wt+1)*E,ft=dt+1+(wt+1)*E;Xe[at++]=dt+wt*E,Xe[at++]=Tt,Xe[at++]=Et,Xe[at++]=Et,Xe[at++]=Tt,Xe[at++]=ft}return{vertices:Ze.buffer.slice(0),indices:Xe.buffer.slice(0),uses32bitIndices:Me}}const zo=new a.aJ({fill:new a.bi(128,2),line:new a.bi(512,0),tile:new a.bi(128,32),stencil:new a.bi(128,1),circle:3});class lu{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return At.projectionGlobe}get vertexShaderPreludeCode(){return At.projectionMercator.vertexSource}get subdivisionGranularity(){return zo}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new Ms(s));const c=a.U(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,b=this._errorMeasurement.updateErrorLoop(c,y),E=w.now();b!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=b,this._errorMeasurementLastChangeTime=E);const M=Math.min(Math.max((E-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bk(M))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,c,y,b,E){const M=(E==="stencil"?zo.stencil:zo.tile).getGranularityForZoomLevel(c.z);return this._getMesh(s,{granularity:M,generateBorders:y,extendToNorthPole:c.y===0&&b,extendToSouthPole:c.y===(1<<c.z)-1&&b})}_getMesh(s,c){const y=this._getMeshKey(c);if(y in this._tileMeshCache)return this._tileMeshCache[y];const b=(function(E,M){const j=vl(M,"16bit"),V=a.aK.deserialize({arrayBuffer:j.vertices,length:j.vertices.byteLength/2/2}),Y=a.aM.deserialize({arrayBuffer:j.indices,length:j.indices.byteLength/2/3});return new $t(E.createVertexBuffer(V,Ir.members),E.createIndexBuffer(Y),a.aL.simpleSegment(0,0,V.length,Y.length))})(s,c);return this._tileMeshCache[y]=b,b}recalculate(s){}hasTransition(){const s=w.now();let c=!1;return c=c||(s-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}const uu=new a.r({type:new a.D(a.v.projection.type)});class ys extends a.E{constructor(s){super(),this._transitionable=new a.t(uu),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new Zr,this._verticalPerspectiveProjection=new lu}get transitionState(){const s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof a.bl){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,c,y,b,E){return this.currentProjection.getMeshFromTileID(s,c,y,b,E)}setProjection(s){this._transitionable.setValue("type",s?.type||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function Zs(S){const s=Wa(S.worldSize,S.center.lat);return 2*Math.PI*s}function Ao(S,s,c,y,b){const E=1/(1<<b),M=s/a.$*E+y*E,j=a.bn((S/a.$*E+c*E)*Math.PI*2+Math.PI,2*Math.PI),V=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,Y=Math.cos(V),re=new Float64Array(3);return re[0]=Math.sin(j)*Y,re[1]=Math.sin(V),re[2]=Math.cos(j)*Y,re}function Oi(S){return(function(s,c){const y=Math.cos(c),b=new Float64Array(3);return b[0]=Math.sin(s)*y,b[1]=Math.sin(c),b[2]=Math.cos(s)*y,b})(S.lng*Math.PI/180,S.lat*Math.PI/180)}function Wa(S,s){return S/(2*Math.PI)/Math.cos(s*Math.PI/180)}function K(S){const s=Math.asin(S[1])/Math.PI*180,c=Math.sqrt(S[0]*S[0]+S[2]*S[2]);if(c>1e-6){const y=S[0]/c,b=Math.acos(S[2]/c),E=(y>0?b:-b)/Math.PI*180;return new a.S(a.aN(E,-180,180),s)}return new a.S(0,s)}function Te(S){return Math.cos(S*Math.PI/180)}function Qe(S,s){const c=Te(S),y=Te(s);return a.aj(y/c)}function Rt(S,s){const c=S.rotate(s.bearingInRadians),y=s.zoom+Qe(s.center.lat,0),b=a.bj(1/Te(s.center.lat),1/Te(Math.min(Math.abs(s.center.lat),60)),a.bm(y,7,3,0,1)),E=360/Zs({worldSize:s.worldSize,center:{lat:s.center.lat}});return new a.S(s.center.lng-c.x*E*b,a.ag(s.center.lat+c.y*E,-85.051129,a.ah))}function Ht(S){const s=.5*S,c=Math.sin(s),y=Math.cos(s);return Math.log(c+y)-Math.log(y-c)}function _r(S,s,c,y){const b=S.lat+c*y;if(Math.abs(c)>1){const E=(Math.sign(S.lat+c)!==Math.sign(S.lat)?-Math.abs(S.lat):Math.abs(S.lat))*Math.PI/180,M=Math.abs(S.lat+c)*Math.PI/180,j=Ht(E+y*(M-E)),V=Ht(E),Y=Ht(M);return new a.S(S.lng+s*((j-V)/(Y-V)),b)}return new a.S(S.lng+s*y,b)}class Dr{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;const s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,c,y,b){const E=`${s.z}_${s.x}_${s.y}_${b?.terrain?"t":""}`,M=this._cache.get(E);if(M)return M;const j=this._cachePrevious.get(E);if(j)return this._cache.set(E,j),j;const V=this._boundingVolumeFactory(s,c,y,b);return this._cache.set(E,V),this._hadAnyChanges=!0,V}}class rn{constructor(s,c,y,b){this.min=y,this.max=b,this.points=s,this.planes=c}static fromAabb(s,c){const y=[];for(let b=0;b<8;b++)y.push([1&~b?s[0]:c[0],(b>>1&1)==1?c[1]:s[1],(b>>2&1)==1?c[2]:s[2]]);return new rn(y,[[-1,0,0,c[0]],[1,0,0,-s[0]],[0,-1,0,c[1]],[0,1,0,-s[1]],[0,0,-1,c[2]],[0,0,1,-s[2]]],s,c)}static fromCenterSizeAngles(s,c,y){const b=a.bq([],y[0],y[1],y[2]),E=a.br([],[c[0],0,0],b),M=a.br([],[0,c[1],0],b),j=a.br([],[0,0,c[2]],b),V=[...s],Y=[...s];for(let ce=0;ce<8;ce++)for(let oe=0;oe<3;oe++){const ge=s[oe]+E[oe]*(1&~ce?-1:1)+M[oe]*((ce>>1&1)==1?1:-1)+j[oe]*((ce>>2&1)==1?1:-1);V[oe]=Math.min(V[oe],ge),Y[oe]=Math.max(Y[oe],ge)}const re=[];for(let ce=0;ce<8;ce++){const oe=[...s];a.aR(oe,oe,a.aQ([],E,1&~ce?-1:1)),a.aR(oe,oe,a.aQ([],M,(ce>>1&1)==1?1:-1)),a.aR(oe,oe,a.aQ([],j,(ce>>2&1)==1?1:-1)),re.push(oe)}return new rn(re,[[...E,-a.aW(E,re[0])],[...M,-a.aW(M,re[0])],[...j,-a.aW(j,re[0])],[-E[0],-E[1],-E[2],-a.aW(E,re[7])],[-M[0],-M[1],-M[2],-a.aW(M,re[7])],[-j[0],-j[1],-j[2],-a.aW(j,re[7])]],V,Y)}intersectsFrustum(s){let c=!0;const y=this.points.length,b=this.planes.length,E=s.planes.length,M=s.points.length;for(let j=0;j<E;j++){const V=s.planes[j];let Y=0;for(let re=0;re<y;re++){const ce=this.points[re];V[0]*ce[0]+V[1]*ce[1]+V[2]*ce[2]+V[3]>=0&&Y++}if(Y===0)return 0;Y<y&&(c=!1)}if(c)return 2;for(let j=0;j<b;j++){const V=this.planes[j];let Y=0;for(let re=0;re<M;re++){const ce=s.points[re];V[0]*ce[0]+V[1]*ce[1]+V[2]*ce[2]+V[3]>=0&&Y++}if(Y===0)return 0}return 1}intersectsPlane(s){const c=this.points.length;let y=0;for(let b=0;b<c;b++){const E=this.points[b];s[0]*E[0]+s[1]*E[1]+s[2]*E[2]+s[3]>=0&&y++}return y===c?2:y===0?0:1}}function pn(S,s,c){const y=S-s;return y<0?-y:Math.max(0,y-c)}function Nn(S,s,c,y,b){const E=S-c;let M;return M=E<0?Math.min(-E,1+E-b):E>1?Math.min(Math.max(E-b,0),1-E):0,Math.max(M,pn(s,y,b))}class Wn{constructor(){this._boundingVolumeCache=new Dr(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,c,y,b){const E=1<<y.z,M=1/E,j=y.x/E,V=y.y/E;let Y=2;return Y=Math.min(Y,Nn(s,c,j,V,M)),Y=Math.min(Y,Nn(s,c,j+.5,-V-M,M)),Y=Math.min(Y,Nn(s,c,j+.5,2-V-M,M)),Y}getWrap(s,c,y){const b=1<<c.z,E=1/b,M=c.x/b,j=pn(s.x,M,E),V=pn(s.x,M-1,E),Y=pn(s.x,M+1,E),re=Math.min(j,V,Y);return re===Y?1:re===V?-1:0}allowVariableZoom(s,c){return Kt(s,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,c,y,b){return this._boundingVolumeCache.getTileBoundingVolume(s,c,y,b)}_computeTileBoundingVolume(s,c,y,b){var E,M;let j=y,V=y;if(b?.terrain){const Y=new a.Z(s.z,c,s.z,s.x,s.y),re=b.terrain.getMinMaxElevation(Y);j=(E=re.minElevation)!==null&&E!==void 0?E:y,V=(M=re.maxElevation)!==null&&M!==void 0?M:y}if(j/=a.bt,V/=a.bt,j+=1,V+=1,s.z<=0)return rn.fromAabb([-V,-V,-V],[V,V,V]);if(s.z===1)return rn.fromAabb([s.x===0?-V:0,s.y===0?0:-V,-V],[s.x===0?0:V,s.y===0?V:0,V]);{const Y=[Ao(0,0,s.x,s.y,s.z),Ao(a.$,0,s.x,s.y,s.z),Ao(a.$,a.$,s.x,s.y,s.z),Ao(0,a.$,s.x,s.y,s.z)],re=[];for(const er of Y)re.push(a.aQ([],er,V));if(V!==j)for(const er of Y)re.push(a.aQ([],er,j));s.y===0&&re.push([0,1,0]),s.y===(1<<s.z)-1&&re.push([0,-1,0]);const ce=[1,1,1],oe=[-1,-1,-1];for(const er of re)for(let or=0;or<3;or++)ce[or]=Math.min(ce[or],er[or]),oe[or]=Math.max(oe[or],er[or]);const ge=Ao(a.$/2,a.$/2,s.x,s.y,s.z),Me=a.aV([],[0,1,0],ge);a.aU(Me,Me);const Ze=a.aV([],ge,Me);a.aU(Ze,Ze);const We=a.aV([],Y[2],Y[1]);a.aU(We,We);const Xe=a.aV([],Y[0],Y[3]);a.aU(Xe,Xe),re.push(a.aQ([],ge,V)),s.y>=(1<<s.z)/2&&re.push(a.aQ([],Ao(a.$/2,0,s.x,s.y,s.z),V)),s.y<(1<<s.z)/2&&re.push(a.aQ([],Ao(a.$/2,a.$,s.x,s.y,s.z),V));const at=kn(ge,re),wt=kn(Ze,re),dt=[-ge[0],-ge[1],-ge[2],at.max],Et=[ge[0],ge[1],ge[2],-at.min],Tt=[-Ze[0],-Ze[1],-Ze[2],wt.max],ft=[Ze[0],Ze[1],Ze[2],-wt.min],Bt=[...We,0],ir=[...Xe,0],Jt=[];return s.y===0?Jt.push(a.bs(ir,Bt,dt),a.bs(ir,Bt,Et)):Jt.push(a.bs(Tt,Bt,dt),a.bs(Tt,Bt,Et),a.bs(Tt,ir,dt),a.bs(Tt,ir,Et)),s.y===(1<<s.z)-1?Jt.push(a.bs(ir,Bt,dt),a.bs(ir,Bt,Et)):Jt.push(a.bs(ft,Bt,dt),a.bs(ft,Bt,Et),a.bs(ft,ir,dt),a.bs(ft,ir,Et)),new rn(Jt,[dt,Et,Tt,ft,Bt,ir],ce,oe)}}}function kn(S,s){let c=1/0,y=-1/0;for(const b of s){const E=a.aW(S,b);c=Math.min(c,E),y=Math.max(y,E)}return{min:c,max:y}}class Fi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,c,y){return this._helper.interpolatePadding(s,c,y)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,c){this._helper.resize(s,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,c){this._helper.overrideNearFarZ(s,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=a.bu(),this._projectionMatrix=a.b8(),this._globeViewProjMatrix32f=a.b7(),this._globeViewProjMatrixNoCorrection=a.b8(),this._globeViewProjMatrixNoCorrectionInverted=a.b8(),this._globeProjMatrixInverted=a.b8(),this._cameraPosition=a.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Rn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,c)=>this.getConstrained(s,c)}),this._coveringTilesDetailsProvider=new Wn}clone(){const s=new Fi;return s.apply(this),s}apply(s,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const s=a.bo();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){const{overscaledTileID:c,applyGlobeMatrix:y}=s,b=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:b,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){const c=this.pitchInRadians,y=this.cameraToCenterDistance/s,b=Math.sin(c)*y,E=Math.cos(c)*y+1,M=1/Math.sqrt(b*b+E*E)*1;let j=-b,V=E;const Y=Math.sqrt(j*j+V*V);j/=Y,V/=Y;const re=[0,j,V];a.bv(re,re,[0,0,0],-this.bearingInRadians),a.bw(re,re,[0,0,0],-1*this.center.lat*Math.PI/180),a.bx(re,re,[0,0,0],this.center.lng*Math.PI/180);const ce=1/a.aY(re);return a.aQ(re,re,ce),[...re,-M*ce]}isLocationOccluded(s){return!this.isSurfacePointVisible(Oi(s))}transformLightDirection(s){const c=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,b=Math.cos(y),E=[Math.sin(c)*b,Math.sin(y),Math.cos(c)*b],M=[E[2],0,-E[0]],j=[0,0,0];a.aV(j,M,E),a.aU(M,M),a.aU(j,j);const V=[0,0,0];return a.aU(V,[M[0]*s[0]+j[0]*s[1]+E[0]*s[2],M[1]*s[0]+j[1]*s[1]+E[1]*s[2],M[2]*s[0]+j[2]*s[1]+E[2]*s[2]]),V}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,c,y){const b=(function(j,V,Y){const re=1/(1<<Y.z);return new a.a0(j/a.$*re+Y.x*re,V/a.$*re+Y.y*re)})(s,c,y.canonical),E=(M=b.y,[a.bn(b.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(E[1])}projectTileCoordinates(s,c,y,b){const E=y.canonical,M=Ao(s,c,E.x,E.y,E.z),j=1+(b?b(s,c):0)/a.bt,V=[M[0]*j,M[1]*j,M[2]*j,1];a.av(V,V,this._globeViewProjMatrixNoCorrection);const Y=this._cachedClippingPlane,re=Y[0]*M[0]+Y[1]*M[1]+Y[2]*M[2]+Y[3]<0;return{point:new a.P(V[0]/V[3],V[1]/V[3]),signedDistanceFromCamera:V[3],isOccluded:re}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const s=Wa(this.worldSize,this.center.lat),c=a.b9(),y=a.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),a.b3(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const b=this.centerOffset;c[8]=2*-b.x/this._helper._width,c[9]=2*b.y/this._helper._height,this._projectionMatrix=a.b4(c),this._globeProjMatrixInverted=a.b9(),a.ap(this._globeProjMatrixInverted,c),a.M(c,c,[0,0,-this.cameraToCenterDistance]),a.b5(c,c,this.rollInRadians),a.b6(c,c,-this.pitchInRadians),a.b5(c,c,this.bearingInRadians),a.M(c,c,[0,0,-s]);const E=a.bo();E[0]=s,E[1]=s,E[2]=s,a.b6(y,c,this.center.lat*Math.PI/180),a.by(y,y,-this.center.lng*Math.PI/180),a.N(y,y,E),this._globeViewProjMatrixNoCorrection=y,a.b6(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.by(c,c,-this.center.lng*Math.PI/180),a.N(c,c,E),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),a.ap(this._globeViewProjMatrixNoCorrectionInverted,y);const M=a.bo();this._cameraPosition=a.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/s,a.bv(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),a.bw(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),a.bv(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),a.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bw(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),a.bx(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);const j=a.b4(this._globeViewProjMatrixNoCorrectionInverted);a.N(j,j,[1,1,-1]),this._cachedFrustum=Jr.fromInvProjectionMatrix(j,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){a.w("calculateFogMatrix is not supported on globe projection.");const c=a.b9();return a.af(c),c}getVisibleUnwrappedCoordinates(s){return[new a.b1(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=Oi(s);a.aQ(y,y,1+c/a.bt);const b=a.bu();return a.av(b,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),b[2]/b[3]}populateCache(s){}getBounds(){const s=.5*this.width,c=.5*this.height,y=[new a.P(0,0),new a.P(s,0),new a.P(this.width,0),new a.P(this.width,c),new a.P(this.width,this.height),new a.P(s,this.height),new a.P(0,this.height),new a.P(0,c)],b=[];for(const ce of y)b.push(this.unprojectScreenPoint(ce));let E=0,M=0,j=0,V=0;const Y=this.center;for(const ce of b){const oe=a.bz(Y.lng,ce.lng),ge=a.bz(Y.lat,ce.lat);oe<M&&(M=oe),oe>E&&(E=oe),ge<V&&(V=ge),ge>j&&(j=ge)}const re=[Y.lng+M,Y.lat+V,Y.lng+E,Y.lat+j];return this.isSurfacePointOnScreen([0,1,0])&&(re[3]=90,re[0]=-180,re[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(re[1]=-90,re[0]=-180,re[2]=180),new It(re)}getConstrained(s,c){const y=a.ag(s.lat,-85.051129,a.ah),b=a.ag(+c,this.minZoom+Qe(0,y),this.maxZoom);return{center:new a.S(s.lng,y),zoom:b}}calculateCenterFromCameraLngLatAlt(s,c,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(s,c,y,b)}setLocationAtPoint(s,c){const y=Oi(this.unprojectScreenPoint(c)),b=Oi(s),E=a.bo();a.bA(E);const M=a.bo();a.bx(M,y,E,-this.center.lng*Math.PI/180),a.bw(M,M,E,this.center.lat*Math.PI/180);const j=b[0]*b[0]+b[2]*b[2],V=M[0]*M[0];if(j<V)return;const Y=Math.sqrt(j-V),re=-Y,ce=a.bB(b[0],b[2],M[0],Y),oe=a.bB(b[0],b[2],M[0],re),ge=a.bo();a.bx(ge,b,E,-ce);const Me=a.bB(ge[1],ge[2],M[1],M[2]),Ze=a.bo();a.bx(Ze,b,E,-oe);const We=a.bB(Ze[1],Ze[2],M[1],M[2]),Xe=.5*Math.PI,at=Me>=-Xe&&Me<=Xe,wt=We>=-Xe&&We<=Xe;let dt,Et;if(at&&wt){const ir=this.center.lng*Math.PI/180,Jt=this.center.lat*Math.PI/180;a.bC(ce,ir)+a.bC(Me,Jt)<a.bC(oe,ir)+a.bC(We,Jt)?(dt=ce,Et=Me):(dt=oe,Et=We)}else if(at)dt=ce,Et=Me;else{if(!wt)return;dt=oe,Et=We}const Tt=dt/Math.PI*180,ft=Et/Math.PI*180,Bt=this.center.lat;this.setCenter(new a.S(Tt,a.ag(ft,-90,90))),this.setZoom(this.zoom+Qe(Bt,this.center.lat))}locationToScreenPoint(s,c){const y=Oi(s);if(c){const b=c.getElevationForLngLatZoom(s,this._helper._tileZoom);a.aQ(y,y,1+b/a.bt)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(s){const c=a.bu();return a.av(c,[...s,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new a.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,c){if(c){const y=c.pointCoordinate(s);if(y)return y}return a.a0.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,c){var y;return(y=this.screenPointToMercatorCoordinate(s,c))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(s,c){const y=this._cameraPosition,b=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(y,b)}getRayDirectionFromPixel(s){const c=a.bu();c[0]=s.x/this.width*2-1,c[1]=-1*(s.y/this.height*2-1),c[2]=1,c[3]=1,a.av(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const y=a.bo();y[0]=c[0]-this._cameraPosition[0],y[1]=c[1]-this._cameraPosition[1],y[2]=c[2]-this._cameraPosition[2];const b=a.bo();return a.aU(b,y),b}isSurfacePointVisible(s){const c=this._cachedClippingPlane;return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;const c=a.bu();return a.av(c,[...s,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(s,c){const y=a.aW(s,c),b=a.bo(),E=a.bo();a.aQ(E,c,y),a.aT(b,s,E);const M=1-a.aW(b,b);if(M<0)return null;const j=a.aW(s,s)-1,V=-y+(y<0?1:-1)*Math.sqrt(M),Y=j/V,re=V;return{tMin:Math.min(Y,re),tMax:Math.max(Y,re)}}unprojectScreenPoint(s){const c=this._cameraPosition,y=this.getRayDirectionFromPixel(s),b=this.rayPlanetIntersection(c,y);if(b){const re=a.bo();a.aR(re,c,[y[0]*b.tMin,y[1]*b.tMin,y[2]*b.tMin]);const ce=a.bo();return a.aU(ce,re),K(ce)}const E=this._cachedClippingPlane,M=E[0]*y[0]+E[1]*y[1]+E[2]*y[2],j=-a.b0(E,c)/M,V=a.bo();if(j>0)a.aR(V,c,[y[0]*j,y[1]*j,y[2]*j]);else{const re=a.bo();a.aR(re,c,[2*y[0],2*y[1],2*y[2]]);const ce=a.b0(this._cachedClippingPlane,re);a.aT(V,re,[this._cachedClippingPlane[0]*ce,this._cachedClippingPlane[1]*ce,this._cachedClippingPlane[2]*ce])}const Y=(function(re){const ce=a.bo();return ce[0]=re[0]*-re[3],ce[1]=re[1]*-re[3],ce[2]=re[2]*-re[3],{center:ce,radius:Math.sqrt(1-re[3]*re[3])}})(E);return K((function(re,ce,oe){const ge=a.bo();a.aT(ge,oe,re);const Me=a.bo();return a.bp(Me,re,ge,ce/a.a_(ge)),Me})(Y.center,Y.radius,V))}getMatrixForModel(s,c){const y=a.S.convert(s),b=1/a.bt,E=a.b8();return a.by(E,E,y.lng/180*Math.PI),a.b6(E,E,-y.lat/180*Math.PI),a.M(E,E,[0,0,1+c/a.bt]),a.b6(E,E,.5*Math.PI),a.N(E,E,[b,b,b]),E}getProjectionDataForCustomLayer(s=!0){const c=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:s});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(s){}}class Ai{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,c,y){return this._helper.interpolatePadding(s,c,y)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,c,y=!0){this._helper.resize(s,c,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,c){this._helper.overrideNearFarZ(s,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,c){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Rn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,c)=>this.getConstrained(s,c)}),this._globeness=1,this._mercatorTransform=new Dn,this._verticalPerspectiveTransform=new Fi}clone(){const s=new Ai;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){const c=this._mercatorTransform.getProjectionData(s),y=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:c.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return a.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,c,y){const b=this._mercatorTransform.getPitchedTextCorrection(s,c,y),E=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,c,y);return a.bj(b,E,this._globeness)}projectTileCoordinates(s,c,y,b){return this.currentTransform.projectTileCoordinates(s,c,y,b)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,c){return this.currentTransform.lngLatToCameraDepth(s,c)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,c){return this.currentTransform.getConstrained(s,c)}calculateCenterFromCameraLngLatAlt(s,c,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(s,c,y,b)}setLocationAtPoint(s,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,c){return this.currentTransform.locationToScreenPoint(s,c)}screenPointToMercatorCoordinate(s,c){return this.currentTransform.screenPointToMercatorCoordinate(s,c)}screenPointToLocation(s,c){return this.currentTransform.screenPointToLocation(s,c)}isPointOnMapSurface(s,c){return this.currentTransform.isPointOnMapSurface(s,c)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,c){return this.currentTransform.getMatrixForModel(s,c)}getProjectionDataForCustomLayer(s=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return c;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return y.fallbackMatrix=c.mainMatrix,y}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class Yn{get useGlobeControls(){return!0}handlePanInertia(s,c){const y=Rt(s,c);return Math.abs(y.lng-c.center.lng)>180&&(y.lng=c.center.lng+179.5*Math.sign(y.lng-c.center.lng)),{easingCenter:y,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,c){const y=s.around,b=c.screenPointToLocation(y);s.bearingDelta&&c.setBearing(c.bearing+s.bearingDelta),s.pitchDelta&&c.setPitch(c.pitch+s.pitchDelta),s.rollDelta&&c.setRoll(c.roll+s.rollDelta);const E=c.zoom;s.zoomDelta&&c.setZoom(c.zoom+s.zoomDelta);const M=c.zoom-E;if(M===0)return;const j=a.bz(c.center.lng,b.lng),V=j/(Math.abs(j/180)+1),Y=a.bz(c.center.lat,b.lat),re=c.getRayDirectionFromPixel(y),ce=c.cameraPosition,oe=-1*a.aW(ce,re),ge=a.bo();a.aR(ge,ce,[re[0]*oe,re[1]*oe,re[2]*oe]);const Me=a.aY(ge)-1,Ze=Math.exp(.5*-Math.max(Me-.3,0)),We=Wa(c.worldSize,c.center.lat)/Math.min(c.width,c.height),Xe=a.bm(We,.9,.5,1,.25),at=(1-a.ae(-M))*Math.min(Ze,Xe),wt=c.center.lat,dt=c.zoom,Et=new a.S(c.center.lng+V*at,a.ag(c.center.lat+Y*at,-85.051129,a.ah));c.setLocationAtPoint(b,y);const Tt=c.center,ft=a.bm(Math.abs(j),45,85,0,1),Bt=a.bm(We,.75,.35,0,1),ir=Math.pow(Math.max(ft,Bt),.25),Jt=a.bz(Tt.lng,Et.lng),er=a.bz(Tt.lat,Et.lat);c.setCenter(new a.S(Tt.lng+Jt*ir,Tt.lat+er*ir).wrap()),c.setZoom(dt+Qe(wt,c.center.lat))}handleMapControlsPan(s,c,y){if(!s.panDelta)return;const b=c.center.lat,E=c.zoom;c.setCenter(Rt(s.panDelta,c).wrap()),c.setZoom(E+Qe(b,c.center.lat))}cameraForBoxAndBearing(s,c,y,b,E){const M=gi(s,c,y,b,E),j=c.left/E.width*2-1,V=(E.width-c.right)/E.width*2-1,Y=c.top/E.height*-2+1,re=(E.height-c.bottom)/E.height*-2+1,ce=a.bz(y.getWest(),y.getEast())<0,oe=ce?y.getEast():y.getWest(),ge=ce?y.getWest():y.getEast(),Me=Math.max(y.getNorth(),y.getSouth()),Ze=Math.min(y.getNorth(),y.getSouth()),We=oe+.5*a.bz(oe,ge),Xe=Me+.5*a.bz(Me,Ze),at=E.clone();at.setCenter(M.center),at.setBearing(M.bearing),at.setPitch(0),at.setRoll(0),at.setZoom(M.zoom);const wt=at.modelViewProjectionMatrix,dt=[Oi(y.getNorthWest()),Oi(y.getNorthEast()),Oi(y.getSouthWest()),Oi(y.getSouthEast()),Oi(new a.S(ge,Xe)),Oi(new a.S(oe,Xe)),Oi(new a.S(We,Me)),Oi(new a.S(We,Ze))],Et=Oi(M.center);let Tt=Number.POSITIVE_INFINITY;for(const ft of dt)j<0&&(Tt=Yn.getLesserNonNegativeNonNull(Tt,Yn.solveVectorScale(ft,Et,wt,"x",j))),V>0&&(Tt=Yn.getLesserNonNegativeNonNull(Tt,Yn.solveVectorScale(ft,Et,wt,"x",V))),Y>0&&(Tt=Yn.getLesserNonNegativeNonNull(Tt,Yn.solveVectorScale(ft,Et,wt,"y",Y))),re<0&&(Tt=Yn.getLesserNonNegativeNonNull(Tt,Yn.solveVectorScale(ft,Et,wt,"y",re)));if(Number.isFinite(Tt)&&Tt!==0)return M.zoom=at.zoom+a.aj(Tt),M;li()}handleJumpToCenterZoom(s,c){const y=s.center.lat,b=s.getConstrained(c.center?a.S.convert(c.center):s.center,s.zoom).center;s.setCenter(b.wrap());const E=c.zoom!==void 0?+c.zoom:s.zoom+Qe(y,b.lat);s.zoom!==E&&s.setZoom(E)}handleEaseTo(s,c){const y=s.zoom,b=s.center,E=s.padding,M={roll:s.roll,pitch:s.pitch,bearing:s.bearing},j={roll:c.roll===void 0?s.roll:c.roll,pitch:c.pitch===void 0?s.pitch:c.pitch,bearing:c.bearing===void 0?s.bearing:c.bearing},V=c.zoom!==void 0,Y=!s.isPaddingEqual(c.padding);let re=!1;const ce=c.center?a.S.convert(c.center):b,oe=s.getConstrained(ce,y).center;wn(s,oe);const ge=s.clone();ge.setCenter(oe),ge.setZoom(V?+c.zoom:y+Qe(b.lat,ce.lat)),ge.setBearing(c.bearing);const Me=new a.P(a.ag(s.centerPoint.x+c.offsetAsPoint.x,0,s.width),a.ag(s.centerPoint.y+c.offsetAsPoint.y,0,s.height));ge.setLocationAtPoint(oe,Me);const Ze=(c.offset&&c.offsetAsPoint.mag())>0?ge.center:oe,We=V?+c.zoom:y+Qe(b.lat,Ze.lat),Xe=y+Qe(b.lat,0),at=We+Qe(Ze.lat,0),wt=a.bz(b.lng,Ze.lng),dt=a.bz(b.lat,Ze.lat),Et=a.ae(at-Xe);return re=We!==y,{easeFunc:Tt=>{if(a.bd(M,j)||jn({startEulerAngles:M,endEulerAngles:j,tr:s,k:Tt,useSlerp:M.roll!=j.roll}),Y&&s.interpolatePadding(E,c.padding,Tt),c.around)a.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(c.around,c.aroundPoint);else{const ft=at>Xe?Math.min(2,Et):Math.max(.5,Et),Bt=Math.pow(ft,1-Tt),ir=_r(b,wt,dt,Tt*Bt);s.setCenter(ir.wrap())}if(re){const ft=a.C.number(Xe,at,Tt)+Qe(0,s.center.lat);s.setZoom(ft)}},isZooming:re,elevationCenter:Ze}}handleFlyTo(s,c){const y=c.zoom!==void 0,b=s.center,E=s.zoom,M=s.padding,j=!s.isPaddingEqual(c.padding),V=s.getConstrained(a.S.convert(c.center||c.locationAtOffset),E).center,Y=y?+c.zoom:s.zoom+Qe(s.center.lat,V.lat),re=s.clone();re.setCenter(V),re.setZoom(Y),re.setBearing(c.bearing);const ce=new a.P(a.ag(s.centerPoint.x+c.offsetAsPoint.x,0,s.width),a.ag(s.centerPoint.y+c.offsetAsPoint.y,0,s.height));re.setLocationAtPoint(V,ce);const oe=re.center;wn(s,oe);const ge=(function(dt,Et,Tt){const ft=Oi(Et),Bt=Oi(Tt),ir=a.aW(ft,Bt),Jt=Math.acos(ir),er=Zs(dt);return Jt/(2*Math.PI)*er})(s,b,oe),Me=E+Qe(b.lat,0),Ze=Y+Qe(oe.lat,0),We=a.ae(Ze-Me);let Xe;if(typeof c.minZoom=="number"){const dt=+c.minZoom+Qe(oe.lat,0),Et=Math.min(dt,Me,Ze)+Qe(0,oe.lat),Tt=s.getConstrained(oe,Et).zoom+Qe(oe.lat,0);Xe=a.ae(Tt-Me)}const at=a.bz(b.lng,oe.lng),wt=a.bz(b.lat,oe.lat);return{easeFunc:(dt,Et,Tt,ft)=>{const Bt=_r(b,at,wt,Tt);j&&s.interpolatePadding(M,c.padding,dt);const ir=dt===1?oe:Bt;s.setCenter(ir.wrap());const Jt=Me+a.aj(Et);s.setZoom(dt===1?Y:Jt+Qe(0,ir.lat))},scaleOfZoom:We,targetCenter:oe,scaleOfMinZoom:Xe,pixelPathLength:ge}}static solveVectorScale(s,c,y,b,E){const M=b==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],j=[y[3],y[7],y[11],y[15]],V=s[0]*M[0]+s[1]*M[1]+s[2]*M[2],Y=s[0]*j[0]+s[1]*j[1]+s[2]*j[2],re=c[0]*M[0]+c[1]*M[1]+c[2]*M[2],ce=c[0]*j[0]+c[1]*j[1]+c[2]*j[2];return re+E*Y===V+E*ce||j[3]*(V-re)+M[3]*(ce-Y)+V*ce==re*Y?null:(re+M[3]-E*ce-E*j[3])/(re-V-E*ce+E*Y)}static getLesserNonNegativeNonNull(s,c){return c!==null&&c>=0&&c<s?c:s}}class ia{constructor(s){this._globe=s,this._mercatorCameraHelper=new Bu,this._verticalPerspectiveCameraHelper=new Yn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,c){return this.currentHelper.handlePanInertia(s,c)}handleMapControlsRollPitchBearingZoom(s,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,c)}handleMapControlsPan(s,c,y){this.currentHelper.handleMapControlsPan(s,c,y)}cameraForBoxAndBearing(s,c,y,b,E){return this.currentHelper.cameraForBoxAndBearing(s,c,y,b,E)}handleJumpToCenterZoom(s,c){this.currentHelper.handleJumpToCenterZoom(s,c)}handleEaseTo(s,c){return this.currentHelper.handleEaseTo(s,c)}handleFlyTo(s,c){return this.currentHelper.handleFlyTo(s,c)}}const qi=(S,s)=>a.y(S,s&&s.filter((c=>c.identifier!=="source.canvas"))),ta=a.bD();class is extends a.E{constructor(s,c={}){super(),this._rtlPluginLoaded=()=>{for(const y in this.sourceCaches){const b=this.sourceCaches[y].getSource().type;b!=="vector"&&b!=="geojson"||this.sourceCaches[y].reload()}},this.map=s,this.dispatcher=new $e(ke(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",((y,b)=>this.getGlyphs(y,b))),this.dispatcher.registerMessageHandler("GI",((y,b)=>this.getImages(y,b))),this.imageManager=new X,this.imageManager.setEventedParent(this),this.glyphManager=new ae(s._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new Oe,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bF()),br().on(Yt,this._rtlPluginLoaded),this.on("data",(y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const b=this.sourceCaches[y.sourceId];if(!b)return;const E=b.getSource();if(E&&E.vectorLayerIds)for(const M in this._layers){const j=this._layers[M];j.source===E.id&&this._validateLayer(j)}}))}setGlobalStateProperty(s,c){var y,b,E;this._checkLoaded();const M=c===null?(E=(b=(y=this.stylesheet.state)===null||y===void 0?void 0:y[s])===null||b===void 0?void 0:b.default)!==null&&E!==void 0?E:null:c;if(a.bG(M,this._globalState[s]))return this;this._globalState[s]=M;const j=this._findGlobalStateAffectedSources([s]);for(const V in this.sourceCaches)j.has(V)&&(this._reloadSource(V),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();const c=[];for(const b in s)!a.bG(this._globalState[b],s[b].default)&&(c.push(b),this._globalState[b]=s[b].default);const y=this._findGlobalStateAffectedSources(c);for(const b in this.sourceCaches)y.has(b)&&(this._reloadSource(b),this._changed=!0)}_findGlobalStateAffectedSources(s){if(s.length===0)return new Set;const c=new Set;for(const y in this._layers){const b=this._layers[y],E=b.getLayoutAffectingGlobalStateRefs();for(const M of s)E.has(M)&&c.add(b.source)}return c}loadURL(s,c={},y){this.fire(new a.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const b=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const E=this._loadStyleRequest;a.j(b,this._loadStyleRequest).then((M=>{this._loadStyleRequest=null,this._load(M.data,c,y)})).catch((M=>{this._loadStyleRequest=null,M&&!E.signal.aborted&&this.fire(new a.k(M))}))}loadJSON(s,c={},y){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(s,c,y)})).catch((()=>{}))}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(ta,{validate:!1})}_load(s,c,y){var b,E,M;const j=c.transformStyle?c.transformStyle(y,s):s;if(!c.validate||!qi(this,a.z(j))){this._loaded=!0,this.stylesheet=j;for(const V in j.sources)this.addSource(V,j.sources[V],{validate:!1});j.sprite?this._loadSprite(j.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(j.glyphs),this._createLayers(),this.light=new me(this.stylesheet.light),this._setProjectionInternal(((b=this.stylesheet.projection)===null||b===void 0?void 0:b.type)||"mercator"),this.sky=new pe(this.stylesheet.sky),this.map.setTerrain((E=this.stylesheet.terrain)!==null&&E!==void 0?E:null),this.setGlobalState((M=this.stylesheet.state)!==null&&M!==void 0?M:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){const s=a.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map((c=>c.id)),this._layers={},this._serializedLayers=null;for(const c of s){const y=a.bI(c);y.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=y}}_loadSprite(s,c=!1,y=void 0){let b;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(E,M,j,V){return a._(this,void 0,void 0,(function*(){const Y=B(E),re=j>1?"@2x":"",ce={},oe={};for(const{id:ge,url:Me}of Y){const Ze=M.transformRequest(Z(Me,re,".json"),"SpriteJSON");ce[ge]=a.j(Ze,V);const We=M.transformRequest(Z(Me,re,".png"),"SpriteImage");oe[ge]=D.getImage(We,V)}return yield Promise.all([...Object.values(ce),...Object.values(oe)]),(function(ge,Me){return a._(this,void 0,void 0,(function*(){const Ze={};for(const We in ge){Ze[We]={};const Xe=w.getImageCanvasContext((yield Me[We]).data),at=(yield ge[We]).data;for(const wt in at){const{width:dt,height:Et,x:Tt,y:ft,sdf:Bt,pixelRatio:ir,stretchX:Jt,stretchY:er,content:or,textFitWidth:Gr,textFitHeight:Ur}=at[wt];Ze[We][wt]={data:null,pixelRatio:ir,sdf:Bt,stretchX:Jt,stretchY:er,content:or,textFitWidth:Gr,textFitHeight:Ur,spriteData:{width:dt,height:Et,x:Tt,y:ft,context:Xe}}}}return Ze}))})(ce,oe)}))})(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((E=>{if(this._spriteRequest=null,E)for(const M in E){this._spritesImagesIds[M]=[];const j=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter((V=>!(V in E))):[];for(const V of j)this.imageManager.removeImage(V),this._changedImages[V]=!0;for(const V in E[M]){const Y=M==="default"?V:`${M}:${V}`;this._spritesImagesIds[M].push(Y),Y in this.imageManager.images?this.imageManager.updateImage(Y,E[M][V],!1):this.imageManager.addImage(Y,E[M][V]),c&&(this._changedImages[Y]=!0)}}})).catch((E=>{this._spriteRequest=null,b=E,this.fire(new a.k(b))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),y&&y(b)}))}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(s){const c=this.sourceCaches[s.source];if(!c)return;const y=s.sourceLayer;if(!y)return;const b=c.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(y)===-1)&&this.fire(new a.k(new Error(`Source layer "${y}" does not exist on source "${b.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,c=!1){const y=this._serializedAllLayers();if(!s||s.length===0)return Object.values(c?a.bJ(y):y);const b=[];for(const E of s)if(y[E]){const M=c?a.bJ(y[E]):y[E];b.push(M)}return b}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const c=Object.keys(this._layers);for(const y of c){const b=this._layers[y];b.type!=="custom"&&(s[y]=b.serialize())}return s}hasTransitions(){var s,c,y;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const b in this.sourceCaches)if(this.sourceCaches[b].hasTransition())return!0;for(const b in this._layers)if(this._layers[b].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const c=this._changed;if(c){const b=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(b.length||E.length)&&this._updateWorkerLayers(b,E);for(const M in this._updatedSources){const j=this._updatedSources[M];if(j==="reload")this._reloadSource(M);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const y={};for(const b in this.sourceCaches){const E=this.sourceCaches[b];y[b]=E.used,E.used=!1}for(const b of this._order){const E=this._layers[b];E.recalculate(s,this._availableImages),!E.isHidden(s.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const b in y){const E=this.sourceCaches[b];!!y[b]!=!!E.used&&E.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,c&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,c={}){var y;this._checkLoaded();const b=this.serialize();if(s=c.transformStyle?c.transformStyle(b,s):s,((y=c.validate)===null||y===void 0||y)&&qi(this,a.z(s)))return!1;(s=a.bJ(s)).layers=a.bH(s.layers);const E=a.bK(b,s),M=this._getOperationsToPerform(E);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(const j of M.operations)j();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const c=[],y=[];for(const b of s)switch(b.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,b.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,b.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,b.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,b.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,b.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,b.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,b.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,b.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,b.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,b.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,b.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,b.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,b.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,b.args)));break;case"setProjection":this.setProjection.apply(this,b.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,b.args)));break;case"setTransition":c.push((()=>{}));break;default:y.push(b.command)}return{operations:c,unimplemented:y}}addImage(s,c){if(this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,c),this._afterImageUpdated(s)}updateImage(s,c){this.imageManager.updateImage(s,c)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new a.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,c,y={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(a.z.source,`sources.${s}`,c,null,y))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const b=this.sourceCaches[s]=new Gt(s,c,this.dispatcher);b.style=this,b.setEventedParent(this,(()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:s}))),b.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===s)return this.fire(new a.k(new Error(`Source "${s}" cannot be removed while layer "${y}" is using it.`)));const c=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],c.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,c){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const y=this.sourceCaches[s].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(c),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,c,y={}){this._checkLoaded();const b=s.id;if(this.getLayer(b))return void this.fire(new a.k(new Error(`Layer "${b}" already exists on this map.`)));let E;if(s.type==="custom"){if(qi(this,a.bL(s)))return;E=a.bI(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(b,s.source),s=a.bJ(s),s=a.e(s,{source:b})),this._validate(a.z.layer,`layers.${b}`,s,{arrayIndex:-1},y))return;E=a.bI(s),this._validateLayer(E),E.setEventedParent(this,{layer:{id:b}})}const M=c?this._order.indexOf(c):this._order.length;if(c&&M===-1)this.fire(new a.k(new Error(`Cannot add layer "${b}" before non-existing layer "${c}".`)));else{if(this._order.splice(M,0,b),this._layerOrderChanged=!0,this._layers[b]=E,this._removedLayers[b]&&E.source&&E.type!=="custom"){const j=this._removedLayers[b];delete this._removedLayers[b],j.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(s,c){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new a.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===c)return;const y=this._order.indexOf(s);this._order.splice(y,1);const b=c?this._order.indexOf(c):this._order.length;c&&b===-1?this.fire(new a.k(new Error(`Cannot move layer "${s}" before non-existing layer "${c}".`))):(this._order.splice(b,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const c=this._layers[s];if(!c)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${s}".`)));c.setEventedParent(null);const y=this._order.indexOf(s);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=c,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],c.onRemove&&c.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,c,y){this._checkLoaded();const b=this.getLayer(s);b?b.minzoom===c&&b.maxzoom===y||(c!=null&&(b.minzoom=c),y!=null&&(b.maxzoom=y),this._updateLayer(b)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,c,y={}){this._checkLoaded();const b=this.getLayer(s);if(b){if(!a.bG(b.filter,c))return c==null?(b.setFilter(void 0),void this._updateLayer(b)):void(this._validate(a.z.filter,`layers.${b.id}.filter`,c,null,y)||(b.setFilter(a.bJ(c)),this._updateLayer(b)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return a.bJ(this.getLayer(s).filter)}setLayoutProperty(s,c,y,b={}){this._checkLoaded();const E=this.getLayer(s);E?a.bG(E.getLayoutProperty(c),y)||(E.setLayoutProperty(c,y,b),this._updateLayer(E)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,c){const y=this.getLayer(s);if(y)return y.getLayoutProperty(c);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,c,y,b={}){this._checkLoaded();const E=this.getLayer(s);E?a.bG(E.getPaintProperty(c),y)||(E.setPaintProperty(c,y,b)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,c){return this.getLayer(s).getPaintProperty(c)}setFeatureState(s,c){this._checkLoaded();const y=s.source,b=s.sourceLayer,E=this.sourceCaches[y];if(E===void 0)return void this.fire(new a.k(new Error(`The source '${y}' does not exist in the map's style.`)));const M=E.getSource().type;M==="geojson"&&b?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||b?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),E.setFeatureState(b,s.id,c)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,c){this._checkLoaded();const y=s.source,b=this.sourceCaches[y];if(b===void 0)return void this.fire(new a.k(new Error(`The source '${y}' does not exist in the map's style.`)));const E=b.getSource().type,M=E==="vector"?s.sourceLayer:void 0;E!=="vector"||M?c&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(M,s.id,c):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const c=s.source,y=s.sourceLayer,b=this.sourceCaches[c];if(b!==void 0)return b.getSource().type!=="vector"||y?(s.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),b.getFeatureState(y,s.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=a.bM(this.sourceCaches,(E=>E.serialize())),c=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,b=this.stylesheet;return a.bN({version:b.version,name:b.name,metadata:b.metadata,light:b.light,sky:b.sky,center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,sprite:b.sprite,glyphs:b.glyphs,transition:b.transition,projection:b.projection,sources:s,layers:c,terrain:y},(E=>E!==void 0))}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const c=M=>this._layers[M].type==="fill-extrusion",y={},b=[];for(let M=this._order.length-1;M>=0;M--){const j=this._order[M];if(c(j)){y[j]=M;for(const V of s){const Y=V[j];if(Y)for(const re of Y)b.push(re)}}}b.sort(((M,j)=>j.intersectionZ-M.intersectionZ));const E=[];for(let M=this._order.length-1;M>=0;M--){const j=this._order[M];if(c(j))for(let V=b.length-1;V>=0;V--){const Y=b[V].feature;if(y[Y.layer.id]<M)break;E.push(Y),b.pop()}else for(const V of s){const Y=V[j];if(Y)for(const re of Y)E.push(re.feature)}}return E}queryRenderedFeatures(s,c,y){c&&c.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",c.filter,null,c);const b={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const Y of c.layers){const re=this._layers[Y];if(!re)return this.fire(new a.k(new Error(`The layer '${Y}' does not exist in the map's style and cannot be queried for features.`))),[];b[re.source]=!0}}const E=[];c.availableImages=this._availableImages;const M=this._serializedAllLayers(),j=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,V=Object.assign(Object.assign({},c),{layers:j});for(const Y in this.sourceCaches)c.layers&&!b[Y]||E.push(mt(this.sourceCaches[Y],this._layers,M,s,V,y,this.map.terrain?(re,ce,oe)=>this.map.terrain.getElevation(re,ce,oe):void 0));return this.placement&&E.push((function(Y,re,ce,oe,ge,Me,Ze){const We={},Xe=Me.queryRenderedSymbols(oe),at=[];for(const wt of Object.keys(Xe).map(Number))at.push(Ze[wt]);at.sort(nt);for(const wt of at){const dt=wt.featureIndex.lookupSymbolFeatures(Xe[wt.bucketInstanceId],re,wt.bucketIndex,wt.sourceLayerIndex,ge.filter,ge.layers,ge.availableImages,Y);for(const Et in dt){const Tt=We[Et]=We[Et]||[],ft=dt[Et];ft.sort(((Bt,ir)=>{const Jt=wt.featureSortOrder;if(Jt){const er=Jt.indexOf(Bt.featureIndex);return Jt.indexOf(ir.featureIndex)-er}return ir.featureIndex-Bt.featureIndex}));for(const Bt of ft)Tt.push(Bt)}}return(function(wt,dt,Et){for(const Tt in wt)for(const ft of wt[Tt])Nt(ft,Et[dt[Tt].source]);return wt})(We,Y,ce)})(this._layers,M,this.sourceCaches,s,V,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(s,c){c&&c.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",c.filter,null,c);const y=this.sourceCaches[s];return y?(function(b,E){const M=b.getRenderableIds().map((Y=>b.getTileByID(Y))),j=[],V={};for(let Y=0;Y<M.length;Y++){const re=M[Y],ce=re.tileID.canonical.key;V[ce]||(V[ce]=!0,re.querySourceFeatures(j,E))}return j})(y,c):[]}getLight(){return this.light.getLight()}setLight(s,c={}){this._checkLoaded();const y=this.light.getLight();let b=!1;for(const M in s)if(!a.bG(s[M],y[M])){b=!0;break}if(!b)return;const E={now:w.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,c),this.light.updateTransitions(E)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,c={}){this._checkLoaded();const y=this.getSky();let b=!1;if(!s&&!y)return;if(s&&!y)b=!0;else if(!s&&y)b=!0;else for(const M in s)if(!a.bG(s[M],y[M])){b=!0;break}if(!b)return;const E={now:w.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,c),this.sky.updateTransitions(E)}_setProjectionInternal(s){const c=(function(y){if(Array.isArray(y)){const b=new ys({type:y});return{projection:b,transform:new Ai,cameraHelper:new ia(b)}}switch(y){case"mercator":return{projection:new Zr,transform:new Dn,cameraHelper:new Bu};case"globe":{const b=new ys({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:b,transform:new Ai,cameraHelper:new ia(b)}}case"vertical-perspective":return{projection:new lu,transform:new Fi,cameraHelper:new Yn};default:return a.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new Zr,transform:new Dn,cameraHelper:new Bu}}})(s);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const y in this.sourceCaches)this.sourceCaches[y].reload()}_validate(s,c,y,b,E={}){return(!E||E.validate!==!1)&&qi(this,s.call(a.z,a.e({key:c,style:this.serialize(),value:y,styleSpec:a.v},b)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),br().off(Yt,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const y=this.sourceCaches[c];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const c in this.sourceCaches)this.sourceCaches[c].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,c,y,b,E=!1){let M=!1,j=!1;const V={};for(const Y of this._order){const re=this._layers[Y];if(re.type!=="symbol")continue;if(!V[re.source]){const oe=this.sourceCaches[re.source];V[re.source]=oe.getRenderableIds(!0).map((ge=>oe.getTileByID(ge))).sort(((ge,Me)=>Me.tileID.overscaledZ-ge.tileID.overscaledZ||(ge.tileID.isLessThan(Me.tileID)?-1:1)))}const ce=this.crossTileSymbolIndex.addLayer(re,V[re.source],s.center.lng);M=M||ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.now(),s.zoom))&&(this.pauseablePlacement=new Fu(s,this.map.terrain,this._order,E,c,y,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,V),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.now()),j=!0),M&&this.pauseablePlacement.placement.setStale()),j||M)for(const Y of this._order){const re=this._layers[Y];re.type==="symbol"&&this.placement.updateLayerOpacities(re,V[re.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,c){return a._(this,void 0,void 0,(function*(){const y=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const b=this.sourceCaches[c.source];return b&&b.setDependencies(c.tileID.key,c.type,c.icons),y}))}getGlyphs(s,c){return a._(this,void 0,void 0,(function*(){const y=yield this.glyphManager.getGlyphs(c.stacks),b=this.sourceCaches[c.source];return b&&b.setDependencies(c.tileID.key,c.type,[""]),y}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,c={}){this._checkLoaded(),s&&this._validate(a.z.glyphs,"glyphs",s,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,c,y={},b){this._checkLoaded();const E=[{id:s,url:c}],M=[...B(this.stylesheet.sprite),...E];this._validate(a.z.sprite,"sprite",M,null,y)||(this.stylesheet.sprite=M,this._loadSprite(E,!0,b))}removeSprite(s){this._checkLoaded();const c=B(this.stylesheet.sprite);if(c.find((y=>y.id===s))){if(this._spritesImagesIds[s])for(const y of this._spritesImagesIds[s])this.imageManager.removeImage(y),this._changedImages[y]=!0;c.splice(c.findIndex((y=>y.id===s)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return B(this.stylesheet.sprite)}setSprite(s,c={},y){this._checkLoaded(),s&&this._validate(a.z.sprite,"sprite",s,null,c)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,y):(this._unloadSprite(),y&&y(null)))}}var Ks=a.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class cu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,c,y,b,E,M,j,V,Y){this.context=s;let re=this.boundPaintVertexBuffers.length!==b.length;for(let ce=0;!re&&ce<b.length;ce++)this.boundPaintVertexBuffers[ce]!==b[ce]&&(re=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==y||re||this.boundIndexBuffer!==E||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==V||this.boundDynamicVertexBuffer3!==Y?this.freshBind(c,y,b,E,M,j,V,Y):(s.bindVertexArray.set(this.vao),j&&j.bind(),E&&E.dynamicDraw&&E.bind(),V&&V.bind(),Y&&Y.bind())}freshBind(s,c,y,b,E,M,j,V){const Y=s.numAttributes,re=this.context,ce=re.gl;this.vao&&this.destroy(),this.vao=re.createVertexArray(),re.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=b,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=V,c.enableAttributes(ce,s);for(const oe of y)oe.enableAttributes(ce,s);M&&M.enableAttributes(ce,s),j&&j.enableAttributes(ce,s),V&&V.enableAttributes(ce,s),c.bind(),c.setVertexAttribPointers(ce,s,E);for(const oe of y)oe.bind(),oe.setVertexAttribPointers(ce,s,E);M&&(M.bind(),M.setVertexAttribPointers(ce,s,E)),b&&b.bind(),j&&(j.bind(),j.setVertexAttribPointers(ce,s,E)),V&&(V.bind(),V.setVertexAttribPointers(ce,s,E)),re.currentNumAttributes=Y}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const $c=(S,s,c,y,b)=>({u_texture:0,u_ele_delta:S,u_fog_matrix:s,u_fog_color:c?c.properties.get("fog-color"):a.be.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:b?0:c?c.calculateFogBlendOpacity(y):0,u_horizon_color:c?c.properties.get("horizon-color"):a.be.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:b?1:0}),fu={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function $o(S){const s=[];for(let c=0;c<S.length;c++){if(S[c]===null)continue;const y=S[c].split(" ");s.push(y.pop())}return s}class Nl{constructor(s,c,y,b,E,M,j,V,Y=[]){const re=s.gl;this.program=re.createProgram();const ce=$o(c.staticAttributes),oe=y?y.getBinderAttributes():[],ge=ce.concat(oe),Me=At.prelude.staticUniforms?$o(At.prelude.staticUniforms):[],Ze=j.staticUniforms?$o(j.staticUniforms):[],We=c.staticUniforms?$o(c.staticUniforms):[],Xe=y?y.getBinderUniforms():[],at=Me.concat(Ze).concat(We).concat(Xe),wt=[];for(const Jt of at)wt.indexOf(Jt)<0&&wt.push(Jt);const dt=y?y.defines():[];Sa(re)&&dt.unshift("#version 300 es"),E&&dt.push("#define OVERDRAW_INSPECTOR;"),M&&dt.push("#define TERRAIN3D;"),V&&dt.push(V),Y&&dt.push(...Y);let Et=dt.concat(At.prelude.fragmentSource,j.fragmentSource,c.fragmentSource).join(`
`),Tt=dt.concat(At.prelude.vertexSource,j.vertexSource,c.vertexSource).join(`
`);Sa(re)||(Et=(function(Jt){return Jt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Et),Tt=(function(Jt){return Jt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Tt));const ft=re.createShader(re.FRAGMENT_SHADER);if(re.isContextLost())return void(this.failedToCreate=!0);if(re.shaderSource(ft,Et),re.compileShader(ft),!re.getShaderParameter(ft,re.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${re.getShaderInfoLog(ft)}`);re.attachShader(this.program,ft);const Bt=re.createShader(re.VERTEX_SHADER);if(re.isContextLost())return void(this.failedToCreate=!0);if(re.shaderSource(Bt,Tt),re.compileShader(Bt),!re.getShaderParameter(Bt,re.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${re.getShaderInfoLog(Bt)}`);re.attachShader(this.program,Bt),this.attributes={};const ir={};this.numAttributes=ge.length;for(let Jt=0;Jt<this.numAttributes;Jt++)ge[Jt]&&(re.bindAttribLocation(this.program,Jt,ge[Jt]),this.attributes[ge[Jt]]=Jt);if(re.linkProgram(this.program),!re.getProgramParameter(this.program,re.LINK_STATUS))throw new Error(`Program failed to link: ${re.getProgramInfoLog(this.program)}`);re.deleteShader(Bt),re.deleteShader(ft);for(let Jt=0;Jt<wt.length;Jt++){const er=wt[Jt];if(er&&!ir[er]){const or=re.getUniformLocation(this.program,er);or&&(ir[er]=or)}}this.fixedUniforms=b(s,ir),this.terrainUniforms=((Jt,er)=>({u_depth:new a.bO(Jt,er.u_depth),u_terrain:new a.bO(Jt,er.u_terrain),u_terrain_dim:new a.bf(Jt,er.u_terrain_dim),u_terrain_matrix:new a.bQ(Jt,er.u_terrain_matrix),u_terrain_unpack:new a.bR(Jt,er.u_terrain_unpack),u_terrain_exaggeration:new a.bf(Jt,er.u_terrain_exaggeration)}))(s,ir),this.projectionUniforms=((Jt,er)=>({u_projection_matrix:new a.bQ(Jt,er.u_projection_matrix),u_projection_tile_mercator_coords:new a.bR(Jt,er.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bR(Jt,er.u_projection_clipping_plane),u_projection_transition:new a.bf(Jt,er.u_projection_transition),u_projection_fallback_matrix:new a.bQ(Jt,er.u_projection_fallback_matrix)}))(s,ir),this.binderUniforms=y?y.getUniforms(s,ir):[]}draw(s,c,y,b,E,M,j,V,Y,re,ce,oe,ge,Me,Ze,We,Xe,at,wt){const dt=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(y),s.setStencilMode(b),s.setColorMode(E),s.setCullFace(M),V){s.activeTexture.set(dt.TEXTURE2),dt.bindTexture(dt.TEXTURE_2D,V.depthTexture),s.activeTexture.set(dt.TEXTURE3),dt.bindTexture(dt.TEXTURE_2D,V.texture);for(const Tt in this.terrainUniforms)this.terrainUniforms[Tt].set(V[Tt])}if(Y)for(const Tt in Y)this.projectionUniforms[fu[Tt]].set(Y[Tt]);if(j)for(const Tt in this.fixedUniforms)this.fixedUniforms[Tt].set(j[Tt]);We&&We.setUniforms(s,this.binderUniforms,Me,{zoom:Ze});let Et=0;switch(c){case dt.LINES:Et=2;break;case dt.TRIANGLES:Et=3;break;case dt.LINE_STRIP:Et=1}for(const Tt of ge.get()){const ft=Tt.vaos||(Tt.vaos={});(ft[re]||(ft[re]=new cu)).bind(s,this,ce,We?We.getPaintVertexBuffers():[],oe,Tt.vertexOffset,Xe,at,wt),dt.drawElements(c,Tt.primitiveLength*Et,dt.UNSIGNED_SHORT,Tt.primitiveOffset*Et*2)}}}function bl(S,s,c){const y=1/a.aB(c,1,s.transform.tileZoom),b=Math.pow(2,c.tileID.overscaledZ),E=c.tileSize*Math.pow(2,s.transform.tileZoom)/b,M=E*(c.tileID.canonical.x+c.tileID.wrap*b),j=E*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[y,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[M>>16,j>>16],u_pixel_coord_lower:[65535&M,65535&j]}}const as=(S,s,c,y)=>{const b=S.style.light,E=b.properties.get("position"),M=[E.x,E.y,E.z],j=a.bU();b.properties.get("anchor")==="viewport"&&a.bV(j,S.transform.bearingInRadians),a.bW(M,M,j);const V=S.transform.transformLightDirection(M),Y=b.properties.get("color");return{u_lightpos:M,u_lightpos_globe:V,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[Y.r,Y.g,Y.b],u_vertical_gradient:+s,u_opacity:c,u_fill_translate:y}},pa=(S,s,c,y,b,E,M)=>a.e(as(S,s,c,y),bl(E,S,M),{u_height_factor:-Math.pow(2,b.overscaledZ)/M.tileSize/8}),Za=(S,s,c,y)=>a.e(bl(s,S,c),{u_fill_translate:y}),Gi=(S,s)=>({u_world:S,u_fill_translate:s}),vs=(S,s,c,y,b)=>a.e(Za(S,s,c,b),{u_world:y}),Xs=(S,s,c,y,b)=>{const E=S.transform;let M,j,V=0;if(c.paint.get("circle-pitch-alignment")==="map"){const Y=a.aB(s,1,E.zoom);M=!0,j=[Y,Y],V=Y/(a.$*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*b}else M=!1,j=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:S.pixelRatio,u_extrude_scale:j,u_globe_extrude_scale:V,u_translate:y}},Hi=S=>({u_pixel_extrude_scale:[1/S.width,1/S.height]}),Fl=S=>({u_viewport_size:[S.width,S.height]}),Ys=(S,s=1)=>({u_color:S,u_overlay:0,u_overlay_scale:s}),bs=(S,s,c,y)=>{const b=a.aB(S,1,s)/(a.$*Math.pow(2,S.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:a.aB(S,1,s),u_intensity:c,u_globe_extrude_scale:b}},Ea=(S,s,c,y)=>{const b=a.L();a.bX(b,0,S.width,S.height,0,0,1);const E=S.context.gl;return{u_matrix:b,u_world:[E.drawingBufferWidth,E.drawingBufferHeight],u_image:c,u_color_ramp:y,u_opacity:s.paint.get("heatmap-opacity")}},Ka=(S,s,c)=>{const y=c.paint.get("hillshade-accent-color");let b;switch(c.paint.get("hillshade-method")){case"basic":b=4;break;case"combined":b=1;break;case"igor":b=2;break;case"multidirectional":b=3;break;default:b=0}const E=c.getIlluminationProperties();for(let M=0;M<E.directionRadians.length;M++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(E.directionRadians[M]+=S.transform.bearingInRadians);return{u_image:0,u_latrange:ju(0,s.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:E.altitudeRadians,u_azimuths:E.directionRadians,u_accent:y,u_method:b,u_highlights:E.highlightColor,u_shadows:E.shadowColor}},ac=(S,s)=>{const c=s.stride,y=a.L();return a.bX(y,0,a.$,-8192,0,0,1),a.M(y,y,[0,-8192,0]),{u_matrix:y,u_image:1,u_dimension:[c,c],u_zoom:S.overscaledZ,u_unpack:s.getUnpackVector()}};function ju(S,s){const c=Math.pow(2,s.canonical.z),y=s.canonical.y;return[new a.a0(0,y/c).toLngLat().lat,new a.a0(0,(y+1)/c).toLngLat().lat]}const _l=(S,s)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_opacity:S.paint.get("color-relief-opacity")}),Js=(S,s,c,y)=>{const b=S.transform;return{u_translation:Qs(S,s,c),u_ratio:y/a.aB(s,1,b.zoom),u_device_pixel_ratio:S.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Fa=(S,s,c,y,b)=>a.e(Js(S,s,c,y),{u_image:0,u_image_height:b}),Ia=(S,s,c,y,b)=>{const E=S.transform,M=Ba(s,E);return{u_translation:Qs(S,s,c),u_texsize:s.imageAtlasTexture.size,u_ratio:y/a.aB(s,1,E.zoom),u_device_pixel_ratio:S.pixelRatio,u_image:0,u_scale:[M,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},Bl=(S,s,c,y,b,E)=>{const M=S.lineAtlas,j=Ba(s,S.transform),V=c.layout.get("line-cap")==="round",Y=M.getDash(b.from,V),re=M.getDash(b.to,V),ce=Y.width*E.fromScale,oe=re.width*E.toScale;return a.e(Js(S,s,c,y),{u_patternscale_a:[j/ce,-Y.height/2],u_patternscale_b:[j/oe,-re.height/2],u_sdfgamma:M.width/(256*Math.min(ce,oe)*S.pixelRatio)/2,u_image:0,u_tex_y_a:Y.y,u_tex_y_b:re.y,u_mix:E.t})};function Ba(S,s){return 1/a.aB(S,1,s.tileZoom)}function Qs(S,s,c){return a.aC(S.transform,s,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const no=(S,s,c,y,b)=>{return{u_tl_parent:S,u_scale_parent:s,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(M=y.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(E=y.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:el(y.paint.get("raster-hue-rotate")),u_coords_top:[b[0].x,b[0].y,b[1].x,b[1].y],u_coords_bottom:[b[3].x,b[3].y,b[2].x,b[2].y]};var E,M};function el(S){S*=Math.PI/180;const s=Math.sin(S),c=Math.cos(S);return[(2*c+1)/3,(-Math.sqrt(3)*s-c+1)/3,(Math.sqrt(3)*s-c+1)/3]}const aa=(S,s,c,y,b,E,M,j,V,Y,re,ce,oe)=>{const ge=M.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:ge.cameraToCenterDistance,u_pitch:ge.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:ge.width/ge.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:j,u_coord_matrix:V,u_is_text:+re,u_pitch_with_map:+y,u_is_along_line:b,u_is_variable_anchor:E,u_texsize:ce,u_texture:0,u_translation:Y,u_pitched_scale:oe}},Rs=(S,s,c,y,b,E,M,j,V,Y,re,ce,oe,ge)=>{const Me=M.transform;return a.e(aa(S,s,c,y,b,E,M,j,V,Y,re,ce,ge),{u_gamma_scale:y?Math.cos(Me.pitch*Math.PI/180)*Me.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},_s=(S,s,c,y,b,E,M,j,V,Y,re,ce,oe)=>a.e(Rs(S,s,c,y,b,E,M,j,V,Y,!0,re,0,oe),{u_texsize_icon:ce,u_texture_icon:1}),qo=(S,s)=>({u_opacity:S,u_color:s}),hu=(S,s,c,y,b)=>a.e((function(E,M,j,V){const Y=j.imageManager.getPattern(E.from.toString()),re=j.imageManager.getPattern(E.to.toString()),{width:ce,height:oe}=j.imageManager.getPixelSize(),ge=Math.pow(2,V.tileID.overscaledZ),Me=V.tileSize*Math.pow(2,j.transform.tileZoom)/ge,Ze=Me*(V.tileID.canonical.x+V.tileID.wrap*ge),We=Me*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:re.tl,u_pattern_br_b:re.br,u_texsize:[ce,oe],u_mix:M.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:re.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/a.aB(V,1,j.transform.tileZoom),u_pixel_coord_upper:[Ze>>16,We>>16],u_pixel_coord_lower:[65535&Ze,65535&We]}})(c,b,s,y),{u_opacity:S}),du=(S,s)=>{},Os={fillExtrusion:(S,s)=>({u_lightpos:new a.bS(S,s.u_lightpos),u_lightpos_globe:new a.bS(S,s.u_lightpos_globe),u_lightintensity:new a.bf(S,s.u_lightintensity),u_lightcolor:new a.bS(S,s.u_lightcolor),u_vertical_gradient:new a.bf(S,s.u_vertical_gradient),u_opacity:new a.bf(S,s.u_opacity),u_fill_translate:new a.bT(S,s.u_fill_translate)}),fillExtrusionPattern:(S,s)=>({u_lightpos:new a.bS(S,s.u_lightpos),u_lightpos_globe:new a.bS(S,s.u_lightpos_globe),u_lightintensity:new a.bf(S,s.u_lightintensity),u_lightcolor:new a.bS(S,s.u_lightcolor),u_vertical_gradient:new a.bf(S,s.u_vertical_gradient),u_height_factor:new a.bf(S,s.u_height_factor),u_opacity:new a.bf(S,s.u_opacity),u_fill_translate:new a.bT(S,s.u_fill_translate),u_image:new a.bO(S,s.u_image),u_texsize:new a.bT(S,s.u_texsize),u_pixel_coord_upper:new a.bT(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(S,s.u_pixel_coord_lower),u_scale:new a.bS(S,s.u_scale),u_fade:new a.bf(S,s.u_fade)}),fill:(S,s)=>({u_fill_translate:new a.bT(S,s.u_fill_translate)}),fillPattern:(S,s)=>({u_image:new a.bO(S,s.u_image),u_texsize:new a.bT(S,s.u_texsize),u_pixel_coord_upper:new a.bT(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(S,s.u_pixel_coord_lower),u_scale:new a.bS(S,s.u_scale),u_fade:new a.bf(S,s.u_fade),u_fill_translate:new a.bT(S,s.u_fill_translate)}),fillOutline:(S,s)=>({u_world:new a.bT(S,s.u_world),u_fill_translate:new a.bT(S,s.u_fill_translate)}),fillOutlinePattern:(S,s)=>({u_world:new a.bT(S,s.u_world),u_image:new a.bO(S,s.u_image),u_texsize:new a.bT(S,s.u_texsize),u_pixel_coord_upper:new a.bT(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(S,s.u_pixel_coord_lower),u_scale:new a.bS(S,s.u_scale),u_fade:new a.bf(S,s.u_fade),u_fill_translate:new a.bT(S,s.u_fill_translate)}),circle:(S,s)=>({u_camera_to_center_distance:new a.bf(S,s.u_camera_to_center_distance),u_scale_with_map:new a.bO(S,s.u_scale_with_map),u_pitch_with_map:new a.bO(S,s.u_pitch_with_map),u_extrude_scale:new a.bT(S,s.u_extrude_scale),u_device_pixel_ratio:new a.bf(S,s.u_device_pixel_ratio),u_globe_extrude_scale:new a.bf(S,s.u_globe_extrude_scale),u_translate:new a.bT(S,s.u_translate)}),collisionBox:(S,s)=>({u_pixel_extrude_scale:new a.bT(S,s.u_pixel_extrude_scale)}),collisionCircle:(S,s)=>({u_viewport_size:new a.bT(S,s.u_viewport_size)}),debug:(S,s)=>({u_color:new a.bP(S,s.u_color),u_overlay:new a.bO(S,s.u_overlay),u_overlay_scale:new a.bf(S,s.u_overlay_scale)}),depth:du,clippingMask:du,heatmap:(S,s)=>({u_extrude_scale:new a.bf(S,s.u_extrude_scale),u_intensity:new a.bf(S,s.u_intensity),u_globe_extrude_scale:new a.bf(S,s.u_globe_extrude_scale)}),heatmapTexture:(S,s)=>({u_matrix:new a.bQ(S,s.u_matrix),u_world:new a.bT(S,s.u_world),u_image:new a.bO(S,s.u_image),u_color_ramp:new a.bO(S,s.u_color_ramp),u_opacity:new a.bf(S,s.u_opacity)}),hillshade:(S,s)=>({u_image:new a.bO(S,s.u_image),u_latrange:new a.bT(S,s.u_latrange),u_exaggeration:new a.bf(S,s.u_exaggeration),u_altitudes:new a.bZ(S,s.u_altitudes),u_azimuths:new a.bZ(S,s.u_azimuths),u_accent:new a.bP(S,s.u_accent),u_method:new a.bO(S,s.u_method),u_shadows:new a.bY(S,s.u_shadows),u_highlights:new a.bY(S,s.u_highlights)}),hillshadePrepare:(S,s)=>({u_matrix:new a.bQ(S,s.u_matrix),u_image:new a.bO(S,s.u_image),u_dimension:new a.bT(S,s.u_dimension),u_zoom:new a.bf(S,s.u_zoom),u_unpack:new a.bR(S,s.u_unpack)}),colorRelief:(S,s)=>({u_image:new a.bO(S,s.u_image),u_unpack:new a.bR(S,s.u_unpack),u_dimension:new a.bT(S,s.u_dimension),u_elevation_stops:new a.bO(S,s.u_elevation_stops),u_color_stops:new a.bO(S,s.u_color_stops),u_opacity:new a.bf(S,s.u_opacity)}),line:(S,s)=>({u_translation:new a.bT(S,s.u_translation),u_ratio:new a.bf(S,s.u_ratio),u_device_pixel_ratio:new a.bf(S,s.u_device_pixel_ratio),u_units_to_pixels:new a.bT(S,s.u_units_to_pixels)}),lineGradient:(S,s)=>({u_translation:new a.bT(S,s.u_translation),u_ratio:new a.bf(S,s.u_ratio),u_device_pixel_ratio:new a.bf(S,s.u_device_pixel_ratio),u_units_to_pixels:new a.bT(S,s.u_units_to_pixels),u_image:new a.bO(S,s.u_image),u_image_height:new a.bf(S,s.u_image_height)}),linePattern:(S,s)=>({u_translation:new a.bT(S,s.u_translation),u_texsize:new a.bT(S,s.u_texsize),u_ratio:new a.bf(S,s.u_ratio),u_device_pixel_ratio:new a.bf(S,s.u_device_pixel_ratio),u_image:new a.bO(S,s.u_image),u_units_to_pixels:new a.bT(S,s.u_units_to_pixels),u_scale:new a.bS(S,s.u_scale),u_fade:new a.bf(S,s.u_fade)}),lineSDF:(S,s)=>({u_translation:new a.bT(S,s.u_translation),u_ratio:new a.bf(S,s.u_ratio),u_device_pixel_ratio:new a.bf(S,s.u_device_pixel_ratio),u_units_to_pixels:new a.bT(S,s.u_units_to_pixels),u_patternscale_a:new a.bT(S,s.u_patternscale_a),u_patternscale_b:new a.bT(S,s.u_patternscale_b),u_sdfgamma:new a.bf(S,s.u_sdfgamma),u_image:new a.bO(S,s.u_image),u_tex_y_a:new a.bf(S,s.u_tex_y_a),u_tex_y_b:new a.bf(S,s.u_tex_y_b),u_mix:new a.bf(S,s.u_mix)}),raster:(S,s)=>({u_tl_parent:new a.bT(S,s.u_tl_parent),u_scale_parent:new a.bf(S,s.u_scale_parent),u_buffer_scale:new a.bf(S,s.u_buffer_scale),u_fade_t:new a.bf(S,s.u_fade_t),u_opacity:new a.bf(S,s.u_opacity),u_image0:new a.bO(S,s.u_image0),u_image1:new a.bO(S,s.u_image1),u_brightness_low:new a.bf(S,s.u_brightness_low),u_brightness_high:new a.bf(S,s.u_brightness_high),u_saturation_factor:new a.bf(S,s.u_saturation_factor),u_contrast_factor:new a.bf(S,s.u_contrast_factor),u_spin_weights:new a.bS(S,s.u_spin_weights),u_coords_top:new a.bR(S,s.u_coords_top),u_coords_bottom:new a.bR(S,s.u_coords_bottom)}),symbolIcon:(S,s)=>({u_is_size_zoom_constant:new a.bO(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(S,s.u_is_size_feature_constant),u_size_t:new a.bf(S,s.u_size_t),u_size:new a.bf(S,s.u_size),u_camera_to_center_distance:new a.bf(S,s.u_camera_to_center_distance),u_pitch:new a.bf(S,s.u_pitch),u_rotate_symbol:new a.bO(S,s.u_rotate_symbol),u_aspect_ratio:new a.bf(S,s.u_aspect_ratio),u_fade_change:new a.bf(S,s.u_fade_change),u_label_plane_matrix:new a.bQ(S,s.u_label_plane_matrix),u_coord_matrix:new a.bQ(S,s.u_coord_matrix),u_is_text:new a.bO(S,s.u_is_text),u_pitch_with_map:new a.bO(S,s.u_pitch_with_map),u_is_along_line:new a.bO(S,s.u_is_along_line),u_is_variable_anchor:new a.bO(S,s.u_is_variable_anchor),u_texsize:new a.bT(S,s.u_texsize),u_texture:new a.bO(S,s.u_texture),u_translation:new a.bT(S,s.u_translation),u_pitched_scale:new a.bf(S,s.u_pitched_scale)}),symbolSDF:(S,s)=>({u_is_size_zoom_constant:new a.bO(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(S,s.u_is_size_feature_constant),u_size_t:new a.bf(S,s.u_size_t),u_size:new a.bf(S,s.u_size),u_camera_to_center_distance:new a.bf(S,s.u_camera_to_center_distance),u_pitch:new a.bf(S,s.u_pitch),u_rotate_symbol:new a.bO(S,s.u_rotate_symbol),u_aspect_ratio:new a.bf(S,s.u_aspect_ratio),u_fade_change:new a.bf(S,s.u_fade_change),u_label_plane_matrix:new a.bQ(S,s.u_label_plane_matrix),u_coord_matrix:new a.bQ(S,s.u_coord_matrix),u_is_text:new a.bO(S,s.u_is_text),u_pitch_with_map:new a.bO(S,s.u_pitch_with_map),u_is_along_line:new a.bO(S,s.u_is_along_line),u_is_variable_anchor:new a.bO(S,s.u_is_variable_anchor),u_texsize:new a.bT(S,s.u_texsize),u_texture:new a.bO(S,s.u_texture),u_gamma_scale:new a.bf(S,s.u_gamma_scale),u_device_pixel_ratio:new a.bf(S,s.u_device_pixel_ratio),u_is_halo:new a.bO(S,s.u_is_halo),u_translation:new a.bT(S,s.u_translation),u_pitched_scale:new a.bf(S,s.u_pitched_scale)}),symbolTextAndIcon:(S,s)=>({u_is_size_zoom_constant:new a.bO(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(S,s.u_is_size_feature_constant),u_size_t:new a.bf(S,s.u_size_t),u_size:new a.bf(S,s.u_size),u_camera_to_center_distance:new a.bf(S,s.u_camera_to_center_distance),u_pitch:new a.bf(S,s.u_pitch),u_rotate_symbol:new a.bO(S,s.u_rotate_symbol),u_aspect_ratio:new a.bf(S,s.u_aspect_ratio),u_fade_change:new a.bf(S,s.u_fade_change),u_label_plane_matrix:new a.bQ(S,s.u_label_plane_matrix),u_coord_matrix:new a.bQ(S,s.u_coord_matrix),u_is_text:new a.bO(S,s.u_is_text),u_pitch_with_map:new a.bO(S,s.u_pitch_with_map),u_is_along_line:new a.bO(S,s.u_is_along_line),u_is_variable_anchor:new a.bO(S,s.u_is_variable_anchor),u_texsize:new a.bT(S,s.u_texsize),u_texsize_icon:new a.bT(S,s.u_texsize_icon),u_texture:new a.bO(S,s.u_texture),u_texture_icon:new a.bO(S,s.u_texture_icon),u_gamma_scale:new a.bf(S,s.u_gamma_scale),u_device_pixel_ratio:new a.bf(S,s.u_device_pixel_ratio),u_is_halo:new a.bO(S,s.u_is_halo),u_translation:new a.bT(S,s.u_translation),u_pitched_scale:new a.bf(S,s.u_pitched_scale)}),background:(S,s)=>({u_opacity:new a.bf(S,s.u_opacity),u_color:new a.bP(S,s.u_color)}),backgroundPattern:(S,s)=>({u_opacity:new a.bf(S,s.u_opacity),u_image:new a.bO(S,s.u_image),u_pattern_tl_a:new a.bT(S,s.u_pattern_tl_a),u_pattern_br_a:new a.bT(S,s.u_pattern_br_a),u_pattern_tl_b:new a.bT(S,s.u_pattern_tl_b),u_pattern_br_b:new a.bT(S,s.u_pattern_br_b),u_texsize:new a.bT(S,s.u_texsize),u_mix:new a.bf(S,s.u_mix),u_pattern_size_a:new a.bT(S,s.u_pattern_size_a),u_pattern_size_b:new a.bT(S,s.u_pattern_size_b),u_scale_a:new a.bf(S,s.u_scale_a),u_scale_b:new a.bf(S,s.u_scale_b),u_pixel_coord_upper:new a.bT(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(S,s.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bf(S,s.u_tile_units_to_pixels)}),terrain:(S,s)=>({u_texture:new a.bO(S,s.u_texture),u_ele_delta:new a.bf(S,s.u_ele_delta),u_fog_matrix:new a.bQ(S,s.u_fog_matrix),u_fog_color:new a.bP(S,s.u_fog_color),u_fog_ground_blend:new a.bf(S,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bf(S,s.u_fog_ground_blend_opacity),u_horizon_color:new a.bP(S,s.u_horizon_color),u_horizon_fog_blend:new a.bf(S,s.u_horizon_fog_blend),u_is_globe_mode:new a.bf(S,s.u_is_globe_mode)}),terrainDepth:(S,s)=>({u_ele_delta:new a.bf(S,s.u_ele_delta)}),terrainCoords:(S,s)=>({u_texture:new a.bO(S,s.u_texture),u_terrain_coords_id:new a.bf(S,s.u_terrain_coords_id),u_ele_delta:new a.bf(S,s.u_ele_delta)}),projectionErrorMeasurement:(S,s)=>({u_input:new a.bf(S,s.u_input),u_output_expected:new a.bf(S,s.u_output_expected)}),atmosphere:(S,s)=>({u_sun_pos:new a.bS(S,s.u_sun_pos),u_atmosphere_blend:new a.bf(S,s.u_atmosphere_blend),u_globe_position:new a.bS(S,s.u_globe_position),u_globe_radius:new a.bf(S,s.u_globe_radius),u_inv_proj_matrix:new a.bQ(S,s.u_inv_proj_matrix)}),sky:(S,s)=>({u_sky_color:new a.bP(S,s.u_sky_color),u_horizon_color:new a.bP(S,s.u_horizon_color),u_horizon:new a.bT(S,s.u_horizon),u_horizon_normal:new a.bT(S,s.u_horizon_normal),u_sky_horizon_blend:new a.bf(S,s.u_sky_horizon_blend),u_sky_blend:new a.bf(S,s.u_sky_blend)})};class jl{constructor(s,c,y){this.context=s;const b=s.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const zl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ut{constructor(s,c,y,b){this.length=c.length,this.attributes=y,this.itemSize=c.bytesPerElement,this.dynamicDraw=b,this.context=s;const E=s.gl;this.buffer=E.createBuffer(),s.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,c){for(let y=0;y<this.attributes.length;y++){const b=c.attributes[this.attributes[y].name];b!==void 0&&s.enableVertexAttribArray(b)}}setVertexAttribPointers(s,c,y){for(let b=0;b<this.attributes.length;b++){const E=this.attributes[b],M=c.attributes[E.name];M!==void 0&&s.vertexAttribPointer(M,E.components,s[zl[E.type]],!1,this.itemSize,E.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Zt{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Wr extends Zt{getDefault(){return a.be.transparent}set(s){const c=this.current;(s.r!==c.r||s.g!==c.g||s.b!==c.b||s.a!==c.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class en extends Zt{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class ai extends Zt{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class gn extends Zt{getDefault(){return[!0,!0,!0,!0]}set(s){const c=this.current;(s[0]!==c[0]||s[1]!==c[1]||s[2]!==c[2]||s[3]!==c[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Fn extends Zt{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Jn extends Zt{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class wi extends Zt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const c=this.current;(s.func!==c.func||s.ref!==c.ref||s.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Si extends Zt{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const c=this.current;(s[0]!==c[0]||s[1]!==c[1]||s[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class Wi extends Zt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;s?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=s,this.dirty=!1}}class ja extends Zt{getDefault(){return[0,1]}set(s){const c=this.current;(s[0]!==c[0]||s[1]!==c[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class os extends Zt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;s?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=s,this.dirty=!1}}class ho extends Zt{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class tl extends Zt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;s?c.enable(c.BLEND):c.disable(c.BLEND),this.current=s,this.dirty=!1}}class $l extends Zt{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const c=this.current;(s[0]!==c[0]||s[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class oc extends Zt{getDefault(){return a.be.transparent}set(s){const c=this.current;(s.r!==c.r||s.g!==c.g||s.b!==c.b||s.a!==c.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class ql extends Zt{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class xl extends Zt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;s?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=s,this.dirty=!1}}class zu extends Zt{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class sc extends Zt{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class qc extends Zt{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class yi extends Zt{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class vi extends Zt{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const c=this.current;(s[0]!==c[0]||s[1]!==c[1]||s[2]!==c[2]||s[3]!==c[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class rl extends Zt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class oa extends Zt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class lc extends Zt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Uo extends Zt{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class xs extends Zt{getDefault(){return null}set(s){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Po extends Zt{getDefault(){return null}set(s){var c;if(s===this.current&&!this.dirty)return;const y=this.gl;Sa(y)?y.bindVertexArray(s):(c=y.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class wl extends Zt{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class Ul extends Zt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class ks extends Zt{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class ss extends Zt{constructor(s,c){super(s),this.context=s,this.parent=c}getDefault(){return null}}class uc extends ss{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class ws extends ss{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Ma extends ss{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,s),this.current=s,this.dirty=!1}}const io="Framebuffer is not complete";class Sl{constructor(s,c,y,b,E){this.context=s,this.width=c,this.height=y;const M=s.gl,j=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new uc(s,j),b)this.depthAttachment=E?new Ma(s,j):new ws(s,j);else if(E)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(io)}destroy(){const s=this.context.gl,c=this.colorAttachment.get();if(c&&s.deleteTexture(c),this.depthAttachment){const y=this.depthAttachment.get();y&&s.deleteRenderbuffer(y)}s.deleteFramebuffer(this.framebuffer)}}class zn{constructor(s){var c,y;if(this.gl=s,this.clearColor=new Wr(this),this.clearDepth=new en(this),this.clearStencil=new ai(this),this.colorMask=new gn(this),this.depthMask=new Fn(this),this.stencilMask=new Jn(this),this.stencilFunc=new wi(this),this.stencilOp=new Si(this),this.stencilTest=new Wi(this),this.depthRange=new ja(this),this.depthTest=new os(this),this.depthFunc=new ho(this),this.blend=new tl(this),this.blendFunc=new $l(this),this.blendColor=new oc(this),this.blendEquation=new ql(this),this.cullFace=new xl(this),this.cullFaceSide=new zu(this),this.frontFace=new sc(this),this.program=new qc(this),this.activeTexture=new yi(this),this.viewport=new vi(this),this.bindFramebuffer=new rl(this),this.bindRenderbuffer=new oa(this),this.bindTexture=new lc(this),this.bindVertexBuffer=new Uo(this),this.bindElementBuffer=new xs(this),this.bindVertexArray=new Po(this),this.pixelStoreUnpack=new wl(this),this.pixelStoreUnpackPremultiplyAlpha=new Ul(this),this.pixelStoreUnpackFlipY=new ks(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Sa(s)){this.HALF_FLOAT=s.HALF_FLOAT;const b=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=s.RGBA16F)!==null&&c!==void 0?c:b?.RGBA16F_EXT,this.RGB16F=(y=s.RGB16F)!==null&&y!==void 0?y:b?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const b=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=b?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,c){return new jl(this,s,c)}createVertexBuffer(s,c,y){return new Ut(this,s,c,y)}createRenderbuffer(s,c,y){const b=this.gl,E=b.createRenderbuffer();return this.bindRenderbuffer.set(E),b.renderbufferStorage(b.RENDERBUFFER,s,c,y),this.bindRenderbuffer.set(null),E}createFramebuffer(s,c,y,b){return new Sl(this,s,c,y,b)}clear({color:s,depth:c,stencil:y}){const b=this.gl;let E=0;s&&(E|=b.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(E|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),y!==void 0&&(E|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),b.clear(E)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){a.bG(s.blendFunction,dn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Sa(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var c;return Sa(this.gl)?this.gl.deleteVertexArray(s):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let Ls;function Vl(S,s,c,y,b){const E=S.context,M=S.transform,j=E.gl,V=S.useProgram("collisionBox"),Y=[];let re=0,ce=0;for(let Xe=0;Xe<y.length;Xe++){const at=y[Xe],wt=s.getTile(at).getBucket(c);if(!wt)continue;const dt=b?wt.textCollisionBox:wt.iconCollisionBox,Et=wt.collisionCircleArray;Et.length>0&&(Y.push({circleArray:Et,circleOffset:ce,coord:at}),re+=Et.length/4,ce=re),dt&&V.draw(E,j.LINES,Sn.disabled,bn.disabled,S.colorModeForRenderPass(),On.disabled,Hi(S.transform),S.style.map.terrain&&S.style.map.terrain.getTerrainData(at),M.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,null,S.transform.zoom,null,null,dt.collisionVertexBuffer)}if(!b||!Y.length)return;const oe=S.useProgram("collisionCircle"),ge=new a.b_;ge.resize(4*re),ge._trim();let Me=0;for(const Xe of Y)for(let at=0;at<Xe.circleArray.length/4;at++){const wt=4*at,dt=Xe.circleArray[wt+0],Et=Xe.circleArray[wt+1],Tt=Xe.circleArray[wt+2],ft=Xe.circleArray[wt+3];ge.emplace(Me++,dt,Et,Tt,ft,0),ge.emplace(Me++,dt,Et,Tt,ft,1),ge.emplace(Me++,dt,Et,Tt,ft,2),ge.emplace(Me++,dt,Et,Tt,ft,3)}(!Ls||Ls.length<2*re)&&(Ls=(function(Xe){const at=2*Xe,wt=new a.c0;wt.resize(at),wt._trim();for(let dt=0;dt<at;dt++){const Et=6*dt;wt.uint16[Et+0]=4*dt+0,wt.uint16[Et+1]=4*dt+1,wt.uint16[Et+2]=4*dt+2,wt.uint16[Et+3]=4*dt+2,wt.uint16[Et+4]=4*dt+3,wt.uint16[Et+5]=4*dt+0}return wt})(re));const Ze=E.createIndexBuffer(Ls,!0),We=E.createVertexBuffer(ge,a.b$.members,!0);for(const Xe of Y){const at=Fl(S.transform);oe.draw(E,j.TRIANGLES,Sn.disabled,bn.disabled,S.colorModeForRenderPass(),On.disabled,at,S.style.map.terrain&&S.style.map.terrain.getTerrainData(Xe.coord),null,c.id,We,Ze,a.aL.simpleSegment(0,2*Xe.circleOffset,Xe.circleArray.length,Xe.circleArray.length/2),null,S.transform.zoom,null,null,null)}We.destroy(),Ze.destroy()}const Of=a.af(new Float32Array(16));function cc(S,s,c,y,b,E){const{horizontalAlign:M,verticalAlign:j}=a.aG(S);return new a.P((-(M-.5)*s/b+y[0])*E,(-(j-.5)*c/b+y[1])*E)}function Np(S,s,c,y,b,E){const M=s.tileAnchorPoint.add(new a.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let j=y.mult(E);c||(j=j.rotate(-b));const V=M.add(j);return Be(V.x,V.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(c){const j=yr(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(S),V=Math.atan(j.y/j.x)+(j.x<0?Math.PI:0);return S.add(y.rotate(V))}return S.add(y)}function gd(S,s,c,y,b,E,M,j,V,Y,re,ce){const oe=S.text.placedSymbolArray,ge=S.text.dynamicLayoutVertexArray,Me=S.icon.dynamicLayoutVertexArray,Ze={};ge.clear();for(let We=0;We<oe.length;We++){const Xe=oe.get(We),at=Xe.hidden||!Xe.crossTileID||S.allowVerticalPlacement&&!Xe.placedOrientation?null:y[Xe.crossTileID];if(at){const wt=new a.P(Xe.anchorX,Xe.anchorY),dt={getElevation:ce,width:b.width,height:b.height,pitchedLabelPlaneMatrix:E,pitchWithMap:c,transform:b,tileAnchorPoint:wt,translation:Y,unwrappedTileID:re},Et=c?Kr(wt.x,wt.y,dt):yr(wt.x,wt.y,dt),Tt=et(b.cameraToCenterDistance,Et.signedDistanceFromCamera);let ft=a.ao(S.textSizeData,j,Xe)*Tt/a.aA;c&&(ft*=S.tilePixelRatio/M);const{width:Bt,height:ir,anchor:Jt,textOffset:er,textBoxScale:or}=at,Gr=cc(Jt,Bt,ir,er,or,ft),Ur=b.getPitchedTextCorrection(wt.x+Y[0],wt.y+Y[1],re),Ar=Np(Et.point,dt,s,Gr,-b.bearingInRadians,Ur),nn=S.allowVerticalPlacement&&Xe.placedOrientation===a.an.vertical?Math.PI/2:0;for(let Zn=0;Zn<Xe.numGlyphs;Zn++)a.au(ge,Ar,nn);V&&Xe.associatedIconIndex>=0&&(Ze[Xe.associatedIconIndex]={shiftedAnchor:Ar,angle:nn})}else Pi(Xe.numGlyphs,ge)}if(V){Me.clear();const We=S.icon.placedSymbolArray;for(let Xe=0;Xe<We.length;Xe++){const at=We.get(Xe);if(at.hidden)Pi(at.numGlyphs,Me);else{const wt=Ze[Xe];if(wt)for(let dt=0;dt<at.numGlyphs;dt++)a.au(Me,wt.shiftedAnchor,wt.angle);else Pi(at.numGlyphs,Me)}}S.icon.dynamicLayoutVertexBuffer.updateData(Me)}S.text.dynamicLayoutVertexBuffer.updateData(ge)}function vh(S,s,c){return c.iconsInText&&s?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function kf(S,s,c,y,b,E,M,j,V,Y,re,ce,oe){const ge=S.context,Me=ge.gl,Ze=S.transform,We=j==="map",Xe=V==="map",at=j!=="viewport"&&c.layout.get("symbol-placement")!=="point",wt=We&&!Xe&&!at,dt=!c.layout.get("symbol-sort-key").isConstant();let Et=!1;const Tt=S.getDepthModeForSublayer(0,Sn.ReadOnly),ft=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Bt=[],ir=Ze.getCircleRadiusCorrection();for(const Jt of y){const er=s.getTile(Jt),or=er.getBucket(c);if(!or)continue;const Gr=b?or.text:or.icon;if(!Gr||!Gr.segments.get().length||!Gr.hasVisibleVertices)continue;const Ur=Gr.programConfigurations.get(c.id),Ar=b||or.sdfIcons,nn=b?or.textSizeData:or.iconSizeData,Zn=Xe||Ze.pitch!==0,fi=S.useProgram(vh(Ar,b,or),Ur),ra=a.am(nn,Ze.zoom),ki=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Jt);let Li,Ei,_i,ji,uo=[0,0],si=null;if(b)Ei=er.glyphAtlasTexture,_i=Me.LINEAR,Li=er.glyphAtlasTexture.size,or.iconsInText&&(uo=er.imageAtlasTexture.size,si=er.imageAtlasTexture,ji=Zn||S.options.rotating||S.options.zooming||nn.kind==="composite"||nn.kind==="camera"?Me.LINEAR:Me.NEAREST);else{const Ja=c.layout.get("icon-size").constantOr(0)!==1||or.iconsNeedLinear;Ei=er.imageAtlasTexture,_i=Ar||S.options.rotating||S.options.zooming||Ja||Zn?Me.LINEAR:Me.NEAREST,Li=er.imageAtlasTexture.size}const po=a.aB(er,1,S.transform.zoom),co=jt(We,S.transform,po),Wl=a.L();a.ap(Wl,co);const Yc=ne(Xe,We,S.transform,po),Jc=a.aC(Ze,er,E,M),$u=Ze.getProjectionData({overscaledTileID:Jt,applyGlobeMatrix:!oe,applyTerrainMatrix:!0}),_d=ft&&or.hasTextData(),xd=c.layout.get("icon-text-fit")!=="none"&&_d&&or.hasIconData();if(at){const Ja=S.style.map.terrain?(Ds,To)=>S.style.map.terrain.getElevation(Jt,Ds,To):null,ga=c.layout.get("text-rotation-alignment")==="map";lr(or,S,b,co,Wl,Xe,Y,ga,Jt.toUnwrapped(),Ze.width,Ze.height,Jc,Ja)}const Ah=b&&ft||xd,sl=at||Ah?Of:Xe?co:S.transform.clipSpaceToPixelsMatrix,yu=Ar&&c.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Qc;Qc=Ar?or.iconsInText?_s(nn.kind,ra,wt,Xe,at,Ah,S,sl,Yc,Jc,Li,uo,ir):Rs(nn.kind,ra,wt,Xe,at,Ah,S,sl,Yc,Jc,b,Li,0,ir):aa(nn.kind,ra,wt,Xe,at,Ah,S,sl,Yc,Jc,b,Li,ir);const $f={program:fi,buffers:Gr,uniformValues:Qc,projectionData:$u,atlasTexture:Ei,atlasTextureIcon:si,atlasInterpolation:_i,atlasInterpolationIcon:ji,isSDF:Ar,hasHalo:yu};if(dt&&or.canOverlap){Et=!0;const Ja=Gr.segments.get();for(const ga of Ja)Bt.push({segments:new a.aL([ga]),sortKey:ga.sortKey,state:$f,terrainData:ki})}else Bt.push({segments:Gr.segments,sortKey:0,state:$f,terrainData:ki})}Et&&Bt.sort(((Jt,er)=>Jt.sortKey-er.sortKey));for(const Jt of Bt){const er=Jt.state;if(ge.activeTexture.set(Me.TEXTURE0),er.atlasTexture.bind(er.atlasInterpolation,Me.CLAMP_TO_EDGE),er.atlasTextureIcon&&(ge.activeTexture.set(Me.TEXTURE1),er.atlasTextureIcon&&er.atlasTextureIcon.bind(er.atlasInterpolationIcon,Me.CLAMP_TO_EDGE)),er.isSDF){const or=er.uniformValues;er.hasHalo&&(or.u_is_halo=1,Uc(er.buffers,Jt.segments,c,S,er.program,Tt,re,ce,or,er.projectionData,Jt.terrainData)),or.u_is_halo=0}Uc(er.buffers,Jt.segments,c,S,er.program,Tt,re,ce,er.uniformValues,er.projectionData,Jt.terrainData)}}function Uc(S,s,c,y,b,E,M,j,V,Y,re){const ce=y.context;b.draw(ce,ce.gl.TRIANGLES,E,M,j,On.backCCW,V,re,Y,c.id,S.layoutVertexBuffer,S.indexBuffer,s,c.paint,y.transform.zoom,S.programConfigurations.get(c.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function bh(S,s,c,y,b){const E=S.context,M=E.gl,j=bn.disabled,V=new dn([M.ONE,M.ONE],a.be.transparent,[!0,!0,!0,!0]),Y=s.getBucket(c);if(!Y)return;const re=y.key;let ce=c.heatmapFbos.get(re);ce||(ce=Vc(E,s.tileSize,s.tileSize),c.heatmapFbos.set(re,ce)),E.bindFramebuffer.set(ce.framebuffer),E.viewport.set([0,0,s.tileSize,s.tileSize]),E.clear({color:a.be.transparent});const oe=Y.programConfigurations.get(c.id),ge=S.useProgram("heatmap",oe,!b),Me=S.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ze=S.style.map.terrain.getTerrainData(y);ge.draw(E,M.TRIANGLES,Sn.disabled,j,V,On.disabled,bs(s,S.transform.zoom,c.paint.get("heatmap-intensity"),1),Ze,Me,c.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,c.paint,S.transform.zoom,oe)}function _h(S,s,c,y,b){const E=S.context,M=E.gl,j=S.transform;E.setColorMode(S.colorModeForRenderPass());const V=xh(E,s),Y=c.key,re=s.heatmapFbos.get(Y);if(!re)return;E.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,re.colorAttachment.get()),E.activeTexture.set(M.TEXTURE1),V.bind(M.LINEAR,M.CLAMP_TO_EDGE);const ce=j.getProjectionData({overscaledTileID:c,applyTerrainMatrix:b,applyGlobeMatrix:!y});S.useProgram("heatmapTexture").draw(E,M.TRIANGLES,Sn.disabled,bn.disabled,S.colorModeForRenderPass(),On.disabled,Ea(S,s,0,1),null,ce,s.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments,s.paint,j.zoom),re.destroy(),s.heatmapFbos.delete(Y)}function Vc(S,s,c){var y,b;const E=S.gl,M=E.createTexture();E.bindTexture(E.TEXTURE_2D,M),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR);const j=(y=S.HALF_FLOAT)!==null&&y!==void 0?y:E.UNSIGNED_BYTE,V=(b=S.RGBA16F)!==null&&b!==void 0?b:E.RGBA;E.texImage2D(E.TEXTURE_2D,0,V,s,c,0,E.RGBA,j,null);const Y=S.createFramebuffer(s,c,!1,!1);return Y.colorAttachment.set(M),Y}function xh(S,s){return s.colorRampTexture||(s.colorRampTexture=new a.T(S,s.colorRamp,S.gl.RGBA)),s.colorRampTexture}function yd(S,s,c,y,b){if(!c||!y||!y.imageAtlas)return;const E=y.imageAtlas.patternPositions;let M=E[c.to.toString()],j=E[c.from.toString()];if(!M&&j&&(M=j),!j&&M&&(j=M),!M||!j){const V=b.getPaintProperty(s);M=E[V],j=E[V]}M&&j&&S.setConstantPatternPositions(M,j)}function Lf(S,s,c,y,b,E,M,j){const V=S.context.gl,Y="fill-pattern",re=c.paint.get(Y),ce=re&&re.constantOr(1),oe=c.getCrossfadeParameters();let ge,Me,Ze,We,Xe;const at=S.transform,wt=c.paint.get("fill-translate"),dt=c.paint.get("fill-translate-anchor");M?(Me=ce&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ge=V.LINES):(Me=ce?"fillPattern":"fill",ge=V.TRIANGLES);const Et=re.constantOr(null);for(const Tt of y){const ft=s.getTile(Tt);if(ce&&!ft.patternsLoaded())continue;const Bt=ft.getBucket(c);if(!Bt)continue;const ir=Bt.programConfigurations.get(c.id),Jt=S.useProgram(Me,ir),er=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Tt);ce&&(S.context.activeTexture.set(V.TEXTURE0),ft.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),ir.updatePaintBuffers(oe)),yd(ir,Y,Et,ft,c);const or=at.getProjectionData({overscaledTileID:Tt,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Gr=a.aC(at,ft,wt,dt);if(M){We=Bt.indexBuffer2,Xe=Bt.segments2;const Ar=[V.drawingBufferWidth,V.drawingBufferHeight];Ze=Me==="fillOutlinePattern"&&ce?vs(S,oe,ft,Ar,Gr):Gi(Ar,Gr)}else We=Bt.indexBuffer,Xe=Bt.segments,Ze=ce?Za(S,oe,ft,Gr):{u_fill_translate:Gr};const Ur=S.stencilModeForClipping(Tt);Jt.draw(S.context,ge,b,Ur,E,On.backCCW,Ze,er,or,c.id,Bt.layoutVertexBuffer,We,Xe,c.paint,S.transform.zoom,ir)}}function Gc(S,s,c,y,b,E,M,j){const V=S.context,Y=V.gl,re="fill-extrusion-pattern",ce=c.paint.get(re),oe=ce.constantOr(1),ge=c.getCrossfadeParameters(),Me=c.paint.get("fill-extrusion-opacity"),Ze=ce.constantOr(null),We=S.transform;for(const Xe of y){const at=s.getTile(Xe),wt=at.getBucket(c);if(!wt)continue;const dt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Xe),Et=wt.programConfigurations.get(c.id),Tt=S.useProgram(oe?"fillExtrusionPattern":"fillExtrusion",Et);oe&&(S.context.activeTexture.set(Y.TEXTURE0),at.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Et.updatePaintBuffers(ge));const ft=We.getProjectionData({overscaledTileID:Xe,applyGlobeMatrix:!j,applyTerrainMatrix:!0});yd(Et,re,Ze,at,c);const Bt=a.aC(We,at,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ir=c.paint.get("fill-extrusion-vertical-gradient"),Jt=oe?pa(S,ir,Me,Bt,Xe,ge,at):as(S,ir,Me,Bt);Tt.draw(V,V.gl.TRIANGLES,b,E,M,On.backCCW,Jt,dt,ft,c.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,c.paint,S.transform.zoom,Et,S.style.map.terrain&&wt.centroidVertexBuffer)}}function Hc(S,s,c,y,b,E,M,j,V){var Y;const re=S.style.projection,ce=S.context,oe=S.transform,ge=ce.gl,Me=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],Ze=S.useProgram("hillshade",null,!1,Me),We=!S.options.moving;for(const Xe of y){const at=s.getTile(Xe),wt=at.fbo;if(!wt)continue;const dt=re.getMeshFromTileID(ce,Xe.canonical,j,!0,"raster"),Et=(Y=S.style.map.terrain)===null||Y===void 0?void 0:Y.getTerrainData(Xe);ce.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,wt.colorAttachment.get());const Tt=oe.getProjectionData({overscaledTileID:Xe,aligned:We,applyGlobeMatrix:!V,applyTerrainMatrix:!0});Ze.draw(ce,ge.TRIANGLES,E,b[Xe.overscaledZ],M,On.backCCW,Ka(S,at,c),Et,Tt,c.id,dt.vertexBuffer,dt.indexBuffer,dt.segments)}}function fc(S,s,c,y,b,E,M,j,V){var Y;const re=S.style.projection,ce=S.context,oe=S.transform,ge=ce.gl,Me=S.useProgram("colorRelief"),Ze=!S.options.moving;let We=!0;for(const Xe of y){const at=s.getTile(Xe),wt=at.dem;if(We){const ir=ge.getParameter(ge.MAX_TEXTURE_SIZE),{elevationTexture:Jt,colorTexture:er}=c.getColorRampTextures(ce,ir,wt.getUnpackVector());ce.activeTexture.set(ge.TEXTURE1),Jt.bind(ge.NEAREST,ge.CLAMP_TO_EDGE),ce.activeTexture.set(ge.TEXTURE4),er.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),We=!1}if(!wt||!wt.data)continue;const dt=wt.stride,Et=wt.getPixels();if(ce.activeTexture.set(ge.TEXTURE0),ce.pixelStoreUnpackPremultiplyAlpha.set(!1),at.demTexture=at.demTexture||S.getTileTexture(dt),at.demTexture){const ir=at.demTexture;ir.update(Et,{premultiply:!1}),ir.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)}else at.demTexture=new a.T(ce,Et,ge.RGBA,{premultiply:!1}),at.demTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE);const Tt=re.getMeshFromTileID(ce,Xe.canonical,j,!0,"raster"),ft=(Y=S.style.map.terrain)===null||Y===void 0?void 0:Y.getTerrainData(Xe),Bt=oe.getProjectionData({overscaledTileID:Xe,aligned:Ze,applyGlobeMatrix:!V,applyTerrainMatrix:!0});Me.draw(ce,ge.TRIANGLES,E,b[Xe.overscaledZ],M,On.backCCW,_l(c,at.dem),ft,Bt,c.id,Tt.vertexBuffer,Tt.indexBuffer,Tt.segments)}}const Df=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function nl(S,s,c,y,b,E,M,j,V=!1,Y=!1){const re=y[y.length-1].overscaledZ,ce=S.context,oe=ce.gl,ge=S.useProgram("raster"),Me=S.transform,Ze=S.style.projection,We=S.colorModeForRenderPass(),Xe=!S.options.moving;for(const at of y){const wt=S.getDepthModeForSublayer(at.overscaledZ-re,c.paint.get("raster-opacity")===1?Sn.ReadWrite:Sn.ReadOnly,oe.LESS),dt=s.getTile(at);dt.registerFadeDuration(c.paint.get("raster-fade-duration"));const Et=s.findLoadedParent(at,0),Tt=s.findLoadedSibling(at),ft=ry(dt,Et||Tt||null,s,c,S.transform,S.style.map.terrain);let Bt,ir;const Jt=c.paint.get("raster-resampling")==="nearest"?oe.NEAREST:oe.LINEAR;ce.activeTexture.set(oe.TEXTURE0),dt.texture.bind(Jt,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),ce.activeTexture.set(oe.TEXTURE1),Et?(Et.texture.bind(Jt,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),Bt=Math.pow(2,Et.tileID.overscaledZ-dt.tileID.overscaledZ),ir=[dt.tileID.canonical.x*Bt%1,dt.tileID.canonical.y*Bt%1]):dt.texture.bind(Jt,oe.CLAMP_TO_EDGE,oe.LINEAR_MIPMAP_NEAREST),dt.texture.useMipmap&&ce.extTextureFilterAnisotropic&&S.transform.pitch>20&&oe.texParameterf(oe.TEXTURE_2D,ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ce.extTextureFilterAnisotropicMax);const er=S.style.map.terrain&&S.style.map.terrain.getTerrainData(at),or=Me.getProjectionData({overscaledTileID:at,aligned:Xe,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Gr=no(ir||[0,0],Bt||1,ft,c,j),Ur=Ze.getMeshFromTileID(ce,at.canonical,E,M,"raster");ge.draw(ce,oe.TRIANGLES,wt,b?b[at.overscaledZ]:bn.disabled,We,V?On.frontCCW:On.backCCW,Gr,er,or,c.id,Ur.vertexBuffer,Ur.indexBuffer,Ur.segments)}}function ry(S,s,c,y,b,E){const M=y.paint.get("raster-fade-duration");if(!E&&M>0){const j=w.now(),V=(j-S.timeAdded)/M,Y=s?(j-s.timeAdded)/M:-1,re=c.getSource(),ce=Kt(b,{tileSize:re.tileSize,roundZoom:re.roundZoom}),oe=!s||Math.abs(s.tileID.overscaledZ-ce)>Math.abs(S.tileID.overscaledZ-ce),ge=oe&&S.refreshedUponExpiration?1:a.ag(oe?V:1-Y,0,1);return S.refreshedUponExpiration&&V>=1&&(S.refreshedUponExpiration=!1),s?{opacity:1,mix:1-ge}:{opacity:ge,mix:0}}return{opacity:1,mix:0}}const Fp=new a.be(1,0,0,1),Nf=new a.be(0,1,0,1),vd=new a.be(0,0,1,1),Bp=new a.be(1,0,1,1),jp=new a.be(0,1,1,1);function Ff(S,s,c,y){Ss(S,0,s+c/2,S.transform.width,c,y)}function El(S,s,c,y){Ss(S,s-c/2,0,c,S.transform.height,y)}function Ss(S,s,c,y,b,E){const M=S.context,j=M.gl;j.enable(j.SCISSOR_TEST),j.scissor(s*S.pixelRatio,c*S.pixelRatio,y*S.pixelRatio,b*S.pixelRatio),M.clear({color:E}),j.disable(j.SCISSOR_TEST)}function Gl(S,s,c){const y=S.context,b=y.gl,E=S.useProgram("debug"),M=Sn.disabled,j=bn.disabled,V=S.colorModeForRenderPass(),Y="$debug",re=S.style.map.terrain&&S.style.map.terrain.getTerrainData(c);y.activeTexture.set(b.TEXTURE0);const ce=s.getTileByID(c.key).latestRawTileData,oe=Math.floor((ce&&ce.byteLength||0)/1024),ge=s.getTile(c).tileSize,Me=512/Math.min(ge,512)*(c.overscaledZ/S.transform.zoom)*.5;let Ze=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(Ze+=` => ${c.overscaledZ}`),(function(Xe,at){Xe.initDebugOverlayCanvas();const wt=Xe.debugOverlayCanvas,dt=Xe.context.gl,Et=Xe.debugOverlayCanvas.getContext("2d");Et.clearRect(0,0,wt.width,wt.height),Et.shadowColor="white",Et.shadowBlur=2,Et.lineWidth=1.5,Et.strokeStyle="white",Et.textBaseline="top",Et.font="bold 36px Open Sans, sans-serif",Et.fillText(at,5,5),Et.strokeText(at,5,5),Xe.debugOverlayTexture.update(wt),Xe.debugOverlayTexture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE)})(S,`${Ze} ${oe}kB`);const We=S.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(y,b.TRIANGLES,M,j,dn.alphaBlended,On.disabled,Ys(a.be.transparent,Me),null,We,Y,S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments),E.draw(y,b.LINE_STRIP,M,j,V,On.disabled,Ys(a.be.red),re,We,Y,S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments)}function Ca(S,s,c,y){const{isRenderingGlobe:b}=y,E=S.context,M=E.gl,j=S.transform,V=S.colorModeForRenderPass(),Y=S.getDepthModeFor3D(),re=S.useProgram("terrain");E.bindFramebuffer.set(null),E.viewport.set([0,0,S.width,S.height]);for(const ce of c){const oe=s.getTerrainMesh(ce.tileID),ge=S.renderToTexture.getTexture(ce),Me=s.getTerrainData(ce.tileID);E.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,ge.texture);const Ze=s.getMeshFrameDelta(j.zoom),We=j.calculateFogMatrix(ce.tileID.toUnwrapped()),Xe=$c(Ze,We,S.style.sky,j.pitch,b),at=j.getProjectionData({overscaledTileID:ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});re.draw(E,M.TRIANGLES,Y,bn.disabled,V,On.backCCW,Xe,Me,at,"terrain",oe.vertexBuffer,oe.indexBuffer,oe.segments)}}function pu(S,s){if(!s.mesh){const c=new a.aK;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const y=new a.aM;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),s.mesh=new $t(S.createVertexBuffer(c,Ir.members),S.createIndexBuffer(y),a.aL.simpleSegment(0,0,c.length,y.length))}return s.mesh}class ao{constructor(s,c){this.context=new zn(s),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Gt.maxUnderzooming+Gt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Oe}resize(s,c,y){if(this.width=Math.floor(s*y),this.height=Math.floor(c*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const s=this.context,c=new a.aK;c.emplaceBack(0,0),c.emplaceBack(a.$,0),c.emplaceBack(0,a.$),c.emplaceBack(a.$,a.$),this.tileExtentBuffer=s.createVertexBuffer(c,Ir.members),this.tileExtentSegments=a.aL.simpleSegment(0,0,4,2);const y=new a.aK;y.emplaceBack(0,0),y.emplaceBack(a.$,0),y.emplaceBack(0,a.$),y.emplaceBack(a.$,a.$),this.debugBuffer=s.createVertexBuffer(y,Ir.members),this.debugSegments=a.aL.simpleSegment(0,0,4,5);const b=new a.c5;b.emplaceBack(0,0,0,0),b.emplaceBack(a.$,0,a.$,0),b.emplaceBack(0,a.$,0,a.$),b.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=s.createVertexBuffer(b,Ks.members),this.rasterBoundsSegments=a.aL.simpleSegment(0,0,4,2);const E=new a.aK;E.emplaceBack(0,0),E.emplaceBack(a.$,0),E.emplaceBack(0,a.$),E.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(E,Ir.members),this.rasterBoundsSegmentsPosOnly=a.aL.simpleSegment(0,0,4,5);const M=new a.aK;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(M,Ir.members),this.viewportSegments=a.aL.simpleSegment(0,0,4,2);const j=new a.c6;j.emplaceBack(0),j.emplaceBack(1),j.emplaceBack(3),j.emplaceBack(2),j.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(j);const V=new a.aM;V.emplaceBack(1,0,2),V.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(V);const Y=this.context.gl;this.stencilClearMode=new bn({func:Y.ALWAYS,mask:0},0,255,Y.ZERO,Y.ZERO,Y.ZERO),this.tileExtentMesh=new $t(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const s=this.context,c=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=a.L();a.bX(y,0,this.width,this.height,0,0,1),a.N(y,y,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const b={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(s,c.TRIANGLES,Sn.disabled,this.stencilClearMode,dn.disabled,On.disabled,null,null,b,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,c,y){if(this.currentStencilSource===s.source||!s.isTileClipped()||!c||!c.length)return;this.currentStencilSource=s.source,this.nextStencilID+c.length>256&&this.clearStencil();const b=this.context;b.setColorMode(dn.disabled),b.setDepthMode(Sn.disabled);const E={};for(const M of c)E[M.key]=this.nextStencilID++;this._renderTileMasks(E,c,y,!0),this._renderTileMasks(E,c,y,!1),this._tileClippingMaskIDs=E}_renderTileMasks(s,c,y,b){const E=this.context,M=E.gl,j=this.style.projection,V=this.transform,Y=this.useProgram("clippingMask");for(const re of c){const ce=s[re.key],oe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(re),ge=j.getMeshFromTileID(this.context,re.canonical,b,!0,"stencil"),Me=V.getProjectionData({overscaledTileID:re,applyGlobeMatrix:!y,applyTerrainMatrix:!0});Y.draw(E,M.TRIANGLES,Sn.disabled,new bn({func:M.ALWAYS,mask:0},ce,255,M.KEEP,M.KEEP,M.REPLACE),dn.disabled,y?On.disabled:On.backCCW,null,oe,Me,"$clipping",ge.vertexBuffer,ge.indexBuffer,ge.segments)}}_renderTilesDepthBuffer(){const s=this.context,c=s.gl,y=this.style.projection,b=this.transform,E=this.useProgram("depth"),M=this.getDepthModeFor3D(),j=zt(b,{tileSize:b.tileSize});for(const V of j){const Y=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),re=y.getMeshFromTileID(this.context,V.canonical,!0,!0,"raster"),ce=b.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(s,c.TRIANGLES,M,bn.disabled,dn.disabled,On.backCCW,null,Y,ce,"$clipping",re.vertexBuffer,re.indexBuffer,re.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,c=this.context.gl;return new bn({func:c.NOTEQUAL,mask:255},s,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(s){const c=this.context.gl;return new bn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){const c=this.context.gl,y=s.sort(((M,j)=>j.overscaledZ-M.overscaledZ)),b=y[y.length-1].overscaledZ,E=y[0].overscaledZ-b+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const M={};for(let j=0;j<E;j++)M[j+b]=new bn({func:c.GEQUAL,mask:255},j+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=E,[M,y]}return[{[b]:bn.disabled},y]}stencilConfigForOverlapTwoPass(s){const c=this.context.gl,y=s.sort(((M,j)=>j.overscaledZ-M.overscaledZ)),b=y[y.length-1].overscaledZ,E=y[0].overscaledZ-b+1;if(this.clearStencil(),E>1){const M={},j={};for(let V=0;V<E;V++)M[V+b]=new bn({func:c.GREATER,mask:255},E+1+V,255,c.KEEP,c.KEEP,c.REPLACE),j[V+b]=new bn({func:c.GREATER,mask:255},1+V,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*E+1,[M,j,y]}return this.nextStencilID=3,[{[b]:new bn({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[b]:new bn({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},y]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new dn([s.CONSTANT_COLOR,s.ONE],new a.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?dn.unblended:dn.alphaBlended}getDepthModeForSublayer(s,c,y){if(!this.opaquePassEnabledForLayer())return Sn.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new Sn(y||this.context.gl.LEQUAL,c,[b,b])}getDepthModeFor3D(){return new Sn(this.context.gl.LEQUAL,Sn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,c){var y,b;this.style=s,this.options=c,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(w.now()),this.imageManager.beginFrame();const E=this.style._order,M=this.style.sourceCaches,j={},V={},Y={},re={isRenderingToTexture:!1,isRenderingGlobe:((y=s.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const oe in M){const ge=M[oe];ge.used&&ge.prepare(this.context),j[oe]=ge.getVisibleCoordinates(!1),V[oe]=j[oe].slice().reverse(),Y[oe]=ge.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let oe=0;oe<E.length;oe++)if(this.style._layers[E[oe]].is3D()){this.opaquePassCutoff=oe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const oe of E){const ge=this.style._layers[oe];if(!ge.hasOffscreenPass()||ge.isHidden(this.transform.zoom))continue;const Me=V[ge.source];(ge.type==="custom"||Me.length)&&this.renderLayer(this,M[ge.source],ge,Me,re)}if((b=this.style.projection)===null||b===void 0||b.updateGPUdependent({context:this.context,useProgram:oe=>this.useProgram(oe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?a.be.black:a.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(oe,ge){const Me=oe.context,Ze=Me.gl,We=((Tt,ft,Bt)=>{const ir=Math.cos(ft.rollInRadians),Jt=Math.sin(ft.rollInRadians),er=xe(ft),or=ft.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Tt.properties.get("sky-color"),u_horizon_color:Tt.properties.get("horizon-color"),u_horizon:[(ft.width/2-er*Jt)*Bt,(ft.height/2+er*ir)*Bt],u_horizon_normal:[-Jt,ir],u_sky_horizon_blend:Tt.properties.get("sky-horizon-blend")*ft.height/2*Bt,u_sky_blend:or}})(ge,oe.style.map.transform,oe.pixelRatio),Xe=new Sn(Ze.LEQUAL,Sn.ReadWrite,[0,1]),at=bn.disabled,wt=oe.colorModeForRenderPass(),dt=oe.useProgram("sky"),Et=pu(Me,ge);dt.draw(Me,Ze.TRIANGLES,Xe,at,wt,On.disabled,We,null,void 0,"sky",Et.vertexBuffer,Et.indexBuffer,Et.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=E.length-1;this.currentLayer>=0;this.currentLayer--){const oe=this.style._layers[E[this.currentLayer]],ge=M[oe.source],Me=j[oe.source];this._renderTileClippingMasks(oe,Me,!1),this.renderLayer(this,ge,oe,Me,re)}this.renderPass="translucent";let ce=!1;for(this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){const oe=this.style._layers[E[this.currentLayer]],ge=M[oe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(oe,re))continue;this.opaquePassEnabledForLayer()||ce||(ce=!0,re.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Me=(oe.type==="symbol"?Y:V)[oe.source];this._renderTileClippingMasks(oe,j[oe.source],!!this.renderToTexture),this.renderLayer(this,ge,oe,Me,re)}if(re.isRenderingGlobe&&(function(oe,ge,Me){const Ze=oe.context,We=Ze.gl,Xe=oe.useProgram("atmosphere"),at=new Sn(We.LEQUAL,Sn.ReadOnly,[0,1]),wt=oe.transform,dt=(function(or,Gr){const Ur=or.properties.get("position"),Ar=[-Ur.x,-Ur.y,-Ur.z],nn=a.af(new Float64Array(16));return or.properties.get("anchor")==="map"&&(a.b5(nn,nn,Gr.rollInRadians),a.b6(nn,nn,-Gr.pitchInRadians),a.b5(nn,nn,Gr.bearingInRadians),a.b6(nn,nn,Gr.center.lat*Math.PI/180),a.by(nn,nn,-Gr.center.lng*Math.PI/180)),a.c4(Ar,Ar,nn),Ar})(Me,oe.transform),Et=wt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Tt=ge.properties.get("atmosphere-blend")*Et.projectionTransition;if(Tt===0)return;const ft=Wa(wt.worldSize,wt.center.lat),Bt=wt.inverseProjectionMatrix,ir=new Float64Array(4);ir[3]=1,a.av(ir,ir,wt.modelViewProjectionMatrix),ir[0]/=ir[3],ir[1]/=ir[3],ir[2]/=ir[3],ir[3]=1,a.av(ir,ir,Bt),ir[0]/=ir[3],ir[1]/=ir[3],ir[2]/=ir[3],ir[3]=1;const Jt=((or,Gr,Ur,Ar,nn)=>({u_sun_pos:or,u_atmosphere_blend:Gr,u_globe_position:Ur,u_globe_radius:Ar,u_inv_proj_matrix:nn}))(dt,Tt,[ir[0],ir[1],ir[2]],ft,Bt),er=pu(Ze,ge);Xe.draw(Ze,We.TRIANGLES,at,bn.disabled,dn.alphaBlended,On.disabled,Jt,null,null,"atmosphere",er.vertexBuffer,er.indexBuffer,er.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const oe=(function(ge,Me){let Ze=null;const We=Object.values(ge._layers).flatMap((dt=>dt.source&&!dt.isHidden(Me)?[ge.sourceCaches[dt.source]]:[])),Xe=We.filter((dt=>dt.getSource().type==="vector")),at=We.filter((dt=>dt.getSource().type!=="vector")),wt=dt=>{(!Ze||Ze.getSource().maxzoom<dt.getSource().maxzoom)&&(Ze=dt)};return Xe.forEach((dt=>wt(dt))),Ze||at.forEach((dt=>wt(dt))),Ze})(this.style,this.transform.zoom);oe&&(function(ge,Me,Ze){for(let We=0;We<Ze.length;We++)Gl(ge,Me,Ze[We])})(this,oe,oe.getVisibleCoordinates())}this.options.showPadding&&(function(oe){const ge=oe.transform.padding;Ff(oe,oe.transform.height-(ge.top||0),3,Fp),Ff(oe,ge.bottom||0,3,Nf),El(oe,ge.left||0,3,vd),El(oe,oe.transform.width-(ge.right||0),3,Bp);const Me=oe.transform.centerPoint;(function(Ze,We,Xe,at){Ss(Ze,We-1,Xe-10,2,20,at),Ss(Ze,We-10,Xe-1,20,2,at)})(oe,Me.x,oe.transform.height-Me.y,jp)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let b=this.terrainFacilitator.dirty;b||(b=s?!a.c7(c,y):!a.c8(c,y)),b||(b=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),b&&(a.c9(c,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(E,M){const j=E.context,V=j.gl,Y=E.transform,re=dn.unblended,ce=new Sn(V.LEQUAL,Sn.ReadWrite,[0,1]),oe=M.sourceCache.getRenderableTiles(),ge=E.useProgram("terrainDepth");j.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),j.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),j.clear({color:a.be.transparent,depth:1});for(const Me of oe){const Ze=M.getTerrainMesh(Me.tileID),We=M.getTerrainData(Me.tileID),Xe=Y.getProjectionData({overscaledTileID:Me.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),at={u_ele_delta:M.getMeshFrameDelta(Y.zoom)};ge.draw(j,V.TRIANGLES,ce,bn.disabled,re,On.backCCW,at,We,Xe,"terrain",Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}j.bindFramebuffer.set(null),j.viewport.set([0,0,E.width,E.height])})(this,this.style.map.terrain),(function(E,M){const j=E.context,V=j.gl,Y=E.transform,re=dn.unblended,ce=new Sn(V.LEQUAL,Sn.ReadWrite,[0,1]),oe=M.getCoordsTexture(),ge=M.sourceCache.getRenderableTiles(),Me=E.useProgram("terrainCoords");j.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),j.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),j.clear({color:a.be.transparent,depth:1}),M.coordsIndex=[];for(const Ze of ge){const We=M.getTerrainMesh(Ze.tileID),Xe=M.getTerrainData(Ze.tileID);j.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,oe.texture);const at={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(Y.zoom)},wt=Y.getProjectionData({overscaledTileID:Ze.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Me.draw(j,V.TRIANGLES,ce,bn.disabled,re,On.backCCW,at,Xe,wt,"terrain",We.vertexBuffer,We.indexBuffer,We.segments),M.coordsIndex.push(Ze.tileID.key)}j.bindFramebuffer.set(null),j.viewport.set([0,0,E.width,E.height])})(this,this.style.map.terrain))}renderLayer(s,c,y,b,E){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(b||[]).length)&&(this.id=y.id,a.ca(y)?(function(M,j,V,Y,re,ce){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:oe}=ce,ge=bn.disabled,Me=M.colorModeForRenderPass();(V._unevaluatedLayout.hasValue("text-variable-anchor")||V._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Ze,We,Xe,at,wt,dt,Et,Tt,ft){const Bt=We.transform,ir=We.style.map.terrain,Jt=wt==="map",er=dt==="map";for(const or of Ze){const Gr=at.getTile(or),Ur=Gr.getBucket(Xe);if(!Ur||!Ur.text||!Ur.text.segments.get().length)continue;const Ar=a.am(Ur.textSizeData,Bt.zoom),nn=a.aB(Gr,1,We.transform.zoom),Zn=jt(Jt,We.transform,nn),fi=Xe.layout.get("icon-text-fit")!=="none"&&Ur.hasIconData();if(Ar){const ra=Math.pow(2,Bt.zoom-Gr.tileID.overscaledZ),ki=ir?(Li,Ei)=>ir.getElevation(or,Li,Ei):null;gd(Ur,Jt,er,ft,Bt,Zn,ra,Ar,fi,a.aC(Bt,Gr,Et,Tt),or.toUnwrapped(),ki)}}})(Y,M,V,j,V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),re),V.paint.get("icon-opacity").constantOr(1)!==0&&kf(M,j,V,Y,!1,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),V.layout.get("icon-rotation-alignment"),V.layout.get("icon-pitch-alignment"),V.layout.get("icon-keep-upright"),ge,Me,oe),V.paint.get("text-opacity").constantOr(1)!==0&&kf(M,j,V,Y,!0,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.layout.get("text-keep-upright"),ge,Me,oe),j.map.showCollisionBoxes&&(Vl(M,j,V,Y,!0),Vl(M,j,V,Y,!1))})(s,c,y,b,this.style.placement.variableOffsets,E):a.cb(y)?(function(M,j,V,Y,re){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:ce}=re,oe=V.paint.get("circle-opacity"),ge=V.paint.get("circle-stroke-width"),Me=V.paint.get("circle-stroke-opacity"),Ze=!V.layout.get("circle-sort-key").isConstant();if(oe.constantOr(1)===0&&(ge.constantOr(1)===0||Me.constantOr(1)===0))return;const We=M.context,Xe=We.gl,at=M.transform,wt=M.getDepthModeForSublayer(0,Sn.ReadOnly),dt=bn.disabled,Et=M.colorModeForRenderPass(),Tt=[],ft=at.getCircleRadiusCorrection();for(let Bt=0;Bt<Y.length;Bt++){const ir=Y[Bt],Jt=j.getTile(ir),er=Jt.getBucket(V);if(!er)continue;const or=V.paint.get("circle-translate"),Gr=V.paint.get("circle-translate-anchor"),Ur=a.aC(at,Jt,or,Gr),Ar=er.programConfigurations.get(V.id),nn=M.useProgram("circle",Ar),Zn=er.layoutVertexBuffer,fi=er.indexBuffer,ra=M.style.map.terrain&&M.style.map.terrain.getTerrainData(ir),ki={programConfiguration:Ar,program:nn,layoutVertexBuffer:Zn,indexBuffer:fi,uniformValues:Xs(M,Jt,V,Ur,ft),terrainData:ra,projectionData:at.getProjectionData({overscaledTileID:ir,applyGlobeMatrix:!ce,applyTerrainMatrix:!0})};if(Ze){const Li=er.segments.get();for(const Ei of Li)Tt.push({segments:new a.aL([Ei]),sortKey:Ei.sortKey,state:ki})}else Tt.push({segments:er.segments,sortKey:0,state:ki})}Ze&&Tt.sort(((Bt,ir)=>Bt.sortKey-ir.sortKey));for(const Bt of Tt){const{programConfiguration:ir,program:Jt,layoutVertexBuffer:er,indexBuffer:or,uniformValues:Gr,terrainData:Ur,projectionData:Ar}=Bt.state;Jt.draw(We,Xe.TRIANGLES,wt,dt,Et,On.backCCW,Gr,Ur,Ar,V.id,er,or,Bt.segments,V.paint,M.transform.zoom,ir)}})(s,c,y,b,E):a.cc(y)?(function(M,j,V,Y,re){if(V.paint.get("heatmap-opacity")===0)return;const ce=M.context,{isRenderingToTexture:oe,isRenderingGlobe:ge}=re;if(M.style.map.terrain){for(const Me of Y){const Ze=j.getTile(Me);j.hasRenderableParent(Me)||(M.renderPass==="offscreen"?bh(M,Ze,V,Me,ge):M.renderPass==="translucent"&&_h(M,V,Me,oe,ge))}ce.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?(function(Me,Ze,We,Xe){const at=Me.context,wt=at.gl,dt=Me.transform,Et=bn.disabled,Tt=new dn([wt.ONE,wt.ONE],a.be.transparent,[!0,!0,!0,!0]);(function(ft,Bt,ir){const Jt=ft.gl;ft.activeTexture.set(Jt.TEXTURE1),ft.viewport.set([0,0,Bt.width/4,Bt.height/4]);let er=ir.heatmapFbos.get(a.c1);er?(Jt.bindTexture(Jt.TEXTURE_2D,er.colorAttachment.get()),ft.bindFramebuffer.set(er.framebuffer)):(er=Vc(ft,Bt.width/4,Bt.height/4),ir.heatmapFbos.set(a.c1,er))})(at,Me,We),at.clear({color:a.be.transparent});for(let ft=0;ft<Xe.length;ft++){const Bt=Xe[ft];if(Ze.hasRenderableParent(Bt))continue;const ir=Ze.getTile(Bt),Jt=ir.getBucket(We);if(!Jt)continue;const er=Jt.programConfigurations.get(We.id),or=Me.useProgram("heatmap",er),Gr=dt.getProjectionData({overscaledTileID:Bt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ur=dt.getCircleRadiusCorrection();or.draw(at,wt.TRIANGLES,Sn.disabled,Et,Tt,On.backCCW,bs(ir,dt.zoom,We.paint.get("heatmap-intensity"),Ur),null,Gr,We.id,Jt.layoutVertexBuffer,Jt.indexBuffer,Jt.segments,We.paint,dt.zoom,er)}at.viewport.set([0,0,Me.width,Me.height])})(M,j,V,Y):M.renderPass==="translucent"&&(function(Me,Ze){const We=Me.context,Xe=We.gl;We.setColorMode(Me.colorModeForRenderPass());const at=Ze.heatmapFbos.get(a.c1);at&&(We.activeTexture.set(Xe.TEXTURE0),Xe.bindTexture(Xe.TEXTURE_2D,at.colorAttachment.get()),We.activeTexture.set(Xe.TEXTURE1),xh(We,Ze).bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE),Me.useProgram("heatmapTexture").draw(We,Xe.TRIANGLES,Sn.disabled,bn.disabled,Me.colorModeForRenderPass(),On.disabled,Ea(Me,Ze,0,1),null,null,Ze.id,Me.viewportBuffer,Me.quadTriangleIndexBuffer,Me.viewportSegments,Ze.paint,Me.transform.zoom))})(M,V)})(s,c,y,b,E):a.cd(y)?(function(M,j,V,Y,re){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:ce}=re,oe=V.paint.get("line-opacity"),ge=V.paint.get("line-width");if(oe.constantOr(1)===0||ge.constantOr(1)===0)return;const Me=M.getDepthModeForSublayer(0,Sn.ReadOnly),Ze=M.colorModeForRenderPass(),We=V.paint.get("line-dasharray"),Xe=V.paint.get("line-pattern"),at=Xe.constantOr(1),wt=V.paint.get("line-gradient"),dt=V.getCrossfadeParameters(),Et=at?"linePattern":We?"lineSDF":wt?"lineGradient":"line",Tt=M.context,ft=Tt.gl,Bt=M.transform;let ir=!0;for(const Jt of Y){const er=j.getTile(Jt);if(at&&!er.patternsLoaded())continue;const or=er.getBucket(V);if(!or)continue;const Gr=or.programConfigurations.get(V.id),Ur=M.context.program.get(),Ar=M.useProgram(Et,Gr),nn=ir||Ar.program!==Ur,Zn=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Jt),fi=Xe.constantOr(null);if(fi&&er.imageAtlas){const _i=er.imageAtlas,ji=_i.patternPositions[fi.to.toString()],uo=_i.patternPositions[fi.from.toString()];ji&&uo&&Gr.setConstantPatternPositions(ji,uo)}const ra=Bt.getProjectionData({overscaledTileID:Jt,applyGlobeMatrix:!ce,applyTerrainMatrix:!0}),ki=Bt.getPixelScale(),Li=at?Ia(M,er,V,ki,dt):We?Bl(M,er,V,ki,We,dt):wt?Fa(M,er,V,ki,or.lineClipsArray.length):Js(M,er,V,ki);if(at)Tt.activeTexture.set(ft.TEXTURE0),er.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Gr.updatePaintBuffers(dt);else if(We&&(nn||M.lineAtlas.dirty))Tt.activeTexture.set(ft.TEXTURE0),M.lineAtlas.bind(Tt);else if(wt){const _i=or.gradients[V.id];let ji=_i.texture;if(V.gradientVersion!==_i.version){let uo=256;if(V.stepInterpolant){const si=j.getSource().maxzoom,po=Jt.canonical.z===si?Math.ceil(1<<M.transform.maxZoom-Jt.canonical.z):1;uo=a.ag(a.c2(or.maxLineLength/a.$*1024*po),256,Tt.maxTextureSize)}_i.gradient=a.c3({expression:V.gradientExpression(),evaluationKey:"lineProgress",resolution:uo,image:_i.gradient||void 0,clips:or.lineClipsArray}),_i.texture?_i.texture.update(_i.gradient):_i.texture=new a.T(Tt,_i.gradient,ft.RGBA),_i.version=V.gradientVersion,ji=_i.texture}Tt.activeTexture.set(ft.TEXTURE0),ji.bind(V.stepInterpolant?ft.NEAREST:ft.LINEAR,ft.CLAMP_TO_EDGE)}const Ei=M.stencilModeForClipping(Jt);Ar.draw(Tt,ft.TRIANGLES,Me,Ei,Ze,On.disabled,Li,Zn,ra,V.id,or.layoutVertexBuffer,or.indexBuffer,or.segments,V.paint,M.transform.zoom,Gr,or.layoutVertexBuffer2),ir=!1}})(s,c,y,b,E):a.ce(y)?(function(M,j,V,Y,re){const ce=V.paint.get("fill-color"),oe=V.paint.get("fill-opacity");if(oe.constantOr(1)===0)return;const{isRenderingToTexture:ge}=re,Me=M.colorModeForRenderPass(),Ze=V.paint.get("fill-pattern"),We=M.opaquePassEnabledForLayer()&&!Ze.constantOr(1)&&ce.constantOr(a.be.transparent).a===1&&oe.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===We){const Xe=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?Sn.ReadWrite:Sn.ReadOnly);Lf(M,j,V,Y,Xe,Me,!1,ge)}if(M.renderPass==="translucent"&&V.paint.get("fill-antialias")){const Xe=M.getDepthModeForSublayer(V.getPaintProperty("fill-outline-color")?2:0,Sn.ReadOnly);Lf(M,j,V,Y,Xe,Me,!0,ge)}})(s,c,y,b,E):a.cf(y)?(function(M,j,V,Y,re){const ce=V.paint.get("fill-extrusion-opacity");if(ce===0)return;const{isRenderingToTexture:oe}=re;if(M.renderPass==="translucent"){const ge=new Sn(M.context.gl.LEQUAL,Sn.ReadWrite,M.depthRangeFor3D);if(ce!==1||V.paint.get("fill-extrusion-pattern").constantOr(1))Gc(M,j,V,Y,ge,bn.disabled,dn.disabled,oe),Gc(M,j,V,Y,ge,M.stencilModeFor3D(),M.colorModeForRenderPass(),oe);else{const Me=M.colorModeForRenderPass();Gc(M,j,V,Y,ge,bn.disabled,Me,oe)}}})(s,c,y,b,E):a.cg(y)?(function(M,j,V,Y,re){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const{isRenderingToTexture:ce}=re,oe=M.context,ge=M.style.projection.useSubdivision,Me=M.getDepthModeForSublayer(0,Sn.ReadOnly),Ze=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(We,Xe,at,wt,dt,Et,Tt){const ft=We.context,Bt=ft.gl;for(const ir of at){const Jt=Xe.getTile(ir),er=Jt.dem;if(!er||!er.data||!Jt.needsHillshadePrepare)continue;const or=er.dim,Gr=er.stride,Ur=er.getPixels();if(ft.activeTexture.set(Bt.TEXTURE1),ft.pixelStoreUnpackPremultiplyAlpha.set(!1),Jt.demTexture=Jt.demTexture||We.getTileTexture(Gr),Jt.demTexture){const nn=Jt.demTexture;nn.update(Ur,{premultiply:!1}),nn.bind(Bt.NEAREST,Bt.CLAMP_TO_EDGE)}else Jt.demTexture=new a.T(ft,Ur,Bt.RGBA,{premultiply:!1}),Jt.demTexture.bind(Bt.NEAREST,Bt.CLAMP_TO_EDGE);ft.activeTexture.set(Bt.TEXTURE0);let Ar=Jt.fbo;if(!Ar){const nn=new a.T(ft,{width:or,height:or,data:null},Bt.RGBA);nn.bind(Bt.LINEAR,Bt.CLAMP_TO_EDGE),Ar=Jt.fbo=ft.createFramebuffer(or,or,!0,!1),Ar.colorAttachment.set(nn.texture)}ft.bindFramebuffer.set(Ar.framebuffer),ft.viewport.set([0,0,or,or]),We.useProgram("hillshadePrepare").draw(ft,Bt.TRIANGLES,dt,Et,Tt,On.disabled,ac(Jt.tileID,er),null,null,wt.id,We.rasterBoundsBuffer,We.quadTriangleIndexBuffer,We.rasterBoundsSegments),Jt.needsHillshadePrepare=!1}})(M,j,Y,V,Me,bn.disabled,Ze),oe.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(ge){const[We,Xe,at]=M.stencilConfigForOverlapTwoPass(Y);Hc(M,j,V,at,We,Me,Ze,!1,ce),Hc(M,j,V,at,Xe,Me,Ze,!0,ce)}else{const[We,Xe]=M.getStencilConfigForOverlapAndUpdateStencilID(Y);Hc(M,j,V,Xe,We,Me,Ze,!1,ce)}})(s,c,y,b,E):a.ch(y)?(function(M,j,V,Y,re){if(M.renderPass!=="translucent"||!Y.length)return;const{isRenderingToTexture:ce}=re,oe=M.style.projection.useSubdivision,ge=M.getDepthModeForSublayer(0,Sn.ReadOnly),Me=M.colorModeForRenderPass();if(oe){const[Ze,We,Xe]=M.stencilConfigForOverlapTwoPass(Y);fc(M,j,V,Xe,Ze,ge,Me,!1,ce),fc(M,j,V,Xe,We,ge,Me,!0,ce)}else{const[Ze,We]=M.getStencilConfigForOverlapAndUpdateStencilID(Y);fc(M,j,V,We,Ze,ge,Me,!1,ce)}})(s,c,y,b,E):a.ci(y)?(function(M,j,V,Y,re){if(M.renderPass!=="translucent"||V.paint.get("raster-opacity")===0||!Y.length)return;const{isRenderingToTexture:ce}=re,oe=j.getSource(),ge=M.style.projection.useSubdivision;if(oe instanceof Qt)nl(M,j,V,Y,null,!1,!1,oe.tileCoords,oe.flippedWindingOrder,ce);else if(ge){const[Me,Ze,We]=M.stencilConfigForOverlapTwoPass(Y);nl(M,j,V,We,Me,!1,!0,Df,!1,ce),nl(M,j,V,We,Ze,!0,!0,Df,!1,ce)}else{const[Me,Ze]=M.getStencilConfigForOverlapAndUpdateStencilID(Y);nl(M,j,V,Ze,Me,!1,!0,Df,!1,ce)}})(s,c,y,b,E):a.cj(y)?(function(M,j,V,Y,re){const ce=V.paint.get("background-color"),oe=V.paint.get("background-opacity");if(oe===0)return;const{isRenderingToTexture:ge}=re,Me=M.context,Ze=Me.gl,We=M.style.projection,Xe=M.transform,at=Xe.tileSize,wt=V.paint.get("background-pattern");if(M.isPatternMissing(wt))return;const dt=!wt&&ce.a===1&&oe===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==dt)return;const Et=bn.disabled,Tt=M.getDepthModeForSublayer(0,dt==="opaque"?Sn.ReadWrite:Sn.ReadOnly),ft=M.colorModeForRenderPass(),Bt=M.useProgram(wt?"backgroundPattern":"background"),ir=Y||zt(Xe,{tileSize:at,terrain:M.style.map.terrain});wt&&(Me.activeTexture.set(Ze.TEXTURE0),M.imageManager.bind(M.context));const Jt=V.getCrossfadeParameters();for(const er of ir){const or=Xe.getProjectionData({overscaledTileID:er,applyGlobeMatrix:!ge,applyTerrainMatrix:!0}),Gr=wt?hu(oe,M,wt,{tileID:er,tileSize:at},Jt):qo(oe,ce),Ur=M.style.map.terrain&&M.style.map.terrain.getTerrainData(er),Ar=We.getMeshFromTileID(Me,er.canonical,!1,!0,"raster");Bt.draw(Me,Ze.TRIANGLES,Tt,Et,ft,On.backCCW,Gr,Ur,or,V.id,Ar.vertexBuffer,Ar.indexBuffer,Ar.segments)}})(s,0,y,b,E):a.ck(y)&&(function(M,j,V,Y){const{isRenderingGlobe:re}=Y,ce=M.context,oe=V.implementation,ge=M.style.projection,Me=M.transform,Ze=Me.getProjectionDataForCustomLayer(re),We={farZ:Me.farZ,nearZ:Me.nearZ,fov:Me.fov*Math.PI/180,modelViewProjectionMatrix:Me.modelViewProjectionMatrix,projectionMatrix:Me.projectionMatrix,shaderData:{variantName:ge.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ge.shaderPreludeCode.vertexSource}`,define:ge.shaderDefine},defaultProjectionData:Ze},Xe=oe.renderingMode?oe.renderingMode:"2d";if(M.renderPass==="offscreen"){const at=oe.prerender;at&&(M.setCustomLayerDefaults(),ce.setColorMode(M.colorModeForRenderPass()),at.call(oe,ce.gl,We),ce.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),ce.setColorMode(M.colorModeForRenderPass()),ce.setStencilMode(bn.disabled);const at=Xe==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,Sn.ReadOnly);ce.setDepthMode(at),oe.render(ce.gl,We),ce.setDirty(),M.setBaseState(),ce.bindFramebuffer.set(null)}})(s,0,y,E))}saveTileTexture(s){const c=this._tileTextures[s.size[0]];c?c.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const c=this._tileTextures[s];return c&&c.length>0?c.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const c=this.imageManager.getPattern(s.from.toString()),y=this.imageManager.getPattern(s.to.toString());return!c||!y}useProgram(s,c,y=!1,b=[]){this.cache=this.cache||{};const E=!!this.style.map.terrain,M=this.style.projection,j=y?At.projectionMercator:M.shaderPreludeCode,V=y?Br:M.shaderDefine,Y=s+(c?c.cacheKey:"")+`/${y?Xr:M.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(E?"/terrain":"")+(b?`/${b.join("/")}`:"");return this.cache[Y]||(this.cache[Y]=new Nl(this.context,At[s],c,Os[s],this._showOverdrawInspector,E,j,V,b)),this.cache[Y]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:c}=this.context.gl;return this.width!==s||this.height!==c}}function ls(S,s){let c,y=!1,b=null,E=null;const M=()=>{b=null,y&&(S.apply(E,c),b=setTimeout(M,s),y=!1)};return(...j)=>(y=!0,E=this,c=j,b||M(),b)}class Bf{constructor(s){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let y;return c.split("&").map((b=>b.split("="))).forEach((b=>{b[0]===this._hashName&&(y=b)})),(y&&y[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:y,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const y=c.join("/");let b=y;b.split("&").length>0&&(b=b.split("&")[0]),this._hashName&&(b=`${this._hashName}=${y}`);let E=window.location.hash.replace(b,"");E.startsWith("#&")?E=E.slice(0,1)+E.slice(2):E==="#"&&(E="");let M=window.location.href.replace(/(#.+)?$/,E);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=ls(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const c=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,b=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,b),M=Math.round(c.lng*E)/E,j=Math.round(c.lat*E)/E,V=this._map.getBearing(),Y=this._map.getPitch();let re="";if(re+=s?`/${M}/${j}/${y}`:`${y}/${j}/${M}`,(V||Y)&&(re+="/"+Math.round(10*V)/10),Y&&(re+=`/${Math.round(Y)}`),this._hashName){const ce=this._hashName;let oe=!1;const ge=window.location.hash.slice(1).split("&").map((Me=>{const Ze=Me.split("=")[0];return Ze===ce?(oe=!0,`${Ze}=${re}`):Me})).filter((Me=>Me));return oe||ge.push(`${ce}=${re}`),`#${ge.join("&")}`}return`#${re}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new a.S(+s[2],+s[1])}catch{return!1}const c=+s[0],y=+(s[3]||0),b=+(s[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&y>=-180&&y<=180&&b>=this._map.getMinPitch()&&b<=this._map.getMaxPitch()}}const Wc={linearity:.3,easing:a.cl(0,0,.3,1)},hc=a.e({deceleration:2500,maxSpeed:1400},Wc),wh=a.e({deceleration:20,maxSpeed:1400},Wc),Zc=a.e({deceleration:1e3,maxSpeed:360},Wc),Sh=a.e({deceleration:1e3,maxSpeed:90},Wc),zp=a.e({deceleration:1e3,maxSpeed:360},Wc);class jf{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,c=w.now();for(;s.length>0&&c-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)c.zoom+=E.zoomDelta||0,c.bearing+=E.bearingDelta||0,c.pitch+=E.pitchDelta||0,c.roll+=E.rollDelta||0,E.panDelta&&c.pan._add(E.panDelta),E.around&&(c.around=E.around),E.pinchAround&&(c.pinchAround=E.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(c.pan.mag()){const E=Hl(c.pan.mag(),y,a.e({},hc,s||{})),M=c.pan.mult(E.amount/c.pan.mag()),j=this._map.cameraHelper.handlePanInertia(M,this._map.transform);b.center=j.easingCenter,b.offset=j.easingOffset,mu(b,E)}if(c.zoom){const E=Hl(c.zoom,y,wh);b.zoom=this._map.transform.zoom+E.amount,mu(b,E)}if(c.bearing){const E=Hl(c.bearing,y,Zc);b.bearing=this._map.transform.bearing+a.ag(E.amount,-179,179),mu(b,E)}if(c.pitch){const E=Hl(c.pitch,y,Sh);b.pitch=this._map.transform.pitch+E.amount,mu(b,E)}if(c.roll){const E=Hl(c.roll,y,zp);b.roll=this._map.transform.roll+a.ag(E.amount,-179,179),mu(b,E)}if(b.zoom||b.bearing){const E=c.pinchAround===void 0?c.around:c.pinchAround;b.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),a.e(b,{noMoveStart:!0})}}function mu(S,s){(!S.duration||S.duration<s.duration)&&(S.duration=s.duration,S.easing=s.easing)}function Hl(S,s,c){const{maxSpeed:y,linearity:b,deceleration:E}=c,M=a.ag(S*b/(s/1e3),-y,y),j=Math.abs(M)/(E*b);return{easing:c.easing,duration:1e3*j,amount:M*(j/2)}}class Vo extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,c,y,b={}){y=y instanceof MouseEvent?y:new MouseEvent(s,y);const E=x.mousePos(c.getCanvas(),y),M=c.unproject(E);super(s,a.e({point:E,lngLat:M,originalEvent:y},b)),this._defaultPrevented=!1,this.target=c}}class Cl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,c,y){const b=s==="touchend"?y.changedTouches:y.touches,E=x.touchPos(c.getCanvasContainer(),b),M=E.map((V=>c.unproject(V))),j=E.reduce(((V,Y,re,ce)=>V.add(Y.div(ce.length))),new a.P(0,0));super(s,{points:E,point:j,lngLats:M,lngLat:c.unproject(j),originalEvent:y}),this._defaultPrevented=!1}}class Eh extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,c,y){super(s,{originalEvent:y}),this._defaultPrevented=!1}}class $p{constructor(s,c){this._map=s,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Eh(s.type,this._map,s))}mousedown(s,c){return this._mousedownPos=c,this._firePreventable(new Vo(s.type,this._map,s))}mouseup(s){this._map.fire(new Vo(s.type,this._map,s))}click(s,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new Vo(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Vo(s.type,this._map,s))}mouseover(s){this._map.fire(new Vo(s.type,this._map,s))}mouseout(s){this._map.fire(new Vo(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Cl(s.type,this._map,s))}touchmove(s){this._map.fire(new Cl(s.type,this._map,s))}touchend(s){this._map.fire(new Cl(s.type,this._map,s))}touchcancel(s){this._map.fire(new Cl(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qp{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Vo(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Vo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Vo(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Kc{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(a.P.convert(s),this._map.terrain)}}class bd{constructor(s,c){this._map=s,this._tr=new Kc(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,c){this.isEnabled()&&s.shiftKey&&s.button===0&&(x.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(s,c){if(!this._active)return;const y=c;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=y,this._box||(this._box=x.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const E=Math.min(b.x,y.x),M=Math.max(b.x,y.x),j=Math.min(b.y,y.y),V=Math.max(b.y,y.y);x.setTransform(this._box,`translate(${E}px,${j}px)`),this._box.style.width=M-E+"px",this._box.style.height=V-j+"px"}mouseupWindow(s,c){if(!this._active||s.button!==0)return;const y=this._startPos,b=c;if(this.reset(),x.suppressClick(),y.x!==b.x||y.y!==b.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:s})),{cameraAnimation:E=>E.fitScreenCoordinates(y,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,c){return this._map.fire(new a.l(s,{originalEvent:c}))}}function Ch(S,s){if(S.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${S.length}, points ${s.length}`);const c={};for(let y=0;y<S.length;y++)c[S[y].identifier]=s[y];return c}class Up{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,c,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),y.length===this.numTouches&&(this.centroid=(function(b){const E=new a.P(0,0);for(const M of b)E._add(M);return E.div(b.length)})(c),this.touches=Ch(y,c)))}touchmove(s,c,y){if(this.aborted||!this.centroid)return;const b=Ch(y,c);for(const E in this.touches){const M=b[E];(!M||M.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(s,c,y){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class zf{constructor(s){this.singleTap=new Up(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,c,y){this.singleTap.touchstart(s,c,y)}touchmove(s,c,y){this.singleTap.touchmove(s,c,y)}touchend(s,c,y){const b=this.singleTap.touchend(s,c,y);if(b){const E=s.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(b)<30;if(E&&M||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class dc{constructor(s){this._tr=new Kc(s),this._zoomIn=new zf({numTouches:1,numTaps:2}),this._zoomOut=new zf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,c,y){this._zoomIn.touchstart(s,c,y),this._zoomOut.touchstart(s,c,y)}touchmove(s,c,y){this._zoomIn.touchmove(s,c,y),this._zoomOut.touchmove(s,c,y)}touchend(s,c,y){const b=this._zoomIn.touchend(s,c,y),E=this._zoomOut.touchend(s,c,y),M=this._tr;return b?(this._active=!0,s.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:M.zoom+1,around:M.unproject(b)},{originalEvent:s})}):E?(this._active=!0,s.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:M.zoom-1,around:M.unproject(E)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xc{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const c=this._moveFunction(...s);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(s,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,c){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const b=Array.isArray(c)?c[0]:c;return!this._moved&&b.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(y,b))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&x.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const il=0,al=2,O={[il]:1,[al]:2};class z{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const c=x.mouseButton(s);this._eventButton=c}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!(function(c,y){const b=O[y];return c.buttons===void 0||(c.buttons&b)!==b})(s,this._eventButton)}isValidEndEvent(s){return x.mouseButton(s)===this._eventButton}}class ee{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class he{constructor(s=new z({checkCorrectEvent:()=>!0}),c=new ee){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(s,c,y){return s instanceof MouseEvent?c(s):typeof TouchEvent<"u"&&s instanceof TouchEvent?y(s):void 0}startMove(s){this._executeRelevantHandler(s,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(s){this._executeRelevantHandler(s,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(s){return this._executeRelevantHandler(s,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(s){return this._executeRelevantHandler(s,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(s){return this._executeRelevantHandler(s,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const Ie=S=>{S.mousedown=S.dragStart,S.mousemoveWindow=S.dragMove,S.mouseup=S.dragEnd,S.contextmenu=s=>{s.preventDefault()}};class De{constructor(s,c){this._clickTolerance=s.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,c,y){return this._calculateTransform(s,c,y)}touchmove(s,c,y){if(this._active){if(!this._shouldBePrevented(y.length))return s.preventDefault(),this._calculateTransform(s,c,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,c,y){this._calculateTransform(s,c,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,c,y){y.length>0&&(this._active=!0);const b=Ch(y,c),E=new a.P(0,0),M=new a.P(0,0);let j=0;for(const Y in b){const re=b[Y],ce=this._touches[Y];ce&&(E._add(re),M._add(re.sub(ce)),j++,b[Y]=re)}if(this._touches=b,this._shouldBePrevented(j)||!M.mag())return;const V=M.div(j);return this._sum._add(V),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(j),panDelta:V}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ne{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,c,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([c[0],c[1]]))}touchmove(s,c,y){if(!this._firstTwoTouches)return;s.preventDefault();const[b,E]=this._firstTwoTouches,M=Ge(y,c,b),j=Ge(y,c,E);if(!M||!j)return;const V=this._aroundCenter?null:M.add(j).div(2);return this._move([M,j],V,s)}touchend(s,c,y){if(!this._firstTwoTouches)return;const[b,E]=this._firstTwoTouches,M=Ge(y,c,b),j=Ge(y,c,E);M&&j||(this._active&&x.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ge(S,s,c){for(let y=0;y<S.length;y++)if(S[y].identifier===c)return s[y]}function Je(S,s){return Math.log(S/s)/Math.LN2}class st extends Ne{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,c){const y=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Je(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Je(this._distance,y),pinchAround:c}}}function lt(S,s){return 180*S.angleWith(s)/Math.PI}class sr extends Ne{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,c,y){const b=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:lt(this._vector,b),pinchAround:c}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const c=25/(Math.PI*this._minDiameter)*360,y=lt(s,this._startVector);return Math.abs(y)<c}}function ut(S){return Math.abs(S.y)>Math.abs(S.x)}class Vt extends Ne{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,c,y){super.touchstart(s,c,y),this._currentTouchCount=y.length}_start(s){this._lastPoints=s,ut(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,c,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const b=s[0].sub(this._lastPoints[0]),E=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,E,y.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(b.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(s,c,y){if(this._valid!==void 0)return this._valid;const b=s.mag()>=2,E=c.mag()>=2;if(!b&&!E)return;if(!b||!E)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const M=s.y>0==c.y>0;return ut(s)&&ut(c)&&M}}const Xt={panStep:100,bearingStep:15,pitchStep:10};class gr{constructor(s){this._tr=new Kc(s);const c=Xt;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let c=0,y=0,b=0,E=0,M=0;switch(s.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:s.shiftKey?y=-1:(s.preventDefault(),E=-1);break;case 39:s.shiftKey?y=1:(s.preventDefault(),E=1);break;case 38:s.shiftKey?b=1:(s.preventDefault(),M=-1);break;case 40:s.shiftKey?b=-1:(s.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(y=0,b=0),{cameraAnimation:j=>{const V=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:ar,zoom:c?Math.round(V.zoom)+c*(s.shiftKey?2:1):V.zoom,bearing:V.bearing+y*this._bearingStep,pitch:V.pitch+b*this._pitchStep,offset:[-E*this._panStep,-M*this._panStep],center:V.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ar(S){return S*(2-S)}const tr=4.000244140625,Er=1/450;class qr{constructor(s,c){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=s,this._tr=new Kc(s),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Er}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let c=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const y=w.now(),b=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,c!==0&&c%tr==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(b*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),s.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=s,this._delta-=c,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=x.mousePos(this._map.getCanvas(),s),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(a.S.convert(y.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const j=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=j),typeof this._targetZoom=="number"&&(this._targetZoom+=j)}if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>tr?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&V!==0&&(V=1/V);const Y=typeof this._targetZoom!="number"?s.scale:a.ae(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),a.aj(Y*V)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,y=this._startZoom,b=this._easing;let E,M=!1;if(this._type==="wheel"&&y&&b){const j=w.now()-this._lastWheelEventTime,V=Math.min((j+5)/200,1),Y=b(V);E=a.C.number(y,c,Y),V<1?this._frameId||(this._frameId=!0):M=!0}else E=c,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=E,{noInertia:!0,needsRenderFrame:!M,zoomDelta:E-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let c=a.cn;if(this._prevEase){const y=this._prevEase,b=(w.now()-y.start)/y.duration,E=y.easing(b+.01)-y.easing(b),M=.27/Math.sqrt(E*E+1e-4)*.01,j=Math.sqrt(.0729-M*M);c=a.cl(M,j,.25,1)}return this._prevEase={start:w.now(),duration:s,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Lr{constructor(s,c){this._clickZoom=s,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Pn{constructor(s){this._tr=new Kc(s),this.reset()}reset(){this._active=!1}dblclick(s,c){return s.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yn{constructor(){this._tap=new zf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,c,y){if(!this._swipePoint)if(this._tapTime){const b=c[0],E=s.timeStamp-this._tapTime<500,M=this._tapPoint.dist(b)<30;E&&M?y.length>0&&(this._swipePoint=b,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(s,c,y)}touchmove(s,c,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const b=c[0],E=b.y-this._swipePoint.y;return this._swipePoint=b,s.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(s,c,y)}touchend(s,c,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const b=this._tap.touchend(s,c,y);b&&(this._tapTime=s.timeStamp,this._tapPoint=b)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qn{constructor(s,c,y){this._el=s,this._mousePan=c,this._touchPan=y}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class vn{constructor(s,c,y,b){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=c,this._mousePitch=y,this._mouseRoll=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class ui{constructor(s,c,y,b){this._el=s,this._touchZoom=c,this._touchRotate=y,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Xa{constructor(s,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=x.create("div","maplibregl-cooperative-gesture-screen",s);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),b=document.createElement("div");b.className="maplibregl-desktop-message",b.textContent=c,this._container.appendChild(b);const E=document.createElement("div");E.className="maplibregl-mobile-message",E.textContent=y,this._container.appendChild(E),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(x.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,c){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:s,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Un=S=>S.zoom||S.drag||S.roll||S.pitch||S.rotate;class _n extends a.l{}function Qr(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta||S.rollDelta}class Zi{constructor(s,c){this.handleWindowEvent=b=>{this.handleEvent(b,`${b.type}Window`)},this.handleEvent=(b,E)=>{if(b.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=b.type==="renderFrame"?void 0:b,j={needsRenderFrame:!1},V={},Y={};for(const{handlerName:oe,handler:ge,allowed:Me}of this._handlers){if(!ge.isEnabled())continue;let Ze;if(this._blockedByActive(Y,Me,oe))ge.reset();else if(ge[E||b.type]){if(a.co(b,E||b.type)){const We=x.mousePos(this._map.getCanvas(),b);Ze=ge[E||b.type](b,We)}else if(a.cp(b,E||b.type)){const We=this._getMapTouches(b.touches),Xe=x.touchPos(this._map.getCanvas(),We);Ze=ge[E||b.type](b,Xe,We)}else a.cq(E||b.type)||(Ze=ge[E||b.type](b));this.mergeHandlerResult(j,V,Ze,oe,M),Ze&&Ze.needsRenderFrame&&this._triggerRenderFrame()}(Ze||ge.isActive())&&(Y[oe]=ge)}const re={};for(const oe in this._previousActiveHandlers)Y[oe]||(re[oe]=M);this._previousActiveHandlers=Y,(Object.keys(re).length||Qr(j))&&(this._changes.push([j,V,re]),this._triggerRenderFrame()),(Object.keys(Y).length||Qr(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=j;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jf(s),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,E,M]of this._listeners)x.addEventListener(b,E,b===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[s,c,y]of this._listeners)x.removeEventListener(s,c,s===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(s){const c=this._map,y=c.getCanvasContainer();this._add("mapEvent",new $p(c,s));const b=c.boxZoom=new bd(c,s);this._add("boxZoom",b),s.interactive&&s.boxZoom&&b.enable();const E=c.cooperativeGestures=new Xa(c,s.cooperativeGestures);this._add("cooperativeGestures",E),s.cooperativeGestures&&E.enable();const M=new dc(c),j=new Pn(c);c.doubleClickZoom=new Lr(j,M),this._add("tapZoom",M),this._add("clickZoom",j),s.interactive&&s.doubleClickZoom&&c.doubleClickZoom.enable();const V=new yn;this._add("tapDragZoom",V);const Y=c.touchPitch=new Vt(c);this._add("touchPitch",Y),s.interactive&&s.touchPitch&&c.touchPitch.enable(s.touchPitch);const re=()=>c.project(c.getCenter()),ce=(function({enable:dt,clickTolerance:Et,aroundCenter:Tt=!0,minPixelCenterThreshold:ft=100,rotateDegreesPerPixelMoved:Bt=.8},ir){const Jt=new z({checkCorrectEvent:er=>x.mouseButton(er)===0&&er.ctrlKey||x.mouseButton(er)===2&&!er.ctrlKey});return new Xc({clickTolerance:Et,move:(er,or)=>{const Gr=ir();if(Tt&&Math.abs(Gr.y-er.y)>ft)return{bearingDelta:a.cm(new a.P(er.x,or.y),or,Gr)};let Ur=(or.x-er.x)*Bt;return Tt&&or.y<Gr.y&&(Ur=-Ur),{bearingDelta:Ur}},moveStateManager:Jt,enable:dt,assignEvents:Ie})})(s,re),oe=(function({enable:dt,clickTolerance:Et,pitchDegreesPerPixelMoved:Tt=-.5}){const ft=new z({checkCorrectEvent:Bt=>x.mouseButton(Bt)===0&&Bt.ctrlKey||x.mouseButton(Bt)===2});return new Xc({clickTolerance:Et,move:(Bt,ir)=>({pitchDelta:(ir.y-Bt.y)*Tt}),moveStateManager:ft,enable:dt,assignEvents:Ie})})(s),ge=(function({enable:dt,clickTolerance:Et,rollDegreesPerPixelMoved:Tt=.3},ft){const Bt=new z({checkCorrectEvent:ir=>x.mouseButton(ir)===2&&ir.ctrlKey});return new Xc({clickTolerance:Et,move:(ir,Jt)=>{const er=ft();let or=(Jt.x-ir.x)*Tt;return Jt.y<er.y&&(or=-or),{rollDelta:or}},moveStateManager:Bt,enable:dt,assignEvents:Ie})})(s,re);c.dragRotate=new vn(s,ce,oe,ge),this._add("mouseRotate",ce,["mousePitch"]),this._add("mousePitch",oe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ge,["mousePitch"]),s.interactive&&s.dragRotate&&c.dragRotate.enable();const Me=(function({enable:dt,clickTolerance:Et}){const Tt=new z({checkCorrectEvent:ft=>x.mouseButton(ft)===0&&!ft.ctrlKey});return new Xc({clickTolerance:Et,move:(ft,Bt)=>({around:Bt,panDelta:Bt.sub(ft)}),activateOnStart:!0,moveStateManager:Tt,enable:dt,assignEvents:Ie})})(s),Ze=new De(s,c);c.dragPan=new Qn(y,Me,Ze),this._add("mousePan",Me),this._add("touchPan",Ze,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&c.dragPan.enable(s.dragPan);const We=new sr,Xe=new st;c.touchZoomRotate=new ui(y,Xe,We,V),this._add("touchRotate",We,["touchPan","touchZoom"]),this._add("touchZoom",Xe,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&c.touchZoomRotate.enable(s.touchZoomRotate);const at=c.scrollZoom=new qr(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",at,["mousePan"]),s.interactive&&s.scrollZoom&&c.scrollZoom.enable(s.scrollZoom);const wt=c.keyboard=new gr(c);this._add("keyboard",wt),s.interactive&&s.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new qp(c))}_add(s,c,y){this._handlers.push({handlerName:s,handler:c,allowed:y}),this._handlersById[s]=c}stop(s){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Un(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,c,y){for(const b in s)if(b!==y&&(!c||c.indexOf(b)<0))return!0;return!1}_getMapTouches(s){const c=[];for(const y of s)this._el.contains(y.target)&&c.push(y);return c}mergeHandlerResult(s,c,y,b,E){if(!y)return;a.e(s,y);const M={handlerName:b,originalEvent:y.originalEvent||E};y.zoomDelta!==void 0&&(c.zoom=M),y.panDelta!==void 0&&(c.drag=M),y.rollDelta!==void 0&&(c.roll=M),y.pitchDelta!==void 0&&(c.pitch=M),y.bearingDelta!==void 0&&(c.rotate=M)}_applyChanges(){const s={},c={},y={};for(const[b,E,M]of this._changes)b.panDelta&&(s.panDelta=(s.panDelta||new a.P(0,0))._add(b.panDelta)),b.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+b.pitchDelta),b.rollDelta&&(s.rollDelta=(s.rollDelta||0)+b.rollDelta),b.around!==void 0&&(s.around=b.around),b.pinchAround!==void 0&&(s.pinchAround=b.pinchAround),b.noInertia&&(s.noInertia=b.noInertia),a.e(c,E),a.e(y,M);this._updateMapTransform(s,c,y),this._changes=[]}_updateMapTransform(s,c,y){const b=this._map,E=b._getTransformForUpdate(),M=b.terrain;if(!(Qr(s)||M&&this._terrainMovement))return this._fireEvents(c,y,!0);b._stop(!0);let{panDelta:j,zoomDelta:V,bearingDelta:Y,pitchDelta:re,rollDelta:ce,around:oe,pinchAround:ge}=s;ge!==void 0&&(oe=ge),oe=oe||b.transform.centerPoint,M&&!E.isPointOnMapSurface(oe)&&(oe=E.centerPoint);const Me={panDelta:j,zoomDelta:V,rollDelta:ce,pitchDelta:re,bearingDelta:Y,around:oe};this._map.cameraHelper.useGlobeControls&&!E.isPointOnMapSurface(oe)&&(oe=E.centerPoint);const Ze=oe.distSqr(E.centerPoint)<.01?E.center:E.screenPointToLocation(j?oe.sub(j):oe);M?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Me,E),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?E.setCenter(E.screenPointToLocation(E.centerPoint.sub(j))):this._map.cameraHelper.handleMapControlsPan(Me,E,Ze):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(Me,E,Ze))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(Me,E),this._map.cameraHelper.handleMapControlsPan(Me,E,Ze)),b._applyUpdatedTransform(E),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(c,y,!0)}_fireEvents(s,c,y){const b=Un(this._eventsInProgress),E=Un(s),M={};for(const ce in s){const{originalEvent:oe}=s[ce];this._eventsInProgress[ce]||(M[`${ce}start`]=oe),this._eventsInProgress[ce]=s[ce]}!b&&E&&this._fireEvent("movestart",E.originalEvent);for(const ce in M)this._fireEvent(ce,M[ce]);E&&this._fireEvent("move",E.originalEvent);for(const ce in s){const{originalEvent:oe}=s[ce];this._fireEvent(ce,oe)}const j={};let V;for(const ce in this._eventsInProgress){const{handlerName:oe,originalEvent:ge}=this._eventsInProgress[ce];this._handlersById[oe].isActive()||(delete this._eventsInProgress[ce],V=c[oe]||ge,j[`${ce}end`]=V)}for(const ce in j)this._fireEvent(ce,j[ce]);const Y=Un(this._eventsInProgress),re=(b||E)&&!Y;if(re&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ce=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ce.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ce)}if(y&&re){this._updatingCamera=!0;const ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),oe=ge=>ge!==0&&-this._bearingSnap<ge&&ge<this._bearingSnap;!ce||!ce.essential&&w.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:V})),oe(this._map.getBearing())&&this._map.resetNorth()):(oe(ce.bearing||this._map.getBearing())&&(ce.bearing=0),ce.freezeElevation=!0,this._map.easeTo(ce,{originalEvent:V})),this._updatingCamera=!1}}_fireEvent(s,c){this._map.fire(new a.l(s,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((s=>{delete this._frameId,this.handleEvent(new _n("renderFrame",{timeStamp:s})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class fn extends a.E{constructor(s,c,y){super(),this._renderFrameCallback=()=>{const b=Math.min((w.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=y.bearingSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(s,c){s.apply(this.transform),this.transform=s,this.cameraHelper=c}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(s,c){return this.jumpTo({center:s},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,c){return this.jumpTo({elevation:s},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,c,y){return s=a.P.convert(s).mult(-1),this.panTo(this.transform.center,a.e({offset:s},c),y)}panTo(s,c,y){return this.easeTo(a.e({center:s},c),y)}getZoom(){return this.transform.zoom}setZoom(s,c){return this.jumpTo({zoom:s},c),this}zoomTo(s,c,y){return this.easeTo(a.e({zoom:s},c),y)}zoomIn(s,c){return this.zoomTo(this.getZoom()+1,s,c),this}zoomOut(s,c){return this.zoomTo(this.getZoom()-1,s,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,c){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new a.l("movestart",c)).fire(new a.l("move",c)).fire(new a.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(s,c){return this.jumpTo({bearing:s},c),this}getPadding(){return this.transform.padding}setPadding(s,c){return this.jumpTo({padding:s},c),this}rotateTo(s,c,y){return this.easeTo(a.e({bearing:s},c),y)}resetNorth(s,c){return this.rotateTo(0,a.e({duration:1e3},s),c),this}resetNorthPitch(s,c){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},s),c),this}snapToNorth(s,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,c):this}getPitch(){return this.transform.pitch}setPitch(s,c){return this.jumpTo({pitch:s},c),this}getRoll(){return this.transform.roll}setRoll(s,c){return this.jumpTo({roll:s},c),this}cameraForBounds(s,c){s=It.convert(s).adjustAntiMeridian();const y=c&&c.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),y,c)}_cameraForBoxAndBearing(s,c,y,b){const E={top:0,bottom:0,right:0,left:0};if(typeof(b=a.e({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){const Y=b.padding;b.padding={top:Y,bottom:Y,right:Y,left:Y}}const M=a.e(E,b.padding);b.padding=M;const j=this.transform,V=new It(s,c);return this.cameraHelper.cameraForBoxAndBearing(b,M,V,y,j)}fitBounds(s,c,y){return this._fitInternal(this.cameraForBounds(s,c),c,y)}fitScreenCoordinates(s,c,y,b,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(s)),this.transform.screenPointToLocation(a.P.convert(c)),y,b),b,E)}_fitInternal(s,c,y){return s?(delete(c=a.e(s,c)).padding,c.linear?this.easeTo(c,y):this.flyTo(c,y)):this}jumpTo(s,c){this.stop();const y=this._getTransformForUpdate();let b=!1,E=!1,M=!1;const j=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,s);const V=y.zoom!==j;return"elevation"in s&&y.elevation!==+s.elevation&&y.setElevation(+s.elevation),"bearing"in s&&y.bearing!==+s.bearing&&(b=!0,y.setBearing(+s.bearing)),"pitch"in s&&y.pitch!==+s.pitch&&(E=!0,y.setPitch(+s.pitch)),"roll"in s&&y.roll!==+s.roll&&(M=!0,y.setRoll(+s.roll)),s.padding==null||y.isPaddingEqual(s.padding)||y.setPadding(s.padding),this._applyUpdatedTransform(y),this.fire(new a.l("movestart",c)).fire(new a.l("move",c)),V&&this.fire(new a.l("zoomstart",c)).fire(new a.l("zoom",c)).fire(new a.l("zoomend",c)),b&&this.fire(new a.l("rotatestart",c)).fire(new a.l("rotate",c)).fire(new a.l("rotateend",c)),E&&this.fire(new a.l("pitchstart",c)).fire(new a.l("pitch",c)).fire(new a.l("pitchend",c)),M&&this.fire(new a.l("rollstart",c)).fire(new a.l("roll",c)).fire(new a.l("rollend",c)),this.fire(new a.l("moveend",c))}calculateCameraOptionsFromTo(s,c,y,b=0){const E=a.a0.fromLngLat(s,c),M=a.a0.fromLngLat(y,b),j=M.x-E.x,V=M.y-E.y,Y=M.z-E.z,re=Math.hypot(j,V,Y);if(re===0)throw new Error("Can't calculate camera options with same From and To");const ce=Math.hypot(j,V),oe=a.aj(this.transform.cameraToCenterDistance/re/this.transform.tileSize),ge=180*Math.atan2(j,-V)/Math.PI;let Me=180*Math.acos(ce/re)/Math.PI;return Me=Y<0?90-Me:90+Me,{center:M.toLngLat(),elevation:b,zoom:oe,pitch:Me,bearing:ge}}calculateCameraOptionsFromCameraLngLatAltRotation(s,c,y,b,E){const M=this.transform.calculateCenterFromCameraLngLatAlt(s,c,y,b);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:y,pitch:b,roll:E}}easeTo(s,c){this._stop(!1,s.easeId),((s=a.e({offset:[0,0],duration:500,easing:a.cn},s)).animate===!1||!s.essential&&w.prefersReducedMotion)&&(s.duration=0);const y=this._getTransformForUpdate(),b=this.getBearing(),E=y.pitch,M=y.roll,j="bearing"in s?this._normalizeBearing(s.bearing,b):b,V="pitch"in s?+s.pitch:E,Y="roll"in s?this._normalizeBearing(s.roll,M):M,re="padding"in s?s.padding:y.padding,ce=a.P.convert(s.offset);let oe,ge;s.around&&(oe=a.S.convert(s.around),ge=y.locationToScreenPoint(oe));const Me={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ze=this.cameraHelper.handleEaseTo(y,{bearing:j,pitch:V,roll:Y,padding:re,around:oe,aroundPoint:ge,offsetAsPoint:ce,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||b!==j,this._pitching=this._pitching||V!==E,this._rolling=this._rolling||Y!==M,this._padding=!y.isPaddingEqual(re),this._zooming=this._zooming||Ze.isZooming,this._easeId=s.easeId,this._prepareEase(c,s.noMoveStart,Me),this.terrain&&this._prepareElevation(Ze.elevationCenter),this._ease((We=>{Ze.easeFunc(We),this.terrain&&!s.freezeElevation&&this._updateElevation(We),this._applyUpdatedTransform(y),this._fireMoveEvents(c)}),(We=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(c,We)}),s),this}_prepareEase(s,c,y={}){this._moving=!0,c||y.moving||this.fire(new a.l("movestart",s)),this._zooming&&!y.zooming&&this.fire(new a.l("zoomstart",s)),this._rotating&&!y.rotating&&this.fire(new a.l("rotatestart",s)),this._pitching&&!y.pitching&&this.fire(new a.l("pitchstart",s)),this._rolling&&!y.rolling&&this.fire(new a.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&c!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(y-(c-(y*s+this._elevationStart))/(1-s)),this._elevationTarget=c}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};const c=s.getCameraLngLat(),y=s.getCameraAltitude(),b=this.terrain?this.terrain.getElevationForLngLatZoom(c,s.zoom):0;if(y<b){const E=this.calculateCameraOptionsFromTo(c,b,s.center,s.elevation);return{pitch:E.pitch,zoom:E.zoom}}return{}}_applyUpdatedTransform(s){const c=[];if(c.push((b=>this._elevateCameraIfInsideTerrain(b))),this.transformCameraUpdate&&c.push((b=>this.transformCameraUpdate(b))),!c.length)return;const y=s.clone();for(const b of c){const E=y.clone(),{center:M,zoom:j,roll:V,pitch:Y,bearing:re,elevation:ce}=b(E);M&&E.setCenter(M),ce!==void 0&&E.setElevation(ce),j!==void 0&&E.setZoom(j),V!==void 0&&E.setRoll(V),Y!==void 0&&E.setPitch(Y),re!==void 0&&E.setBearing(re),y.apply(E)}this.transform.apply(y)}_fireMoveEvents(s){this.fire(new a.l("move",s)),this._zooming&&this.fire(new a.l("zoom",s)),this._rotating&&this.fire(new a.l("rotate",s)),this._pitching&&this.fire(new a.l("pitch",s)),this._rolling&&this.fire(new a.l("roll",s))}_afterEase(s,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const y=this._zooming,b=this._rotating,E=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new a.l("zoomend",s)),b&&this.fire(new a.l("rotateend",s)),E&&this.fire(new a.l("pitchend",s)),M&&this.fire(new a.l("rollend",s)),this.fire(new a.l("moveend",s))}flyTo(s,c){if(!s.essential&&w.prefersReducedMotion){const or=a.Q(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(or,c)}this.stop(),s=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cn},s);const y=this._getTransformForUpdate(),b=y.bearing,E=y.pitch,M=y.roll,j=y.padding,V="bearing"in s?this._normalizeBearing(s.bearing,b):b,Y="pitch"in s?+s.pitch:E,re="roll"in s?this._normalizeBearing(s.roll,M):M,ce="padding"in s?s.padding:y.padding,oe=a.P.convert(s.offset);let ge=y.centerPoint.add(oe);const Me=y.screenPointToLocation(ge),Ze=this.cameraHelper.handleFlyTo(y,{bearing:V,pitch:Y,roll:re,padding:ce,locationAtOffset:Me,offsetAsPoint:oe,center:s.center,minZoom:s.minZoom,zoom:s.zoom});let We=s.curve;const Xe=Math.max(y.width,y.height),at=Xe/Ze.scaleOfZoom,wt=Ze.pixelPathLength;typeof Ze.scaleOfMinZoom=="number"&&(We=Math.sqrt(Xe/Ze.scaleOfMinZoom/wt*2));const dt=We*We;function Et(or){const Gr=(at*at-Xe*Xe+(or?-1:1)*dt*dt*wt*wt)/(2*(or?at:Xe)*dt*wt);return Math.log(Math.sqrt(Gr*Gr+1)-Gr)}function Tt(or){return(Math.exp(or)-Math.exp(-or))/2}function ft(or){return(Math.exp(or)+Math.exp(-or))/2}const Bt=Et(!1);let ir=function(or){return ft(Bt)/ft(Bt+We*or)},Jt=function(or){return Xe*((ft(Bt)*(Tt(Gr=Bt+We*or)/ft(Gr))-Tt(Bt))/dt)/wt;var Gr},er=(Et(!0)-Bt)/We;if(Math.abs(wt)<2e-6||!isFinite(er)){if(Math.abs(Xe-at)<1e-6)return this.easeTo(s,c);const or=at<Xe?-1:1;er=Math.abs(Math.log(at/Xe))/We,Jt=()=>0,ir=Gr=>Math.exp(or*We*Gr)}return s.duration="duration"in s?+s.duration:1e3*er/("screenSpeed"in s?+s.screenSpeed/We:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=b!==V,this._pitching=Y!==E,this._rolling=re!==M,this._padding=!y.isPaddingEqual(ce),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(Ze.targetCenter),this._ease((or=>{const Gr=or*er,Ur=1/ir(Gr),Ar=Jt(Gr);this._rotating&&y.setBearing(a.C.number(b,V,or)),this._pitching&&y.setPitch(a.C.number(E,Y,or)),this._rolling&&y.setRoll(a.C.number(M,re,or)),this._padding&&(y.interpolatePadding(j,ce,or),ge=y.centerPoint.add(oe)),Ze.easeFunc(or,Ur,Ar,ge),this.terrain&&!s.freezeElevation&&this._updateElevation(or),this._applyUpdatedTransform(y),this._fireMoveEvents(c)}),(()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,c){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,c)}return s||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(s,c,y){y.animate===!1||y.duration===0?(s(1),c()):(this._easeStart=w.now(),this._easeOptions=y,this._onEaseFrame=s,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,c){s=a.aN(s,-180,180);const y=Math.abs(s-c);return Math.abs(s-360-c)<y&&(s-=360),Math.abs(s+360-c)<y&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(s),this.transform.tileZoom):null}}const oi={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ki{constructor(s=oi){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=x.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=x.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,c){const y=this._map._getUIString(`AttributionControl.${c}`);s.title=y,s.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map((b=>typeof b!="string"?"":b))):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const c=this._map.style.sourceCaches;for(const b in c){const E=c[b];if(E.used||E.usedForTerrain){const M=E.getSource();M.attribution&&s.indexOf(M.attribution)<0&&s.push(M.attribution)}}s=s.filter((b=>String(b).trim())),s.sort(((b,E)=>b.length-E.length)),s=s.filter(((b,E)=>{for(let M=E+1;M<s.length;M++)if(s[M].indexOf(b)>=0)return!1;return!0}));const y=s.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,s.length?(this._innerContainer.innerHTML=x.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class oo{constructor(s={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const y=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=x.create("div","maplibregl-ctrl");const c=x.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){x.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Go{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const c=++this._id;return this._queue.push({callback:s,id:c,cancelled:!1}),c}remove(s){const c=this._currentlyRunning,y=c?this._queue.concat(c):this._queue;for(const b of y)if(b.id===s)return void(b.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const y of c)if(!y.cancelled&&(y.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Aa=a.aI([{name:"a_pos3d",type:"Int16",components:3}]);class Ho extends a.E{constructor(s){super(),this._lastTilesetChange=w.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*2**this.deltaZoom,s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,c){this.sourceCache.update(s,c),this._renderableTilesKeys=[];const y={};for(const b of zt(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))y[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.terrainRttPosMatrix32f=new Float64Array(16),a.bX(b.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[b.key]=new xr(b,this.tileSize),this._lastTilesetChange=w.now());for(const b in this._tiles)y[b]||delete this._tiles[b]}freeRtt(s){for(const c in this._tiles){const y=this._tiles[c];(!s||y.tileID.equals(s)||y.tileID.isChildOf(s)||s.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((s=>this.getTileByID(s)))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,c){return c?this._getTerrainCoordsForTileRanges(s,c):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){const c={};for(const y of this._renderableTilesKeys){const b=this._tiles[y].tileID,E=s.clone(),M=a.b9();if(b.canonical.equals(s.canonical))a.bX(M,0,a.$,a.$,0,0,1);else if(b.canonical.isChildOf(s.canonical)){const j=b.canonical.z-s.canonical.z,V=b.canonical.x-(b.canonical.x>>j<<j),Y=b.canonical.y-(b.canonical.y>>j<<j),re=a.$>>j;a.bX(M,0,re,re,0,0,1),a.M(M,M,[-V*re,-Y*re,0])}else{if(!s.canonical.isChildOf(b.canonical))continue;{const j=s.canonical.z-b.canonical.z,V=s.canonical.x-(s.canonical.x>>j<<j),Y=s.canonical.y-(s.canonical.y>>j<<j),re=a.$>>j;a.bX(M,0,a.$,a.$,0,0,1),a.M(M,M,[V*re,Y*re,0]),a.N(M,M,[1/2**j,1/2**j,0])}}E.terrainRttPosMatrix32f=new Float32Array(M),c[y]=E}return c}_getTerrainCoordsForTileRanges(s,c){const y={};for(const b of this._renderableTilesKeys){const E=this._tiles[b].tileID;if(!this._isWithinTileRanges(E,c))continue;const M=s.clone(),j=a.b9();if(E.canonical.z===s.canonical.z){const V=s.canonical.x-E.canonical.x,Y=s.canonical.y-E.canonical.y;a.bX(j,0,a.$,a.$,0,0,1),a.M(j,j,[V*a.$,Y*a.$,0])}else if(E.canonical.z>s.canonical.z){const V=E.canonical.z-s.canonical.z,Y=E.canonical.x-(E.canonical.x>>V<<V),re=E.canonical.y-(E.canonical.y>>V<<V),ce=s.canonical.x-(E.canonical.x>>V),oe=s.canonical.y-(E.canonical.y>>V),ge=a.$>>V;a.bX(j,0,ge,ge,0,0,1),a.M(j,j,[-Y*ge+ce*a.$,-re*ge+oe*a.$,0])}else{const V=s.canonical.z-E.canonical.z,Y=s.canonical.x-(s.canonical.x>>V<<V),re=s.canonical.y-(s.canonical.y>>V<<V),ce=(s.canonical.x>>V)-E.canonical.x,oe=(s.canonical.y>>V)-E.canonical.y,ge=a.$<<V;a.bX(j,0,ge,ge,0,0,1),a.M(j,j,[Y*a.$+ce*ge,re*a.$+oe*ge,0])}M.terrainRttPosMatrix32f=new Float32Array(j),y[b]=M}return y}getSourceTile(s,c){const y=this.sourceCache._source;let b=s.overscaledZ-this.deltaZoom;if(b>y.maxzoom&&(b=y.maxzoom),b<y.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(b).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!E||!E.dem)&&c)for(;b>=y.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(s.scaledTo(b--).key);return E}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,c){return c[s.canonical.z]&&s.canonical.x>=c[s.canonical.z].minTileX&&s.canonical.x<=c[s.canonical.z].maxTileX&&s.canonical.y>=c[s.canonical.z].minTileY&&s.canonical.y<=c[s.canonical.z].maxTileY}}class ma{constructor(s,c,y){this._meshCache={},this.painter=s,this.sourceCache=new Ho(c),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,c,y,b=a.$){var E;if(!(c>=0&&c<b&&y>=0&&y<b))return 0;const M=this.getTerrainData(s),j=(E=M.tile)===null||E===void 0?void 0:E.dem;if(!j)return 0;const V=a.cr([],[c/b*a.$,y/b*a.$],M.u_terrain_matrix),Y=[V[0]*j.dim,V[1]*j.dim],re=Math.floor(Y[0]),ce=Math.floor(Y[1]),oe=Y[0]-re,ge=Y[1]-ce;return j.get(re,ce)*(1-oe)*(1-ge)+j.get(re+1,ce)*oe*(1-ge)+j.get(re,ce+1)*(1-oe)*ge+j.get(re+1,ce+1)*oe*ge}getElevationForLngLatZoom(s,c){if(!a.cs(c,s.wrap()))return 0;const{tileID:y,mercatorX:b,mercatorY:E}=this._getOverscaledTileIDFromLngLatZoom(s,c);return this.getElevation(y,b%a.$,E%a.$,a.$)}getElevation(s,c,y,b=a.$){return this.getDEMElevation(s,c,y,b)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const b=this.painter.context,E=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(b,E,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(b,new a.R({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.af([])}const c=this.sourceCache.getSourceTile(s,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const b=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new a.T(b,c.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),c.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const y=c&&c+c.tileID.key+s.key;if(y&&!this._demMatrixCache[y]){const b=this.sourceCache.sourceCache._source.maxzoom;let E=s.canonical.z-c.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=b?E=s.canonical.z-b:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=s.canonical.x-(s.canonical.x>>E<<E),j=s.canonical.y-(s.canonical.y>>E<<E),V=a.ct(new Float64Array(16),[1/(a.$<<E),1/(a.$<<E),0]);a.M(V,V,[M*a.$,j*a.$,0]),this._demMatrixCache[s.key]={matrix:V,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(s){const c=this.painter,y=c.width/devicePixelRatio,b=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(c.context,{width:y,height:b,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(c.context,{width:y,height:b,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(y,b,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,y,b))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,M=0;E<this._coordsTextureSize;E++)for(let j=0;j<this._coordsTextureSize;j++,M+=4)c[M+0]=255&j,c[M+1]=255&E,c[M+2]=j>>8<<4|E>>8,c[M+3]=0;const y=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),b=new a.T(s,y,s.gl.RGBA,{premultiply:!1});return b.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),y=this.painter.context,b=y.gl,E=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),j=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(E,j-M-1,1,1,b.RGBA,b.UNSIGNED_BYTE,c),y.bindFramebuffer.set(null);const V=c[0]+(c[2]>>4<<8),Y=c[1]+((15&c[2])<<8),re=this.coordsIndex[255-c[3]],ce=re&&this.sourceCache.getTileByID(re);if(!ce)return null;const oe=this._coordsTextureSize,ge=(1<<ce.tileID.canonical.z)*oe;return new a.a0((ce.tileID.canonical.x*oe+V)/ge+ce.tileID.wrap,(ce.tileID.canonical.y*oe+Y)/ge,this.getElevation(ce.tileID,V,Y,oe))}depthAtPoint(s){const c=new Uint8Array(4),y=this.painter.context,b=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),b.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,c),y.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(s){var c;const y=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,b=y&&s.canonical.y===0,E=y&&s.canonical.y===(1<<s.canonical.z)-1,M=`m_${b?"n":""}_${E?"s":""}`;if(this._meshCache[M])return this._meshCache[M];const j=this.painter.context,V=new a.cu,Y=new a.aM,re=this.meshSize,ce=a.$/re,oe=re*re;for(let ft=0;ft<=re;ft++)for(let Bt=0;Bt<=re;Bt++)V.emplaceBack(Bt*ce,ft*ce,0);for(let ft=0;ft<oe;ft+=re+1)for(let Bt=0;Bt<re;Bt++)Y.emplaceBack(Bt+ft,re+Bt+ft+1,re+Bt+ft+2),Y.emplaceBack(Bt+ft,re+Bt+ft+2,Bt+ft+1);const ge=V.length,Me=ge+(re+1),Ze=(re+1)*re,We=b?a.bg:0,Xe=b?0:1,at=E?a.bh:a.$,wt=E?0:1;for(let ft=0;ft<=re;ft++)V.emplaceBack(ft*ce,We,Xe);for(let ft=0;ft<=re;ft++)V.emplaceBack(ft*ce,at,wt);for(let ft=0;ft<re;ft++)Y.emplaceBack(Ze+ft,Me+ft,Me+ft+1),Y.emplaceBack(Ze+ft,Me+ft+1,Ze+ft+1),Y.emplaceBack(0+ft,ge+ft+1,ge+ft),Y.emplaceBack(0+ft,0+ft+1,ge+ft+1);const dt=V.length,Et=dt+2*(re+1);for(const ft of[0,1])for(let Bt=0;Bt<=re;Bt++)for(const ir of[0,1])V.emplaceBack(ft*a.$,Bt*ce,ir);for(let ft=0;ft<2*re;ft+=2)Y.emplaceBack(dt+ft,dt+ft+1,dt+ft+3),Y.emplaceBack(dt+ft,dt+ft+3,dt+ft+2),Y.emplaceBack(Et+ft,Et+ft+3,Et+ft+1),Y.emplaceBack(Et+ft,Et+ft+2,Et+ft+3);const Tt=new $t(j.createVertexBuffer(V,Aa.members),j.createIndexBuffer(Y),a.aL.simpleSegment(0,0,V.length,Y.length));return this._meshCache[M]=Tt,Tt}getMeshFrameDelta(s){return 2*Math.PI*a.bt/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,c){var y;const{tileID:b}=this._getOverscaledTileIDFromLngLatZoom(s,c);return(y=this.getMinMaxElevation(b).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(s){const c=this.getTerrainData(s).tile,y={minElevation:null,maxElevation:null};return c&&c.dem&&(y.minElevation=c.dem.min*this.exaggeration,y.maxElevation=c.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(s,c){const y=a.a0.fromLngLat(s.wrap()),b=(1<<c)*a.$,E=y.x*b,M=y.y*b,j=Math.floor(E/a.$),V=Math.floor(M/a.$);return{tileID:new a.Z(c,0,c,j,V),mercatorX:E,mercatorY:M}}}class Ra{constructor(s,c,y){this._context=s,this._size=c,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(y.texture),{id:s,fbo:c,texture:y,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>s.id!==c)),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((s=>!s.inUse))===!1}}const Fr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Yr{constructor(s,c){this.painter=s,this.terrain=c,this.pool=new Ra(s.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter((y=>!s._layers[y].isHidden(c))),this._coordsAscending={};for(const y in s.sourceCaches){this._coordsAscending[y]={};const b=s.sourceCaches[y].getVisibleCoordinates(),E=s.sourceCaches[y].getSource(),M=E instanceof Qt?E.terrainTileRanges:null;for(const j of b){const V=this.terrain.sourceCache.getTerrainCoords(j,M);for(const Y in V)this._coordsAscending[y][Y]||(this._coordsAscending[y][Y]=[]),this._coordsAscending[y][Y].push(V[Y])}}this._coordsAscendingStr={};for(const y of s._order){const b=s._layers[y],E=b.source;if(Fr[b.type]&&!this._coordsAscendingStr[E]){this._coordsAscendingStr[E]={};for(const M in this._coordsAscending[E])this._coordsAscendingStr[E][M]=this._coordsAscending[E][M].map((j=>j.key)).sort().join()}}for(const y of this._renderableTiles)for(const b in this._coordsAscendingStr){const E=this._coordsAscendingStr[b][y.tileID.key];E&&E!==y.rttCoords[b]&&(y.rtt=[])}}renderLayer(s,c){if(s.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),b=s.type,E=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Fr[b]&&(this._prevType&&Fr[this._prevType]||this._stacks.push([]),this._prevType=b,this._stacks[this._stacks.length-1].push(s.id),!M))return!0;if(Fr[this._prevType]||Fr[b]&&M){this._prevType=b;const j=this._stacks.length-1,V=this._stacks[j]||[];for(const Y of this._renderableTiles){if(this.pool.isFull()&&(Ca(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Y),Y.rtt[j]){const ce=this.pool.getObjectForId(Y.rtt[j].id);if(ce.stamp===Y.rtt[j].stamp){this.pool.useObject(ce);continue}}const re=this.pool.getOrCreateFreeObject();this.pool.useObject(re),this.pool.stampObject(re),Y.rtt[j]={id:re.id,stamp:re.stamp},E.context.bindFramebuffer.set(re.fbo.framebuffer),E.context.clear({color:a.be.transparent,stencil:0}),E.currentStencilSource=void 0;for(let ce=0;ce<V.length;ce++){const oe=E.style._layers[V[ce]],ge=oe.source?this._coordsAscending[oe.source][Y.tileID.key]:[Y.tileID];E.context.viewport.set([0,0,re.fbo.width,re.fbo.height]),E._renderTileClippingMasks(oe,ge,!0),E.renderLayer(E,E.style.sourceCaches[oe.source],oe,ge,y),oe.source&&(Y.rttCoords[oe.source]=this._coordsAscendingStr[oe.source][Y.tileID.key])}}return Ca(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),Fr[b]}return!1}}const sa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Bi=p,za={hash:!1,interactive:!0,bearingSnap:7,attributionControl:oi,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},la={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Oa{constructor(s,c,y=!1){this.mousedown=E=>{this.startMove(E,x.mousePos(this.element,E)),x.addEventListener(window,"mousemove",this.mousemove),x.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.move(E,x.mousePos(this.element,E))},this.mouseup=E=>{this._rotatePitchHanlder.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,E.targetTouches)[0],this.startMove(E,this._startPos),x.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,E.targetTouches)[0],this.move(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const b=new he;this._rotatePitchHanlder=new Xc({clickTolerance:3,move:(E,M)=>{const j=c.getBoundingClientRect(),V=new a.P((j.bottom-j.top)/2,(j.right-j.left)/2);return{bearingDelta:a.cm(new a.P(E.x,M.y),M,V),pitchDelta:y?-.5*(M.y-E.y):void 0}},moveStateManager:b,enable:!0,assignEvents:()=>{}}),this.map=s,x.addEventListener(c,"mousedown",this.mousedown),x.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(c,"touchcancel",this.reset)}startMove(s,c){this._rotatePitchHanlder.dragStart(s,c),x.disableDrag()}move(s,c){const y=this.map,{bearingDelta:b,pitchDelta:E}=this._rotatePitchHanlder.dragMove(s,c)||{};b&&y.setBearing(y.getBearing()+b),E&&y.setPitch(y.getPitch()+E)}off(){const s=this.element;x.removeEventListener(s,"mousedown",this.mousedown),x.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend),x.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){x.enableDrag(),x.removeEventListener(window,"mousemove",this.mousemove),x.removeEventListener(window,"mouseup",this.mouseup),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend)}}let Ui;function Xi(S,s,c,y=!1){if(y||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return S?.wrap();const b=new a.S(S.lng,S.lat);if(S=new a.S(S.lng,S.lat),s){const E=new a.S(S.lng-360,S.lat),M=new a.S(S.lng+360,S.lat),j=c.locationToScreenPoint(S).distSqr(s);c.locationToScreenPoint(E).distSqr(s)<j?S=E:c.locationToScreenPoint(M).distSqr(s)<j&&(S=M)}for(;Math.abs(S.lng-c.center.lng)>180;){const E=c.locationToScreenPoint(S);if(E.x>=0&&E.y>=0&&E.x<=c.width&&E.y<=c.height)break;S.lng>c.center.lng?S.lng-=360:S.lng+=360}return S.lng!==b.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(S))?S:b}const ua={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function bi(S,s,c){const y=S.classList;for(const b in ua)y.remove(`maplibregl-${c}-anchor-${b}`);y.add(`maplibregl-${c}-anchor-${s}`)}class ci extends a.E{constructor(s){if(super(),this._onKeyPress=c=>{const y=c.code,b=c.charCode||c.keyCode;y!=="Space"&&y!=="Enter"&&b!==32&&b!==13||this.togglePopup()},this._onMapClick=c=>{const y=c.originalEvent.target,b=this._element;this._popup&&(y===b||b.contains(y))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(c?.type==="terrain"||c?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=Xi(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,`${ua[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${b}`),w.frameAsync(new AbortController).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s?.opacity,s?.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=a.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div");const c=x.createNS("http://www.w3.org/2000/svg","svg"),y=41,b=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${y}px`),c.setAttributeNS(null,"width",`${b}px`),c.setAttributeNS(null,"viewBox",`0 0 ${b} ${y}`);const E=x.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");const M=x.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const j=x.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const V=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Xe of V){const at=x.createNS("http://www.w3.org/2000/svg","ellipse");at.setAttributeNS(null,"opacity","0.04"),at.setAttributeNS(null,"cx","10.5"),at.setAttributeNS(null,"cy","5.80029008"),at.setAttributeNS(null,"rx",Xe.rx),at.setAttributeNS(null,"ry",Xe.ry),j.appendChild(at)}const Y=x.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"fill",this._color);const re=x.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Y.appendChild(re);const ce=x.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"fill","#000000");const oe=x.createNS("http://www.w3.org/2000/svg","path");oe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ce.appendChild(oe);const ge=x.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ge.setAttributeNS(null,"fill","#FFFFFF");const Me=x.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ze=x.createNS("http://www.w3.org/2000/svg","circle");Ze.setAttributeNS(null,"fill","#000000"),Ze.setAttributeNS(null,"opacity","0.25"),Ze.setAttributeNS(null,"cx","5.5"),Ze.setAttributeNS(null,"cy","5.5"),Ze.setAttributeNS(null,"r","5.4999962");const We=x.createNS("http://www.w3.org/2000/svg","circle");We.setAttributeNS(null,"fill","#FFFFFF"),We.setAttributeNS(null,"cx","5.5"),We.setAttributeNS(null,"cy","5.5"),We.setAttributeNS(null,"r","5.4999962"),Me.appendChild(Ze),Me.appendChild(We),M.appendChild(j),M.appendChild(Y),M.appendChild(ce),M.appendChild(ge),M.appendChild(Me),c.appendChild(M),c.setAttributeNS(null,"height",y*this._scale+"px"),c.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(c),this._offset=a.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),bi(this._element,this._anchor,"marker"),s&&s.className)for(const c of s.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=a.S.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const b=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var c,y;const b=(c=this._map)===null||c===void 0?void 0:c.terrain,E=this._map.transform.isLocationOccluded(this._lngLat);if(!b||E){const ge=E?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ge&&(this._element.style.opacity=ge))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const M=this._map,j=M.terrain.depthAtPoint(this._pos),V=M.terrain.getElevationForLngLatZoom(this._lngLat,M.transform.tileZoom);if(M.transform.lngLatToCameraDepth(this._lngLat,V)-j<.006)return void(this._element.style.opacity=this._opacity);const Y=-this._offset.y/M.transform.pixelsPerMeter,re=Math.sin(M.getPitch()*Math.PI/180)*Y,ce=M.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),oe=M.transform.lngLatToCameraDepth(this._lngLat,V+re)-ce>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&oe&&this._popup.remove(),this._element.style.opacity=oe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=a.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,c){return(this._opacity===void 0||s===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Es={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ya=0,$a=!1;const us={maxWidth:100,unit:"metric"};function Vi(S,s,c){const y=c&&c.maxWidth||100,b=S._container.clientHeight/2,E=S._container.clientWidth/2,M=S.unproject([E-y/2,b]),j=S.unproject([E+y/2,b]),V=Math.round(S.project(j).x-S.project(M).x),Y=Math.min(y,V,S._container.clientWidth),re=M.distanceTo(j);if(c&&c.unit==="imperial"){const ce=3.2808*re;ce>5280?so(s,Y,ce/5280,S._getUIString("ScaleControl.Miles")):so(s,Y,ce,S._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?so(s,Y,re/1852,S._getUIString("ScaleControl.NauticalMiles")):re>=1e3?so(s,Y,re/1e3,S._getUIString("ScaleControl.Kilometers")):so(s,Y,re,S._getUIString("ScaleControl.Meters"))}function so(S,s,c,y){const b=(function(E){const M=Math.pow(10,`${Math.floor(E)}`.length-1);let j=E/M;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:(function(V){const Y=Math.pow(10,Math.ceil(-Math.log(V)/Math.LN10));return Math.round(V*Y)/Y})(j),M*j})(c);S.style.width=s*(b/c)+"px",S.innerHTML=`${b}&nbsp;${y}`}const cs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},gu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ol(S){if(S){if(typeof S=="number"){const s=Math.round(Math.abs(S)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,S),"top-left":new a.P(s,s),"top-right":new a.P(-s,s),bottom:new a.P(0,-S),"bottom-left":new a.P(s,-s),"bottom-right":new a.P(-s,-s),left:new a.P(S,0),right:new a.P(-S,0)}}if(S instanceof a.P||Array.isArray(S)){const s=a.P.convert(S);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:a.P.convert(S.center||[0,0]),top:a.P.convert(S.top||[0,0]),"top-left":a.P.convert(S["top-left"]||[0,0]),"top-right":a.P.convert(S["top-right"]||[0,0]),bottom:a.P.convert(S.bottom||[0,0]),"bottom-left":a.P.convert(S["bottom-left"]||[0,0]),"bottom-right":a.P.convert(S["bottom-right"]||[0,0]),left:a.P.convert(S.left||[0,0]),right:a.P.convert(S.right||[0,0])}}return ol(new a.P(0,0))}const lo=p;u.AJAXError=a.cy,u.Event=a.l,u.Evented=a.E,u.LngLat=a.S,u.MercatorCoordinate=a.a0,u.Point=a.P,u.addProtocol=a.cz,u.config=a.a,u.removeProtocol=a.cA,u.AttributionControl=Ki,u.BoxZoomHandler=bd,u.CanvasSource=rt,u.CooperativeGesturesHandler=Xa,u.DoubleClickZoomHandler=Lr,u.DragPanHandler=Qn,u.DragRotateHandler=vn,u.EdgeInsets=Nr,u.FullscreenControl=class extends a.E{constructor(S={}){super(),this._onFullscreenChange=()=>{var s;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=c?.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){x.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const S=this._fullscreenButton=x.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);x.create("span","maplibregl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=vr,u.GeolocateControl=class extends a.E{constructor(S){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{const c=new a.S(s.coords.longitude,s.coords.latitude),y=s.coords.accuracy,b=this._map.getBearing(),E=a.e({bearing:b},this.options.fitBoundsOptions),M=It.fromLngLat(c,y);this._map.fitBounds(M,E,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const c=new a.S(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&$a)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(s=>s.preventDefault())),this._geolocateButton=x.create("button","maplibregl-ctrl-geolocate",this._container),x.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ci({element:this._dotElement}),this._circleElement=x.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ci({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))}))}},this.options=a.e({},Es,S)}onAdd(S){return this._map=S,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(s=!1){if(Ui!==void 0&&!s)return Ui;if(window.navigator.permissions===void 0)return Ui=!!window.navigator.geolocation,Ui;try{Ui=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ui=!!window.navigator.geolocation}return Ui}))})().then((s=>this._finishSetupUI(s))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ya=0,$a=!1}_isOutOfMapMaxBounds(S){const s=this._map.getMaxBounds(),c=S.coords;return s&&(c.longitude<s.getWest()||c.longitude>s.getEast()||c.latitude<s.getSouth()||c.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const S=this._map.getBounds(),s=S.getSouthEast(),c=S.getNorthEast(),y=s.distanceTo(c),b=Math.ceil(this._accuracy/(y/this._map._container.clientHeight)*2);this._circleElement.style.width=`${b}px`,this._circleElement.style.height=`${b}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ya--,$a=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ya++,Ya>1?(S={maximumAge:6e5,timeout:0},$a=!0):(S=this.options.positionOptions,$a=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,S)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.GlobeControl=class{constructor(){this._toggleProjection=()=>{var S;const s=(S=this._map.getProjection())===null||S===void 0?void 0:S.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var S;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((S=this._map.getProjection())===null||S===void 0?void 0:S.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(S){return this._map=S,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=x.create("button","maplibregl-ctrl-globe",this._container),x.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},u.Hash=Bf,u.ImageSource=Qt,u.KeyboardHandler=gr,u.LngLatBounds=It,u.LogoControl=oo,u.Map=class extends fn{constructor(S){var s,c;a.cv.mark(a.cw.create);const y=Object.assign(Object.assign(Object.assign({},za),S),{canvasContextAttributes:Object.assign(Object.assign({},za.canvasContextAttributes),S.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const b=new Dn,E=new Bu;if(y.minZoom!==void 0&&b.setMinZoom(y.minZoom),y.maxZoom!==void 0&&b.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&b.setMinPitch(y.minPitch),y.maxPitch!==void 0&&b.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&b.setRenderWorldCopies(y.renderWorldCopies),super(b,E,{bearingSnap:y.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Go,this._controls=[],this._mapId=a.a6(),this._contextLost=j=>{j.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:j}))},this._contextRestored=j=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:j}))},this._onMapScroll=j=>{if(j.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},sa),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=D.addThrottleControl((()=>this.isMoving())),this._requestManager=new U(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let j=!1;const V=ls((Y=>{this._trackResize&&!this._removed&&(this.resize(Y),this.redraw())}),50);this._resizeObserver=new ResizeObserver((Y=>{j?V(Y):j=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Zi(this,y),this._hash=y.hash&&new Bf(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,a.e({},y.fitBoundsOptions,{duration:0}))));const M=typeof y.style=="string"||((c=(s=y.style)===null||s===void 0?void 0:s.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Ki(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new oo,y.logoPosition),this.on("style.load",(()=>{if(M||this._resizeTransform(),this.transform.unmodified){const j=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(j)}})),this.on("data",(j=>{this._update(j.dataType==="style"),this.fire(new a.l(`${j.dataType}data`,j))})),this.on("dataloading",(j=>{this.fire(new a.l(`${j.dataType}dataloading`,j))})),this.on("dataabort",(j=>{this.fire(new a.l("sourcedataabort",j))}))}_getMapId(){return this._mapId}setGlobalStateProperty(S,s){return this.style.setGlobalStateProperty(S,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(S,s){if(s===void 0&&(s=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=S.onAdd(this);this._controls.push(S);const y=this._controlPositions[s];return s.indexOf("bottom")!==-1?y.insertBefore(c,y.firstChild):y.appendChild(c),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(S);return s>-1&&this._controls.splice(s,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}calculateCameraOptionsFromTo(S,s,c,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(S,s,c,y)}resize(S,s=!0){const[c,y]=this._containerDimensions(),b=this._getClampedPixelRatio(c,y);if(this._resizeCanvas(c,y,b),this.painter.resize(c,y,b),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const j=this._getClampedPixelRatio(c,y);this._resizeCanvas(c,y,j),this.painter.resize(c,y,j)}this._resizeTransform(s);const E=!this._moving;return E&&(this.stop(),this.fire(new a.l("movestart",S)).fire(new a.l("move",S))),this.fire(new a.l("resize",S)),E&&this.fire(new a.l("moveend",S)),this}_resizeTransform(S=!0){var s;const[c,y]=this._containerDimensions();this.transform.resize(c,y,S),(s=this._requestedCameraState)===null||s===void 0||s.resize(c,y,S)}_getClampedPixelRatio(S,s){const{0:c,1:y}=this._maxCanvasSize,b=this.getPixelRatio(),E=S*b,M=s*b;return Math.min(E>c?c/E:1,M>y?y/M:1)*b}getPixelRatio(){var S;return(S=this._overridePixelRatio)!==null&&S!==void 0?S:devicePixelRatio}setPixelRatio(S){this._overridePixelRatio=S,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(S){return this.transform.setMaxBounds(It.convert(S)),this._update()}setMinZoom(S){if((S=S??-2)>=-2&&S<=this.transform.maxZoom)return this.transform.setMinZoom(S),this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S??22)>=this.transform.minZoom)return this.transform.setMaxZoom(S),this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.setMinPitch(S),this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(S>=this.transform.minPitch)return this.transform.setMaxPitch(S),this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.setRenderWorldCopies(S),this._update()}project(S){return this.transform.locationToScreenPoint(a.S.convert(S),this.style&&this.terrain)}unproject(S){return this.transform.screenPointToLocation(a.P.convert(S),this.terrain)}isMoving(){var S;return this._moving||((S=this.handlers)===null||S===void 0?void 0:S.isMoving())}isZooming(){var S;return this._zooming||((S=this.handlers)===null||S===void 0?void 0:S.isZooming())}isRotating(){var S;return this._rotating||((S=this.handlers)===null||S===void 0?void 0:S.isRotating())}_createDelegatedListener(S,s,c){if(S==="mouseenter"||S==="mouseover"){let y=!1;return{layers:s,listener:c,delegates:{mousemove:E=>{const M=s.filter((V=>this.getLayer(V))),j=M.length!==0?this.queryRenderedFeatures(E.point,{layers:M}):[];j.length?y||(y=!0,c.call(this,new Vo(S,this,E.originalEvent,{features:j}))):y=!1},mouseout:()=>{y=!1}}}}if(S==="mouseleave"||S==="mouseout"){let y=!1;return{layers:s,listener:c,delegates:{mousemove:M=>{const j=s.filter((V=>this.getLayer(V)));(j.length!==0?this.queryRenderedFeatures(M.point,{layers:j}):[]).length?y=!0:y&&(y=!1,c.call(this,new Vo(S,this,M.originalEvent)))},mouseout:M=>{y&&(y=!1,c.call(this,new Vo(S,this,M.originalEvent)))}}}}{const y=b=>{const E=s.filter((j=>this.getLayer(j))),M=E.length!==0?this.queryRenderedFeatures(b.point,{layers:E}):[];M.length&&(b.features=M,c.call(this,b),delete b.features)};return{layers:s,listener:c,delegates:{[S]:y}}}}_saveDelegatedListener(S,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(s)}_removeDelegatedListener(S,s,c){if(!this._delegatedListeners||!this._delegatedListeners[S])return;const y=this._delegatedListeners[S];for(let b=0;b<y.length;b++){const E=y[b];if(E.listener===c&&E.layers.length===s.length&&E.layers.every((M=>s.includes(M)))){for(const M in E.delegates)this.off(M,E.delegates[M]);return void y.splice(b,1)}}}on(S,s,c){if(c===void 0)return super.on(S,s);const y=typeof s=="string"?[s]:s,b=this._createDelegatedListener(S,y,c);this._saveDelegatedListener(S,b);for(const E in b.delegates)this.on(E,b.delegates[E]);return{unsubscribe:()=>{this._removeDelegatedListener(S,y,c)}}}once(S,s,c){if(c===void 0)return super.once(S,s);const y=typeof s=="string"?[s]:s,b=this._createDelegatedListener(S,y,c);for(const E in b.delegates){const M=b.delegates[E];b.delegates[E]=(...j)=>{this._removeDelegatedListener(S,y,c),M(...j)}}this._saveDelegatedListener(S,b);for(const E in b.delegates)this.once(E,b.delegates[E]);return this}off(S,s,c){return c===void 0?super.off(S,s):(this._removeDelegatedListener(S,typeof s=="string"?[s]:s,c),this)}queryRenderedFeatures(S,s){if(!this.style)return[];let c;const y=S instanceof a.P||Array.isArray(S),b=y?S:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(y?{}:S)||{},b instanceof a.P||typeof b[0]=="number")c=[a.P.convert(b)];else{const E=a.P.convert(b[0]),M=a.P.convert(b[1]);c=[E,new a.P(M.x,E.y),M,new a.P(E.x,M.y),E]}return this.style.queryRenderedFeatures(c,s,this.transform)}querySourceFeatures(S,s){return this.style.querySourceFeatures(S,s)}setStyle(S,s){return(s=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(S,s))}setTransformRequest(S){return this._requestManager.setTransformRequest(S),this}_getUIString(S){const s=this._locale[S];if(s==null)throw new Error(`Missing UI string '${S}'`);return s}_updateStyle(S,s){var c,y;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(S,s)));const b=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!S)),S?(this.style=new is(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S,s,b):this.style.loadJSON(S,s,b),this):((y=(c=this.style)===null||c===void 0?void 0:c.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new is(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,s){if(typeof S=="string"){const c=this._requestManager.transformRequest(S,"Style");a.j(c,new AbortController).then((y=>{this._updateDiff(y.data,s)})).catch((y=>{y&&this.fire(new a.k(y))}))}else typeof S=="object"&&this._updateDiff(S,s)}_updateDiff(S,s){try{this.style.setState(S,s)&&this._update(!0)}catch(c){a.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(S,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(S,s){return this._lazyInitEmptyStyle(),this.style.addSource(S,s),this._update(!0)}isSourceLoaded(S){const s=this.style&&this.style.sourceCaches[S];if(s!==void 0)return s.loaded();this.fire(new a.k(new Error(`There is no source with ID '${S}'`)))}setTerrain(S){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),S){const s=this.style.sourceCaches[S.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${S.source}`);this.terrain===null&&s.reload();for(const c in this.style._layers){const y=this.style._layers[c];y.type==="hillshade"&&y.source===S.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===S.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ma(this.painter,s,S),this.painter.renderToTexture=new Yr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var y;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==S.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=c.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:S})),this}getTerrain(){var S,s;return(s=(S=this.terrain)===null||S===void 0?void 0:S.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const S=this.style&&this.style.sourceCaches;for(const s in S){const c=S[s]._tiles;for(const y in c){const b=c[y];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}removeSource(S){return this.style.removeSource(S),this._update(!0)}getSource(S){return this.style.getSource(S)}setSourceTileLodParams(S,s,c){if(c){const y=this.getSource(c);if(!y)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);y.calculateTileZoom=Mt(Math.max(1,S),Math.max(1,s))}else for(const y in this.style.sourceCaches)this.style.sourceCaches[y].getSource().calculateTileZoom=Mt(Math.max(1,S),Math.max(1,s));return this._update(!0),this}refreshTiles(S,s){const c=this.style.sourceCaches[S];if(!c)throw new Error(`There is no source cache with ID "${S}", cannot refresh tile`);s===void 0?c.reload(!0):c.refreshTiles(s.map((y=>new a.a3(y.z,y.x,y.y))))}addImage(S,s,c={}){const{pixelRatio:y=1,sdf:b=!1,stretchX:E,stretchY:M,content:j,textFitWidth:V,textFitHeight:Y}=c;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||a.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:re,height:ce,data:oe}=s,ge=s;return this.style.addImage(S,{data:new a.R({width:re,height:ce},new Uint8Array(oe)),pixelRatio:y,stretchX:E,stretchY:M,content:j,textFitWidth:V,textFitHeight:Y,sdf:b,version:0,userImage:ge}),ge.onAdd&&ge.onAdd(this,S),this}}{const{width:re,height:ce,data:oe}=w.getImageData(s);this.style.addImage(S,{data:new a.R({width:re,height:ce},oe),pixelRatio:y,stretchX:E,stretchY:M,content:j,textFitWidth:V,textFitHeight:Y,sdf:b,version:0})}}updateImage(S,s){const c=this.style.getImage(S);if(!c)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=s instanceof HTMLImageElement||a.b(s)?w.getImageData(s):s,{width:b,height:E,data:M}=y;if(b===void 0||E===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==c.data.width||E!==c.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(s instanceof HTMLImageElement||a.b(s));return c.data.replace(M,j),this.style.updateImage(S,c),this}getImage(S){return this.style.getImage(S)}hasImage(S){return S?!!this.style.getImage(S):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S){return D.getImage(this._requestManager.transformRequest(S,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(S,s){return this._lazyInitEmptyStyle(),this.style.addLayer(S,s),this._update(!0)}moveLayer(S,s){return this.style.moveLayer(S,s),this._update(!0)}removeLayer(S){return this.style.removeLayer(S),this._update(!0)}getLayer(S){return this.style.getLayer(S)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(S,s,c){return this.style.setLayerZoomRange(S,s,c),this._update(!0)}setFilter(S,s,c={}){return this.style.setFilter(S,s,c),this._update(!0)}getFilter(S){return this.style.getFilter(S)}setPaintProperty(S,s,c,y={}){return this.style.setPaintProperty(S,s,c,y),this._update(!0)}getPaintProperty(S,s){return this.style.getPaintProperty(S,s)}setLayoutProperty(S,s,c,y={}){return this.style.setLayoutProperty(S,s,c,y),this._update(!0)}getLayoutProperty(S,s){return this.style.getLayoutProperty(S,s)}setGlyphs(S,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(S,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(S,s,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(S,s,c,(y=>{y||this._update(!0)})),this}removeSprite(S){return this._lazyInitEmptyStyle(),this.style.removeSprite(S),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(S,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(S,s,(c=>{c||this._update(!0)})),this}setLight(S,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(S,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(S,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(S,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(S,s){return this.style.setFeatureState(S,s),this._update()}removeFeatureState(S,s){return this.style.removeFeatureState(S,s),this._update()}getFeatureState(S){return this.style.getFeatureState(S)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let S=0,s=0;return this._container&&(S=this._container.clientWidth||400,s=this._container.clientHeight||300),[S,s]}_setupContainer(){const S=this._container;S.classList.add("maplibregl-map");const s=this._canvasContainer=x.create("div","maplibregl-canvas-container",S);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=x.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),y=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],y);const b=this._controlContainer=x.create("div","maplibregl-control-container",S),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((M=>{E[M]=x.create("div",`maplibregl-ctrl-${M} `,b)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,s,c){this._canvas.width=Math.floor(c*S),this._canvas.height=Math.floor(c*s),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const S=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let s=null;this._canvas.addEventListener("webglcontextcreationerror",(y=>{s={requestedAttributes:S},y&&(s.statusMessage=y.statusMessage,s.type=y.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,S):this._canvas.getContext("webgl2",S)||this._canvas.getContext("webgl",S),!c){const y="Failed to initialize WebGL";throw s?(s.message=y,new Error(JSON.stringify(s))):new Error(y)}this.painter=new ao(c,this.transform),P.testSupport(c)}migrateProjection(S,s){super.migrateProjection(S,s),this.painter.transform=S,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_render(S){var s,c,y,b,E;const M=this._idleTriggered?this._fadeDuration:0,j=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),this._removed)return;let V=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ce=this.transform.zoom,oe=w.now();this.style.zoomHistory.update(ce,oe);const ge=new a.F(ce,{now:oe,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),Me=ge.crossFadingFactor();Me===1&&Me===this._crossFadingFactor||(V=!0,this._crossFadingFactor=Me),this.style.update(ge)}const Y=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==j;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((b=this.style.projection)===null||b===void 0?void 0:b.transitionState,(E=this.style.projection)===null||E===void 0?void 0:E.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||Y)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,Y),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cv.mark(a.cw.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||V)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const re=this._sourcesDirty||this._styleDirty||this._placementDirty;return re||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||re||(this._fullyLoaded=!0,a.cv.mark(a.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var S;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),D.removeThrottleControl(this._imageQueueHandle),(S=this._resizeObserver)===null||S===void 0||S.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s?.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),x.remove(this._canvasContainer),x.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cv.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,w.frame(this._frameRequest,(S=>{a.cv.frame(S),this._frameRequest=null;try{this._render(S)}catch(s){if(!a.cx(s)&&!(function(c){return c.message===io})(s))throw s}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get version(){return Bi}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(S){return this._lazyInitEmptyStyle(),this.style.setProjection(S),this._update(!0)}},u.MapMouseEvent=Vo,u.MapTouchEvent=Cl,u.MapWheelEvent=Eh,u.Marker=ci,u.NavigationControl=class{constructor(S){this._updateZoomButtons=()=>{const s=this._map.getZoom(),c=s===this._map.getMaxZoom(),y=s===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,c)=>{const y=this._map._getUIString(`NavigationControl.${c}`);s.title=y,s.setAttribute("aria-label",y)},this.options=a.e({},la,S),this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(s=>s.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(s=>this._map.zoomIn({},{originalEvent:s}))),x.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(s=>this._map.zoomOut({},{originalEvent:s}))),x.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})})),this._compassIcon=x.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Oa(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(S,s){const c=x.create("button",S,this._container);return c.type="button",c.addEventListener("click",s),c}},u.Popup=class extends a.E{constructor(S){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=x.create("div","maplibregl-popup",this._map.getContainer()),this._tip=x.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Xi(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;const c=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const b=ol(this.options.offset);if(!y){const M=this._container.offsetWidth,j=this._container.offsetHeight;let V;V=c.y+b.bottom.y<j?["top"]:c.y>this._map.transform.height-j?["bottom"]:[],c.x<M/2?V.push("left"):c.x>this._map.transform.width-M/2&&V.push("right"),y=V.length===0?"bottom":V.join("-")}let E=c.add(b[y]);this.options.subpixelPositioning||(E=E.round()),x.setTransform(this._container,`${ua[y]} translate(${E.x}px,${E.y}px)`),bi(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(cs),S)}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(S){return this._lngLat=a.S.convert(S),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){const s=document.createDocumentFragment(),c=document.createElement("body");let y;for(c.innerHTML=S;y=c.firstChild,y;)s.appendChild(y);return this.setDOMContent(s)}getMaxWidth(){var S;return(S=this._container)===null||S===void 0?void 0:S.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(S),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(S){return this._container&&this._container.classList.add(S),this}removeClassName(S){return this._container&&this._container.classList.remove(S),this}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){if(this._container)return this._container.classList.toggle(S)}setSubpixelPositioning(S){this.options.subpixelPositioning=S}_createCloseButton(){this.options.closeButton&&(this._closeButton=x.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const S=this._container.querySelector(gu);S&&S.focus()}},u.RasterDEMTileSource=hr,u.RasterTileSource=pr,u.ScaleControl=class{constructor(S){this._onMove=()=>{Vi(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,Vi(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},us),S)}getDefaultPosition(){return"bottom-left"}onAdd(S){return this._map=S,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=qr,u.Style=is,u.TerrainControl=class{constructor(S){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=S}onAdd(S){return this._map=S,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=x.create("button","maplibregl-ctrl-terrain",this._container),x.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){x.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=Vt,u.TwoFingersTouchRotateHandler=sr,u.TwoFingersTouchZoomHandler=st,u.TwoFingersTouchZoomRotateHandler=ui,u.VectorTileSource=Le,u.VideoSource=qe,u.addSourceType=(S,s)=>a._(void 0,void 0,void 0,(function*(){if(Ft(S))throw new Error(`A source type called "${S}" already exists.`);((c,y)=>{ct[c]=y})(S,s)})),u.clearPrewarmedResources=function(){const S=_e;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(Fe),_e=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.createTileMesh=vl,u.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return br().getRTLTextPluginStatus()},u.getVersion=function(){return lo},u.getWorkerCount=function(){return Ke.workerCount},u.getWorkerUrl=function(){return a.a.WORKER_URL},u.importScriptInWorkers=function(S){return ht().broadcast("IS",S)},u.prewarm=function(){ke().acquire(Fe)},u.setMaxParallelImageRequests=function(S){a.a.MAX_PARALLEL_IMAGE_REQUESTS=S},u.setRTLTextPlugin=function(S,s){return br().setRTLTextPlugin(S,s)},u.setWorkerCount=function(S){Ke.workerCount=S},u.setWorkerUrl=function(S){a.a.WORKER_URL=S}}));var o=r;return o}))})(d_)),d_.exports}var TX=PX();class IX{registeredElements;baseLayers;firstSymbolLayer;eventHandlers;wrapper;initRegisteredElements;addNativeMaplibreFunctionsAndProps;map;style;styleJson;addSource;addControl;on;cleanup;constructor(t){const r=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[],addsource:[],addlayer:[]},this.wrapper={on:(a,p,h,m)=>{if(!r.eventHandlers[a])return;typeof h=="string"&&(m=h,h={}),r.eventHandlers[a].push({handler:p,options:h});const v=[a,p];m&&typeof m=="string"&&(r.initRegisteredElements(m),r.registeredElements[m].wrapperEvents.push(v))},off:(a,p)=>{r.eventHandlers[a]&&(r.eventHandlers[a]=r.eventHandlers[a].filter(h=>Object.is(h.handler,p)?!1:h))},fire:(a,p)=>{if(!r.eventHandlers[a])return;const h=p||window,m=new Event(a);r.eventHandlers[a].forEach(function(v){v.handler.call(h,m,r,p)})},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:a=>{if(a)return{id:a.id,type:a.type,visible:a.visibility!=="none",baseLayer:r.baseLayers.indexOf(a.id)!==-1}},buildLayerObjects:()=>r.map.style._order.map(a=>r.wrapper.buildLayerObject(r.map.style._layers[a])).filter(a=>typeof a<"u"),refreshLayerState:()=>{r.wrapper.layerState=r.wrapper.buildLayerObjects(),JSON.stringify(r.wrapper.layerState)!==r.wrapper.layerStateString&&(r.wrapper.fire("layerchange"),r.wrapper.layerStateString=JSON.stringify(r.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:()=>typeof r.map.getCenter=="function"?{center:(({lng:a,lat:p})=>({lng:a,lat:p}))(r.map.getCenter()),zoom:r.map.getZoom(),bearing:r.map.getBearing(),pitch:r.map.getPitch()}:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},refreshViewport:()=>{r.wrapper.viewportState=r.wrapper.getViewport()}},this.cancelled=!1,this.initRegisteredElements=(a,p)=>{(typeof r.registeredElements[a]>"u"||typeof p<"u"&&p)&&(r.registeredElements[a]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=(a,p,h)=>r.map.style?(h&&typeof h=="string"&&typeof a.id<"u"&&(r.initRegisteredElements(h),r.registeredElements[h].layers.push(a.id),a?.source&&typeof a?.source!="string"&&r.registeredElements[h].sources.push(a.id)),r.map.addLayer(a,p),r.wrapper.fire("addlayer",{layer_id:a.id}),this):this,this.addSource=(a,p,h)=>r.map.style?(h&&typeof h=="string"&&typeof a<"u"&&(r.initRegisteredElements(h),r.registeredElements[h].sources.push(a)),r.map.addSource(a,p),r.wrapper.fire("addsource",{source_id:a}),this):this,this.addImage=(a,p,h,m)=>r.map.style?typeof h=="string"&&typeof m>"u"?r.addImage(a,p,void 0,h):(m&&typeof m=="string"&&typeof a<"u"&&(r.initRegisteredElements(m),r.registeredElements[m].images.push(a)),r.map.addImage(a,p,h),this):this,this.on=(a,p,h,m)=>{if(typeof h=="string"&&typeof p=="function")return r.on.call(r,a,void 0,p,h);let v=[a,p,h];return p||(v=[a,h]),m&&typeof m=="string"&&(r.initRegisteredElements(m),r.registeredElements[m].events.push(v)),r.map.on(...v),this},this.addControl=(a,p,h)=>(h&&typeof h=="string"&&(r.initRegisteredElements(h),r.registeredElements[h].controls.push(a)),r.map.addControl(a,p),this),this.cleanup=a=>{r.map.style&&typeof r.registeredElements[a]<"u"&&(r.registeredElements[a].layers.forEach(p=>{r.map.style.getLayer(p)&&r.map.style.removeLayer(p)}),r.registeredElements[a].sources.forEach(p=>{r.map.style.getSource(p)&&r.map.style.removeSource(p)}),r.registeredElements[a].images.forEach(p=>{r.map.hasImage(p)&&r.map.style.removeImage(p)}),r.registeredElements[a].events.forEach(p=>{r.map.off(...p)}),r.registeredElements[a].controls.forEach(p=>{r.map.removeControl(p)}),r.registeredElements[a].wrapperEvents.forEach(p=>{r.wrapper.off(...p)}),r.initRegisteredElements(a,!0))},["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"].forEach(a=>{this[a]=(...p)=>(r.map&&r.map.style&&typeof r.map.style[a]=="function"&&r.map.style[a](...p),r.map._update?r.map._update(!0):void 0)}),["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"].forEach(a=>{this[a]=(...p)=>r.map&&r.map.style?r.map.style[a](...p):!1}),this.addNativeMaplibreFunctionsAndProps=()=>{Object.getOwnPropertyNames(Object.getPrototypeOf(this.map)).forEach(a=>{typeof this[a]>"u"&&(this[a]=(...p)=>r.map[a](...p))}),Object.keys(this.map).forEach(a=>{typeof this[a]>"u"&&(this[a]=r.map[a])})},["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"].forEach(a=>{this[a]=(...p)=>{if(typeof r.map[a]=="function")return r.map[a].call(r.map,...p)}}),(async()=>{typeof t.mapOptions.style=="string"&&t.mapOptions.style.indexOf("mapbox://")===-1&&await fetch(t.mapOptions.style).then(a=>{if(a.ok)return a.json();throw new Error("error loading map style.json")}).then(a=>{a.layers.forEach(p=>{r.baseLayers.push(p.id),!r.firstSymbolLayer&&p.type==="symbol"&&(r.firstSymbolLayer=p.id)}),r.styleJson=a,t.mapOptions.style=a}).catch(a=>{console.log(a)}),r.map=new TX.Map(t.mapOptions),r.addNativeMaplibreFunctionsAndProps(),r.wrapper.refreshViewport(),r.wrapper.fire("viewportchange"),r.map.on("load",()=>{r.addNativeMaplibreFunctionsAndProps()}),r.map.on("move",()=>{r.wrapper.viewportState=r.wrapper.getViewport(),r.wrapper.fire("viewportchange")}),r.map.on("idle",()=>{r.wrapper.refreshLayerState()}),r.map.on("data",()=>{r.wrapper.refreshLayerState()}),typeof t.onReady=="function"&&t.onReady(r.map,r)})()}}function ch(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}const Wu="$$material";function U_(){return U_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U_.apply(null,arguments)}function MX(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function RX(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var OX=(function(){function e(r){var n=this;this._insertTag=function(i){var o;n.tags.length===0?n.insertionPoint?o=n.insertionPoint.nextSibling:n.prepend?o=n.container.firstChild:o=n.before:o=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,o),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(RX(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=MX(i);try{o.insertRule(n,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e})(),dl="-ms-",V_="-moz-",Qi="-webkit-",P$="comm",z3="rule",$3="decl",kX="@import",T$="@keyframes",LX="@layer",DX=Math.abs,cx=String.fromCharCode,NX=Object.assign;function FX(e,t){return $s(e,0)^45?(((t<<2^$s(e,0))<<2^$s(e,1))<<2^$s(e,2))<<2^$s(e,3):0}function I$(e){return e.trim()}function BX(e,t){return(e=t.exec(e))?e[0]:e}function ea(e,t,r){return e.replace(t,r)}function EP(e,t){return e.indexOf(t)}function $s(e,t){return e.charCodeAt(t)|0}function Wv(e,t,r){return e.slice(t,r)}function lf(e){return e.length}function q3(e){return e.length}function wb(e,t){return t.push(e),e}function jX(e,t){return e.map(t).join("")}var fx=1,ug=1,M$=0,tu=0,Qo=0,_g="";function hx(e,t,r,n,i,o,u){return{value:e,root:t,parent:r,type:n,props:i,children:o,line:fx,column:ug,length:u,return:""}}function Ey(e,t){return NX(hx("",null,null,"",null,null,0),e,{length:-e.length},t)}function zX(){return Qo}function $X(){return Qo=tu>0?$s(_g,--tu):0,ug--,Qo===10&&(ug=1,fx--),Qo}function Mu(){return Qo=tu<M$?$s(_g,tu++):0,ug++,Qo===10&&(ug=1,fx++),Qo}function gf(){return $s(_g,tu)}function p_(){return tu}function _0(e,t){return Wv(_g,e,t)}function Zv(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R$(e){return fx=ug=1,M$=lf(_g=e),tu=0,[]}function O$(e){return _g="",e}function m_(e){return I$(_0(tu-1,CP(e===91?e+2:e===40?e+1:e)))}function qX(e){for(;(Qo=gf())&&Qo<33;)Mu();return Zv(e)>2||Zv(Qo)>3?"":" "}function UX(e,t){for(;--t&&Mu()&&!(Qo<48||Qo>102||Qo>57&&Qo<65||Qo>70&&Qo<97););return _0(e,p_()+(t<6&&gf()==32&&Mu()==32))}function CP(e){for(;Mu();)switch(Qo){case e:return tu;case 34:case 39:e!==34&&e!==39&&CP(Qo);break;case 40:e===41&&CP(e);break;case 92:Mu();break}return tu}function VX(e,t){for(;Mu()&&e+Qo!==57;)if(e+Qo===84&&gf()===47)break;return"/*"+_0(t,tu-1)+"*"+cx(e===47?e:Mu())}function GX(e){for(;!Zv(gf());)Mu();return _0(e,tu)}function HX(e){return O$(g_("",null,null,null,[""],e=R$(e),0,[0],e))}function g_(e,t,r,n,i,o,u,a,p){for(var h=0,m=0,v=u,w=0,x=0,P=0,T=1,R=1,k=1,N=0,F="",D=i,U=o,B=n,Z=F;R;)switch(P=N,N=Mu()){case 40:if(P!=108&&$s(Z,v-1)==58){EP(Z+=ea(m_(N),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:Z+=m_(N);break;case 9:case 10:case 13:case 32:Z+=qX(P);break;case 92:Z+=UX(p_()-1,7);continue;case 47:switch(gf()){case 42:case 47:wb(WX(VX(Mu(),p_()),t,r),p);break;default:Z+="/"}break;case 123*T:a[h++]=lf(Z)*k;case 125*T:case 59:case 0:switch(N){case 0:case 125:R=0;case 59+m:k==-1&&(Z=ea(Z,/\f/g,"")),x>0&&lf(Z)-v&&wb(x>32?Fk(Z+";",n,r,v-1):Fk(ea(Z," ","")+";",n,r,v-2),p);break;case 59:Z+=";";default:if(wb(B=Nk(Z,t,r,h,m,i,a,F,D=[],U=[],v),o),N===123)if(m===0)g_(Z,t,B,B,D,o,v,a,U);else switch(w===99&&$s(Z,3)===110?100:w){case 100:case 108:case 109:case 115:g_(e,B,B,n&&wb(Nk(e,B,B,0,0,i,a,F,i,D=[],v),U),i,U,v,a,n?D:U);break;default:g_(Z,B,B,B,[""],U,0,a,U)}}h=m=x=0,T=k=1,F=Z="",v=u;break;case 58:v=1+lf(Z),x=P;default:if(T<1){if(N==123)--T;else if(N==125&&T++==0&&$X()==125)continue}switch(Z+=cx(N),N*T){case 38:k=m>0?1:(Z+="\f",-1);break;case 44:a[h++]=(lf(Z)-1)*k,k=1;break;case 64:gf()===45&&(Z+=m_(Mu())),w=gf(),m=v=lf(F=Z+=GX(p_())),N++;break;case 45:P===45&&lf(Z)==2&&(T=0)}}return o}function Nk(e,t,r,n,i,o,u,a,p,h,m){for(var v=i-1,w=i===0?o:[""],x=q3(w),P=0,T=0,R=0;P<n;++P)for(var k=0,N=Wv(e,v+1,v=DX(T=u[P])),F=e;k<x;++k)(F=I$(T>0?w[k]+" "+N:ea(N,/&\f/g,w[k])))&&(p[R++]=F);return hx(e,t,r,i===0?z3:a,p,h,m)}function WX(e,t,r){return hx(e,t,r,P$,cx(zX()),Wv(e,2,-2),0)}function Fk(e,t,r,n){return hx(e,t,r,$3,Wv(e,0,n),Wv(e,n+1,-1),n)}function Km(e,t){for(var r="",n=q3(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function ZX(e,t,r,n){switch(e.type){case LX:if(e.children.length)break;case kX:case $3:return e.return=e.return||e.value;case P$:return"";case T$:return e.return=e.value+"{"+Km(e.children,n)+"}";case z3:e.value=e.props.join(",")}return lf(r=Km(e.children,n))?e.return=e.value+"{"+r+"}":""}function KX(e){var t=q3(e);return function(r,n,i,o){for(var u="",a=0;a<t;a++)u+=e[a](r,n,i,o)||"";return u}}function XX(e){return function(t){t.root||(t=t.return)&&e(t)}}function k$(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var YX=function(t,r,n){for(var i=0,o=0;i=o,o=gf(),i===38&&o===12&&(r[n]=1),!Zv(o);)Mu();return _0(t,tu)},JX=function(t,r){var n=-1,i=44;do switch(Zv(i)){case 0:i===38&&gf()===12&&(r[n]=1),t[n]+=YX(tu-1,r,n);break;case 2:t[n]+=m_(i);break;case 4:if(i===44){t[++n]=gf()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=cx(i)}while(i=Mu());return t},QX=function(t,r){return O$(JX(R$(t),r))},Bk=new WeakMap,eY=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!Bk.get(n))&&!i){Bk.set(t,!0);for(var o=[],u=QX(r,o),a=n.props,p=0,h=0;p<u.length;p++)for(var m=0;m<a.length;m++,h++)t.props[h]=o[p]?u[p].replace(/&\f/g,a[m]):a[m]+" "+u[p]}}},tY=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function L$(e,t){switch(FX(e,t)){case 5103:return Qi+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qi+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Qi+e+V_+e+dl+e+e;case 6828:case 4268:return Qi+e+dl+e+e;case 6165:return Qi+e+dl+"flex-"+e+e;case 5187:return Qi+e+ea(e,/(\w+).+(:[^]+)/,Qi+"box-$1$2"+dl+"flex-$1$2")+e;case 5443:return Qi+e+dl+"flex-item-"+ea(e,/flex-|-self/,"")+e;case 4675:return Qi+e+dl+"flex-line-pack"+ea(e,/align-content|flex-|-self/,"")+e;case 5548:return Qi+e+dl+ea(e,"shrink","negative")+e;case 5292:return Qi+e+dl+ea(e,"basis","preferred-size")+e;case 6060:return Qi+"box-"+ea(e,"-grow","")+Qi+e+dl+ea(e,"grow","positive")+e;case 4554:return Qi+ea(e,/([^-])(transform)/g,"$1"+Qi+"$2")+e;case 6187:return ea(ea(ea(e,/(zoom-|grab)/,Qi+"$1"),/(image-set)/,Qi+"$1"),e,"")+e;case 5495:case 3959:return ea(e,/(image-set\([^]*)/,Qi+"$1$`$1");case 4968:return ea(ea(e,/(.+:)(flex-)?(.*)/,Qi+"box-pack:$3"+dl+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qi+e+e;case 4095:case 3583:case 4068:case 2532:return ea(e,/(.+)-inline(.+)/,Qi+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lf(e)-1-t>6)switch($s(e,t+1)){case 109:if($s(e,t+4)!==45)break;case 102:return ea(e,/(.+:)(.+)-([^]+)/,"$1"+Qi+"$2-$3$1"+V_+($s(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~EP(e,"stretch")?L$(ea(e,"stretch","fill-available"),t)+e:e}break;case 4949:if($s(e,t+1)!==115)break;case 6444:switch($s(e,lf(e)-3-(~EP(e,"!important")&&10))){case 107:return ea(e,":",":"+Qi)+e;case 101:return ea(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Qi+($s(e,14)===45?"inline-":"")+"box$3$1"+Qi+"$2$3$1"+dl+"$2box$3")+e}break;case 5936:switch($s(e,t+11)){case 114:return Qi+e+dl+ea(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Qi+e+dl+ea(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Qi+e+dl+ea(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Qi+e+dl+e+e}return e}var rY=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case $3:t.return=L$(t.value,t.length);break;case T$:return Km([Ey(t,{value:ea(t.value,"@","@"+Qi)})],i);case z3:if(t.length)return jX(t.props,function(o){switch(BX(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Km([Ey(t,{props:[ea(o,/:(read-\w+)/,":"+V_+"$1")]})],i);case"::placeholder":return Km([Ey(t,{props:[ea(o,/:(plac\w+)/,":"+Qi+"input-$1")]}),Ey(t,{props:[ea(o,/:(plac\w+)/,":"+V_+"$1")]}),Ey(t,{props:[ea(o,/:(plac\w+)/,dl+"input-$1")]})],i)}return""})}},nY=[rY],iY=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(T){var R=T.getAttribute("data-emotion");R.indexOf(" ")!==-1&&(document.head.appendChild(T),T.setAttribute("data-s",""))})}var i=t.stylisPlugins||nY,o={},u,a=[];u=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(T){for(var R=T.getAttribute("data-emotion").split(" "),k=1;k<R.length;k++)o[R[k]]=!0;a.push(T)});var p,h=[eY,tY];{var m,v=[ZX,XX(function(T){m.insert(T)})],w=KX(h.concat(i,v)),x=function(R){return Km(HX(R),w)};p=function(R,k,N,F){m=N,x(R?R+"{"+k.styles+"}":k.styles),F&&(P.inserted[k.name]=!0)}}var P={key:r,sheet:new OX({key:r,container:u,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:p};return P.sheet.hydrate(a),P},Ew={exports:{}},na={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk;function aY(){if(jk)return na;jk=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,h=e?Symbol.for("react.concurrent_mode"):60111,m=e?Symbol.for("react.forward_ref"):60112,v=e?Symbol.for("react.suspense"):60113,w=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,P=e?Symbol.for("react.lazy"):60116,T=e?Symbol.for("react.block"):60121,R=e?Symbol.for("react.fundamental"):60117,k=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function F(U){if(typeof U=="object"&&U!==null){var B=U.$$typeof;switch(B){case t:switch(U=U.type,U){case p:case h:case n:case o:case i:case v:return U;default:switch(U=U&&U.$$typeof,U){case a:case m:case P:case x:case u:return U;default:return B}}case r:return B}}}function D(U){return F(U)===h}return na.AsyncMode=p,na.ConcurrentMode=h,na.ContextConsumer=a,na.ContextProvider=u,na.Element=t,na.ForwardRef=m,na.Fragment=n,na.Lazy=P,na.Memo=x,na.Portal=r,na.Profiler=o,na.StrictMode=i,na.Suspense=v,na.isAsyncMode=function(U){return D(U)||F(U)===p},na.isConcurrentMode=D,na.isContextConsumer=function(U){return F(U)===a},na.isContextProvider=function(U){return F(U)===u},na.isElement=function(U){return typeof U=="object"&&U!==null&&U.$$typeof===t},na.isForwardRef=function(U){return F(U)===m},na.isFragment=function(U){return F(U)===n},na.isLazy=function(U){return F(U)===P},na.isMemo=function(U){return F(U)===x},na.isPortal=function(U){return F(U)===r},na.isProfiler=function(U){return F(U)===o},na.isStrictMode=function(U){return F(U)===i},na.isSuspense=function(U){return F(U)===v},na.isValidElementType=function(U){return typeof U=="string"||typeof U=="function"||U===n||U===h||U===o||U===i||U===v||U===w||typeof U=="object"&&U!==null&&(U.$$typeof===P||U.$$typeof===x||U.$$typeof===u||U.$$typeof===a||U.$$typeof===m||U.$$typeof===R||U.$$typeof===k||U.$$typeof===N||U.$$typeof===T)},na.typeOf=F,na}var zk;function oY(){return zk||(zk=1,Ew.exports=aY()),Ew.exports}var Cw,$k;function sY(){if($k)return Cw;$k=1;var e=oY(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[e.ForwardRef]=n,o[e.Memo]=i;function u(P){return e.isMemo(P)?i:o[P.$$typeof]||t}var a=Object.defineProperty,p=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,w=Object.prototype;function x(P,T,R){if(typeof T!="string"){if(w){var k=v(T);k&&k!==w&&x(P,k,R)}var N=p(T);h&&(N=N.concat(h(T)));for(var F=u(P),D=u(T),U=0;U<N.length;++U){var B=N[U];if(!r[B]&&!(R&&R[B])&&!(D&&D[B])&&!(F&&F[B])){var Z=m(T,B);try{a(P,B,Z)}catch{}}}}return P}return Cw=x,Cw}sY();var lY=!0;function D$(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var U3=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||lY===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},V3=function(t,r,n){U3(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var o=r;do t.insert(r===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function uY(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var cY={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},fY=/[A-Z]|^ms/g,hY=/_EMO_([^_]+?)_([^]*?)_EMO_/g,N$=function(t){return t.charCodeAt(1)===45},qk=function(t){return t!=null&&typeof t!="boolean"},Aw=k$(function(e){return N$(e)?e:e.replace(fY,"-$&").toLowerCase()}),Uk=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(hY,function(n,i,o){return uf={name:i,styles:o,next:uf},i})}return cY[t]!==1&&!N$(t)&&typeof r=="number"&&r!==0?r+"px":r};function Kv(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return uf={name:i.name,styles:i.styles,next:uf},i.name;var o=r;if(o.styles!==void 0){var u=o.next;if(u!==void 0)for(;u!==void 0;)uf={name:u.name,styles:u.styles,next:uf},u=u.next;var a=o.styles+";";return a}return dY(e,t,r)}case"function":{if(e!==void 0){var p=uf,h=r(e);return uf=p,Kv(e,t,h)}break}}var m=r;if(t==null)return m;var v=t[m];return v!==void 0?v:m}function dY(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=Kv(e,t,r[i])+";";else for(var o in r){var u=r[o];if(typeof u!="object"){var a=u;t!=null&&t[a]!==void 0?n+=o+"{"+t[a]+"}":qk(a)&&(n+=Aw(o)+":"+Uk(o,a)+";")}else if(Array.isArray(u)&&typeof u[0]=="string"&&(t==null||t[u[0]]===void 0))for(var p=0;p<u.length;p++)qk(u[p])&&(n+=Aw(o)+":"+Uk(o,u[p])+";");else{var h=Kv(e,t,u);switch(o){case"animation":case"animationName":{n+=Aw(o)+":"+h+";";break}default:n+=o+"{"+h+"}"}}}return n}var Vk=/label:\s*([^\s;{]+)\s*(;|$)/g,uf;function x0(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";uf=void 0;var o=e[0];if(o==null||o.raw===void 0)n=!1,i+=Kv(r,t,o);else{var u=o;i+=u[0]}for(var a=1;a<e.length;a++)if(i+=Kv(r,t,e[a]),n){var p=o;i+=p[a]}Vk.lastIndex=0;for(var h="",m;(m=Vk.exec(i))!==null;)h+="-"+m[1];var v=uY(i)+h;return{name:v,styles:i,next:uf}}var pY=function(t){return t()},F$=q_.useInsertionEffect?q_.useInsertionEffect:!1,B$=F$||pY,Gk=F$||I.useLayoutEffect,j$=I.createContext(typeof HTMLElement<"u"?iY({key:"css"}):null);j$.Provider;var G3=function(t){return I.forwardRef(function(r,n){var i=I.useContext(j$);return t(r,i,n)})},w0=I.createContext({}),H3={}.hasOwnProperty,AP="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",mY=function(t,r){var n={};for(var i in r)H3.call(r,i)&&(n[i]=r[i]);return n[AP]=t,n},gY=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return U3(r,n,i),B$(function(){return V3(r,n,i)}),null},yY=G3(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[AP],o=[n],u="";typeof e.className=="string"?u=D$(t.registered,o,e.className):e.className!=null&&(u=e.className+" ");var a=x0(o,void 0,I.useContext(w0));u+=t.key+"-"+a.name;var p={};for(var h in e)H3.call(e,h)&&h!=="css"&&h!==AP&&(p[h]=e[h]);return p.className=u,r&&(p.ref=r),I.createElement(I.Fragment,null,I.createElement(gY,{cache:t,serialized:a,isStringTag:typeof i=="string"}),I.createElement(i,p))}),vY=yY,Hk=function(t,r){var n=arguments;if(r==null||!H3.call(r,"css"))return I.createElement.apply(void 0,n);var i=n.length,o=new Array(i);o[0]=vY,o[1]=mY(t,r);for(var u=2;u<i;u++)o[u]=n[u];return I.createElement.apply(null,o)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Hk||(Hk={}));var bY=G3(function(e,t){var r=e.styles,n=x0([r],void 0,I.useContext(w0)),i=I.useRef();return Gk(function(){var o=t.key+"-global",u=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,p=document.querySelector('style[data-emotion="'+o+" "+n.name+'"]');return t.sheet.tags.length&&(u.before=t.sheet.tags[0]),p!==null&&(a=!0,p.setAttribute("data-emotion",o),u.hydrate([p])),i.current=[u,a],function(){u.flush()}},[t]),Gk(function(){var o=i.current,u=o[0],a=o[1];if(a){o[1]=!1;return}if(n.next!==void 0&&V3(t,n.next,!0),u.tags.length){var p=u.tags[u.tags.length-1].nextElementSibling;u.before=p,u.flush()}t.insert("",n,u,!1)},[t,n.name]),null});function W3(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return x0(t)}function S0(){var e=W3.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var _Y=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,xY=k$(function(e){return _Y.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),wY=xY,SY=function(t){return t!=="theme"},Wk=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?wY:SY},Zk=function(t,r,n){var i;if(r){var o=r.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(u){return t.__emotion_forwardProp(u)&&o(u)}:o}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},EY=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return U3(r,n,i),B$(function(){return V3(r,n,i)}),null},CY=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,o,u;r!==void 0&&(o=r.label,u=r.target);var a=Zk(t,r,n),p=a||Wk(i),h=!p("as");return function(){var m=arguments,v=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&v.push("label:"+o+";"),m[0]==null||m[0].raw===void 0)v.push.apply(v,m);else{var w=m[0];v.push(w[0]);for(var x=m.length,P=1;P<x;P++)v.push(m[P],w[P])}var T=G3(function(R,k,N){var F=h&&R.as||i,D="",U=[],B=R;if(R.theme==null){B={};for(var Z in R)B[Z]=R[Z];B.theme=I.useContext(w0)}typeof R.className=="string"?D=D$(k.registered,U,R.className):R.className!=null&&(D=R.className+" ");var J=x0(v.concat(U),k.registered,B);D+=k.key+"-"+J.name,u!==void 0&&(D+=" "+u);var X=h&&a===void 0?Wk(F):p,le={};for(var H in R)h&&H==="as"||X(H)&&(le[H]=R[H]);return le.className=D,N&&(le.ref=N),I.createElement(I.Fragment,null,I.createElement(EY,{cache:k,serialized:J,isStringTag:typeof F=="string"}),I.createElement(F,le))});return T.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",T.defaultProps=t.defaultProps,T.__emotion_real=T,T.__emotion_base=i,T.__emotion_styles=v,T.__emotion_forwardProp=a,Object.defineProperty(T,"toString",{value:function(){return"."+u}}),T.withComponent=function(R,k){var N=e(R,U_({},r,k,{shouldForwardProp:Zk(T,k,!0)}));return N.apply(void 0,v)},T}},AY=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],PP=CY.bind(null);AY.forEach(function(e){PP[e]=PP(e)});var Pw={exports:{}},Tw,Kk;function PY(){if(Kk)return Tw;Kk=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Tw=e,Tw}var Iw,Xk;function TY(){if(Xk)return Iw;Xk=1;var e=PY();function t(){}function r(){}return r.resetWarningCache=t,Iw=function(){function n(u,a,p,h,m,v){if(v!==e){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}n.isRequired=n;function i(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:t};return o.PropTypes=o,o},Iw}var Yk;function IY(){return Yk||(Yk=1,Pw.exports=TY()()),Pw.exports}var MY=IY();const tn=qs(MY);function RY(e){return e==null||Object.keys(e).length===0}function z$(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?i=>t(RY(i)?r:i):t;return ze.jsx(bY,{styles:n})}function $$(e,t){return PP(e,t)}function OY(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const Jk=[];function Wh(e){return Jk[0]=e,x0(Jk)}var Mw={exports:{}},va={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qk;function kY(){if(Qk)return va;Qk=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function P(T){if(typeof T=="object"&&T!==null){var R=T.$$typeof;switch(R){case e:switch(T=T.type,T){case r:case i:case n:case p:case h:case w:return T;default:switch(T=T&&T.$$typeof,T){case u:case a:case v:case m:return T;case o:return T;default:return R}}case t:return R}}}return va.ContextConsumer=o,va.ContextProvider=u,va.Element=e,va.ForwardRef=a,va.Fragment=r,va.Lazy=v,va.Memo=m,va.Portal=t,va.Profiler=i,va.StrictMode=n,va.Suspense=p,va.SuspenseList=h,va.isContextConsumer=function(T){return P(T)===o},va.isContextProvider=function(T){return P(T)===u},va.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===e},va.isForwardRef=function(T){return P(T)===a},va.isFragment=function(T){return P(T)===r},va.isLazy=function(T){return P(T)===v},va.isMemo=function(T){return P(T)===m},va.isPortal=function(T){return P(T)===t},va.isProfiler=function(T){return P(T)===i},va.isStrictMode=function(T){return P(T)===n},va.isSuspense=function(T){return P(T)===p},va.isSuspenseList=function(T){return P(T)===h},va.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===r||T===i||T===n||T===p||T===h||typeof T=="object"&&T!==null&&(T.$$typeof===v||T.$$typeof===m||T.$$typeof===u||T.$$typeof===o||T.$$typeof===a||T.$$typeof===x||T.getModuleId!==void 0)},va.typeOf=P,va}var eL;function LY(){return eL||(eL=1,Mw.exports=kY()),Mw.exports}var q$=LY();function hf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function U$(e){if(I.isValidElement(e)||q$.isValidElementType(e)||!hf(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=U$(e[r])}),t}function es(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return hf(e)&&hf(t)&&Object.keys(t).forEach(i=>{I.isValidElement(t[i])||q$.isValidElementType(t[i])?n[i]=t[i]:hf(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&hf(e[i])?n[i]=es(e[i],t[i],r):r.clone?n[i]=hf(t[i])?U$(t[i]):t[i]:n[i]=t[i]}),n}const DY=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function NY(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...i}=e,o=DY(t),u=Object.keys(o);function a(w){return`@media (min-width:${typeof t[w]=="number"?t[w]:w}${r})`}function p(w){return`@media (max-width:${(typeof t[w]=="number"?t[w]:w)-n/100}${r})`}function h(w,x){const P=u.indexOf(x);return`@media (min-width:${typeof t[w]=="number"?t[w]:w}${r}) and (max-width:${(P!==-1&&typeof t[u[P]]=="number"?t[u[P]]:x)-n/100}${r})`}function m(w){return u.indexOf(w)+1<u.length?h(w,u[u.indexOf(w)+1]):a(w)}function v(w){const x=u.indexOf(w);return x===0?a(u[1]):x===u.length-1?p(u[x]):h(w,u[u.indexOf(w)+1]).replace("@media","@media not all and")}return{keys:u,values:o,up:a,down:p,between:h,only:m,not:v,unit:r,...i}}function tL(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,i)=>{const o=/min-width:\s*([0-9.]+)/;return+(n.match(o)?.[1]||0)-+(i.match(o)?.[1]||0)});return r.length?r.reduce((n,i)=>{const o=t[i];return delete n[i],n[i]=o,n},{...t}):t}function FY(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function BY(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,i]=r,o=Number.isNaN(+n)?n||0:+n;return e.containerQueries(i).up(o)}function jY(e){const t=(o,u)=>o.replace("@media",u?`@container ${u}`:"@container");function r(o,u){o.up=(...a)=>t(e.breakpoints.up(...a),u),o.down=(...a)=>t(e.breakpoints.down(...a),u),o.between=(...a)=>t(e.breakpoints.between(...a),u),o.only=(...a)=>t(e.breakpoints.only(...a),u),o.not=(...a)=>{const p=t(e.breakpoints.not(...a),u);return p.includes("not all and")?p.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):p}}const n={},i=o=>(r(n,o),n);return r(i),{...e,containerQueries:i}}const zY={borderRadius:4};function yv(e,t){return t?es(e,t,{clone:!1}):e}const dx={xs:0,sm:600,md:900,lg:1200,xl:1536},rL={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${dx[e]}px)`},$Y={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:dx[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function Tc(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const o=n.breakpoints||rL;return t.reduce((u,a,p)=>(u[o.up(o.keys[p])]=r(t[p]),u),{})}if(typeof t=="object"){const o=n.breakpoints||rL;return Object.keys(t).reduce((u,a)=>{if(FY(o.keys,a)){const p=BY(n.containerQueries?n:$Y,a);p&&(u[p]=r(t[a],a))}else if(Object.keys(o.values||dx).includes(a)){const p=o.up(a);u[p]=r(t[a],a)}else{const p=a;u[p]=t[p]}return u},{})}return r(t)}function V$(e={}){return e.keys?.reduce((r,n)=>{const i=e.up(n);return r[i]={},r},{})||{}}function TP(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function qY(e,...t){const r=V$(e),n=[r,...t].reduce((i,o)=>es(i,o),{});return TP(Object.keys(r),n)}function UY(e,t){if(typeof e!="object")return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((i,o)=>{o<e.length&&(r[i]=!0)}):n.forEach(i=>{e[i]!=null&&(r[i]=!0)}),r}function Rw({values:e,breakpoints:t,base:r}){const n=r||UY(e,t),i=Object.keys(n);if(i.length===0)return e;let o;return i.reduce((u,a,p)=>(Array.isArray(e)?(u[a]=e[p]!=null?e[p]:e[o],o=p):typeof e=="object"?(u[a]=e[a]!=null?e[a]:e[o],o=a):u[a]=e,u),{})}function an(e){if(typeof e!="string")throw new Error(ch(7));return e.charAt(0).toUpperCase()+e.slice(1)}function px(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function G_(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=px(e,r)||n,t&&(i=t(i,n,e)),i}function jo(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,o=u=>{if(u[t]==null)return null;const a=u[t],p=u.theme,h=px(p,n)||{};return Tc(u,a,v=>{let w=G_(h,i,v);return v===w&&typeof v=="string"&&(w=G_(h,i,`${t}${v==="default"?"":an(v)}`,v)),r===!1?w:{[r]:w}})};return o.propTypes={},o.filterProps=[t],o}function VY(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const GY={m:"margin",p:"padding"},HY={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},nL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},WY=VY(e=>{if(e.length>2)if(nL[e])e=nL[e];else return[e];const[t,r]=e.split(""),n=GY[t],i=HY[r]||"";return Array.isArray(i)?i.map(o=>n+o):[n+i]}),Z3=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],K3=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Z3,...K3];function E0(e,t,r,n){const i=px(e,t,!0)??r;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?i.startsWith("var(")&&o===0?0:i.startsWith("var(")&&o===1?i:`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const u=Math.abs(o),a=i[u];return o>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof i=="function"?i:()=>{}}function mx(e){return E0(e,"spacing",8)}function up(e,t){return typeof t=="string"||t==null?t:e(t)}function ZY(e,t){return r=>e.reduce((n,i)=>(n[i]=up(t,r),n),{})}function KY(e,t,r,n){if(!t.includes(r))return null;const i=WY(r),o=ZY(i,n),u=e[r];return Tc(e,u,o)}function G$(e,t){const r=mx(e.theme);return Object.keys(e).map(n=>KY(e,t,n,r)).reduce(yv,{})}function yo(e){return G$(e,Z3)}yo.propTypes={};yo.filterProps=Z3;function vo(e){return G$(e,K3)}vo.propTypes={};vo.filterProps=K3;function H$(e=8,t=mx({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(o=>{const u=t(o);return typeof u=="number"?`${u}px`:u}).join(" ");return r.mui=!0,r}function gx(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(o=>{n[o]=i}),n),{}),r=n=>Object.keys(n).reduce((i,o)=>t[o]?yv(i,t[o](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function Gu(e){return typeof e!="number"?e:`${e}px solid`}function tc(e,t){return jo({prop:e,themeKey:"borders",transform:t})}const XY=tc("border",Gu),YY=tc("borderTop",Gu),JY=tc("borderRight",Gu),QY=tc("borderBottom",Gu),eJ=tc("borderLeft",Gu),tJ=tc("borderColor"),rJ=tc("borderTopColor"),nJ=tc("borderRightColor"),iJ=tc("borderBottomColor"),aJ=tc("borderLeftColor"),oJ=tc("outline",Gu),sJ=tc("outlineColor"),yx=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=E0(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:up(t,n)});return Tc(e,e.borderRadius,r)}return null};yx.propTypes={};yx.filterProps=["borderRadius"];gx(XY,YY,JY,QY,eJ,tJ,rJ,nJ,iJ,aJ,yx,oJ,sJ);const vx=e=>{if(e.gap!==void 0&&e.gap!==null){const t=E0(e.theme,"spacing",8),r=n=>({gap:up(t,n)});return Tc(e,e.gap,r)}return null};vx.propTypes={};vx.filterProps=["gap"];const bx=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=E0(e.theme,"spacing",8),r=n=>({columnGap:up(t,n)});return Tc(e,e.columnGap,r)}return null};bx.propTypes={};bx.filterProps=["columnGap"];const _x=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=E0(e.theme,"spacing",8),r=n=>({rowGap:up(t,n)});return Tc(e,e.rowGap,r)}return null};_x.propTypes={};_x.filterProps=["rowGap"];const lJ=jo({prop:"gridColumn"}),uJ=jo({prop:"gridRow"}),cJ=jo({prop:"gridAutoFlow"}),fJ=jo({prop:"gridAutoColumns"}),hJ=jo({prop:"gridAutoRows"}),dJ=jo({prop:"gridTemplateColumns"}),pJ=jo({prop:"gridTemplateRows"}),mJ=jo({prop:"gridTemplateAreas"}),gJ=jo({prop:"gridArea"});gx(vx,bx,_x,lJ,uJ,cJ,fJ,hJ,dJ,pJ,mJ,gJ);function Xm(e,t){return t==="grey"?t:e}const yJ=jo({prop:"color",themeKey:"palette",transform:Xm}),vJ=jo({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Xm}),bJ=jo({prop:"backgroundColor",themeKey:"palette",transform:Xm});gx(yJ,vJ,bJ);function Tu(e){return e<=1&&e!==0?`${e*100}%`:e}const _J=jo({prop:"width",transform:Tu}),X3=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{const n=e.theme?.breakpoints?.values?.[r]||dx[r];return n?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Tu(r)}};return Tc(e,e.maxWidth,t)}return null};X3.filterProps=["maxWidth"];const xJ=jo({prop:"minWidth",transform:Tu}),wJ=jo({prop:"height",transform:Tu}),SJ=jo({prop:"maxHeight",transform:Tu}),EJ=jo({prop:"minHeight",transform:Tu});jo({prop:"size",cssProperty:"width",transform:Tu});jo({prop:"size",cssProperty:"height",transform:Tu});const CJ=jo({prop:"boxSizing"});gx(_J,X3,xJ,wJ,SJ,EJ,CJ);const C0={border:{themeKey:"borders",transform:Gu},borderTop:{themeKey:"borders",transform:Gu},borderRight:{themeKey:"borders",transform:Gu},borderBottom:{themeKey:"borders",transform:Gu},borderLeft:{themeKey:"borders",transform:Gu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Gu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:yx},color:{themeKey:"palette",transform:Xm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Xm},backgroundColor:{themeKey:"palette",transform:Xm},p:{style:vo},pt:{style:vo},pr:{style:vo},pb:{style:vo},pl:{style:vo},px:{style:vo},py:{style:vo},padding:{style:vo},paddingTop:{style:vo},paddingRight:{style:vo},paddingBottom:{style:vo},paddingLeft:{style:vo},paddingX:{style:vo},paddingY:{style:vo},paddingInline:{style:vo},paddingInlineStart:{style:vo},paddingInlineEnd:{style:vo},paddingBlock:{style:vo},paddingBlockStart:{style:vo},paddingBlockEnd:{style:vo},m:{style:yo},mt:{style:yo},mr:{style:yo},mb:{style:yo},ml:{style:yo},mx:{style:yo},my:{style:yo},margin:{style:yo},marginTop:{style:yo},marginRight:{style:yo},marginBottom:{style:yo},marginLeft:{style:yo},marginX:{style:yo},marginY:{style:yo},marginInline:{style:yo},marginInlineStart:{style:yo},marginInlineEnd:{style:yo},marginBlock:{style:yo},marginBlockStart:{style:yo},marginBlockEnd:{style:yo},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:vx},rowGap:{style:_x},columnGap:{style:bx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Tu},maxWidth:{style:X3},minWidth:{transform:Tu},height:{transform:Tu},maxHeight:{transform:Tu},minHeight:{transform:Tu},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function AJ(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function PJ(e,t){return typeof e=="function"?e(t):e}function TJ(){function e(r,n,i,o){const u={[r]:n,theme:i},a=o[r];if(!a)return{[r]:n};const{cssProperty:p=r,themeKey:h,transform:m,style:v}=a;if(n==null)return null;if(h==="typography"&&n==="inherit")return{[r]:n};const w=px(i,h)||{};return v?v(u):Tc(u,n,P=>{let T=G_(w,m,P);return P===T&&typeof P=="string"&&(T=G_(w,m,`${r}${P==="default"?"":an(P)}`,P)),p===!1?T:{[p]:T}})}function t(r){const{sx:n,theme:i={},nested:o}=r||{};if(!n)return null;const u=i.unstable_sxConfig??C0;function a(p){let h=p;if(typeof p=="function")h=p(i);else if(typeof p!="object")return p;if(!h)return null;const m=V$(i.breakpoints),v=Object.keys(m);let w=m;return Object.keys(h).forEach(x=>{const P=PJ(h[x],i);if(P!=null)if(typeof P=="object")if(u[x])w=yv(w,e(x,P,i,u));else{const T=Tc({theme:i},P,R=>({[x]:R}));AJ(T,P)?w[x]=t({sx:P,theme:i,nested:!0}):w=yv(w,T)}else w=yv(w,e(x,P,i,u))}),!o&&i.modularCssLayers?{"@layer sx":tL(i,TP(v,w))}:tL(i,TP(v,w))}return Array.isArray(n)?n.map(a):a(n)}return t}const Xh=TJ();Xh.filterProps=["sx"];function IJ(e,t){const r=this;if(r.vars){if(!r.colorSchemes?.[e]||typeof r.getColorSchemeSelector!="function")return{};let n=r.getColorSchemeSelector(e);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return r.palette.mode===e?t:{}}function xx(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:o={},...u}=e,a=NY(r),p=H$(i);let h=es({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:p,shape:{...zY,...o}},u);return h=jY(h),h.applyStyles=IJ,h=t.reduce((m,v)=>es(m,v),h),h.unstable_sxConfig={...C0,...u?.unstable_sxConfig},h.unstable_sx=function(v){return Xh({sx:v,theme:this})},h}function MJ(e){return Object.keys(e).length===0}function wx(e=null){const t=I.useContext(w0);return!t||MJ(t)?e:t}const RJ=xx();function Sx(e=RJ){return wx(e)}function Ow(e){const t=Wh(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function W$({styles:e,themeId:t,defaultTheme:r={}}){const n=Sx(r),i=t&&n[t]||n;let o=typeof e=="function"?e(i):e;return i.modularCssLayers&&(Array.isArray(o)?o=o.map(u=>Ow(typeof u=="function"?u(i):u)):o=Ow(o)),ze.jsx(z$,{styles:o})}const OJ=e=>{const t={systemProps:{},otherProps:{}},r=e?.theme?.unstable_sxConfig??C0;return Object.keys(e).forEach(n=>{r[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function Y3(e){const{sx:t,...r}=e,{systemProps:n,otherProps:i}=OJ(r);let o;return Array.isArray(t)?o=[n,...t]:typeof t=="function"?o=(...u)=>{const a=t(...u);return hf(a)?{...n,...a}:n}:o={...n,...t},{...i,sx:o}}const iL=e=>e,kJ=()=>{let e=iL;return{configure(t){e=t},generate(t){return e(t)},reset(){e=iL}}},J3=kJ();function Z$(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Z$(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Hr(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Z$(e))&&(n&&(n+=" "),n+=t);return n}function K$(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,o=$$("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Xh);return I.forwardRef(function(p,h){const m=Sx(r),{className:v,component:w="div",...x}=Y3(p);return ze.jsx(o,{as:w,ref:h,className:Hr(v,i?i(n):n),theme:t&&m[t]||m,...x})})}const LJ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Vn(e,t,r="Mui"){const n=LJ[t];return n?`${r}-${n}`:`${J3.generate(e)}-${t}`}function Bn(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=Vn(e,i,r)}),n}const DJ=Bn("MuiBox",["root"]),NJ=K$({defaultClassName:DJ.root,generateClassName:J3.generate});function X$(e){const{variants:t,...r}=e,n={variants:t,style:Wh(r),isProcessed:!0};return n.style===r||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=Wh(i.style))}),n}const FJ=xx();function kw(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Yd(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function BJ(e){return e?(t,r)=>r[e]:null}function jJ(e,t,r){e.theme=$J(e.theme)?r:e.theme[t]||e.theme}function y_(e,t,r){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(i=>y_(e,i,r));if(Array.isArray(n?.variants)){let i;if(n.isProcessed)i=r?Yd(n.style,r):n.style;else{const{variants:o,...u}=n;i=r?Yd(Wh(u),r):u}return Y$(e,n.variants,[i],r)}return n?.isProcessed?r?Yd(Wh(n.style),r):n.style:r?Yd(Wh(n),r):n}function Y$(e,t,r=[],n=void 0){let i;e:for(let o=0;o<t.length;o+=1){const u=t[o];if(typeof u.props=="function"){if(i??={...e,...e.ownerState,ownerState:e.ownerState},!u.props(i))continue}else for(const a in u.props)if(e[a]!==u.props[a]&&e.ownerState?.[a]!==u.props[a])continue e;typeof u.style=="function"?(i??={...e,...e.ownerState,ownerState:e.ownerState},r.push(n?Yd(Wh(u.style(i)),n):u.style(i))):r.push(n?Yd(Wh(u.style),n):u.style)}return r}function J$(e={}){const{themeId:t,defaultTheme:r=FJ,rootShouldForwardProp:n=kw,slotShouldForwardProp:i=kw}=e;function o(a){jJ(a,t,r)}return(a,p={})=>{OY(a,B=>B.filter(Z=>Z!==Xh));const{name:h,slot:m,skipVariantsResolver:v,skipSx:w,overridesResolver:x=BJ(UJ(m)),...P}=p,T=h&&h.startsWith("Mui")||m?"components":"custom",R=v!==void 0?v:m&&m!=="Root"&&m!=="root"||!1,k=w||!1;let N=kw;m==="Root"||m==="root"?N=n:m?N=i:qJ(a)&&(N=void 0);const F=$$(a,{shouldForwardProp:N,label:zJ(),...P}),D=B=>{if(B.__emotion_real===B)return B;if(typeof B=="function")return function(J){return y_(J,B,J.theme.modularCssLayers?T:void 0)};if(hf(B)){const Z=X$(B);return function(X){return Z.variants?y_(X,Z,X.theme.modularCssLayers?T:void 0):X.theme.modularCssLayers?Yd(Z.style,T):Z.style}}return B},U=(...B)=>{const Z=[],J=B.map(D),X=[];if(Z.push(o),h&&x&&X.push(function(ae){const ue=ae.theme.components?.[h]?.styleOverrides;if(!ue)return null;const me={};for(const Ce in ue)me[Ce]=y_(ae,ue[Ce],ae.theme.modularCssLayers?"theme":void 0);return x(ae,me)}),h&&!R&&X.push(function(ae){const ue=ae.theme?.components?.[h]?.variants;return ue?Y$(ae,ue,[],ae.theme.modularCssLayers?"theme":void 0):null}),k||X.push(Xh),Array.isArray(J[0])){const G=J.shift(),ae=new Array(Z.length).fill(""),se=new Array(X.length).fill("");let ue;ue=[...ae,...G,...se],ue.raw=[...ae,...G.raw,...se],Z.unshift(ue)}const le=[...Z,...J,...X],H=F(...le);return a.muiName&&(H.muiName=a.muiName),H};return F.withConfig&&(U.withConfig=F.withConfig),U}}function zJ(e,t){return void 0}function $J(e){for(const t in e)return!1;return!0}function qJ(e){return typeof e=="string"&&e.charCodeAt(0)>96}function UJ(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const _p=J$();function Xv(e,t,r=!1){const n={...t};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=i;if(o==="components"||o==="slots")n[o]={...e[o],...n[o]};else if(o==="componentsProps"||o==="slotProps"){const u=e[o],a=t[o];if(!a)n[o]=u||{};else if(!u)n[o]=a;else{n[o]={...a};for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=p;n[o][h]=Xv(u[h],a[h],r)}}}else o==="className"&&r&&t.className?n.className=Hr(e?.className,t?.className):o==="style"&&r&&t.style?n.style={...e?.style,...t?.style}:n[o]===void 0&&(n[o]=e[o])}return n}function Q$(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:Xv(t.components[r].defaultProps,n)}function Q3({props:e,name:t,defaultTheme:r,themeId:n}){let i=Sx(r);return n&&(i=i[n]||i),Q$({theme:i,name:t,props:e})}const Ru=typeof window<"u"?I.useLayoutEffect:I.useEffect;function VJ(e,t,r,n,i){const[o,u]=I.useState(()=>i&&r?r(e).matches:n?n(e).matches:t);return Ru(()=>{if(!r)return;const a=r(e),p=()=>{u(a.matches)};return p(),a.addEventListener("change",p),()=>{a.removeEventListener("change",p)}},[e,r]),o}const GJ={...q_},e9=GJ.useSyncExternalStore;function HJ(e,t,r,n,i){const o=I.useCallback(()=>t,[t]),u=I.useMemo(()=>{if(i&&r)return()=>r(e).matches;if(n!==null){const{matches:m}=n(e);return()=>m}return o},[o,e,n,i,r]),[a,p]=I.useMemo(()=>{if(r===null)return[o,()=>()=>{}];const m=r(e);return[()=>m.matches,v=>(m.addEventListener("change",v),()=>{m.removeEventListener("change",v)})]},[o,r,e]);return e9(p,a,u)}function t9(e={}){const{themeId:t}=e;return function(n,i={}){let o=wx();o&&t&&(o=o[t]||o);const u=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:a=!1,matchMedia:p=u?window.matchMedia:null,ssrMatchMedia:h=null,noSsr:m=!1}=Q$({name:"MuiUseMediaQuery",props:i,theme:o});let v=typeof n=="function"?n(o):n;return v=v.replace(/^@media( ?)/m,""),v.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(e9!==void 0?HJ:VJ)(v,a,p,h,m)}}t9();function WJ(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function eI(e,t=0,r=1){return WJ(e,t,r)}function ZJ(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Yh(e){if(e.type)return e;if(e.charAt(0)==="#")return Yh(ZJ(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(ch(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(ch(10,i))}else n=n.split(",");return n=n.map(o=>parseFloat(o)),{type:r,values:n,colorSpace:i}}const KJ=e=>{const t=Yh(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},tv=(e,t)=>{try{return KJ(e)}catch{return e}};function Ex(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((i,o)=>o<3?parseInt(i,10):i):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function r9(e){e=Yh(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,o=n*Math.min(i,1-i),u=(h,m=(h+r/30)%12)=>i-o*Math.max(Math.min(m-3,9-m,1),-1);let a="rgb";const p=[Math.round(u(0)*255),Math.round(u(8)*255),Math.round(u(4)*255)];return e.type==="hsla"&&(a+="a",p.push(t[3])),Ex({type:a,values:p})}function IP(e){e=Yh(e);let t=e.type==="hsl"||e.type==="hsla"?Yh(r9(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function XJ(e,t){const r=IP(e),n=IP(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function H_(e,t){return e=Yh(e),t=eI(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Ex(e)}function Od(e,t,r){try{return H_(e,t)}catch{return e}}function Cx(e,t){if(e=Yh(e),t=eI(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return Ex(e)}function ca(e,t,r){try{return Cx(e,t)}catch{return e}}function Ax(e,t){if(e=Yh(e),t=eI(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Ex(e)}function fa(e,t,r){try{return Ax(e,t)}catch{return e}}function MP(e,t=.15){return IP(e)>.5?Cx(e,t):Ax(e,t)}function Sb(e,t,r){try{return MP(e,t)}catch{return e}}const n9=I.createContext(null);function tI(){return I.useContext(n9)}const YJ=typeof Symbol=="function"&&Symbol.for,JJ=YJ?Symbol.for("mui.nested"):"__THEME_NESTED__";function QJ(e,t){return typeof t=="function"?t(e):{...e,...t}}function eQ(e){const{children:t,theme:r}=e,n=tI(),i=I.useMemo(()=>{const o=n===null?{...r}:QJ(n,r);return o!=null&&(o[JJ]=n!==null),o},[r,n]);return ze.jsx(n9.Provider,{value:i,children:t})}const i9=I.createContext();function tQ({value:e,...t}){return ze.jsx(i9.Provider,{value:e??!0,...t})}const Px=()=>I.useContext(i9)??!1,a9=I.createContext(void 0);function rQ({value:e,children:t}){return ze.jsx(a9.Provider,{value:e,children:t})}function nQ(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const i=t.components[r];return i.defaultProps?Xv(i.defaultProps,n,t.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?Xv(i,n,t.components.mergeClassNameAndStyle):n}function iQ({props:e,name:t}){const r=I.useContext(a9);return nQ({props:e,name:t,theme:{components:r}})}let aL=0;function aQ(e){const[t,r]=I.useState(e),n=e||t;return I.useEffect(()=>{t==null&&(aL+=1,r(`mui-${aL}`))},[t]),n}const oQ={...q_},oL=oQ.useId;function xp(e){if(oL!==void 0){const t=oL();return e??t}return aQ(e)}function sQ(e){const t=wx(),r=xp()||"",{modularCssLayers:n}=e;let i="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!n||t!==null?i="":typeof n=="string"?i=n.replace(/mui(?!\.)/g,i):i=`@layer ${i};`,Ru(()=>{const o=document.querySelector("head");if(!o)return;const u=o.firstChild;if(i){if(u&&u.hasAttribute?.("data-mui-layer-order")&&u.getAttribute("data-mui-layer-order")===r)return;const a=document.createElement("style");a.setAttribute("data-mui-layer-order",r),a.textContent=i,o.prepend(a)}else o.querySelector(`style[data-mui-layer-order="${r}"]`)?.remove()},[i,r]),i?ze.jsx(W$,{styles:i}):null}const sL={};function lL(e,t,r,n=!1){return I.useMemo(()=>{const i=e&&t[e]||t;if(typeof r=="function"){const o=r(i),u=e?{...t,[e]:o}:o;return n?()=>u:u}return e?{...t,[e]:r}:{...t,...r}},[e,t,r,n])}function o9(e){const{children:t,theme:r,themeId:n}=e,i=wx(sL),o=tI()||sL,u=lL(n,i,r),a=lL(n,o,r,!0),p=(n?u[n]:u).direction==="rtl",h=sQ(u);return ze.jsx(eQ,{theme:a,children:ze.jsx(w0.Provider,{value:u,children:ze.jsx(tQ,{value:p,children:ze.jsxs(rQ,{value:n?u[n].components:u.components,children:[h,t]})})})})}const uL={theme:void 0};function lQ(e){let t,r;return function(i){let o=t;return(o===void 0||i.theme!==r)&&(uL.theme=i.theme,o=X$(e(uL)),t=o,r=i.theme),o}}const rI="mode",nI="color-scheme",uQ="data-color-scheme";function cQ(e){const{defaultMode:t="system",defaultLightColorScheme:r="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=rI,colorSchemeStorageKey:o=nI,attribute:u=uQ,colorSchemeNode:a="document.documentElement",nonce:p}=e||{};let h="",m=u;if(u==="class"&&(m=".%s"),u==="data"&&(m="[data-%s]"),m.startsWith(".")){const w=m.substring(1);h+=`${a}.classList.remove('${w}'.replace('%s', light), '${w}'.replace('%s', dark));
      ${a}.classList.add('${w}'.replace('%s', colorScheme));`}const v=m.match(/\[([^[\]]+)\]/);if(v){const[w,x]=v[1].split("=");x||(h+=`${a}.removeAttribute('${w}'.replace('%s', light));
      ${a}.removeAttribute('${w}'.replace('%s', dark));`),h+=`
      ${a}.setAttribute('${w}'.replace('%s', colorScheme), ${x?`${x}.replace('%s', colorScheme)`:'""'});`}else h+=`${a}.setAttribute('${m}', colorScheme);`;return ze.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?p:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${i}') || '${t}';
  const dark = localStorage.getItem('${o}-dark') || '${n}';
  const light = localStorage.getItem('${o}-light') || '${r}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${h}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function fQ(){}const hQ=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(r){if(typeof window>"u")return;if(!t)return r;let n;try{n=t.localStorage.getItem(e)}catch{}return n||r},set:r=>{if(t)try{t.localStorage.setItem(e,r)}catch{}},subscribe:r=>{if(!t)return fQ;const n=i=>{const o=i.newValue;i.key===e&&r(o)};return t.addEventListener("storage",n),()=>{t.removeEventListener("storage",n)}}});function Lw(){}function cL(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function s9(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function dQ(e){return s9(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function pQ(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:n,supportedColorSchemes:i=[],modeStorageKey:o=rI,colorSchemeStorageKey:u=nI,storageWindow:a=typeof window>"u"?void 0:window,storageManager:p=hQ,noSsr:h=!1}=e,m=i.join(","),v=i.length>1,w=I.useMemo(()=>p?.({key:o,storageWindow:a}),[p,o,a]),x=I.useMemo(()=>p?.({key:`${u}-light`,storageWindow:a}),[p,u,a]),P=I.useMemo(()=>p?.({key:`${u}-dark`,storageWindow:a}),[p,u,a]),[T,R]=I.useState(()=>{const J=w?.get(t)||t,X=x?.get(r)||r,le=P?.get(n)||n;return{mode:J,systemMode:cL(J),lightColorScheme:X,darkColorScheme:le}}),[k,N]=I.useState(h||!v);I.useEffect(()=>{N(!0)},[]);const F=dQ(T),D=I.useCallback(J=>{R(X=>{if(J===X.mode)return X;const le=J??t;return w?.set(le),{...X,mode:le,systemMode:cL(le)}})},[w,t]),U=I.useCallback(J=>{J?typeof J=="string"?J&&!m.includes(J)?console.error(`\`${J}\` does not exist in \`theme.colorSchemes\`.`):R(X=>{const le={...X};return s9(X,H=>{H==="light"&&(x?.set(J),le.lightColorScheme=J),H==="dark"&&(P?.set(J),le.darkColorScheme=J)}),le}):R(X=>{const le={...X},H=J.light===null?r:J.light,G=J.dark===null?n:J.dark;return H&&(m.includes(H)?(le.lightColorScheme=H,x?.set(H)):console.error(`\`${H}\` does not exist in \`theme.colorSchemes\`.`)),G&&(m.includes(G)?(le.darkColorScheme=G,P?.set(G)):console.error(`\`${G}\` does not exist in \`theme.colorSchemes\`.`)),le}):R(X=>(x?.set(r),P?.set(n),{...X,lightColorScheme:r,darkColorScheme:n}))},[m,x,P,r,n]),B=I.useCallback(J=>{T.mode==="system"&&R(X=>{const le=J?.matches?"dark":"light";return X.systemMode===le?X:{...X,systemMode:le}})},[T.mode]),Z=I.useRef(B);return Z.current=B,I.useEffect(()=>{if(typeof window.matchMedia!="function"||!v)return;const J=(...le)=>Z.current(...le),X=window.matchMedia("(prefers-color-scheme: dark)");return X.addListener(J),J(X),()=>{X.removeListener(J)}},[v]),I.useEffect(()=>{if(v){const J=w?.subscribe(H=>{(!H||["light","dark","system"].includes(H))&&D(H||t)})||Lw,X=x?.subscribe(H=>{(!H||m.match(H))&&U({light:H})})||Lw,le=P?.subscribe(H=>{(!H||m.match(H))&&U({dark:H})})||Lw;return()=>{J(),X(),le()}}},[U,D,m,t,a,v,w,x,P]),{...T,mode:k?T.mode:void 0,systemMode:k?T.systemMode:void 0,colorScheme:k?F:void 0,setMode:D,setColorScheme:U}}const mQ="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function gQ(e){const{themeId:t,theme:r={},modeStorageKey:n=rI,colorSchemeStorageKey:i=nI,disableTransitionOnChange:o=!1,defaultColorScheme:u,resolveTheme:a}=e,p={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},h=I.createContext(void 0),m=()=>I.useContext(h)||p,v={},w={};function x(k){const{children:N,theme:F,modeStorageKey:D=n,colorSchemeStorageKey:U=i,disableTransitionOnChange:B=o,storageManager:Z,storageWindow:J=typeof window>"u"?void 0:window,documentNode:X=typeof document>"u"?void 0:document,colorSchemeNode:le=typeof document>"u"?void 0:document.documentElement,disableNestedContext:H=!1,disableStyleSheetGeneration:G=!1,defaultMode:ae="system",forceThemeRerender:se=!1,noSsr:ue}=k,me=I.useRef(!1),Ce=tI(),pe=I.useContext(h),Ee=!!pe&&!H,Fe=I.useMemo(()=>F||(typeof r=="function"?r():r),[F]),Ke=Fe[t],fe=Ke||Fe,{colorSchemes:_e=v,components:Pe=w,cssVarPrefix:ke}=fe,$e=Object.keys(_e).filter(ur=>!!_e[ur]).join(","),ht=I.useMemo(()=>$e.split(","),[$e]),Ot=typeof u=="string"?u:u.light,mt=typeof u=="string"?u:u.dark,nt=_e[Ot]&&_e[mt]?ae:_e[fe.defaultColorScheme]?.palette?.mode||fe.palette?.mode,{mode:Nt,setMode:kt,systemMode:It,lightColorScheme:gt,darkColorScheme:Le,colorScheme:pr,setColorScheme:hr}=pQ({supportedColorSchemes:ht,defaultLightColorScheme:Ot,defaultDarkColorScheme:mt,modeStorageKey:D,colorSchemeStorageKey:U,defaultMode:nt,storageManager:Z,storageWindow:J,noSsr:ue});let vr=Nt,Qt=pr;Ee&&(vr=pe.mode,Qt=pe.colorScheme);let qe=Qt||fe.defaultColorScheme;fe.vars&&!se&&(qe=fe.defaultColorScheme);const rt=I.useMemo(()=>{const ur=fe.generateThemeVars?.()||fe.vars,br={...fe,components:Pe,colorSchemes:_e,cssVarPrefix:ke,vars:ur};if(typeof br.generateSpacing=="function"&&(br.spacing=br.generateSpacing()),qe){const xr=_e[qe];xr&&typeof xr=="object"&&Object.keys(xr).forEach(Rr=>{xr[Rr]&&typeof xr[Rr]=="object"?br[Rr]={...br[Rr],...xr[Rr]}:br[Rr]=xr[Rr]})}return a?a(br):br},[fe,qe,Pe,_e,ke]),ct=fe.colorSchemeSelector;Ru(()=>{if(Qt&&le&&ct&&ct!=="media"){const ur=ct;let br=ct;if(ur==="class"&&(br=".%s"),ur==="data"&&(br="[data-%s]"),ur?.startsWith("data-")&&!ur.includes("%s")&&(br=`[${ur}="%s"]`),br.startsWith("."))le.classList.remove(...ht.map(xr=>br.substring(1).replace("%s",xr))),le.classList.add(br.substring(1).replace("%s",Qt));else{const xr=br.replace("%s",Qt).match(/\[([^\]]+)\]/);if(xr){const[Rr,wr]=xr[1].split("=");wr||ht.forEach(fr=>{le.removeAttribute(Rr.replace(Qt,fr))}),le.setAttribute(Rr,wr?wr.replace(/"|'/g,""):"")}else le.setAttribute(br,Qt)}}},[Qt,ct,le,ht]),I.useEffect(()=>{let ur;if(B&&me.current&&X){const br=X.createElement("style");br.appendChild(X.createTextNode(mQ)),X.head.appendChild(br),window.getComputedStyle(X.body),ur=setTimeout(()=>{X.head.removeChild(br)},1)}return()=>{clearTimeout(ur)}},[Qt,B,X]),I.useEffect(()=>(me.current=!0,()=>{me.current=!1}),[]);const Ft=I.useMemo(()=>({allColorSchemes:ht,colorScheme:Qt,darkColorScheme:Le,lightColorScheme:gt,mode:vr,setColorScheme:hr,setMode:kt,systemMode:It}),[ht,Qt,Le,gt,vr,hr,kt,It,rt.colorSchemeSelector]);let Yt=!0;(G||fe.cssVariables===!1||Ee&&Ce?.cssVarPrefix===ke)&&(Yt=!1);const Wt=ze.jsxs(I.Fragment,{children:[ze.jsx(o9,{themeId:Ke?t:void 0,theme:rt,children:N}),Yt&&ze.jsx(z$,{styles:rt.generateStyleSheets?.()||[]})]});return Ee?Wt:ze.jsx(h.Provider,{value:Ft,children:Wt})}const P=typeof u=="string"?u:u.light,T=typeof u=="string"?u:u.dark;return{CssVarsProvider:x,useColorScheme:m,getInitColorSchemeScript:k=>cQ({colorSchemeStorageKey:i,defaultLightColorScheme:P,defaultDarkColorScheme:T,modeStorageKey:n,...k})}}function yQ(e=""){function t(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${e?`${e}-`:""}${n}${t(...i)})`}const fL=(e,t,r,n=[])=>{let i=e;t.forEach((o,u)=>{u===t.length-1?Array.isArray(i)?i[Number(o)]=r:i&&typeof i=="object"&&(i[o]=r):i&&typeof i=="object"&&(i[o]||(i[o]=n.includes(o)?[]:{}),i=i[o])})},vQ=(e,t,r)=>{function n(i,o=[],u=[]){Object.entries(i).forEach(([a,p])=>{(!r||r&&!r([...o,a]))&&p!=null&&(typeof p=="object"&&Object.keys(p).length>0?n(p,[...o,a],Array.isArray(p)?[...u,a]:u):t([...o,a],p,u))})}n(e)},bQ=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function Dw(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},i={},o={},u={};return vQ(e,(a,p,h)=>{if((typeof p=="string"||typeof p=="number")&&(!n||!n(a,p))){const m=`--${r?`${r}-`:""}${a.join("-")}`,v=bQ(a,p);Object.assign(i,{[m]:v}),fL(o,a,`var(${m})`,h),fL(u,a,`var(${m}, ${v})`,h)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:u}}function _Q(e,t={}){const{getSelector:r=k,disableCssColorScheme:n,colorSchemeSelector:i,enableContrastVars:o}=t,{colorSchemes:u={},components:a,defaultColorScheme:p="light",...h}=e,{vars:m,css:v,varsWithDefaults:w}=Dw(h,t);let x=w;const P={},{[p]:T,...R}=u;if(Object.entries(R||{}).forEach(([D,U])=>{const{vars:B,css:Z,varsWithDefaults:J}=Dw(U,t);x=es(x,J),P[D]={css:Z,vars:B}}),T){const{css:D,vars:U,varsWithDefaults:B}=Dw(T,t);x=es(x,B),P[p]={css:D,vars:U}}function k(D,U){let B=i;if(i==="class"&&(B=".%s"),i==="data"&&(B="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(B=`[${i}="%s"]`),D){if(B==="media")return e.defaultColorScheme===D?":root":{[`@media (prefers-color-scheme: ${u[D]?.palette?.mode||D})`]:{":root":U}};if(B)return e.defaultColorScheme===D?`:root, ${B.replace("%s",String(D))}`:B.replace("%s",String(D))}return":root"}return{vars:x,generateThemeVars:()=>{let D={...m};return Object.entries(P).forEach(([,{vars:U}])=>{D=es(D,U)}),D},generateStyleSheets:()=>{const D=[],U=e.defaultColorScheme||"light";function B(X,le){Object.keys(le).length&&D.push(typeof X=="string"?{[X]:{...le}}:X)}B(r(void 0,{...v}),v);const{[U]:Z,...J}=P;if(Z){const{css:X}=Z,le=u[U]?.palette?.mode,H=!n&&le?{colorScheme:le,...X}:{...X};B(r(U,{...H}),H)}return Object.entries(J).forEach(([X,{css:le}])=>{const H=u[X]?.palette?.mode,G=!n&&H?{colorScheme:H,...le}:{...le};B(r(X,{...G}),G)}),o&&D.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),D}}}function xQ(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}function Gn(e,t,r=void 0){const n={};for(const i in e){const o=e[i];let u="",a=!0;for(let p=0;p<o.length;p+=1){const h=o[p];h&&(u+=(a===!0?"":" ")+t(h),a=!1,r&&r[h]&&(u+=" "+r[h]))}n[i]=u}return n}function v_(e,t){return I.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const wQ=xx(),SQ=_p("div",{name:"MuiStack",slot:"Root"});function EQ(e){return Q3({props:e,name:"MuiStack",defaultTheme:wQ})}function CQ(e,t){const r=I.Children.toArray(e).filter(Boolean);return r.reduce((n,i,o)=>(n.push(i),o<r.length-1&&n.push(I.cloneElement(t,{key:`separator-${o}`})),n),[])}const AQ=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],PQ=({ownerState:e,theme:t})=>{let r={display:"flex",flexDirection:"column",...Tc({theme:t},Rw({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n}))};if(e.spacing){const n=mx(t),i=Object.keys(t.breakpoints.values).reduce((p,h)=>((typeof e.spacing=="object"&&e.spacing[h]!=null||typeof e.direction=="object"&&e.direction[h]!=null)&&(p[h]=!0),p),{}),o=Rw({values:e.direction,base:i}),u=Rw({values:e.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((p,h,m)=>{if(!o[p]){const w=h>0?o[m[h-1]]:"column";o[p]=w}}),r=es(r,Tc({theme:t},u,(p,h)=>e.useFlexGap?{gap:up(n,p)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${AQ(h?o[h]:e.direction)}`]:up(n,p)}}))}return r=qY(t.breakpoints,r),r};function TQ(e={}){const{createStyledComponent:t=SQ,useThemeProps:r=EQ,componentName:n="MuiStack"}=e,i=()=>Gn({root:["root"]},p=>Vn(n,p),{}),o=t(PQ);return I.forwardRef(function(p,h){const m=r(p),v=Y3(m),{component:w="div",direction:x="column",spacing:P=0,divider:T,children:R,className:k,useFlexGap:N=!1,...F}=v,D={direction:x,spacing:P,useFlexGap:N},U=i();return ze.jsx(o,{as:w,ownerState:D,ref:h,className:Hr(U.root,k),...F,children:T?CQ(R,T):R})})}const Yv={black:"#000",white:"#fff"},IQ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},nm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},im={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Cy={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},am={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},om={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},sm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function l9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Yv.white,default:Yv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const u9=l9();function c9(){return{text:{primary:Yv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Yv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const RP=c9();function hL(e,t,r,n){const i=n.light||n,o=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=Ax(e.main,i):t==="dark"&&(e.dark=Cx(e.main,o)))}function dL(e,t,r,n,i){const o=i.light||i,u=i.dark||i*1.5;t[r]||(t.hasOwnProperty(n)?t[r]=t[n]:r==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(o*100).toFixed(0)}%)`:r==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(u*100).toFixed(0)}%)`))}function MQ(e="light"){return e==="dark"?{main:am[200],light:am[50],dark:am[400]}:{main:am[700],light:am[400],dark:am[800]}}function RQ(e="light"){return e==="dark"?{main:nm[200],light:nm[50],dark:nm[400]}:{main:nm[500],light:nm[300],dark:nm[700]}}function OQ(e="light"){return e==="dark"?{main:im[500],light:im[300],dark:im[700]}:{main:im[700],light:im[400],dark:im[800]}}function kQ(e="light"){return e==="dark"?{main:om[400],light:om[300],dark:om[700]}:{main:om[700],light:om[500],dark:om[900]}}function LQ(e="light"){return e==="dark"?{main:sm[400],light:sm[300],dark:sm[700]}:{main:sm[800],light:sm[500],dark:sm[900]}}function DQ(e="light"){return e==="dark"?{main:Cy[400],light:Cy[300],dark:Cy[700]}:{main:"#ed6c02",light:Cy[500],dark:Cy[900]}}function NQ(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function iI(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,colorSpace:i,...o}=e,u=e.primary||MQ(t),a=e.secondary||RQ(t),p=e.error||OQ(t),h=e.info||kQ(t),m=e.success||LQ(t),v=e.warning||DQ(t);function w(R){return i?NQ(R):XJ(R,RP.text.primary)>=r?RP.text.primary:u9.text.primary}const x=({color:R,name:k,mainShade:N=500,lightShade:F=300,darkShade:D=700})=>{if(R={...R},!R.main&&R[N]&&(R.main=R[N]),!R.hasOwnProperty("main"))throw new Error(ch(11,k?` (${k})`:"",N));if(typeof R.main!="string")throw new Error(ch(12,k?` (${k})`:"",JSON.stringify(R.main)));return i?(dL(i,R,"light",F,n),dL(i,R,"dark",D,n)):(hL(R,"light",F,n),hL(R,"dark",D,n)),R.contrastText||(R.contrastText=w(R.main)),R};let P;return t==="light"?P=l9():t==="dark"&&(P=c9()),es({common:{...Yv},mode:t,primary:x({color:u,name:"primary"}),secondary:x({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:p,name:"error"}),warning:x({color:v,name:"warning"}),info:x({color:h,name:"info"}),success:x({color:m,name:"success"}),grey:IQ,contrastThreshold:r,getContrastText:w,augmentColor:x,tonalOffset:n,...P},o)}function FQ(e){const t={};return Object.entries(e).forEach(n=>{const[i,o]=n;typeof o=="object"&&(t[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),t}function BQ(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function jQ(e){return Math.round(e*1e5)/1e5}const pL={textTransform:"uppercase"},mL='"Roboto", "Helvetica", "Arial", sans-serif';function f9(e,t){const{fontFamily:r=mL,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:u=500,fontWeightBold:a=700,htmlFontSize:p=16,allVariants:h,pxToRem:m,...v}=typeof t=="function"?t(e):t,w=n/14,x=m||(R=>`${R/p*w}rem`),P=(R,k,N,F,D)=>({fontFamily:r,fontWeight:R,fontSize:x(k),lineHeight:N,...r===mL?{letterSpacing:`${jQ(F/k)}em`}:{},...D,...h}),T={h1:P(i,96,1.167,-1.5),h2:P(i,60,1.2,-.5),h3:P(o,48,1.167,0),h4:P(o,34,1.235,.25),h5:P(o,24,1.334,0),h6:P(u,20,1.6,.15),subtitle1:P(o,16,1.75,.15),subtitle2:P(u,14,1.57,.1),body1:P(o,16,1.5,.15),body2:P(o,14,1.43,.15),button:P(u,14,1.75,.4,pL),caption:P(o,12,1.66,.4),overline:P(o,12,2.66,1,pL),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return es({htmlFontSize:p,pxToRem:x,fontFamily:r,fontSize:n,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:u,fontWeightBold:a,...T},v,{clone:!1})}const zQ=.2,$Q=.14,qQ=.12;function Qa(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${zQ})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${$Q})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${qQ})`].join(",")}const UQ=["none",Qa(0,2,1,-1,0,1,1,0,0,1,3,0),Qa(0,3,1,-2,0,2,2,0,0,1,5,0),Qa(0,3,3,-2,0,3,4,0,0,1,8,0),Qa(0,2,4,-1,0,4,5,0,0,1,10,0),Qa(0,3,5,-1,0,5,8,0,0,1,14,0),Qa(0,3,5,-1,0,6,10,0,0,1,18,0),Qa(0,4,5,-2,0,7,10,1,0,2,16,1),Qa(0,5,5,-3,0,8,10,1,0,3,14,2),Qa(0,5,6,-3,0,9,12,1,0,3,16,2),Qa(0,6,6,-3,0,10,14,1,0,4,18,3),Qa(0,6,7,-4,0,11,15,1,0,4,20,3),Qa(0,7,8,-4,0,12,17,2,0,5,22,4),Qa(0,7,8,-4,0,13,19,2,0,5,24,4),Qa(0,7,9,-4,0,14,21,2,0,5,26,4),Qa(0,8,9,-5,0,15,22,2,0,6,28,5),Qa(0,8,10,-5,0,16,24,2,0,6,30,5),Qa(0,8,11,-5,0,17,26,2,0,6,32,5),Qa(0,9,11,-5,0,18,28,2,0,7,34,6),Qa(0,9,12,-6,0,19,29,2,0,7,36,6),Qa(0,10,13,-6,0,20,31,3,0,8,38,7),Qa(0,10,13,-6,0,21,33,3,0,8,40,7),Qa(0,10,14,-6,0,22,35,3,0,8,42,7),Qa(0,11,14,-7,0,23,36,3,0,9,44,8),Qa(0,11,15,-7,0,24,38,3,0,9,46,8)],VQ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},GQ={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function gL(e){return`${Math.round(e)}ms`}function HQ(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function WQ(e){const t={...VQ,...e.easing},r={...GQ,...e.duration};return{getAutoHeightDuration:HQ,create:(i=["all"],o={})=>{const{duration:u=r.standard,easing:a=t.easeInOut,delay:p=0,...h}=o;return(Array.isArray(i)?i:[i]).map(m=>`${m} ${typeof u=="string"?u:gL(u)} ${a} ${typeof p=="string"?p:gL(p)}`).join(",")},...e,easing:t,duration:r}}const ZQ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function KQ(e){return hf(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function h9(e={}){const t={...e};function r(n){const i=Object.entries(n);for(let o=0;o<i.length;o++){const[u,a]=i[o];!KQ(a)||u.startsWith("unstable_")?delete n[u]:hf(a)&&(n[u]={...a},r(n[u]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function yL(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const XQ=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let r=0;for(let n=0;n<t.length;n+=1)r+=+t[n];return r};function YQ(e){Object.assign(e,{alpha(t,r){const n=this||e;return n.colorSpace?`oklch(from ${t} l c h / ${typeof r=="string"?`calc(${r})`:r})`:n.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof r=="string"?`calc(${r})`:r})`:H_(t,XQ(r))},lighten(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #fff ${yL(r)})`:Ax(t,r)},darken(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #000 ${yL(r)})`:Cx(t,r)}})}function OP(e={},...t){const{breakpoints:r,mixins:n={},spacing:i,palette:o={},transitions:u={},typography:a={},shape:p,colorSpace:h,...m}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(ch(20));const v=iI({...o,colorSpace:h}),w=xx(e);let x=es(w,{mixins:BQ(w.breakpoints,n),palette:v,shadows:UQ.slice(),typography:f9(v,a),transitions:WQ(u),zIndex:{...ZQ}});return x=es(x,m),x=t.reduce((P,T)=>es(P,T),x),x.unstable_sxConfig={...C0,...m?.unstable_sxConfig},x.unstable_sx=function(T){return Xh({sx:T,theme:this})},x.toRuntimeSource=h9,YQ(x),x}function kP(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const JQ=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=kP(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function d9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function p9(e){return e==="dark"?JQ:[]}function QQ(e){const{palette:t={mode:"light"},opacity:r,overlays:n,colorSpace:i,...o}=e,u=iI({...t,colorSpace:i});return{palette:u,opacity:{...d9(u.mode),...r},overlays:n||p9(u.mode),...o}}function eee(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const tee=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],ree=e=>(t,r)=>{const n=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const u={};return tee(e.cssVarPrefix).forEach(a=>{u[a]=r[a],delete r[a]}),o==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:u}}:o?{[o.replace("%s",t)]:u,[`${n}, ${o.replace("%s",t)}`]:r}:{[n]:{...r,...u}}}if(o&&o!=="media")return`${n}, ${o.replace("%s",String(t))}`}else if(t){if(o==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(o)return o.replace("%s",String(t))}return n};function nee(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function Cr(e,t,r){!e[t]&&r&&(e[t]=r)}function rv(e){return typeof e!="string"||!e.startsWith("hsl")?e:r9(e)}function Vf(e,t){`${t}Channel`in e||(e[`${t}Channel`]=tv(rv(e[t])))}function iee(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const rf=e=>{try{return e()}catch{}},aee=(e="mui")=>yQ(e);function Nw(e,t,r,n,i){if(!r)return;r=r===!0?{}:r;const o=i==="dark"?"dark":"light";if(!n){t[i]=QQ({...r,palette:{mode:o,...r?.palette},colorSpace:e});return}const{palette:u,...a}=OP({...n,palette:{mode:o,...r?.palette},colorSpace:e});return t[i]={...r,palette:u,opacity:{...d9(o),...r?.opacity},overlays:r?.overlays||p9(o)},a}function oee(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",nativeColor:u=!1,shouldSkipGeneratingVar:a=eee,colorSchemeSelector:p=r.light&&r.dark?"media":void 0,rootSelector:h=":root",...m}=e,v=Object.keys(r)[0],w=n||(r.light&&v!=="light"?"light":v),x=aee(o),{[w]:P,light:T,dark:R,...k}=r,N={...k};let F=P;if((w==="dark"&&!("dark"in r)||w==="light"&&!("light"in r))&&(F=!0),!F)throw new Error(ch(21,w));let D;u&&(D="oklch");const U=Nw(D,N,F,m,w);T&&!N.light&&Nw(D,N,T,void 0,"light"),R&&!N.dark&&Nw(D,N,R,void 0,"dark");let B={defaultColorScheme:w,...U,cssVarPrefix:o,colorSchemeSelector:p,rootSelector:h,getCssVar:x,colorSchemes:N,font:{...FQ(U.typography),...U.font},spacing:iee(m.spacing)};Object.keys(B.colorSchemes).forEach(H=>{const G=B.colorSchemes[H].palette,ae=ue=>{const me=ue.split("-"),Ce=me[1],pe=me[2];return x(ue,G[Ce][pe])};G.mode==="light"&&(Cr(G.common,"background","#fff"),Cr(G.common,"onBackground","#000")),G.mode==="dark"&&(Cr(G.common,"background","#000"),Cr(G.common,"onBackground","#fff"));function se(ue,me,Ce){if(D){let pe;return ue===Od&&(pe=`transparent ${((1-Ce)*100).toFixed(0)}%`),ue===ca&&(pe=`#000 ${(Ce*100).toFixed(0)}%`),ue===fa&&(pe=`#fff ${(Ce*100).toFixed(0)}%`),`color-mix(in ${D}, ${me}, ${pe})`}return ue(me,Ce)}if(nee(G,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),G.mode==="light"){Cr(G.Alert,"errorColor",se(ca,G.error.light,.6)),Cr(G.Alert,"infoColor",se(ca,G.info.light,.6)),Cr(G.Alert,"successColor",se(ca,G.success.light,.6)),Cr(G.Alert,"warningColor",se(ca,G.warning.light,.6)),Cr(G.Alert,"errorFilledBg",ae("palette-error-main")),Cr(G.Alert,"infoFilledBg",ae("palette-info-main")),Cr(G.Alert,"successFilledBg",ae("palette-success-main")),Cr(G.Alert,"warningFilledBg",ae("palette-warning-main")),Cr(G.Alert,"errorFilledColor",rf(()=>G.getContrastText(G.error.main))),Cr(G.Alert,"infoFilledColor",rf(()=>G.getContrastText(G.info.main))),Cr(G.Alert,"successFilledColor",rf(()=>G.getContrastText(G.success.main))),Cr(G.Alert,"warningFilledColor",rf(()=>G.getContrastText(G.warning.main))),Cr(G.Alert,"errorStandardBg",se(fa,G.error.light,.9)),Cr(G.Alert,"infoStandardBg",se(fa,G.info.light,.9)),Cr(G.Alert,"successStandardBg",se(fa,G.success.light,.9)),Cr(G.Alert,"warningStandardBg",se(fa,G.warning.light,.9)),Cr(G.Alert,"errorIconColor",ae("palette-error-main")),Cr(G.Alert,"infoIconColor",ae("palette-info-main")),Cr(G.Alert,"successIconColor",ae("palette-success-main")),Cr(G.Alert,"warningIconColor",ae("palette-warning-main")),Cr(G.AppBar,"defaultBg",ae("palette-grey-100")),Cr(G.Avatar,"defaultBg",ae("palette-grey-400")),Cr(G.Button,"inheritContainedBg",ae("palette-grey-300")),Cr(G.Button,"inheritContainedHoverBg",ae("palette-grey-A100")),Cr(G.Chip,"defaultBorder",ae("palette-grey-400")),Cr(G.Chip,"defaultAvatarColor",ae("palette-grey-700")),Cr(G.Chip,"defaultIconColor",ae("palette-grey-700")),Cr(G.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Cr(G.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Cr(G.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Cr(G.LinearProgress,"primaryBg",se(fa,G.primary.main,.62)),Cr(G.LinearProgress,"secondaryBg",se(fa,G.secondary.main,.62)),Cr(G.LinearProgress,"errorBg",se(fa,G.error.main,.62)),Cr(G.LinearProgress,"infoBg",se(fa,G.info.main,.62)),Cr(G.LinearProgress,"successBg",se(fa,G.success.main,.62)),Cr(G.LinearProgress,"warningBg",se(fa,G.warning.main,.62)),Cr(G.Skeleton,"bg",D?se(Od,G.text.primary,.11):`rgba(${ae("palette-text-primaryChannel")} / 0.11)`),Cr(G.Slider,"primaryTrack",se(fa,G.primary.main,.62)),Cr(G.Slider,"secondaryTrack",se(fa,G.secondary.main,.62)),Cr(G.Slider,"errorTrack",se(fa,G.error.main,.62)),Cr(G.Slider,"infoTrack",se(fa,G.info.main,.62)),Cr(G.Slider,"successTrack",se(fa,G.success.main,.62)),Cr(G.Slider,"warningTrack",se(fa,G.warning.main,.62));const ue=D?se(ca,G.background.default,.6825):Sb(G.background.default,.8);Cr(G.SnackbarContent,"bg",ue),Cr(G.SnackbarContent,"color",rf(()=>D?RP.text.primary:G.getContrastText(ue))),Cr(G.SpeedDialAction,"fabHoverBg",Sb(G.background.paper,.15)),Cr(G.StepConnector,"border",ae("palette-grey-400")),Cr(G.StepContent,"border",ae("palette-grey-400")),Cr(G.Switch,"defaultColor",ae("palette-common-white")),Cr(G.Switch,"defaultDisabledColor",ae("palette-grey-100")),Cr(G.Switch,"primaryDisabledColor",se(fa,G.primary.main,.62)),Cr(G.Switch,"secondaryDisabledColor",se(fa,G.secondary.main,.62)),Cr(G.Switch,"errorDisabledColor",se(fa,G.error.main,.62)),Cr(G.Switch,"infoDisabledColor",se(fa,G.info.main,.62)),Cr(G.Switch,"successDisabledColor",se(fa,G.success.main,.62)),Cr(G.Switch,"warningDisabledColor",se(fa,G.warning.main,.62)),Cr(G.TableCell,"border",se(fa,se(Od,G.divider,1),.88)),Cr(G.Tooltip,"bg",se(Od,G.grey[700],.92))}if(G.mode==="dark"){Cr(G.Alert,"errorColor",se(fa,G.error.light,.6)),Cr(G.Alert,"infoColor",se(fa,G.info.light,.6)),Cr(G.Alert,"successColor",se(fa,G.success.light,.6)),Cr(G.Alert,"warningColor",se(fa,G.warning.light,.6)),Cr(G.Alert,"errorFilledBg",ae("palette-error-dark")),Cr(G.Alert,"infoFilledBg",ae("palette-info-dark")),Cr(G.Alert,"successFilledBg",ae("palette-success-dark")),Cr(G.Alert,"warningFilledBg",ae("palette-warning-dark")),Cr(G.Alert,"errorFilledColor",rf(()=>G.getContrastText(G.error.dark))),Cr(G.Alert,"infoFilledColor",rf(()=>G.getContrastText(G.info.dark))),Cr(G.Alert,"successFilledColor",rf(()=>G.getContrastText(G.success.dark))),Cr(G.Alert,"warningFilledColor",rf(()=>G.getContrastText(G.warning.dark))),Cr(G.Alert,"errorStandardBg",se(ca,G.error.light,.9)),Cr(G.Alert,"infoStandardBg",se(ca,G.info.light,.9)),Cr(G.Alert,"successStandardBg",se(ca,G.success.light,.9)),Cr(G.Alert,"warningStandardBg",se(ca,G.warning.light,.9)),Cr(G.Alert,"errorIconColor",ae("palette-error-main")),Cr(G.Alert,"infoIconColor",ae("palette-info-main")),Cr(G.Alert,"successIconColor",ae("palette-success-main")),Cr(G.Alert,"warningIconColor",ae("palette-warning-main")),Cr(G.AppBar,"defaultBg",ae("palette-grey-900")),Cr(G.AppBar,"darkBg",ae("palette-background-paper")),Cr(G.AppBar,"darkColor",ae("palette-text-primary")),Cr(G.Avatar,"defaultBg",ae("palette-grey-600")),Cr(G.Button,"inheritContainedBg",ae("palette-grey-800")),Cr(G.Button,"inheritContainedHoverBg",ae("palette-grey-700")),Cr(G.Chip,"defaultBorder",ae("palette-grey-700")),Cr(G.Chip,"defaultAvatarColor",ae("palette-grey-300")),Cr(G.Chip,"defaultIconColor",ae("palette-grey-300")),Cr(G.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Cr(G.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Cr(G.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Cr(G.LinearProgress,"primaryBg",se(ca,G.primary.main,.5)),Cr(G.LinearProgress,"secondaryBg",se(ca,G.secondary.main,.5)),Cr(G.LinearProgress,"errorBg",se(ca,G.error.main,.5)),Cr(G.LinearProgress,"infoBg",se(ca,G.info.main,.5)),Cr(G.LinearProgress,"successBg",se(ca,G.success.main,.5)),Cr(G.LinearProgress,"warningBg",se(ca,G.warning.main,.5)),Cr(G.Skeleton,"bg",D?se(Od,G.text.primary,.13):`rgba(${ae("palette-text-primaryChannel")} / 0.13)`),Cr(G.Slider,"primaryTrack",se(ca,G.primary.main,.5)),Cr(G.Slider,"secondaryTrack",se(ca,G.secondary.main,.5)),Cr(G.Slider,"errorTrack",se(ca,G.error.main,.5)),Cr(G.Slider,"infoTrack",se(ca,G.info.main,.5)),Cr(G.Slider,"successTrack",se(ca,G.success.main,.5)),Cr(G.Slider,"warningTrack",se(ca,G.warning.main,.5));const ue=D?se(fa,G.background.default,.985):Sb(G.background.default,.98);Cr(G.SnackbarContent,"bg",ue),Cr(G.SnackbarContent,"color",rf(()=>D?u9.text.primary:G.getContrastText(ue))),Cr(G.SpeedDialAction,"fabHoverBg",Sb(G.background.paper,.15)),Cr(G.StepConnector,"border",ae("palette-grey-600")),Cr(G.StepContent,"border",ae("palette-grey-600")),Cr(G.Switch,"defaultColor",ae("palette-grey-300")),Cr(G.Switch,"defaultDisabledColor",ae("palette-grey-600")),Cr(G.Switch,"primaryDisabledColor",se(ca,G.primary.main,.55)),Cr(G.Switch,"secondaryDisabledColor",se(ca,G.secondary.main,.55)),Cr(G.Switch,"errorDisabledColor",se(ca,G.error.main,.55)),Cr(G.Switch,"infoDisabledColor",se(ca,G.info.main,.55)),Cr(G.Switch,"successDisabledColor",se(ca,G.success.main,.55)),Cr(G.Switch,"warningDisabledColor",se(ca,G.warning.main,.55)),Cr(G.TableCell,"border",se(ca,se(Od,G.divider,1),.68)),Cr(G.Tooltip,"bg",se(Od,G.grey[700],.92))}Vf(G.background,"default"),Vf(G.background,"paper"),Vf(G.common,"background"),Vf(G.common,"onBackground"),Vf(G,"divider"),Object.keys(G).forEach(ue=>{const me=G[ue];ue!=="tonalOffset"&&me&&typeof me=="object"&&(me.main&&Cr(G[ue],"mainChannel",tv(rv(me.main))),me.light&&Cr(G[ue],"lightChannel",tv(rv(me.light))),me.dark&&Cr(G[ue],"darkChannel",tv(rv(me.dark))),me.contrastText&&Cr(G[ue],"contrastTextChannel",tv(rv(me.contrastText))),ue==="text"&&(Vf(G[ue],"primary"),Vf(G[ue],"secondary")),ue==="action"&&(me.active&&Vf(G[ue],"active"),me.selected&&Vf(G[ue],"selected")))})}),B=t.reduce((H,G)=>es(H,G),B);const Z={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:ree(B),enableContrastVars:u},{vars:J,generateThemeVars:X,generateStyleSheets:le}=_Q(B,Z);return B.vars=J,Object.entries(B.colorSchemes[B.defaultColorScheme]).forEach(([H,G])=>{B[H]=G}),B.generateThemeVars=X,B.generateStyleSheets=le,B.generateSpacing=function(){return H$(m.spacing,mx(this))},B.getColorSchemeSelector=xQ(p),B.spacing=B.generateSpacing(),B.shouldSkipGeneratingVar=a,B.unstable_sxConfig={...C0,...m?.unstable_sxConfig},B.unstable_sx=function(G){return Xh({sx:G,theme:this})},B.toRuntimeSource=h9,B}function vL(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:iI({...r===!0?{}:r.palette,mode:t})})}function Jh(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:i=r?void 0:{light:!0},defaultColorScheme:o=r?.mode,...u}=e,a=o||"light",p=i?.[a],h={...i,...r?{[a]:{...typeof p!="boolean"&&p,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return OP(e,...t);let m=r;"palette"in e||h[a]&&(h[a]!==!0?m=h[a].palette:a==="dark"&&(m={mode:"dark"}));const v=OP({...e,palette:m},...t);return v.defaultColorScheme=a,v.colorSchemes=h,v.palette.mode==="light"&&(v.colorSchemes.light={...h.light!==!0&&h.light,palette:v.palette},vL(v,"dark",h.dark)),v.palette.mode==="dark"&&(v.colorSchemes.dark={...h.dark!==!0&&h.dark,palette:v.palette},vL(v,"light",h.light)),v}return!r&&!("light"in h)&&a==="light"&&(h.light=!0),oee({...u,colorSchemes:h,defaultColorScheme:a,...typeof n!="boolean"&&n},...t)}const Tx=Jh();function wf(){const e=Sx(Tx);return e[Wu]||e}function pi({props:e,name:t}){return Q3({props:e,name:t,defaultTheme:Tx,themeId:Wu})}function m9(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const ml=e=>m9(e)&&e!=="classes",nr=J$({themeId:Wu,defaultTheme:Tx,rootShouldForwardProp:ml});function see({theme:e,...t}){const r=Wu in e?e[Wu]:void 0;return ze.jsx(o9,{...t,themeId:r?Wu:void 0,theme:r||e})}const Eb={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:lee}=gQ({themeId:Wu,theme:()=>Jh({cssVariables:!0}),colorSchemeStorageKey:Eb.colorSchemeStorageKey,modeStorageKey:Eb.modeStorageKey,defaultColorScheme:{light:Eb.defaultLightColorScheme,dark:Eb.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:f9(e.palette,e.typography)};return t.unstable_sx=function(n){return Xh({sx:n,theme:this})},t}}),uee=lee;function g9({theme:e,...t}){const r=I.useMemo(()=>{if(typeof e=="function")return e;const n=Wu in e?e[Wu]:e;return"colorSchemes"in n?null:"vars"in n?e:{...e,vars:null}},[e]);return r?ze.jsx(see,{theme:r,...t}):ze.jsx(uee,{theme:e,...t})}const cee=Jh({palette:{mode:"light"}});Jh({palette:{mode:"dark"}});const fee=e=>({...cee,palette:{mode:e,primary:{main:"#009EE0"},secondary:{main:"#747577"},text:{primary:"#000",contrast:"#fff"},topToolbar:{barColor:"#fff"},navigation:{buttonColor:"#747577",navColor:"#fff",navHover:"#f5f5f5"},GPS:{GPSActiveColor:"#009EE0",GPSInactiveColor:"#747577",GPSActiveBackgroundColor:"#fff"},compass:{compColor:"#fff",compHover:"#f5f5f5",compStroke:"#009ee0",compNorth:"#cf003f",compSouth:"#d3dcf0"}}}),hee=e=>{const t=fee(["light","dark"].includes(e)?e:"light");return Jh(t,{components:{MuiTypography:{styleOverrides:{root:{}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:t.palette.topToolbar.barColor}}},MuiButton:{variants:[{props:{variant:"navtools"},style:{minWidth:"20px",minHeight:"20px",fontWeight:600,[t.breakpoints.down("md")]:{width:"50px",height:"50px",fontSize:"1.4em"},[t.breakpoints.up("md")]:{width:"30px",height:"30px",fontSize:"1.2em"},color:t.palette.text.primary,backgroundColor:t.palette.navigation.navColor,borderRadius:"23%",margin:"0.15px",marginTop:"4px",":hover":{backgroundColor:t.palette.navigation.navHover}}}]},MuiListItemText:{styleOverrides:{primary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.9rem"}:{},secondary:({ownerState:r})=>r?.variant==="layerlist"?{fontSize:"0.7rem"}:{}}}}})},dee={sourceOptions_tiles:["https://wms.wheregroup.com/tileserver/tile/world-0-14/{z}/{x}/{y}.pbf"]},Fs=[];for(let e=0;e<256;++e)Fs.push((e+256).toString(16).slice(1));function pee(e,t=0){return(Fs[e[t+0]]+Fs[e[t+1]]+Fs[e[t+2]]+Fs[e[t+3]]+"-"+Fs[e[t+4]]+Fs[e[t+5]]+"-"+Fs[e[t+6]]+Fs[e[t+7]]+"-"+Fs[e[t+8]]+Fs[e[t+9]]+"-"+Fs[e[t+10]]+Fs[e[t+11]]+Fs[e[t+12]]+Fs[e[t+13]]+Fs[e[t+14]]+Fs[e[t+15]]).toLowerCase()}let Fw;const mee=new Uint8Array(16);function gee(){if(!Fw){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Fw=crypto.getRandomValues.bind(crypto)}return Fw(mee)}const yee=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bL={randomUUID:yee};function Jv(e,t,r){if(bL.randomUUID&&!e)return bL.randomUUID();e=e||{};const n=e.random??e.rng?.()??gee();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,pee(n)}const vee=je.createContext({});function y9(e){const[t,r]=je.useState([]),[n,i]=je.useState([]),[o,u]=je.useState([]),[a,p]=je.useState(dee.sourceOptions_tiles[0]),h=I.useMemo(()=>({layerId:"openmaptiles",sourceOptions:{type:"vector",tiles:[a]}}),[a]),m=T=>{if(!T)return;const R=[],k=[];T.layers.forEach((N,F)=>{N.type==="symbol"?k.push(N):(F===0&&(N.id=T.name||"background"),R.push(N))}),i(R),u(k)};I.useEffect(()=>{if(t.filter(T=>!T?.id).length){const T=[...t];T.forEach(R=>{R?.id||(R.id=Jv())}),r(T)}},[t]);const v=I.useCallback((T,R)=>{const k=t?.filter?.(N=>N.id===T);if(k.length>0){const N=[...t],F=k[0],D=t.indexOf(F),U=R(D);U>=0&&U<=t.length-1&&(N.splice(D,1),N.splice(U,0,F),r(N))}},[t]),w=I.useCallback(T=>{v(T,R=>R+1)},[v]),x=I.useCallback(T=>{v(T,R=>R-1)},[v]),P={layers:t,setLayers:r,backgroundLayers:n,setBackgroundLayers:i,symbolLayers:o,setSymbolLayers:u,updateStyle:m,vtLayerConfig:h,tileUrl:a,setTileUrl:p,moveUp:x,moveDown:w,moveLayer:v};return ze.jsx(vee.Provider,{value:P,children:e.children})}y9.__docgenInfo={description:"",methods:[],displayName:"LayerContextProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Ix=je.createContext({}),Mx=({children:e})=>{const[t,r]=I.useState(void 0),[n,i]=I.useState([]),o=I.useRef([]),u=I.useRef({}),a=m=>{if(m){typeof u.current[m]<"u"&&delete u.current[m];const v=o.current.indexOf(m);v>-1&&o.current.splice(v,1),i([...o.current]),o.current.length===0&&t&&r(void 0)}else a("anonymous_map")},h={map:t,setMap:m=>{if(r(m),n.length===0){const v="anonymous_map";i([...n,v]),u.current[v]=m}},maps:u.current,mapIds:n,registerMap:(m,v)=>{m&&v&&(u.current[m]=v,o.current.push(m),i([...o.current]),(!t||t?.cancelled===!0)&&r(v))},removeMap:a,mapExists:m=>m&&Object.keys(u.current).indexOf(m)===-1?!1:!(!m&&!t),getMap:m=>m&&n.indexOf(m)!==-1?u.current[m]:!m&&t?t:null};return ze.jsx(Ix.Provider,{value:h,children:ze.jsx(y9,{children:ze.jsx(g9,{theme:hee("light"),children:e})})})};Mx.__docgenInfo={description:`MapComponentsProvider must be imported and wrapped around component where at least one of its child nodes requires access to a MapLibre-gl or openlayers instance that is registered in this mapContext.
MapComponentsProvider must be used one level higher than the first use of MapContext.

MapComponentsProvider requires at least one use of the MapLibreMap component somewhere down the component tree that will create the MapLibre-gl object and set the reference at MapContext.map. For MapLibre maps it is a good idea to provide a mapId attribute to the MapLibreMap Component even if you are only using a single map instance at start. It will make a later transition to using multiple instances within the same project much easier.`,methods:[],displayName:"MapComponentsProvider",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const v9={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",layers:[{id:"_background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}}},A0=e=>{const t=I.useRef(null),r=I.useRef(null),n=I.useContext(Ix),i=I.useRef(e.mapId),o=I.useRef(!1),u=I.useRef(e.options?.style);return I.useEffect(()=>{const a=i.current;return()=>{o.current=!1,n.removeMap(a),t.current&&(t.current.map?.remove?.(),t.current.cancelled=!0,t.current=null)}},[]),I.useEffect(()=>{o.current||r.current&&(o.current=!0,t.current=new IX({mapOptions:{style:"",...e.options,...e?.options?.style?{}:{style:v9?.options?.style},container:r.current},onReady:(a,p)=>{a.once("load",()=>{p?.cancelled?a.remove():(window._map=a,e.mapId?n.registerMap(e.mapId,p):n.setMap(p))})}}))},[e.options,e.mapId]),I.useEffect(()=>{t.current?.map&&e?.options?.style&&u.current!==e.options.style&&(u.current=e.options.style,t.current.map.setStyle(e.options.style))},[e?.options?.style]),ze.jsx("div",{ref:r,className:"mapContainer",style:e.style})};A0.defaultProps=v9;A0.__docgenInfo={description:`Creates a MapLibreGlWrapper instance and registers it in MapContext
after the MapLibre-gl load event has fired.

MapLibreMap returns the html node that will be used by MapLibre-gl to render the map.
This Component must be kept unaware of any related components that interact with the MapLibre-gl
instance.

@category Map components`,methods:[],displayName:"MapLibreMap",props:{mapId:{required:!1,tsType:{name:"string"},description:"Id of the MapLibreGl(Wrapper) instance in mapContext",defaultValue:{value:"undefined",computed:!0}},options:{required:!1,tsType:{name:"Partial",elements:[{name:"MapOptionsType"}],raw:"Partial<MapOptionsType>"},description:`Config object that is passed to the MapLibreGl constructor as first parameter.
See https://maplibre.org/maplibre-gl-js-docs/api/map/ for a formal documentation of al
available properties.`,defaultValue:{value:`{
	center: { lng: 8.607, lat: 53.1409349 },
	zoom: 11,
	container: '',
	style: {
		version: 8,
		name: 'blank',
		center: [0, 0],
		zoom: 0,
		sources: {},
		sprite: 'https://wms.wheregroup.com/tileserver/sprites/osm-bright',
		glyphs: 'https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf',
		layers: [
			{
				id: '_background',
				type: 'background',
				paint: {
					'background-color': 'rgba(0,0,0,0)',
				},
			},
		],
	},
}`,computed:!1}},style:{required:!1,tsType:{name:"object"},description:"css style definition passed to the map container DOM element"}}};function b9(e){const t=I.useContext(Ix),r=I.useRef(!1),n=I.useRef(null),[i,o]=I.useState(),u=I.useRef(void 0),[a,p]=I.useState([]),h=I.useRef(""),m=I.useRef(Jv()),v=I.useCallback(x=>!e?.filter?.includeBaseLayers&&x?.baseLayer?!1:typeof e.filter?.matchLayerIds<"u"?e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(x.id):x.id.includes(e.filter.matchLayerIds):!0,[e.filter]),w=I.useCallback(()=>{if(!n.current)return;const x=n.current.wrapper.layerState.filter(v),P=JSON.stringify(x);h.current!==P&&(h.current=P,p(x))},[v]);return I.useEffect(()=>{const x=m.current;return()=>{n.current&&(n.current.cleanup(x),n.current=null),r.current=!1}},[]),I.useEffect(()=>{if(!(!t.mapExists(e.mapId)||r.current)){if(r.current=!0,n.current=t.getMap(e.mapId),!n.current){r.current=!1;return}e?.watch?.viewport&&(o(n.current.wrapper.viewportState),n.current.wrapper.on("viewportchange",()=>{u.current!==n.current?.wrapper.viewportStateString&&o(n.current?.wrapper.viewportState)},m.current)),e?.watch?.layers&&(w(),n.current.wrapper.on("layerchange",w,{includeBaseLayers:e?.filter?.includeBaseLayers,matchLayerIds:e?.filter?.matchLayerIds},m.current))}},[t.mapIds,t,e.mapId,w,e]),{layers:a,viewport:i}}b9.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}};function P0(e){const t=I.useContext(Ix),[r,n]=I.useState({map:void 0,ready:!1}),i=b9({mapId:e?.mapId,watch:{viewport:!1,layers:!!e?.waitForLayer,sources:!1},filter:{includeBaseLayers:!0}}),o=I.useRef(null),u=I.useRef(Jv()),a=()=>{o.current&&o.current.cleanup(u.current)};return I.useEffect(()=>()=>{a(),o.current=null},[]),I.useEffect(()=>{if(o.current&&o.current.cancelled===!0&&(o.current=null,n({map:void 0,ready:!1})),!(o.current||!t.mapExists(e?.mapId))){if(e?.waitForLayer){let p=!1;if(i?.layers?.forEach(h=>{h.id===e?.waitForLayer&&(p=!0)}),!p)return}o.current=t.getMap(e?.mapId),n({map:o.current,ready:!0})}},[t.mapIds,i.layers,t,e]),{map:r.map,mapIsReady:r.ready,componentId:u.current,layers:i.layers,cleanup:a}}function _L(...e){return e.reduce((t,r)=>r==null?t:function(...i){t.apply(this,i),r.apply(this,i)},()=>{})}function bee(e){return ze.jsx(W$,{...e,defaultTheme:Tx,themeId:Wu})}function aI(e){return function(r){return ze.jsx(bee,{styles:typeof e=="function"?n=>e({theme:n,...r}):e})}}function _ee(){return Y3}const xi=lQ;function Xn(e){return iQ(e)}function xee(e){return Vn("MuiSvgIcon",e)}Bn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const wee=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${an(t)}`,`fontSize${an(r)}`]};return Gn(i,xee,n)},See=nr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${an(r.color)}`],t[`fontSize${an(r.fontSize)}`]]}})(xi(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),LP=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:u="inherit",component:a="svg",fontSize:p="medium",htmlColor:h,inheritViewBox:m=!1,titleAccess:v,viewBox:w="0 0 24 24",...x}=n,P=I.isValidElement(i)&&i.type==="svg",T={...n,color:u,component:a,fontSize:p,instanceFontSize:t.fontSize,inheritViewBox:m,viewBox:w,hasSvgAsChild:P},R={};m||(R.viewBox=w);const k=wee(T);return ze.jsxs(See,{as:a,className:Hr(k.root,o),focusable:"false",color:h,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:r,...R,...x,...P&&i.props,ownerState:T,children:[P?i.props.children:i,v?ze.jsx("title",{children:v}):null]})});LP.muiName="SvgIcon";function Ci(e,t){function r(n,i){return ze.jsx(LP,{"data-testid":void 0,ref:i,...n,children:e})}return r.muiName=LP.muiName,I.memo(I.forwardRef(r))}function oI(e,t=166){let r;function n(...i){const o=()=>{e.apply(this,i)};clearTimeout(r),r=setTimeout(o,t)}return n.clear=()=>{clearTimeout(r)},n}function pl(e){return e&&e.ownerDocument||document}function Ic(e){return pl(e).defaultView||window}function xL(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function W_(e){const{controlled:t,default:r,name:n,state:i="value"}=e,{current:o}=I.useRef(t!==void 0),[u,a]=I.useState(r),p=o?t:u,h=I.useCallback(m=>{o||a(m)},[]);return[p,h]}function Zu(e){const t=I.useRef(e);return Ru(()=>{t.current=e}),I.useRef((...r)=>(0,t.current)(...r)).current}function So(...e){const t=I.useRef(void 0),r=I.useCallback(n=>{const i=e.map(o=>{if(o==null)return null;if(typeof o=="function"){const u=o,a=u(n);return typeof a=="function"?a:()=>{u(null)}}return o.current=n,()=>{o.current=null}});return()=>{i.forEach(o=>o?.())}},e);return I.useMemo(()=>e.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=r(n))},e)}function Eee(e,t){const r=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&r>=65&&r<=90&&typeof t=="function"}function sI(e,t){if(!e)return t;function r(u,a){const p={};return Object.keys(a).forEach(h=>{Eee(h,a[h])&&typeof u[h]=="function"&&(p[h]=(...m)=>{u[h](...m),a[h](...m)})}),p}if(typeof e=="function"||typeof t=="function")return u=>{const a=typeof t=="function"?t(u):t,p=typeof e=="function"?e({...u,...a}):e,h=Hr(u?.className,a?.className,p?.className),m=r(p,a);return{...a,...p,...m,...!!h&&{className:h},...a?.style&&p?.style&&{style:{...a.style,...p.style}},...a?.sx&&p?.sx&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(p.sx)?p.sx:[p.sx]]}}};const n=t,i=r(e,n),o=Hr(n?.className,e?.className);return{...t,...e,...i,...!!o&&{className:o},...n?.style&&e?.style&&{style:{...n.style,...e.style}},...n?.sx&&e?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function _9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function DP(e,t){return DP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},DP(e,t)}function x9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,DP(e,t)}var Rx=SX();const Cb=qs(Rx),wL={disabled:!1},Z_=je.createContext(null);var Cee=function(t){return t.scrollTop},nv="unmounted",jd="exited",zd="entering",_m="entered",NP="exiting",kc=(function(e){x9(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var u=i,a=u&&!u.isMounting?n.enter:n.appear,p;return o.appearStatus=null,n.in?a?(p=jd,o.appearStatus=zd):p=_m:n.unmountOnExit||n.mountOnEnter?p=nv:p=jd,o.state={status:p},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var u=i.in;return u&&o.status===nv?{status:jd}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var o=null;if(i!==this.props){var u=this.state.status;this.props.in?u!==zd&&u!==_m&&(o=zd):(u===zd||u===_m)&&(o=NP)}this.updateStatus(!1,o)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,o,u,a;return o=u=a=i,i!=null&&typeof i!="number"&&(o=i.exit,u=i.enter,a=i.appear!==void 0?i.appear:u),{exit:o,enter:u,appear:a}},r.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===zd){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:Cb.findDOMNode(this);u&&Cee(u)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===jd&&this.setState({status:nv})},r.performEnter=function(i){var o=this,u=this.props.enter,a=this.context?this.context.isMounting:i,p=this.props.nodeRef?[a]:[Cb.findDOMNode(this),a],h=p[0],m=p[1],v=this.getTimeouts(),w=a?v.appear:v.enter;if(!i&&!u||wL.disabled){this.safeSetState({status:_m},function(){o.props.onEntered(h)});return}this.props.onEnter(h,m),this.safeSetState({status:zd},function(){o.props.onEntering(h,m),o.onTransitionEnd(w,function(){o.safeSetState({status:_m},function(){o.props.onEntered(h,m)})})})},r.performExit=function(){var i=this,o=this.props.exit,u=this.getTimeouts(),a=this.props.nodeRef?void 0:Cb.findDOMNode(this);if(!o||wL.disabled){this.safeSetState({status:jd},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:NP},function(){i.props.onExiting(a),i.onTransitionEnd(u.exit,function(){i.safeSetState({status:jd},function(){i.props.onExited(a)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},r.setNextCallback=function(i){var o=this,u=!0;return this.nextCallback=function(a){u&&(u=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},r.onTransitionEnd=function(i,o){this.setNextCallback(o);var u=this.props.nodeRef?this.props.nodeRef.current:Cb.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!u||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var p=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],h=p[0],m=p[1];this.props.addEndListener(h,m)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===nv)return null;var o=this.props,u=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=_9(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return je.createElement(Z_.Provider,{value:null},typeof u=="function"?u(i,a):je.cloneElement(je.Children.only(u),a))},t})(je.Component);kc.contextType=Z_;kc.propTypes={};function lm(){}kc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:lm,onEntering:lm,onEntered:lm,onExit:lm,onExiting:lm,onExited:lm};kc.UNMOUNTED=nv;kc.EXITED=jd;kc.ENTERING=zd;kc.ENTERED=_m;kc.EXITING=NP;function Aee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lI(e,t){var r=function(o){return t&&I.isValidElement(o)?t(o):o},n=Object.create(null);return e&&I.Children.map(e,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function Pee(e,t){e=e||{},t=t||{};function r(m){return m in t?t[m]:e[m]}var n=Object.create(null),i=[];for(var o in e)o in t?i.length&&(n[o]=i,i=[]):i.push(o);var u,a={};for(var p in t){if(n[p])for(u=0;u<n[p].length;u++){var h=n[p][u];a[n[p][u]]=r(h)}a[p]=r(p)}for(u=0;u<i.length;u++)a[i[u]]=r(i[u]);return a}function Jd(e,t,r){return r[t]!=null?r[t]:e.props[t]}function Tee(e,t){return lI(e.children,function(r){return I.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:Jd(r,"appear",e),enter:Jd(r,"enter",e),exit:Jd(r,"exit",e)})})}function Iee(e,t,r){var n=lI(e.children),i=Pee(t,n);return Object.keys(i).forEach(function(o){var u=i[o];if(I.isValidElement(u)){var a=o in t,p=o in n,h=t[o],m=I.isValidElement(h)&&!h.props.in;p&&(!a||m)?i[o]=I.cloneElement(u,{onExited:r.bind(null,u),in:!0,exit:Jd(u,"exit",e),enter:Jd(u,"enter",e)}):!p&&a&&!m?i[o]=I.cloneElement(u,{in:!1}):p&&a&&I.isValidElement(h)&&(i[o]=I.cloneElement(u,{onExited:r.bind(null,u),in:h.props.in,exit:Jd(u,"exit",e),enter:Jd(u,"enter",e)}))}}),i}var Mee=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Ree={component:"div",childFactory:function(t){return t}},uI=(function(e){x9(t,e);function t(n,i){var o;o=e.call(this,n,i)||this;var u=o.handleExited.bind(Aee(o));return o.state={contextValue:{isMounting:!0},handleExited:u,firstRender:!0},o}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var u=o.children,a=o.handleExited,p=o.firstRender;return{children:p?Tee(i,a):Iee(i,u,a),firstRender:!1}},r.handleExited=function(i,o){var u=lI(this.props.children);i.key in u||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var p=U_({},a.children);return delete p[i.key],{children:p}}))},r.render=function(){var i=this.props,o=i.component,u=i.childFactory,a=_9(i,["component","childFactory"]),p=this.state.contextValue,h=Mee(this.state.children).map(u);return delete a.appear,delete a.enter,delete a.exit,o===null?je.createElement(Z_.Provider,{value:p},h):je.createElement(Z_.Provider,{value:p},je.createElement(o,a,h))},t})(je.Component);uI.propTypes={};uI.defaultProps=Ree;const SL={};function w9(e,t){const r=I.useRef(SL);return r.current===SL&&(r.current=e(t)),r}const Oee=[];function kee(e){I.useEffect(e,Oee)}class Ox{static create(){return new Ox}currentId=null;start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Qd(){const e=w9(Ox.create).current;return kee(e.disposeEffect),e}const cI=e=>e.scrollTop;function cg(e,t){const{timeout:r,easing:n,style:i={}}=e;return{duration:i.transitionDuration??(typeof r=="number"?r:r[t.mode]||0),easing:i.transitionTimingFunction??(typeof n=="object"?n[t.mode]:n),delay:i.transitionDelay}}function Lee(e){return Vn("MuiPaper",e)}Bn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Dee=e=>{const{square:t,elevation:r,variant:n,classes:i}=e,o={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return Gn(o,Lee,i)},Nee=nr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(xi(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Lc=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiPaper"}),i=wf(),{className:o,component:u="div",elevation:a=1,square:p=!1,variant:h="elevation",...m}=n,v={...n,component:u,elevation:a,square:p,variant:h},w=Dee(v);return ze.jsx(Nee,{as:u,ownerState:v,className:Hr(w.root,o),ref:r,...m,style:{...h==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${H_("#fff",kP(a))}, ${H_("#fff",kP(a))})`}},...m.style}})});function fg(e){return typeof e=="string"}function S9(e,t,r){return e===void 0||fg(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function E9(e,t,r){return typeof e=="function"?e(t,r):e}function K_(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function EL(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function C9(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:o}=e;if(!t){const x=Hr(r?.className,o,i?.className,n?.className),P={...r?.style,...i?.style,...n?.style},T={...r,...i,...n};return x.length>0&&(T.className=x),Object.keys(P).length>0&&(T.style=P),{props:T,internalRef:void 0}}const u=K_({...i,...n}),a=EL(n),p=EL(i),h=t(u),m=Hr(h?.className,r?.className,o,i?.className,n?.className),v={...h?.style,...r?.style,...i?.style,...n?.style},w={...h,...r,...p,...a};return m.length>0&&(w.className=m),Object.keys(v).length>0&&(w.style=v),{props:w,internalRef:h.ref}}function Kn(e,t){const{className:r,elementType:n,ownerState:i,externalForwardedProps:o,internalForwardedProps:u,shouldForwardComponentProp:a=!1,...p}=t,{component:h,slots:m={[e]:void 0},slotProps:v={[e]:void 0},...w}=o,x=m[e]||n,P=E9(v[e],i),{props:{component:T,...R},internalRef:k}=C9({className:r,...p,externalForwardedProps:e==="root"?w:void 0,externalSlotProps:P}),N=So(k,P?.ref,t.ref),F=e==="root"?T||h:T,D=S9(x,{...e==="root"&&!h&&!m[e]&&u,...e!=="root"&&!m[e]&&u,...R,...F&&!a&&{as:F},...F&&a&&{component:F},ref:N},i);return[x,D]}function X_(e){try{return e.matches(":focus-visible")}catch{}return!1}class Y_{static create(){return new Y_}static use(){const t=w9(Y_.create).current,[r,n]=I.useState(!1);return t.shouldMount=r,t.setShouldMount=n,I.useEffect(t.mountEffect,[r]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Bee(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function Fee(){return Y_.use()}function Bee(){let e,t;const r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r}function jee(e){const{className:t,classes:r,pulsate:n=!1,rippleX:i,rippleY:o,rippleSize:u,in:a,onExited:p,timeout:h}=e,[m,v]=I.useState(!1),w=Hr(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),x={width:u,height:u,top:-(u/2)+o,left:-(u/2)+i},P=Hr(r.child,m&&r.childLeaving,n&&r.childPulsate);return!a&&!m&&v(!0),I.useEffect(()=>{if(!a&&p!=null){const T=setTimeout(p,h);return()=>{clearTimeout(T)}}},[p,a,h]),ze.jsx("span",{className:w,style:x,children:ze.jsx("span",{className:P})})}const Uu=Bn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),FP=550,zee=80,$ee=S0`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,qee=S0`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Uee=S0`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Vee=nr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Gee=nr(jee,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Uu.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${$ee};
    animation-duration: ${FP}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Uu.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Uu.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Uu.childLeaving} {
    opacity: 0;
    animation-name: ${qee};
    animation-duration: ${FP}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Uu.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Uee};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Hee=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:u,...a}=n,[p,h]=I.useState([]),m=I.useRef(0),v=I.useRef(null);I.useEffect(()=>{v.current&&(v.current(),v.current=null)},[p]);const w=I.useRef(!1),x=Qd(),P=I.useRef(null),T=I.useRef(null),R=I.useCallback(D=>{const{pulsate:U,rippleX:B,rippleY:Z,rippleSize:J,cb:X}=D;h(le=>[...le,ze.jsx(Gee,{classes:{ripple:Hr(o.ripple,Uu.ripple),rippleVisible:Hr(o.rippleVisible,Uu.rippleVisible),ripplePulsate:Hr(o.ripplePulsate,Uu.ripplePulsate),child:Hr(o.child,Uu.child),childLeaving:Hr(o.childLeaving,Uu.childLeaving),childPulsate:Hr(o.childPulsate,Uu.childPulsate)},timeout:FP,pulsate:U,rippleX:B,rippleY:Z,rippleSize:J},m.current)]),m.current+=1,v.current=X},[o]),k=I.useCallback((D={},U={},B=()=>{})=>{const{pulsate:Z=!1,center:J=i||U.pulsate,fakeElement:X=!1}=U;if(D?.type==="mousedown"&&w.current){w.current=!1;return}D?.type==="touchstart"&&(w.current=!0);const le=X?null:T.current,H=le?le.getBoundingClientRect():{width:0,height:0,left:0,top:0};let G,ae,se;if(J||D===void 0||D.clientX===0&&D.clientY===0||!D.clientX&&!D.touches)G=Math.round(H.width/2),ae=Math.round(H.height/2);else{const{clientX:ue,clientY:me}=D.touches&&D.touches.length>0?D.touches[0]:D;G=Math.round(ue-H.left),ae=Math.round(me-H.top)}if(J)se=Math.sqrt((2*H.width**2+H.height**2)/3),se%2===0&&(se+=1);else{const ue=Math.max(Math.abs((le?le.clientWidth:0)-G),G)*2+2,me=Math.max(Math.abs((le?le.clientHeight:0)-ae),ae)*2+2;se=Math.sqrt(ue**2+me**2)}D?.touches?P.current===null&&(P.current=()=>{R({pulsate:Z,rippleX:G,rippleY:ae,rippleSize:se,cb:B})},x.start(zee,()=>{P.current&&(P.current(),P.current=null)})):R({pulsate:Z,rippleX:G,rippleY:ae,rippleSize:se,cb:B})},[i,R,x]),N=I.useCallback(()=>{k({},{pulsate:!0})},[k]),F=I.useCallback((D,U)=>{if(x.clear(),D?.type==="touchend"&&P.current){P.current(),P.current=null,x.start(0,()=>{F(D,U)});return}P.current=null,h(B=>B.length>0?B.slice(1):B),v.current=U},[x]);return I.useImperativeHandle(r,()=>({pulsate:N,start:k,stop:F}),[N,k,F]),ze.jsx(Vee,{className:Hr(Uu.root,o.root,u),ref:T,...a,children:ze.jsx(uI,{component:null,exit:!0,children:p})})});function Wee(e){return Vn("MuiButtonBase",e)}const Zee=Bn("MuiButtonBase",["root","disabled","focusVisible"]),Kee=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:i}=e,u=Gn({root:["root",t&&"disabled",r&&"focusVisible"]},Wee,i);return r&&n&&(u.root+=` ${n}`),u},Xee=nr("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Zee.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),kx=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:u,className:a,component:p="button",disabled:h=!1,disableRipple:m=!1,disableTouchRipple:v=!1,focusRipple:w=!1,focusVisibleClassName:x,LinkComponent:P="a",onBlur:T,onClick:R,onContextMenu:k,onDragLeave:N,onFocus:F,onFocusVisible:D,onKeyDown:U,onKeyUp:B,onMouseDown:Z,onMouseLeave:J,onMouseUp:X,onTouchEnd:le,onTouchMove:H,onTouchStart:G,tabIndex:ae=0,TouchRippleProps:se,touchRippleRef:ue,type:me,...Ce}=n,pe=I.useRef(null),Ee=Fee(),Fe=So(Ee.ref,ue),[Ke,fe]=I.useState(!1);h&&Ke&&fe(!1),I.useImperativeHandle(i,()=>({focusVisible:()=>{fe(!0),pe.current.focus()}}),[]);const _e=Ee.shouldMount&&!m&&!h;I.useEffect(()=>{Ke&&w&&!m&&Ee.pulsate()},[m,w,Ke,Ee]);const Pe=Gf(Ee,"start",Z,v),ke=Gf(Ee,"stop",k,v),$e=Gf(Ee,"stop",N,v),ht=Gf(Ee,"stop",X,v),Ot=Gf(Ee,"stop",ct=>{Ke&&ct.preventDefault(),J&&J(ct)},v),mt=Gf(Ee,"start",G,v),nt=Gf(Ee,"stop",le,v),Nt=Gf(Ee,"stop",H,v),kt=Gf(Ee,"stop",ct=>{X_(ct.target)||fe(!1),T&&T(ct)},!1),It=Zu(ct=>{pe.current||(pe.current=ct.currentTarget),X_(ct.target)&&(fe(!0),D&&D(ct)),F&&F(ct)}),gt=()=>{const ct=pe.current;return p&&p!=="button"&&!(ct.tagName==="A"&&ct.href)},Le=Zu(ct=>{w&&!ct.repeat&&Ke&&ct.key===" "&&Ee.stop(ct,()=>{Ee.start(ct)}),ct.target===ct.currentTarget&&gt()&&ct.key===" "&&ct.preventDefault(),U&&U(ct),ct.target===ct.currentTarget&&gt()&&ct.key==="Enter"&&!h&&(ct.preventDefault(),R&&R(ct))}),pr=Zu(ct=>{w&&ct.key===" "&&Ke&&!ct.defaultPrevented&&Ee.stop(ct,()=>{Ee.pulsate(ct)}),B&&B(ct),R&&ct.target===ct.currentTarget&&gt()&&ct.key===" "&&!ct.defaultPrevented&&R(ct)});let hr=p;hr==="button"&&(Ce.href||Ce.to)&&(hr=P);const vr={};hr==="button"?(vr.type=me===void 0?"button":me,vr.disabled=h):(!Ce.href&&!Ce.to&&(vr.role="button"),h&&(vr["aria-disabled"]=h));const Qt=So(r,pe),qe={...n,centerRipple:o,component:p,disabled:h,disableRipple:m,disableTouchRipple:v,focusRipple:w,tabIndex:ae,focusVisible:Ke},rt=Kee(qe);return ze.jsxs(Xee,{as:hr,className:Hr(rt.root,a),ownerState:qe,onBlur:kt,onClick:R,onContextMenu:ke,onFocus:It,onKeyDown:Le,onKeyUp:pr,onMouseDown:Pe,onMouseLeave:Ot,onMouseUp:ht,onDragLeave:$e,onTouchEnd:nt,onTouchMove:Nt,onTouchStart:mt,ref:Qt,tabIndex:h?-1:ae,type:me,...vr,...Ce,children:[u,_e?ze.jsx(Hee,{ref:Fe,center:o,...se}):null]})});function Gf(e,t,r,n=!1){return Zu(i=>(r&&r(i),n||e[t](i),!0))}function Yee(e){return typeof e.main=="string"}function Jee(e,t=[]){if(!Yee(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function kl(e=[]){return([,t])=>t&&Jee(t,e)}function Qee(e){return Vn("MuiAlert",e)}const CL=Bn("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function ete(e){return Vn("MuiCircularProgress",e)}Bn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Oh=44,BP=S0`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,jP=S0`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,tte=typeof BP!="string"?W3`
        animation: ${BP} 1.4s linear infinite;
      `:null,rte=typeof jP!="string"?W3`
        animation: ${jP} 1.4s ease-in-out infinite;
      `:null,nte=e=>{const{classes:t,variant:r,color:n,disableShrink:i}=e,o={root:["root",r,`color${an(n)}`],svg:["svg"],circle:["circle",`circle${an(r)}`,i&&"circleDisableShrink"]};return Gn(o,ete,t)},ite=nr("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${an(r.color)}`]]}})(xi(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:tte||{animation:`${BP} 1.4s linear infinite`}},...Object.entries(e.palette).filter(kl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),ate=nr("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),ote=nr("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${an(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(xi(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:rte||{animation:`${jP} 1.4s ease-in-out infinite`}}]}))),xg=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:u=!1,size:a=40,style:p,thickness:h=3.6,value:m=0,variant:v="indeterminate",...w}=n,x={...n,color:o,disableShrink:u,size:a,thickness:h,value:m,variant:v},P=nte(x),T={},R={},k={};if(v==="determinate"){const N=2*Math.PI*((Oh-h)/2);T.strokeDasharray=N.toFixed(3),k["aria-valuenow"]=Math.round(m),T.strokeDashoffset=`${((100-m)/100*N).toFixed(3)}px`,R.transform="rotate(-90deg)"}return ze.jsx(ite,{className:Hr(P.root,i),style:{width:a,height:a,...R,...p},ownerState:x,ref:r,role:"progressbar",...k,...w,children:ze.jsx(ate,{className:P.svg,ownerState:x,viewBox:`${Oh/2} ${Oh/2} ${Oh} ${Oh}`,children:ze.jsx(ote,{className:P.circle,style:T,ownerState:x,cx:Oh,cy:Oh,r:(Oh-h)/2,fill:"none",strokeWidth:h})})})});function ste(e){return Vn("MuiIconButton",e)}const AL=Bn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),lte=e=>{const{classes:t,disabled:r,color:n,edge:i,size:o,loading:u}=e,a={root:["root",u&&"loading",r&&"disabled",n!=="default"&&`color${an(n)}`,i&&`edge${an(i)}`,`size${an(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Gn(a,ste,t)},ute=nr(kx,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.loading&&t.loading,r.color!=="default"&&t[`color${an(r.color)}`],r.edge&&t[`edge${an(r.edge)}`],t[`size${an(r.size)}`]]}})(xi(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),xi(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(kl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(kl()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${AL.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${AL.loading}`]:{color:"transparent"}}))),cte=nr("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Bo=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiIconButton"}),{edge:i=!1,children:o,className:u,color:a="default",disabled:p=!1,disableFocusRipple:h=!1,size:m="medium",id:v,loading:w=null,loadingIndicator:x,...P}=n,T=xp(v),R=x??ze.jsx(xg,{"aria-labelledby":T,color:"inherit",size:16}),k={...n,edge:i,color:a,disabled:p,disableFocusRipple:h,loading:w,loadingIndicator:R,size:m},N=lte(k);return ze.jsxs(ute,{id:w?T:v,className:Hr(N.root,u),centerRipple:!0,focusRipple:!h,disabled:p||w,ref:r,...P,ownerState:k,children:[typeof w=="boolean"&&ze.jsx("span",{className:N.loadingWrapper,style:{display:"contents"},children:ze.jsx(cte,{className:N.loadingIndicator,ownerState:k,children:w&&R})}),o]})}),fte=Ci(ze.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),hte=Ci(ze.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),dte=Ci(ze.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),pte=Ci(ze.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),mte=Ci(ze.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),gte=e=>{const{variant:t,color:r,severity:n,classes:i}=e,o={root:["root",`color${an(r||n)}`,`${t}${an(r||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return Gn(o,Qee,i)},yte=nr(Lc,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${an(r.color||r.severity)}`]]}})(xi(({theme:e})=>{const t=e.palette.mode==="light"?e.darken:e.lighten,r=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(kl(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${n}StandardBg`]:r(e.palette[n].light,.9),[`& .${CL.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(kl(["light"])).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),border:`1px solid ${(e.vars||e).palette[n].light}`,[`& .${CL.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(kl(["dark"])).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${n}FilledColor`],backgroundColor:e.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[n].dark:e.palette[n].main,color:e.palette.getContrastText(e.palette[n].main)}}}))]}})),vte=nr("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),bte=nr("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),_te=nr("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),PL={success:ze.jsx(fte,{fontSize:"inherit"}),warning:ze.jsx(hte,{fontSize:"inherit"}),error:ze.jsx(dte,{fontSize:"inherit"}),info:ze.jsx(pte,{fontSize:"inherit"})},xte=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiAlert"}),{action:i,children:o,className:u,closeText:a="Close",color:p,components:h={},componentsProps:m={},icon:v,iconMapping:w=PL,onClose:x,role:P="alert",severity:T="success",slotProps:R={},slots:k={},variant:N="standard",...F}=n,D={...n,color:p,severity:T,variant:N,colorSeverity:p||T},U=gte(D),B={slots:{closeButton:h.CloseButton,closeIcon:h.CloseIcon,...k},slotProps:{...m,...R}},[Z,J]=Kn("root",{ref:r,shouldForwardComponentProp:!0,className:Hr(U.root,u),elementType:yte,externalForwardedProps:{...B,...F},ownerState:D,additionalProps:{role:P,elevation:0}}),[X,le]=Kn("icon",{className:U.icon,elementType:vte,externalForwardedProps:B,ownerState:D}),[H,G]=Kn("message",{className:U.message,elementType:bte,externalForwardedProps:B,ownerState:D}),[ae,se]=Kn("action",{className:U.action,elementType:_te,externalForwardedProps:B,ownerState:D}),[ue,me]=Kn("closeButton",{elementType:Bo,externalForwardedProps:B,ownerState:D}),[Ce,pe]=Kn("closeIcon",{elementType:mte,externalForwardedProps:B,ownerState:D});return ze.jsxs(Z,{...J,children:[v!==!1?ze.jsx(X,{...le,children:v||w[T]||PL[T]}):null,ze.jsx(H,{...G,children:o}),i!=null?ze.jsx(ae,{...se,children:i}):null,i==null&&x?ze.jsx(ae,{...se,children:ze.jsx(ue,{size:"small","aria-label":a,title:a,color:"inherit",onClick:x,...me,children:ze.jsx(Ce,{fontSize:"small",...pe})})}):null]})});function wte(e){return Vn("MuiTypography",e)}const TL=Bn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Ste={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Ete=_ee(),Cte=e=>{const{align:t,gutterBottom:r,noWrap:n,paragraph:i,variant:o,classes:u}=e,a={root:["root",o,e.align!=="inherit"&&`align${an(t)}`,r&&"gutterBottom",n&&"noWrap",i&&"paragraph"]};return Gn(a,wte,u)},Ate=nr("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${an(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(xi(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(e.palette).filter(kl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${an(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),IL={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},No=I.forwardRef(function(t,r){const{color:n,...i}=Xn({props:t,name:"MuiTypography"}),o=!Ste[n],u=Ete({...i,...o&&{color:n}}),{align:a="inherit",className:p,component:h,gutterBottom:m=!1,noWrap:v=!1,paragraph:w=!1,variant:x="body1",variantMapping:P=IL,...T}=u,R={...u,align:a,color:n,className:p,component:h,gutterBottom:m,noWrap:v,paragraph:w,variant:x,variantMapping:P},k=h||(w?"p":P[x]||IL[x])||"span",N=Cte(R);return ze.jsx(Ate,{as:k,ref:r,className:Hr(N.root,p),...T,ownerState:R,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...T.style}})});function Pte(e){return Vn("MuiAppBar",e)}Bn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Tte=e=>{const{color:t,position:r,classes:n}=e,i={root:["root",`color${an(t)}`,`position${an(r)}`]};return Gn(i,Pte,n)},ML=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,Ite=nr(Lc,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${an(r.position)}`],t[`color${an(r.color)}`]]}})(xi(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(kl(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?ML(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?ML(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),Mte=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:u=!1,position:a="fixed",...p}=n,h={...n,color:o,position:a,enableColorOnDark:u},m=Tte(h);return ze.jsx(Ite,{square:!0,component:"header",ownerState:h,elevation:4,className:Hr(m.root,i,a==="fixed"&&"mui-fixed"),ref:r,...p})});var Ql="top",Xu="bottom",Yu="right",eu="left",fI="auto",T0=[Ql,Xu,Yu,eu],hg="start",Qv="end",Rte="clippingParents",A9="viewport",Ay="popper",Ote="reference",RL=T0.reduce(function(e,t){return e.concat([t+"-"+hg,t+"-"+Qv])},[]),P9=[].concat(T0,[fI]).reduce(function(e,t){return e.concat([t,t+"-"+hg,t+"-"+Qv])},[]),kte="beforeRead",Lte="read",Dte="afterRead",Nte="beforeMain",Fte="main",Bte="afterMain",jte="beforeWrite",zte="write",$te="afterWrite",qte=[kte,Lte,Dte,Nte,Fte,Bte,jte,zte,$te];function xf(e){return e?(e.nodeName||"").toLowerCase():null}function Ou(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function cp(e){var t=Ou(e).Element;return e instanceof t||e instanceof Element}function Ku(e){var t=Ou(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function hI(e){if(typeof ShadowRoot>"u")return!1;var t=Ou(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Ute(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},o=t.elements[r];!Ku(o)||!xf(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(u){var a=i[u];a===!1?o.removeAttribute(u):o.setAttribute(u,a===!0?"":a)}))})}function Vte(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],o=t.attributes[n]||{},u=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=u.reduce(function(p,h){return p[h]="",p},{});!Ku(i)||!xf(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(p){i.removeAttribute(p)}))})}}const Gte={name:"applyStyles",enabled:!0,phase:"write",fn:Ute,effect:Vte,requires:["computeStyles"]};function yf(e){return e.split("-")[0]}var ip=Math.max,J_=Math.min,dg=Math.round;function zP(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function T9(){return!/^((?!chrome|android).)*safari/i.test(zP())}function pg(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,o=1;t&&Ku(e)&&(i=e.offsetWidth>0&&dg(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&dg(n.height)/e.offsetHeight||1);var u=cp(e)?Ou(e):window,a=u.visualViewport,p=!T9()&&r,h=(n.left+(p&&a?a.offsetLeft:0))/i,m=(n.top+(p&&a?a.offsetTop:0))/o,v=n.width/i,w=n.height/o;return{width:v,height:w,top:m,right:h+v,bottom:m+w,left:h,x:h,y:m}}function dI(e){var t=pg(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function I9(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&hI(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function fh(e){return Ou(e).getComputedStyle(e)}function Hte(e){return["table","td","th"].indexOf(xf(e))>=0}function nd(e){return((cp(e)?e.ownerDocument:e.document)||window.document).documentElement}function Lx(e){return xf(e)==="html"?e:e.assignedSlot||e.parentNode||(hI(e)?e.host:null)||nd(e)}function OL(e){return!Ku(e)||fh(e).position==="fixed"?null:e.offsetParent}function Wte(e){var t=/firefox/i.test(zP()),r=/Trident/i.test(zP());if(r&&Ku(e)){var n=fh(e);if(n.position==="fixed")return null}var i=Lx(e);for(hI(i)&&(i=i.host);Ku(i)&&["html","body"].indexOf(xf(i))<0;){var o=fh(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function I0(e){for(var t=Ou(e),r=OL(e);r&&Hte(r)&&fh(r).position==="static";)r=OL(r);return r&&(xf(r)==="html"||xf(r)==="body"&&fh(r).position==="static")?t:r||Wte(e)||t}function pI(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function vv(e,t,r){return ip(e,J_(t,r))}function Zte(e,t,r){var n=vv(e,t,r);return n>r?r:n}function M9(){return{top:0,right:0,bottom:0,left:0}}function R9(e){return Object.assign({},M9(),e)}function O9(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Kte=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,R9(typeof t!="number"?t:O9(t,T0))};function Xte(e){var t,r=e.state,n=e.name,i=e.options,o=r.elements.arrow,u=r.modifiersData.popperOffsets,a=yf(r.placement),p=pI(a),h=[eu,Yu].indexOf(a)>=0,m=h?"height":"width";if(!(!o||!u)){var v=Kte(i.padding,r),w=dI(o),x=p==="y"?Ql:eu,P=p==="y"?Xu:Yu,T=r.rects.reference[m]+r.rects.reference[p]-u[p]-r.rects.popper[m],R=u[p]-r.rects.reference[p],k=I0(o),N=k?p==="y"?k.clientHeight||0:k.clientWidth||0:0,F=T/2-R/2,D=v[x],U=N-w[m]-v[P],B=N/2-w[m]/2+F,Z=vv(D,B,U),J=p;r.modifiersData[n]=(t={},t[J]=Z,t.centerOffset=Z-B,t)}}function Yte(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||I9(t.elements.popper,i)&&(t.elements.arrow=i))}const Jte={name:"arrow",enabled:!0,phase:"main",fn:Xte,effect:Yte,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function mg(e){return e.split("-")[1]}var Qte={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ere(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:dg(r*i)/i||0,y:dg(n*i)/i||0}}function kL(e){var t,r=e.popper,n=e.popperRect,i=e.placement,o=e.variation,u=e.offsets,a=e.position,p=e.gpuAcceleration,h=e.adaptive,m=e.roundOffsets,v=e.isFixed,w=u.x,x=w===void 0?0:w,P=u.y,T=P===void 0?0:P,R=typeof m=="function"?m({x,y:T}):{x,y:T};x=R.x,T=R.y;var k=u.hasOwnProperty("x"),N=u.hasOwnProperty("y"),F=eu,D=Ql,U=window;if(h){var B=I0(r),Z="clientHeight",J="clientWidth";if(B===Ou(r)&&(B=nd(r),fh(B).position!=="static"&&a==="absolute"&&(Z="scrollHeight",J="scrollWidth")),B=B,i===Ql||(i===eu||i===Yu)&&o===Qv){D=Xu;var X=v&&B===U&&U.visualViewport?U.visualViewport.height:B[Z];T-=X-n.height,T*=p?1:-1}if(i===eu||(i===Ql||i===Xu)&&o===Qv){F=Yu;var le=v&&B===U&&U.visualViewport?U.visualViewport.width:B[J];x-=le-n.width,x*=p?1:-1}}var H=Object.assign({position:a},h&&Qte),G=m===!0?ere({x,y:T},Ou(r)):{x,y:T};if(x=G.x,T=G.y,p){var ae;return Object.assign({},H,(ae={},ae[D]=N?"0":"",ae[F]=k?"0":"",ae.transform=(U.devicePixelRatio||1)<=1?"translate("+x+"px, "+T+"px)":"translate3d("+x+"px, "+T+"px, 0)",ae))}return Object.assign({},H,(t={},t[D]=N?T+"px":"",t[F]=k?x+"px":"",t.transform="",t))}function tre(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,u=o===void 0?!0:o,a=r.roundOffsets,p=a===void 0?!0:a,h={placement:yf(t.placement),variation:mg(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,kL(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:u,roundOffsets:p})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,kL(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const rre={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:tre,data:{}};var Ab={passive:!0};function nre(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,o=i===void 0?!0:i,u=n.resize,a=u===void 0?!0:u,p=Ou(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&h.forEach(function(m){m.addEventListener("scroll",r.update,Ab)}),a&&p.addEventListener("resize",r.update,Ab),function(){o&&h.forEach(function(m){m.removeEventListener("scroll",r.update,Ab)}),a&&p.removeEventListener("resize",r.update,Ab)}}const ire={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nre,data:{}};var are={left:"right",right:"left",bottom:"top",top:"bottom"};function b_(e){return e.replace(/left|right|bottom|top/g,function(t){return are[t]})}var ore={start:"end",end:"start"};function LL(e){return e.replace(/start|end/g,function(t){return ore[t]})}function mI(e){var t=Ou(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function gI(e){return pg(nd(e)).left+mI(e).scrollLeft}function sre(e,t){var r=Ou(e),n=nd(e),i=r.visualViewport,o=n.clientWidth,u=n.clientHeight,a=0,p=0;if(i){o=i.width,u=i.height;var h=T9();(h||!h&&t==="fixed")&&(a=i.offsetLeft,p=i.offsetTop)}return{width:o,height:u,x:a+gI(e),y:p}}function lre(e){var t,r=nd(e),n=mI(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=ip(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),u=ip(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+gI(e),p=-n.scrollTop;return fh(i||r).direction==="rtl"&&(a+=ip(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:u,x:a,y:p}}function yI(e){var t=fh(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function k9(e){return["html","body","#document"].indexOf(xf(e))>=0?e.ownerDocument.body:Ku(e)&&yI(e)?e:k9(Lx(e))}function bv(e,t){var r;t===void 0&&(t=[]);var n=k9(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),o=Ou(n),u=i?[o].concat(o.visualViewport||[],yI(n)?n:[]):n,a=t.concat(u);return i?a:a.concat(bv(Lx(u)))}function $P(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ure(e,t){var r=pg(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function DL(e,t,r){return t===A9?$P(sre(e,r)):cp(t)?ure(t,r):$P(lre(nd(e)))}function cre(e){var t=bv(Lx(e)),r=["absolute","fixed"].indexOf(fh(e).position)>=0,n=r&&Ku(e)?I0(e):e;return cp(n)?t.filter(function(i){return cp(i)&&I9(i,n)&&xf(i)!=="body"}):[]}function fre(e,t,r,n){var i=t==="clippingParents"?cre(e):[].concat(t),o=[].concat(i,[r]),u=o[0],a=o.reduce(function(p,h){var m=DL(e,h,n);return p.top=ip(m.top,p.top),p.right=J_(m.right,p.right),p.bottom=J_(m.bottom,p.bottom),p.left=ip(m.left,p.left),p},DL(e,u,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function L9(e){var t=e.reference,r=e.element,n=e.placement,i=n?yf(n):null,o=n?mg(n):null,u=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,p;switch(i){case Ql:p={x:u,y:t.y-r.height};break;case Xu:p={x:u,y:t.y+t.height};break;case Yu:p={x:t.x+t.width,y:a};break;case eu:p={x:t.x-r.width,y:a};break;default:p={x:t.x,y:t.y}}var h=i?pI(i):null;if(h!=null){var m=h==="y"?"height":"width";switch(o){case hg:p[h]=p[h]-(t[m]/2-r[m]/2);break;case Qv:p[h]=p[h]+(t[m]/2-r[m]/2);break}}return p}function e0(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,o=r.strategy,u=o===void 0?e.strategy:o,a=r.boundary,p=a===void 0?Rte:a,h=r.rootBoundary,m=h===void 0?A9:h,v=r.elementContext,w=v===void 0?Ay:v,x=r.altBoundary,P=x===void 0?!1:x,T=r.padding,R=T===void 0?0:T,k=R9(typeof R!="number"?R:O9(R,T0)),N=w===Ay?Ote:Ay,F=e.rects.popper,D=e.elements[P?N:w],U=fre(cp(D)?D:D.contextElement||nd(e.elements.popper),p,m,u),B=pg(e.elements.reference),Z=L9({reference:B,element:F,placement:i}),J=$P(Object.assign({},F,Z)),X=w===Ay?J:B,le={top:U.top-X.top+k.top,bottom:X.bottom-U.bottom+k.bottom,left:U.left-X.left+k.left,right:X.right-U.right+k.right},H=e.modifiersData.offset;if(w===Ay&&H){var G=H[i];Object.keys(le).forEach(function(ae){var se=[Yu,Xu].indexOf(ae)>=0?1:-1,ue=[Ql,Xu].indexOf(ae)>=0?"y":"x";le[ae]+=G[ue]*se})}return le}function hre(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,o=r.rootBoundary,u=r.padding,a=r.flipVariations,p=r.allowedAutoPlacements,h=p===void 0?P9:p,m=mg(n),v=m?a?RL:RL.filter(function(P){return mg(P)===m}):T0,w=v.filter(function(P){return h.indexOf(P)>=0});w.length===0&&(w=v);var x=w.reduce(function(P,T){return P[T]=e0(e,{placement:T,boundary:i,rootBoundary:o,padding:u})[yf(T)],P},{});return Object.keys(x).sort(function(P,T){return x[P]-x[T]})}function dre(e){if(yf(e)===fI)return[];var t=b_(e);return[LL(e),t,LL(t)]}function pre(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,u=r.altAxis,a=u===void 0?!0:u,p=r.fallbackPlacements,h=r.padding,m=r.boundary,v=r.rootBoundary,w=r.altBoundary,x=r.flipVariations,P=x===void 0?!0:x,T=r.allowedAutoPlacements,R=t.options.placement,k=yf(R),N=k===R,F=p||(N||!P?[b_(R)]:dre(R)),D=[R].concat(F).reduce(function(Pe,ke){return Pe.concat(yf(ke)===fI?hre(t,{placement:ke,boundary:m,rootBoundary:v,padding:h,flipVariations:P,allowedAutoPlacements:T}):ke)},[]),U=t.rects.reference,B=t.rects.popper,Z=new Map,J=!0,X=D[0],le=0;le<D.length;le++){var H=D[le],G=yf(H),ae=mg(H)===hg,se=[Ql,Xu].indexOf(G)>=0,ue=se?"width":"height",me=e0(t,{placement:H,boundary:m,rootBoundary:v,altBoundary:w,padding:h}),Ce=se?ae?Yu:eu:ae?Xu:Ql;U[ue]>B[ue]&&(Ce=b_(Ce));var pe=b_(Ce),Ee=[];if(o&&Ee.push(me[G]<=0),a&&Ee.push(me[Ce]<=0,me[pe]<=0),Ee.every(function(Pe){return Pe})){X=H,J=!1;break}Z.set(H,Ee)}if(J)for(var Fe=P?3:1,Ke=function(ke){var $e=D.find(function(ht){var Ot=Z.get(ht);if(Ot)return Ot.slice(0,ke).every(function(mt){return mt})});if($e)return X=$e,"break"},fe=Fe;fe>0;fe--){var _e=Ke(fe);if(_e==="break")break}t.placement!==X&&(t.modifiersData[n]._skip=!0,t.placement=X,t.reset=!0)}}const mre={name:"flip",enabled:!0,phase:"main",fn:pre,requiresIfExists:["offset"],data:{_skip:!1}};function NL(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function FL(e){return[Ql,Yu,Xu,eu].some(function(t){return e[t]>=0})}function gre(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,u=e0(t,{elementContext:"reference"}),a=e0(t,{altBoundary:!0}),p=NL(u,n),h=NL(a,i,o),m=FL(p),v=FL(h);t.modifiersData[r]={referenceClippingOffsets:p,popperEscapeOffsets:h,isReferenceHidden:m,hasPopperEscaped:v},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":v})}const yre={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:gre};function vre(e,t,r){var n=yf(e),i=[eu,Ql].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,u=o[0],a=o[1];return u=u||0,a=(a||0)*i,[eu,Yu].indexOf(n)>=0?{x:a,y:u}:{x:u,y:a}}function bre(e){var t=e.state,r=e.options,n=e.name,i=r.offset,o=i===void 0?[0,0]:i,u=P9.reduce(function(m,v){return m[v]=vre(v,t.rects,o),m},{}),a=u[t.placement],p=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=p,t.modifiersData.popperOffsets.y+=h),t.modifiersData[n]=u}const _re={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:bre};function xre(e){var t=e.state,r=e.name;t.modifiersData[r]=L9({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const wre={name:"popperOffsets",enabled:!0,phase:"read",fn:xre,data:{}};function Sre(e){return e==="x"?"y":"x"}function Ere(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,o=i===void 0?!0:i,u=r.altAxis,a=u===void 0?!1:u,p=r.boundary,h=r.rootBoundary,m=r.altBoundary,v=r.padding,w=r.tether,x=w===void 0?!0:w,P=r.tetherOffset,T=P===void 0?0:P,R=e0(t,{boundary:p,rootBoundary:h,padding:v,altBoundary:m}),k=yf(t.placement),N=mg(t.placement),F=!N,D=pI(k),U=Sre(D),B=t.modifiersData.popperOffsets,Z=t.rects.reference,J=t.rects.popper,X=typeof T=="function"?T(Object.assign({},t.rects,{placement:t.placement})):T,le=typeof X=="number"?{mainAxis:X,altAxis:X}:Object.assign({mainAxis:0,altAxis:0},X),H=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,G={x:0,y:0};if(B){if(o){var ae,se=D==="y"?Ql:eu,ue=D==="y"?Xu:Yu,me=D==="y"?"height":"width",Ce=B[D],pe=Ce+R[se],Ee=Ce-R[ue],Fe=x?-J[me]/2:0,Ke=N===hg?Z[me]:J[me],fe=N===hg?-J[me]:-Z[me],_e=t.elements.arrow,Pe=x&&_e?dI(_e):{width:0,height:0},ke=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:M9(),$e=ke[se],ht=ke[ue],Ot=vv(0,Z[me],Pe[me]),mt=F?Z[me]/2-Fe-Ot-$e-le.mainAxis:Ke-Ot-$e-le.mainAxis,nt=F?-Z[me]/2+Fe+Ot+ht+le.mainAxis:fe+Ot+ht+le.mainAxis,Nt=t.elements.arrow&&I0(t.elements.arrow),kt=Nt?D==="y"?Nt.clientTop||0:Nt.clientLeft||0:0,It=(ae=H?.[D])!=null?ae:0,gt=Ce+mt-It-kt,Le=Ce+nt-It,pr=vv(x?J_(pe,gt):pe,Ce,x?ip(Ee,Le):Ee);B[D]=pr,G[D]=pr-Ce}if(a){var hr,vr=D==="x"?Ql:eu,Qt=D==="x"?Xu:Yu,qe=B[U],rt=U==="y"?"height":"width",ct=qe+R[vr],Ft=qe-R[Qt],Yt=[Ql,eu].indexOf(k)!==-1,Wt=(hr=H?.[U])!=null?hr:0,ur=Yt?ct:qe-Z[rt]-J[rt]-Wt+le.altAxis,br=Yt?qe+Z[rt]+J[rt]-Wt-le.altAxis:Ft,xr=x&&Yt?Zte(ur,qe,br):vv(x?ur:ct,qe,x?br:Ft);B[U]=xr,G[U]=xr-qe}t.modifiersData[n]=G}}const Cre={name:"preventOverflow",enabled:!0,phase:"main",fn:Ere,requiresIfExists:["offset"]};function Are(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Pre(e){return e===Ou(e)||!Ku(e)?mI(e):Are(e)}function Tre(e){var t=e.getBoundingClientRect(),r=dg(t.width)/e.offsetWidth||1,n=dg(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Ire(e,t,r){r===void 0&&(r=!1);var n=Ku(t),i=Ku(t)&&Tre(t),o=nd(t),u=pg(e,i,r),a={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(n||!n&&!r)&&((xf(t)!=="body"||yI(o))&&(a=Pre(t)),Ku(t)?(p=pg(t,!0),p.x+=t.clientLeft,p.y+=t.clientTop):o&&(p.x=gI(o))),{x:u.left+a.scrollLeft-p.x,y:u.top+a.scrollTop-p.y,width:u.width,height:u.height}}function Mre(e){var t=new Map,r=new Set,n=[];e.forEach(function(o){t.set(o.name,o)});function i(o){r.add(o.name);var u=[].concat(o.requires||[],o.requiresIfExists||[]);u.forEach(function(a){if(!r.has(a)){var p=t.get(a);p&&i(p)}}),n.push(o)}return e.forEach(function(o){r.has(o.name)||i(o)}),n}function Rre(e){var t=Mre(e);return qte.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function Ore(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function kre(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var BL={placement:"bottom",modifiers:[],strategy:"absolute"};function jL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Lre(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,o=i===void 0?BL:i;return function(a,p,h){h===void 0&&(h=o);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},BL,o),modifiersData:{},elements:{reference:a,popper:p},attributes:{},styles:{}},v=[],w=!1,x={state:m,setOptions:function(k){var N=typeof k=="function"?k(m.options):k;T(),m.options=Object.assign({},o,m.options,N),m.scrollParents={reference:cp(a)?bv(a):a.contextElement?bv(a.contextElement):[],popper:bv(p)};var F=Rre(kre([].concat(n,m.options.modifiers)));return m.orderedModifiers=F.filter(function(D){return D.enabled}),P(),x.update()},forceUpdate:function(){if(!w){var k=m.elements,N=k.reference,F=k.popper;if(jL(N,F)){m.rects={reference:Ire(N,I0(F),m.options.strategy==="fixed"),popper:dI(F)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(le){return m.modifiersData[le.name]=Object.assign({},le.data)});for(var D=0;D<m.orderedModifiers.length;D++){if(m.reset===!0){m.reset=!1,D=-1;continue}var U=m.orderedModifiers[D],B=U.fn,Z=U.options,J=Z===void 0?{}:Z,X=U.name;typeof B=="function"&&(m=B({state:m,options:J,name:X,instance:x})||m)}}}},update:Ore(function(){return new Promise(function(R){x.forceUpdate(),R(m)})}),destroy:function(){T(),w=!0}};if(!jL(a,p))return x;x.setOptions(h).then(function(R){!w&&h.onFirstUpdate&&h.onFirstUpdate(R)});function P(){m.orderedModifiers.forEach(function(R){var k=R.name,N=R.options,F=N===void 0?{}:N,D=R.effect;if(typeof D=="function"){var U=D({state:m,name:k,instance:x,options:F}),B=function(){};v.push(U||B)}})}function T(){v.forEach(function(R){return R()}),v=[]}return x}}var Dre=[ire,wre,rre,Gte,_re,mre,Cre,Jte,yre],Nre=Lre({defaultModifiers:Dre});function D9(e){const{elementType:t,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:i=!1,...o}=e,u=i?{}:E9(r,n),{props:a,internalRef:p}=C9({...o,externalSlotProps:u}),h=So(p,u?.ref,e.additionalProps?.ref);return S9(t,{...a,ref:h},n)}function id(e){return parseInt(I.version,10)>=19?e?.props?.ref||null:e?.ref||null}function Fre(e){return typeof e=="function"?e():e}const N9=I.forwardRef(function(t,r){const{children:n,container:i,disablePortal:o=!1}=t,[u,a]=I.useState(null),p=So(I.isValidElement(n)?id(n):null,r);if(Ru(()=>{o||a(Fre(i)||document.body)},[i,o]),Ru(()=>{if(u&&!o)return xL(r,u),()=>{xL(r,null)}},[r,u,o]),o){if(I.isValidElement(n)){const h={ref:p};return I.cloneElement(n,h)}return n}return u&&Rx.createPortal(n,u)});function Bre(e){return Vn("MuiPopper",e)}Bn("MuiPopper",["root"]);function jre(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function qP(e){return typeof e=="function"?e():e}function zre(e){return e.nodeType!==void 0}const $re=e=>{const{classes:t}=e;return Gn({root:["root"]},Bre,t)},qre={},Ure=I.forwardRef(function(t,r){const{anchorEl:n,children:i,direction:o,disablePortal:u,modifiers:a,open:p,placement:h,popperOptions:m,popperRef:v,slotProps:w={},slots:x={},TransitionProps:P,ownerState:T,...R}=t,k=I.useRef(null),N=So(k,r),F=I.useRef(null),D=So(F,v),U=I.useRef(D);Ru(()=>{U.current=D},[D]),I.useImperativeHandle(v,()=>F.current,[]);const B=jre(h,o),[Z,J]=I.useState(B),[X,le]=I.useState(qP(n));I.useEffect(()=>{F.current&&F.current.forceUpdate()}),I.useEffect(()=>{n&&le(qP(n))},[n]),Ru(()=>{if(!X||!p)return;const ue=pe=>{J(pe.placement)};let me=[{name:"preventOverflow",options:{altBoundary:u}},{name:"flip",options:{altBoundary:u}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:pe})=>{ue(pe)}}];a!=null&&(me=me.concat(a)),m&&m.modifiers!=null&&(me=me.concat(m.modifiers));const Ce=Nre(X,k.current,{placement:B,...m,modifiers:me});return U.current(Ce),()=>{Ce.destroy(),U.current(null)}},[X,u,a,p,m,B]);const H={placement:Z};P!==null&&(H.TransitionProps=P);const G=$re(t),ae=x.root??"div",se=D9({elementType:ae,externalSlotProps:w.root,externalForwardedProps:R,additionalProps:{role:"tooltip",ref:N},ownerState:t,className:G.root});return ze.jsx(ae,{...se,children:typeof i=="function"?i(H):i})}),Vre=I.forwardRef(function(t,r){const{anchorEl:n,children:i,container:o,direction:u="ltr",disablePortal:a=!1,keepMounted:p=!1,modifiers:h,open:m,placement:v="bottom",popperOptions:w=qre,popperRef:x,style:P,transition:T=!1,slotProps:R={},slots:k={},...N}=t,[F,D]=I.useState(!0),U=()=>{D(!1)},B=()=>{D(!0)};if(!p&&!m&&(!T||F))return null;let Z;if(o)Z=o;else if(n){const le=qP(n);Z=le&&zre(le)?pl(le).body:pl(null).body}const J=!m&&p&&(!T||F)?"none":void 0,X=T?{in:m,onEnter:U,onExited:B}:void 0;return ze.jsx(N9,{disablePortal:a,container:Z,children:ze.jsx(Ure,{anchorEl:n,direction:u,disablePortal:a,modifiers:h,ref:r,open:T?!F:m,placement:v,popperOptions:w,popperRef:x,slotProps:R,slots:k,...N,style:{position:"fixed",top:0,left:0,display:J,...P},TransitionProps:X,children:i})})}),Gre=nr(Vre,{name:"MuiPopper",slot:"Root"})({}),F9=I.forwardRef(function(t,r){const n=Px(),i=Xn({props:t,name:"MuiPopper"}),{anchorEl:o,component:u,components:a,componentsProps:p,container:h,disablePortal:m,keepMounted:v,modifiers:w,open:x,placement:P,popperOptions:T,popperRef:R,transition:k,slots:N,slotProps:F,...D}=i,U=N?.root??a?.Root,B={anchorEl:o,container:h,disablePortal:m,keepMounted:v,modifiers:w,open:x,placement:P,popperOptions:T,popperRef:R,transition:k,...D};return ze.jsx(Gre,{as:u,direction:n?"rtl":"ltr",slots:{root:U},slotProps:F??p,...B,ref:r})});function Pb(e){return parseInt(e,10)||0}const Hre={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Wre(e){for(const t in e)return!1;return!0}function zL(e){return Wre(e)||e.outerHeightStyle===0&&!e.overflowing}const Zre=I.forwardRef(function(t,r){const{onChange:n,maxRows:i,minRows:o=1,style:u,value:a,...p}=t,{current:h}=I.useRef(a!=null),m=I.useRef(null),v=So(r,m),w=I.useRef(null),x=I.useRef(null),P=I.useCallback(()=>{const F=m.current,D=x.current;if(!F||!D)return;const B=Ic(F).getComputedStyle(F);if(B.width==="0px")return{outerHeightStyle:0,overflowing:!1};D.style.width=B.width,D.value=F.value||t.placeholder||"x",D.value.slice(-1)===`
`&&(D.value+=" ");const Z=B.boxSizing,J=Pb(B.paddingBottom)+Pb(B.paddingTop),X=Pb(B.borderBottomWidth)+Pb(B.borderTopWidth),le=D.scrollHeight;D.value="x";const H=D.scrollHeight;let G=le;o&&(G=Math.max(Number(o)*H,G)),i&&(G=Math.min(Number(i)*H,G)),G=Math.max(G,H);const ae=G+(Z==="border-box"?J+X:0),se=Math.abs(G-le)<=1;return{outerHeightStyle:ae,overflowing:se}},[i,o,t.placeholder]),T=Zu(()=>{const F=m.current,D=P();if(!F||!D||zL(D))return!1;const U=D.outerHeightStyle;return w.current!=null&&w.current!==U}),R=I.useCallback(()=>{const F=m.current,D=P();if(!F||!D||zL(D))return;const U=D.outerHeightStyle;w.current!==U&&(w.current=U,F.style.height=`${U}px`),F.style.overflow=D.overflowing?"hidden":""},[P]),k=I.useRef(-1);Ru(()=>{const F=oI(R),D=m?.current;if(!D)return;const U=Ic(D);U.addEventListener("resize",F);let B;return typeof ResizeObserver<"u"&&(B=new ResizeObserver(()=>{T()&&(B.unobserve(D),cancelAnimationFrame(k.current),R(),k.current=requestAnimationFrame(()=>{B.observe(D)}))}),B.observe(D)),()=>{F.clear(),cancelAnimationFrame(k.current),U.removeEventListener("resize",F),B&&B.disconnect()}},[P,R,T]),Ru(()=>{R()});const N=F=>{h||R();const D=F.target,U=D.value.length,B=D.value.endsWith(`
`),Z=D.selectionStart===U;B&&Z&&D.setSelectionRange(U,U),n&&n(F)};return ze.jsxs(I.Fragment,{children:[ze.jsx("textarea",{value:a,onChange:N,ref:v,rows:o,style:u,...p}),ze.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:x,tabIndex:-1,style:{...Hre.shadow,...u,paddingTop:0,paddingBottom:0}})]})});function wg({props:e,states:t,muiFormControl:r}){return t.reduce((n,i)=>(n[i]=e[i],r&&typeof e[i]>"u"&&(n[i]=r[i]),n),{})}const Dx=I.createContext(void 0);function ad(){return I.useContext(Dx)}function $L(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Q_(e,t=!1){return e&&($L(e.value)&&e.value!==""||t&&$L(e.defaultValue)&&e.defaultValue!=="")}function Kre(e){return e.startAdornment}function Xre(e){return Vn("MuiInputBase",e)}const gg=Bn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var qL;const Nx=(e,t)=>{const{ownerState:r}=e;return[t.root,r.formControl&&t.formControl,r.startAdornment&&t.adornedStart,r.endAdornment&&t.adornedEnd,r.error&&t.error,r.size==="small"&&t.sizeSmall,r.multiline&&t.multiline,r.color&&t[`color${an(r.color)}`],r.fullWidth&&t.fullWidth,r.hiddenLabel&&t.hiddenLabel]},Fx=(e,t)=>{const{ownerState:r}=e;return[t.input,r.size==="small"&&t.inputSizeSmall,r.multiline&&t.inputMultiline,r.type==="search"&&t.inputTypeSearch,r.startAdornment&&t.inputAdornedStart,r.endAdornment&&t.inputAdornedEnd,r.hiddenLabel&&t.inputHiddenLabel]},Yre=e=>{const{classes:t,color:r,disabled:n,error:i,endAdornment:o,focused:u,formControl:a,fullWidth:p,hiddenLabel:h,multiline:m,readOnly:v,size:w,startAdornment:x,type:P}=e,T={root:["root",`color${an(r)}`,n&&"disabled",i&&"error",p&&"fullWidth",u&&"focused",a&&"formControl",w&&w!=="medium"&&`size${an(w)}`,m&&"multiline",x&&"adornedStart",o&&"adornedEnd",h&&"hiddenLabel",v&&"readOnly"],input:["input",n&&"disabled",P==="search"&&"inputTypeSearch",m&&"inputMultiline",w==="small"&&"inputSizeSmall",h&&"inputHiddenLabel",x&&"inputAdornedStart",o&&"inputAdornedEnd",v&&"readOnly"]};return Gn(T,Xre,t)},Bx=nr("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Nx})(xi(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${gg.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),jx=nr("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Fx})(xi(({theme:e})=>{const t=e.palette.mode==="light",r={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},n={opacity:"0 !important"},i=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${gg.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${gg.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),UL=aI({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),vI=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:u,className:a,color:p,components:h={},componentsProps:m={},defaultValue:v,disabled:w,disableInjectingGlobalStyles:x,endAdornment:P,error:T,fullWidth:R=!1,id:k,inputComponent:N="input",inputProps:F={},inputRef:D,margin:U,maxRows:B,minRows:Z,multiline:J=!1,name:X,onBlur:le,onChange:H,onClick:G,onFocus:ae,onKeyDown:se,onKeyUp:ue,placeholder:me,readOnly:Ce,renderSuffix:pe,rows:Ee,size:Fe,slotProps:Ke={},slots:fe={},startAdornment:_e,type:Pe="text",value:ke,...$e}=n,ht=F.value!=null?F.value:ke,{current:Ot}=I.useRef(ht!=null),mt=I.useRef(),nt=I.useCallback(fr=>{},[]),Nt=So(mt,D,F.ref,nt),[kt,It]=I.useState(!1),gt=ad(),Le=wg({props:n,muiFormControl:gt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Le.focused=gt?gt.focused:kt,I.useEffect(()=>{!gt&&w&&kt&&(It(!1),le&&le())},[gt,w,kt,le]);const pr=gt&&gt.onFilled,hr=gt&&gt.onEmpty,vr=I.useCallback(fr=>{Q_(fr)?pr&&pr():hr&&hr()},[pr,hr]);Ru(()=>{Ot&&vr({value:ht})},[ht,vr,Ot]);const Qt=fr=>{ae&&ae(fr),F.onFocus&&F.onFocus(fr),gt&&gt.onFocus?gt.onFocus(fr):It(!0)},qe=fr=>{le&&le(fr),F.onBlur&&F.onBlur(fr),gt&&gt.onBlur?gt.onBlur(fr):It(!1)},rt=(fr,...bt)=>{if(!Ot){const ve=fr.target||mt.current;if(ve==null)throw new Error(ch(1));vr({value:ve.value})}F.onChange&&F.onChange(fr,...bt),H&&H(fr,...bt)};I.useEffect(()=>{vr(mt.current)},[]);const ct=fr=>{mt.current&&fr.currentTarget===fr.target&&mt.current.focus(),G&&G(fr)};let Ft=N,Yt=F;J&&Ft==="input"&&(Ee?Yt={type:void 0,minRows:Ee,maxRows:Ee,...Yt}:Yt={type:void 0,maxRows:B,minRows:Z,...Yt},Ft=Zre);const Wt=fr=>{vr(fr.animationName==="mui-auto-fill-cancel"?mt.current:{value:"x"})};I.useEffect(()=>{gt&&gt.setAdornedStart(!!_e)},[gt,_e]);const ur={...n,color:Le.color||"primary",disabled:Le.disabled,endAdornment:P,error:Le.error,focused:Le.focused,formControl:gt,fullWidth:R,hiddenLabel:Le.hiddenLabel,multiline:J,size:Le.size,startAdornment:_e,type:Pe},br=Yre(ur),xr=fe.root||h.Root||Bx,Rr=Ke.root||m.root||{},wr=fe.input||h.Input||jx;return Yt={...Yt,...Ke.input??m.input},ze.jsxs(I.Fragment,{children:[!x&&typeof UL=="function"&&(qL||(qL=ze.jsx(UL,{}))),ze.jsxs(xr,{...Rr,ref:r,onClick:ct,...$e,...!fg(xr)&&{ownerState:{...ur,...Rr.ownerState}},className:Hr(br.root,Rr.className,a,Ce&&"MuiInputBase-readOnly"),children:[_e,ze.jsx(Dx.Provider,{value:null,children:ze.jsx(wr,{"aria-invalid":Le.error,"aria-describedby":i,autoComplete:o,autoFocus:u,defaultValue:v,disabled:Le.disabled,id:k,onAnimationStart:Wt,name:X,placeholder:me,readOnly:Ce,required:Le.required,rows:Ee,value:ht,onKeyDown:se,onKeyUp:ue,type:Pe,...Yt,...!fg(wr)&&{as:Ft,ownerState:{...ur,...Yt.ownerState}},ref:Nt,className:Hr(br.input,Yt.className,Ce&&"MuiInputBase-readOnly"),onBlur:qe,onChange:rt,onFocus:Qt})}),P,pe?pe({...Le,startAdornment:_e}):null]})]})});function Jre(e){return Vn("MuiInput",e)}const Py={...gg,...Bn("MuiInput",["root","underline","input"])};function Qre(e){return Vn("MuiOutlinedInput",e)}const nf={...gg,...Bn("MuiOutlinedInput",["root","notchedOutline","input"])};function ene(e){return Vn("MuiFilledInput",e)}const kd={...gg,...Bn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},tne=Ci(ze.jsx("path",{d:"M7 10l5 5 5-5z"})),rne=Ci(ze.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function nne(e){return Vn("MuiAvatar",e)}Bn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const ine=e=>{const{classes:t,variant:r,colorDefault:n}=e;return Gn({root:["root",r,n&&"colorDefault"],img:["img"],fallback:["fallback"]},nne,t)},ane=nr("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(xi(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),one=nr("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),sne=nr(rne,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function lne({crossOrigin:e,referrerPolicy:t,src:r,srcSet:n}){const[i,o]=I.useState(!1);return I.useEffect(()=>{if(!r&&!n)return;o(!1);let u=!0;const a=new Image;return a.onload=()=>{u&&o("loaded")},a.onerror=()=>{u&&o("error")},a.crossOrigin=e,a.referrerPolicy=t,a.src=r,n&&(a.srcset=n),()=>{u=!1}},[e,t,r,n]),i}const UP=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiAvatar"}),{alt:i,children:o,className:u,component:a="div",slots:p={},slotProps:h={},imgProps:m,sizes:v,src:w,srcSet:x,variant:P="circular",...T}=n;let R=null;const k={...n,component:a,variant:P},N=lne({...m,...typeof h.img=="function"?h.img(k):h.img,src:w,srcSet:x}),F=w||x,D=F&&N!=="error";k.colorDefault=!D,delete k.ownerState;const U=ine(k),[B,Z]=Kn("root",{ref:r,className:Hr(U.root,u),elementType:ane,externalForwardedProps:{slots:p,slotProps:h,component:a,...T},ownerState:k}),[J,X]=Kn("img",{className:U.img,elementType:one,externalForwardedProps:{slots:p,slotProps:{img:{...m,...h.img}}},additionalProps:{alt:i,src:w,srcSet:x,sizes:v},ownerState:k}),[le,H]=Kn("fallback",{className:U.fallback,elementType:sne,externalForwardedProps:{slots:p,slotProps:h},shouldForwardComponentProp:!0,ownerState:k});return D?R=ze.jsx(J,{...X}):o||o===0?R=o:F&&i?R=i[0]:R=ze.jsx(le,{...H}),ze.jsx(B,{...Z,children:R})}),une={entering:{opacity:1},entered:{opacity:1}},VP=I.forwardRef(function(t,r){const n=wf(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:u=!0,children:a,easing:p,in:h,onEnter:m,onEntered:v,onEntering:w,onExit:x,onExited:P,onExiting:T,style:R,timeout:k=i,TransitionComponent:N=kc,...F}=t,D=I.useRef(null),U=So(D,id(a),r),B=se=>ue=>{if(se){const me=D.current;ue===void 0?se(me):se(me,ue)}},Z=B(w),J=B((se,ue)=>{cI(se);const me=cg({style:R,timeout:k,easing:p},{mode:"enter"});se.style.webkitTransition=n.transitions.create("opacity",me),se.style.transition=n.transitions.create("opacity",me),m&&m(se,ue)}),X=B(v),le=B(T),H=B(se=>{const ue=cg({style:R,timeout:k,easing:p},{mode:"exit"});se.style.webkitTransition=n.transitions.create("opacity",ue),se.style.transition=n.transitions.create("opacity",ue),x&&x(se)}),G=B(P),ae=se=>{o&&o(D.current,se)};return ze.jsx(N,{appear:u,in:h,nodeRef:D,onEnter:J,onEntered:X,onEntering:Z,onExit:H,onExited:G,onExiting:le,addEndListener:ae,timeout:k,...F,children:(se,{ownerState:ue,...me})=>I.cloneElement(a,{style:{opacity:0,visibility:se==="exited"&&!h?"hidden":void 0,...une[se],...R,...a.props.style},ref:U,...me})})});function cne(e){return Vn("MuiBackdrop",e)}Bn("MuiBackdrop",["root","invisible"]);const fne=e=>{const{classes:t,invisible:r}=e;return Gn({root:["root",r&&"invisible"]},cne,t)},hne=nr("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),B9=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiBackdrop"}),{children:i,className:o,component:u="div",invisible:a=!1,open:p,components:h={},componentsProps:m={},slotProps:v={},slots:w={},TransitionComponent:x,transitionDuration:P,...T}=n,R={...n,component:u,invisible:a},k=fne(R),N={transition:x,root:h.Root,...w},F={...m,...v},D={component:u,slots:N,slotProps:F},[U,B]=Kn("root",{elementType:hne,externalForwardedProps:D,className:Hr(k.root,o),ownerState:R}),[Z,J]=Kn("transition",{elementType:VP,externalForwardedProps:D,ownerState:R});return ze.jsx(Z,{in:p,timeout:P,...T,...J,children:ze.jsx(U,{"aria-hidden":!0,...B,classes:k,ref:r,children:i})})}),dne=Bn("MuiBox",["root"]),pne=Jh(),od=K$({themeId:Wu,defaultTheme:pne,defaultClassName:dne.root,generateClassName:J3.generate});function mne(e){return Vn("MuiButton",e)}const Ld=Bn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),gne=I.createContext({}),yne=I.createContext(void 0),vne=e=>{const{color:t,disableElevation:r,fullWidth:n,size:i,variant:o,loading:u,loadingPosition:a,classes:p}=e,h={root:["root",u&&"loading",o,`${o}${an(t)}`,`size${an(i)}`,`${o}Size${an(i)}`,`color${an(t)}`,r&&"disableElevation",n&&"fullWidth",u&&`loadingPosition${an(a)}`],startIcon:["icon","startIcon",`iconSize${an(i)}`],endIcon:["icon","endIcon",`iconSize${an(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},m=Gn(h,mne,p);return{...p,...m}},j9=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],bne=nr(kx,{shouldForwardProp:e=>ml(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${an(r.color)}`],t[`size${an(r.size)}`],t[`${r.variant}Size${an(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,r.loading&&t.loading]}})(xi(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Ld.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Ld.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Ld.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Ld.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(kl()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Ld.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Ld.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Ld.loading}`]:{color:"transparent"}}}]}})),_ne=nr("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,r.loading&&t.startIconLoadingStart,t[`iconSize${an(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...j9]})),xne=nr("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,r.loading&&t.endIconLoadingEnd,t[`iconSize${an(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...j9]})),wne=nr("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),VL=nr("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Mc=I.forwardRef(function(t,r){const n=I.useContext(gne),i=I.useContext(yne),o=Xv(n,t),u=Xn({props:o,name:"MuiButton"}),{children:a,color:p="primary",component:h="button",className:m,disabled:v=!1,disableElevation:w=!1,disableFocusRipple:x=!1,endIcon:P,focusVisibleClassName:T,fullWidth:R=!1,id:k,loading:N=null,loadingIndicator:F,loadingPosition:D="center",size:U="medium",startIcon:B,type:Z,variant:J="text",...X}=u,le=xp(k),H=F??ze.jsx(xg,{"aria-labelledby":le,color:"inherit",size:16}),G={...u,color:p,component:h,disabled:v,disableElevation:w,disableFocusRipple:x,fullWidth:R,loading:N,loadingIndicator:H,loadingPosition:D,size:U,type:Z,variant:J},ae=vne(G),se=(B||N&&D==="start")&&ze.jsx(_ne,{className:ae.startIcon,ownerState:G,children:B||ze.jsx(VL,{className:ae.loadingIconPlaceholder,ownerState:G})}),ue=(P||N&&D==="end")&&ze.jsx(xne,{className:ae.endIcon,ownerState:G,children:P||ze.jsx(VL,{className:ae.loadingIconPlaceholder,ownerState:G})}),me=i||"",Ce=typeof N=="boolean"?ze.jsx("span",{className:ae.loadingWrapper,style:{display:"contents"},children:N&&ze.jsx(wne,{className:ae.loadingIndicator,ownerState:G,children:H})}):null;return ze.jsxs(bne,{ownerState:G,className:Hr(n.className,ae.root,m,me),component:h,disabled:v||N,focusRipple:!x,focusVisibleClassName:Hr(ae.focusVisible,T),ref:r,type:Z,id:N?le:k,...X,classes:ae,children:[se,D!=="end"&&Ce,a,D==="end"&&Ce,ue]})});function Sne(e){return Vn("MuiCard",e)}Bn("MuiCard",["root"]);const Ene=e=>{const{classes:t}=e;return Gn({root:["root"]},Sne,t)},Cne=nr(Lc,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),bI=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiCard"}),{className:i,raised:o=!1,...u}=n,a={...n,raised:o},p=Ene(a);return ze.jsx(Cne,{className:Hr(p.root,i),elevation:o?8:void 0,ref:r,ownerState:a,...u})});function Ane(e){return Vn("MuiCardContent",e)}Bn("MuiCardContent",["root"]);const Pne=e=>{const{classes:t}=e;return Gn({root:["root"]},Ane,t)},Tne=nr("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),_I=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiCardContent"}),{className:i,component:o="div",...u}=n,a={...n,component:o},p=Pne(a);return ze.jsx(Tne,{as:o,className:Hr(p.root,i),ownerState:a,ref:r,...u})});function Ine(e){return Vn("PrivateSwitchBase",e)}Bn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Mne=e=>{const{classes:t,checked:r,disabled:n,edge:i}=e,o={root:["root",r&&"checked",n&&"disabled",i&&`edge${an(i)}`],input:["input"]};return Gn(o,Ine,t)},Rne=nr(kx,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),One=nr("input",{name:"MuiSwitchBase",shouldForwardProp:ml})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),kne=I.forwardRef(function(t,r){const{autoFocus:n,checked:i,checkedIcon:o,defaultChecked:u,disabled:a,disableFocusRipple:p=!1,edge:h=!1,icon:m,id:v,inputProps:w,inputRef:x,name:P,onBlur:T,onChange:R,onFocus:k,readOnly:N,required:F=!1,tabIndex:D,type:U,value:B,slots:Z={},slotProps:J={},...X}=t,[le,H]=W_({controlled:i,default:!!u,name:"SwitchBase",state:"checked"}),G=ad(),ae=ke=>{k&&k(ke),G&&G.onFocus&&G.onFocus(ke)},se=ke=>{T&&T(ke),G&&G.onBlur&&G.onBlur(ke)},ue=ke=>{if(ke.nativeEvent.defaultPrevented)return;const $e=ke.target.checked;H($e),R&&R(ke,$e)};let me=a;G&&typeof me>"u"&&(me=G.disabled);const Ce=U==="checkbox"||U==="radio",pe={...t,checked:le,disabled:me,disableFocusRipple:p,edge:h},Ee=Mne(pe),Fe={slots:Z,slotProps:{input:w,...J}},[Ke,fe]=Kn("root",{ref:r,elementType:Rne,className:Ee.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Fe,component:"span",...X},getSlotProps:ke=>({...ke,onFocus:$e=>{ke.onFocus?.($e),ae($e)},onBlur:$e=>{ke.onBlur?.($e),se($e)}}),ownerState:pe,additionalProps:{centerRipple:!0,focusRipple:!p,disabled:me,role:void 0,tabIndex:null}}),[_e,Pe]=Kn("input",{ref:x,elementType:One,className:Ee.input,externalForwardedProps:Fe,getSlotProps:ke=>({...ke,onChange:$e=>{ke.onChange?.($e),ue($e)}}),ownerState:pe,additionalProps:{autoFocus:n,checked:i,defaultChecked:u,disabled:me,id:Ce?v:void 0,name:P,readOnly:N,required:F,tabIndex:D,type:U,...U==="checkbox"&&B===void 0?{}:{value:B}}});return ze.jsxs(Ke,{...fe,children:[ze.jsx(_e,{...Pe}),le?o:m]})}),Lne=Ci(ze.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Dne=Ci(ze.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Nne=Ci(ze.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Fne(e){return Vn("MuiCheckbox",e)}const Bw=Bn("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Bne=e=>{const{classes:t,indeterminate:r,color:n,size:i}=e,o={root:["root",r&&"indeterminate",`color${an(n)}`,`size${an(i)}`]},u=Gn(o,Fne,t);return{...t,...u}},jne=nr(kne,{shouldForwardProp:e=>ml(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${an(r.size)}`],r.color!=="default"&&t[`color${an(r.color)}`]]}})(xi(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(kl()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(kl()).map(([t])=>({props:{color:t},style:{[`&.${Bw.checked}, &.${Bw.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${Bw.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),zne=ze.jsx(Dne,{}),$ne=ze.jsx(Lne,{}),qne=ze.jsx(Nne,{}),z9=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiCheckbox"}),{checkedIcon:i=zne,color:o="primary",icon:u=$ne,indeterminate:a=!1,indeterminateIcon:p=qne,inputProps:h,size:m="medium",disableRipple:v=!1,className:w,slots:x={},slotProps:P={},...T}=n,R=a?p:u,k=a?p:i,N={...n,disableRipple:v,color:o,indeterminate:a,size:m},F=Bne(N),D=P.input??h,[U,B]=Kn("root",{ref:r,elementType:jne,className:Hr(F.root,w),shouldForwardComponentProp:!0,externalForwardedProps:{slots:x,slotProps:P,...T},ownerState:N,additionalProps:{type:"checkbox",icon:I.cloneElement(R,{fontSize:R.props.fontSize??m}),checkedIcon:I.cloneElement(k,{fontSize:k.props.fontSize??m}),disableRipple:v,slots:x,slotProps:{input:sI(typeof D=="function"?D(N):D,{"data-indeterminate":a})}}});return ze.jsx(U,{...B,classes:F})});function GL(e){return e.substring(2).toLowerCase()}function Une(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Vne(e){const{children:t,disableReactTree:r=!1,mouseEvent:n="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,u=I.useRef(!1),a=I.useRef(null),p=I.useRef(!1),h=I.useRef(!1);I.useEffect(()=>(setTimeout(()=>{p.current=!0},0),()=>{p.current=!1}),[]);const m=So(id(t),a),v=Zu(P=>{const T=h.current;h.current=!1;const R=pl(a.current);if(!p.current||!a.current||"clientX"in P&&Une(P,R))return;if(u.current){u.current=!1;return}let k;P.composedPath?k=P.composedPath().includes(a.current):k=!R.documentElement.contains(P.target)||a.current.contains(P.target),!k&&(r||!T)&&i(P)}),w=P=>T=>{h.current=!0;const R=t.props[P];R&&R(T)},x={ref:m};return o!==!1&&(x[o]=w(o)),I.useEffect(()=>{if(o!==!1){const P=GL(o),T=pl(a.current),R=()=>{u.current=!0};return T.addEventListener(P,v),T.addEventListener("touchmove",R),()=>{T.removeEventListener(P,v),T.removeEventListener("touchmove",R)}}},[v,o]),n!==!1&&(x[n]=w(n)),I.useEffect(()=>{if(n!==!1){const P=GL(n),T=pl(a.current);return T.addEventListener(P,v),()=>{T.removeEventListener(P,v)}}},[v,n]),I.cloneElement(t,x)}const GP=typeof aI({})=="function",Gne=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),Hne=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),$9=(e,t=!1)=>{const r={};t&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([o,u])=>{const a=e.getColorSchemeSelector(o);a.startsWith("@")?r[a]={":root":{colorScheme:u.palette?.mode}}:r[a.replace(/\s*&/,"")]={colorScheme:u.palette?.mode}});let n={html:Gne(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...Hne(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...r};const i=e.components?.MuiCssBaseline?.styleOverrides;return i&&(n=[n,i]),n},__="mui-ecs",Wne=e=>{const t=$9(e,!1),r=Array.isArray(t)?t[0]:t;return!e.vars&&r&&(r.html[`:root:has(${__})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([n,i])=>{const o=e.getColorSchemeSelector(n);o.startsWith("@")?r[o]={[`:root:not(:has(.${__}))`]:{colorScheme:i.palette?.mode}}:r[o.replace(/\s*&/,"")]={[`&:not(:has(.${__}))`]:{colorScheme:i.palette?.mode}}}),t},Zne=aI(GP?({theme:e,enableColorScheme:t})=>$9(e,t):({theme:e})=>Wne(e));function Kne(e){const t=Xn({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:n=!1}=t;return ze.jsxs(I.Fragment,{children:[GP&&ze.jsx(Zne,{enableColorScheme:n}),!GP&&!n&&ze.jsx("span",{className:__,style:{display:"none"}}),r]})}function q9(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function Xne(e){const t=pl(e);return t.body===e?Ic(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function _v(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function HL(e){return parseInt(Ic(e).getComputedStyle(e).paddingRight,10)||0}function Yne(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function WL(e,t,r,n,i){const o=[t,r,...n];[].forEach.call(e.children,u=>{const a=!o.includes(u),p=!Yne(u);a&&p&&_v(u,i)})}function jw(e,t){let r=-1;return e.some((n,i)=>t(n)?(r=i,!0):!1),r}function Jne(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(Xne(n)){const u=q9(Ic(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${HL(n)+u}px`;const a=pl(n).querySelectorAll(".mui-fixed");[].forEach.call(a,p=>{r.push({value:p.style.paddingRight,property:"padding-right",el:p}),p.style.paddingRight=`${HL(p)+u}px`})}let o;if(n.parentNode instanceof DocumentFragment)o=pl(n).body;else{const u=n.parentElement,a=Ic(n);o=u?.nodeName==="HTML"&&a.getComputedStyle(u).overflowY==="scroll"?u:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{r.forEach(({value:o,el:u,property:a})=>{o?u.style.setProperty(a,o):u.style.removeProperty(a)})}}function Qne(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class eie{constructor(){this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&_v(t.modalRef,!1);const i=Qne(r);WL(r,t.mount,t.modalRef,i,!0);const o=jw(this.containers,u=>u.container===r);return o!==-1?(this.containers[o].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:i}),n)}mount(t,r){const n=jw(this.containers,o=>o.modals.includes(t)),i=this.containers[n];i.restore||(i.restore=Jne(i,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const i=jw(this.containers,u=>u.modals.includes(t)),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&_v(t.modalRef,r),WL(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const u=o.modals[o.modals.length-1];u.modalRef&&_v(u.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const tie=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function rie(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function nie(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function iie(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||nie(e))}function aie(e){const t=[],r=[];return Array.from(e.querySelectorAll(tie)).forEach((n,i)=>{const o=rie(n);o===-1||!iie(n)||(o===0?t.push(n):r.push({documentOrder:i,tabIndex:o,node:n}))}),r.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(t)}function oie(){return!0}function sie(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:o=aie,isEnabled:u=oie,open:a}=e,p=I.useRef(!1),h=I.useRef(null),m=I.useRef(null),v=I.useRef(null),w=I.useRef(null),x=I.useRef(!1),P=I.useRef(null),T=So(id(t),P),R=I.useRef(null);I.useEffect(()=>{!a||!P.current||(x.current=!r)},[r,a]),I.useEffect(()=>{if(!a||!P.current)return;const F=pl(P.current);return P.current.contains(F.activeElement)||(P.current.hasAttribute("tabIndex")||P.current.setAttribute("tabIndex","-1"),x.current&&P.current.focus()),()=>{i||(v.current&&v.current.focus&&(p.current=!0,v.current.focus()),v.current=null)}},[a]),I.useEffect(()=>{if(!a||!P.current)return;const F=pl(P.current),D=Z=>{R.current=Z,!(n||!u()||Z.key!=="Tab")&&F.activeElement===P.current&&Z.shiftKey&&(p.current=!0,m.current&&m.current.focus())},U=()=>{const Z=P.current;if(Z===null)return;if(!F.hasFocus()||!u()||p.current){p.current=!1;return}if(Z.contains(F.activeElement)||n&&F.activeElement!==h.current&&F.activeElement!==m.current)return;if(F.activeElement!==w.current)w.current=null;else if(w.current!==null)return;if(!x.current)return;let J=[];if((F.activeElement===h.current||F.activeElement===m.current)&&(J=o(P.current)),J.length>0){const X=!!(R.current?.shiftKey&&R.current?.key==="Tab"),le=J[0],H=J[J.length-1];typeof le!="string"&&typeof H!="string"&&(X?H.focus():le.focus())}else Z.focus()};F.addEventListener("focusin",U),F.addEventListener("keydown",D,!0);const B=setInterval(()=>{F.activeElement&&F.activeElement.tagName==="BODY"&&U()},50);return()=>{clearInterval(B),F.removeEventListener("focusin",U),F.removeEventListener("keydown",D,!0)}},[r,n,i,u,a,o]);const k=F=>{v.current===null&&(v.current=F.relatedTarget),x.current=!0,w.current=F.target;const D=t.props.onFocus;D&&D(F)},N=F=>{v.current===null&&(v.current=F.relatedTarget),x.current=!0};return ze.jsxs(I.Fragment,{children:[ze.jsx("div",{tabIndex:a?0:-1,onFocus:N,ref:h,"data-testid":"sentinelStart"}),I.cloneElement(t,{ref:T,onFocus:k}),ze.jsx("div",{tabIndex:a?0:-1,onFocus:N,ref:m,"data-testid":"sentinelEnd"})]})}function lie(e){return typeof e=="function"?e():e}function uie(e){return e?e.props.hasOwnProperty("in"):!1}const ZL=()=>{},Tb=new eie;function cie(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,closeAfterTransition:i=!1,onTransitionEnter:o,onTransitionExited:u,children:a,onClose:p,open:h,rootRef:m}=e,v=I.useRef({}),w=I.useRef(null),x=I.useRef(null),P=So(x,m),[T,R]=I.useState(!h),k=uie(a);let N=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(N=!1);const F=()=>pl(w.current),D=()=>(v.current.modalRef=x.current,v.current.mount=w.current,v.current),U=()=>{Tb.mount(D(),{disableScrollLock:n}),x.current&&(x.current.scrollTop=0)},B=Zu(()=>{const ue=lie(t)||F().body;Tb.add(D(),ue),x.current&&U()}),Z=()=>Tb.isTopModal(D()),J=Zu(ue=>{w.current=ue,ue&&(h&&Z()?U():x.current&&_v(x.current,N))}),X=I.useCallback(()=>{Tb.remove(D(),N)},[N]);I.useEffect(()=>()=>{X()},[X]),I.useEffect(()=>{h?B():(!k||!i)&&X()},[h,X,k,i,B]);const le=ue=>me=>{ue.onKeyDown?.(me),!(me.key!=="Escape"||me.which===229||!Z())&&(r||(me.stopPropagation(),p&&p(me,"escapeKeyDown")))},H=ue=>me=>{ue.onClick?.(me),me.target===me.currentTarget&&p&&p(me,"backdropClick")};return{getRootProps:(ue={})=>{const me=K_(e);delete me.onTransitionEnter,delete me.onTransitionExited;const Ce={...me,...ue};return{role:"presentation",...Ce,onKeyDown:le(Ce),ref:P}},getBackdropProps:(ue={})=>{const me=ue;return{"aria-hidden":!0,...me,onClick:H(me),open:h}},getTransitionProps:()=>{const ue=()=>{R(!1),o&&o()},me=()=>{R(!0),u&&u(),i&&X()};return{onEnter:_L(ue,a?.props.onEnter??ZL),onExited:_L(me,a?.props.onExited??ZL)}},rootRef:P,portalRef:J,isTopModal:Z,exited:T,hasTransition:k}}function fie(e){return Vn("MuiModal",e)}Bn("MuiModal",["root","hidden","backdrop"]);const hie=e=>{const{open:t,exited:r,classes:n}=e;return Gn({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},fie,n)},die=nr("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.open&&r.exited&&t.hidden]}})(xi(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),pie=nr(B9,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),xI=I.forwardRef(function(t,r){const n=Xn({name:"MuiModal",props:t}),{BackdropComponent:i=pie,BackdropProps:o,classes:u,className:a,closeAfterTransition:p=!1,children:h,container:m,component:v,components:w={},componentsProps:x={},disableAutoFocus:P=!1,disableEnforceFocus:T=!1,disableEscapeKeyDown:R=!1,disablePortal:k=!1,disableRestoreFocus:N=!1,disableScrollLock:F=!1,hideBackdrop:D=!1,keepMounted:U=!1,onClose:B,onTransitionEnter:Z,onTransitionExited:J,open:X,slotProps:le={},slots:H={},theme:G,...ae}=n,se={...n,closeAfterTransition:p,disableAutoFocus:P,disableEnforceFocus:T,disableEscapeKeyDown:R,disablePortal:k,disableRestoreFocus:N,disableScrollLock:F,hideBackdrop:D,keepMounted:U},{getRootProps:ue,getBackdropProps:me,getTransitionProps:Ce,portalRef:pe,isTopModal:Ee,exited:Fe,hasTransition:Ke}=cie({...se,rootRef:r}),fe={...se,exited:Fe},_e=hie(fe),Pe={};if(h.props.tabIndex===void 0&&(Pe.tabIndex="-1"),Ke){const{onEnter:nt,onExited:Nt}=Ce();Pe.onEnter=nt,Pe.onExited=Nt}const ke={slots:{root:w.Root,backdrop:w.Backdrop,...H},slotProps:{...x,...le}},[$e,ht]=Kn("root",{ref:r,elementType:die,externalForwardedProps:{...ke,...ae,component:v},getSlotProps:ue,ownerState:fe,className:Hr(a,_e?.root,!fe.open&&fe.exited&&_e?.hidden)}),[Ot,mt]=Kn("backdrop",{ref:o?.ref,elementType:i,externalForwardedProps:ke,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:nt=>me({...nt,onClick:Nt=>{nt?.onClick&&nt.onClick(Nt)}}),className:Hr(o?.className,_e?.backdrop),ownerState:fe});return!U&&!X&&(!Ke||Fe)?null:ze.jsx(N9,{ref:pe,container:m,disablePortal:k,children:ze.jsxs($e,{...ht,children:[!D&&i?ze.jsx(Ot,{...mt}):null,ze.jsx(sie,{disableEnforceFocus:T,disableAutoFocus:P,disableRestoreFocus:N,isEnabled:Ee,open:X,children:I.cloneElement(h,Pe)})]})})});function mie(e){return Vn("MuiDialog",e)}const zw=Bn("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),U9=I.createContext({}),gie=nr(B9,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),yie=e=>{const{classes:t,scroll:r,maxWidth:n,fullWidth:i,fullScreen:o}=e,u={root:["root"],container:["container",`scroll${an(r)}`],paper:["paper",`paperScroll${an(r)}`,`paperWidth${an(String(n))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return Gn(u,mie,t)},vie=nr(xI,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),bie=nr("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.container,t[`scroll${an(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),_ie=nr(Lc,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`scrollPaper${an(r.scroll)}`],t[`paperWidth${an(String(r.maxWidth))}`],r.fullWidth&&t.paperFullWidth,r.fullScreen&&t.paperFullScreen]}})(xi(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${zw.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${zw.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${zw.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),xie=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiDialog"}),i=wf(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":u,"aria-labelledby":a,"aria-modal":p=!0,BackdropComponent:h,BackdropProps:m,children:v,className:w,disableEscapeKeyDown:x=!1,fullScreen:P=!1,fullWidth:T=!1,maxWidth:R="sm",onClick:k,onClose:N,open:F,PaperComponent:D=Lc,PaperProps:U={},scroll:B="paper",slots:Z={},slotProps:J={},TransitionComponent:X=VP,transitionDuration:le=o,TransitionProps:H,...G}=n,ae={...n,disableEscapeKeyDown:x,fullScreen:P,fullWidth:T,maxWidth:R,scroll:B},se=yie(ae),ue=I.useRef(),me=It=>{ue.current=It.target===It.currentTarget},Ce=It=>{k&&k(It),ue.current&&(ue.current=null,N&&N(It,"backdropClick"))},pe=xp(a),Ee=I.useMemo(()=>({titleId:pe}),[pe]),Fe={transition:X,...Z},Ke={transition:H,paper:U,backdrop:m,...J},fe={slots:Fe,slotProps:Ke},[_e,Pe]=Kn("root",{elementType:vie,shouldForwardComponentProp:!0,externalForwardedProps:fe,ownerState:ae,className:Hr(se.root,w),ref:r}),[ke,$e]=Kn("backdrop",{elementType:gie,shouldForwardComponentProp:!0,externalForwardedProps:fe,ownerState:ae}),[ht,Ot]=Kn("paper",{elementType:_ie,shouldForwardComponentProp:!0,externalForwardedProps:fe,ownerState:ae,className:Hr(se.paper,U.className)}),[mt,nt]=Kn("container",{elementType:bie,externalForwardedProps:fe,ownerState:ae,className:se.container}),[Nt,kt]=Kn("transition",{elementType:VP,externalForwardedProps:fe,ownerState:ae,additionalProps:{appear:!0,in:F,timeout:le,role:"presentation"}});return ze.jsx(_e,{closeAfterTransition:!0,slots:{backdrop:ke},slotProps:{backdrop:{transitionDuration:le,as:h,...$e}},disableEscapeKeyDown:x,onClose:N,open:F,onClick:Ce,...Pe,...G,children:ze.jsx(Nt,{...kt,children:ze.jsx(mt,{onMouseDown:me,...nt,children:ze.jsx(ht,{as:D,elevation:24,role:"dialog","aria-describedby":u,"aria-labelledby":pe,"aria-modal":p,...Ot,children:ze.jsx(U9.Provider,{value:Ee,children:v})})})})})});function wie(e){return Vn("MuiDialogActions",e)}Bn("MuiDialogActions",["root","spacing"]);const Sie=e=>{const{classes:t,disableSpacing:r}=e;return Gn({root:["root",!r&&"spacing"]},wie,t)},Eie=nr("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Cie=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiDialogActions"}),{className:i,disableSpacing:o=!1,...u}=n,a={...n,disableSpacing:o},p=Sie(a);return ze.jsx(Eie,{className:Hr(p.root,i),ownerState:a,ref:r,...u})});function Aie(e){return Vn("MuiDialogContent",e)}Bn("MuiDialogContent",["root","dividers"]);function Pie(e){return Vn("MuiDialogTitle",e)}const Tie=Bn("MuiDialogTitle",["root"]),Iie=e=>{const{classes:t,dividers:r}=e;return Gn({root:["root",r&&"dividers"]},Aie,t)},Mie=nr("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.dividers&&t.dividers]}})(xi(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${Tie.root} + &`]:{paddingTop:0}}}]}))),Rie=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiDialogContent"}),{className:i,dividers:o=!1,...u}=n,a={...n,dividers:o},p=Iie(a);return ze.jsx(Mie,{className:Hr(p.root,i),ownerState:a,ref:r,...u})});function Oie(e){return Vn("MuiDialogContentText",e)}Bn("MuiDialogContentText",["root"]);const kie=e=>{const{classes:t}=e,n=Gn({root:["root"]},Oie,t);return{...t,...n}},Lie=nr(No,{shouldForwardProp:e=>ml(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Die=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiDialogContentText"}),{children:i,className:o,...u}=n,a=kie(u);return ze.jsx(Lie,{component:"p",variant:"body1",color:"textSecondary",ref:r,ownerState:u,className:Hr(a.root,o),...n,classes:a})}),Nie=e=>{const{classes:t}=e;return Gn({root:["root"]},Pie,t)},Fie=nr(No,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Bie=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiDialogTitle"}),{className:i,id:o,...u}=n,a=n,p=Nie(a),{titleId:h=o}=I.useContext(U9);return ze.jsx(Fie,{component:"h2",className:Hr(p.root,i),ownerState:a,ref:r,variant:"h6",id:o??h,...u})}),KL=Bn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function jie(e,t,r){const n=t.getBoundingClientRect(),i=r&&r.getBoundingClientRect(),o=Ic(t);let u;if(t.fakeTransform)u=t.fakeTransform;else{const h=o.getComputedStyle(t);u=h.getPropertyValue("-webkit-transform")||h.getPropertyValue("transform")}let a=0,p=0;if(u&&u!=="none"&&typeof u=="string"){const h=u.split("(")[1].split(")")[0].split(",");a=parseInt(h[4],10),p=parseInt(h[5],10)}return e==="left"?i?`translateX(${i.right+a-n.left}px)`:`translateX(${o.innerWidth+a-n.left}px)`:e==="right"?i?`translateX(-${n.right-i.left-a}px)`:`translateX(-${n.left+n.width-a}px)`:e==="up"?i?`translateY(${i.bottom+p-n.top}px)`:`translateY(${o.innerHeight+p-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-p}px)`:`translateY(-${n.top+n.height-p}px)`}function zie(e){return typeof e=="function"?e():e}function Ib(e,t,r){const n=zie(r),i=jie(e,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const V9=I.forwardRef(function(t,r){const n=wf(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:u,appear:a=!0,children:p,container:h,direction:m="down",easing:v=i,in:w,onEnter:x,onEntered:P,onEntering:T,onExit:R,onExited:k,onExiting:N,style:F,timeout:D=o,TransitionComponent:U=kc,...B}=t,Z=I.useRef(null),J=So(id(p),Z,r),X=pe=>Ee=>{pe&&(Ee===void 0?pe(Z.current):pe(Z.current,Ee))},le=X((pe,Ee)=>{Ib(m,pe,h),cI(pe),x&&x(pe,Ee)}),H=X((pe,Ee)=>{const Fe=cg({timeout:D,style:F,easing:v},{mode:"enter"});pe.style.webkitTransition=n.transitions.create("-webkit-transform",{...Fe}),pe.style.transition=n.transitions.create("transform",{...Fe}),pe.style.webkitTransform="none",pe.style.transform="none",T&&T(pe,Ee)}),G=X(P),ae=X(N),se=X(pe=>{const Ee=cg({timeout:D,style:F,easing:v},{mode:"exit"});pe.style.webkitTransition=n.transitions.create("-webkit-transform",Ee),pe.style.transition=n.transitions.create("transform",Ee),Ib(m,pe,h),R&&R(pe)}),ue=X(pe=>{pe.style.webkitTransition="",pe.style.transition="",k&&k(pe)}),me=pe=>{u&&u(Z.current,pe)},Ce=I.useCallback(()=>{Z.current&&Ib(m,Z.current,h)},[m,h]);return I.useEffect(()=>{if(w||m==="down"||m==="right")return;const pe=oI(()=>{Z.current&&Ib(m,Z.current,h)}),Ee=Ic(Z.current);return Ee.addEventListener("resize",pe),()=>{pe.clear(),Ee.removeEventListener("resize",pe)}},[m,w,h]),I.useEffect(()=>{w||Ce()},[w,Ce]),ze.jsx(U,{nodeRef:Z,onEnter:le,onEntered:G,onEntering:H,onExit:se,onExited:ue,onExiting:ae,addEndListener:me,appear:a,in:w,timeout:D,...B,children:(pe,{ownerState:Ee,...Fe})=>I.cloneElement(p,{ref:J,style:{visibility:pe==="exited"&&!w?"hidden":void 0,...F,...p.props.style},...Fe})})});function $ie(e){return Vn("MuiDrawer",e)}Bn("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const G9=(e,t)=>{const{ownerState:r}=e;return[t.root,(r.variant==="permanent"||r.variant==="persistent")&&t.docked,t.modal]},qie=e=>{const{classes:t,anchor:r,variant:n}=e,i={root:["root",`anchor${an(r)}`],docked:[(n==="permanent"||n==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${an(r)}`,n!=="temporary"&&`paperAnchorDocked${an(r)}`]};return Gn(i,$ie,t)},Uie=nr(xI,{name:"MuiDrawer",slot:"Root",overridesResolver:G9})(xi(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),Vie=nr("div",{shouldForwardProp:ml,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:G9})({flex:"0 0 auto"}),Gie=nr(Lc,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.paper,t[`paperAnchor${an(r.anchor)}`],r.variant!=="temporary"&&t[`paperAnchorDocked${an(r.anchor)}`]]}})(xi(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),H9={left:"right",right:"left",top:"down",bottom:"up"};function Hie(e){return["left","right"].includes(e)}function Wie({direction:e},t){return e==="rtl"&&Hie(t)?H9[t]:t}const Zie=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiDrawer"}),i=wf(),o=Px(),u={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:p,children:h,className:m,elevation:v=16,hideBackdrop:w=!1,ModalProps:{BackdropProps:x,...P}={},onClose:T,open:R=!1,PaperProps:k={},SlideProps:N,TransitionComponent:F,transitionDuration:D=u,variant:U="temporary",slots:B={},slotProps:Z={},...J}=n,X=I.useRef(!1);I.useEffect(()=>{X.current=!0},[]);const le=Wie({direction:o?"rtl":"ltr"},a),G={...n,anchor:a,elevation:v,open:R,variant:U,...J},ae=qie(G),se={slots:{transition:F,...B},slotProps:{paper:k,transition:N,...Z,backdrop:sI(Z.backdrop||{...p,...x},{transitionDuration:D})}},[ue,me]=Kn("root",{ref:r,elementType:Uie,className:Hr(ae.root,ae.modal,m),shouldForwardComponentProp:!0,ownerState:G,externalForwardedProps:{...se,...J,...P},additionalProps:{open:R,onClose:T,hideBackdrop:w,slots:{backdrop:se.slots.backdrop},slotProps:{backdrop:se.slotProps.backdrop}}}),[Ce,pe]=Kn("paper",{elementType:Gie,shouldForwardComponentProp:!0,className:Hr(ae.paper,k.className),ownerState:G,externalForwardedProps:se,additionalProps:{elevation:U==="temporary"?v:0,square:!0,...U==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[Ee,Fe]=Kn("docked",{elementType:Vie,ref:r,className:Hr(ae.root,ae.docked,m),ownerState:G,externalForwardedProps:se,additionalProps:J}),[Ke,fe]=Kn("transition",{elementType:V9,ownerState:G,externalForwardedProps:se,additionalProps:{in:R,direction:H9[le],timeout:D,appear:X.current}}),_e=ze.jsx(Ce,{...pe,children:h});if(U==="permanent")return ze.jsx(Ee,{...Fe,children:_e});const Pe=ze.jsx(Ke,{...fe,children:_e});return U==="persistent"?ze.jsx(Ee,{...Fe,children:Pe}):ze.jsx(ue,{...me,children:Pe})}),Kie=e=>{const{classes:t,disableUnderline:r,startAdornment:n,endAdornment:i,size:o,hiddenLabel:u,multiline:a}=e,p={root:["root",!r&&"underline",n&&"adornedStart",i&&"adornedEnd",o==="small"&&`size${an(o)}`,u&&"hiddenLabel",a&&"multiline"],input:["input"]},h=Gn(p,ene,t);return{...t,...h}},Xie=nr(Bx,{shouldForwardProp:e=>ml(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...Nx(e,t),!r.disableUnderline&&t.underline]}})(xi(({theme:e})=>{const t=e.palette.mode==="light",r=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n}},[`&.${kd.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n},[`&.${kd.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:u})=>!u.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kd.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kd.disabled}, .${kd.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${kd.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(kl()).map(([u])=>({props:{disableUnderline:!1,color:u},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[u]?.main}`}}})),{props:({ownerState:u})=>u.startAdornment,style:{paddingLeft:12}},{props:({ownerState:u})=>u.endAdornment,style:{paddingRight:12}},{props:({ownerState:u})=>u.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:u,size:a})=>u.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:u})=>u.multiline&&u.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:u})=>u.multiline&&u.hiddenLabel&&u.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Yie=nr(jx,{name:"MuiFilledInput",slot:"Input",overridesResolver:Fx})(xi(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),wI=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:o={},componentsProps:u,fullWidth:a=!1,hiddenLabel:p,inputComponent:h="input",multiline:m=!1,slotProps:v,slots:w={},type:x="text",...P}=n,T={...n,disableUnderline:i,fullWidth:a,inputComponent:h,multiline:m,type:x},R=Kie(n),k={root:{ownerState:T},input:{ownerState:T}},N=v??u?es(k,v??u):k,F=w.root??o.Root??Xie,D=w.input??o.Input??Yie;return ze.jsx(vI,{slots:{root:F,input:D},slotProps:N,fullWidth:a,inputComponent:h,multiline:m,ref:r,type:x,...P,classes:R})});wI.muiName="Input";function Jie(e){return Vn("MuiFormControl",e)}Bn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Qie=e=>{const{classes:t,margin:r,fullWidth:n}=e,i={root:["root",r!=="none"&&`margin${an(r)}`,n&&"fullWidth"]};return Gn(i,Jie,t)},eae=nr("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`margin${an(r.margin)}`],r.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),tae=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiFormControl"}),{children:i,className:o,color:u="primary",component:a="div",disabled:p=!1,error:h=!1,focused:m,fullWidth:v=!1,hiddenLabel:w=!1,margin:x="none",required:P=!1,size:T="medium",variant:R="outlined",...k}=n,N={...n,color:u,component:a,disabled:p,error:h,fullWidth:v,hiddenLabel:w,margin:x,required:P,size:T,variant:R},F=Qie(N),[D,U]=I.useState(()=>{let ue=!1;return i&&I.Children.forEach(i,me=>{if(!v_(me,["Input","Select"]))return;const Ce=v_(me,["Select"])?me.props.input:me;Ce&&Kre(Ce.props)&&(ue=!0)}),ue}),[B,Z]=I.useState(()=>{let ue=!1;return i&&I.Children.forEach(i,me=>{v_(me,["Input","Select"])&&(Q_(me.props,!0)||Q_(me.props.inputProps,!0))&&(ue=!0)}),ue}),[J,X]=I.useState(!1);p&&J&&X(!1);const le=m!==void 0&&!p?m:J;let H;I.useRef(!1);const G=I.useCallback(()=>{Z(!0)},[]),ae=I.useCallback(()=>{Z(!1)},[]),se=I.useMemo(()=>({adornedStart:D,setAdornedStart:U,color:u,disabled:p,error:h,filled:B,focused:le,fullWidth:v,hiddenLabel:w,size:T,onBlur:()=>{X(!1)},onFocus:()=>{X(!0)},onEmpty:ae,onFilled:G,registerEffect:H,required:P,variant:R}),[D,u,p,h,B,le,v,w,H,ae,G,P,T,R]);return ze.jsx(Dx.Provider,{value:se,children:ze.jsx(eae,{as:a,ownerState:N,className:Hr(F.root,o),ref:r,...k,children:i})})});function rae(e){return Vn("MuiFormHelperText",e)}const XL=Bn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var YL;const nae=e=>{const{classes:t,contained:r,size:n,disabled:i,error:o,filled:u,focused:a,required:p}=e,h={root:["root",i&&"disabled",o&&"error",n&&`size${an(n)}`,r&&"contained",a&&"focused",u&&"filled",p&&"required"]};return Gn(h,rae,t)},iae=nr("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size&&t[`size${an(r.size)}`],r.contained&&t.contained,r.filled&&t.filled]}})(xi(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${XL.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${XL.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),aae=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiFormHelperText"}),{children:i,className:o,component:u="p",disabled:a,error:p,filled:h,focused:m,margin:v,required:w,variant:x,...P}=n,T=ad(),R=wg({props:n,muiFormControl:T,states:["variant","size","disabled","error","filled","focused","required"]}),k={...n,component:u,contained:R.variant==="filled"||R.variant==="outlined",variant:R.variant,size:R.size,disabled:R.disabled,error:R.error,filled:R.filled,focused:R.focused,required:R.required};delete k.ownerState;const N=nae(k);return ze.jsx(iae,{as:u,className:Hr(N.root,o),ref:r,...P,ownerState:k,children:i===" "?YL||(YL=ze.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):i})});function oae(e){return Vn("MuiFormLabel",e)}const xv=Bn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),sae=e=>{const{classes:t,color:r,focused:n,disabled:i,error:o,filled:u,required:a}=e,p={root:["root",`color${an(r)}`,i&&"disabled",o&&"error",u&&"filled",n&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return Gn(p,oae,t)},lae=nr("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color==="secondary"&&t.colorSecondary,r.filled&&t.filled]}})(xi(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(kl()).map(([t])=>({props:{color:t},style:{[`&.${xv.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${xv.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${xv.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),uae=nr("span",{name:"MuiFormLabel",slot:"Asterisk"})(xi(({theme:e})=>({[`&.${xv.error}`]:{color:(e.vars||e).palette.error.main}}))),cae=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiFormLabel"}),{children:i,className:o,color:u,component:a="label",disabled:p,error:h,filled:m,focused:v,required:w,...x}=n,P=ad(),T=wg({props:n,muiFormControl:P,states:["color","required","focused","disabled","error","filled"]}),R={...n,color:T.color||"primary",component:a,disabled:T.disabled,error:T.error,filled:T.filled,focused:T.focused,required:T.required},k=sae(R);return ze.jsxs(lae,{as:a,ownerState:R,className:Hr(k.root,o),ref:r,...x,children:[i,T.required&&ze.jsxs(uae,{ownerState:R,"aria-hidden":!0,className:k.asterisk,children:[" ","*"]})]})});function HP(e){return`scale(${e}, ${e**2})`}const fae={entering:{opacity:1,transform:HP(1)},entered:{opacity:1,transform:"none"}},$w=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),t0=I.forwardRef(function(t,r){const{addEndListener:n,appear:i=!0,children:o,easing:u,in:a,onEnter:p,onEntered:h,onEntering:m,onExit:v,onExited:w,onExiting:x,style:P,timeout:T="auto",TransitionComponent:R=kc,...k}=t,N=Qd(),F=I.useRef(),D=wf(),U=I.useRef(null),B=So(U,id(o),r),Z=ue=>me=>{if(ue){const Ce=U.current;me===void 0?ue(Ce):ue(Ce,me)}},J=Z(m),X=Z((ue,me)=>{cI(ue);const{duration:Ce,delay:pe,easing:Ee}=cg({style:P,timeout:T,easing:u},{mode:"enter"});let Fe;T==="auto"?(Fe=D.transitions.getAutoHeightDuration(ue.clientHeight),F.current=Fe):Fe=Ce,ue.style.transition=[D.transitions.create("opacity",{duration:Fe,delay:pe}),D.transitions.create("transform",{duration:$w?Fe:Fe*.666,delay:pe,easing:Ee})].join(","),p&&p(ue,me)}),le=Z(h),H=Z(x),G=Z(ue=>{const{duration:me,delay:Ce,easing:pe}=cg({style:P,timeout:T,easing:u},{mode:"exit"});let Ee;T==="auto"?(Ee=D.transitions.getAutoHeightDuration(ue.clientHeight),F.current=Ee):Ee=me,ue.style.transition=[D.transitions.create("opacity",{duration:Ee,delay:Ce}),D.transitions.create("transform",{duration:$w?Ee:Ee*.666,delay:$w?Ce:Ce||Ee*.333,easing:pe})].join(","),ue.style.opacity=0,ue.style.transform=HP(.75),v&&v(ue)}),ae=Z(w),se=ue=>{T==="auto"&&N.start(F.current||0,ue),n&&n(U.current,ue)};return ze.jsx(R,{appear:i,in:a,nodeRef:U,onEnter:X,onEntered:le,onEntering:J,onExit:G,onExited:ae,onExiting:H,addEndListener:se,timeout:T==="auto"?null:T,...k,children:(ue,{ownerState:me,...Ce})=>I.cloneElement(o,{style:{opacity:0,transform:HP(.75),visibility:ue==="exited"&&!a?"hidden":void 0,...fae[ue],...P,...o.props.style},ref:B,...Ce})})});t0&&(t0.muiSupportAuto=!0);const hae=e=>{const{classes:t,disableUnderline:r}=e,i=Gn({root:["root",!r&&"underline"],input:["input"]},Jre,t);return{...t,...i}},dae=nr(Bx,{shouldForwardProp:e=>ml(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[...Nx(e,t),!r.disableUnderline&&t.underline]}})(xi(({theme:e})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:n})=>n.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:n})=>!n.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Py.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Py.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Py.disabled}, .${Py.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Py.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(kl()).map(([n])=>({props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[n].main}`}}}))]}})),pae=nr(jx,{name:"MuiInput",slot:"Input",overridesResolver:Fx})({}),SI=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiInput"}),{disableUnderline:i=!1,components:o={},componentsProps:u,fullWidth:a=!1,inputComponent:p="input",multiline:h=!1,slotProps:m,slots:v={},type:w="text",...x}=n,P=hae(n),R={root:{ownerState:{disableUnderline:i}}},k=m??u?es(m??u,R):R,N=v.root??o.Root??dae,F=v.input??o.Input??pae;return ze.jsx(vI,{slots:{root:N,input:F},slotProps:k,fullWidth:a,inputComponent:p,multiline:h,ref:r,type:w,...x,classes:P})});SI.muiName="Input";function mae(e){return Vn("MuiInputAdornment",e)}const JL=Bn("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var QL;const gae=(e,t)=>{const{ownerState:r}=e;return[t.root,t[`position${an(r.position)}`],r.disablePointerEvents===!0&&t.disablePointerEvents,t[r.variant]]},yae=e=>{const{classes:t,disablePointerEvents:r,hiddenLabel:n,position:i,size:o,variant:u}=e,a={root:["root",r&&"disablePointerEvents",i&&`position${an(i)}`,u,n&&"hiddenLabel",o&&`size${an(o)}`]};return Gn(a,mae,t)},vae=nr("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:gae})(xi(({theme:e})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${JL.positionStart}&:not(.${JL.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),x_=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiInputAdornment"}),{children:i,className:o,component:u="div",disablePointerEvents:a=!1,disableTypography:p=!1,position:h,variant:m,...v}=n,w=ad()||{};let x=m;m&&w.variant,w&&!x&&(x=w.variant);const P={...n,hiddenLabel:w.hiddenLabel,size:w.size,disablePointerEvents:a,position:h,variant:x},T=yae(P);return ze.jsx(Dx.Provider,{value:null,children:ze.jsx(vae,{as:u,ownerState:P,className:Hr(T.root,o),ref:r,...v,children:typeof i=="string"&&!p?ze.jsx(No,{color:"textSecondary",children:i}):ze.jsxs(I.Fragment,{children:[h==="start"?QL||(QL=ze.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):null,i]})})})});function bae(e){return Vn("MuiInputLabel",e)}Bn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const _ae=e=>{const{classes:t,formControl:r,size:n,shrink:i,disableAnimation:o,variant:u,required:a}=e,p={root:["root",r&&"formControl",!o&&"animated",i&&"shrink",n&&n!=="medium"&&`size${an(n)}`,u],asterisk:[a&&"asterisk"]},h=Gn(p,bae,t);return{...t,...h}},xae=nr(cae,{shouldForwardProp:e=>ml(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${xv.asterisk}`]:t.asterisk},t.root,r.formControl&&t.formControl,r.size==="small"&&t.sizeSmall,r.shrink&&t.shrink,!r.disableAnimation&&t.animated,r.focused&&t.focused,t[r.variant]]}})(xi(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="filled"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:r,size:n})=>t==="filled"&&r.shrink&&n==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:r})=>t==="outlined"&&r.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),wae=I.forwardRef(function(t,r){const n=Xn({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,margin:o,shrink:u,variant:a,className:p,...h}=n,m=ad();let v=u;typeof v>"u"&&m&&(v=m.filled||m.focused||m.adornedStart);const w=wg({props:n,muiFormControl:m,states:["size","variant","required","focused"]}),x={...n,disableAnimation:i,formControl:m,shrink:v,size:w.size,variant:w.variant,required:w.required,focused:w.focused},P=_ae(x);return ze.jsx(xae,{"data-shrink":v,ref:r,className:Hr(P.root,p),...h,ownerState:x,classes:P})}),lh=I.createContext({});function Sae(e){return Vn("MuiList",e)}Bn("MuiList",["root","padding","dense","subheader"]);const Eae=e=>{const{classes:t,disablePadding:r,dense:n,subheader:i}=e;return Gn({root:["root",!r&&"padding",n&&"dense",i&&"subheader"]},Sae,t)},Cae=nr("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),M0=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiList"}),{children:i,className:o,component:u="ul",dense:a=!1,disablePadding:p=!1,subheader:h,...m}=n,v=I.useMemo(()=>({dense:a}),[a]),w={...n,component:u,dense:a,disablePadding:p},x=Eae(w);return ze.jsx(lh.Provider,{value:v,children:ze.jsxs(Cae,{as:u,className:Hr(x.root,o),ref:r,ownerState:w,...m,children:[h,i]})})});function Aae(e){return Vn("MuiListItem",e)}Bn("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const Pae=Bn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Tae(e){return Vn("MuiListItemSecondaryAction",e)}Bn("MuiListItemSecondaryAction",["root","disableGutters"]);const Iae=e=>{const{disableGutters:t,classes:r}=e;return Gn({root:["root",t&&"disableGutters"]},Tae,r)},Mae=nr("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),W9=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiListItemSecondaryAction"}),{className:i,...o}=n,u=I.useContext(lh),a={...n,disableGutters:u.disableGutters},p=Iae(a);return ze.jsx(Mae,{className:Hr(p.root,i),ownerState:a,ref:r,...o})});W9.muiName="ListItemSecondaryAction";const Rae=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.hasSecondaryAction&&t.secondaryAction]},Oae=e=>{const{alignItems:t,classes:r,dense:n,disableGutters:i,disablePadding:o,divider:u,hasSecondaryAction:a}=e;return Gn({root:["root",n&&"dense",!i&&"gutters",!o&&"padding",u&&"divider",t==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},Aae,r)},kae=nr("div",{name:"MuiListItem",slot:"Root",overridesResolver:Rae})(xi(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${Pae.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),Lae=nr("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),EI=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiListItem"}),{alignItems:i="center",children:o,className:u,component:a,components:p={},componentsProps:h={},ContainerComponent:m="li",ContainerProps:{className:v,...w}={},dense:x=!1,disableGutters:P=!1,disablePadding:T=!1,divider:R=!1,secondaryAction:k,slotProps:N={},slots:F={},...D}=n,U=I.useContext(lh),B=I.useMemo(()=>({dense:x||U.dense||!1,alignItems:i,disableGutters:P}),[i,U.dense,x,P]),Z=I.useRef(null),J=I.Children.toArray(o),X=J.length&&v_(J[J.length-1],["ListItemSecondaryAction"]),le={...n,alignItems:i,dense:B.dense,disableGutters:P,disablePadding:T,divider:R,hasSecondaryAction:X},H=Oae(le),G=So(Z,r),ae=F.root||p.Root||kae,se=N.root||h.root||{},ue={className:Hr(H.root,se.className,u),...D};let me=a||"li";return X?(me=!ue.component&&!a?"div":me,m==="li"&&(me==="li"?me="div":ue.component==="li"&&(ue.component="div")),ze.jsx(lh.Provider,{value:B,children:ze.jsxs(Lae,{as:m,className:Hr(H.container,v),ref:G,ownerState:le,...w,children:[ze.jsx(ae,{...se,...!fg(ae)&&{as:me,ownerState:{...le,...se.ownerState}},...ue,children:J}),J.pop()]})})):ze.jsx(lh.Provider,{value:B,children:ze.jsxs(ae,{...se,as:me,ref:G,...!fg(ae)&&{ownerState:{...le,...se.ownerState}},...ue,children:[J,k&&ze.jsx(W9,{children:k})]})})});function Dae(e){return Vn("MuiListItemIcon",e)}const e4=Bn("MuiListItemIcon",["root","alignItemsFlexStart"]),Nae=e=>{const{alignItems:t,classes:r}=e;return Gn({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Dae,r)},Fae=nr("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(xi(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),R0=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiListItemIcon"}),{className:i,...o}=n,u=I.useContext(lh),a={...n,alignItems:u.alignItems},p=Nae(a);return ze.jsx(Fae,{className:Hr(p.root,i),ownerState:a,ref:r,...o})});function Bae(e){return Vn("MuiListItemText",e)}const qm=Bn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),jae=e=>{const{classes:t,inset:r,primary:n,secondary:i,dense:o}=e;return Gn({root:["root",r&&"inset",o&&"dense",n&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Bae,t)},zae=nr("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${qm.primary}`]:t.primary},{[`& .${qm.secondary}`]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${TL.root}:where(& .${qm.primary})`]:{display:"block"},[`.${TL.root}:where(& .${qm.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),$ae=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiListItemText"}),{children:i,className:o,disableTypography:u=!1,inset:a=!1,primary:p,primaryTypographyProps:h,secondary:m,secondaryTypographyProps:v,slots:w={},slotProps:x={},...P}=n,{dense:T}=I.useContext(lh);let R=p??i,k=m;const N={...n,disableTypography:u,inset:a,primary:!!R,secondary:!!k,dense:T},F=jae(N),D={slots:w,slotProps:{primary:h,secondary:v,...x}},[U,B]=Kn("root",{className:Hr(F.root,o),elementType:zae,externalForwardedProps:{...D,...P},ownerState:N,ref:r}),[Z,J]=Kn("primary",{className:F.primary,elementType:No,externalForwardedProps:D,ownerState:N}),[X,le]=Kn("secondary",{className:F.secondary,elementType:No,externalForwardedProps:D,ownerState:N});return R!=null&&R.type!==No&&!u&&(R=ze.jsx(Z,{variant:T?"body2":"body1",component:J?.variant?void 0:"span",...J,children:R})),k!=null&&k.type!==No&&!u&&(k=ze.jsx(X,{variant:"body2",color:"textSecondary",...le,children:k})),ze.jsxs(U,{...B,children:[R,k]})});function qw(e,t,r){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:r?null:e.firstChild}function t4(e,t,r){return e===t?r?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:r?null:e.lastChild}function Z9(e,t){if(t===void 0)return!0;let r=e.innerText;return r===void 0&&(r=e.textContent),r=r.trim().toLowerCase(),r.length===0?!1:t.repeating?r[0]===t.keys[0]:r.startsWith(t.keys.join(""))}function Ty(e,t,r,n,i,o){let u=!1,a=i(e,t,t?r:!1);for(;a;){if(a===e.firstChild){if(u)return!1;u=!0}const p=n?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!Z9(a,o)||p)a=i(e,a,r);else return a.focus(),!0}return!1}const K9=I.forwardRef(function(t,r){const{actions:n,autoFocus:i=!1,autoFocusItem:o=!1,children:u,className:a,disabledItemsFocusable:p=!1,disableListWrap:h=!1,onKeyDown:m,variant:v="selectedMenu",...w}=t,x=I.useRef(null),P=I.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ru(()=>{i&&x.current.focus()},[i]),I.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(F,{direction:D})=>{const U=!x.current.style.width;if(F.clientHeight<x.current.clientHeight&&U){const B=`${q9(Ic(F))}px`;x.current.style[D==="rtl"?"paddingLeft":"paddingRight"]=B,x.current.style.width=`calc(100% + ${B})`}return x.current}}),[]);const T=F=>{const D=x.current,U=F.key;if(F.ctrlKey||F.metaKey||F.altKey){m&&m(F);return}const Z=pl(D).activeElement;if(U==="ArrowDown")F.preventDefault(),Ty(D,Z,h,p,qw);else if(U==="ArrowUp")F.preventDefault(),Ty(D,Z,h,p,t4);else if(U==="Home")F.preventDefault(),Ty(D,null,h,p,qw);else if(U==="End")F.preventDefault(),Ty(D,null,h,p,t4);else if(U.length===1){const J=P.current,X=U.toLowerCase(),le=performance.now();J.keys.length>0&&(le-J.lastTime>500?(J.keys=[],J.repeating=!0,J.previousKeyMatched=!0):J.repeating&&X!==J.keys[0]&&(J.repeating=!1)),J.lastTime=le,J.keys.push(X);const H=Z&&!J.repeating&&Z9(Z,J);J.previousKeyMatched&&(H||Ty(D,Z,!1,p,qw,J))?F.preventDefault():J.previousKeyMatched=!1}m&&m(F)},R=So(x,r);let k=-1;I.Children.forEach(u,(F,D)=>{if(!I.isValidElement(F)){k===D&&(k+=1,k>=u.length&&(k=-1));return}F.props.disabled||(v==="selectedMenu"&&F.props.selected||k===-1)&&(k=D),k===D&&(F.props.disabled||F.props.muiSkipListHighlight||F.type.muiSkipListHighlight)&&(k+=1,k>=u.length&&(k=-1))});const N=I.Children.map(u,(F,D)=>{if(D===k){const U={};return o&&(U.autoFocus=!0),F.props.tabIndex===void 0&&v==="selectedMenu"&&(U.tabIndex=0),I.cloneElement(F,U)}return F});return ze.jsx(M0,{role:"menu",ref:R,className:a,onKeyDown:T,tabIndex:i?0:-1,...w,children:N})});function qae(e){return Vn("MuiPopover",e)}Bn("MuiPopover",["root","paper"]);function r4(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.height/2:t==="bottom"&&(r=e.height),r}function n4(e,t){let r=0;return typeof t=="number"?r=t:t==="center"?r=e.width/2:t==="right"&&(r=e.width),r}function i4(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Mb(e){return typeof e=="function"?e():e}const Uae=e=>{const{classes:t}=e;return Gn({root:["root"],paper:["paper"]},qae,t)},Vae=nr(xI,{name:"MuiPopover",slot:"Root"})({}),X9=nr(Lc,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Y9=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:u={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:p="anchorEl",children:h,className:m,container:v,elevation:w=8,marginThreshold:x=16,open:P,PaperProps:T={},slots:R={},slotProps:k={},transformOrigin:N={vertical:"top",horizontal:"left"},TransitionComponent:F,transitionDuration:D="auto",TransitionProps:U={},disableScrollLock:B=!1,...Z}=n,J=I.useRef(),X={...n,anchorOrigin:u,anchorReference:p,elevation:w,marginThreshold:x,transformOrigin:N,TransitionComponent:F,transitionDuration:D,TransitionProps:U},le=Uae(X),H=I.useCallback(()=>{if(p==="anchorPosition")return a;const nt=Mb(o),kt=(nt&&nt.nodeType===1?nt:pl(J.current).body).getBoundingClientRect();return{top:kt.top+r4(kt,u.vertical),left:kt.left+n4(kt,u.horizontal)}},[o,u.horizontal,u.vertical,a,p]),G=I.useCallback(nt=>({vertical:r4(nt,N.vertical),horizontal:n4(nt,N.horizontal)}),[N.horizontal,N.vertical]),ae=I.useCallback(nt=>{const Nt={width:nt.offsetWidth,height:nt.offsetHeight},kt=G(Nt);if(p==="none")return{top:null,left:null,transformOrigin:i4(kt)};const It=H();let gt=It.top-kt.vertical,Le=It.left-kt.horizontal;const pr=gt+Nt.height,hr=Le+Nt.width,vr=Ic(Mb(o)),Qt=vr.innerHeight-x,qe=vr.innerWidth-x;if(x!==null&&gt<x){const rt=gt-x;gt-=rt,kt.vertical+=rt}else if(x!==null&&pr>Qt){const rt=pr-Qt;gt-=rt,kt.vertical+=rt}if(x!==null&&Le<x){const rt=Le-x;Le-=rt,kt.horizontal+=rt}else if(hr>qe){const rt=hr-qe;Le-=rt,kt.horizontal+=rt}return{top:`${Math.round(gt)}px`,left:`${Math.round(Le)}px`,transformOrigin:i4(kt)}},[o,p,H,G,x]),[se,ue]=I.useState(P),me=I.useCallback(()=>{const nt=J.current;if(!nt)return;const Nt=ae(nt);Nt.top!==null&&nt.style.setProperty("top",Nt.top),Nt.left!==null&&(nt.style.left=Nt.left),nt.style.transformOrigin=Nt.transformOrigin,ue(!0)},[ae]);I.useEffect(()=>(B&&window.addEventListener("scroll",me),()=>window.removeEventListener("scroll",me)),[o,B,me]);const Ce=()=>{me()},pe=()=>{ue(!1)};I.useEffect(()=>{P&&me()}),I.useImperativeHandle(i,()=>P?{updatePosition:()=>{me()}}:null,[P,me]),I.useEffect(()=>{if(!P)return;const nt=oI(()=>{me()}),Nt=Ic(Mb(o));return Nt.addEventListener("resize",nt),()=>{nt.clear(),Nt.removeEventListener("resize",nt)}},[o,P,me]);let Ee=D;const Fe={slots:{transition:F,...R},slotProps:{transition:U,paper:T,...k}},[Ke,fe]=Kn("transition",{elementType:t0,externalForwardedProps:Fe,ownerState:X,getSlotProps:nt=>({...nt,onEntering:(Nt,kt)=>{nt.onEntering?.(Nt,kt),Ce()},onExited:Nt=>{nt.onExited?.(Nt),pe()}}),additionalProps:{appear:!0,in:P}});D==="auto"&&!Ke.muiSupportAuto&&(Ee=void 0);const _e=v||(o?pl(Mb(o)).body:void 0),[Pe,{slots:ke,slotProps:$e,...ht}]=Kn("root",{ref:r,elementType:Vae,externalForwardedProps:{...Fe,...Z},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:R.backdrop},slotProps:{backdrop:sI(typeof k.backdrop=="function"?k.backdrop(X):k.backdrop,{invisible:!0})},container:_e,open:P},ownerState:X,className:Hr(le.root,m)}),[Ot,mt]=Kn("paper",{ref:J,className:le.paper,elementType:X9,externalForwardedProps:Fe,shouldForwardComponentProp:!0,additionalProps:{elevation:w,style:se?void 0:{opacity:0}},ownerState:X});return ze.jsx(Pe,{...ht,...!fg(Pe)&&{slots:ke,slotProps:$e,disableScrollLock:B},children:ze.jsx(Ke,{...fe,timeout:Ee,children:ze.jsx(Ot,{...mt,children:h})})})});function Gae(e){return Vn("MuiMenu",e)}Bn("MuiMenu",["root","paper","list"]);const Hae={vertical:"top",horizontal:"right"},Wae={vertical:"top",horizontal:"left"},Zae=e=>{const{classes:t}=e;return Gn({root:["root"],paper:["paper"],list:["list"]},Gae,t)},Kae=nr(Y9,{shouldForwardProp:e=>ml(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),Xae=nr(X9,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Yae=nr(K9,{name:"MuiMenu",slot:"List"})({outline:0}),CI=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiMenu"}),{autoFocus:i=!0,children:o,className:u,disableAutoFocusItem:a=!1,MenuListProps:p={},onClose:h,open:m,PaperProps:v={},PopoverClasses:w,transitionDuration:x="auto",TransitionProps:{onEntering:P,...T}={},variant:R="selectedMenu",slots:k={},slotProps:N={},...F}=n,D=Px(),U={...n,autoFocus:i,disableAutoFocusItem:a,MenuListProps:p,onEntering:P,PaperProps:v,transitionDuration:x,TransitionProps:T,variant:R},B=Zae(U),Z=i&&!a&&m,J=I.useRef(null),X=(Ee,Fe)=>{J.current&&J.current.adjustStyleForScrollbar(Ee,{direction:D?"rtl":"ltr"}),P&&P(Ee,Fe)},le=Ee=>{Ee.key==="Tab"&&(Ee.preventDefault(),h&&h(Ee,"tabKeyDown"))};let H=-1;I.Children.map(o,(Ee,Fe)=>{I.isValidElement(Ee)&&(Ee.props.disabled||(R==="selectedMenu"&&Ee.props.selected||H===-1)&&(H=Fe))});const G={slots:k,slotProps:{list:p,transition:T,paper:v,...N}},ae=D9({elementType:k.root,externalSlotProps:N.root,ownerState:U,className:[B.root,u]}),[se,ue]=Kn("paper",{className:B.paper,elementType:Xae,externalForwardedProps:G,shouldForwardComponentProp:!0,ownerState:U}),[me,Ce]=Kn("list",{className:Hr(B.list,p.className),elementType:Yae,shouldForwardComponentProp:!0,externalForwardedProps:G,getSlotProps:Ee=>({...Ee,onKeyDown:Fe=>{le(Fe),Ee.onKeyDown?.(Fe)}}),ownerState:U}),pe=typeof G.slotProps.transition=="function"?G.slotProps.transition(U):G.slotProps.transition;return ze.jsx(Kae,{onClose:h,anchorOrigin:{vertical:"bottom",horizontal:D?"right":"left"},transformOrigin:D?Hae:Wae,slots:{root:k.root,paper:se,backdrop:k.backdrop,...k.transition&&{transition:k.transition}},slotProps:{root:ae,paper:ue,backdrop:typeof N.backdrop=="function"?N.backdrop(U):N.backdrop,transition:{...pe,onEntering:(...Ee)=>{X(...Ee),pe?.onEntering?.(...Ee)}}},open:m,ref:r,transitionDuration:x,ownerState:U,...F,classes:w,children:ze.jsx(me,{actions:J,autoFocus:i&&(H===-1||a),autoFocusItem:Z,variant:R,...Ce,children:o})})});function Jae(e){return Vn("MuiMenuItem",e)}const Iy=Bn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Qae=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},eoe=e=>{const{disabled:t,dense:r,divider:n,disableGutters:i,selected:o,classes:u}=e,p=Gn({root:["root",r&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",o&&"selected"]},Jae,u);return{...u,...p}},toe=nr(kx,{shouldForwardProp:e=>ml(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Qae})(xi(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Iy.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${Iy.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${Iy.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${Iy.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Iy.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${KL.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${KL.inset}`]:{marginLeft:52},[`& .${qm.root}`]:{marginTop:0,marginBottom:0},[`& .${qm.inset}`]:{paddingLeft:36},[`& .${e4.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${e4.root} svg`]:{fontSize:"1.25rem"}}}]}))),AI=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:u=!1,divider:a=!1,disableGutters:p=!1,focusVisibleClassName:h,role:m="menuitem",tabIndex:v,className:w,...x}=n,P=I.useContext(lh),T=I.useMemo(()=>({dense:u||P.dense||!1,disableGutters:p}),[P.dense,u,p]),R=I.useRef(null);Ru(()=>{i&&R.current&&R.current.focus()},[i]);const k={...n,dense:T.dense,divider:a,disableGutters:p},N=eoe(n),F=So(R,r);let D;return n.disabled||(D=v!==void 0?v:-1),ze.jsx(lh.Provider,{value:T,children:ze.jsx(toe,{ref:F,role:m,tabIndex:D,component:o,focusVisibleClassName:Hr(N.focusVisible,h),className:Hr(N.root,w),...x,ownerState:k,classes:N})})});function roe(e){return Vn("MuiNativeSelect",e)}const PI=Bn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),noe=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:u}=e,a={select:["select",r,n&&"disabled",i&&"multiple",u&&"error"],icon:["icon",`icon${an(r)}`,o&&"iconOpen",n&&"disabled"]};return Gn(a,roe,t)},J9=nr("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${PI.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),ioe=nr(J9,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ml,overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.select,t[r.variant],r.error&&t.error,{[`&.${PI.multiple}`]:t.multiple}]}})({}),Q9=nr("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${PI.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),aoe=nr(Q9,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${an(r.variant)}`],r.open&&t.iconOpen]}})({}),ooe=I.forwardRef(function(t,r){const{className:n,disabled:i,error:o,IconComponent:u,inputRef:a,variant:p="standard",...h}=t,m={...t,disabled:i,variant:p,error:o},v=noe(m);return ze.jsxs(I.Fragment,{children:[ze.jsx(ioe,{ownerState:m,className:Hr(v.select,n),disabled:i,ref:a||r,...h}),t.multiple?null:ze.jsx(aoe,{as:u,ownerState:m,className:v.icon})]})});var a4;const soe=nr("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:ml})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),loe=nr("legend",{name:"MuiNotchedOutlined",shouldForwardProp:ml})(xi(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function uoe(e){const{children:t,classes:r,className:n,label:i,notched:o,...u}=e,a=i!=null&&i!=="",p={...e,notched:o,withLabel:a};return ze.jsx(soe,{"aria-hidden":!0,className:n,ownerState:p,...u,children:ze.jsx(loe,{ownerState:p,children:a?ze.jsx("span",{children:i}):a4||(a4=ze.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const coe=e=>{const{classes:t}=e,n=Gn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Qre,t);return{...t,...n}},foe=nr(Bx,{shouldForwardProp:e=>ml(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Nx})(xi(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${nf.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${nf.focused} .${nf.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(kl()).map(([r])=>({props:{color:r},style:{[`&.${nf.focused} .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette[r].main}}})),{props:{},style:{[`&.${nf.error} .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${nf.disabled} .${nf.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:r})=>r.startAdornment,style:{paddingLeft:14}},{props:({ownerState:r})=>r.endAdornment,style:{paddingRight:14}},{props:({ownerState:r})=>r.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:r,size:n})=>r.multiline&&n==="small",style:{padding:"8.5px 14px"}}]}})),hoe=nr(uoe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(xi(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),doe=nr(jx,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Fx})(xi(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),TI=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:u="input",label:a,multiline:p=!1,notched:h,slots:m={},slotProps:v={},type:w="text",...x}=n,P=coe(n),T=ad(),R=wg({props:n,muiFormControl:T,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),k={...n,color:R.color||"primary",disabled:R.disabled,error:R.error,focused:R.focused,formControl:T,fullWidth:o,hiddenLabel:R.hiddenLabel,multiline:p,size:R.size,type:w},N=m.root??i.Root??foe,F=m.input??i.Input??doe,[D,U]=Kn("notchedOutline",{elementType:hoe,className:P.notchedOutline,shouldForwardComponentProp:!0,ownerState:k,externalForwardedProps:{slots:m,slotProps:v},additionalProps:{label:a!=null&&a!==""&&R.required?ze.jsxs(I.Fragment,{children:[a," ","*"]}):a}});return ze.jsx(vI,{slots:{root:N,input:F},slotProps:v,renderSuffix:B=>ze.jsx(D,{...U,notched:typeof h<"u"?h:!!(B.startAdornment||B.filled||B.focused)}),fullWidth:o,inputComponent:u,multiline:p,ref:r,type:w,...x,classes:{...P,notchedOutline:null}})});TI.muiName="Input";function eq(e){return Vn("MuiSelect",e)}const My=Bn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var o4;const poe=nr(J9,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`&.${My.select}`]:t.select},{[`&.${My.select}`]:t[r.variant]},{[`&.${My.error}`]:t.error},{[`&.${My.multiple}`]:t.multiple}]}})({[`&.${My.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),moe=nr(Q9,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,r.variant&&t[`icon${an(r.variant)}`],r.open&&t.iconOpen]}})({}),goe=nr("input",{shouldForwardProp:e=>m9(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function s4(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function yoe(e){return e==null||typeof e=="string"&&!e.trim()}const voe=e=>{const{classes:t,variant:r,disabled:n,multiple:i,open:o,error:u}=e,a={select:["select",r,n&&"disabled",i&&"multiple",u&&"error"],icon:["icon",`icon${an(r)}`,o&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return Gn(a,eq,t)},boe=I.forwardRef(function(t,r){const{"aria-describedby":n,"aria-label":i,autoFocus:o,autoWidth:u,children:a,className:p,defaultOpen:h,defaultValue:m,disabled:v,displayEmpty:w,error:x=!1,IconComponent:P,inputRef:T,labelId:R,MenuProps:k={},multiple:N,name:F,onBlur:D,onChange:U,onClose:B,onFocus:Z,onOpen:J,open:X,readOnly:le,renderValue:H,required:G,SelectDisplayProps:ae={},tabIndex:se,type:ue,value:me,variant:Ce="standard",...pe}=t,[Ee,Fe]=W_({controlled:me,default:m,name:"Select"}),[Ke,fe]=W_({controlled:X,default:h,name:"Select"}),_e=I.useRef(null),Pe=I.useRef(null),[ke,$e]=I.useState(null),{current:ht}=I.useRef(X!=null),[Ot,mt]=I.useState(),nt=So(r,T),Nt=I.useCallback(Ae=>{Pe.current=Ae,Ae&&$e(Ae)},[]),kt=ke?.parentNode;I.useImperativeHandle(nt,()=>({focus:()=>{Pe.current.focus()},node:_e.current,value:Ee}),[Ee]),I.useEffect(()=>{h&&Ke&&ke&&!ht&&(mt(u?null:kt.clientWidth),Pe.current.focus())},[ke,u]),I.useEffect(()=>{o&&Pe.current.focus()},[o]),I.useEffect(()=>{if(!R)return;const Ae=pl(Pe.current).getElementById(R);if(Ae){const Ue=()=>{getSelection().isCollapsed&&Pe.current.focus()};return Ae.addEventListener("click",Ue),()=>{Ae.removeEventListener("click",Ue)}}},[R]);const It=(Ae,Ue)=>{Ae?J&&J(Ue):B&&B(Ue),ht||(mt(u?null:kt.clientWidth),fe(Ae))},gt=Ae=>{Ae.button===0&&(Ae.preventDefault(),Pe.current.focus(),It(!0,Ae))},Le=Ae=>{It(!1,Ae)},pr=I.Children.toArray(a),hr=Ae=>{const Ue=pr.find(tt=>tt.props.value===Ae.target.value);Ue!==void 0&&(Fe(Ue.props.value),U&&U(Ae,Ue))},vr=Ae=>Ue=>{let tt;if(Ue.currentTarget.hasAttribute("tabindex")){if(N){tt=Array.isArray(Ee)?Ee.slice():[];const _t=Ee.indexOf(Ae.props.value);_t===-1?tt.push(Ae.props.value):tt.splice(_t,1)}else tt=Ae.props.value;if(Ae.props.onClick&&Ae.props.onClick(Ue),Ee!==tt&&(Fe(tt),U)){const _t=Ue.nativeEvent||Ue,Mt=new _t.constructor(_t.type,_t);Object.defineProperty(Mt,"target",{writable:!0,value:{value:tt,name:F}}),U(Mt,Ae)}N||It(!1,Ue)}},Qt=Ae=>{le||[" ","ArrowUp","ArrowDown","Enter"].includes(Ae.key)&&(Ae.preventDefault(),It(!0,Ae))},qe=ke!==null&&Ke,rt=Ae=>{!qe&&D&&(Object.defineProperty(Ae,"target",{writable:!0,value:{value:Ee,name:F}}),D(Ae))};delete pe["aria-invalid"];let ct,Ft;const Yt=[];let Wt=!1;(Q_({value:Ee})||w)&&(H?ct=H(Ee):Wt=!0);const ur=pr.map(Ae=>{if(!I.isValidElement(Ae))return null;let Ue;if(N){if(!Array.isArray(Ee))throw new Error(ch(2));Ue=Ee.some(tt=>s4(tt,Ae.props.value)),Ue&&Wt&&Yt.push(Ae.props.children)}else Ue=s4(Ee,Ae.props.value),Ue&&Wt&&(Ft=Ae.props.children);return I.cloneElement(Ae,{"aria-selected":Ue?"true":"false",onClick:vr(Ae),onKeyUp:tt=>{tt.key===" "&&tt.preventDefault(),Ae.props.onKeyUp&&Ae.props.onKeyUp(tt)},role:"option",selected:Ue,value:void 0,"data-value":Ae.props.value})});Wt&&(N?Yt.length===0?ct=null:ct=Yt.reduce((Ae,Ue,tt)=>(Ae.push(Ue),tt<Yt.length-1&&Ae.push(", "),Ae),[]):ct=Ft);let br=Ot;!u&&ht&&ke&&(br=kt.clientWidth);let xr;typeof se<"u"?xr=se:xr=v?null:0;const Rr=ae.id||(F?`mui-component-select-${F}`:void 0),wr={...t,variant:Ce,value:Ee,open:qe,error:x},fr=voe(wr),bt={...k.PaperProps,...typeof k.slotProps?.paper=="function"?k.slotProps.paper(wr):k.slotProps?.paper},ve={...k.MenuListProps,...typeof k.slotProps?.list=="function"?k.slotProps.list(wr):k.slotProps?.list},xe=xp();return ze.jsxs(I.Fragment,{children:[ze.jsx(poe,{as:"div",ref:Nt,tabIndex:xr,role:"combobox","aria-controls":qe?xe:void 0,"aria-disabled":v?"true":void 0,"aria-expanded":qe?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[R,Rr].filter(Boolean).join(" ")||void 0,"aria-describedby":n,"aria-required":G?"true":void 0,"aria-invalid":x?"true":void 0,onKeyDown:Qt,onMouseDown:v||le?null:gt,onBlur:rt,onFocus:Z,...ae,ownerState:wr,className:Hr(ae.className,fr.select,p),id:Rr,children:yoe(ct)?o4||(o4=ze.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):ct}),ze.jsx(goe,{"aria-invalid":x,value:Array.isArray(Ee)?Ee.join(","):Ee,name:F,ref:_e,"aria-hidden":!0,onChange:hr,tabIndex:-1,disabled:v,className:fr.nativeInput,autoFocus:o,required:G,...pe,ownerState:wr}),ze.jsx(moe,{as:P,className:fr.icon,ownerState:wr}),ze.jsx(CI,{id:`menu-${F||""}`,anchorEl:kt,open:qe,onClose:Le,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...k,slotProps:{...k.slotProps,list:{"aria-labelledby":R,role:"listbox","aria-multiselectable":N?"true":void 0,disableListWrap:!0,id:xe,...ve},paper:{...bt,style:{minWidth:br,...bt!=null?bt.style:null}}},children:ur})]})}),_oe=e=>{const{classes:t}=e,n=Gn({root:["root"]},eq,t);return{...t,...n}},II={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>ml(e)&&e!=="variant"},xoe=nr(SI,II)(""),woe=nr(TI,II)(""),Soe=nr(wI,II)(""),tq=I.forwardRef(function(t,r){const n=Xn({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:o,classes:u={},className:a,defaultOpen:p=!1,displayEmpty:h=!1,IconComponent:m=tne,id:v,input:w,inputProps:x,label:P,labelId:T,MenuProps:R,multiple:k=!1,native:N=!1,onClose:F,onOpen:D,open:U,renderValue:B,SelectDisplayProps:Z,variant:J="outlined",...X}=n,le=N?ooe:boe,H=ad(),G=wg({props:n,muiFormControl:H,states:["variant","error"]}),ae=G.variant||J,se={...n,variant:ae,classes:u},ue=_oe(se),{root:me,...Ce}=ue,pe=w||{standard:ze.jsx(xoe,{ownerState:se}),outlined:ze.jsx(woe,{label:P,ownerState:se}),filled:ze.jsx(Soe,{ownerState:se})}[ae],Ee=So(r,id(pe));return ze.jsx(I.Fragment,{children:I.cloneElement(pe,{inputComponent:le,inputProps:{children:o,error:G.error,IconComponent:m,variant:ae,type:void 0,multiple:k,...N?{id:v}:{autoWidth:i,defaultOpen:p,displayEmpty:h,labelId:T,MenuProps:R,onClose:F,onOpen:D,open:U,renderValue:B,SelectDisplayProps:{id:v,...Z}},...x,classes:x?es(Ce,x.classes):Ce,...w?w.props.inputProps:{}},...(k&&N||h)&&ae==="outlined"?{notched:!0}:{},ref:Ee,className:Hr(pe.props.className,a,ue.root),...!w&&{variant:ae},...X})})});tq.muiName="Select";function Eoe(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:r=!1,onClose:n,open:i,resumeHideDuration:o}=e,u=Qd();I.useEffect(()=>{if(!i)return;function k(N){N.defaultPrevented||N.key==="Escape"&&n?.(N,"escapeKeyDown")}return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}},[i,n]);const a=Zu((k,N)=>{n?.(k,N)}),p=Zu(k=>{!n||k==null||u.start(k,()=>{a(null,"timeout")})});I.useEffect(()=>(i&&p(t),u.clear),[i,t,p,u]);const h=k=>{n?.(k,"clickaway")},m=u.clear,v=I.useCallback(()=>{t!=null&&p(o??t*.5)},[t,o,p]),w=k=>N=>{const F=k.onBlur;F?.(N),v()},x=k=>N=>{const F=k.onFocus;F?.(N),m()},P=k=>N=>{const F=k.onMouseEnter;F?.(N),m()},T=k=>N=>{const F=k.onMouseLeave;F?.(N),v()};return I.useEffect(()=>{if(!r&&i)return window.addEventListener("focus",v),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",v),window.removeEventListener("blur",m)}},[r,i,v,m]),{getRootProps:(k={})=>{const N={...K_(e),...K_(k)};return{role:"presentation",...k,...N,onBlur:w(N),onFocus:x(N),onMouseEnter:P(N),onMouseLeave:T(N)}},onClickAway:h}}function Coe(e){return Vn("MuiSnackbarContent",e)}Bn("MuiSnackbarContent",["root","message","action"]);const Aoe=e=>{const{classes:t}=e;return Gn({root:["root"],action:["action"],message:["message"]},Coe,t)},Poe=nr(Lc,{name:"MuiSnackbarContent",slot:"Root"})(xi(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98;return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(MP(e.palette.background.default,t)),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:MP(e.palette.background.default,t),display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),Toe=nr("div",{name:"MuiSnackbarContent",slot:"Message"})({padding:"8px 0"}),Ioe=nr("div",{name:"MuiSnackbarContent",slot:"Action"})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Moe=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiSnackbarContent"}),{action:i,className:o,message:u,role:a="alert",...p}=n,h=n,m=Aoe(h);return ze.jsxs(Poe,{role:a,elevation:6,className:Hr(m.root,o),ownerState:h,ref:r,...p,children:[ze.jsx(Toe,{className:m.message,ownerState:h,children:u}),i?ze.jsx(Ioe,{className:m.action,ownerState:h,children:i}):null]})});function Roe(e){return Vn("MuiSnackbar",e)}Bn("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Ooe=e=>{const{classes:t,anchorOrigin:r}=e,n={root:["root",`anchorOrigin${an(r.vertical)}${an(r.horizontal)}`]};return Gn(n,Roe,t)},koe=nr("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`anchorOrigin${an(r.anchorOrigin.vertical)}${an(r.anchorOrigin.horizontal)}`]]}})(xi(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Loe=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiSnackbar"}),i=wf(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:u,anchorOrigin:{vertical:a,horizontal:p}={vertical:"bottom",horizontal:"left"},autoHideDuration:h=null,children:m,className:v,ClickAwayListenerProps:w,ContentProps:x,disableWindowBlurListener:P=!1,message:T,onBlur:R,onClose:k,onFocus:N,onMouseEnter:F,onMouseLeave:D,open:U,resumeHideDuration:B,slots:Z={},slotProps:J={},TransitionComponent:X,transitionDuration:le=o,TransitionProps:{onEnter:H,onExited:G,...ae}={},...se}=n,ue={...n,anchorOrigin:{vertical:a,horizontal:p},autoHideDuration:h,disableWindowBlurListener:P,TransitionComponent:X,transitionDuration:le},me=Ooe(ue),{getRootProps:Ce,onClickAway:pe}=Eoe({...ue}),[Ee,Fe]=I.useState(!0),Ke=It=>{Fe(!0),G&&G(It)},fe=(It,gt)=>{Fe(!1),H&&H(It,gt)},_e={slots:{transition:X,...Z},slotProps:{content:x,clickAwayListener:w,transition:ae,...J}},[Pe,ke]=Kn("root",{ref:r,className:[me.root,v],elementType:koe,getSlotProps:Ce,externalForwardedProps:{..._e,...se},ownerState:ue}),[$e,{ownerState:ht,...Ot}]=Kn("clickAwayListener",{elementType:Vne,externalForwardedProps:_e,getSlotProps:It=>({onClickAway:(...gt)=>{const Le=gt[0];It.onClickAway?.(...gt),!Le?.defaultMuiPrevented&&pe(...gt)}}),ownerState:ue}),[mt,nt]=Kn("content",{elementType:Moe,shouldForwardComponentProp:!0,externalForwardedProps:_e,additionalProps:{message:T,action:u},ownerState:ue}),[Nt,kt]=Kn("transition",{elementType:t0,externalForwardedProps:_e,getSlotProps:It=>({onEnter:(...gt)=>{It.onEnter?.(...gt),fe(...gt)},onExited:(...gt)=>{It.onExited?.(...gt),Ke(...gt)}}),additionalProps:{appear:!0,in:U,timeout:le,direction:a==="top"?"down":"up"},ownerState:ue});return!U&&Ee?null:ze.jsx($e,{...Ot,...Z.clickAwayListener&&{ownerState:ht},children:ze.jsx(Pe,{...ke,children:ze.jsx(Nt,{...kt,children:m||ze.jsx(mt,{...nt})})})})});function Doe(e){return Vn("MuiTooltip",e)}const bo=Bn("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Noe(e){return Math.round(e*1e5)/1e5}const Foe=e=>{const{classes:t,disableInteractive:r,arrow:n,touch:i,placement:o}=e,u={popper:["popper",!r&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",i&&"touch",`tooltipPlacement${an(o.split("-")[0])}`],arrow:["arrow"]};return Gn(u,Doe,t)},Boe=nr(F9,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.popper,!r.disableInteractive&&t.popperInteractive,r.arrow&&t.popperArrow,!r.open&&t.popperClose]}})(xi(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${bo.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${bo.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${bo.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${bo.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${bo.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${bo.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${bo.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${bo.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),joe=nr("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.tooltip,r.touch&&t.touch,r.arrow&&t.tooltipArrow,t[`tooltipPlacement${an(r.placement.split("-")[0])}`]]}})(xi(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${bo.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${bo.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${bo.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${bo.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${Noe(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${bo.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${bo.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${bo.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${bo.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${bo.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${bo.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${bo.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${bo.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${bo.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${bo.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),zoe=nr("span",{name:"MuiTooltip",slot:"Arrow"})(xi(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:e.alpha(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let Rb=!1;const l4=new Ox;let Ry={x:0,y:0};function Ob(e,t){return(r,...n)=>{t&&t(r,...n),e(r,...n)}}const Sg=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiTooltip"}),{arrow:i=!1,children:o,classes:u,components:a={},componentsProps:p={},describeChild:h=!1,disableFocusListener:m=!1,disableHoverListener:v=!1,disableInteractive:w=!1,disableTouchListener:x=!1,enterDelay:P=100,enterNextDelay:T=0,enterTouchDelay:R=700,followCursor:k=!1,id:N,leaveDelay:F=0,leaveTouchDelay:D=1500,onClose:U,onOpen:B,open:Z,placement:J="bottom",PopperComponent:X,PopperProps:le={},slotProps:H={},slots:G={},title:ae,TransitionComponent:se,TransitionProps:ue,...me}=n,Ce=I.isValidElement(o)?o:ze.jsx("span",{children:o}),pe=wf(),Ee=Px(),[Fe,Ke]=I.useState(),[fe,_e]=I.useState(null),Pe=I.useRef(!1),ke=w||k,$e=Qd(),ht=Qd(),Ot=Qd(),mt=Qd(),[nt,Nt]=W_({controlled:Z,default:!1,name:"Tooltip",state:"open"});let kt=nt;const It=xp(N),gt=I.useRef(),Le=Zu(()=>{gt.current!==void 0&&(document.body.style.WebkitUserSelect=gt.current,gt.current=void 0),mt.clear()});I.useEffect(()=>Le,[Le]);const pr=Tr=>{l4.clear(),Rb=!0,Nt(!0),B&&!kt&&B(Tr)},hr=Zu(Tr=>{l4.start(800+F,()=>{Rb=!1}),Nt(!1),U&&kt&&U(Tr),$e.start(pe.transitions.duration.shortest,()=>{Pe.current=!1})}),vr=Tr=>{Pe.current&&Tr.type!=="touchstart"||(Fe&&Fe.removeAttribute("title"),ht.clear(),Ot.clear(),P||Rb&&T?ht.start(Rb?T:P,()=>{pr(Tr)}):pr(Tr))},Qt=Tr=>{ht.clear(),Ot.start(F,()=>{hr(Tr)})},[,qe]=I.useState(!1),rt=Tr=>{X_(Tr.target)||(qe(!1),Qt(Tr))},ct=Tr=>{Fe||Ke(Tr.currentTarget),X_(Tr.target)&&(qe(!0),vr(Tr))},Ft=Tr=>{Pe.current=!0;const Ye=Ce.props;Ye.onTouchStart&&Ye.onTouchStart(Tr)},Yt=Tr=>{Ft(Tr),Ot.clear(),$e.clear(),Le(),gt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",mt.start(R,()=>{document.body.style.WebkitUserSelect=gt.current,vr(Tr)})},Wt=Tr=>{Ce.props.onTouchEnd&&Ce.props.onTouchEnd(Tr),Le(),Ot.start(D,()=>{hr(Tr)})};I.useEffect(()=>{if(!kt)return;function Tr(Ye){Ye.key==="Escape"&&hr(Ye)}return document.addEventListener("keydown",Tr),()=>{document.removeEventListener("keydown",Tr)}},[hr,kt]);const ur=So(id(Ce),Ke,r);!ae&&ae!==0&&(kt=!1);const br=I.useRef(),xr=Tr=>{const Ye=Ce.props;Ye.onMouseMove&&Ye.onMouseMove(Tr),Ry={x:Tr.clientX,y:Tr.clientY},br.current&&br.current.update()},Rr={},wr=typeof ae=="string";h?(Rr.title=!kt&&wr&&!v?ae:null,Rr["aria-describedby"]=kt?It:null):(Rr["aria-label"]=wr?ae:null,Rr["aria-labelledby"]=kt&&!wr?It:null);const fr={...Rr,...me,...Ce.props,className:Hr(me.className,Ce.props.className),onTouchStart:Ft,ref:ur,...k?{onMouseMove:xr}:{}},bt={};x||(fr.onTouchStart=Yt,fr.onTouchEnd=Wt),v||(fr.onMouseOver=Ob(vr,fr.onMouseOver),fr.onMouseLeave=Ob(Qt,fr.onMouseLeave),ke||(bt.onMouseOver=vr,bt.onMouseLeave=Qt)),m||(fr.onFocus=Ob(ct,fr.onFocus),fr.onBlur=Ob(rt,fr.onBlur),ke||(bt.onFocus=ct,bt.onBlur=rt));const ve={...n,isRtl:Ee,arrow:i,disableInteractive:ke,placement:J,PopperComponentProp:X,touch:Pe.current},xe=typeof H.popper=="function"?H.popper(ve):H.popper,Ae=I.useMemo(()=>{let Tr=[{name:"arrow",enabled:!!fe,options:{element:fe,padding:4}}];return le.popperOptions?.modifiers&&(Tr=Tr.concat(le.popperOptions.modifiers)),xe?.popperOptions?.modifiers&&(Tr=Tr.concat(xe.popperOptions.modifiers)),{...le.popperOptions,...xe?.popperOptions,modifiers:Tr}},[fe,le.popperOptions,xe?.popperOptions]),Ue=Foe(ve),tt=typeof H.transition=="function"?H.transition(ve):H.transition,_t={slots:{popper:a.Popper,transition:a.Transition??se,tooltip:a.Tooltip,arrow:a.Arrow,...G},slotProps:{arrow:H.arrow??p.arrow,popper:{...le,...xe??p.popper},tooltip:H.tooltip??p.tooltip,transition:{...ue,...tt??p.transition}}},[Mt,Pt]=Kn("popper",{elementType:Boe,externalForwardedProps:_t,ownerState:ve,className:Hr(Ue.popper,le?.className)}),[Kt,zt]=Kn("transition",{elementType:t0,externalForwardedProps:_t,ownerState:ve}),[Ct,Gt]=Kn("tooltip",{elementType:joe,className:Ue.tooltip,externalForwardedProps:_t,ownerState:ve}),[vt,Pr]=Kn("arrow",{elementType:zoe,className:Ue.arrow,externalForwardedProps:_t,ownerState:ve,ref:_e});return ze.jsxs(I.Fragment,{children:[I.cloneElement(Ce,fr),ze.jsx(Mt,{as:X??F9,placement:J,anchorEl:k?{getBoundingClientRect:()=>({top:Ry.y,left:Ry.x,right:Ry.x,bottom:Ry.y,width:0,height:0})}:Fe,popperRef:br,open:Fe?kt:!1,id:It,transition:!0,...bt,...Pt,popperOptions:Ae,children:({TransitionProps:Tr})=>ze.jsx(Kt,{timeout:pe.transitions.duration.shorter,...Tr,...zt,children:ze.jsxs(Ct,{...Gt,children:[ae,i?ze.jsx(vt,{...Pr}):null]})})})]})}),MI=TQ({createStyledComponent:nr("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>Xn({props:e,name:"MuiStack"})});function $oe(e){return Vn("MuiToolbar",e)}Bn("MuiToolbar",["root","gutters","regular","dense"]);const qoe=e=>{const{classes:t,disableGutters:r,variant:n}=e;return Gn({root:["root",!r&&"gutters",n]},$oe,t)},Uoe=nr("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})(xi(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),RI=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:u=!1,variant:a="regular",...p}=n,h={...n,component:o,disableGutters:u,variant:a},m=qoe(h);return ze.jsx(Uoe,{as:o,className:Hr(m.root,i),ref:r,ownerState:h,...p})});function Voe(e){return Vn("MuiTextField",e)}Bn("MuiTextField",["root"]);const Goe={standard:SI,filled:wI,outlined:TI},Hoe=e=>{const{classes:t}=e;return Gn({root:["root"]},Voe,t)},Woe=nr(tae,{name:"MuiTextField",slot:"Root"})({}),rq=I.forwardRef(function(t,r){const n=Xn({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:u,className:a,color:p="primary",defaultValue:h,disabled:m=!1,error:v=!1,FormHelperTextProps:w,fullWidth:x=!1,helperText:P,id:T,InputLabelProps:R,inputProps:k,InputProps:N,inputRef:F,label:D,maxRows:U,minRows:B,multiline:Z=!1,name:J,onBlur:X,onChange:le,onFocus:H,placeholder:G,required:ae=!1,rows:se,select:ue=!1,SelectProps:me,slots:Ce={},slotProps:pe={},type:Ee,value:Fe,variant:Ke="outlined",...fe}=n,_e={...n,autoFocus:o,color:p,disabled:m,error:v,fullWidth:x,multiline:Z,required:ae,select:ue,variant:Ke},Pe=Hoe(_e),ke=xp(T),$e=P&&ke?`${ke}-helper-text`:void 0,ht=D&&ke?`${ke}-label`:void 0,Ot=Goe[Ke],mt={slots:Ce,slotProps:{input:N,inputLabel:R,htmlInput:k,formHelperText:w,select:me,...pe}},nt={},Nt=mt.slotProps.inputLabel;Ke==="outlined"&&(Nt&&typeof Nt.shrink<"u"&&(nt.notched=Nt.shrink),nt.label=D),ue&&((!me||!me.native)&&(nt.id=void 0),nt["aria-describedby"]=void 0);const[kt,It]=Kn("root",{elementType:Woe,shouldForwardComponentProp:!0,externalForwardedProps:{...mt,...fe},ownerState:_e,className:Hr(Pe.root,a),ref:r,additionalProps:{disabled:m,error:v,fullWidth:x,required:ae,color:p,variant:Ke}}),[gt,Le]=Kn("input",{elementType:Ot,externalForwardedProps:mt,additionalProps:nt,ownerState:_e}),[pr,hr]=Kn("inputLabel",{elementType:wae,externalForwardedProps:mt,ownerState:_e}),[vr,Qt]=Kn("htmlInput",{elementType:"input",externalForwardedProps:mt,ownerState:_e}),[qe,rt]=Kn("formHelperText",{elementType:aae,externalForwardedProps:mt,ownerState:_e}),[ct,Ft]=Kn("select",{elementType:tq,externalForwardedProps:mt,ownerState:_e}),Yt=ze.jsx(gt,{"aria-describedby":$e,autoComplete:i,autoFocus:o,defaultValue:h,fullWidth:x,multiline:Z,name:J,rows:se,maxRows:U,minRows:B,type:Ee,value:Fe,id:ke,inputRef:F,onBlur:X,onChange:le,onFocus:H,placeholder:G,inputProps:Qt,slots:{input:Ce.htmlInput?vr:void 0},...Le});return ze.jsxs(kt,{...It,children:[D!=null&&D!==""&&ze.jsx(pr,{htmlFor:ke,id:ht,...hr,children:D}),ue?ze.jsx(ct,{"aria-describedby":$e,id:ke,labelId:ht,value:Fe,input:Yt,...Ft,children:u}):Yt,P&&ze.jsx(qe,{id:$e,...rt,children:P})]})}),Du=t9({themeId:Wu});function Zoe(e,t){const{disableHysteresis:r=!1,threshold:n=100,target:i}=t,o=e.current;return i&&(e.current=i.pageYOffset!==void 0?i.pageYOffset:i.scrollTop),!r&&o!==void 0&&e.current<o?!1:e.current>n}const Koe=typeof window<"u"?window:null;function nq(e={}){const{getTrigger:t=Zoe,target:r=Koe,...n}=e,i=I.useRef(),[o,u]=I.useState(()=>t(i,n));return I.useEffect(()=>{if(r===null)return u(!1);const a=()=>{u(t(i,{target:r,...n}))};return a(),r.addEventListener("scroll",a,{passive:!0}),()=>{r.removeEventListener("scroll",a,{passive:!0})}},[r,t,JSON.stringify(n)]),o}function ha(e){"@babel/helpers - typeof";return ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ha(e)}var Rc=Uint8Array,Iu=Uint16Array,OI=Int32Array,kI=new Rc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),LI=new Rc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u4=new Rc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iq=function(e,t){for(var r=new Iu(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new OI(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},aq=iq(kI,2),Xoe=aq.b,WP=aq.r;Xoe[28]=258,WP[258]=28;var Yoe=iq(LI,0),c4=Yoe.r,ZP=new Iu(32768);for(var Ga=0;Ga<32768;++Ga){var kh=(Ga&43690)>>1|(Ga&21845)<<1;kh=(kh&52428)>>2|(kh&13107)<<2,kh=(kh&61680)>>4|(kh&3855)<<4,ZP[Ga]=((kh&65280)>>8|(kh&255)<<8)>>1}var wv=(function(e,t,r){for(var n=e.length,i=0,o=new Iu(t);i<n;++i)e[i]&&++o[e[i]-1];var u=new Iu(t);for(i=1;i<t;++i)u[i]=u[i-1]+o[i-1]<<1;var a;if(r){a=new Iu(1<<t);var p=15-t;for(i=0;i<n;++i)if(e[i])for(var h=i<<4|e[i],m=t-e[i],v=u[e[i]-1]++<<m,w=v|(1<<m)-1;v<=w;++v)a[ZP[v]>>p]=h}else for(a=new Iu(n),i=0;i<n;++i)e[i]&&(a[i]=ZP[u[e[i]-1]++]>>15-e[i]);return a}),fp=new Rc(288);for(var Ga=0;Ga<144;++Ga)fp[Ga]=8;for(var Ga=144;Ga<256;++Ga)fp[Ga]=9;for(var Ga=256;Ga<280;++Ga)fp[Ga]=7;for(var Ga=280;Ga<288;++Ga)fp[Ga]=8;var e1=new Rc(32);for(var Ga=0;Ga<32;++Ga)e1[Ga]=5;var Joe=wv(fp,9,0),Qoe=wv(e1,5,0),oq=function(e){return(e+7)/8|0},ese=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Rc(e.subarray(t,r))},Hf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Oy=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},Uw=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return{t:lq,l:0};if(i==1){var u=new Rc(r[0].s+1);return u[r[0].s]=1,{t:u,l:1}}r.sort(function(U,B){return U.f-B.f}),r.push({s:-1,f:25001});var a=r[0],p=r[1],h=0,m=1,v=2;for(r[0]={s:-1,f:a.f+p.f,l:a,r:p};m!=i-1;)a=r[r[h].f<r[v].f?h++:v++],p=r[h!=m&&r[h].f<r[v].f?h++:v++],r[m++]={s:-1,f:a.f+p.f,l:a,r:p};for(var w=o[0].s,n=1;n<i;++n)o[n].s>w&&(w=o[n].s);var x=new Iu(w+1),P=KP(r[m-1],x,0);if(P>t){var n=0,T=0,R=P-t,k=1<<R;for(o.sort(function(B,Z){return x[Z.s]-x[B.s]||B.f-Z.f});n<i;++n){var N=o[n].s;if(x[N]>t)T+=k-(1<<P-x[N]),x[N]=t;else break}for(T>>=R;T>0;){var F=o[n].s;x[F]<t?T-=1<<t-x[F]++-1:++n}for(;n>=0&&T;--n){var D=o[n].s;x[D]==t&&(--x[D],++T)}P=t}return{t:new Rc(x),l:P}},KP=function(e,t,r){return e.s==-1?Math.max(KP(e.l,t,r+1),KP(e.r,t,r+1)):t[e.s]=r},f4=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Iu(++t),n=0,i=e[0],o=1,u=function(p){r[n++]=p},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(i),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(i);o=1,i=e[a]}return{c:r.subarray(0,n),n:t}},ky=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},sq=function(e,t,r){var n=r.length,i=oq(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<n;++o)e[i+o+4]=r[o];return(i+4+n)*8},h4=function(e,t,r,n,i,o,u,a,p,h,m){Hf(t,m++,r),++i[256];for(var v=Uw(i,15),w=v.t,x=v.l,P=Uw(o,15),T=P.t,R=P.l,k=f4(w),N=k.c,F=k.n,D=f4(T),U=D.c,B=D.n,Z=new Iu(19),J=0;J<N.length;++J)++Z[N[J]&31];for(var J=0;J<U.length;++J)++Z[U[J]&31];for(var X=Uw(Z,7),le=X.t,H=X.l,G=19;G>4&&!le[u4[G-1]];--G);var ae=h+5<<3,se=ky(i,fp)+ky(o,e1)+u,ue=ky(i,w)+ky(o,T)+u+14+3*G+ky(Z,le)+2*Z[16]+3*Z[17]+7*Z[18];if(p>=0&&ae<=se&&ae<=ue)return sq(t,m,e.subarray(p,p+h));var me,Ce,pe,Ee;if(Hf(t,m,1+(ue<se)),m+=2,ue<se){me=wv(w,x,0),Ce=w,pe=wv(T,R,0),Ee=T;var Fe=wv(le,H,0);Hf(t,m,F-257),Hf(t,m+5,B-1),Hf(t,m+10,G-4),m+=14;for(var J=0;J<G;++J)Hf(t,m+3*J,le[u4[J]]);m+=3*G;for(var Ke=[N,U],fe=0;fe<2;++fe)for(var _e=Ke[fe],J=0;J<_e.length;++J){var Pe=_e[J]&31;Hf(t,m,Fe[Pe]),m+=le[Pe],Pe>15&&(Hf(t,m,_e[J]>>5&127),m+=_e[J]>>12)}}else me=Joe,Ce=fp,pe=Qoe,Ee=e1;for(var J=0;J<a;++J){var ke=n[J];if(ke>255){var Pe=ke>>18&31;Oy(t,m,me[Pe+257]),m+=Ce[Pe+257],Pe>7&&(Hf(t,m,ke>>23&31),m+=kI[Pe]);var $e=ke&31;Oy(t,m,pe[$e]),m+=Ee[$e],$e>3&&(Oy(t,m,ke>>5&8191),m+=LI[$e])}else Oy(t,m,me[ke]),m+=Ce[ke]}return Oy(t,m,me[256]),m+Ce[256]},tse=new OI([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),lq=new Rc(0),rse=function(e,t,r,n,i,o){var u=o.z||e.length,a=new Rc(n+u+5*(1+Math.ceil(u/7e3))+i),p=a.subarray(n,a.length-i),h=o.l,m=(o.r||0)&7;if(t){m&&(p[0]=o.r>>3);for(var v=tse[t-1],w=v>>13,x=v&8191,P=(1<<r)-1,T=o.p||new Iu(32768),R=o.h||new Iu(P+1),k=Math.ceil(r/3),N=2*k,F=function(gt){return(e[gt]^e[gt+1]<<k^e[gt+2]<<N)&P},D=new OI(25e3),U=new Iu(288),B=new Iu(32),Z=0,J=0,X=o.i||0,le=0,H=o.w||0,G=0;X+2<u;++X){var ae=F(X),se=X&32767,ue=R[ae];if(T[se]=ue,R[ae]=se,H<=X){var me=u-X;if((Z>7e3||le>24576)&&(me>423||!h)){m=h4(e,p,0,D,U,B,J,le,G,X-G,m),le=Z=J=0,G=X;for(var Ce=0;Ce<286;++Ce)U[Ce]=0;for(var Ce=0;Ce<30;++Ce)B[Ce]=0}var pe=2,Ee=0,Fe=x,Ke=se-ue&32767;if(me>2&&ae==F(X-Ke))for(var fe=Math.min(w,me)-1,_e=Math.min(32767,X),Pe=Math.min(258,me);Ke<=_e&&--Fe&&se!=ue;){if(e[X+pe]==e[X+pe-Ke]){for(var ke=0;ke<Pe&&e[X+ke]==e[X+ke-Ke];++ke);if(ke>pe){if(pe=ke,Ee=Ke,ke>fe)break;for(var $e=Math.min(Ke,ke-2),ht=0,Ce=0;Ce<$e;++Ce){var Ot=X-Ke+Ce&32767,mt=T[Ot],nt=Ot-mt&32767;nt>ht&&(ht=nt,ue=Ot)}}}se=ue,ue=T[se],Ke+=se-ue&32767}if(Ee){D[le++]=268435456|WP[pe]<<18|c4[Ee];var Nt=WP[pe]&31,kt=c4[Ee]&31;J+=kI[Nt]+LI[kt],++U[257+Nt],++B[kt],H=X+pe,++Z}else D[le++]=e[X],++U[e[X]]}}for(X=Math.max(X,H);X<u;++X)D[le++]=e[X],++U[e[X]];m=h4(e,p,h,D,U,B,J,le,G,X-G,m),h||(o.r=m&7|p[m/8|0]<<3,m-=7,o.h=R,o.p=T,o.i=X,o.w=H)}else{for(var X=o.w||0;X<u+h;X+=65535){var It=X+65535;It>=u&&(p[m/8|0]=h,It=u),m=sq(p,m+1,e.subarray(X,It))}o.i=u}return ese(a,0,n+oq(m)+i)},uq=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,o=r.length|0,u=0;u!=o;){for(var a=Math.min(u+2655,o);u<a;++u)i+=n+=r[u];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},nse=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),u=new Rc(o.length+e.length);u.set(o),u.set(e,o.length),e=u,i.w=o.length}return rse(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},cq=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},ise=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=uq();i.p(t.dictionary),cq(e,2,i.d())}};function XP(e,t){t||(t={});var r=uq();r.p(e);var n=nse(e,t,t.dictionary?6:2,4);return ise(n,t),cq(n,n.length-4,r.d()),n}var ase=typeof TextDecoder<"u"&&new TextDecoder,ose=0;try{ase.decode(lq,{stream:!0}),ose=1}catch{}function sse(e){if(Array.isArray(e))return e}function lse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,u,a=[],p=!0,h=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(p=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);p=!0);}catch(m){h=!0,i=m}finally{try{if(!p&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(h)throw i}}return a}}function d4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function use(e,t){if(e){if(typeof e=="string")return d4(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d4(e,t):void 0}}function cse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p4(e,t){return sse(e)||lse(e,t)||use(e,t)||cse()}function m4(e,t="utf8"){return new TextDecoder(t).decode(e)}const fse=new TextEncoder;function hse(e){return fse.encode(e)}const dse=1024*8,pse=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),Vw={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class DI{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=dse,r={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,o=t.byteLength-i;let u=i;(ArrayBuffer.isView(t)||t instanceof DI)&&(t.byteLength!==t.buffer.byteLength&&(u=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=Vw[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+n);if(this.littleEndian===pse&&r!=="uint8"&&r!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+n));a.reverse();const p=new Vw[r](a.buffer);return this.offset+=n,p.reverse(),p}const u=new Vw[r](o);return this.offset+=n,u}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return m4(this.readBytes(t))}decodeText(t=1,r="utf8"){return m4(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(hse(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Eg(e){let t=e.length;for(;--t>=0;)e[t]=0}const mse=3,gse=258,fq=29,yse=256,vse=yse+1+fq,hq=30,bse=512,_se=new Array((vse+2)*2);Eg(_se);const xse=new Array(hq*2);Eg(xse);const wse=new Array(bse);Eg(wse);const Sse=new Array(gse-mse+1);Eg(Sse);const Ese=new Array(fq);Eg(Ese);const Cse=new Array(hq);Eg(Cse);const Ase=(e,t,r,n)=>{let i=e&65535|0,o=e>>>16&65535|0,u=0;for(;r!==0;){u=r>2e3?2e3:r,r-=u;do i=i+t[n++]|0,o=o+i|0;while(--u);i%=65521,o%=65521}return i|o<<16|0};var YP=Ase;const Pse=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},Tse=new Uint32Array(Pse()),Ise=(e,t,r,n)=>{const i=Tse,o=n+r;e^=-1;for(let u=n;u<o;u++)e=e>>>8^i[(e^t[u])&255];return e^-1};var af=Ise,JP={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},dq={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Mse=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Rse=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)Mse(r,n)&&(e[n]=r[n])}}return e},Ose=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let u=e[n];r.set(u,i),i+=u.length}return r},pq={assign:Rse,flattenChunks:Ose};let mq=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{mq=!1}const r0=new Uint8Array(256);for(let e=0;e<256;e++)r0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;r0[254]=r0[254]=1;var kse=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,u=e.length,a=0;for(i=0;i<u;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<u&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<u&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|r&63):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|r&63):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|r&63);return t};const Lse=(e,t)=>{if(t<65534&&e.subarray&&mq)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var Dse=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const o=new Array(r*2);for(i=0,n=0;n<r;){let u=e[n++];if(u<128){o[i++]=u;continue}let a=r0[u];if(a>4){o[i++]=65533,n+=a-1;continue}for(u&=a===2?31:a===3?15:7;a>1&&n<r;)u=u<<6|e[n++]&63,a--;if(a>1){o[i++]=65533;continue}u<65536?o[i++]=u:(u-=65536,o[i++]=55296|u>>10&1023,o[i++]=56320|u&1023)}return Lse(o,i)},Nse=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+r0[e[r]]>t?r:t},QP={string2buf:kse,buf2string:Dse,utf8border:Nse};function Fse(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Bse=Fse;const kb=16209,jse=16191;var zse=function(t,r){let n,i,o,u,a,p,h,m,v,w,x,P,T,R,k,N,F,D,U,B,Z,J,X,le;const H=t.state;n=t.next_in,X=t.input,i=n+(t.avail_in-5),o=t.next_out,le=t.output,u=o-(r-t.avail_out),a=o+(t.avail_out-257),p=H.dmax,h=H.wsize,m=H.whave,v=H.wnext,w=H.window,x=H.hold,P=H.bits,T=H.lencode,R=H.distcode,k=(1<<H.lenbits)-1,N=(1<<H.distbits)-1;e:do{P<15&&(x+=X[n++]<<P,P+=8,x+=X[n++]<<P,P+=8),F=T[x&k];t:for(;;){if(D=F>>>24,x>>>=D,P-=D,D=F>>>16&255,D===0)le[o++]=F&65535;else if(D&16){U=F&65535,D&=15,D&&(P<D&&(x+=X[n++]<<P,P+=8),U+=x&(1<<D)-1,x>>>=D,P-=D),P<15&&(x+=X[n++]<<P,P+=8,x+=X[n++]<<P,P+=8),F=R[x&N];r:for(;;){if(D=F>>>24,x>>>=D,P-=D,D=F>>>16&255,D&16){if(B=F&65535,D&=15,P<D&&(x+=X[n++]<<P,P+=8,P<D&&(x+=X[n++]<<P,P+=8)),B+=x&(1<<D)-1,B>p){t.msg="invalid distance too far back",H.mode=kb;break e}if(x>>>=D,P-=D,D=o-u,B>D){if(D=B-D,D>m&&H.sane){t.msg="invalid distance too far back",H.mode=kb;break e}if(Z=0,J=w,v===0){if(Z+=h-D,D<U){U-=D;do le[o++]=w[Z++];while(--D);Z=o-B,J=le}}else if(v<D){if(Z+=h+v-D,D-=v,D<U){U-=D;do le[o++]=w[Z++];while(--D);if(Z=0,v<U){D=v,U-=D;do le[o++]=w[Z++];while(--D);Z=o-B,J=le}}}else if(Z+=v-D,D<U){U-=D;do le[o++]=w[Z++];while(--D);Z=o-B,J=le}for(;U>2;)le[o++]=J[Z++],le[o++]=J[Z++],le[o++]=J[Z++],U-=3;U&&(le[o++]=J[Z++],U>1&&(le[o++]=J[Z++]))}else{Z=o-B;do le[o++]=le[Z++],le[o++]=le[Z++],le[o++]=le[Z++],U-=3;while(U>2);U&&(le[o++]=le[Z++],U>1&&(le[o++]=le[Z++]))}}else if((D&64)===0){F=R[(F&65535)+(x&(1<<D)-1)];continue r}else{t.msg="invalid distance code",H.mode=kb;break e}break}}else if((D&64)===0){F=T[(F&65535)+(x&(1<<D)-1)];continue t}else if(D&32){H.mode=jse;break e}else{t.msg="invalid literal/length code",H.mode=kb;break e}break}}while(n<i&&o<a);U=P>>3,n-=U,P-=U<<3,x&=(1<<P)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<a?257+(a-o):257-(o-a),H.hold=x,H.bits=P};const um=15,g4=852,y4=592,v4=0,Gw=1,b4=2,$se=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),qse=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Use=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Vse=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Gse=(e,t,r,n,i,o,u,a)=>{const p=a.bits;let h=0,m=0,v=0,w=0,x=0,P=0,T=0,R=0,k=0,N=0,F,D,U,B,Z,J=null,X;const le=new Uint16Array(um+1),H=new Uint16Array(um+1);let G=null,ae,se,ue;for(h=0;h<=um;h++)le[h]=0;for(m=0;m<n;m++)le[t[r+m]]++;for(x=p,w=um;w>=1&&le[w]===0;w--);if(x>w&&(x=w),w===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(v=1;v<w&&le[v]===0;v++);for(x<v&&(x=v),R=1,h=1;h<=um;h++)if(R<<=1,R-=le[h],R<0)return-1;if(R>0&&(e===v4||w!==1))return-1;for(H[1]=0,h=1;h<um;h++)H[h+1]=H[h]+le[h];for(m=0;m<n;m++)t[r+m]!==0&&(u[H[t[r+m]]++]=m);if(e===v4?(J=G=u,X=20):e===Gw?(J=$se,G=qse,X=257):(J=Use,G=Vse,X=0),N=0,m=0,h=v,Z=o,P=x,T=0,U=-1,k=1<<x,B=k-1,e===Gw&&k>g4||e===b4&&k>y4)return 1;for(;;){ae=h-T,u[m]+1<X?(se=0,ue=u[m]):u[m]>=X?(se=G[u[m]-X],ue=J[u[m]-X]):(se=96,ue=0),F=1<<h-T,D=1<<P,v=D;do D-=F,i[Z+(N>>T)+D]=ae<<24|se<<16|ue|0;while(D!==0);for(F=1<<h-1;N&F;)F>>=1;if(F!==0?(N&=F-1,N+=F):N=0,m++,--le[h]===0){if(h===w)break;h=t[r+u[m]]}if(h>x&&(N&B)!==U){for(T===0&&(T=x),Z+=v,P=h-T,R=1<<P;P+T<w&&(R-=le[P+T],!(R<=0));)P++,R<<=1;if(k+=1<<P,e===Gw&&k>g4||e===b4&&k>y4)return 1;U=N&B,i[U]=x<<24|P<<16|Z-o|0}}return N!==0&&(i[Z+N]=h-T<<24|64<<16|0),a.bits=x,0};var Sv=Gse;const Hse=0,gq=1,yq=2,{Z_FINISH:_4,Z_BLOCK:Wse,Z_TREES:Lb,Z_OK:hp,Z_STREAM_END:Zse,Z_NEED_DICT:Kse,Z_STREAM_ERROR:Ju,Z_DATA_ERROR:vq,Z_MEM_ERROR:bq,Z_BUF_ERROR:Xse,Z_DEFLATED:x4}=dq,zx=16180,w4=16181,S4=16182,E4=16183,C4=16184,A4=16185,P4=16186,T4=16187,I4=16188,M4=16189,t1=16190,Wf=16191,Hw=16192,R4=16193,Ww=16194,O4=16195,k4=16196,L4=16197,D4=16198,Db=16199,Nb=16200,N4=16201,F4=16202,B4=16203,j4=16204,z4=16205,Zw=16206,$4=16207,q4=16208,eo=16209,_q=16210,xq=16211,Yse=852,Jse=592,Qse=15,ele=Qse,U4=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function tle(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const wp=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<zx||t.mode>xq?1:0},wq=e=>{if(wp(e))return Ju;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=zx,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Yse),t.distcode=t.distdyn=new Int32Array(Jse),t.sane=1,t.back=-1,hp},Sq=e=>{if(wp(e))return Ju;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,wq(e)},Eq=(e,t)=>{let r;if(wp(e))return Ju;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ju:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Sq(e))},Cq=(e,t)=>{if(!e)return Ju;const r=new tle;e.state=r,r.strm=e,r.window=null,r.mode=zx;const n=Eq(e,t);return n!==hp&&(e.state=null),n},rle=e=>Cq(e,ele);let V4=!0,Kw,Xw;const nle=e=>{if(V4){Kw=new Int32Array(512),Xw=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Sv(gq,e.lens,0,288,Kw,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Sv(yq,e.lens,0,32,Xw,0,e.work,{bits:5}),V4=!1}e.lencode=Kw,e.lenbits=9,e.distcode=Xw,e.distbits=5},Aq=(e,t,r,n)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},ile=(e,t)=>{let r,n,i,o,u,a,p,h,m,v,w,x,P,T,R=0,k,N,F,D,U,B,Z,J;const X=new Uint8Array(4);let le,H;const G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(wp(e)||!e.output||!e.input&&e.avail_in!==0)return Ju;r=e.state,r.mode===Wf&&(r.mode=Hw),u=e.next_out,i=e.output,p=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,h=r.hold,m=r.bits,v=a,w=p,J=hp;e:for(;;)switch(r.mode){case zx:if(r.wrap===0){r.mode=Hw;break}for(;m<16;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}if(r.wrap&2&&h===35615){r.wbits===0&&(r.wbits=15),r.check=0,X[0]=h&255,X[1]=h>>>8&255,r.check=af(r.check,X,2,0),h=0,m=0,r.mode=w4;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((h&255)<<8)+(h>>8))%31){e.msg="incorrect header check",r.mode=eo;break}if((h&15)!==x4){e.msg="unknown compression method",r.mode=eo;break}if(h>>>=4,m-=4,Z=(h&15)+8,r.wbits===0&&(r.wbits=Z),Z>15||Z>r.wbits){e.msg="invalid window size",r.mode=eo;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=h&512?M4:Wf,h=0,m=0;break;case w4:for(;m<16;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}if(r.flags=h,(r.flags&255)!==x4){e.msg="unknown compression method",r.mode=eo;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=eo;break}r.head&&(r.head.text=h>>8&1),r.flags&512&&r.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,r.check=af(r.check,X,2,0)),h=0,m=0,r.mode=S4;case S4:for(;m<32;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}r.head&&(r.head.time=h),r.flags&512&&r.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,X[2]=h>>>16&255,X[3]=h>>>24&255,r.check=af(r.check,X,4,0)),h=0,m=0,r.mode=E4;case E4:for(;m<16;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}r.head&&(r.head.xflags=h&255,r.head.os=h>>8),r.flags&512&&r.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,r.check=af(r.check,X,2,0)),h=0,m=0,r.mode=C4;case C4:if(r.flags&1024){for(;m<16;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}r.length=h,r.head&&(r.head.extra_len=h),r.flags&512&&r.wrap&4&&(X[0]=h&255,X[1]=h>>>8&255,r.check=af(r.check,X,2,0)),h=0,m=0}else r.head&&(r.head.extra=null);r.mode=A4;case A4:if(r.flags&1024&&(x=r.length,x>a&&(x=a),x&&(r.head&&(Z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+x),Z)),r.flags&512&&r.wrap&4&&(r.check=af(r.check,n,x,o)),a-=x,o+=x,r.length-=x),r.length))break e;r.length=0,r.mode=P4;case P4:if(r.flags&2048){if(a===0)break e;x=0;do Z=n[o+x++],r.head&&Z&&r.length<65536&&(r.head.name+=String.fromCharCode(Z));while(Z&&x<a);if(r.flags&512&&r.wrap&4&&(r.check=af(r.check,n,x,o)),a-=x,o+=x,Z)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=T4;case T4:if(r.flags&4096){if(a===0)break e;x=0;do Z=n[o+x++],r.head&&Z&&r.length<65536&&(r.head.comment+=String.fromCharCode(Z));while(Z&&x<a);if(r.flags&512&&r.wrap&4&&(r.check=af(r.check,n,x,o)),a-=x,o+=x,Z)break e}else r.head&&(r.head.comment=null);r.mode=I4;case I4:if(r.flags&512){for(;m<16;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}if(r.wrap&4&&h!==(r.check&65535)){e.msg="header crc mismatch",r.mode=eo;break}h=0,m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Wf;break;case M4:for(;m<32;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}e.adler=r.check=U4(h),h=0,m=0,r.mode=t1;case t1:if(r.havedict===0)return e.next_out=u,e.avail_out=p,e.next_in=o,e.avail_in=a,r.hold=h,r.bits=m,Kse;e.adler=r.check=1,r.mode=Wf;case Wf:if(t===Wse||t===Lb)break e;case Hw:if(r.last){h>>>=m&7,m-=m&7,r.mode=Zw;break}for(;m<3;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}switch(r.last=h&1,h>>>=1,m-=1,h&3){case 0:r.mode=R4;break;case 1:if(nle(r),r.mode=Db,t===Lb){h>>>=2,m-=2;break e}break;case 2:r.mode=k4;break;case 3:e.msg="invalid block type",r.mode=eo}h>>>=2,m-=2;break;case R4:for(h>>>=m&7,m-=m&7;m<32;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}if((h&65535)!==(h>>>16^65535)){e.msg="invalid stored block lengths",r.mode=eo;break}if(r.length=h&65535,h=0,m=0,r.mode=Ww,t===Lb)break e;case Ww:r.mode=O4;case O4:if(x=r.length,x){if(x>a&&(x=a),x>p&&(x=p),x===0)break e;i.set(n.subarray(o,o+x),u),a-=x,o+=x,p-=x,u+=x,r.length-=x;break}r.mode=Wf;break;case k4:for(;m<14;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}if(r.nlen=(h&31)+257,h>>>=5,m-=5,r.ndist=(h&31)+1,h>>>=5,m-=5,r.ncode=(h&15)+4,h>>>=4,m-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=eo;break}r.have=0,r.mode=L4;case L4:for(;r.have<r.ncode;){for(;m<3;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}r.lens[G[r.have++]]=h&7,h>>>=3,m-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,le={bits:r.lenbits},J=Sv(Hse,r.lens,0,19,r.lencode,0,r.work,le),r.lenbits=le.bits,J){e.msg="invalid code lengths set",r.mode=eo;break}r.have=0,r.mode=D4;case D4:for(;r.have<r.nlen+r.ndist;){for(;R=r.lencode[h&(1<<r.lenbits)-1],k=R>>>24,N=R>>>16&255,F=R&65535,!(k<=m);){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}if(F<16)h>>>=k,m-=k,r.lens[r.have++]=F;else{if(F===16){for(H=k+2;m<H;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}if(h>>>=k,m-=k,r.have===0){e.msg="invalid bit length repeat",r.mode=eo;break}Z=r.lens[r.have-1],x=3+(h&3),h>>>=2,m-=2}else if(F===17){for(H=k+3;m<H;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}h>>>=k,m-=k,Z=0,x=3+(h&7),h>>>=3,m-=3}else{for(H=k+7;m<H;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}h>>>=k,m-=k,Z=0,x=11+(h&127),h>>>=7,m-=7}if(r.have+x>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=eo;break}for(;x--;)r.lens[r.have++]=Z}}if(r.mode===eo)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=eo;break}if(r.lenbits=9,le={bits:r.lenbits},J=Sv(gq,r.lens,0,r.nlen,r.lencode,0,r.work,le),r.lenbits=le.bits,J){e.msg="invalid literal/lengths set",r.mode=eo;break}if(r.distbits=6,r.distcode=r.distdyn,le={bits:r.distbits},J=Sv(yq,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,le),r.distbits=le.bits,J){e.msg="invalid distances set",r.mode=eo;break}if(r.mode=Db,t===Lb)break e;case Db:r.mode=Nb;case Nb:if(a>=6&&p>=258){e.next_out=u,e.avail_out=p,e.next_in=o,e.avail_in=a,r.hold=h,r.bits=m,zse(e,w),u=e.next_out,i=e.output,p=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,h=r.hold,m=r.bits,r.mode===Wf&&(r.back=-1);break}for(r.back=0;R=r.lencode[h&(1<<r.lenbits)-1],k=R>>>24,N=R>>>16&255,F=R&65535,!(k<=m);){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}if(N&&(N&240)===0){for(D=k,U=N,B=F;R=r.lencode[B+((h&(1<<D+U)-1)>>D)],k=R>>>24,N=R>>>16&255,F=R&65535,!(D+k<=m);){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}h>>>=D,m-=D,r.back+=D}if(h>>>=k,m-=k,r.back+=k,r.length=F,N===0){r.mode=z4;break}if(N&32){r.back=-1,r.mode=Wf;break}if(N&64){e.msg="invalid literal/length code",r.mode=eo;break}r.extra=N&15,r.mode=N4;case N4:if(r.extra){for(H=r.extra;m<H;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=F4;case F4:for(;R=r.distcode[h&(1<<r.distbits)-1],k=R>>>24,N=R>>>16&255,F=R&65535,!(k<=m);){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}if((N&240)===0){for(D=k,U=N,B=F;R=r.distcode[B+((h&(1<<D+U)-1)>>D)],k=R>>>24,N=R>>>16&255,F=R&65535,!(D+k<=m);){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}h>>>=D,m-=D,r.back+=D}if(h>>>=k,m-=k,r.back+=k,N&64){e.msg="invalid distance code",r.mode=eo;break}r.offset=F,r.extra=N&15,r.mode=B4;case B4:if(r.extra){for(H=r.extra;m<H;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=eo;break}r.mode=j4;case j4:if(p===0)break e;if(x=w-p,r.offset>x){if(x=r.offset-x,x>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=eo;break}x>r.wnext?(x-=r.wnext,P=r.wsize-x):P=r.wnext-x,x>r.length&&(x=r.length),T=r.window}else T=i,P=u-r.offset,x=r.length;x>p&&(x=p),p-=x,r.length-=x;do i[u++]=T[P++];while(--x);r.length===0&&(r.mode=Nb);break;case z4:if(p===0)break e;i[u++]=r.length,p--,r.mode=Nb;break;case Zw:if(r.wrap){for(;m<32;){if(a===0)break e;a--,h|=n[o++]<<m,m+=8}if(w-=p,e.total_out+=w,r.total+=w,r.wrap&4&&w&&(e.adler=r.check=r.flags?af(r.check,i,w,u-w):YP(r.check,i,w,u-w)),w=p,r.wrap&4&&(r.flags?h:U4(h))!==r.check){e.msg="incorrect data check",r.mode=eo;break}h=0,m=0}r.mode=$4;case $4:if(r.wrap&&r.flags){for(;m<32;){if(a===0)break e;a--,h+=n[o++]<<m,m+=8}if(r.wrap&4&&h!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=eo;break}h=0,m=0}r.mode=q4;case q4:J=Zse;break e;case eo:J=vq;break e;case _q:return bq;case xq:default:return Ju}return e.next_out=u,e.avail_out=p,e.next_in=o,e.avail_in=a,r.hold=h,r.bits=m,(r.wsize||w!==e.avail_out&&r.mode<eo&&(r.mode<Zw||t!==_4))&&Aq(e,e.output,e.next_out,w-e.avail_out),v-=e.avail_in,w-=e.avail_out,e.total_in+=v,e.total_out+=w,r.total+=w,r.wrap&4&&w&&(e.adler=r.check=r.flags?af(r.check,i,w,e.next_out-w):YP(r.check,i,w,e.next_out-w)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Wf?128:0)+(r.mode===Db||r.mode===Ww?256:0),(v===0&&w===0||t===_4)&&J===hp&&(J=Xse),J},ale=e=>{if(wp(e))return Ju;let t=e.state;return t.window&&(t.window=null),e.state=null,hp},ole=(e,t)=>{if(wp(e))return Ju;const r=e.state;return(r.wrap&2)===0?Ju:(r.head=t,t.done=!1,hp)},sle=(e,t)=>{const r=t.length;let n,i,o;return wp(e)||(n=e.state,n.wrap!==0&&n.mode!==t1)?Ju:n.mode===t1&&(i=1,i=YP(i,t,r,0),i!==n.check)?vq:(o=Aq(e,t,r,r),o?(n.mode=_q,bq):(n.havedict=1,hp))};var lle=Sq,ule=Eq,cle=wq,fle=rle,hle=Cq,dle=ile,ple=ale,mle=ole,gle=sle,yle="pako inflate (from Nodeca project)",th={inflateReset:lle,inflateReset2:ule,inflateResetKeep:cle,inflateInit:fle,inflateInit2:hle,inflate:dle,inflateEnd:ple,inflateGetHeader:mle,inflateSetDictionary:gle,inflateInfo:yle};function vle(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ble=vle;const Pq=Object.prototype.toString,{Z_NO_FLUSH:_le,Z_FINISH:xle,Z_OK:n0,Z_STREAM_END:Yw,Z_NEED_DICT:Jw,Z_STREAM_ERROR:wle,Z_DATA_ERROR:G4,Z_MEM_ERROR:Sle}=dq;function O0(e){this.options=pq.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Bse,this.strm.avail_out=0;let r=th.inflateInit2(this.strm,t.windowBits);if(r!==n0)throw new Error(JP[r]);if(this.header=new ble,th.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=QP.string2buf(t.dictionary):Pq.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=th.inflateSetDictionary(this.strm,t.dictionary),r!==n0)))throw new Error(JP[r])}O0.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,u,a;if(this.ended)return!1;for(t===~~t?u=t:u=t===!0?xle:_le,Pq.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=th.inflate(r,u),o===Jw&&i&&(o=th.inflateSetDictionary(r,i),o===n0?o=th.inflate(r,u):o===G4&&(o=Jw));r.avail_in>0&&o===Yw&&r.state.wrap>0&&e[r.next_in]!==0;)th.inflateReset(r),o=th.inflate(r,u);switch(o){case wle:case G4:case Jw:case Sle:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||o===Yw))if(this.options.to==="string"){let p=QP.utf8border(r.output,r.next_out),h=r.next_out-p,m=QP.buf2string(r.output,p);r.next_out=h,r.avail_out=n-h,h&&r.output.set(r.output.subarray(p,p+h),0),this.onData(m)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===n0&&a===0)){if(o===Yw)return o=th.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};O0.prototype.onData=function(e){this.chunks.push(e)};O0.prototype.onEnd=function(e){e===n0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=pq.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Ele(e,t){const r=new O0(t);if(r.push(e),r.err)throw r.msg||JP[r.err];return r.result}var Cle=O0,Ale=Ele,Ple={Inflate:Cle,inflate:Ale};const{Inflate:Tle,inflate:Ile}=Ple;var H4=Tle,Mle=Ile;const Tq=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;Tq[e]=t}const W4=4294967295;function Rle(e,t,r){let n=e;for(let i=0;i<r;i++)n=Tq[(n^t[i])&255]^n>>>8;return n}function Ole(e,t){return(Rle(W4,e,t)^W4)>>>0}function Z4(e,t,r){const n=e.readUint32(),i=Ole(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function Iq(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function Mq(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function Rq(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function Oq(e,t,r,n,i){let o=0;if(r.length===0){for(;o<i;o++)t[o]=e[o];for(;o<n;o++)t[o]=e[o]+(t[o-i]>>1)&255}else{for(;o<i;o++)t[o]=e[o]+(r[o]>>1)&255;for(;o<n;o++)t[o]=e[o]+(t[o-i]+r[o]>>1)&255}}function kq(e,t,r,n,i){let o=0;if(r.length===0){for(;o<i;o++)t[o]=e[o];for(;o<n;o++)t[o]=e[o]+t[o-i]&255}else{for(;o<i;o++)t[o]=e[o]+r[o]&255;for(;o<n;o++)t[o]=e[o]+kle(t[o-i],r[o],r[o-i])&255}}function kle(e,t,r){const n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),u=Math.abs(n-r);return i<=o&&i<=u?e:o<=u?t:r}function Lle(e,t,r,n,i,o){switch(e){case 0:Iq(t,r,i);break;case 1:Mq(t,r,i,o);break;case 2:Rq(t,r,n,i);break;case 3:Oq(t,r,n,i,o);break;case 4:kq(t,r,n,i,o);break;default:throw new Error(`Unsupported filter: ${e}`)}}const Dle=new Uint16Array([255]),Nle=new Uint8Array(Dle.buffer),Fle=Nle[0]===255;function Ble(e){const{data:t,width:r,height:n,channels:i,depth:o}=e,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,p=new Uint8Array(n*r*a);let h=0;for(let m=0;m<7;m++){const v=u[m],w=Math.ceil((r-v.x)/v.xStep),x=Math.ceil((n-v.y)/v.yStep);if(w<=0||x<=0)continue;const P=w*a,T=new Uint8Array(P);for(let R=0;R<x;R++){const k=t[h++],N=t.subarray(h,h+P);h+=P;const F=new Uint8Array(P);Lle(k,N,F,T,P,a),T.set(F);for(let D=0;D<w;D++){const U=v.x+D*v.xStep,B=v.y+R*v.yStep;if(!(U>=r||B>=n))for(let Z=0;Z<a;Z++)p[(B*r+U)*a+Z]=F[D*a+Z]}}}if(o===16){const m=new Uint16Array(p.buffer);if(Fle)for(let v=0;v<m.length;v++)m[v]=jle(m[v]);return m}else return p}function jle(e){return(e&255)<<8|e>>8&255}const zle=new Uint16Array([255]),$le=new Uint8Array(zle.buffer),qle=$le[0]===255,Ule=new Uint8Array(0);function K4(e){const{data:t,width:r,height:n,channels:i,depth:o}=e,u=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*r),p=new Uint8Array(n*a);let h=Ule,m=0,v,w;for(let x=0;x<n;x++){switch(v=t.subarray(m+1,m+1+a),w=p.subarray(x*a,(x+1)*a),t[m]){case 0:Iq(v,w,a);break;case 1:Mq(v,w,a,u);break;case 2:Rq(v,w,h,a);break;case 3:Oq(v,w,h,a,u);break;case 4:kq(v,w,h,a,u);break;default:throw new Error(`Unsupported filter: ${t[m]}`)}h=w,m+=a+1}if(o===16){const x=new Uint16Array(p.buffer);if(qle)for(let P=0;P<x.length;P++)x[P]=Vle(x[P]);return x}else return p}function Vle(e){return(e&255)<<8|e>>8&255}const w_=Uint8Array.of(137,80,78,71,13,10,26,10);function X4(e){if(!Gle(e.readBytes(w_.length)))throw new Error("wrong PNG signature")}function Gle(e){if(e.length<w_.length)return!1;for(let t=0;t<w_.length;t++)if(e[t]!==w_[t])return!1;return!0}const Hle="tEXt",Wle=0,Lq=new TextDecoder("latin1");function Zle(e){if(Xle(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const Kle=/^[\u0000-\u00FF]*$/;function Xle(e){if(!Kle.test(e))throw new Error("invalid latin1 text")}function Yle(e,t,r){const n=Dq(t);e[n]=Jle(t,r-n.length-1)}function Dq(e){for(e.mark();e.readByte()!==Wle;);const t=e.offset;e.reset();const r=Lq.decode(e.readBytes(t-e.offset-1));return e.skip(1),Zle(r),r}function Jle(e,t){return Lq.decode(e.readBytes(t))}const wu={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Qw={UNKNOWN:-1,DEFLATE:0},Y4={UNKNOWN:-1,ADAPTIVE:0},e5={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Fb={NONE:0,BACKGROUND:1,PREVIOUS:2},t5={SOURCE:0,OVER:1};class Qle extends DI{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new H4,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Qw.UNKNOWN,this._filterMethod=Y4.UNKNOWN,this._interlaceMethod=e5.UNKNOWN,this._colorType=wu.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(X4(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(X4(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case Hle:Yle(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Z4(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?Z4(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=eue(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case wu.GREYSCALE:n=1;break;case wu.TRUECOLOUR:n=3;break;case wu.INDEXED_COLOUR:n=1;break;case wu.GREYSCALE_ALPHA:n=2;break;case wu.TRUECOLOUR_ALPHA:n=4;break;case wu.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==Qw.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case wu.GREYSCALE:case wu.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case wu.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case wu.UNKNOWN:case wu.GREYSCALE_ALPHA:case wu.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=Dq(this),n=this.readUint8();if(n!==Qw.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Mle(i)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=K4({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(t-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,n){switch(t.disposeOp){case Fb.NONE:break;case Fb.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const u=(i*t.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)n.data[u+a]=0}break;case Fb.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const n=1<<this._png.depth,i=(o,u)=>{const a=((o+r.yOffset)*this._png.width+r.xOffset+u)*this._png.channels,p=(o*r.width+u)*this._png.channels;return{index:a,frameIndex:p}};switch(r.blendOp){case t5.SOURCE:for(let o=0;o<r.height;o++)for(let u=0;u<r.width;u++){const{index:a,frameIndex:p}=i(o,u);for(let h=0;h<this._png.channels;h++)t.data[a+h]=r.data[p+h]}break;case t5.OVER:for(let o=0;o<r.height;o++)for(let u=0;u<r.width;u++){const{index:a,frameIndex:p}=i(o,u);for(let h=0;h<this._png.channels;h++){const m=r.data[p+this._png.channels-1]/n,v=h%(this._png.channels-1)===0?1:r.data[p+h],w=Math.floor(m*v+(1-m)*t.data[a+h]);t.data[a+h]+=w}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Y4.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===e5.NO_INTERLACE)this._png.data=K4({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===e5.ADAM7)this._png.data=Ble({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Fb.NONE,blendOp:t5.SOURCE,data:t}),this._inflator=new H4,this._writingDataChunks=!1}}function eue(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var J4;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(J4||(J4={}));function tue(e,t){return new Qle(e,t).decode()}var ei=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function r5(){ei.console&&typeof ei.console.log=="function"&&ei.console.log.apply(ei.console,arguments)}var Pa={log:r5,warn:function(e){ei.console&&(typeof ei.console.warn=="function"?ei.console.warn.apply(ei.console,arguments):r5.call(null,arguments))},error:function(e){ei.console&&(typeof ei.console.error=="function"?ei.console.error.apply(ei.console,arguments):r5(e))}};function n5(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){$d(n.response,t,r)},n.onerror=function(){Pa.error("could not download file")},n.send()}function Q4(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Bb(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var $d=ei.saveAs||((typeof window>"u"?"undefined":ha(window))!=="object"||window!==ei?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=ei.URL||ei.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?Q4(i.href)?n5(e,t,r):Bb(i,i.target="_blank"):Bb(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Bb(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(Q4(e))n5(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Bb(n)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:ha(o)!=="object"&&(Pa.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return n5(e,t,r);var i=e.type==="application/octet-stream",o=/constructor/i.test(ei.HTMLElement)||ei.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&o)&&(typeof FileReader>"u"?"undefined":ha(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var m=a.result;m=u?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=m:location=m,n=null},a.readAsDataURL(e)}else{var p=ei.URL||ei.webkitURL,h=p.createObjectURL(e);n?n.location=h:location.href=h,n=null,setTimeout(function(){p.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Nq(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,o=r[n].process,u=i.exec(e);u&&(t=o(u),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),p=this.g.toString(16),h=this.b.toString(16);return a.length==1&&(a="0"+a),p.length==1&&(p="0"+p),h.length==1&&(h="0"+h),"#"+a+p+h}}var S_=ei.atob.bind(ei),eD=ei.btoa.bind(ei);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function i5(e,t){var r=e[0],n=e[1],i=e[2],o=e[3];r=ul(r,n,i,o,t[0],7,-680876936),o=ul(o,r,n,i,t[1],12,-389564586),i=ul(i,o,r,n,t[2],17,606105819),n=ul(n,i,o,r,t[3],22,-1044525330),r=ul(r,n,i,o,t[4],7,-176418897),o=ul(o,r,n,i,t[5],12,1200080426),i=ul(i,o,r,n,t[6],17,-1473231341),n=ul(n,i,o,r,t[7],22,-45705983),r=ul(r,n,i,o,t[8],7,1770035416),o=ul(o,r,n,i,t[9],12,-1958414417),i=ul(i,o,r,n,t[10],17,-42063),n=ul(n,i,o,r,t[11],22,-1990404162),r=ul(r,n,i,o,t[12],7,1804603682),o=ul(o,r,n,i,t[13],12,-40341101),i=ul(i,o,r,n,t[14],17,-1502002290),r=cl(r,n=ul(n,i,o,r,t[15],22,1236535329),i,o,t[1],5,-165796510),o=cl(o,r,n,i,t[6],9,-1069501632),i=cl(i,o,r,n,t[11],14,643717713),n=cl(n,i,o,r,t[0],20,-373897302),r=cl(r,n,i,o,t[5],5,-701558691),o=cl(o,r,n,i,t[10],9,38016083),i=cl(i,o,r,n,t[15],14,-660478335),n=cl(n,i,o,r,t[4],20,-405537848),r=cl(r,n,i,o,t[9],5,568446438),o=cl(o,r,n,i,t[14],9,-1019803690),i=cl(i,o,r,n,t[3],14,-187363961),n=cl(n,i,o,r,t[8],20,1163531501),r=cl(r,n,i,o,t[13],5,-1444681467),o=cl(o,r,n,i,t[2],9,-51403784),i=cl(i,o,r,n,t[7],14,1735328473),r=fl(r,n=cl(n,i,o,r,t[12],20,-1926607734),i,o,t[5],4,-378558),o=fl(o,r,n,i,t[8],11,-2022574463),i=fl(i,o,r,n,t[11],16,1839030562),n=fl(n,i,o,r,t[14],23,-35309556),r=fl(r,n,i,o,t[1],4,-1530992060),o=fl(o,r,n,i,t[4],11,1272893353),i=fl(i,o,r,n,t[7],16,-155497632),n=fl(n,i,o,r,t[10],23,-1094730640),r=fl(r,n,i,o,t[13],4,681279174),o=fl(o,r,n,i,t[0],11,-358537222),i=fl(i,o,r,n,t[3],16,-722521979),n=fl(n,i,o,r,t[6],23,76029189),r=fl(r,n,i,o,t[9],4,-640364487),o=fl(o,r,n,i,t[12],11,-421815835),i=fl(i,o,r,n,t[15],16,530742520),r=hl(r,n=fl(n,i,o,r,t[2],23,-995338651),i,o,t[0],6,-198630844),o=hl(o,r,n,i,t[7],10,1126891415),i=hl(i,o,r,n,t[14],15,-1416354905),n=hl(n,i,o,r,t[5],21,-57434055),r=hl(r,n,i,o,t[12],6,1700485571),o=hl(o,r,n,i,t[3],10,-1894986606),i=hl(i,o,r,n,t[10],15,-1051523),n=hl(n,i,o,r,t[1],21,-2054922799),r=hl(r,n,i,o,t[8],6,1873313359),o=hl(o,r,n,i,t[15],10,-30611744),i=hl(i,o,r,n,t[6],15,-1560198380),n=hl(n,i,o,r,t[13],21,1309151649),r=hl(r,n,i,o,t[4],6,-145523070),o=hl(o,r,n,i,t[11],10,-1120210379),i=hl(i,o,r,n,t[2],15,718787259),n=hl(n,i,o,r,t[9],21,-343485551),e[0]=Gh(r,e[0]),e[1]=Gh(n,e[1]),e[2]=Gh(i,e[2]),e[3]=Gh(o,e[3])}function $x(e,t,r,n,i,o){return t=Gh(Gh(t,e),Gh(n,o)),Gh(t<<i|t>>>32-i,r)}function ul(e,t,r,n,i,o,u){return $x(t&r|~t&n,e,t,i,o,u)}function cl(e,t,r,n,i,o,u){return $x(t&n|r&~n,e,t,i,o,u)}function fl(e,t,r,n,i,o,u){return $x(t^r^n,e,t,i,o,u)}function hl(e,t,r,n,i,o,u){return $x(r^(t|~n),e,t,i,o,u)}function Fq(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)i5(n,rue(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(i5(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,i5(n,i),n}function rue(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var tD="0123456789abcdef".split("");function nue(e){for(var t="",r=0;r<4;r++)t+=tD[e>>8*r+4&15]+tD[e>>8*r&15];return t}function iue(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function eT(e){return Fq(e).map(iue).join("")}var aue=(function(e){for(var t=0;t<e.length;t++)e[t]=nue(e[t]);return e.join("")})(Fq("hello"))!="5d41402abc4b2a76b9719d911017c592";function Gh(e,t){if(aue){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function tT(e,t){var r,n,i,o;if(e!==r){for(var u=(i=e,o=1+(256/e.length|0),new Array(o+1).join(i)),a=[],p=0;p<256;p++)a[p]=p;var h=0;for(p=0;p<256;p++){var m=a[p];h=(h+m+u.charCodeAt(p))%256,a[p]=a[h],a[h]=m}r=e,n=a}else a=n;var v=t.length,w=0,x=0,P="";for(p=0;p<v;p++)x=(x+(m=a[w=(w+1)%256]))%256,a[w]=a[x],a[x]=m,u=a[(a[w]+a[x])%256],P+=String.fromCharCode(t.charCodeAt(p)^u);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var rD={print:4,modify:8,copy:16,"annot-forms":32};function xm(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(a){if(rD.perm!==void 0)throw new Error("Invalid permission: "+a);i+=rD[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(t+this.padding).substr(0,32),u=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^i)),this.encryptionKey=eT(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=tT(this.encryptionKey,this.padding)}function wm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function nD(e){if(ha(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var o=Math.random().toString(35);return t[r][o]=[n,!!i],o},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[r]){var u=t[r][o];try{u[0].apply(e,n)}catch(a){ei.console&&Pa.error("jsPDF PubSub Error",a.message,a)}u[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function r1(e){if(!(this instanceof r1))return new r1(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Bq(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Vd(e,t,r,n,i){if(!(this instanceof Vd))return new Vd(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Bq.call(this,n,i)}function Um(e,t,r,n,i){if(!(this instanceof Um))return new Um(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Bq.call(this,n,i)}function Ln(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],u=[],a=1,p=16,h="S",m=null;ha(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,o=e.compress||e.compressPdf||o,(m=e.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(p=e.floatPrecision),h=e.defaultPathOperation||"S"),u=e.filters||(o===!0?["FlateEncode"]:u),n=n||"mm",r=(""+(r||"P")).toLowerCase();var v=e.putOnlyUsedFonts||!1,w={},x={internal:{},__private__:{}};x.__private__.PubSub=nD;var P="1.3",T=x.__private__.getPdfVersion=function(){return P};x.__private__.setPdfVersion=function(K){P=K};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return R};var k=x.__private__.getPageFormat=function(K){return R[K]};i=i||"a4";var N="compat",F="advanced",D=N;function U(){this.saveGraphicsState(),Le(new ot(wr,0,0,-wr,0,Oi()*wr).toString()+" cm"),this.setFontSize(this.getFontSize()/wr),h="n",D=F}function B(){this.restoreGraphicsState(),h="S",D=N}var Z=x.__private__.combineFontStyleAndFontWeight=function(K,Te){if(K=="bold"&&Te=="normal"||K=="bold"&&Te==400||K=="normal"&&Te=="italic"||K=="bold"&&Te=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Te&&(K=Te==400||Te==="normal"?K==="italic"?"italic":"normal":Te!=700&&Te!=="bold"||K!=="normal"?(Te==700?"bold":Te)+""+K:"bold"),K};x.advancedAPI=function(K){var Te=D===N;return Te&&U.call(this),typeof K!="function"||(K(this),Te&&B.call(this)),this},x.compatAPI=function(K){var Te=D===F;return Te&&B.call(this),typeof K!="function"||(K(this),Te&&U.call(this)),this},x.isAdvancedAPI=function(){return D===F};var J,X=function(K){if(D!==F)throw new Error(K+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},le=x.roundToPrecision=x.__private__.roundToPrecision=function(K,Te){var Qe=t||Te;if(isNaN(K)||isNaN(Qe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return K.toFixed(Qe).replace(/0+$/,"")};J=x.hpf=x.__private__.hpf=typeof p=="number"?function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return le(K,p)}:p==="smart"?function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return le(K,K>-1&&K<1?16:5)}:function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return le(K,16)};var H=x.f2=x.__private__.f2=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.f2");return le(K,2)},G=x.__private__.f3=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.f3");return le(K,3)},ae=x.scale=x.__private__.scale=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.scale");return D===N?K*wr:D===F?K:void 0},se=function(K){return ae((function(Te){return D===N?Oi()-Te:D===F?Te:void 0})(K))};x.__private__.setPrecision=x.setPrecision=function(K){typeof parseInt(K,10)=="number"&&(t=parseInt(K,10))};var ue,me="00000000000000000000000000000000",Ce=x.__private__.getFileId=function(){return me},pe=x.__private__.setFileId=function(K){return me=K!==void 0&&/^[a-fA-F0-9]{32}$/.test(K)?K.toUpperCase():me.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(wa=new xm(m.userPermissions,m.userPassword,m.ownerPassword,me)),me};x.setFileId=function(K){return pe(K),this},x.getFileId=function(){return Ce()};var Ee=x.__private__.convertDateToPDFDate=function(K){var Te=K.getTimezoneOffset(),Qe=Te<0?"+":"-",Rt=Math.floor(Math.abs(Te/60)),Ht=Math.abs(Te%60),_r=[Qe,Pe(Rt),"'",Pe(Ht),"'"].join("");return["D:",K.getFullYear(),Pe(K.getMonth()+1),Pe(K.getDate()),Pe(K.getHours()),Pe(K.getMinutes()),Pe(K.getSeconds()),_r].join("")},Fe=x.__private__.convertPDFDateToDate=function(K){var Te=parseInt(K.substr(2,4),10),Qe=parseInt(K.substr(6,2),10)-1,Rt=parseInt(K.substr(8,2),10),Ht=parseInt(K.substr(10,2),10),_r=parseInt(K.substr(12,2),10),Dr=parseInt(K.substr(14,2),10);return new Date(Te,Qe,Rt,Ht,_r,Dr,0)},Ke=x.__private__.setCreationDate=function(K){var Te;if(K===void 0&&(K=new Date),K instanceof Date)Te=Ee(K);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(K))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Te=K}return ue=Te},fe=x.__private__.getCreationDate=function(K){var Te=ue;return K==="jsDate"&&(Te=Fe(ue)),Te};x.setCreationDate=function(K){return Ke(K),this},x.getCreationDate=function(K){return fe(K)};var _e,Pe=x.__private__.padd2=function(K){return("0"+parseInt(K)).slice(-2)},ke=x.__private__.padd2Hex=function(K){return("00"+(K=K.toString())).substr(K.length)},$e=0,ht=[],Ot=[],mt=0,nt=[],Nt=[],kt=!1,It=Ot;x.__private__.setCustomOutputDestination=function(K){kt=!0,It=K};var gt=function(K){kt||(It=K)};x.__private__.resetCustomOutputDestination=function(){kt=!1,It=Ot};var Le=x.__private__.out=function(K){return K=K.toString(),mt+=K.length+1,It.push(K),It},pr=x.__private__.write=function(K){return Le(arguments.length===1?K.toString():Array.prototype.join.call(arguments," "))},hr=x.__private__.getArrayBuffer=function(K){for(var Te=K.length,Qe=new ArrayBuffer(Te),Rt=new Uint8Array(Qe);Te--;)Rt[Te]=K.charCodeAt(Te);return Qe},vr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return vr};var Qt=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(K){return Qt=D===F?K/wr:K,this};var qe,rt=x.__private__.getFontSize=x.getFontSize=function(){return D===N?Qt:Qt*wr},ct=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(K){return ct=K,this},x.__private__.getR2L=x.getR2L=function(){return ct};var Ft,Yt=x.__private__.setZoomMode=function(K){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(K))qe=K;else if(isNaN(K)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(K)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+K+'" is not recognized.');qe=K}else qe=parseInt(K,10)};x.__private__.getZoomMode=function(){return qe};var Wt,ur=x.__private__.setPageMode=function(K){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(K)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+K+'" is not recognized.');Ft=K};x.__private__.getPageMode=function(){return Ft};var br=x.__private__.setLayoutMode=function(K){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(K)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+K+'" is not recognized.');Wt=K};x.__private__.getLayoutMode=function(){return Wt},x.__private__.setDisplayMode=x.setDisplayMode=function(K,Te,Qe){return Yt(K),br(Te),ur(Qe),this};var xr={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(K){if(Object.keys(xr).indexOf(K)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xr[K]},x.__private__.getDocumentProperties=function(){return xr},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(K){for(var Te in xr)xr.hasOwnProperty(Te)&&K[Te]&&(xr[Te]=K[Te]);return this},x.__private__.setDocumentProperty=function(K,Te){if(Object.keys(xr).indexOf(K)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xr[K]=Te};var Rr,wr,fr,bt,ve,xe={},Ae={},Ue=[],tt={},_t={},Mt={},Pt={},Kt=null,zt=0,Ct=[],Gt=new nD(x),vt=e.hotfixes||[],Pr={},Tr={},Ye=[],ot=function K(Te,Qe,Rt,Ht,_r,Dr){if(!(this instanceof K))return new K(Te,Qe,Rt,Ht,_r,Dr);isNaN(Te)&&(Te=1),isNaN(Qe)&&(Qe=0),isNaN(Rt)&&(Rt=0),isNaN(Ht)&&(Ht=1),isNaN(_r)&&(_r=0),isNaN(Dr)&&(Dr=0),this._matrix=[Te,Qe,Rt,Ht,_r,Dr]};Object.defineProperty(ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(K){this._matrix[0]=K}}),Object.defineProperty(ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(K){this._matrix[1]=K}}),Object.defineProperty(ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(K){this._matrix[2]=K}}),Object.defineProperty(ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(K){this._matrix[3]=K}}),Object.defineProperty(ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(K){this._matrix[4]=K}}),Object.defineProperty(ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(K){this._matrix[5]=K}}),Object.defineProperty(ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(K){this._matrix[0]=K}}),Object.defineProperty(ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(K){this._matrix[1]=K}}),Object.defineProperty(ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(K){this._matrix[2]=K}}),Object.defineProperty(ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(K){this._matrix[3]=K}}),Object.defineProperty(ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(K){this._matrix[4]=K}}),Object.defineProperty(ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(K){this._matrix[5]=K}}),Object.defineProperty(ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ot.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ot.prototype.join=function(K){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(J).join(K)},ot.prototype.multiply=function(K){var Te=K.sx*this.sx+K.shy*this.shx,Qe=K.sx*this.shy+K.shy*this.sy,Rt=K.shx*this.sx+K.sy*this.shx,Ht=K.shx*this.shy+K.sy*this.sy,_r=K.tx*this.sx+K.ty*this.shx+this.tx,Dr=K.tx*this.shy+K.ty*this.sy+this.ty;return new ot(Te,Qe,Rt,Ht,_r,Dr)},ot.prototype.decompose=function(){var K=this.sx,Te=this.shy,Qe=this.shx,Rt=this.sy,Ht=this.tx,_r=this.ty,Dr=Math.sqrt(K*K+Te*Te),rn=(K/=Dr)*Qe+(Te/=Dr)*Rt;Qe-=K*rn,Rt-=Te*rn;var pn=Math.sqrt(Qe*Qe+Rt*Rt);return rn/=pn,K*(Rt/=pn)<Te*(Qe/=pn)&&(K=-K,Te=-Te,rn=-rn,Dr=-Dr),{scale:new ot(Dr,0,0,pn,0,0),translate:new ot(1,0,0,1,Ht,_r),rotate:new ot(K,Te,-Te,K,0,0),skew:new ot(1,0,rn,1,0,0)}},ot.prototype.toString=function(K){return this.join(" ")},ot.prototype.inversed=function(){var K=this.sx,Te=this.shy,Qe=this.shx,Rt=this.sy,Ht=this.tx,_r=this.ty,Dr=1/(K*Rt-Te*Qe),rn=Rt*Dr,pn=-Te*Dr,Nn=-Qe*Dr,Wn=K*Dr;return new ot(rn,pn,Nn,Wn,-rn*Ht-Nn*_r,-pn*Ht-Wn*_r)},ot.prototype.applyToPoint=function(K){var Te=K.x*this.sx+K.y*this.shx+this.tx,Qe=K.x*this.shy+K.y*this.sy+this.ty;return new vl(Te,Qe)},ot.prototype.applyToRectangle=function(K){var Te=this.applyToPoint(K),Qe=this.applyToPoint(new vl(K.x+K.w,K.y+K.h));return new zo(Te.x,Te.y,Qe.x-Te.x,Qe.y-Te.y)},ot.prototype.clone=function(){var K=this.sx,Te=this.shy,Qe=this.shx,Rt=this.sy,Ht=this.tx,_r=this.ty;return new ot(K,Te,Qe,Rt,Ht,_r)},x.Matrix=ot;var jt=x.matrixMult=function(K,Te){return Te.multiply(K)},ne=new ot(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=ne;var de=function(K,Te){if(!_t[K]){var Qe=(Te instanceof Vd?"Sh":"P")+(Object.keys(tt).length+1).toString(10);Te.id=Qe,_t[K]=Qe,tt[Qe]=Te,Gt.publish("addPattern",Te)}};x.ShadingPattern=Vd,x.TilingPattern=Um,x.addShadingPattern=function(K,Te){return X("addShadingPattern()"),de(K,Te),this},x.beginTilingPattern=function(K){X("beginTilingPattern()"),uu(K.boundingBox[0],K.boundingBox[1],K.boundingBox[2]-K.boundingBox[0],K.boundingBox[3]-K.boundingBox[1],K.matrix)},x.endTilingPattern=function(K,Te){X("endTilingPattern()"),Te.stream=Nt[_e].join(`
`),de(K,Te),Gt.publish("endTilingPattern",Te),Ye.pop().restore()};var Be,et=x.__private__.newObject=function(){var K=Lt();return lr(K,!0),K},Lt=x.__private__.newObjectDeferred=function(){return $e++,ht[$e]=function(){return mt},$e},lr=function(K,Te){return Te=typeof Te=="boolean"&&Te,ht[K]=mt,Te&&Le(K+" 0 obj"),K},qt=x.__private__.newAdditionalObject=function(){var K={objId:Lt(),content:""};return nt.push(K),K},zr=Lt(),kr=Lt(),sn=x.__private__.decodeColorString=function(K){var Te=K.split(" ");if(Te.length!==2||Te[1]!=="g"&&Te[1]!=="G")Te.length!==5||Te[4]!=="k"&&Te[4]!=="K"||(Te=[(1-Te[0])*(1-Te[3]),(1-Te[1])*(1-Te[3]),(1-Te[2])*(1-Te[3]),"r"]);else{var Qe=parseFloat(Te[0]);Te=[Qe,Qe,Qe,"r"]}for(var Rt="#",Ht=0;Ht<3;Ht++)Rt+=("0"+Math.floor(255*parseFloat(Te[Ht])).toString(16)).slice(-2);return Rt},xn=x.__private__.encodeColorString=function(K){var Te;typeof K=="string"&&(K={ch1:K});var Qe=K.ch1,Rt=K.ch2,Ht=K.ch3,_r=K.ch4,Dr=K.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Qe=="string"&&Qe.charAt(0)!=="#"){var rn=new Nq(Qe);if(rn.ok)Qe=rn.toHex();else if(!/^\d*\.?\d*$/.test(Qe))throw new Error('Invalid color "'+Qe+'" passed to jsPDF.encodeColorString.')}if(typeof Qe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Qe)&&(Qe="#"+Qe[1]+Qe[1]+Qe[2]+Qe[2]+Qe[3]+Qe[3]),typeof Qe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Qe)){var pn=parseInt(Qe.substr(1),16);Qe=pn>>16&255,Rt=pn>>8&255,Ht=255&pn}if(Rt===void 0||_r===void 0&&Qe===Rt&&Rt===Ht)Te=typeof Qe=="string"?Qe+" "+Dr[0]:K.precision===2?H(Qe/255)+" "+Dr[0]:G(Qe/255)+" "+Dr[0];else if(_r===void 0||ha(_r)==="object"){if(_r&&!isNaN(_r.a)&&_r.a===0)return["1.","1.","1.",Dr[1]].join(" ");Te=typeof Qe=="string"?[Qe,Rt,Ht,Dr[1]].join(" "):K.precision===2?[H(Qe/255),H(Rt/255),H(Ht/255),Dr[1]].join(" "):[G(Qe/255),G(Rt/255),G(Ht/255),Dr[1]].join(" ")}else Te=typeof Qe=="string"?[Qe,Rt,Ht,_r,Dr[2]].join(" "):K.precision===2?[H(Qe),H(Rt),H(Ht),H(_r),Dr[2]].join(" "):[G(Qe),G(Rt),G(Ht),G(_r),Dr[2]].join(" ");return Te},yr=x.__private__.getFilters=function(){return u},Vr=x.__private__.putStream=function(K){var Te=(K=K||{}).data||"",Qe=K.filters||yr(),Rt=K.alreadyAppliedFilters||[],Ht=K.addLength1||!1,_r=Te.length,Dr=K.objectId,rn=function(ia){return ia};if(m!==null&&Dr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(rn=wa.encryptor(Dr,0));var pn={};Qe===!0&&(Qe=["FlateEncode"]);var Nn=K.additionalKeyValues||[],Wn=(pn=Ln.API.processDataByFilters!==void 0?Ln.API.processDataByFilters(Te,Qe):{data:Te,reverseChain:[]}).reverseChain+(Array.isArray(Rt)?Rt.join(" "):Rt.toString());if(pn.data.length!==0&&(Nn.push({key:"Length",value:pn.data.length}),Ht===!0&&Nn.push({key:"Length1",value:_r})),Wn.length!=0)if(Wn.split("/").length-1==1)Nn.push({key:"Filter",value:Wn});else{Nn.push({key:"Filter",value:"["+Wn+"]"});for(var kn=0;kn<Nn.length;kn+=1)if(Nn[kn].key==="DecodeParms"){for(var Fi=[],Ai=0;Ai<pn.reverseChain.split("/").length-1;Ai+=1)Fi.push("null");Fi.push(Nn[kn].value),Nn[kn].value="["+Fi.join(" ")+"]"}}Le("<<");for(var Yn=0;Yn<Nn.length;Yn++)Le("/"+Nn[Yn].key+" "+Nn[Yn].value);Le(">>"),pn.data.length!==0&&(Le("stream"),Le(rn(pn.data)),Le("endstream"))},Kr=x.__private__.putPage=function(K){var Te=K.number,Qe=K.data,Rt=K.objId,Ht=K.contentsObjId;lr(Rt,!0),Le("<</Type /Page"),Le("/Parent "+K.rootDictionaryObjId+" 0 R"),Le("/Resources "+K.resourceDictionaryObjId+" 0 R"),Le("/MediaBox ["+parseFloat(J(K.mediaBox.bottomLeftX))+" "+parseFloat(J(K.mediaBox.bottomLeftY))+" "+J(K.mediaBox.topRightX)+" "+J(K.mediaBox.topRightY)+"]"),K.cropBox!==null&&Le("/CropBox ["+J(K.cropBox.bottomLeftX)+" "+J(K.cropBox.bottomLeftY)+" "+J(K.cropBox.topRightX)+" "+J(K.cropBox.topRightY)+"]"),K.bleedBox!==null&&Le("/BleedBox ["+J(K.bleedBox.bottomLeftX)+" "+J(K.bleedBox.bottomLeftY)+" "+J(K.bleedBox.topRightX)+" "+J(K.bleedBox.topRightY)+"]"),K.trimBox!==null&&Le("/TrimBox ["+J(K.trimBox.bottomLeftX)+" "+J(K.trimBox.bottomLeftY)+" "+J(K.trimBox.topRightX)+" "+J(K.trimBox.topRightY)+"]"),K.artBox!==null&&Le("/ArtBox ["+J(K.artBox.bottomLeftX)+" "+J(K.artBox.bottomLeftY)+" "+J(K.artBox.topRightX)+" "+J(K.artBox.topRightY)+"]"),typeof K.userUnit=="number"&&K.userUnit!==1&&Le("/UserUnit "+K.userUnit),Gt.publish("putPage",{objId:Rt,pageContext:Ct[Te],pageNumber:Te,page:Qe}),Le("/Contents "+Ht+" 0 R"),Le(">>"),Le("endobj");var _r=Qe.join(`
`);return D===F&&(_r+=`
Q`),lr(Ht,!0),Vr({data:_r,filters:yr(),objectId:Ht}),Le("endobj"),Rt},An=x.__private__.putPages=function(){var K,Te,Qe=[];for(K=1;K<=zt;K++)Ct[K].objId=Lt(),Ct[K].contentsObjId=Lt();for(K=1;K<=zt;K++)Qe.push(Kr({number:K,data:Nt[K],objId:Ct[K].objId,contentsObjId:Ct[K].contentsObjId,mediaBox:Ct[K].mediaBox,cropBox:Ct[K].cropBox,bleedBox:Ct[K].bleedBox,trimBox:Ct[K].trimBox,artBox:Ct[K].artBox,userUnit:Ct[K].userUnit,rootDictionaryObjId:zr,resourceDictionaryObjId:kr}));lr(zr,!0),Le("<</Type /Pages");var Rt="/Kids [";for(Te=0;Te<zt;Te++)Rt+=Qe[Te]+" 0 R ";Le(Rt+"]"),Le("/Count "+zt),Le(">>"),Le("endobj"),Gt.publish("postPutPages")},Ni=function(K){Gt.publish("putFont",{font:K,out:Le,newObject:et,putStream:Vr}),K.isAlreadyPutted!==!0&&(K.objectNumber=et(),Le("<<"),Le("/Type /Font"),Le("/BaseFont /"+wm(K.postScriptName)),Le("/Subtype /Type1"),typeof K.encoding=="string"&&Le("/Encoding /"+K.encoding),Le("/FirstChar 32"),Le("/LastChar 255"),Le(">>"),Le("endobj"))},Mi=function(K){K.objectNumber=et();var Te=[];Te.push({key:"Type",value:"/XObject"}),Te.push({key:"Subtype",value:"/Form"}),Te.push({key:"BBox",value:"["+[J(K.x),J(K.y),J(K.x+K.width),J(K.y+K.height)].join(" ")+"]"}),Te.push({key:"Matrix",value:"["+K.matrix.toString()+"]"});var Qe=K.pages[1].join(`
`);Vr({data:Qe,additionalKeyValues:Te,objectId:K.objectNumber}),Le("endobj")},mn=function(K,Te){Te||(Te=21);var Qe=et(),Rt=(function(Dr,rn){var pn,Nn=[],Wn=1/(rn-1);for(pn=0;pn<1;pn+=Wn)Nn.push(pn);if(Nn.push(1),Dr[0].offset!=0){var kn={offset:0,color:Dr[0].color};Dr.unshift(kn)}if(Dr[Dr.length-1].offset!=1){var Fi={offset:1,color:Dr[Dr.length-1].color};Dr.push(Fi)}for(var Ai="",Yn=0,ia=0;ia<Nn.length;ia++){for(pn=Nn[ia];pn>Dr[Yn+1].offset;)Yn++;var qi=Dr[Yn].offset,ta=(pn-qi)/(Dr[Yn+1].offset-qi),is=Dr[Yn].color,Ks=Dr[Yn+1].color;Ai+=ke(Math.round((1-ta)*is[0]+ta*Ks[0]).toString(16))+ke(Math.round((1-ta)*is[1]+ta*Ks[1]).toString(16))+ke(Math.round((1-ta)*is[2]+ta*Ks[2]).toString(16))}return Ai.trim()})(K.colors,Te),Ht=[];Ht.push({key:"FunctionType",value:"0"}),Ht.push({key:"Domain",value:"[0.0 1.0]"}),Ht.push({key:"Size",value:"["+Te+"]"}),Ht.push({key:"BitsPerSample",value:"8"}),Ht.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ht.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Vr({data:Rt,additionalKeyValues:Ht,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Qe}),Le("endobj"),K.objectNumber=et(),Le("<< /ShadingType "+K.type),Le("/ColorSpace /DeviceRGB");var _r="/Coords ["+J(parseFloat(K.coords[0]))+" "+J(parseFloat(K.coords[1]))+" ";K.type===2?_r+=J(parseFloat(K.coords[2]))+" "+J(parseFloat(K.coords[3])):_r+=J(parseFloat(K.coords[2]))+" "+J(parseFloat(K.coords[3]))+" "+J(parseFloat(K.coords[4]))+" "+J(parseFloat(K.coords[5])),Le(_r+="]"),K.matrix&&Le("/Matrix ["+K.matrix.toString()+"]"),Le("/Function "+Qe+" 0 R"),Le("/Extend [true true]"),Le(">>"),Le("endobj")},Pi=function(K,Te){var Qe=Lt(),Rt=et();Te.push({resourcesOid:Qe,objectOid:Rt}),K.objectNumber=Rt;var Ht=[];Ht.push({key:"Type",value:"/Pattern"}),Ht.push({key:"PatternType",value:"1"}),Ht.push({key:"PaintType",value:"1"}),Ht.push({key:"TilingType",value:"1"}),Ht.push({key:"BBox",value:"["+K.boundingBox.map(J).join(" ")+"]"}),Ht.push({key:"XStep",value:J(K.xStep)}),Ht.push({key:"YStep",value:J(K.yStep)}),Ht.push({key:"Resources",value:Qe+" 0 R"}),K.matrix&&Ht.push({key:"Matrix",value:"["+K.matrix.toString()+"]"}),Vr({data:K.stream,additionalKeyValues:Ht,objectId:K.objectNumber}),Le("endobj")},Ri=function(K){for(var Te in K.objectNumber=et(),Le("<<"),K)switch(Te){case"opacity":Le("/ca "+H(K[Te]));break;case"stroke-opacity":Le("/CA "+H(K[Te]))}Le(">>"),Le("endobj")},ni=function(K){lr(K.resourcesOid,!0),Le("<<"),Le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Te in Le("/Font <<"),xe)xe.hasOwnProperty(Te)&&(v===!1||v===!0&&w.hasOwnProperty(Te))&&Le("/"+Te+" "+xe[Te].objectNumber+" 0 R");Le(">>")})(),(function(){if(Object.keys(tt).length>0){for(var Te in Le("/Shading <<"),tt)tt.hasOwnProperty(Te)&&tt[Te]instanceof Vd&&tt[Te].objectNumber>=0&&Le("/"+Te+" "+tt[Te].objectNumber+" 0 R");Gt.publish("putShadingPatternDict"),Le(">>")}})(),(function(Te){if(Object.keys(tt).length>0){for(var Qe in Le("/Pattern <<"),tt)tt.hasOwnProperty(Qe)&&tt[Qe]instanceof x.TilingPattern&&tt[Qe].objectNumber>=0&&tt[Qe].objectNumber<Te&&Le("/"+Qe+" "+tt[Qe].objectNumber+" 0 R");Gt.publish("putTilingPatternDict"),Le(">>")}})(K.objectOid),(function(){if(Object.keys(Mt).length>0){var Te;for(Te in Le("/ExtGState <<"),Mt)Mt.hasOwnProperty(Te)&&Mt[Te].objectNumber>=0&&Le("/"+Te+" "+Mt[Te].objectNumber+" 0 R");Gt.publish("putGStateDict"),Le(">>")}})(),(function(){for(var Te in Le("/XObject <<"),Pr)Pr.hasOwnProperty(Te)&&Pr[Te].objectNumber>=0&&Le("/"+Te+" "+Pr[Te].objectNumber+" 0 R");Gt.publish("putXobjectDict"),Le(">>")})(),Le(">>"),Le("endobj")},Ji=function(K){Ae[K.fontName]=Ae[K.fontName]||{},Ae[K.fontName][K.fontStyle]=K.id},Eo=function(K,Te,Qe,Rt,Ht){var _r={id:"F"+(Object.keys(xe).length+1).toString(10),postScriptName:K,fontName:Te,fontStyle:Qe,encoding:Rt,isStandardFont:Ht||!1,metadata:{}};return Gt.publish("addFont",{font:_r,instance:this}),xe[_r.id]=_r,Ji(_r),_r.id},$n=x.__private__.pdfEscape=x.pdfEscape=function(K,Te){return(function(Qe,Rt){var Ht,_r,Dr,rn,pn,Nn,Wn,kn,Fi;if(Dr=(Rt=Rt||{}).sourceEncoding||"Unicode",pn=Rt.outputEncoding,(Rt.autoencode||pn)&&xe[Rr].metadata&&xe[Rr].metadata[Dr]&&xe[Rr].metadata[Dr].encoding&&(rn=xe[Rr].metadata[Dr].encoding,!pn&&xe[Rr].encoding&&(pn=xe[Rr].encoding),!pn&&rn.codePages&&(pn=rn.codePages[0]),typeof pn=="string"&&(pn=rn[pn]),pn)){for(Wn=!1,Nn=[],Ht=0,_r=Qe.length;Ht<_r;Ht++)(kn=pn[Qe.charCodeAt(Ht)])?Nn.push(String.fromCharCode(kn)):Nn.push(Qe[Ht]),Nn[Ht].charCodeAt(0)>>8&&(Wn=!0);Qe=Nn.join("")}for(Ht=Qe.length;Wn===void 0&&Ht!==0;)Qe.charCodeAt(Ht-1)>>8&&(Wn=!0),Ht--;if(!Wn)return Qe;for(Nn=Rt.noBOM?[]:[254,255],Ht=0,_r=Qe.length;Ht<_r;Ht++){if((Fi=(kn=Qe.charCodeAt(Ht))>>8)>>8)throw new Error("Character at position "+Ht+" of string '"+Qe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nn.push(Fi),Nn.push(kn-(Fi<<8))}return String.fromCharCode.apply(void 0,Nn)})(K,Te).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qn=x.__private__.beginPage=function(K){Nt[++zt]=[],Ct[zt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(K[0]),topRightY:Number(K[1])}},da(zt),gt(Nt[_e])},mi=function(K,Te){var Qe,Rt,Ht;switch(r=Te||r,typeof K=="string"&&(Qe=k(K.toLowerCase()),Array.isArray(Qe)&&(Rt=Qe[0],Ht=Qe[1])),Array.isArray(K)&&(Rt=K[0]*wr,Ht=K[1]*wr),isNaN(Rt)&&(Rt=i[0],Ht=i[1]),(Rt>14400||Ht>14400)&&(Pa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Rt=Math.min(14400,Rt),Ht=Math.min(14400,Ht)),i=[Rt,Ht],r.substr(0,1)){case"l":Ht>Rt&&(i=[Ht,Rt]);break;case"p":Rt>Ht&&(i=[Ht,Rt])}qn(i),Sr(Rn),Le(Ta),Sa!==0&&Le(Sa+" J"),Ms!==0&&Le(Ms+" j"),Gt.publish("addPage",{pageNumber:zt})},Hn=function(K){K>0&&K<=zt&&(Nt.splice(K,1),Ct.splice(K,1),zt--,_e>zt&&(_e=zt),this.setPage(_e))},da=function(K){K>0&&K<=zt&&(_e=K)},Ti=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Nt.length-1},Ha=function(K,Te,Qe){var Rt,Ht=void 0;return Qe=Qe||{},K=K!==void 0?K:xe[Rr].fontName,Te=Te!==void 0?Te:xe[Rr].fontStyle,Rt=K.toLowerCase(),Ae[Rt]!==void 0&&Ae[Rt][Te]!==void 0?Ht=Ae[Rt][Te]:Ae[K]!==void 0&&Ae[K][Te]!==void 0?Ht=Ae[K][Te]:Qe.disableWarning===!1&&Pa.warn("Unable to look up font label for font '"+K+"', '"+Te+"'. Refer to getFontList() for available fonts."),Ht||Qe.noFallback||(Ht=Ae.times[Te])==null&&(Ht=Ae.times.normal),Ht},_a=x.__private__.putInfo=function(){var K=et(),Te=function(Rt){return Rt};for(var Qe in m!==null&&(Te=wa.encryptor(K,0)),Le("<<"),Le("/Producer ("+$n(Te("jsPDF "+Ln.version))+")"),xr)xr.hasOwnProperty(Qe)&&xr[Qe]&&Le("/"+Qe.substr(0,1).toUpperCase()+Qe.substr(1)+" ("+$n(Te(xr[Qe]))+")");Le("/CreationDate ("+$n(Te(ue))+")"),Le(">>"),Le("endobj")},ts=x.__private__.putCatalog=function(K){var Te=(K=K||{}).rootDictionaryObjId||zr;switch(et(),Le("<<"),Le("/Type /Catalog"),Le("/Pages "+Te+" 0 R"),qe||(qe="fullwidth"),qe){case"fullwidth":Le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Le("/OpenAction [3 0 R /Fit]");break;case"original":Le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Qe=""+qe;Qe.substr(Qe.length-1)==="%"&&(qe=parseInt(qe)/100),typeof qe=="number"&&Le("/OpenAction [3 0 R /XYZ null null "+H(qe)+"]")}switch(Wt||(Wt="continuous"),Wt){case"continuous":Le("/PageLayout /OneColumn");break;case"single":Le("/PageLayout /SinglePage");break;case"two":case"twoleft":Le("/PageLayout /TwoColumnLeft");break;case"tworight":Le("/PageLayout /TwoColumnRight")}Ft&&Le("/PageMode /"+Ft),Gt.publish("putCatalog"),Le(">>"),Le("endobj")},xa=x.__private__.putTrailer=function(){Le("trailer"),Le("<<"),Le("/Size "+($e+1)),Le("/Root "+$e+" 0 R"),Le("/Info "+($e-1)+" 0 R"),m!==null&&Le("/Encrypt "+wa.oid+" 0 R"),Le("/ID [ <"+me+"> <"+me+"> ]"),Le(">>")},nc=x.__private__.putHeader=function(){Le("%PDF-"+P),Le("%ºß¬à")},ic=x.__private__.putXRef=function(){var K="0000000000";Le("xref"),Le("0 "+($e+1)),Le("0000000000 65535 f ");for(var Te=1;Te<=$e;Te++)typeof ht[Te]=="function"?Le((K+ht[Te]()).slice(-10)+" 00000 n "):ht[Te]!==void 0?Le((K+ht[Te]).slice(-10)+" 00000 n "):Le("0000000000 00000 n ")},Co=x.__private__.buildDocument=function(){var K;$e=0,mt=0,Ot=[],ht=[],nt=[],zr=Lt(),kr=Lt(),gt(Ot),Gt.publish("buildDocument"),nc(),An(),(function(){Gt.publish("putAdditionalObjects");for(var Qe=0;Qe<nt.length;Qe++){var Rt=nt[Qe];lr(Rt.objId,!0),Le(Rt.content),Le("endobj")}Gt.publish("postPutAdditionalObjects")})(),K=[],(function(){for(var Qe in xe)xe.hasOwnProperty(Qe)&&(v===!1||v===!0&&w.hasOwnProperty(Qe))&&Ni(xe[Qe])})(),(function(){var Qe;for(Qe in Mt)Mt.hasOwnProperty(Qe)&&Ri(Mt[Qe])})(),(function(){for(var Qe in Pr)Pr.hasOwnProperty(Qe)&&Mi(Pr[Qe])})(),(function(Qe){var Rt;for(Rt in tt)tt.hasOwnProperty(Rt)&&(tt[Rt]instanceof Vd?mn(tt[Rt]):tt[Rt]instanceof Um&&Pi(tt[Rt],Qe))})(K),Gt.publish("putResources"),K.forEach(ni),ni({resourcesOid:kr,objectOid:Number.MAX_SAFE_INTEGER}),Gt.publish("postPutResources"),m!==null&&(wa.oid=et(),Le("<<"),Le("/Filter /Standard"),Le("/V "+wa.v),Le("/R "+wa.r),Le("/U <"+wa.toHexString(wa.U)+">"),Le("/O <"+wa.toHexString(wa.O)+">"),Le("/P "+wa.P),Le(">>"),Le("endobj")),_a(),ts();var Te=mt;return ic(),xa(),Le("startxref"),Le(""+Te),Le("%%EOF"),gt(Nt[_e]),Ot.join(`
`)},Hs=x.__private__.getBlob=function(K){return new Blob([hr(K)],{type:"application/pdf"})},rs=x.output=x.__private__.output=(Be=function(K,Te){switch(typeof(Te=Te||{})=="string"?Te={filename:Te}:Te.filename=Te.filename||"generated.pdf",K){case void 0:return Co();case"save":x.save(Te.filename);break;case"arraybuffer":return hr(Co());case"blob":return Hs(Co());case"bloburi":case"bloburl":if(ei.URL!==void 0&&typeof ei.URL.createObjectURL=="function")return ei.URL&&ei.URL.createObjectURL(Hs(Co()))||void 0;Pa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Qe="",Rt=Co();try{Qe=eD(Rt)}catch{Qe=eD(unescape(encodeURIComponent(Rt)))}return"data:application/pdf;filename="+Te.filename+";base64,"+Qe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ei)==="[object Window]"){var Ht="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",_r=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Te.pdfObjectUrl&&(Ht=Te.pdfObjectUrl,_r="");var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ht+'"'+_r+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Te)+");<\/script></body></html>",rn=ei.open();return rn!==null&&rn.document.write(Dr),rn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ei)==="[object Window]"){var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Te.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Te.filename+'" width="500px" height="400px" /></body></html>',Nn=ei.open();if(Nn!==null){Nn.document.write(pn);var Wn=this;Nn.document.documentElement.querySelector("#pdfViewer").onload=function(){Nn.document.title=Te.filename,Nn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wn.output("bloburl"))}}return Nn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ei)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var kn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Te)+'"></iframe></body></html>',Fi=ei.open();if(Fi!==null&&(Fi.document.write(kn),Fi.document.title=Te.filename),Fi||typeof safari>"u")return Fi;break;case"datauri":case"dataurl":return ei.document.location.href=this.output("datauristring",Te);default:return null}},Be.foo=function(){try{return Be.apply(this,arguments)}catch(Qe){var K=Qe.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var Te="Error in function "+K.split(`
`)[0].split("<")[0]+": "+Qe.message;if(!ei.console)throw new Error(Te);ei.console.error(Te,Qe),ei.alert&&alert(Te)}},Be.foo.bar=Be,Be.foo),gs=function(K){return Array.isArray(vt)===!0&&vt.indexOf(K)>-1};switch(n){case"pt":wr=1;break;case"mm":wr=72/25.4;break;case"cm":wr=72/2.54;break;case"in":wr=72;break;case"px":wr=gs("px_scaling")==1?.75:96/72;break;case"pc":case"em":wr=12;break;case"ex":wr=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);wr=n}var wa=null;Ke(),pe();var Fu=x.__private__.getPageInfo=x.getPageInfo=function(K){if(isNaN(K)||K%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ct[K].objId,pageNumber:K,pageContext:Ct[K]}},Ll=x.__private__.getPageInfoByObjId=function(K){if(isNaN(K)||K%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Te in Ct)if(Ct[Te].objId===K)break;return Fu(Te)},Dl=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Ct[_e].objId,pageNumber:_e,pageContext:Ct[_e]}};x.addPage=function(){return mi.apply(this,arguments),this},x.setPage=function(){return da.apply(this,arguments),gt.call(this,Nt[_e]),this},x.insertPage=function(K){return this.addPage(),this.movePage(_e,K),this},x.movePage=function(K,Te){var Qe,Rt;if(K>Te){Qe=Nt[K],Rt=Ct[K];for(var Ht=K;Ht>Te;Ht--)Nt[Ht]=Nt[Ht-1],Ct[Ht]=Ct[Ht-1];Nt[Te]=Qe,Ct[Te]=Rt,this.setPage(Te)}else if(K<Te){Qe=Nt[K],Rt=Ct[K];for(var _r=K;_r<Te;_r++)Nt[_r]=Nt[_r+1],Ct[_r]=Ct[_r+1];Nt[Te]=Qe,Ct[Te]=Rt,this.setPage(Te)}return this},x.deletePage=function(){return Hn.apply(this,arguments),this},x.__private__.text=x.text=function(K,Te,Qe,Rt,Ht){var _r,Dr,rn,pn,Nn,Wn,kn,Fi,Ai,Yn=(Rt=Rt||{}).scope||this;if(typeof K=="number"&&typeof Te=="number"&&(typeof Qe=="string"||Array.isArray(Qe))){var ia=Qe;Qe=Te,Te=K,K=ia}if(arguments[3]instanceof ot==0?(rn=arguments[4],pn=arguments[5],ha(kn=arguments[3])==="object"&&kn!==null||(typeof rn=="string"&&(pn=rn,rn=null),typeof kn=="string"&&(pn=kn,kn=null),typeof kn=="number"&&(rn=kn,kn=null),Rt={flags:kn,angle:rn,align:pn})):(X("The transform parameter of text() with a Matrix value"),Ai=Ht),isNaN(Te)||isNaN(Qe)||K==null)throw new Error("Invalid arguments passed to jsPDF.text");if(K.length===0)return Yn;var qi,ta="",is=typeof Rt.lineHeightFactor=="number"?Rt.lineHeightFactor:ln,Ks=Yn.internal.scaleFactor;function cu(gn){return gn=gn.split("	").join(Array(Rt.TabLen||9).join(" ")),$n(gn,kn)}function $c(gn){for(var Fn,Jn=gn.concat(),wi=[],Si=Jn.length;Si--;)typeof(Fn=Jn.shift())=="string"?wi.push(Fn):Array.isArray(gn)&&(Fn.length===1||Fn[1]===void 0&&Fn[2]===void 0)?wi.push(Fn[0]):wi.push([Fn[0],Fn[1],Fn[2]]);return wi}function fu(gn,Fn){var Jn;if(typeof gn=="string")Jn=Fn(gn)[0];else if(Array.isArray(gn)){for(var wi,Si,Wi=gn.concat(),ja=[],os=Wi.length;os--;)typeof(wi=Wi.shift())=="string"?ja.push(Fn(wi)[0]):Array.isArray(wi)&&typeof wi[0]=="string"&&(Si=Fn(wi[0],wi[1],wi[2]),ja.push([Si[0],Si[1],Si[2]]));Jn=ja}return Jn}var $o=!1,Nl=!0;if(typeof K=="string")$o=!0;else if(Array.isArray(K)){var bl=K.concat();Dr=[];for(var as,pa=bl.length;pa--;)(typeof(as=bl.shift())!="string"||Array.isArray(as)&&typeof as[0]!="string")&&(Nl=!1);$o=Nl}if($o===!1)throw new Error('Type of text must be string or Array. "'+K+'" is not recognized.');typeof K=="string"&&(K=K.match(/[\r?\n]/)?K.split(/\r\n|\r|\n/g):[K]);var Za=Qt/Yn.internal.scaleFactor,Gi=Za*(is-1);switch(Rt.baseline){case"bottom":Qe-=Gi;break;case"top":Qe+=Za-Gi;break;case"hanging":Qe+=Za-2*Gi;break;case"middle":Qe+=Za/2-Gi}if((Wn=Rt.maxWidth||0)>0&&(typeof K=="string"?K=Yn.splitTextToSize(K,Wn):Object.prototype.toString.call(K)==="[object Array]"&&(K=K.reduce(function(gn,Fn){return gn.concat(Yn.splitTextToSize(Fn,Wn))},[]))),_r={text:K,x:Te,y:Qe,options:Rt,mutex:{pdfEscape:$n,activeFontKey:Rr,fonts:xe,activeFontSize:Qt}},Gt.publish("preProcessText",_r),K=_r.text,rn=(Rt=_r.options).angle,Ai instanceof ot==0&&rn&&typeof rn=="number"){rn*=Math.PI/180,Rt.rotationDirection===0&&(rn=-rn),D===F&&(rn=-rn);var vs=Math.cos(rn),Xs=Math.sin(rn);Ai=new ot(vs,Xs,-Xs,vs,0,0)}else rn&&rn instanceof ot&&(Ai=rn);D!==F||Ai||(Ai=ne),(Nn=Rt.charSpace||bn)!==void 0&&(ta+=J(ae(Nn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Fi=Rt.horizontalScale)!==void 0&&(ta+=J(100*Fi)+` Tz
`),Rt.lang;var Hi=-1,Fl=Rt.renderingMode!==void 0?Rt.renderingMode:Rt.stroke,Ys=Yn.internal.getCurrentPageInfo().pageContext;switch(Fl){case 0:case!1:case"fill":Hi=0;break;case 1:case!0:case"stroke":Hi=1;break;case 2:case"fillThenStroke":Hi=2;break;case 3:case"invisible":Hi=3;break;case 4:case"fillAndAddForClipping":Hi=4;break;case 5:case"strokeAndAddPathForClipping":Hi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Hi=6;break;case 7:case"addToPathForClipping":Hi=7}var bs=Ys.usedRenderingMode!==void 0?Ys.usedRenderingMode:-1;Hi!==-1?ta+=Hi+` Tr
`:bs!==-1&&(ta+=`0 Tr
`),Hi!==-1&&(Ys.usedRenderingMode=Hi),pn=Rt.align||"left";var Ea,Ka=Qt*is,ac=Yn.internal.pageSize.getWidth(),ju=xe[Rr];Nn=Rt.charSpace||bn,Wn=Rt.maxWidth||0,kn=Object.assign({autoencode:!0,noBOM:!0},Rt.flags);var _l=[],Js=function(gn){return Yn.getStringUnitWidth(gn,{font:ju,charSpace:Nn,fontSize:Qt,doKerning:!1})*Qt/Ks};if(Object.prototype.toString.call(K)==="[object Array]"){var Fa;Dr=$c(K),pn!=="left"&&(Ea=Dr.map(Js));var Ia,Bl=0;if(pn==="right"){Te-=Ea[0],K=[],pa=Dr.length;for(var Ba=0;Ba<pa;Ba++)Ba===0?(Ia=jn(Te),Fa=gi(Qe)):(Ia=ae(Bl-Ea[Ba]),Fa=-Ka),K.push([Dr[Ba],Ia,Fa]),Bl=Ea[Ba]}else if(pn==="center"){Te-=Ea[0]/2,K=[],pa=Dr.length;for(var Qs=0;Qs<pa;Qs++)Qs===0?(Ia=jn(Te),Fa=gi(Qe)):(Ia=ae((Bl-Ea[Qs])/2),Fa=-Ka),K.push([Dr[Qs],Ia,Fa]),Bl=Ea[Qs]}else if(pn==="left"){K=[],pa=Dr.length;for(var no=0;no<pa;no++)K.push(Dr[no])}else if(pn==="justify"&&ju.encoding==="Identity-H"){K=[],pa=Dr.length,Wn=Wn!==0?Wn:ac;for(var el=0,aa=0;aa<pa;aa++)if(Fa=aa===0?gi(Qe):-Ka,Ia=aa===0?jn(Te):el,aa<pa-1){var Rs=ae((Wn-Ea[aa])/(Dr[aa].split(" ").length-1)),_s=Dr[aa].split(" ");K.push([_s[0]+" ",Ia,Fa]),el=0;for(var qo=1;qo<_s.length;qo++){var hu=(Js(_s[qo-1]+" "+_s[qo])-Js(_s[qo]))*Ks+Rs;qo==_s.length-1?K.push([_s[qo],hu,0]):K.push([_s[qo]+" ",hu,0]),el-=hu}}else K.push([Dr[aa],Ia,Fa]);K.push(["",el,0])}else{if(pn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(K=[],pa=Dr.length,Wn=Wn!==0?Wn:ac,aa=0;aa<pa;aa++)Fa=aa===0?gi(Qe):-Ka,Ia=aa===0?jn(Te):0,aa<pa-1?_l.push(J(ae((Wn-Ea[aa])/(Dr[aa].split(" ").length-1)))):_l.push(0),K.push([Dr[aa],Ia,Fa])}}(typeof Rt.R2L=="boolean"?Rt.R2L:ct)===!0&&(K=fu(K,function(gn,Fn,Jn){return[gn.split("").reverse().join(""),Fn,Jn]})),_r={text:K,x:Te,y:Qe,options:Rt,mutex:{pdfEscape:$n,activeFontKey:Rr,fonts:xe,activeFontSize:Qt}},Gt.publish("postProcessText",_r),K=_r.text,qi=_r.mutex.isHex||!1;var du=xe[Rr].encoding;du!=="WinAnsiEncoding"&&du!=="StandardEncoding"||(K=fu(K,function(gn,Fn,Jn){return[cu(gn),Fn,Jn]})),Dr=$c(K),K=[];for(var Os,jl,zl,Ut=Array.isArray(Dr[0])?1:0,Zt="",Wr=function(gn,Fn,Jn){var wi="";return Jn instanceof ot?(Jn=typeof Rt.angle=="number"?jt(Jn,new ot(1,0,0,1,gn,Fn)):jt(new ot(1,0,0,1,gn,Fn),Jn),D===F&&(Jn=jt(new ot(1,0,0,-1,0,0),Jn)),wi=Jn.join(" ")+` Tm
`):wi=J(gn)+" "+J(Fn)+` Td
`,wi},en=0;en<Dr.length;en++){switch(Zt="",Ut){case 1:zl=(qi?"<":"(")+Dr[en][0]+(qi?">":")"),Os=parseFloat(Dr[en][1]),jl=parseFloat(Dr[en][2]);break;case 0:zl=(qi?"<":"(")+Dr[en]+(qi?">":")"),Os=jn(Te),jl=gi(Qe)}_l!==void 0&&_l[en]!==void 0&&(Zt=_l[en]+` Tw
`),en===0?K.push(Zt+Wr(Os,jl,Ai)+zl):Ut===0?K.push(Zt+zl):Ut===1&&K.push(Zt+Wr(Os,jl,Ai)+zl)}K=Ut===0?K.join(` Tj
T* `):K.join(` Tj
`),K+=` Tj
`;var ai=`BT
/`;return ai+=Rr+" "+Qt+` Tf
`,ai+=J(Qt*is)+` TL
`,ai+=Sn+`
`,ai+=ta,ai+=K,Le(ai+="ET"),w[Rr]=!0,Yn};var $=x.__private__.clip=x.clip=function(K){return Le(K==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return $("evenodd")},x.__private__.discardPath=x.discardPath=function(){return Le("n"),this};var te=x.__private__.isValidStyle=function(K){var Te=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(K)!==-1&&(Te=!0),Te};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(K){return te(K)&&(h=K),this};var Oe=x.__private__.getStyle=x.getStyle=function(K){var Te=h;switch(K){case"D":case"S":Te="S";break;case"F":Te="f";break;case"FD":case"DF":Te="B";break;case"f":case"f*":case"B":case"B*":Te=K}return Te},pt=x.close=function(){return Le("h"),this};x.stroke=function(){return Le("S"),this},x.fill=function(K){return At("f",K),this},x.fillEvenOdd=function(K){return At("f*",K),this},x.fillStroke=function(K){return At("B",K),this},x.fillStrokeEvenOdd=function(K){return At("B*",K),this};var At=function(K,Te){ha(Te)==="object"?Ir(Te,K):Le(K)},xt=function(K){K===null||D===F&&K===void 0||(K=Oe(K),Le(K))};function $t(K,Te,Qe,Rt,Ht){var _r=new Um(Te||this.boundingBox,Qe||this.xStep,Rt||this.yStep,this.gState,Ht||this.matrix);_r.stream=this.stream;var Dr=K+"$$"+this.cloneIndex+++"$$";return de(Dr,_r),_r}var Ir=function(K,Te){var Qe=_t[K.key],Rt=tt[Qe];if(Rt instanceof Vd)Le("q"),Le(Br(Te)),Rt.gState&&x.setGState(Rt.gState),Le(K.matrix.toString()+" cm"),Le("/"+Qe+" sh"),Le("Q");else if(Rt instanceof Um){var Ht=new ot(1,0,0,-1,0,Oi());K.matrix&&(Ht=Ht.multiply(K.matrix||ne),Qe=$t.call(Rt,K.key,K.boundingBox,K.xStep,K.yStep,Ht).id),Le("q"),Le("/Pattern cs"),Le("/"+Qe+" scn"),Rt.gState&&x.setGState(Rt.gState),Le(Te),Le("Q")}},Br=function(K){switch(K){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Xr=x.moveTo=function(K,Te){return Le(J(ae(K))+" "+J(se(Te))+" m"),this},Zr=x.lineTo=function(K,Te){return Le(J(ae(K))+" "+J(se(Te))+" l"),this},Nr=x.curveTo=function(K,Te,Qe,Rt,Ht,_r){return Le([J(ae(K)),J(se(Te)),J(ae(Qe)),J(se(Rt)),J(ae(Ht)),J(se(_r)),"c"].join(" ")),this};x.__private__.line=x.line=function(K,Te,Qe,Rt,Ht){if(isNaN(K)||isNaN(Te)||isNaN(Qe)||isNaN(Rt)||!te(Ht))throw new Error("Invalid arguments passed to jsPDF.line");return D===N?this.lines([[Qe-K,Rt-Te]],K,Te,[1,1],Ht||"S"):this.lines([[Qe-K,Rt-Te]],K,Te,[1,1]).stroke()},x.__private__.lines=x.lines=function(K,Te,Qe,Rt,Ht,_r){var Dr,rn,pn,Nn,Wn,kn,Fi,Ai,Yn,ia,qi,ta;if(typeof K=="number"&&(ta=Qe,Qe=Te,Te=K,K=ta),Rt=Rt||[1,1],_r=_r||!1,isNaN(Te)||isNaN(Qe)||!Array.isArray(K)||!Array.isArray(Rt)||!te(Ht)||typeof _r!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Xr(Te,Qe),Dr=Rt[0],rn=Rt[1],Nn=K.length,ia=Te,qi=Qe,pn=0;pn<Nn;pn++)(Wn=K[pn]).length===2?(ia=Wn[0]*Dr+ia,qi=Wn[1]*rn+qi,Zr(ia,qi)):(kn=Wn[0]*Dr+ia,Fi=Wn[1]*rn+qi,Ai=Wn[2]*Dr+ia,Yn=Wn[3]*rn+qi,ia=Wn[4]*Dr+ia,qi=Wn[5]*rn+qi,Nr(kn,Fi,Ai,Yn,ia,qi));return _r&&pt(),xt(Ht),this},x.path=function(K){for(var Te=0;Te<K.length;Te++){var Qe=K[Te],Rt=Qe.c;switch(Qe.op){case"m":Xr(Rt[0],Rt[1]);break;case"l":Zr(Rt[0],Rt[1]);break;case"c":Nr.apply(this,Rt);break;case"h":pt()}}return this},x.__private__.rect=x.rect=function(K,Te,Qe,Rt,Ht){if(isNaN(K)||isNaN(Te)||isNaN(Qe)||isNaN(Rt)||!te(Ht))throw new Error("Invalid arguments passed to jsPDF.rect");return D===N&&(Rt=-Rt),Le([J(ae(K)),J(se(Te)),J(ae(Qe)),J(ae(Rt)),"re"].join(" ")),xt(Ht),this},x.__private__.triangle=x.triangle=function(K,Te,Qe,Rt,Ht,_r,Dr){if(isNaN(K)||isNaN(Te)||isNaN(Qe)||isNaN(Rt)||isNaN(Ht)||isNaN(_r)||!te(Dr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Qe-K,Rt-Te],[Ht-Qe,_r-Rt],[K-Ht,Te-_r]],K,Te,[1,1],Dr,!0),this},x.__private__.roundedRect=x.roundedRect=function(K,Te,Qe,Rt,Ht,_r,Dr){if(isNaN(K)||isNaN(Te)||isNaN(Qe)||isNaN(Rt)||isNaN(Ht)||isNaN(_r)||!te(Dr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var rn=4/3*(Math.SQRT2-1);return Ht=Math.min(Ht,.5*Qe),_r=Math.min(_r,.5*Rt),this.lines([[Qe-2*Ht,0],[Ht*rn,0,Ht,_r-_r*rn,Ht,_r],[0,Rt-2*_r],[0,_r*rn,-Ht*rn,_r,-Ht,_r],[2*Ht-Qe,0],[-Ht*rn,0,-Ht,-_r*rn,-Ht,-_r],[0,2*_r-Rt],[0,-_r*rn,Ht*rn,-_r,Ht,-_r]],K+Ht,Te,[1,1],Dr,!0),this},x.__private__.ellipse=x.ellipse=function(K,Te,Qe,Rt,Ht){if(isNaN(K)||isNaN(Te)||isNaN(Qe)||isNaN(Rt)||!te(Ht))throw new Error("Invalid arguments passed to jsPDF.ellipse");var _r=4/3*(Math.SQRT2-1)*Qe,Dr=4/3*(Math.SQRT2-1)*Rt;return Xr(K+Qe,Te),Nr(K+Qe,Te-Dr,K+_r,Te-Rt,K,Te-Rt),Nr(K-_r,Te-Rt,K-Qe,Te-Dr,K-Qe,Te),Nr(K-Qe,Te+Dr,K-_r,Te+Rt,K,Te+Rt),Nr(K+_r,Te+Rt,K+Qe,Te+Dr,K+Qe,Te),xt(Ht),this},x.__private__.circle=x.circle=function(K,Te,Qe,Rt){if(isNaN(K)||isNaN(Te)||isNaN(Qe)||!te(Rt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(K,Te,Qe,Qe,Rt)},x.setFont=function(K,Te,Qe){return Qe&&(Te=Z(Te,Qe)),Rr=Ha(K,Te,{disableWarning:!1}),this};var wn=x.__private__.getFont=x.getFont=function(){return xe[Ha.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var K,Te,Qe={};for(K in Ae)if(Ae.hasOwnProperty(K))for(Te in Qe[K]=[],Ae[K])Ae[K].hasOwnProperty(Te)&&Qe[K].push(Te);return Qe},x.addFont=function(K,Te,Qe,Rt,Ht){var _r=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&_r.indexOf(arguments[3])!==-1?Ht=arguments[3]:arguments[3]&&_r.indexOf(arguments[3])==-1&&(Qe=Z(Qe,Rt)),Eo.call(this,K,Te,Qe,Ht=Ht||"Identity-H")};var ln,Rn=e.lineWidth||.200025,un=x.__private__.getLineWidth=x.getLineWidth=function(){return Rn},Sr=x.__private__.setLineWidth=x.setLineWidth=function(K){return Rn=K,Le(J(ae(K))+" w"),this};x.__private__.setLineDash=Ln.API.setLineDash=Ln.API.setLineDashPattern=function(K,Te){if(K=K||[],Te=Te||0,isNaN(Te)||!Array.isArray(K))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return K=K.map(function(Qe){return J(ae(Qe))}).join(" "),Te=J(ae(Te)),Le("["+K+"] "+Te+" d"),this};var Jr=x.__private__.getLineHeight=x.getLineHeight=function(){return Qt*ln};x.__private__.getLineHeight=x.getLineHeight=function(){return Qt*ln};var Dn=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(K){return typeof(K=K||1.15)=="number"&&(ln=K),this},li=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return ln};Dn(e.lineHeight);var jn=x.__private__.getHorizontalCoordinate=function(K){return ae(K)},gi=x.__private__.getVerticalCoordinate=function(K){return D===F?K:Ct[_e].mediaBox.topRightY-Ct[_e].mediaBox.bottomLeftY-ae(K)},Bu=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(K){return J(jn(K))},dn=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(K){return J(gi(K))},Ta=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return sn(Ta)},x.__private__.setStrokeColor=x.setDrawColor=function(K,Te,Qe,Rt){return Ta=xn({ch1:K,ch2:Te,ch3:Qe,ch4:Rt,pdfColorType:"draw",precision:2}),Le(Ta),this};var On=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return sn(On)},x.__private__.setFillColor=x.setFillColor=function(K,Te,Qe,Rt){return On=xn({ch1:K,ch2:Te,ch3:Qe,ch4:Rt,pdfColorType:"fill",precision:2}),Le(On),this};var Sn=e.textColor||"0 g",ns=x.__private__.getTextColor=x.getTextColor=function(){return sn(Sn)};x.__private__.setTextColor=x.setTextColor=function(K,Te,Qe,Rt){return Sn=xn({ch1:K,ch2:Te,ch3:Qe,ch4:Rt,pdfColorType:"text",precision:3}),this};var bn=e.charSpace,Ws=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(bn||0)};x.__private__.setCharSpace=x.setCharSpace=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return bn=K,this};var Sa=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(K){var Te=x.CapJoinStyles[K];if(Te===void 0)throw new Error("Line cap style of '"+K+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sa=Te,Le(Te+" J"),this};var Ms=0;x.__private__.setLineJoin=x.setLineJoin=function(K){var Te=x.CapJoinStyles[K];if(Te===void 0)throw new Error("Line join style of '"+K+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ms=Te,Le(Te+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(K){if(K=K||0,isNaN(K))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Le(J(ae(K))+" M"),this},x.GState=r1,x.setGState=function(K){(K=typeof K=="string"?Mt[Pt[K]]:Na(null,K)).equals(Kt)||(Le("/"+K.id+" gs"),Kt=K)};var Na=function(K,Te){if(!K||!Pt[K]){var Qe=!1;for(var Rt in Mt)if(Mt.hasOwnProperty(Rt)&&Mt[Rt].equals(Te)){Qe=!0;break}if(Qe)Te=Mt[Rt];else{var Ht="GS"+(Object.keys(Mt).length+1).toString(10);Mt[Ht]=Te,Te.id=Ht}return K&&(Pt[K]=Te.id),Gt.publish("addGState",Te),Te}};x.addGState=function(K,Te){return Na(K,Te),this},x.saveGraphicsState=function(){return Le("q"),Ue.push({key:Rr,size:Qt,color:Sn}),this},x.restoreGraphicsState=function(){Le("Q");var K=Ue.pop();return Rr=K.key,Qt=K.size,Sn=K.color,Kt=null,this},x.setCurrentTransformationMatrix=function(K){return Le(K.toString()+" cm"),this},x.comment=function(K){return Le("#"+K),this};var vl=function(K,Te){var Qe=K||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Qe},set:function(_r){isNaN(_r)||(Qe=parseFloat(_r))}});var Rt=Te||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Rt},set:function(_r){isNaN(_r)||(Rt=parseFloat(_r))}});var Ht="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ht},set:function(_r){Ht=_r.toString()}}),this},zo=function(K,Te,Qe,Rt){vl.call(this,K,Te),this.type="rect";var Ht=Qe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ht},set:function(Dr){isNaN(Dr)||(Ht=parseFloat(Dr))}});var _r=Rt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return _r},set:function(Dr){isNaN(Dr)||(_r=parseFloat(Dr))}}),this},lu=function(){this.page=zt,this.currentPage=_e,this.pages=Nt.slice(0),this.pagesContext=Ct.slice(0),this.x=fr,this.y=bt,this.matrix=ve,this.width=Zs(_e),this.height=Oi(_e),this.outputDestination=It,this.id="",this.objectNumber=-1};lu.prototype.restore=function(){zt=this.page,_e=this.currentPage,Ct=this.pagesContext,Nt=this.pages,fr=this.x,bt=this.y,ve=this.matrix,Ao(_e,this.width),Wa(_e,this.height),It=this.outputDestination};var uu=function(K,Te,Qe,Rt,Ht){Ye.push(new lu),zt=_e=0,Nt=[],fr=K,bt=Te,ve=Ht,qn([Qe,Rt])};for(var ys in x.beginFormObject=function(K,Te,Qe,Rt,Ht){return uu(K,Te,Qe,Rt,Ht),this},x.endFormObject=function(K){return(function(Te){if(Tr[Te])Ye.pop().restore();else{var Qe=new lu,Rt="Xo"+(Object.keys(Pr).length+1).toString(10);Qe.id=Rt,Tr[Te]=Rt,Pr[Rt]=Qe,Gt.publish("addFormObject",Qe),Ye.pop().restore()}})(K),this},x.doFormObject=function(K,Te){var Qe=Pr[Tr[K]];return Le("q"),Le(Te.toString()+" cm"),Le("/"+Qe.id+" Do"),Le("Q"),this},x.getFormObject=function(K){var Te=Pr[Tr[K]];return{x:Te.x,y:Te.y,width:Te.width,height:Te.height,matrix:Te.matrix}},x.save=function(K,Te){return K=K||"generated.pdf",(Te=Te||{}).returnPromise=Te.returnPromise||!1,Te.returnPromise===!1?($d(Hs(Co()),K),typeof $d.unload=="function"&&ei.setTimeout&&setTimeout($d.unload,911),this):new Promise(function(Qe,Rt){try{var Ht=$d(Hs(Co()),K);typeof $d.unload=="function"&&ei.setTimeout&&setTimeout($d.unload,911),Qe(Ht)}catch(_r){Rt(_r.message)}})},Ln.API)Ln.API.hasOwnProperty(ys)&&(ys==="events"&&Ln.API.events.length?(function(K,Te){var Qe,Rt,Ht;for(Ht=Te.length-1;Ht!==-1;Ht--)Qe=Te[Ht][0],Rt=Te[Ht][1],K.subscribe.apply(K,[Qe].concat(typeof Rt=="function"?[Rt]:Rt))})(Gt,Ln.API.events):x[ys]=Ln.API[ys]);var Zs=x.getPageWidth=function(K){return(Ct[K=K||_e].mediaBox.topRightX-Ct[K].mediaBox.bottomLeftX)/wr},Ao=x.setPageWidth=function(K,Te){Ct[K].mediaBox.topRightX=Te*wr+Ct[K].mediaBox.bottomLeftX},Oi=x.getPageHeight=function(K){return(Ct[K=K||_e].mediaBox.topRightY-Ct[K].mediaBox.bottomLeftY)/wr},Wa=x.setPageHeight=function(K,Te){Ct[K].mediaBox.topRightY=Te*wr+Ct[K].mediaBox.bottomLeftY};return x.internal={pdfEscape:$n,getStyle:Oe,getFont:wn,getFontSize:rt,getCharSpace:Ws,getTextColor:ns,getLineHeight:Jr,getLineHeightFactor:li,getLineWidth:un,write:pr,getHorizontalCoordinate:jn,getVerticalCoordinate:gi,getCoordinateString:Bu,getVerticalCoordinateString:dn,collections:{},newObject:et,newAdditionalObject:qt,newObjectDeferred:Lt,newObjectDeferredBegin:lr,getFilters:yr,putStream:Vr,events:Gt,scaleFactor:wr,pageSize:{getWidth:function(){return Zs(_e)},setWidth:function(K){Ao(_e,K)},getHeight:function(){return Oi(_e)},setHeight:function(K){Wa(_e,K)}},encryptionOptions:m,encryption:wa,getEncryptor:function(K){return m!==null?wa.encryptor(K,0):function(Te){return Te}},output:rs,getNumberOfPages:Ti,pages:Nt,out:Le,f2:H,f3:G,getPageInfo:Fu,getPageInfoByObjId:Ll,getCurrentPageInfo:Dl,getPDFVersion:T,Point:vl,Rectangle:zo,Matrix:ot,hasHotfix:gs},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Zs(_e)},set:function(K){Ao(_e,K)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return Oi(_e)},set:function(K){Wa(_e,K)},enumerable:!0,configurable:!0}),(function(K){for(var Te=0,Qe=vr.length;Te<Qe;Te++){var Rt=Eo.call(this,K[Te][0],K[Te][1],K[Te][2],vr[Te][3],!0);v===!1&&(w[Rt]=!0);var Ht=K[Te][0].split("-");Ji({id:Rt,fontName:Ht[0],fontStyle:Ht[1]||""})}Gt.publish("addFonts",{fonts:xe,dictionary:Ae})}).call(x,vr),Rr="F1",mi(i,r),Gt.publish("initialized"),x}xm.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},xm.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},xm.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},xm.prototype.processOwnerPassword=function(e,t){return tT(eT(t).substr(0,5),e)},xm.prototype.encryptor=function(e,t){var r=eT(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return tT(r,n)}},r1.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ha(e)!==ha(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Ln.API={events:[]},Ln.version="3.0.2";var _o=Ln.API,NI=1,Sp=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cm=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ri=function(e){return e.toFixed(2)},Lh=function(e){return e.toFixed(5)};_o.__acroform__={};var iu=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},iD=function(e){return e*NI},of=function(e){var t=new zq,r=En.internal.getHeight(e)||0,n=En.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ri(n)),Number(ri(r))],t},oue=_o.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},sue=_o.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},lue=_o.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Oo=_o.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return lue(e,t-1)},ko=_o.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return oue(e,t-1)},Lo=_o.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return sue(e,t-1)},uue=_o.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],o=e[1],u=e[2],a=e[3],p={};return p.lowerLeft_X=r(i)||0,p.lowerLeft_Y=n(o+a)||0,p.upperRight_X=r(i+u)||0,p.upperRight_Y=n(o)||0,[Number(ri(p.lowerLeft_X)),Number(ri(p.lowerLeft_Y)),Number(ri(p.upperRight_X)),Number(ri(p.upperRight_Y))]},cue=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=rT(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+ri(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=of(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},rT=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(H){return H.split(`
`)}):i.map(function(H){return[H]});var o=r,u=En.internal.getHeight(e)||0;u=u<0?-u:u;var a=En.internal.getWidth(e)||0;a=a<0?-a:a;var p=function(H,G,ae){if(H+1<i.length){var se=G+" "+i[H+1][0];return jb(se,e,ae).width<=a-4}return!1};o++;e:for(;o>0;){t="",o--;var h,m,v=jb("3",e,o).height,w=e.multiline?u-o:(u-v)/2,x=w+=2,P=0,T=0,R=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+jb(t,e,o=12).width+", FieldWidth:"+a+`
`;break}for(var k="",N=0,F=0;F<i.length;F++)if(i.hasOwnProperty(F)){var D=!1;if(i[F].length!==1&&R!==i[F].length-1){if((v+2)*(N+2)+2>u)continue e;k+=i[F][R],D=!0,T=F,F--}else{k=(k+=i[F][R]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var U=parseInt(F),B=p(U,k,o),Z=F>=i.length-1;if(B&&!Z){k+=" ",R=0;continue}if(B||Z){if(Z)T=U;else if(e.multiline&&(v+2)*(N+2)+2>u)continue e}else{if(!e.multiline||(v+2)*(N+2)+2>u)continue e;T=U}}for(var J="",X=P;X<=T;X++){var le=i[X];if(e.multiline){if(X===T){J+=le[R]+" ",R=(R+1)%le.length;continue}if(X===P){J+=le[le.length-1]+" ";continue}}J+=le[0]+" "}switch(J=J.substr(J.length-1)==" "?J.substr(0,J.length-1):J,m=jb(J,e,o).width,e.textAlign){case"right":h=a-m-2;break;case"center":h=(a-m)/2;break;default:h=2}t+=ri(h)+" "+ri(x)+` Td
`,t+="("+Sp(J)+`) Tj
`,t+=-ri(h)+` 0 Td
`,x=-(o+2),m=0,P=D?T:T+1,N++,k=""}break}return n.text=t,n.fontSize=o,n},jb=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},fue={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},hue=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},due=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Dc.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(fue)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");NI=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new $q,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&hue(o,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var o=!n;for(var u in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(u)){var a=n[u],p=[],h=a.Rect;if(a.Rect&&(a.Rect=uue(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=En.createDefaultAppearanceStream(a),ha(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(p=a.getKeyValueListForStream()),a.Rect=h,a.hasAppearanceStream&&!a.appearanceStreamContent){var m=cue(a);p.push({key:"AP",value:"<</N "+m+">>"}),i.internal.acroformPlugin.xForms.push(m)}if(a.appearanceStreamContent){var v="";for(var w in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(w)){var x=a.appearanceStreamContent[w];if(v+="/"+w+" ",v+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var u in x)if(x.hasOwnProperty(u)){var P=x[u];typeof P=="function"&&(P=P.call(i,a)),v+="/"+u+" "+P+" ",i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P)}}else typeof(P=x)=="function"&&(P=P.call(i,a)),v+="/"+u+" "+P,i.internal.acroformPlugin.xForms.indexOf(P)>=0||i.internal.acroformPlugin.xForms.push(P);v+=">>"}p.push({key:"AP",value:`<<
`+v+">>"})}i.internal.putStream({additionalKeyValues:p,objectId:a.objId}),i.internal.out("endobj")}o&&(function(T,R){for(var k in T)if(T.hasOwnProperty(k)){var N=k,F=T[k];R.internal.newObjectDeferredBegin(F.objId,!0),ha(F)==="object"&&typeof F.putStream=="function"&&F.putStream(),delete T[N]}})(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},jq=_o.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(u){return u};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(o!==0&&(i+=" "),ha(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+Sp(n(e[o].toString()))+")"):i+=e[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},a5=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Sp(n(e))+")"},pf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};pf.prototype.toString=function(){return this.objId+" 0 R"},pf.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},pf.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:jq(i,this.objId,this.scope)}):i instanceof pf?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var zq=function(){pf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};iu(zq,pf);var $q=function(){pf.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Sp(r(e))+")"}},set:function(r){e=r}})};iu($q,pf);var Dc=function e(){pf.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');t=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Oo(t,3)},set:function(k){k?this.F=ko(t,3):this.F=Lo(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');r=k}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(k){n=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(k){n[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(k){n[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(k){n[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(k){n[3]=k}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof n1)return;o="FieldObject"+e.FieldNum++}var k=function(N){return N};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+Sp(k(o))+")"},set:function(k){o=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(k){o=k}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(k){u=k}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(k){p=k}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/NI:h},set:function(k){h=k}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(k){m=k}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof n1||this instanceof ap))return a5(v,this.objId,this.scope)},set:function(k){k=k.toString(),v=k}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Is==0?a5(w,this.objId,this.scope):w},set:function(k){k=k.toString(),w=this instanceof Is==0?k.substr(0,1)==="("?cm(k.substr(1,k.length-2)):cm(k):k}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Is==1?cm(w.substr(1,w.length-1)):w},set:function(k){k=k.toString(),w=this instanceof Is==1?"/"+k:k}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Is==0?a5(x,this.objId,this.scope):x},set:function(k){k=k.toString(),x=this instanceof Is==0?k.substr(0,1)==="("?cm(k.substr(1,k.length-2)):cm(k):k}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Is==1?cm(x.substr(1,x.length-1)):x},set:function(k){k=k.toString(),x=this instanceof Is==1?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,T=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return T},set:function(k){k=!!k,T=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(k){P=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,1)},set:function(k){k?this.Ff=ko(this.Ff,1):this.Ff=Lo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,2)},set:function(k){k?this.Ff=ko(this.Ff,2):this.Ff=Lo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,3)},set:function(k){k?this.Ff=ko(this.Ff,3):this.Ff=Lo(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');R=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(R){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:R=2;break;case"center":case 1:R=1;break;default:R=0}}})};iu(Dc,pf);var Ym=function(){Dc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return jq(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=(function(o,u,a){a||(a=1);for(var p,h=[];p=u.exec(o);)h.push(p[a]);return h})(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,18)},set:function(r){r?this.Ff=ko(this.Ff,18):this.Ff=Lo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ko(this.Ff,19):this.Ff=Lo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,20)},set:function(r){r?(this.Ff=ko(this.Ff,20),t.sort()):this.Ff=Lo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,22)},set:function(r){r?this.Ff=ko(this.Ff,22):this.Ff=Lo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,23)},set:function(r){r?this.Ff=ko(this.Ff,23):this.Ff=Lo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,27)},set:function(r){r?this.Ff=ko(this.Ff,27):this.Ff=Lo(this.Ff,27)}}),this.hasAppearanceStream=!1};iu(Ym,Dc);var Jm=function(){Ym.call(this),this.fontName="helvetica",this.combo=!1};iu(Jm,Ym);var Qm=function(){Jm.call(this),this.combo=!0};iu(Qm,Jm);var E_=function(){Qm.call(this),this.edit=!0};iu(E_,Qm);var Is=function(){Dc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,15)},set:function(r){r?this.Ff=ko(this.Ff,15):this.Ff=Lo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,16)},set:function(r){r?this.Ff=ko(this.Ff,16):this.Ff=Lo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,17)},set:function(r){r?this.Ff=ko(this.Ff,17):this.Ff=Lo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,26)},set:function(r){r?this.Ff=ko(this.Ff,26):this.Ff=Lo(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+Sp(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){ha(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};iu(Is,Dc);var C_=function(){Is.call(this),this.pushButton=!0};iu(C_,Is);var eg=function(){Is.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};iu(eg,Is);var n1=function(){var e,t;Dc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),n)u.push("/"+o+" ("+Sp(i(n[o]))+")");return u.push(">>"),u.join(`
`)},set:function(i){ha(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=En.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};iu(n1,Dc),eg.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},eg.prototype.createOption=function(e){var t=new n1;return t.Parent=this,t.optionName=e,this.Kids.push(t),pue.call(this.scope,t),t};var A_=function(){Is.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=En.CheckBox.createAppearanceStream()};iu(A_,Is);var ap=function(){Dc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,13)},set:function(t){t?this.Ff=ko(this.Ff,13):this.Ff=Lo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,21)},set:function(t){t?this.Ff=ko(this.Ff,21):this.Ff=Lo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,23)},set:function(t){t?this.Ff=ko(this.Ff,23):this.Ff=Lo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,24)},set:function(t){t?this.Ff=ko(this.Ff,24):this.Ff=Lo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,25)},set:function(t){t?this.Ff=ko(this.Ff,25):this.Ff=Lo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,26)},set:function(t){t?this.Ff=ko(this.Ff,26):this.Ff=Lo(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};iu(ap,Dc);var P_=function(){ap.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Oo(this.Ff,14)},set:function(e){e?this.Ff=ko(this.Ff,14):this.Ff=Lo(this.Ff,14)}}),this.password=!0};iu(P_,ap);var En={CheckBox:{createAppearanceStream:function(){return{N:{On:En.CheckBox.YesNormal},D:{On:En.CheckBox.YesPushDown,Off:En.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=of(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=rT(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+ri(En.internal.getWidth(e))+" "+ri(En.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+ri(o.fontSize)+" Tf "+i),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=of(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],o=En.internal.getHeight(e),u=En.internal.getWidth(e),a=rT(e,e.caption);return i.push("1 g"),i.push("0 0 "+ri(u)+" "+ri(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ri(u-1)+" "+ri(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+ri(a.fontSize)+" Tf "+n),i.push(a.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=of(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ri(En.internal.getWidth(e))+" "+ri(En.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:En.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=En.RadioButton.Circle.YesNormal,t.D[e]=En.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=of(e);t.scope=e.scope;var r=[],n=En.internal.getWidth(e)<=En.internal.getHeight(e)?En.internal.getWidth(e)/4:En.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=En.internal.Bezier_C,o=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Lh(En.internal.getWidth(e)/2)+" "+Lh(En.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=of(e);t.scope=e.scope;var r=[],n=En.internal.getWidth(e)<=En.internal.getHeight(e)?En.internal.getWidth(e)/4:En.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*En.internal.Bezier_C).toFixed(5)),u=Number((n*En.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Lh(En.internal.getWidth(e)/2)+" "+Lh(En.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Lh(En.internal.getWidth(e)/2)+" "+Lh(En.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+u+" "+u+" "+n+" 0 "+n+" c"),r.push("-"+u+" "+n+" -"+n+" "+u+" -"+n+" 0 c"),r.push("-"+n+" -"+u+" -"+u+" -"+n+" 0 -"+n+" c"),r.push(u+" -"+n+" "+n+" -"+u+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=of(e);t.scope=e.scope;var r=[],n=En.internal.getWidth(e)<=En.internal.getHeight(e)?En.internal.getWidth(e)/4:En.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*En.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Lh(En.internal.getWidth(e)/2)+" "+Lh(En.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:En.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=En.RadioButton.Cross.YesNormal,t.D[e]=En.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=of(e);t.scope=e.scope;var r=[],n=En.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+ri(En.internal.getWidth(e)-2)+" "+ri(En.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ri(n.x1.x)+" "+ri(n.x1.y)+" m"),r.push(ri(n.x2.x)+" "+ri(n.x2.y)+" l"),r.push(ri(n.x4.x)+" "+ri(n.x4.y)+" m"),r.push(ri(n.x3.x)+" "+ri(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=of(e);t.scope=e.scope;var r=En.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+ri(En.internal.getWidth(e))+" "+ri(En.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+ri(En.internal.getWidth(e)-2)+" "+ri(En.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ri(r.x1.x)+" "+ri(r.x1.y)+" m"),n.push(ri(r.x2.x)+" "+ri(r.x2.y)+" l"),n.push(ri(r.x4.x)+" "+ri(r.x4.y)+" m"),n.push(ri(r.x3.x)+" "+ri(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=of(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ri(En.internal.getWidth(e))+" "+ri(En.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};En.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=En.internal.getWidth(e),r=En.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},En.internal.getWidth=function(e){var t=0;return ha(e)==="object"&&(t=iD(e.Rect[2])),t},En.internal.getHeight=function(e){var t=0;return ha(e)==="object"&&(t=iD(e.Rect[3])),t};var pue=_o.addField=function(e){if(due(this,e),!(e instanceof Dc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};_o.AcroFormChoiceField=Ym,_o.AcroFormListBox=Jm,_o.AcroFormComboBox=Qm,_o.AcroFormEditBox=E_,_o.AcroFormButton=Is,_o.AcroFormPushButton=C_,_o.AcroFormRadioButton=eg,_o.AcroFormCheckBox=A_,_o.AcroFormTextField=ap,_o.AcroFormPasswordField=P_,_o.AcroFormAppearance=En,_o.AcroForm={ChoiceField:Ym,ListBox:Jm,ComboBox:Qm,EditBox:E_,Button:Is,PushButton:C_,RadioButton:eg,CheckBox:A_,TextField:ap,PasswordField:P_,Appearance:En},Ln.AcroForm={ChoiceField:Ym,ListBox:Jm,ComboBox:Qm,EditBox:E_,Button:Is,PushButton:C_,RadioButton:eg,CheckBox:A_,TextField:ap,PasswordField:P_,Appearance:En};Ln.AcroForm;function qq(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(H,G){var ae,se,ue,me,Ce,pe=r;if((G=G||r)==="RGBA"||H.data!==void 0&&H.data instanceof Uint8ClampedArray&&"height"in H&&"width"in H)return"RGBA";if(B(H))for(Ce in n)for(ue=n[Ce],ae=0;ae<ue.length;ae+=1){for(me=!0,se=0;se<ue[ae].length;se+=1)if(ue[ae][se]!==void 0&&ue[ae][se]!==H[se]){me=!1;break}if(me===!0){pe=Ce;break}}else for(Ce in n)for(ue=n[Ce],ae=0;ae<ue.length;ae+=1){for(me=!0,se=0;se<ue[ae].length;se+=1)if(ue[ae][se]!==void 0&&ue[ae][se]!==H.charCodeAt(se)){me=!1;break}if(me===!0){pe=Ce;break}}return pe===r&&G!==r&&(pe=G),pe},o=function H(G){for(var ae=this.internal.write,se=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var me=[];if(me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Image"}),me.push({key:"Width",value:G.width}),me.push({key:"Height",value:G.height}),G.colorSpace===k.INDEXED?me.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(me.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===k.DEVICE_CMYK&&me.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),me.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&me.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)){for(var Ce="",pe=0,Ee=G.transparency.length;pe<Ee;pe++)Ce+=G.transparency[pe]+" "+G.transparency[pe]+" ";me.push({key:"Mask",value:"["+Ce+"]"})}G.sMask!==void 0&&me.push({key:"SMask",value:G.objectId+1+" 0 R"});var Fe=G.filter!==void 0?["/"+G.filter]:void 0;if(se({data:G.data,additionalKeyValues:me,alreadyAppliedFilters:Fe,objectId:G.objectId}),ae("endobj"),"sMask"in G&&G.sMask!==void 0){var Ke=(G.predictor!=null?"/Predictor "+G.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+G.width,fe={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:G.bitsPerComponent,decodeParameters:Ke,data:G.sMask};"filter"in G&&(fe.filter=G.filter),H.call(this,fe)}if(G.colorSpace===k.INDEXED){var _e=this.internal.newObject();se({data:J(new Uint8Array(G.palette)),objectId:_e}),ae("endobj")}},u=function(){var H=this.internal.collections[t+"images"];for(var G in H)o.call(this,H[G])},a=function(){var H,G=this.internal.collections[t+"images"],ae=this.internal.write;for(var se in G)ae("/I"+(H=G[se]).index,H.objectId,"0","R")},p=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",a))},h=function(){var H=this.internal.collections[t+"images"];return p.call(this),H},m=function(){return Object.keys(this.internal.collections[t+"images"]).length},v=function(H){return typeof e["process"+H.toUpperCase()]=="function"},w=function(H){return ha(H)==="object"&&H.nodeType===1},x=function(H,G){if(H.nodeName==="IMG"&&H.hasAttribute("src")){var ae=""+H.getAttribute("src");if(ae.indexOf("data:image/")===0)return S_(unescape(ae).split("base64,").pop());var se=e.loadFile(ae,!0);if(se!==void 0)return se}if(H.nodeName==="CANVAS"){if(H.width===0||H.height===0)throw new Error("Given canvas must have data. Canvas width: "+H.width+", height: "+H.height);var ue;switch(G){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;default:ue="image/jpeg"}return S_(H.toDataURL(ue,1).split("base64,").pop())}},P=function(H){var G=this.internal.collections[t+"images"];if(G){for(var ae in G)if(H===G[ae].alias)return G[ae]}},T=function(H,G,ae){return H||G||(H=-96,G=-96),H<0&&(H=-1*ae.width*72/H/this.internal.scaleFactor),G<0&&(G=-1*ae.height*72/G/this.internal.scaleFactor),H===0&&(H=G*ae.width/ae.height),G===0&&(G=H*ae.height/ae.width),[H,G]},R=function(H,G,ae,se,ue,me){var Ce=T.call(this,ae,se,ue),pe=this.internal.getCoordinateString,Ee=this.internal.getVerticalCoordinateString,Fe=h.call(this);if(ae=Ce[0],se=Ce[1],Fe[ue.index]=ue,me){me*=Math.PI/180;var Ke=Math.cos(me),fe=Math.sin(me),_e=function(ke){return ke.toFixed(4)},Pe=[_e(Ke),_e(fe),_e(-1*fe),_e(Ke),0,0,"cm"]}this.internal.write("q"),me?(this.internal.write([1,"0","0",1,pe(H),Ee(G+se),"cm"].join(" ")),this.internal.write(Pe.join(" ")),this.internal.write([pe(ae),"0","0",pe(se),"0","0","cm"].join(" "))):this.internal.write([pe(ae),"0","0",pe(se),pe(H),Ee(G+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},k=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=e.__addimage__.sHashCode=function(H){var G,ae,se=0;if(typeof H=="string")for(ae=H.length,G=0;G<ae;G++)se=(se<<5)-se+H.charCodeAt(G),se|=0;else if(B(H))for(ae=H.byteLength/2,G=0;G<ae;G++)se=(se<<5)-se+H[G],se|=0;return se},D=e.__addimage__.validateStringAsBase64=function(H){(H=H||"").toString().trim();var G=!0;return H.length===0&&(G=!1),H.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(H.substr(0,H.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(H.substr(-2))===!1&&(G=!1),G},U=e.__addimage__.extractImageFromDataUrl=function(H){if(H==null||!(H=H.trim()).startsWith("data:"))return null;var G=H.indexOf(",");return G<0?null:H.substring(0,G).trim().endsWith("base64")?H.substring(G+1):null};e.__addimage__.isArrayBuffer=function(H){return H instanceof ArrayBuffer};var B=e.__addimage__.isArrayBufferView=function(H){return H instanceof Int8Array||H instanceof Uint8Array||H instanceof Uint8ClampedArray||H instanceof Int16Array||H instanceof Uint16Array||H instanceof Int32Array||H instanceof Uint32Array||H instanceof Float32Array||H instanceof Float64Array},Z=e.__addimage__.binaryStringToUint8Array=function(H){for(var G=H.length,ae=new Uint8Array(G),se=0;se<G;se++)ae[se]=H.charCodeAt(se);return ae},J=e.__addimage__.arrayBufferToBinaryString=function(H){for(var G="",ae=B(H)?H:new Uint8Array(H),se=0;se<ae.length;se+=8192)G+=String.fromCharCode.apply(null,ae.subarray(se,se+8192));return G};e.addImage=function(){var H,G,ae,se,ue,me,Ce,pe,Ee;if(typeof arguments[1]=="number"?(G=r,ae=arguments[1],se=arguments[2],ue=arguments[3],me=arguments[4],Ce=arguments[5],pe=arguments[6],Ee=arguments[7]):(G=arguments[1],ae=arguments[2],se=arguments[3],ue=arguments[4],me=arguments[5],Ce=arguments[6],pe=arguments[7],Ee=arguments[8]),ha(H=arguments[0])==="object"&&!w(H)&&"imageData"in H){var Fe=H;H=Fe.imageData,G=Fe.format||G||r,ae=Fe.x||ae||0,se=Fe.y||se||0,ue=Fe.w||Fe.width||ue,me=Fe.h||Fe.height||me,Ce=Fe.alias||Ce,pe=Fe.compression||pe,Ee=Fe.rotation||Fe.angle||Ee}var Ke=this.internal.getFilters();if(pe===void 0&&Ke.indexOf("FlateEncode")!==-1&&(pe="SLOW"),isNaN(ae)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var fe=X.call(this,H,G,Ce,pe);return R.call(this,ae,se,ue,me,fe,Ee),this};var X=function(H,G,ae,se){var ue,me,Ce;if(typeof H=="string"&&i(H)===r){H=unescape(H);var pe=le(H,!1);(pe!==""||(pe=e.loadFile(H,!0))!==void 0)&&(H=pe)}if(w(H)&&(H=x(H,G)),G=i(H,G),!v(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((Ce=ae)==null||Ce.length===0)&&(ae=(function(Ee){return typeof Ee=="string"||B(Ee)?F(Ee):B(Ee.data)?F(Ee.data):null})(H)),(ue=P.call(this,ae))||(H instanceof Uint8Array||G==="RGBA"||(me=H,H=Z(H)),ue=this["process"+G.toUpperCase()](H,m.call(this),ae,(function(Ee){return Ee&&typeof Ee=="string"&&(Ee=Ee.toUpperCase()),Ee in e.image_compression?Ee:N.NONE})(se),me)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},le=e.__addimage__.convertBase64ToBinaryString=function(H,G){G=typeof G!="boolean"||G;var ae,se="";if(typeof H=="string"){var ue;ae=(ue=U(H))!==null&&ue!==void 0?ue:H;try{se=S_(ae)}catch(me){if(G)throw D(ae)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+me.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};e.getImageProperties=function(H){var G,ae,se="";if(w(H)&&(H=x(H)),typeof H=="string"&&i(H)===r&&((se=le(H,!1))===""&&(se=e.loadFile(H)||""),H=se),ae=i(H),!v(ae))throw new Error("addImage does not support files of type '"+ae+"', please ensure that a plugin for '"+ae+"' support is added.");if(H instanceof Uint8Array||(H=Z(H)),!(G=this["process"+ae.toUpperCase()](H)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=ae,G}})(Ln.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Ln.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,o,u=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(r.objId),h=r.pageContext.annotations,m=!1,v=0;v<h.length&&!m;v++)switch((n=h[v]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var w=0;w<h.length;w++){n=h[w];var x=this.internal.pdfEscape,P=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var T=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(T.objId),N=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+u(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+u(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+x(k(n.contents))+")",o+=" /Popup "+R.objId+" 0 R",o+=" /P "+p.objId+" 0 R",o+=" /T ("+x(k(N))+") >>",T.content=o;var F=T.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+u(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+u(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+F,n.open&&(o+=" /Open true"),o+=" >>",R.content=o,this.internal.write(T.objId,"0 R",R.objId,"0 R");break;case"freetext":i="/Rect ["+u(n.bounds.x)+" "+a(n.bounds.y)+" "+u(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var D=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+x(P(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var U=this.annotations._nameMap[n.options.name];n.options.pageNumber=U.page,n.options.top=U.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+x(P(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var B=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+B+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,o,u){var a=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:p(r),y:h(n),w:p(r+i),h:h(n+o)},options:u,type:"link"})},e.textWithLink=function(r,n,i,o){var u,a,p=this.getTextWidth(r),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var m=this.splitTextToSize(r,a).length;u=Math.ceil(h*m)}else a=p,u=h;return this.text(r,n,i,o),i+=.2*h,o.align==="center"&&(n-=p/2),o.align==="right"&&(n-=p),this.link(n,i-h,a,u,o),p},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(Ln.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(T){return t[T.charCodeAt(0)]!==void 0},u=e.__arabicParser__.isArabicLetter=function(T){return typeof T=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(T)},a=e.__arabicParser__.isArabicEndLetter=function(T){return u(T)&&o(T)&&t[T.charCodeAt(0)].length<=2},p=e.__arabicParser__.isArabicAlfLetter=function(T){return u(T)&&i.indexOf(T.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(T){return u(T)&&o(T)&&t[T.charCodeAt(0)].length>=1};var h=e.__arabicParser__.arabicLetterHasFinalForm=function(T){return u(T)&&o(T)&&t[T.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(T){return u(T)&&o(T)&&t[T.charCodeAt(0)].length>=3};var m=e.__arabicParser__.arabicLetterHasMedialForm=function(T){return u(T)&&o(T)&&t[T.charCodeAt(0)].length==4},v=e.__arabicParser__.resolveLigatures=function(T){var R=0,k=r,N="",F=0;for(R=0;R<T.length;R+=1)k[T.charCodeAt(R)]!==void 0?(F++,typeof(k=k[T.charCodeAt(R)])=="number"&&(N+=String.fromCharCode(k),k=r,F=0),R===T.length-1&&(k=r,N+=T.charAt(R-(F-1)),R-=F-1,F=0)):(k=r,N+=T.charAt(R-F),R-=F,F=0);return N};e.__arabicParser__.isArabicDiacritic=function(T){return T!==void 0&&n[T.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(T,R,k){return u(T)?o(T)===!1?-1:!h(T)||!u(R)&&!u(k)||!u(k)&&a(R)||a(T)&&!u(R)||a(T)&&p(R)||a(T)&&a(R)?0:m(T)&&u(R)&&!a(R)&&u(k)&&h(k)?3:a(T)||!u(k)?1:2:-1},x=function(T){var R=0,k=0,N=0,F="",D="",U="",B=(T=T||"").split("\\s+"),Z=[];for(R=0;R<B.length;R+=1){for(Z.push(""),k=0;k<B[R].length;k+=1)F=B[R][k],D=B[R][k-1],U=B[R][k+1],u(F)?(N=w(F,D,U),Z[R]+=N!==-1?String.fromCharCode(t[F.charCodeAt(0)][N]):F):Z[R]+=F;Z[R]=v(Z[R])}return Z.join(" ")},P=e.__arabicParser__.processArabic=e.processArabic=function(){var T,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(R)){var N=0;for(k=[],N=0;N<R.length;N+=1)Array.isArray(R[N])?k.push([x(R[N][0]),R[N][1],R[N][2]]):k.push([x(R[N])]);T=k}else T=x(R);return typeof arguments[0]=="string"?T:(arguments[0].text=T,arguments[0])};e.events.push(["preProcessText",P])})(Ln.API),Ln.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(a){u=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Ln.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(T){p=T}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(T){h=T}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(T){m=T}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(T){v=T}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(T){w=T}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(T){x=T}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(T){P=T}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(p){return n.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},e.getTextDimensions=function(p,h){n.call(this);var m=(h=h||{}).fontSize||this.getFontSize(),v=h.font||this.getFont(),w=h.scaleFactor||this.internal.scaleFactor,x=0,P=0,T=0,R=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var k=h.maxWidth;k>0?typeof p=="string"?p=this.splitTextToSize(p,k):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(F,D){return F.concat(R.splitTextToSize(D,k))},[])):p=Array.isArray(p)?p:[p];for(var N=0;N<p.length;N++)x<(T=this.getStringUnitWidth(p[N],{font:v})*m)&&(x=T);return x!==0&&(P=p.length),{w:x/=w,h:Math.max((P*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var p=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=e.cell=function(){var p;p=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var h=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,v=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===p.lineNumber?(p.x=(h.x||0)+(h.width||0),p.y=h.y||0):h.y+h.height+p.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=v.top,x&&w&&(this.printHeaderRow(p.lineNumber,!0),p.y+=w[0].height)):p.y=h.y+h.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,r===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-m,p.y+m,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+m,{align:"center",baseline:"top",maxWidth:p.width-m-m}):this.text(p.text,p.x+m,p.y+m,{align:"left",baseline:"top",maxWidth:p.width-m-m})),this.internal.__cell__.lastCell=p,this};e.table=function(p,h,m,v,w){if(n.call(this),!m)throw new Error("No data for PDF table.");var x,P,T,R,k=[],N=[],F=[],D={},U={},B=[],Z=[],J=(w=w||{}).autoSize||!1,X=w.printHeaders!==!1,le=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,H=w.margins||Object.assign({width:this.getPageWidth()},t),G=typeof w.padding=="number"?w.padding:3,ae=w.headerBackgroundColor||"#c8c8c8",se=w.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=X,this.internal.__cell__.margins=H,this.internal.__cell__.table_font_size=le,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=ae,this.internal.__cell__.headerTextColor=se,this.setFontSize(le),v==null)N=k=Object.keys(m[0]),F=k.map(function(){return"left"});else if(Array.isArray(v)&&ha(v[0])==="object")for(k=v.map(function(Fe){return Fe.name}),N=v.map(function(Fe){return Fe.prompt||Fe.name||""}),F=v.map(function(Fe){return Fe.align||"left"}),x=0;x<v.length;x+=1)U[v[x].name]=.7499990551181103*v[x].width;else Array.isArray(v)&&typeof v[0]=="string"&&(N=k=v,F=k.map(function(){return"left"}));if(J||Array.isArray(v)&&typeof v[0]=="string")for(x=0;x<k.length;x+=1){for(D[R=k[x]]=m.map(function(Fe){return Fe[R]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(N[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=D[R],this.setFont(void 0,"normal"),T=0;T<P.length;T+=1)B.push(this.getTextDimensions(P[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);U[R]=Math.max.apply(null,B)+G+G,B=[]}if(X){var ue={};for(x=0;x<k.length;x+=1)ue[k[x]]={},ue[k[x]].text=N[x],ue[k[x]].align=F[x];var me=a.call(this,ue,U);Z=k.map(function(Fe){return new o(p,h,U[Fe],me,ue[Fe].text,void 0,ue[Fe].align)}),this.setTableHeaderRow(Z),this.printHeaderRow(1,!1)}var Ce=v.reduce(function(Fe,Ke){return Fe[Ke.name]=Ke.align,Fe},{});for(x=0;x<m.length;x+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:x,data:m[x]},this);var pe=a.call(this,m[x],U);for(T=0;T<k.length;T+=1){var Ee=m[x][k[T]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:x,col:T,data:Ee},this),u.call(this,new o(p,h,U[k[T]],pe,Ee,x+2,Ce[k[T]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=h,this};var a=function(p,h){var m=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(p).map(function(x){var P=p[x];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,h[x]-m-m)},this).map(function(x){return this.getLineHeightFactor()*x.length*v/w+m+m},this).reduce(function(x,P){return Math.max(x,P)},0)};e.setTableHeaderRow=function(p){n.call(this),this.internal.__cell__.tableHeaderRow=p},e.printHeaderRow=function(p,h){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){m=this.internal.__cell__.tableHeaderRow[x].clone(),h&&(m.y=this.internal.__cell__.margins.top||0,w.push(m)),m.lineNumber=p;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,m),this.setTextColor(P)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),r=!1}})(Ln.API);var Uq={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Vq=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],nT=qq(Vq),Gq=[100,200,300,400,500,600,700,800,900],mue=qq(Gq);function o5(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(o){return Uq[o=o||"normal"]?o:"normal"})(e.style),n=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(e.weight),i=(function(o){return typeof nT[o=o||"normal"]=="number"?o:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function aD(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var gue={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},oD={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function sD(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function lD(e){return e.trimLeft()}function yue(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function vue(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var zb,uD,cD,fm,$b,fD,hD,dD,s5=["times"];function pD(e,t,r,n){var i=4,o=gD;switch(n){case Ln.API.image_compression.FAST:i=1,o=mD;break;case Ln.API.image_compression.MEDIUM:i=6,o=yD;break;case Ln.API.image_compression.SLOW:i=9,o=vD}e=(function(a,p,h,m){for(var v,w=a.length/p,x=new Uint8Array(a.length+w),P=[bue,mD,gD,yD,vD],T=0;T<w;T+=1){var R=T*p,k=a.subarray(R,R+p);if(m)x.set(m(k,h,v),R+T);else{for(var N=P.length,F=[],D=0;D<N;D+=1)F[D]=P[D](k,h,v);var U=xue(F.concat());x.set(F[U],R+T)}v=k}return x})(e,t,r,o);var u=XP(e,{level:i});return Ln.API.__addimage__.arrayBufferToBinaryString(u)}function bue(e){var t=Array.apply([],e);return t.unshift(0),t}function mD(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var o=e[i-t]||0;n[i+1]=e[i]-o+256&255}return n}function gD(e,t,r){var n=e.length,i=[];i[0]=2;for(var o=0;o<n;o+=1){var u=r&&r[o]||0;i[o+1]=e[o]-u+256&255}return i}function yD(e,t,r){var n=e.length,i=[];i[0]=3;for(var o=0;o<n;o+=1){var u=e[o-t]||0,a=r&&r[o]||0;i[o+1]=e[o]+256-(u+a>>>1)&255}return i}function vD(e,t,r){var n=e.length,i=[];i[0]=4;for(var o=0;o<n;o+=1){var u=_ue(e[o-t]||0,r&&r[o]||0,r&&r[o-t]||0);i[o+1]=e[o]-u+256&255}return i}function _ue(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),o=Math.abs(e+t-r-r);return n<=i&&n<=o?e:i<=o?t:r}function xue(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function l5(e,t,r){var n=t*r,i=Math.floor(n/8),o=16-(n-8*i+r),u=(1<<r)-1;return Hq(e,i)>>o&u}function bD(e,t,r,n){var i=r*n,o=Math.floor(i/8),u=16-(i-8*o+n),a=(1<<n)-1,p=(t&a)<<u;(function(h,m,v){if(m+1<h.byteLength)h.setUint16(m,v,!1);else{var w=v>>8&255;h.setUint8(m,w)}})(e,o,Hq(e,o)&~(a<<u)&65535|p)}function Hq(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function wue(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,u=1<<1+(7&i);e[t++],e[t++];var a=null,p=null;o&&(a=t,p=u,t+=3*u);var h=!0,m=[],v=0,w=null,x=0,P=null;for(this.width=r,this.height=n;h&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,P=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((H=e[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var T=e[t++];v=e[t++]|e[t++]<<8,w=e[t++],1&T||(w=null),x=T>>2&7,t++;break;case 254:for(;;){if(!((H=e[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var R=e[t++]|e[t++]<<8,k=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,F=e[t++]|e[t++]<<8,D=e[t++],U=D>>6&1,B=1<<1+(7&D),Z=a,J=p,X=!1;D>>7&&(X=!0,Z=t,J=B,t+=3*B);var le=t;for(t++;;){var H;if(!((H=e[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}m.push({x:R,y:k,width:N,height:F,has_local_palette:X,palette_offset:Z,palette_size:J,data_offset:le,data_length:t-le,transparent_index:w,interlaced:!!U,delay:v,disposal:x});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return P},this.frameInfo=function(G){if(G<0||G>=m.length)throw new Error("Frame index out of range.");return m[G]},this.decodeAndBlitFrameBGRA=function(G,ae){var se=this.frameInfo(G),ue=se.width*se.height,me=new Uint8Array(ue);_D(e,se.data_offset,me,ue);var Ce=se.palette_offset,pe=se.transparent_index;pe===null&&(pe=256);var Ee=se.width,Fe=r-Ee,Ke=Ee,fe=4*(se.y*r+se.x),_e=4*((se.y+se.height)*r+se.x),Pe=fe,ke=4*Fe;se.interlaced===!0&&(ke+=4*r*7);for(var $e=8,ht=0,Ot=me.length;ht<Ot;++ht){var mt=me[ht];if(Ke===0&&(Ke=Ee,(Pe+=ke)>=_e&&(ke=4*Fe+4*r*($e-1),Pe=fe+(Ee+Fe)*($e<<1),$e>>=1)),mt===pe)Pe+=4;else{var nt=e[Ce+3*mt],Nt=e[Ce+3*mt+1],kt=e[Ce+3*mt+2];ae[Pe++]=kt,ae[Pe++]=Nt,ae[Pe++]=nt,ae[Pe++]=255}--Ke}},this.decodeAndBlitFrameRGBA=function(G,ae){var se=this.frameInfo(G),ue=se.width*se.height,me=new Uint8Array(ue);_D(e,se.data_offset,me,ue);var Ce=se.palette_offset,pe=se.transparent_index;pe===null&&(pe=256);var Ee=se.width,Fe=r-Ee,Ke=Ee,fe=4*(se.y*r+se.x),_e=4*((se.y+se.height)*r+se.x),Pe=fe,ke=4*Fe;se.interlaced===!0&&(ke+=4*r*7);for(var $e=8,ht=0,Ot=me.length;ht<Ot;++ht){var mt=me[ht];if(Ke===0&&(Ke=Ee,(Pe+=ke)>=_e&&(ke=4*Fe+4*r*($e-1),Pe=fe+(Ee+Fe)*($e<<1),$e>>=1)),mt===pe)Pe+=4;else{var nt=e[Ce+3*mt],Nt=e[Ce+3*mt+1],kt=e[Ce+3*mt+2];ae[Pe++]=nt,ae[Pe++]=Nt,ae[Pe++]=kt,ae[Pe++]=255}--Ke}}}function _D(e,t,r,n){for(var i=e[t++],o=1<<i,u=o+1,a=u+1,p=i+1,h=(1<<p)-1,m=0,v=0,w=0,x=e[t++],P=new Int32Array(4096),T=null;;){for(;m<16&&x!==0;)v|=e[t++]<<m,m+=8,x===1?x=e[t++]:--x;if(m<p)break;var R=v&h;if(v>>=p,m-=p,R!==o){if(R===u)break;for(var k=R<a?R:T,N=0,F=k;F>o;)F=P[F]>>8,++N;var D=F;if(w+N+(k!==R?1:0)>n)return void Pa.log("Warning, gif stream longer than expected.");r[w++]=D;var U=w+=N;for(k!==R&&(r[w++]=D),F=k;N--;)F=P[F],r[--U]=255&F,F>>=8;T!==null&&a<4096&&(P[a++]=T<<8|D,a>=h+1&&p<12&&(++p,h=h<<1|1)),T=R}else a=u+1,h=(1<<(p=i+1))-1,T=null}return w!==n&&Pa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function u5(e){var t,r,n,i,o,u=Math.floor,a=new Array(64),p=new Array(64),h=new Array(64),m=new Array(64),v=new Array(65535),w=new Array(65535),x=new Array(64),P=new Array(64),T=[],R=0,k=7,N=new Array(64),F=new Array(64),D=new Array(64),U=new Array(256),B=new Array(2048),Z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],J=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],le=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],H=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ae=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function me(fe,_e){for(var Pe=0,ke=0,$e=new Array,ht=1;ht<=16;ht++){for(var Ot=1;Ot<=fe[ht];Ot++)$e[_e[ke]]=[],$e[_e[ke]][0]=Pe,$e[_e[ke]][1]=ht,ke++,Pe++;Pe*=2}return $e}function Ce(fe){for(var _e=fe[0],Pe=fe[1]-1;Pe>=0;)_e&1<<Pe&&(R|=1<<k),Pe--,--k<0&&(R==255?(pe(255),pe(0)):pe(R),k=7,R=0)}function pe(fe){T.push(fe)}function Ee(fe){pe(fe>>8&255),pe(255&fe)}function Fe(fe,_e,Pe,ke,$e){for(var ht,Ot=$e[0],mt=$e[240],nt=(function(Qt,qe){var rt,ct,Ft,Yt,Wt,ur,br,xr,Rr,wr,fr=0;for(Rr=0;Rr<8;++Rr){rt=Qt[fr],ct=Qt[fr+1],Ft=Qt[fr+2],Yt=Qt[fr+3],Wt=Qt[fr+4],ur=Qt[fr+5],br=Qt[fr+6];var bt=rt+(xr=Qt[fr+7]),ve=rt-xr,xe=ct+br,Ae=ct-br,Ue=Ft+ur,tt=Ft-ur,_t=Yt+Wt,Mt=Yt-Wt,Pt=bt+_t,Kt=bt-_t,zt=xe+Ue,Ct=xe-Ue;Qt[fr]=Pt+zt,Qt[fr+4]=Pt-zt;var Gt=.707106781*(Ct+Kt);Qt[fr+2]=Kt+Gt,Qt[fr+6]=Kt-Gt;var vt=.382683433*((Pt=Mt+tt)-(Ct=Ae+ve)),Pr=.5411961*Pt+vt,Tr=1.306562965*Ct+vt,Ye=.707106781*(zt=tt+Ae),ot=ve+Ye,jt=ve-Ye;Qt[fr+5]=jt+Pr,Qt[fr+3]=jt-Pr,Qt[fr+1]=ot+Tr,Qt[fr+7]=ot-Tr,fr+=8}for(fr=0,Rr=0;Rr<8;++Rr){rt=Qt[fr],ct=Qt[fr+8],Ft=Qt[fr+16],Yt=Qt[fr+24],Wt=Qt[fr+32],ur=Qt[fr+40],br=Qt[fr+48];var ne=rt+(xr=Qt[fr+56]),de=rt-xr,Be=ct+br,et=ct-br,Lt=Ft+ur,lr=Ft-ur,qt=Yt+Wt,zr=Yt-Wt,kr=ne+qt,sn=ne-qt,xn=Be+Lt,yr=Be-Lt;Qt[fr]=kr+xn,Qt[fr+32]=kr-xn;var Vr=.707106781*(yr+sn);Qt[fr+16]=sn+Vr,Qt[fr+48]=sn-Vr;var Kr=.382683433*((kr=zr+lr)-(yr=et+de)),An=.5411961*kr+Kr,Ni=1.306562965*yr+Kr,Mi=.707106781*(xn=lr+et),mn=de+Mi,Pi=de-Mi;Qt[fr+40]=Pi+An,Qt[fr+24]=Pi-An,Qt[fr+8]=mn+Ni,Qt[fr+56]=mn-Ni,fr++}for(Rr=0;Rr<64;++Rr)wr=Qt[Rr]*qe[Rr],x[Rr]=wr>0?wr+.5|0:wr-.5|0;return x})(fe,_e),Nt=0;Nt<64;++Nt)P[Z[Nt]]=nt[Nt];var kt=P[0]-Pe;Pe=P[0],kt==0?Ce(ke[0]):(Ce(ke[w[ht=32767+kt]]),Ce(v[ht]));for(var It=63;It>0&&P[It]==0;)It--;if(It==0)return Ce(Ot),Pe;for(var gt,Le=1;Le<=It;){for(var pr=Le;P[Le]==0&&Le<=It;)++Le;var hr=Le-pr;if(hr>=16){gt=hr>>4;for(var vr=1;vr<=gt;++vr)Ce(mt);hr&=15}ht=32767+P[Le],Ce($e[(hr<<4)+w[ht]]),Ce(v[ht]),Le++}return It!=63&&Ce(Ot),Pe}function Ke(fe){fe=Math.min(Math.max(fe,1),100),o!=fe&&((function(_e){for(var Pe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ke=0;ke<64;ke++){var $e=u((Pe[ke]*_e+50)/100);$e=Math.min(Math.max($e,1),255),a[Z[ke]]=$e}for(var ht=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ot=0;Ot<64;Ot++){var mt=u((ht[Ot]*_e+50)/100);mt=Math.min(Math.max(mt,1),255),p[Z[Ot]]=mt}for(var nt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Nt=0,kt=0;kt<8;kt++)for(var It=0;It<8;It++)h[Nt]=1/(a[Z[Nt]]*nt[kt]*nt[It]*8),m[Nt]=1/(p[Z[Nt]]*nt[kt]*nt[It]*8),Nt++})(fe<50?Math.floor(5e3/fe):Math.floor(200-2*fe)),o=fe)}this.encode=function(fe,_e){_e&&Ke(_e),T=new Array,R=0,k=7,Ee(65496),Ee(65504),Ee(16),pe(74),pe(70),pe(73),pe(70),pe(0),pe(1),pe(1),pe(0),Ee(1),Ee(1),pe(0),pe(0),(function(){Ee(65499),Ee(132),pe(0);for(var ct=0;ct<64;ct++)pe(a[ct]);pe(1);for(var Ft=0;Ft<64;Ft++)pe(p[Ft])})(),(function(ct,Ft){Ee(65472),Ee(17),pe(8),Ee(Ft),Ee(ct),pe(3),pe(1),pe(17),pe(0),pe(2),pe(17),pe(1),pe(3),pe(17),pe(1)})(fe.width,fe.height),(function(){Ee(65476),Ee(418),pe(0);for(var ct=0;ct<16;ct++)pe(J[ct+1]);for(var Ft=0;Ft<=11;Ft++)pe(X[Ft]);pe(16);for(var Yt=0;Yt<16;Yt++)pe(le[Yt+1]);for(var Wt=0;Wt<=161;Wt++)pe(H[Wt]);pe(1);for(var ur=0;ur<16;ur++)pe(G[ur+1]);for(var br=0;br<=11;br++)pe(ae[br]);pe(17);for(var xr=0;xr<16;xr++)pe(se[xr+1]);for(var Rr=0;Rr<=161;Rr++)pe(ue[Rr])})(),Ee(65498),Ee(12),pe(3),pe(1),pe(0),pe(2),pe(17),pe(3),pe(17),pe(0),pe(63),pe(0);var Pe=0,ke=0,$e=0;R=0,k=7,this.encode.displayName="_encode_";for(var ht,Ot,mt,nt,Nt,kt,It,gt,Le,pr=fe.data,hr=fe.width,vr=fe.height,Qt=4*hr,qe=0;qe<vr;){for(ht=0;ht<Qt;){for(Nt=Qt*qe+ht,It=-1,gt=0,Le=0;Le<64;Le++)kt=Nt+(gt=Le>>3)*Qt+(It=4*(7&Le)),qe+gt>=vr&&(kt-=Qt*(qe+1+gt-vr)),ht+It>=Qt&&(kt-=ht+It-Qt+4),Ot=pr[kt++],mt=pr[kt++],nt=pr[kt++],N[Le]=(B[Ot]+B[mt+256|0]+B[nt+512|0]>>16)-128,F[Le]=(B[Ot+768|0]+B[mt+1024|0]+B[nt+1280|0]>>16)-128,D[Le]=(B[Ot+1280|0]+B[mt+1536|0]+B[nt+1792|0]>>16)-128;Pe=Fe(N,h,Pe,t,n),ke=Fe(F,m,ke,r,i),$e=Fe(D,m,$e,r,i),ht+=32}qe+=8}if(k>=0){var rt=[];rt[1]=k+1,rt[0]=(1<<k+1)-1,Ce(rt)}return Ee(65497),new Uint8Array(T)},e=e||50,(function(){for(var fe=String.fromCharCode,_e=0;_e<256;_e++)U[_e]=fe(_e)})(),t=me(J,X),r=me(G,ae),n=me(le,H),i=me(se,ue),(function(){for(var fe=1,_e=2,Pe=1;Pe<=15;Pe++){for(var ke=fe;ke<_e;ke++)w[32767+ke]=Pe,v[32767+ke]=[],v[32767+ke][1]=Pe,v[32767+ke][0]=ke;for(var $e=-(_e-1);$e<=-fe;$e++)w[32767+$e]=Pe,v[32767+$e]=[],v[32767+$e][1]=Pe,v[32767+$e][0]=_e-1+$e;fe<<=1,_e<<=1}})(),(function(){for(var fe=0;fe<256;fe++)B[fe]=19595*fe,B[fe+256|0]=38470*fe,B[fe+512|0]=7471*fe+32768,B[fe+768|0]=-11059*fe,B[fe+1024|0]=-21709*fe,B[fe+1280|0]=32768*fe+8421375,B[fe+1536|0]=-27439*fe,B[fe+1792|0]=-5329*fe})(),Ke(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _c(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function xD(e){function t(X){if(!X)throw Error("assert :P")}function r(X,le,H){for(var G=0;4>G;G++)if(X[le+G]!=H.charCodeAt(G))return!0;return!1}function n(X,le,H,G,ae){for(var se=0;se<ae;se++)X[le+se]=H[G+se]}function i(X,le,H,G){for(var ae=0;ae<G;ae++)X[le+ae]=H}function o(X){return new Int32Array(X)}function u(X,le){for(var H=[],G=0;G<X;G++)H.push(new le);return H}function a(X,le){var H=[];return(function G(ae,se,ue){for(var me=ue[se],Ce=0;Ce<me&&(ae.push(ue.length>se+1?[]:new le),!(ue.length<se+1));Ce++)G(ae[Ce],se+1,ue)})(H,0,X),H}var p=function(){var X=this;function le(O,z){for(var ee=1<<z-1>>>0;O&ee;)ee>>>=1;return ee?(O&ee-1)+ee:O}function H(O,z,ee,he,Ie){t(!(he%ee));do O[z+(he-=ee)]=Ie;while(0<he)}function G(O,z,ee,he,Ie){if(t(2328>=Ie),512>=Ie)var De=o(512);else if((De=o(Ie))==null)return 0;return(function(Ne,Ge,Je,st,lt,sr){var ut,Vt,Xt=Ge,gr=1<<Je,ar=o(16),tr=o(16);for(t(lt!=0),t(st!=null),t(Ne!=null),t(0<Je),Vt=0;Vt<lt;++Vt){if(15<st[Vt])return 0;++ar[st[Vt]]}if(ar[0]==lt)return 0;for(tr[1]=0,ut=1;15>ut;++ut){if(ar[ut]>1<<ut)return 0;tr[ut+1]=tr[ut]+ar[ut]}for(Vt=0;Vt<lt;++Vt)ut=st[Vt],0<st[Vt]&&(sr[tr[ut]++]=Vt);if(tr[15]==1)return(st=new ae).g=0,st.value=sr[0],H(Ne,Xt,1,gr,st),gr;var Er,qr=-1,Lr=gr-1,Pn=0,yn=1,Qn=1,vn=1<<Je;for(Vt=0,ut=1,lt=2;ut<=Je;++ut,lt<<=1){if(yn+=Qn<<=1,0>(Qn-=ar[ut]))return 0;for(;0<ar[ut];--ar[ut])(st=new ae).g=ut,st.value=sr[Vt++],H(Ne,Xt+Pn,lt,vn,st),Pn=le(Pn,ut)}for(ut=Je+1,lt=2;15>=ut;++ut,lt<<=1){if(yn+=Qn<<=1,0>(Qn-=ar[ut]))return 0;for(;0<ar[ut];--ar[ut]){if(st=new ae,(Pn&Lr)!=qr){for(Xt+=vn,Er=1<<(qr=ut)-Je;15>qr&&!(0>=(Er-=ar[qr]));)++qr,Er<<=1;gr+=vn=1<<(Er=qr-Je),Ne[Ge+(qr=Pn&Lr)].g=Er+Je,Ne[Ge+qr].value=Xt-Ge-qr}st.g=ut-Je,st.value=sr[Vt++],H(Ne,Xt+(Pn>>Je),lt,vn,st),Pn=le(Pn,ut)}}return yn!=2*tr[15]-1?0:gr})(O,z,ee,he,Ie,De)}function ae(){this.value=this.g=0}function se(){this.value=this.g=0}function ue(){this.G=u(5,ae),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Ba,se)}function me(O,z,ee,he){t(O!=null),t(z!=null),t(2147483648>he),O.Ca=254,O.I=0,O.b=-8,O.Ka=0,O.oa=z,O.pa=ee,O.Jd=z,O.Yc=ee+he,O.Zc=4<=he?ee+he-4+1:ee,Ot(O)}function Ce(O,z){for(var ee=0;0<z--;)ee|=nt(O,128)<<z;return ee}function pe(O,z){var ee=Ce(O,z);return mt(O)?-ee:ee}function Ee(O,z,ee,he){var Ie,De=0;for(t(O!=null),t(z!=null),t(4294967288>he),O.Sb=he,O.Ra=0,O.u=0,O.h=0,4<he&&(he=4),Ie=0;Ie<he;++Ie)De+=z[ee+Ie]<<8*Ie;O.Ra=De,O.bb=he,O.oa=z,O.pa=ee}function Fe(O){for(;8<=O.u&&O.bb<O.Sb;)O.Ra>>>=8,O.Ra+=O.oa[O.pa+O.bb]<<el-8>>>0,++O.bb,O.u-=8;ke(O)&&(O.h=1,O.u=0)}function Ke(O,z){if(t(0<=z),!O.h&&z<=no){var ee=Pe(O)&Qs[z];return O.u+=z,Fe(O),ee}return O.h=1,O.u=0}function fe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function _e(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Pe(O){return O.Ra>>>(O.u&el-1)>>>0}function ke(O){return t(O.bb<=O.Sb),O.h||O.bb==O.Sb&&O.u>el}function $e(O,z){O.u=z,O.h=ke(O)}function ht(O){O.u>=aa&&(t(O.u>=aa),Fe(O))}function Ot(O){t(O!=null&&O.oa!=null),O.pa<O.Zc?(O.I=(O.oa[O.pa++]|O.I<<8)>>>0,O.b+=8):(t(O!=null&&O.oa!=null),O.pa<O.Yc?(O.b+=8,O.I=O.oa[O.pa++]|O.I<<8):O.Ka?O.b=0:(O.I<<=8,O.b+=8,O.Ka=1))}function mt(O){return Ce(O,1)}function nt(O,z){var ee=O.Ca;0>O.b&&Ot(O);var he=O.b,Ie=ee*z>>>8,De=(O.I>>>he>Ie)+0;for(De?(ee-=Ie,O.I-=Ie+1<<he>>>0):ee=Ie+1,he=ee,Ie=0;256<=he;)Ie+=8,he>>=8;return he=7^Ie+Rs[he],O.b-=he,O.Ca=(ee<<he)-1,De}function Nt(O,z,ee){O[z+0]=ee>>24&255,O[z+1]=ee>>16&255,O[z+2]=ee>>8&255,O[z+3]=255&ee}function kt(O,z){return O[z+0]|O[z+1]<<8}function It(O,z){return kt(O,z)|O[z+2]<<16}function gt(O,z){return kt(O,z)|kt(O,z+2)<<16}function Le(O,z){var ee=1<<z;return t(O!=null),t(0<z),O.X=o(ee),O.X==null?0:(O.Mb=32-z,O.Xa=z,1)}function pr(O,z){t(O!=null),t(z!=null),t(O.Xa==z.Xa),n(z.X,0,O.X,0,1<<z.Xa)}function hr(){this.X=[],this.Xa=this.Mb=0}function vr(O,z,ee,he){t(ee!=null),t(he!=null);var Ie=ee[0],De=he[0];return Ie==0&&(Ie=(O*De+z/2)/z),De==0&&(De=(z*Ie+O/2)/O),0>=Ie||0>=De?0:(ee[0]=Ie,he[0]=De,1)}function Qt(O,z){return O+(1<<z)-1>>>z}function qe(O,z){return((4278255360&O)+(4278255360&z)>>>0&4278255360)+((16711935&O)+(16711935&z)>>>0&16711935)>>>0}function rt(O,z){X[z]=function(ee,he,Ie,De,Ne,Ge,Je){var st;for(st=0;st<Ne;++st){var lt=X[O](Ge[Je+st-1],Ie,De+st);Ge[Je+st]=qe(ee[he+st],lt)}}}function ct(){this.ud=this.hd=this.jd=0}function Ft(O,z){return((4278124286&(O^z))>>>1)+(O&z)>>>0}function Yt(O){return 0<=O&&256>O?O:0>O?0:255<O?255:void 0}function Wt(O,z){return Yt(O+(O-z+.5>>1))}function ur(O,z,ee){return Math.abs(z-ee)-Math.abs(O-ee)}function br(O,z,ee,he,Ie,De,Ne){for(he=De[Ne-1],ee=0;ee<Ie;++ee)De[Ne+ee]=he=qe(O[z+ee],he)}function xr(O,z,ee,he,Ie){var De;for(De=0;De<ee;++De){var Ne=O[z+De],Ge=Ne>>8&255,Je=16711935&(Je=(Je=16711935&Ne)+((Ge<<16)+Ge));he[Ie+De]=(4278255360&Ne)+Je>>>0}}function Rr(O,z){z.jd=255&O,z.hd=O>>8&255,z.ud=O>>16&255}function wr(O,z,ee,he,Ie,De){var Ne;for(Ne=0;Ne<he;++Ne){var Ge=z[ee+Ne],Je=Ge>>>8,st=Ge,lt=255&(lt=(lt=Ge>>>16)+((O.jd<<24>>24)*(Je<<24>>24)>>>5));st=255&(st=(st+=(O.hd<<24>>24)*(Je<<24>>24)>>>5)+((O.ud<<24>>24)*(lt<<24>>24)>>>5)),Ie[De+Ne]=(4278255360&Ge)+(lt<<16)+st}}function fr(O,z,ee,he,Ie){X[z]=function(De,Ne,Ge,Je,st,lt,sr,ut,Vt){for(Je=sr;Je<ut;++Je)for(sr=0;sr<Vt;++sr)st[lt++]=Ie(Ge[he(De[Ne++])])},X[O]=function(De,Ne,Ge,Je,st,lt,sr){var ut=8>>De.b,Vt=De.Ea,Xt=De.K[0],gr=De.w;if(8>ut)for(De=(1<<De.b)-1,gr=(1<<ut)-1;Ne<Ge;++Ne){var ar,tr=0;for(ar=0;ar<Vt;++ar)ar&De||(tr=he(Je[st++])),lt[sr++]=Ie(Xt[tr&gr]),tr>>=ut}else X["VP8LMapColor"+ee](Je,st,Xt,gr,lt,sr,Ne,Ge,Vt)}}function bt(O,z,ee,he,Ie){for(ee=z+ee;z<ee;){var De=O[z++];he[Ie++]=De>>16&255,he[Ie++]=De>>8&255,he[Ie++]=255&De}}function ve(O,z,ee,he,Ie){for(ee=z+ee;z<ee;){var De=O[z++];he[Ie++]=De>>16&255,he[Ie++]=De>>8&255,he[Ie++]=255&De,he[Ie++]=De>>24&255}}function xe(O,z,ee,he,Ie){for(ee=z+ee;z<ee;){var De=(Ne=O[z++])>>16&240|Ne>>12&15,Ne=240&Ne|Ne>>28&15;he[Ie++]=De,he[Ie++]=Ne}}function Ae(O,z,ee,he,Ie){for(ee=z+ee;z<ee;){var De=(Ne=O[z++])>>16&248|Ne>>13&7,Ne=Ne>>5&224|Ne>>3&31;he[Ie++]=De,he[Ie++]=Ne}}function Ue(O,z,ee,he,Ie){for(ee=z+ee;z<ee;){var De=O[z++];he[Ie++]=255&De,he[Ie++]=De>>8&255,he[Ie++]=De>>16&255}}function tt(O,z,ee,he,Ie,De){if(De==0)for(ee=z+ee;z<ee;)Nt(he,((De=O[z++])[0]>>24|De[1]>>8&65280|De[2]<<8&16711680|De[3]<<24)>>>0),Ie+=32;else n(he,Ie,O,z,ee)}function _t(O,z){X[z][0]=X[O+"0"],X[z][1]=X[O+"1"],X[z][2]=X[O+"2"],X[z][3]=X[O+"3"],X[z][4]=X[O+"4"],X[z][5]=X[O+"5"],X[z][6]=X[O+"6"],X[z][7]=X[O+"7"],X[z][8]=X[O+"8"],X[z][9]=X[O+"9"],X[z][10]=X[O+"10"],X[z][11]=X[O+"11"],X[z][12]=X[O+"12"],X[z][13]=X[O+"13"],X[z][14]=X[O+"0"],X[z][15]=X[O+"0"]}function Mt(O){return O==gd||O==vh||O==kf||O==Uc}function Pt(){this.eb=[],this.size=this.A=this.fb=0}function Kt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function zt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pt,this.f.kb=new Kt,this.sd=null}function Ct(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Gt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function vt(O){return alert("todo:WebPSamplerProcessPlane"),O.T}function Pr(O,z){var ee=O.T,he=z.ba.f.RGBA,Ie=he.eb,De=he.fb+O.ka*he.A,Ne=ls[z.ba.S],Ge=O.y,Je=O.O,st=O.f,lt=O.N,sr=O.ea,ut=O.W,Vt=z.cc,Xt=z.dc,gr=z.Mc,ar=z.Nc,tr=O.ka,Er=O.ka+O.T,qr=O.U,Lr=qr+1>>1;for(tr==0?Ne(Ge,Je,null,null,st,lt,sr,ut,st,lt,sr,ut,Ie,De,null,null,qr):(Ne(z.ec,z.fc,Ge,Je,Vt,Xt,gr,ar,st,lt,sr,ut,Ie,De-he.A,Ie,De,qr),++ee);tr+2<Er;tr+=2)Vt=st,Xt=lt,gr=sr,ar=ut,lt+=O.Rc,ut+=O.Rc,De+=2*he.A,Ne(Ge,(Je+=2*O.fa)-O.fa,Ge,Je,Vt,Xt,gr,ar,st,lt,sr,ut,Ie,De-he.A,Ie,De,qr);return Je+=O.fa,O.j+Er<O.o?(n(z.ec,z.fc,Ge,Je,qr),n(z.cc,z.dc,st,lt,Lr),n(z.Mc,z.Nc,sr,ut,Lr),ee--):1&Er||Ne(Ge,Je,null,null,st,lt,sr,ut,st,lt,sr,ut,Ie,De+he.A,null,null,qr),ee}function Tr(O,z,ee){var he=O.F,Ie=[O.J];if(he!=null){var De=O.U,Ne=z.ba.S,Ge=Ne==Of||Ne==kf;z=z.ba.f.RGBA;var Je=[0],st=O.ka;Je[0]=O.T,O.Kb&&(st==0?--Je[0]:(--st,Ie[0]-=O.width),O.j+O.ka+O.T==O.o&&(Je[0]=O.o-O.j-st));var lt=z.eb;st=z.fb+st*z.A,O=Uo(he,Ie[0],O.width,De,Je,lt,st+(Ge?0:3),z.A),t(ee==Je),O&&Mt(Ne)&&oa(lt,st,Ge,De,Je,z.A)}return 0}function Ye(O){var z=O.ma,ee=z.ba.S,he=11>ee,Ie=ee==zn||ee==Vl||ee==Of||ee==cc||ee==12||Mt(ee);if(z.memory=null,z.Ib=null,z.Jb=null,z.Nd=null,!Fa(z.Oa,O,Ie?11:12))return 0;if(Ie&&Mt(ee)&&Nl(),O.da)alert("todo:use_scaling");else{if(he){if(z.Ib=vt,O.Kb){if(ee=O.U+1>>1,z.memory=o(O.U+2*ee),z.memory==null)return 0;z.ec=z.memory,z.fc=0,z.cc=z.ec,z.dc=z.fc+O.U,z.Mc=z.cc,z.Nc=z.dc+ee,z.Ib=Pr,Nl()}}else alert("todo:EmitYUV");Ie&&(z.Jb=Tr,he&&fu())}if(he&&!Eh){for(O=0;256>O;++O)$p[O]=89858*(O-128)+mu>>jf,bd[O]=-22014*(O-128)+mu,Kc[O]=-45773*(O-128),qp[O]=113618*(O-128)+mu>>jf;for(O=Hl;O<Vo;++O)z=76283*(O-16)+mu>>jf,Ch[O-Hl]=Ea(z,255),Up[O-Hl]=Ea(z+8>>4,15);Eh=1}return 1}function ot(O){var z=O.ma,ee=O.U,he=O.T;return t(!(1&O.ka)),0>=ee||0>=he?0:(ee=z.Ib(O,z),z.Jb!=null&&z.Jb(O,z,ee),z.Dc+=ee,1)}function jt(O){O.ma.memory=null}function ne(O,z,ee,he){return Ke(O,8)!=47?0:(z[0]=Ke(O,14)+1,ee[0]=Ke(O,14)+1,he[0]=Ke(O,1),Ke(O,3)!=0?0:!O.h)}function de(O,z){if(4>O)return O+1;var ee=O-2>>1;return(2+(1&O)<<ee)+Ke(z,ee)+1}function Be(O,z){return 120<z?z-120:1<=(ee=((ee=Lf[z-1])>>4)*O+(8-(15&ee)))?ee:1;var ee}function et(O,z,ee){var he=Pe(ee),Ie=O[z+=255&he].g-8;return 0<Ie&&($e(ee,ee.u+8),he=Pe(ee),z+=O[z].value,z+=he&(1<<Ie)-1),$e(ee,ee.u+O[z].g),O[z].value}function Lt(O,z,ee){return ee.g+=O.g,ee.value+=O.value<<z>>>0,t(8>=ee.g),O.g}function lr(O,z,ee){var he=O.xc;return t((z=he==0?0:O.vc[O.md*(ee>>he)+(z>>he)])<O.Wb),O.Ya[z]}function qt(O,z,ee,he){var Ie=O.ab,De=O.c*z,Ne=O.C;z=Ne+z;var Ge=ee,Je=he;for(he=O.Ta,ee=O.Ua;0<Ie--;){var st=O.gc[Ie],lt=Ne,sr=z,ut=Ge,Vt=Je,Xt=(Je=he,Ge=ee,st.Ea);switch(t(lt<sr),t(sr<=st.nc),st.hc){case 2:hu(ut,Vt,(sr-lt)*Xt,Je,Ge);break;case 0:var gr=lt,ar=sr,tr=Je,Er=Ge,qr=(vn=st).Ea;gr==0&&(_s(ut,Vt,null,null,1,tr,Er),br(ut,Vt+1,0,0,qr-1,tr,Er+1),Vt+=qr,Er+=qr,++gr);for(var Lr=1<<vn.b,Pn=Lr-1,yn=Qt(qr,vn.b),Qn=vn.K,vn=vn.w+(gr>>vn.b)*yn;gr<ar;){var ui=Qn,Xa=vn,Un=1;for(qo(ut,Vt,tr,Er-qr,1,tr,Er);Un<qr;){var _n=(Un&~Pn)+Lr;_n>qr&&(_n=qr),(0,Ut[ui[Xa++]>>8&15])(ut,Vt+ +Un,tr,Er+Un-qr,_n-Un,tr,Er+Un),Un=_n}Vt+=qr,Er+=qr,++gr&Pn||(vn+=yn)}sr!=st.nc&&n(Je,Ge-Xt,Je,Ge+(sr-lt-1)*Xt,Xt);break;case 1:for(Xt=ut,ar=Vt,qr=(ut=st.Ea)-(Er=ut&~(tr=(Vt=1<<st.b)-1)),gr=Qt(ut,st.b),Lr=st.K,st=st.w+(lt>>st.b)*gr;lt<sr;){for(Pn=Lr,yn=st,Qn=new ct,vn=ar+Er,ui=ar+ut;ar<vn;)Rr(Pn[yn++],Qn),Zt(Qn,Xt,ar,Vt,Je,Ge),ar+=Vt,Ge+=Vt;ar<ui&&(Rr(Pn[yn++],Qn),Zt(Qn,Xt,ar,qr,Je,Ge),ar+=qr,Ge+=qr),++lt&tr||(st+=gr)}break;case 3:if(ut==Je&&Vt==Ge&&0<st.b){for(ar=Je,ut=Xt=Ge+(sr-lt)*Xt-(Er=(sr-lt)*Qt(st.Ea,st.b)),Vt=Je,tr=Ge,gr=[],Er=(qr=Er)-1;0<=Er;--Er)gr[Er]=Vt[tr+Er];for(Er=qr-1;0<=Er;--Er)ar[ut+Er]=gr[Er];du(st,lt,sr,Je,Xt,Je,Ge)}else du(st,lt,sr,ut,Vt,Je,Ge)}Ge=he,Je=ee}Je!=ee&&n(he,ee,Ge,Je,De)}function zr(O,z){var ee=O.V,he=O.Ba+O.c*O.C,Ie=z-O.C;if(t(z<=O.l.o),t(16>=Ie),0<Ie){var De=O.l,Ne=O.Ta,Ge=O.Ua,Je=De.width;if(qt(O,Ie,ee,he),Ie=Ge=[Ge],t((ee=O.C)<(he=z)),t(De.v<De.va),he>De.o&&(he=De.o),ee<De.j){var st=De.j-ee;ee=De.j,Ie[0]+=st*Je}if(ee>=he?ee=0:(Ie[0]+=4*De.v,De.ka=ee-De.j,De.U=De.va-De.v,De.T=he-ee,ee=1),ee){if(Ge=Ge[0],11>(ee=O.ca).S){var lt=ee.f.RGBA,sr=(he=ee.S,Ie=De.U,De=De.T,st=lt.eb,lt.A),ut=De;for(lt=lt.fb+O.Ma*lt.A;0<ut--;){var Vt=Ne,Xt=Ge,gr=Ie,ar=st,tr=lt;switch(he){case Sl:Wr(Vt,Xt,gr,ar,tr);break;case zn:en(Vt,Xt,gr,ar,tr);break;case gd:en(Vt,Xt,gr,ar,tr),oa(ar,tr,0,gr,1,0);break;case Ls:Fn(Vt,Xt,gr,ar,tr);break;case Vl:tt(Vt,Xt,gr,ar,tr,1);break;case vh:tt(Vt,Xt,gr,ar,tr,1),oa(ar,tr,0,gr,1,0);break;case Of:tt(Vt,Xt,gr,ar,tr,0);break;case kf:tt(Vt,Xt,gr,ar,tr,0),oa(ar,tr,1,gr,1,0);break;case cc:ai(Vt,Xt,gr,ar,tr);break;case Uc:ai(Vt,Xt,gr,ar,tr),lc(ar,tr,gr,1,0);break;case Np:gn(Vt,Xt,gr,ar,tr);break;default:t(0)}Ge+=Je,lt+=sr}O.Ma+=De}else alert("todo:EmitRescaledRowsYUVA");t(O.Ma<=ee.height)}}O.C=z,t(O.C<=O.i)}function kr(O){var z;if(0<O.ua)return 0;for(z=0;z<O.Wb;++z){var ee=O.Ya[z].G,he=O.Ya[z].H;if(0<ee[1][he[1]+0].g||0<ee[2][he[2]+0].g||0<ee[3][he[3]+0].g)return 0}return 1}function sn(O,z,ee,he,Ie,De){if(O.Z!=0){var Ne=O.qd,Ge=O.rd;for(t(ao[O.Z]!=null);z<ee;++z)ao[O.Z](Ne,Ge,he,Ie,he,Ie,De),Ne=he,Ge=Ie,Ie+=De;O.qd=Ne,O.rd=Ge}}function xn(O,z){var ee=O.l.ma,he=ee.Z==0||ee.Z==1?O.l.j:O.C;if(he=O.C<he?he:O.C,t(z<=O.l.o),z>he){var Ie=O.l.width,De=ee.ca,Ne=ee.tb+Ie*he,Ge=O.V,Je=O.Ba+O.c*he,st=O.gc;t(O.ab==1),t(st[0].hc==3),jl(st[0],he,z,Ge,Je,De,Ne),sn(ee,he,z,De,Ne,Ie)}O.C=O.Ma=z}function yr(O,z,ee,he,Ie,De,Ne){var Ge=O.$/he,Je=O.$%he,st=O.m,lt=O.s,sr=ee+O.$,ut=sr;Ie=ee+he*Ie;var Vt=ee+he*De,Xt=280+lt.ua,gr=O.Pb?Ge:16777216,ar=0<lt.ua?lt.Wa:null,tr=lt.wc,Er=sr<Vt?lr(lt,Je,Ge):null;t(O.C<De),t(Vt<=Ie);var qr=!1;e:for(;;){for(;qr||sr<Vt;){var Lr=0;if(Ge>=gr){var Pn=sr-ee;t((gr=O).Pb),gr.wd=gr.m,gr.xd=Pn,0<gr.s.ua&&pr(gr.s.Wa,gr.s.vb),gr=Ge+Hc}if(Je&tr||(Er=lr(lt,Je,Ge)),t(Er!=null),Er.Qb&&(z[sr]=Er.qb,qr=!0),!qr)if(ht(st),Er.jc){Lr=st,Pn=z;var yn=sr,Qn=Er.pd[Pe(Lr)&Ba-1];t(Er.jc),256>Qn.g?($e(Lr,Lr.u+Qn.g),Pn[yn]=Qn.value,Lr=0):($e(Lr,Lr.u+Qn.g-256),t(256<=Qn.value),Lr=Qn.value),Lr==0&&(qr=!0)}else Lr=et(Er.G[0],Er.H[0],st);if(st.h)break;if(qr||256>Lr){if(!qr)if(Er.nd)z[sr]=(Er.qb|Lr<<8)>>>0;else{if(ht(st),qr=et(Er.G[1],Er.H[1],st),ht(st),Pn=et(Er.G[2],Er.H[2],st),yn=et(Er.G[3],Er.H[3],st),st.h)break;z[sr]=(yn<<24|qr<<16|Lr<<8|Pn)>>>0}if(qr=!1,++sr,++Je>=he&&(Je=0,++Ge,Ne!=null&&Ge<=De&&!(Ge%16)&&Ne(O,Ge),ar!=null))for(;ut<sr;)Lr=z[ut++],ar.X[(506832829*Lr&4294967295)>>>ar.Mb]=Lr}else if(280>Lr){if(Lr=de(Lr-256,st),Pn=et(Er.G[4],Er.H[4],st),ht(st),Pn=Be(he,Pn=de(Pn,st)),st.h)break;if(sr-ee<Pn||Ie-sr<Lr)break e;for(yn=0;yn<Lr;++yn)z[sr+yn]=z[sr+yn-Pn];for(sr+=Lr,Je+=Lr;Je>=he;)Je-=he,++Ge,Ne!=null&&Ge<=De&&!(Ge%16)&&Ne(O,Ge);if(t(sr<=Ie),Je&tr&&(Er=lr(lt,Je,Ge)),ar!=null)for(;ut<sr;)Lr=z[ut++],ar.X[(506832829*Lr&4294967295)>>>ar.Mb]=Lr}else{if(!(Lr<Xt))break e;for(qr=Lr-280,t(ar!=null);ut<sr;)Lr=z[ut++],ar.X[(506832829*Lr&4294967295)>>>ar.Mb]=Lr;Lr=sr,t(!(qr>>>(Pn=ar).Xa)),z[Lr]=Pn.X[qr],qr=!0}qr||t(st.h==ke(st))}if(O.Pb&&st.h&&sr<Ie)t(O.m.h),O.a=5,O.m=O.wd,O.$=O.xd,0<O.s.ua&&pr(O.s.vb,O.s.Wa);else{if(st.h)break e;Ne?.(O,Ge>De?De:Ge),O.a=0,O.$=sr-ee}return 1}return O.a=3,0}function Vr(O){t(O!=null),O.vc=null,O.yc=null,O.Ya=null;var z=O.Wa;z!=null&&(z.X=null),O.vb=null,t(O!=null)}function Kr(){var O=new Fi;return O==null?null:(O.a=0,O.xb=pu,_t("Predictor","VP8LPredictors"),_t("Predictor","VP8LPredictors_C"),_t("PredictorAdd","VP8LPredictorsAdd"),_t("PredictorAdd","VP8LPredictorsAdd_C"),hu=xr,Zt=wr,Wr=bt,en=ve,ai=xe,gn=Ae,Fn=Ue,X.VP8LMapColor32b=Os,X.VP8LMapColor8b=zl,O)}function An(O,z,ee,he,Ie){var De=1,Ne=[O],Ge=[z],Je=he.m,st=he.s,lt=null,sr=0;e:for(;;){if(ee)for(;De&&Ke(Je,1);){var ut=Ne,Vt=Ge,Xt=he,gr=1,ar=Xt.m,tr=Xt.gc[Xt.ab],Er=Ke(ar,2);if(Xt.Oc&1<<Er)De=0;else{switch(Xt.Oc|=1<<Er,tr.hc=Er,tr.Ea=ut[0],tr.nc=Vt[0],tr.K=[null],++Xt.ab,t(4>=Xt.ab),Er){case 0:case 1:tr.b=Ke(ar,3)+2,gr=An(Qt(tr.Ea,tr.b),Qt(tr.nc,tr.b),0,Xt,tr.K),tr.K=tr.K[0];break;case 3:var qr,Lr=Ke(ar,8)+1,Pn=16<Lr?0:4<Lr?1:2<Lr?2:3;if(ut[0]=Qt(tr.Ea,Pn),tr.b=Pn,qr=gr=An(Lr,1,0,Xt,tr.K)){var yn,Qn=Lr,vn=tr,ui=1<<(8>>vn.b),Xa=o(ui);if(Xa==null)qr=0;else{var Un=vn.K[0],_n=vn.w;for(Xa[0]=vn.K[0][0],yn=1;yn<1*Qn;++yn)Xa[yn]=qe(Un[_n+yn],Xa[yn-1]);for(;yn<4*ui;++yn)Xa[yn]=0;vn.K[0]=null,vn.K[0]=Xa,qr=1}}gr=qr;break;case 2:break;default:t(0)}De=gr}}if(Ne=Ne[0],Ge=Ge[0],De&&Ke(Je,1)&&!(De=1<=(sr=Ke(Je,4))&&11>=sr)){he.a=3;break e}var Qr;if(Qr=De)t:{var Zi,fn,oi,Ki=he,oo=Ne,Go=Ge,Aa=sr,Ho=ee,ma=Ki.m,Ra=Ki.s,Fr=[null],Yr=1,sa=0,Bi=Gc[Aa];r:for(;;){if(Ho&&Ke(ma,1)){var za=Ke(ma,3)+2,la=Qt(oo,za),Oa=Qt(Go,za),Ui=la*Oa;if(!An(la,Oa,0,Ki,Fr))break r;for(Fr=Fr[0],Ra.xc=za,Zi=0;Zi<Ui;++Zi){var Xi=Fr[Zi]>>8&65535;Fr[Zi]=Xi,Xi>=Yr&&(Yr=Xi+1)}}if(ma.h)break r;for(fn=0;5>fn;++fn){var ua=Vc[fn];!fn&&0<Aa&&(ua+=1<<Aa),sa<ua&&(sa=ua)}var bi=u(Yr*Bi,ae),ci=Yr,Es=u(ci,ue);if(Es==null)var Ya=null;else t(65536>=ci),Ya=Es;var $a=o(sa);if(Ya==null||$a==null||bi==null){Ki.a=1;break r}var us=bi;for(Zi=oi=0;Zi<Yr;++Zi){var Vi=Ya[Zi],so=Vi.G,cs=Vi.H,gu=0,ol=1,lo=0;for(fn=0;5>fn;++fn){ua=Vc[fn],so[fn]=us,cs[fn]=oi,!fn&&0<Aa&&(ua+=1<<Aa);i:{var S,s=ua,c=Ki,y=$a,b=us,E=oi,M=0,j=c.m,V=Ke(j,1);if(i(y,0,0,s),V){var Y=Ke(j,1)+1,re=Ke(j,1),ce=Ke(j,re==0?1:8);y[ce]=1,Y==2&&(y[ce=Ke(j,8)]=1);var oe=1}else{var ge=o(19),Me=Ke(j,4)+4;if(19<Me){c.a=3;var Ze=0;break i}for(S=0;S<Me;++S)ge[yd[S]]=Ke(j,3);var We=void 0,Xe=void 0,at=c,wt=ge,dt=s,Et=y,Tt=0,ft=at.m,Bt=8,ir=u(128,ae);n:for(;G(ir,0,7,wt,19);){if(Ke(ft,1)){var Jt=2+2*Ke(ft,3);if((We=2+Ke(ft,Jt))>dt)break n}else We=dt;for(Xe=0;Xe<dt&&We--;){ht(ft);var er=ir[0+(127&Pe(ft))];$e(ft,ft.u+er.g);var or=er.value;if(16>or)Et[Xe++]=or,or!=0&&(Bt=or);else{var Gr=or==16,Ur=or-16,Ar=_h[Ur],nn=Ke(ft,bh[Ur])+Ar;if(Xe+nn>dt)break n;for(var Zn=Gr?Bt:0;0<nn--;)Et[Xe++]=Zn}}Tt=1;break n}Tt||(at.a=3),oe=Tt}(oe=oe&&!j.h)&&(M=G(b,E,8,y,s)),oe&&M!=0?Ze=M:(c.a=3,Ze=0)}if(Ze==0)break r;if(ol&&xh[fn]==1&&(ol=us[oi].g==0),gu+=us[oi].g,oi+=Ze,3>=fn){var fi,ra=$a[0];for(fi=1;fi<ua;++fi)$a[fi]>ra&&(ra=$a[fi]);lo+=ra}}if(Vi.nd=ol,Vi.Qb=0,ol&&(Vi.qb=(so[3][cs[3]+0].value<<24|so[1][cs[1]+0].value<<16|so[2][cs[2]+0].value)>>>0,gu==0&&256>so[0][cs[0]+0].value&&(Vi.Qb=1,Vi.qb+=so[0][cs[0]+0].value<<8)),Vi.jc=!Vi.Qb&&6>lo,Vi.jc){var ki,Li=Vi;for(ki=0;ki<Ba;++ki){var Ei=ki,_i=Li.pd[Ei],ji=Li.G[0][Li.H[0]+Ei];256<=ji.value?(_i.g=ji.g+256,_i.value=ji.value):(_i.g=0,_i.value=0,Ei>>=Lt(ji,8,_i),Ei>>=Lt(Li.G[1][Li.H[1]+Ei],16,_i),Ei>>=Lt(Li.G[2][Li.H[2]+Ei],0,_i),Lt(Li.G[3][Li.H[3]+Ei],24,_i))}}}Ra.vc=Fr,Ra.Wb=Yr,Ra.Ya=Ya,Ra.yc=bi,Qr=1;break t}Qr=0}if(!(De=Qr)){he.a=3;break e}if(0<sr){if(st.ua=1<<sr,!Le(st.Wa,sr)){he.a=1,De=0;break e}}else st.ua=0;var uo=he,si=Ne,po=Ge,co=uo.s,Wl=co.xc;if(uo.c=si,uo.i=po,co.md=Qt(si,Wl),co.wc=Wl==0?-1:(1<<Wl)-1,ee){he.xb=Ca;break e}if((lt=o(Ne*Ge))==null){he.a=1,De=0;break e}De=(De=yr(he,lt,0,Ne,Ge,Ge,null))&&!Je.h;break e}return De?(Ie!=null?Ie[0]=lt:(t(lt==null),t(ee)),he.$=0,ee||Vr(st)):Vr(st),De}function Ni(O,z){var ee=O.c*O.i,he=ee+z+16*z;return t(O.c<=z),O.V=o(he),O.V==null?(O.Ta=null,O.Ua=0,O.a=1,0):(O.Ta=O.V,O.Ua=O.Ba+ee+z,1)}function Mi(O,z){var ee=O.C,he=z-ee,Ie=O.V,De=O.Ba+O.c*ee;for(t(z<=O.l.o);0<he;){var Ne=16<he?16:he,Ge=O.l.ma,Je=O.l.width,st=Je*Ne,lt=Ge.ca,sr=Ge.tb+Je*ee,ut=O.Ta,Vt=O.Ua;qt(O,Ne,Ie,De),xs(ut,Vt,lt,sr,st),sn(Ge,ee,ee+Ne,lt,sr,Je),he-=Ne,Ie+=Ne*O.c,ee+=Ne}t(ee==z),O.C=O.Ma=z}function mn(){this.ub=this.yd=this.td=this.Rb=0}function Pi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ri(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function ni(){this.Yb=(function(){var O=[];return(function z(ee,he,Ie){for(var De=Ie[he],Ne=0;Ne<De&&(ee.push(Ie.length>he+1?[]:0),!(Ie.length<he+1));Ne++)z(ee[Ne],he+1,Ie)})(O,0,[3,11]),O})()}function Ji(){this.jb=o(3),this.Wc=a([4,8],ni),this.Xc=a([4,17],ni)}function Eo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function $n(){this.ld=this.La=this.dd=this.tc=0}function qn(){this.Na=this.la=0}function mi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hn(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function da(){this.uc=this.M=this.Nb=0,this.wa=Array(new $n),this.Y=0,this.ya=Array(new Hn),this.aa=0,this.l=new _a}function Ti(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ha(){this.cb=this.a=0,this.sc="",this.m=new fe,this.Od=new mn,this.Kc=new Pi,this.ed=new Eo,this.Qa=new Ri,this.Ic=this.$c=this.Aa=0,this.D=new da,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,fe),this.ia=0,this.pb=u(4,mi),this.Pa=new Ji,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ti),this.Hd=0,this.rb=Array(new qn),this.sb=0,this.wa=Array(new $n),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hn),this.L=this.aa=0,this.gd=a([4,2],$n),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function _a(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ts(){var O=new Ha;return O!=null&&(O.a=0,O.sc="OK",O.cb=0,O.Xb=0,nl||(nl=Co)),O}function xa(O,z,ee){return O.a==0&&(O.a=z,O.sc=ee,O.cb=0),0}function nc(O,z,ee){return 3<=ee&&O[z+0]==157&&O[z+1]==1&&O[z+2]==42}function ic(O,z){if(O==null)return 0;if(O.a=0,O.sc="OK",z==null)return xa(O,2,"null VP8Io passed to VP8GetHeaders()");var ee=z.data,he=z.w,Ie=z.ha;if(4>Ie)return xa(O,7,"Truncated header.");var De=ee[he+0]|ee[he+1]<<8|ee[he+2]<<16,Ne=O.Od;if(Ne.Rb=!(1&De),Ne.td=De>>1&7,Ne.yd=De>>4&1,Ne.ub=De>>5,3<Ne.td)return xa(O,3,"Incorrect keyframe parameters.");if(!Ne.yd)return xa(O,4,"Frame not displayable.");he+=3,Ie-=3;var Ge=O.Kc;if(Ne.Rb){if(7>Ie)return xa(O,7,"cannot parse picture header");if(!nc(ee,he,Ie))return xa(O,3,"Bad code word");Ge.c=16383&(ee[he+4]<<8|ee[he+3]),Ge.Td=ee[he+4]>>6,Ge.i=16383&(ee[he+6]<<8|ee[he+5]),Ge.Ud=ee[he+6]>>6,he+=7,Ie-=7,O.za=Ge.c+15>>4,O.Ub=Ge.i+15>>4,z.width=Ge.c,z.height=Ge.i,z.Da=0,z.j=0,z.v=0,z.va=z.width,z.o=z.height,z.da=0,z.ib=z.width,z.hb=z.height,z.U=z.width,z.T=z.height,i((De=O.Pa).jb,0,255,De.jb.length),t((De=O.Qa)!=null),De.Cb=0,De.Bb=0,De.Fb=1,i(De.Zb,0,0,De.Zb.length),i(De.Lb,0,0,De.Lb)}if(Ne.ub>Ie)return xa(O,7,"bad partition length");me(De=O.m,ee,he,Ne.ub),he+=Ne.ub,Ie-=Ne.ub,Ne.Rb&&(Ge.Ld=mt(De),Ge.Kd=mt(De)),Ge=O.Qa;var Je,st=O.Pa;if(t(De!=null),t(Ge!=null),Ge.Cb=mt(De),Ge.Cb){if(Ge.Bb=mt(De),mt(De)){for(Ge.Fb=mt(De),Je=0;4>Je;++Je)Ge.Zb[Je]=mt(De)?pe(De,7):0;for(Je=0;4>Je;++Je)Ge.Lb[Je]=mt(De)?pe(De,6):0}if(Ge.Bb)for(Je=0;3>Je;++Je)st.jb[Je]=mt(De)?Ce(De,8):255}else Ge.Bb=0;if(De.Ka)return xa(O,3,"cannot parse segment header");if((Ge=O.ed).zd=mt(De),Ge.Tb=Ce(De,6),Ge.wb=Ce(De,3),Ge.Pc=mt(De),Ge.Pc&&mt(De)){for(st=0;4>st;++st)mt(De)&&(Ge.vd[st]=pe(De,6));for(st=0;4>st;++st)mt(De)&&(Ge.od[st]=pe(De,6))}if(O.L=Ge.Tb==0?0:Ge.zd?1:2,De.Ka)return xa(O,3,"cannot parse filter header");var lt=Ie;if(Ie=Je=he,he=Je+lt,Ge=lt,O.Xb=(1<<Ce(O.m,2))-1,lt<3*(st=O.Xb))ee=7;else{for(Je+=3*st,Ge-=3*st,lt=0;lt<st;++lt){var sr=ee[Ie+0]|ee[Ie+1]<<8|ee[Ie+2]<<16;sr>Ge&&(sr=Ge),me(O.Jc[+lt],ee,Je,sr),Je+=sr,Ge-=sr,Ie+=3}me(O.Jc[+st],ee,Je,Ge),ee=Je<he?0:5}if(ee!=0)return xa(O,ee,"cannot parse partitions");for(ee=Ce(Je=O.m,7),Ie=mt(Je)?pe(Je,4):0,he=mt(Je)?pe(Je,4):0,Ge=mt(Je)?pe(Je,4):0,st=mt(Je)?pe(Je,4):0,Je=mt(Je)?pe(Je,4):0,lt=O.Qa,sr=0;4>sr;++sr){if(lt.Cb){var ut=lt.Zb[sr];lt.Fb||(ut+=ee)}else{if(0<sr){O.pb[sr]=O.pb[0];continue}ut=ee}var Vt=O.pb[sr];Vt.Sc[0]=fc[Ea(ut+Ie,127)],Vt.Sc[1]=Df[Ea(ut+0,127)],Vt.Eb[0]=2*fc[Ea(ut+he,127)],Vt.Eb[1]=101581*Df[Ea(ut+Ge,127)]>>16,8>Vt.Eb[1]&&(Vt.Eb[1]=8),Vt.Qc[0]=fc[Ea(ut+st,117)],Vt.Qc[1]=Df[Ea(ut+Je,127)],Vt.lc=ut+Je}if(!Ne.Rb)return xa(O,4,"Not a key frame.");for(mt(De),Ne=O.Pa,ee=0;4>ee;++ee){for(Ie=0;8>Ie;++Ie)for(he=0;3>he;++he)for(Ge=0;11>Ge;++Ge)st=nt(De,jp[ee][Ie][he][Ge])?Ce(De,8):vd[ee][Ie][he][Ge],Ne.Wc[ee][Ie].Yb[he][Ge]=st;for(Ie=0;17>Ie;++Ie)Ne.Xc[ee][Ie]=Ne.Wc[ee][Ff[Ie]]}return O.kc=mt(De),O.kc&&(O.Bd=Ce(De,8)),O.cb=1}function Co(O,z,ee,he,Ie,De,Ne){var Ge=z[Ie].Yb[ee];for(ee=0;16>Ie;++Ie){if(!nt(O,Ge[ee+0]))return Ie;for(;!nt(O,Ge[ee+1]);)if(Ge=z[++Ie].Yb[0],ee=0,Ie==16)return 16;var Je=z[Ie+1].Yb;if(nt(O,Ge[ee+2])){var st=O,lt=0;if(nt(st,(ut=Ge)[(sr=ee)+3]))if(nt(st,ut[sr+6])){for(Ge=0,sr=2*(lt=nt(st,ut[sr+8]))+(ut=nt(st,ut[sr+9+lt])),lt=0,ut=ry[sr];ut[Ge];++Ge)lt+=lt+nt(st,ut[Ge]);lt+=3+(8<<sr)}else nt(st,ut[sr+7])?(lt=7+2*nt(st,165),lt+=nt(st,145)):lt=5+nt(st,159);else lt=nt(st,ut[sr+4])?3+nt(st,ut[sr+5]):2;Ge=Je[2]}else lt=1,Ge=Je[1];Je=Ne+Fp[Ie],0>(st=O).b&&Ot(st);var sr,ut=st.b,Vt=(sr=st.Ca>>1)-(st.I>>ut)>>31;--st.b,st.Ca+=Vt,st.Ca|=1,st.I-=(sr+1&Vt)<<ut,De[Je]=((lt^Vt)-Vt)*he[(0<Ie)+0]}return 16}function Hs(O){var z=O.rb[O.sb-1];z.la=0,z.Na=0,i(O.zc,0,0,O.zc.length),O.ja=0}function rs(O,z,ee,he,Ie){Ie=O[z+ee+32*he]+(Ie>>3),O[z+ee+32*he]=-256&Ie?0>Ie?0:255:Ie}function gs(O,z,ee,he,Ie,De){rs(O,z,0,ee,he+Ie),rs(O,z,1,ee,he+De),rs(O,z,2,ee,he-De),rs(O,z,3,ee,he-Ie)}function wa(O){return(20091*O>>16)+O}function Fu(O,z,ee,he){var Ie,De=0,Ne=o(16);for(Ie=0;4>Ie;++Ie){var Ge=O[z+0]+O[z+8],Je=O[z+0]-O[z+8],st=(35468*O[z+4]>>16)-wa(O[z+12]),lt=wa(O[z+4])+(35468*O[z+12]>>16);Ne[De+0]=Ge+lt,Ne[De+1]=Je+st,Ne[De+2]=Je-st,Ne[De+3]=Ge-lt,De+=4,z++}for(Ie=De=0;4>Ie;++Ie)Ge=(O=Ne[De+0]+4)+Ne[De+8],Je=O-Ne[De+8],st=(35468*Ne[De+4]>>16)-wa(Ne[De+12]),rs(ee,he,0,0,Ge+(lt=wa(Ne[De+4])+(35468*Ne[De+12]>>16))),rs(ee,he,1,0,Je+st),rs(ee,he,2,0,Je-st),rs(ee,he,3,0,Ge-lt),De++,he+=32}function Ll(O,z,ee,he){var Ie=O[z+0]+4,De=35468*O[z+4]>>16,Ne=wa(O[z+4]),Ge=35468*O[z+1]>>16;gs(ee,he,0,Ie+Ne,O=wa(O[z+1]),Ge),gs(ee,he,1,Ie+De,O,Ge),gs(ee,he,2,Ie-De,O,Ge),gs(ee,he,3,Ie-Ne,O,Ge)}function Dl(O,z,ee,he,Ie){Fu(O,z,ee,he),Ie&&Fu(O,z+16,ee,he+4)}function $(O,z,ee,he){wi(O,z+0,ee,he,1),wi(O,z+32,ee,he+128,1)}function te(O,z,ee,he){var Ie;for(O=O[z+0]+4,Ie=0;4>Ie;++Ie)for(z=0;4>z;++z)rs(ee,he,z,Ie,O)}function Oe(O,z,ee,he){O[z+0]&&ja(O,z+0,ee,he),O[z+16]&&ja(O,z+16,ee,he+4),O[z+32]&&ja(O,z+32,ee,he+128),O[z+48]&&ja(O,z+48,ee,he+128+4)}function pt(O,z,ee,he){var Ie,De=o(16);for(Ie=0;4>Ie;++Ie){var Ne=O[z+0+Ie]+O[z+12+Ie],Ge=O[z+4+Ie]+O[z+8+Ie],Je=O[z+4+Ie]-O[z+8+Ie],st=O[z+0+Ie]-O[z+12+Ie];De[0+Ie]=Ne+Ge,De[8+Ie]=Ne-Ge,De[4+Ie]=st+Je,De[12+Ie]=st-Je}for(Ie=0;4>Ie;++Ie)Ne=(O=De[0+4*Ie]+3)+De[3+4*Ie],Ge=De[1+4*Ie]+De[2+4*Ie],Je=De[1+4*Ie]-De[2+4*Ie],st=O-De[3+4*Ie],ee[he+0]=Ne+Ge>>3,ee[he+16]=st+Je>>3,ee[he+32]=Ne-Ge>>3,ee[he+48]=st-Je>>3,he+=64}function At(O,z,ee){var he,Ie=z-32,De=Ma,Ne=255-O[Ie-1];for(he=0;he<ee;++he){var Ge,Je=De,st=Ne+O[z-1];for(Ge=0;Ge<ee;++Ge)O[z+Ge]=Je[st+O[Ie+Ge]];z+=32}}function xt(O,z){At(O,z,4)}function $t(O,z){At(O,z,8)}function Ir(O,z){At(O,z,16)}function Br(O,z){var ee;for(ee=0;16>ee;++ee)n(O,z+32*ee,O,z-32,16)}function Xr(O,z){var ee;for(ee=16;0<ee;--ee)i(O,z,O[z-1],16),z+=32}function Zr(O,z,ee){var he;for(he=0;16>he;++he)i(z,ee+32*he,O,16)}function Nr(O,z){var ee,he=16;for(ee=0;16>ee;++ee)he+=O[z-1+32*ee]+O[z+ee-32];Zr(he>>5,O,z)}function wn(O,z){var ee,he=8;for(ee=0;16>ee;++ee)he+=O[z-1+32*ee];Zr(he>>4,O,z)}function ln(O,z){var ee,he=8;for(ee=0;16>ee;++ee)he+=O[z+ee-32];Zr(he>>4,O,z)}function Rn(O,z){Zr(128,O,z)}function un(O,z,ee){return O+2*z+ee+2>>2}function Sr(O,z){var ee,he=z-32;for(he=new Uint8Array([un(O[he-1],O[he+0],O[he+1]),un(O[he+0],O[he+1],O[he+2]),un(O[he+1],O[he+2],O[he+3]),un(O[he+2],O[he+3],O[he+4])]),ee=0;4>ee;++ee)n(O,z+32*ee,he,0,he.length)}function Jr(O,z){var ee=O[z-1],he=O[z-1+32],Ie=O[z-1+64],De=O[z-1+96];Nt(O,z+0,16843009*un(O[z-1-32],ee,he)),Nt(O,z+32,16843009*un(ee,he,Ie)),Nt(O,z+64,16843009*un(he,Ie,De)),Nt(O,z+96,16843009*un(Ie,De,De))}function Dn(O,z){var ee,he=4;for(ee=0;4>ee;++ee)he+=O[z+ee-32]+O[z-1+32*ee];for(he>>=3,ee=0;4>ee;++ee)i(O,z+32*ee,he,4)}function li(O,z){var ee=O[z-1+0],he=O[z-1+32],Ie=O[z-1+64],De=O[z-1-32],Ne=O[z+0-32],Ge=O[z+1-32],Je=O[z+2-32],st=O[z+3-32];O[z+0+96]=un(he,Ie,O[z-1+96]),O[z+1+96]=O[z+0+64]=un(ee,he,Ie),O[z+2+96]=O[z+1+64]=O[z+0+32]=un(De,ee,he),O[z+3+96]=O[z+2+64]=O[z+1+32]=O[z+0+0]=un(Ne,De,ee),O[z+3+64]=O[z+2+32]=O[z+1+0]=un(Ge,Ne,De),O[z+3+32]=O[z+2+0]=un(Je,Ge,Ne),O[z+3+0]=un(st,Je,Ge)}function jn(O,z){var ee=O[z+1-32],he=O[z+2-32],Ie=O[z+3-32],De=O[z+4-32],Ne=O[z+5-32],Ge=O[z+6-32],Je=O[z+7-32];O[z+0+0]=un(O[z+0-32],ee,he),O[z+1+0]=O[z+0+32]=un(ee,he,Ie),O[z+2+0]=O[z+1+32]=O[z+0+64]=un(he,Ie,De),O[z+3+0]=O[z+2+32]=O[z+1+64]=O[z+0+96]=un(Ie,De,Ne),O[z+3+32]=O[z+2+64]=O[z+1+96]=un(De,Ne,Ge),O[z+3+64]=O[z+2+96]=un(Ne,Ge,Je),O[z+3+96]=un(Ge,Je,Je)}function gi(O,z){var ee=O[z-1+0],he=O[z-1+32],Ie=O[z-1+64],De=O[z-1-32],Ne=O[z+0-32],Ge=O[z+1-32],Je=O[z+2-32],st=O[z+3-32];O[z+0+0]=O[z+1+64]=De+Ne+1>>1,O[z+1+0]=O[z+2+64]=Ne+Ge+1>>1,O[z+2+0]=O[z+3+64]=Ge+Je+1>>1,O[z+3+0]=Je+st+1>>1,O[z+0+96]=un(Ie,he,ee),O[z+0+64]=un(he,ee,De),O[z+0+32]=O[z+1+96]=un(ee,De,Ne),O[z+1+32]=O[z+2+96]=un(De,Ne,Ge),O[z+2+32]=O[z+3+96]=un(Ne,Ge,Je),O[z+3+32]=un(Ge,Je,st)}function Bu(O,z){var ee=O[z+0-32],he=O[z+1-32],Ie=O[z+2-32],De=O[z+3-32],Ne=O[z+4-32],Ge=O[z+5-32],Je=O[z+6-32],st=O[z+7-32];O[z+0+0]=ee+he+1>>1,O[z+1+0]=O[z+0+64]=he+Ie+1>>1,O[z+2+0]=O[z+1+64]=Ie+De+1>>1,O[z+3+0]=O[z+2+64]=De+Ne+1>>1,O[z+0+32]=un(ee,he,Ie),O[z+1+32]=O[z+0+96]=un(he,Ie,De),O[z+2+32]=O[z+1+96]=un(Ie,De,Ne),O[z+3+32]=O[z+2+96]=un(De,Ne,Ge),O[z+3+64]=un(Ne,Ge,Je),O[z+3+96]=un(Ge,Je,st)}function dn(O,z){var ee=O[z-1+0],he=O[z-1+32],Ie=O[z-1+64],De=O[z-1+96];O[z+0+0]=ee+he+1>>1,O[z+2+0]=O[z+0+32]=he+Ie+1>>1,O[z+2+32]=O[z+0+64]=Ie+De+1>>1,O[z+1+0]=un(ee,he,Ie),O[z+3+0]=O[z+1+32]=un(he,Ie,De),O[z+3+32]=O[z+1+64]=un(Ie,De,De),O[z+3+64]=O[z+2+64]=O[z+0+96]=O[z+1+96]=O[z+2+96]=O[z+3+96]=De}function Ta(O,z){var ee=O[z-1+0],he=O[z-1+32],Ie=O[z-1+64],De=O[z-1+96],Ne=O[z-1-32],Ge=O[z+0-32],Je=O[z+1-32],st=O[z+2-32];O[z+0+0]=O[z+2+32]=ee+Ne+1>>1,O[z+0+32]=O[z+2+64]=he+ee+1>>1,O[z+0+64]=O[z+2+96]=Ie+he+1>>1,O[z+0+96]=De+Ie+1>>1,O[z+3+0]=un(Ge,Je,st),O[z+2+0]=un(Ne,Ge,Je),O[z+1+0]=O[z+3+32]=un(ee,Ne,Ge),O[z+1+32]=O[z+3+64]=un(he,ee,Ne),O[z+1+64]=O[z+3+96]=un(Ie,he,ee),O[z+1+96]=un(De,Ie,he)}function On(O,z){var ee;for(ee=0;8>ee;++ee)n(O,z+32*ee,O,z-32,8)}function Sn(O,z){var ee;for(ee=0;8>ee;++ee)i(O,z,O[z-1],8),z+=32}function ns(O,z,ee){var he;for(he=0;8>he;++he)i(z,ee+32*he,O,8)}function bn(O,z){var ee,he=8;for(ee=0;8>ee;++ee)he+=O[z+ee-32]+O[z-1+32*ee];ns(he>>4,O,z)}function Ws(O,z){var ee,he=4;for(ee=0;8>ee;++ee)he+=O[z+ee-32];ns(he>>3,O,z)}function Sa(O,z){var ee,he=4;for(ee=0;8>ee;++ee)he+=O[z-1+32*ee];ns(he>>3,O,z)}function Ms(O,z){ns(128,O,z)}function Na(O,z,ee){var he=O[z-ee],Ie=O[z+0],De=3*(Ie-he)+uc[1020+O[z-2*ee]-O[z+ee]],Ne=ws[112+(De+4>>3)];O[z-ee]=Ma[255+he+ws[112+(De+3>>3)]],O[z+0]=Ma[255+Ie-Ne]}function vl(O,z,ee,he){var Ie=O[z+0],De=O[z+ee];return io[255+O[z-2*ee]-O[z-ee]]>he||io[255+De-Ie]>he}function zo(O,z,ee,he){return 4*io[255+O[z-ee]-O[z+0]]+io[255+O[z-2*ee]-O[z+ee]]<=he}function lu(O,z,ee,he,Ie){var De=O[z-3*ee],Ne=O[z-2*ee],Ge=O[z-ee],Je=O[z+0],st=O[z+ee],lt=O[z+2*ee],sr=O[z+3*ee];return 4*io[255+Ge-Je]+io[255+Ne-st]>he?0:io[255+O[z-4*ee]-De]<=Ie&&io[255+De-Ne]<=Ie&&io[255+Ne-Ge]<=Ie&&io[255+sr-lt]<=Ie&&io[255+lt-st]<=Ie&&io[255+st-Je]<=Ie}function uu(O,z,ee,he){var Ie=2*he+1;for(he=0;16>he;++he)zo(O,z+he,ee,Ie)&&Na(O,z+he,ee)}function ys(O,z,ee,he){var Ie=2*he+1;for(he=0;16>he;++he)zo(O,z+he*ee,1,Ie)&&Na(O,z+he*ee,1)}function Zs(O,z,ee,he){var Ie;for(Ie=3;0<Ie;--Ie)uu(O,z+=4*ee,ee,he)}function Ao(O,z,ee,he){var Ie;for(Ie=3;0<Ie;--Ie)ys(O,z+=4,ee,he)}function Oi(O,z,ee,he,Ie,De,Ne,Ge){for(De=2*De+1;0<Ie--;){if(lu(O,z,ee,De,Ne))if(vl(O,z,ee,Ge))Na(O,z,ee);else{var Je=O,st=z,lt=ee,sr=Je[st-2*lt],ut=Je[st-lt],Vt=Je[st+0],Xt=Je[st+lt],gr=Je[st+2*lt],ar=27*(Er=uc[1020+3*(Vt-ut)+uc[1020+sr-Xt]])+63>>7,tr=18*Er+63>>7,Er=9*Er+63>>7;Je[st-3*lt]=Ma[255+Je[st-3*lt]+Er],Je[st-2*lt]=Ma[255+sr+tr],Je[st-lt]=Ma[255+ut+ar],Je[st+0]=Ma[255+Vt-ar],Je[st+lt]=Ma[255+Xt-tr],Je[st+2*lt]=Ma[255+gr-Er]}z+=he}}function Wa(O,z,ee,he,Ie,De,Ne,Ge){for(De=2*De+1;0<Ie--;){if(lu(O,z,ee,De,Ne))if(vl(O,z,ee,Ge))Na(O,z,ee);else{var Je=O,st=z,lt=ee,sr=Je[st-lt],ut=Je[st+0],Vt=Je[st+lt],Xt=ws[112+(4+(gr=3*(ut-sr))>>3)],gr=ws[112+(gr+3>>3)],ar=Xt+1>>1;Je[st-2*lt]=Ma[255+Je[st-2*lt]+ar],Je[st-lt]=Ma[255+sr+gr],Je[st+0]=Ma[255+ut-Xt],Je[st+lt]=Ma[255+Vt-ar]}z+=he}}function K(O,z,ee,he,Ie,De){Oi(O,z,ee,1,16,he,Ie,De)}function Te(O,z,ee,he,Ie,De){Oi(O,z,1,ee,16,he,Ie,De)}function Qe(O,z,ee,he,Ie,De){var Ne;for(Ne=3;0<Ne;--Ne)Wa(O,z+=4*ee,ee,1,16,he,Ie,De)}function Rt(O,z,ee,he,Ie,De){var Ne;for(Ne=3;0<Ne;--Ne)Wa(O,z+=4,1,ee,16,he,Ie,De)}function Ht(O,z,ee,he,Ie,De,Ne,Ge){Oi(O,z,Ie,1,8,De,Ne,Ge),Oi(ee,he,Ie,1,8,De,Ne,Ge)}function _r(O,z,ee,he,Ie,De,Ne,Ge){Oi(O,z,1,Ie,8,De,Ne,Ge),Oi(ee,he,1,Ie,8,De,Ne,Ge)}function Dr(O,z,ee,he,Ie,De,Ne,Ge){Wa(O,z+4*Ie,Ie,1,8,De,Ne,Ge),Wa(ee,he+4*Ie,Ie,1,8,De,Ne,Ge)}function rn(O,z,ee,he,Ie,De,Ne,Ge){Wa(O,z+4,1,Ie,8,De,Ne,Ge),Wa(ee,he+4,1,Ie,8,De,Ne,Ge)}function pn(){this.ba=new zt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Gt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Nn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function kn(){this.ua=0,this.Wa=new hr,this.vb=new hr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ue,this.yc=new ae}function Fi(){this.xb=this.a=0,this.l=new _a,this.ca=new zt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new _e,this.Pb=0,this.wd=new _e,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new kn,this.ab=0,this.gc=u(4,Wn),this.Oc=0}function Ai(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new _a,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Yn(O,z,ee,he,Ie,De,Ne){for(O=O==null?0:O[z+0],z=0;z<Ne;++z)Ie[De+z]=O+ee[he+z]&255,O=Ie[De+z]}function ia(O,z,ee,he,Ie,De,Ne){var Ge;if(O==null)Yn(null,null,ee,he,Ie,De,Ne);else for(Ge=0;Ge<Ne;++Ge)Ie[De+Ge]=O[z+Ge]+ee[he+Ge]&255}function qi(O,z,ee,he,Ie,De,Ne){if(O==null)Yn(null,null,ee,he,Ie,De,Ne);else{var Ge,Je=O[z+0],st=Je,lt=Je;for(Ge=0;Ge<Ne;++Ge)st=lt+(Je=O[z+Ge])-st,lt=ee[he+Ge]+(-256&st?0>st?0:255:st)&255,st=Je,Ie[De+Ge]=lt}}function ta(O,z,ee,he){var Ie=z.width,De=z.o;if(t(O!=null&&z!=null),0>ee||0>=he||ee+he>De)return null;if(!O.Cc){if(O.ga==null){var Ne;if(O.ga=new Ai,(Ne=O.ga==null)||(Ne=z.width*z.o,t(O.Gb.length==0),O.Gb=o(Ne),O.Uc=0,O.Gb==null?Ne=0:(O.mb=O.Gb,O.nb=O.Uc,O.rc=null,Ne=1),Ne=!Ne),!Ne){Ne=O.ga;var Ge=O.Fa,Je=O.P,st=O.qc,lt=O.mb,sr=O.nb,ut=Je+1,Vt=st-1,Xt=Ne.l;if(t(Ge!=null&&lt!=null&&z!=null),ao[0]=null,ao[1]=Yn,ao[2]=ia,ao[3]=qi,Ne.ca=lt,Ne.tb=sr,Ne.c=z.width,Ne.i=z.height,t(0<Ne.c&&0<Ne.i),1>=st)z=0;else if(Ne.$a=3&Ge[Je+0],Ne.Z=Ge[Je+0]>>2&3,Ne.Lc=Ge[Je+0]>>4&3,Je=Ge[Je+0]>>6&3,0>Ne.$a||1<Ne.$a||4<=Ne.Z||1<Ne.Lc||Je)z=0;else if(Xt.put=ot,Xt.ac=Ye,Xt.bc=jt,Xt.ma=Ne,Xt.width=z.width,Xt.height=z.height,Xt.Da=z.Da,Xt.v=z.v,Xt.va=z.va,Xt.j=z.j,Xt.o=z.o,Ne.$a)e:{t(Ne.$a==1),z=Kr();t:for(;;){if(z==null){z=0;break e}if(t(Ne!=null),Ne.mc=z,z.c=Ne.c,z.i=Ne.i,z.l=Ne.l,z.l.ma=Ne,z.l.width=Ne.c,z.l.height=Ne.i,z.a=0,Ee(z.m,Ge,ut,Vt),!An(Ne.c,Ne.i,1,z,null)||(z.ab==1&&z.gc[0].hc==3&&kr(z.s)?(Ne.ic=1,Ge=z.c*z.i,z.Ta=null,z.Ua=0,z.V=o(Ge),z.Ba=0,z.V==null?(z.a=1,z=0):z=1):(Ne.ic=0,z=Ni(z,Ne.c)),!z))break t;z=1;break e}Ne.mc=null,z=0}else z=Vt>=Ne.c*Ne.i;Ne=!z}if(Ne)return null;O.ga.Lc!=1?O.Ga=0:he=De-ee}t(O.ga!=null),t(ee+he<=De);e:{if(z=(Ge=O.ga).c,De=Ge.l.o,Ge.$a==0){if(ut=O.rc,Vt=O.Vc,Xt=O.Fa,Je=O.P+1+ee*z,st=O.mb,lt=O.nb+ee*z,t(Je<=O.P+O.qc),Ge.Z!=0)for(t(ao[Ge.Z]!=null),Ne=0;Ne<he;++Ne)ao[Ge.Z](ut,Vt,Xt,Je,st,lt,z),ut=st,Vt=lt,lt+=z,Je+=z;else for(Ne=0;Ne<he;++Ne)n(st,lt,Xt,Je,z),ut=st,Vt=lt,lt+=z,Je+=z;O.rc=ut,O.Vc=Vt}else{if(t(Ge.mc!=null),z=ee+he,t((Ne=Ge.mc)!=null),t(z<=Ne.i),Ne.C>=z)z=1;else if(Ge.ic||fu(),Ge.ic){Ge=Ne.V,ut=Ne.Ba,Vt=Ne.c;var gr=Ne.i,ar=(Xt=1,Je=Ne.$/Vt,st=Ne.$%Vt,lt=Ne.m,sr=Ne.s,Ne.$),tr=Vt*gr,Er=Vt*z,qr=sr.wc,Lr=ar<Er?lr(sr,st,Je):null;t(ar<=tr),t(z<=gr),t(kr(sr));t:for(;;){for(;!lt.h&&ar<Er;){if(st&qr||(Lr=lr(sr,st,Je)),t(Lr!=null),ht(lt),256>(gr=et(Lr.G[0],Lr.H[0],lt)))Ge[ut+ar]=gr,++ar,++st>=Vt&&(st=0,++Je<=z&&!(Je%16)&&xn(Ne,Je));else{if(!(280>gr)){Xt=0;break t}gr=de(gr-256,lt);var Pn,yn=et(Lr.G[4],Lr.H[4],lt);if(ht(lt),!(ar>=(yn=Be(Vt,yn=de(yn,lt)))&&tr-ar>=gr)){Xt=0;break t}for(Pn=0;Pn<gr;++Pn)Ge[ut+ar+Pn]=Ge[ut+ar+Pn-yn];for(ar+=gr,st+=gr;st>=Vt;)st-=Vt,++Je<=z&&!(Je%16)&&xn(Ne,Je);ar<Er&&st&qr&&(Lr=lr(sr,st,Je))}t(lt.h==ke(lt))}xn(Ne,Je>z?z:Je);break t}!Xt||lt.h&&ar<tr?(Xt=0,Ne.a=lt.h?5:3):Ne.$=ar,z=Xt}else z=yr(Ne,Ne.V,Ne.Ba,Ne.c,Ne.i,z,Mi);if(!z){he=0;break e}}ee+he>=De&&(O.Cc=1),he=1}if(!he)return null;if(O.Cc&&((he=O.ga)!=null&&(he.mc=null),O.ga=null,0<O.Ga))return alert("todo:WebPDequantizeLevels"),null}return O.nb+ee*Ie}function is(O,z,ee,he,Ie,De){for(;0<Ie--;){var Ne,Ge=O,Je=z+(ee?1:0),st=O,lt=z+(ee?0:3);for(Ne=0;Ne<he;++Ne){var sr=st[lt+4*Ne];sr!=255&&(sr*=32897,Ge[Je+4*Ne+0]=Ge[Je+4*Ne+0]*sr>>23,Ge[Je+4*Ne+1]=Ge[Je+4*Ne+1]*sr>>23,Ge[Je+4*Ne+2]=Ge[Je+4*Ne+2]*sr>>23)}z+=De}}function Ks(O,z,ee,he,Ie){for(;0<he--;){var De;for(De=0;De<ee;++De){var Ne=O[z+2*De+0],Ge=15&(st=O[z+2*De+1]),Je=4369*Ge,st=(240&st|st>>4)*Je>>16;O[z+2*De+0]=(240&Ne|Ne>>4)*Je>>16&240|(15&Ne|Ne<<4)*Je>>16>>4&15,O[z+2*De+1]=240&st|Ge}z+=Ie}}function cu(O,z,ee,he,Ie,De,Ne,Ge){var Je,st,lt=255;for(st=0;st<Ie;++st){for(Je=0;Je<he;++Je){var sr=O[z+Je];De[Ne+4*Je]=sr,lt&=sr}z+=ee,Ne+=Ge}return lt!=255}function $c(O,z,ee,he,Ie){var De;for(De=0;De<Ie;++De)ee[he+De]=O[z+De]>>8}function fu(){oa=is,lc=Ks,Uo=cu,xs=$c}function $o(O,z,ee){X[O]=function(he,Ie,De,Ne,Ge,Je,st,lt,sr,ut,Vt,Xt,gr,ar,tr,Er,qr){var Lr,Pn=qr-1>>1,yn=Ge[Je+0]|st[lt+0]<<16,Qn=sr[ut+0]|Vt[Xt+0]<<16;t(he!=null);var vn=3*yn+Qn+131074>>2;for(z(he[Ie+0],255&vn,vn>>16,gr,ar),De!=null&&(vn=3*Qn+yn+131074>>2,z(De[Ne+0],255&vn,vn>>16,tr,Er)),Lr=1;Lr<=Pn;++Lr){var ui=Ge[Je+Lr]|st[lt+Lr]<<16,Xa=sr[ut+Lr]|Vt[Xt+Lr]<<16,Un=yn+ui+Qn+Xa+524296,_n=Un+2*(ui+Qn)>>3;vn=_n+yn>>1,yn=(Un=Un+2*(yn+Xa)>>3)+ui>>1,z(he[Ie+2*Lr-1],255&vn,vn>>16,gr,ar+(2*Lr-1)*ee),z(he[Ie+2*Lr-0],255&yn,yn>>16,gr,ar+(2*Lr-0)*ee),De!=null&&(vn=Un+Qn>>1,yn=_n+Xa>>1,z(De[Ne+2*Lr-1],255&vn,vn>>16,tr,Er+(2*Lr-1)*ee),z(De[Ne+2*Lr+0],255&yn,yn>>16,tr,Er+(2*Lr+0)*ee)),yn=ui,Qn=Xa}1&qr||(vn=3*yn+Qn+131074>>2,z(he[Ie+qr-1],255&vn,vn>>16,gr,ar+(qr-1)*ee),De!=null&&(vn=3*Qn+yn+131074>>2,z(De[Ne+qr-1],255&vn,vn>>16,tr,Er+(qr-1)*ee)))}}function Nl(){ls[Sl]=Bf,ls[zn]=hc,ls[Ls]=Wc,ls[Vl]=wh,ls[Of]=Zc,ls[cc]=Sh,ls[Np]=zp,ls[gd]=hc,ls[vh]=wh,ls[kf]=Zc,ls[Uc]=Sh}function bl(O){return O&-16384?0>O?0:255:O>>Cl}function as(O,z){return bl((19077*O>>8)+(26149*z>>8)-14234)}function pa(O,z,ee){return bl((19077*O>>8)-(6419*z>>8)-(13320*ee>>8)+8708)}function Za(O,z){return bl((19077*O>>8)+(33050*z>>8)-17685)}function Gi(O,z,ee,he,Ie){he[Ie+0]=as(O,ee),he[Ie+1]=pa(O,z,ee),he[Ie+2]=Za(O,z)}function vs(O,z,ee,he,Ie){he[Ie+0]=Za(O,z),he[Ie+1]=pa(O,z,ee),he[Ie+2]=as(O,ee)}function Xs(O,z,ee,he,Ie){var De=pa(O,z,ee);z=De<<3&224|Za(O,z)>>3,he[Ie+0]=248&as(O,ee)|De>>5,he[Ie+1]=z}function Hi(O,z,ee,he,Ie){var De=240&Za(O,z)|15;he[Ie+0]=240&as(O,ee)|pa(O,z,ee)>>4,he[Ie+1]=De}function Fl(O,z,ee,he,Ie){he[Ie+0]=255,Gi(O,z,ee,he,Ie+1)}function Ys(O,z,ee,he,Ie){vs(O,z,ee,he,Ie),he[Ie+3]=255}function bs(O,z,ee,he,Ie){Gi(O,z,ee,he,Ie),he[Ie+3]=255}function Ea(O,z){return 0>O?0:O>z?z:O}function Ka(O,z,ee){X[O]=function(he,Ie,De,Ne,Ge,Je,st,lt,sr){for(var ut=lt+(-2&sr)*ee;lt!=ut;)z(he[Ie+0],De[Ne+0],Ge[Je+0],st,lt),z(he[Ie+1],De[Ne+0],Ge[Je+0],st,lt+ee),Ie+=2,++Ne,++Je,lt+=2*ee;1&sr&&z(he[Ie+0],De[Ne+0],Ge[Je+0],st,lt)}}function ac(O,z,ee){return ee==0?O==0?z==0?6:5:z==0?4:0:ee}function ju(O,z,ee,he,Ie){switch(O>>>30){case 3:wi(z,ee,he,Ie,0);break;case 2:Si(z,ee,he,Ie);break;case 1:ja(z,ee,he,Ie)}}function _l(O,z){var ee,he,Ie=z.M,De=z.Nb,Ne=O.oc,Ge=O.pc+40,Je=O.oc,st=O.pc+584,lt=O.oc,sr=O.pc+600;for(ee=0;16>ee;++ee)Ne[Ge+32*ee-1]=129;for(ee=0;8>ee;++ee)Je[st+32*ee-1]=129,lt[sr+32*ee-1]=129;for(0<Ie?Ne[Ge-1-32]=Je[st-1-32]=lt[sr-1-32]=129:(i(Ne,Ge-32-1,127,21),i(Je,st-32-1,127,9),i(lt,sr-32-1,127,9)),he=0;he<O.za;++he){var ut=z.ya[z.aa+he];if(0<he){for(ee=-1;16>ee;++ee)n(Ne,Ge+32*ee-4,Ne,Ge+32*ee+12,4);for(ee=-1;8>ee;++ee)n(Je,st+32*ee-4,Je,st+32*ee+4,4),n(lt,sr+32*ee-4,lt,sr+32*ee+4,4)}var Vt=O.Gd,Xt=O.Hd+he,gr=ut.ad,ar=ut.Hc;if(0<Ie&&(n(Ne,Ge-32,Vt[Xt].y,0,16),n(Je,st-32,Vt[Xt].f,0,8),n(lt,sr-32,Vt[Xt].ea,0,8)),ut.Za){var tr=Ne,Er=Ge-32+16;for(0<Ie&&(he>=O.za-1?i(tr,Er,Vt[Xt].y[15],4):n(tr,Er,Vt[Xt+1].y,0,4)),ee=0;4>ee;ee++)tr[Er+128+ee]=tr[Er+256+ee]=tr[Er+384+ee]=tr[Er+0+ee];for(ee=0;16>ee;++ee,ar<<=2)tr=Ne,Er=Ge+zf[ee],Ss[ut.Ob[ee]](tr,Er),ju(ar,gr,16*+ee,tr,Er)}else if(tr=ac(he,Ie,ut.Ob[0]),El[tr](Ne,Ge),ar!=0)for(ee=0;16>ee;++ee,ar<<=2)ju(ar,gr,16*+ee,Ne,Ge+zf[ee]);for(ee=ut.Gc,tr=ac(he,Ie,ut.Dd),Gl[tr](Je,st),Gl[tr](lt,sr),ar=gr,tr=Je,Er=st,255&(ut=0|ee)&&(170&ut?Wi(ar,256,tr,Er):os(ar,256,tr,Er)),ut=lt,ar=sr,255&(ee>>=8)&&(170&ee?Wi(gr,320,ut,ar):os(gr,320,ut,ar)),Ie<O.Ub-1&&(n(Vt[Xt].y,0,Ne,Ge+480,16),n(Vt[Xt].f,0,Je,st+224,8),n(Vt[Xt].ea,0,lt,sr+224,8)),ee=8*De*O.B,Vt=O.sa,Xt=O.ta+16*he+16*De*O.R,gr=O.qa,ut=O.ra+8*he+ee,ar=O.Ha,tr=O.Ia+8*he+ee,ee=0;16>ee;++ee)n(Vt,Xt+ee*O.R,Ne,Ge+32*ee,16);for(ee=0;8>ee;++ee)n(gr,ut+ee*O.B,Je,st+32*ee,8),n(ar,tr+ee*O.B,lt,sr+32*ee,8)}}function Js(O,z,ee,he,Ie,De,Ne,Ge,Je){var st=[0],lt=[0],sr=0,ut=Je!=null?Je.kd:0,Vt=Je??new Nn;if(O==null||12>ee)return 7;Vt.data=O,Vt.w=z,Vt.ha=ee,z=[z],ee=[ee],Vt.gb=[Vt.gb];e:{var Xt=z,gr=ee,ar=Vt.gb;if(t(O!=null),t(gr!=null),t(ar!=null),ar[0]=0,12<=gr[0]&&!r(O,Xt[0],"RIFF")){if(r(O,Xt[0]+8,"WEBP")){ar=3;break e}var tr=gt(O,Xt[0]+4);if(12>tr||4294967286<tr){ar=3;break e}if(ut&&tr>gr[0]-8){ar=7;break e}ar[0]=tr,Xt[0]+=12,gr[0]-=12}ar=0}if(ar!=0)return ar;for(tr=0<Vt.gb[0],ee=ee[0];;){e:{var Er=O;gr=z,ar=ee;var qr=st,Lr=lt,Pn=Xt=[0];if((vn=sr=[sr])[0]=0,8>ar[0])ar=7;else{if(!r(Er,gr[0],"VP8X")){if(gt(Er,gr[0]+4)!=10){ar=3;break e}if(18>ar[0]){ar=7;break e}var yn=gt(Er,gr[0]+8),Qn=1+It(Er,gr[0]+12);if(2147483648<=Qn*(Er=1+It(Er,gr[0]+15))){ar=3;break e}Pn!=null&&(Pn[0]=yn),qr!=null&&(qr[0]=Qn),Lr!=null&&(Lr[0]=Er),gr[0]+=18,ar[0]-=18,vn[0]=1}ar=0}}if(sr=sr[0],Xt=Xt[0],ar!=0)return ar;if(gr=!!(2&Xt),!tr&&sr)return 3;if(De!=null&&(De[0]=!!(16&Xt)),Ne!=null&&(Ne[0]=gr),Ge!=null&&(Ge[0]=0),Ne=st[0],Xt=lt[0],sr&&gr&&Je==null){ar=0;break}if(4>ee){ar=7;break}if(tr&&sr||!tr&&!sr&&!r(O,z[0],"ALPH")){ee=[ee],Vt.na=[Vt.na],Vt.P=[Vt.P],Vt.Sa=[Vt.Sa];e:{yn=O,ar=z,tr=ee;var vn=Vt.gb;qr=Vt.na,Lr=Vt.P,Pn=Vt.Sa,Qn=22,t(yn!=null),t(tr!=null),Er=ar[0];var ui=tr[0];for(t(qr!=null),t(Pn!=null),qr[0]=null,Lr[0]=null,Pn[0]=0;;){if(ar[0]=Er,tr[0]=ui,8>ui){ar=7;break e}var Xa=gt(yn,Er+4);if(4294967286<Xa){ar=3;break e}var Un=8+Xa+1&-2;if(Qn+=Un,0<vn&&Qn>vn){ar=3;break e}if(!r(yn,Er,"VP8 ")||!r(yn,Er,"VP8L")){ar=0;break e}if(ui[0]<Un){ar=7;break e}r(yn,Er,"ALPH")||(qr[0]=yn,Lr[0]=Er+8,Pn[0]=Xa),Er+=Un,ui-=Un}}if(ee=ee[0],Vt.na=Vt.na[0],Vt.P=Vt.P[0],Vt.Sa=Vt.Sa[0],ar!=0)break}ee=[ee],Vt.Ja=[Vt.Ja],Vt.xa=[Vt.xa];e:if(vn=O,ar=z,tr=ee,qr=Vt.gb[0],Lr=Vt.Ja,Pn=Vt.xa,yn=ar[0],Er=!r(vn,yn,"VP8 "),Qn=!r(vn,yn,"VP8L"),t(vn!=null),t(tr!=null),t(Lr!=null),t(Pn!=null),8>tr[0])ar=7;else{if(Er||Qn){if(vn=gt(vn,yn+4),12<=qr&&vn>qr-12){ar=3;break e}if(ut&&vn>tr[0]-8){ar=7;break e}Lr[0]=vn,ar[0]+=8,tr[0]-=8,Pn[0]=Qn}else Pn[0]=5<=tr[0]&&vn[yn+0]==47&&!(vn[yn+4]>>5),Lr[0]=tr[0];ar=0}if(ee=ee[0],Vt.Ja=Vt.Ja[0],Vt.xa=Vt.xa[0],z=z[0],ar!=0)break;if(4294967286<Vt.Ja)return 3;if(Ge==null||gr||(Ge[0]=Vt.xa?2:1),Ne=[Ne],Xt=[Xt],Vt.xa){if(5>ee){ar=7;break}Ge=Ne,ut=Xt,gr=De,O==null||5>ee?O=0:5<=ee&&O[z+0]==47&&!(O[z+4]>>5)?(tr=[0],vn=[0],qr=[0],Ee(Lr=new _e,O,z,ee),ne(Lr,tr,vn,qr)?(Ge!=null&&(Ge[0]=tr[0]),ut!=null&&(ut[0]=vn[0]),gr!=null&&(gr[0]=qr[0]),O=1):O=0):O=0}else{if(10>ee){ar=7;break}Ge=Xt,O==null||10>ee||!nc(O,z+3,ee-3)?O=0:(ut=O[z+0]|O[z+1]<<8|O[z+2]<<16,gr=16383&(O[z+7]<<8|O[z+6]),O=16383&(O[z+9]<<8|O[z+8]),1&ut||3<(ut>>1&7)||!(ut>>4&1)||ut>>5>=Vt.Ja||!gr||!O?O=0:(Ne&&(Ne[0]=gr),Ge&&(Ge[0]=O),O=1))}if(!O||(Ne=Ne[0],Xt=Xt[0],sr&&(st[0]!=Ne||lt[0]!=Xt)))return 3;Je!=null&&(Je[0]=Vt,Je.offset=z-Je.w,t(4294967286>z-Je.w),t(Je.offset==Je.ha-ee));break}return ar==0||ar==7&&sr&&Je==null?(De!=null&&(De[0]|=Vt.na!=null&&0<Vt.na.length),he!=null&&(he[0]=Ne),Ie!=null&&(Ie[0]=Xt),0):ar}function Fa(O,z,ee){var he=z.width,Ie=z.height,De=0,Ne=0,Ge=he,Je=Ie;if(z.Da=O!=null&&0<O.Da,z.Da&&(Ge=O.cd,Je=O.bd,De=O.v,Ne=O.j,11>ee||(De&=-2,Ne&=-2),0>De||0>Ne||0>=Ge||0>=Je||De+Ge>he||Ne+Je>Ie))return 0;if(z.v=De,z.j=Ne,z.va=De+Ge,z.o=Ne+Je,z.U=Ge,z.T=Je,z.da=O!=null&&0<O.da,z.da){if(!vr(Ge,Je,ee=[O.ib],De=[O.hb]))return 0;z.ib=ee[0],z.hb=De[0]}return z.ob=O!=null&&O.ob,z.Kb=O==null||!O.Sd,z.da&&(z.ob=z.ib<3*he/4&&z.hb<3*Ie/4,z.Kb=0),1}function Ia(O){if(O==null)return 2;if(11>O.S){var z=O.f.RGBA;z.fb+=(O.height-1)*z.A,z.A=-z.A}else z=O.f.kb,O=O.height,z.O+=(O-1)*z.fa,z.fa=-z.fa,z.N+=(O-1>>1)*z.Ab,z.Ab=-z.Ab,z.W+=(O-1>>1)*z.Db,z.Db=-z.Db,z.F!=null&&(z.J+=(O-1)*z.lb,z.lb=-z.lb);return 0}function Bl(O,z,ee,he){if(he==null||0>=O||0>=z)return 2;if(ee!=null){if(ee.Da){var Ie=ee.cd,De=ee.bd,Ne=-2&ee.v,Ge=-2&ee.j;if(0>Ne||0>Ge||0>=Ie||0>=De||Ne+Ie>O||Ge+De>z)return 2;O=Ie,z=De}if(ee.da){if(!vr(O,z,Ie=[ee.ib],De=[ee.hb]))return 2;O=Ie[0],z=De[0]}}he.width=O,he.height=z;e:{var Je=he.width,st=he.height;if(O=he.S,0>=Je||0>=st||!(O>=Sl&&13>O))O=2;else{if(0>=he.Rd&&he.sd==null){Ne=De=Ie=z=0;var lt=(Ge=Je*al[O])*st;if(11>O||(De=(st+1)/2*(z=(Je+1)/2),O==12&&(Ne=(Ie=Je)*st)),(st=o(lt+2*De+Ne))==null){O=1;break e}he.sd=st,11>O?((Je=he.f.RGBA).eb=st,Je.fb=0,Je.A=Ge,Je.size=lt):((Je=he.f.kb).y=st,Je.O=0,Je.fa=Ge,Je.Fd=lt,Je.f=st,Je.N=0+lt,Je.Ab=z,Je.Cd=De,Je.ea=st,Je.W=0+lt+De,Je.Db=z,Je.Ed=De,O==12&&(Je.F=st,Je.J=0+lt+2*De),Je.Tc=Ne,Je.lb=Ie)}if(z=1,Ie=he.S,De=he.width,Ne=he.height,Ie>=Sl&&13>Ie)if(11>Ie)O=he.f.RGBA,z&=(Ge=Math.abs(O.A))*(Ne-1)+De<=O.size,z&=Ge>=De*al[Ie],z&=O.eb!=null;else{O=he.f.kb,Ge=(De+1)/2,lt=(Ne+1)/2,Je=Math.abs(O.fa),st=Math.abs(O.Ab);var sr=Math.abs(O.Db),ut=Math.abs(O.lb),Vt=ut*(Ne-1)+De;z&=Je*(Ne-1)+De<=O.Fd,z&=st*(lt-1)+Ge<=O.Cd,z=(z&=sr*(lt-1)+Ge<=O.Ed)&Je>=De&st>=Ge&sr>=Ge,z&=O.y!=null,z&=O.f!=null,z&=O.ea!=null,Ie==12&&(z&=ut>=De,z&=Vt<=O.Tc,z&=O.F!=null)}else z=0;O=z?0:2}}return O!=0||ee!=null&&ee.fd&&(O=Ia(he)),O}var Ba=64,Qs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],no=24,el=32,aa=8,Rs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];rt("Predictor0","PredictorAdd0"),X.Predictor0=function(){return 4278190080},X.Predictor1=function(O){return O},X.Predictor2=function(O,z,ee){return z[ee+0]},X.Predictor3=function(O,z,ee){return z[ee+1]},X.Predictor4=function(O,z,ee){return z[ee-1]},X.Predictor5=function(O,z,ee){return Ft(Ft(O,z[ee+1]),z[ee+0])},X.Predictor6=function(O,z,ee){return Ft(O,z[ee-1])},X.Predictor7=function(O,z,ee){return Ft(O,z[ee+0])},X.Predictor8=function(O,z,ee){return Ft(z[ee-1],z[ee+0])},X.Predictor9=function(O,z,ee){return Ft(z[ee+0],z[ee+1])},X.Predictor10=function(O,z,ee){return Ft(Ft(O,z[ee-1]),Ft(z[ee+0],z[ee+1]))},X.Predictor11=function(O,z,ee){var he=z[ee+0];return 0>=ur(he>>24&255,O>>24&255,(z=z[ee-1])>>24&255)+ur(he>>16&255,O>>16&255,z>>16&255)+ur(he>>8&255,O>>8&255,z>>8&255)+ur(255&he,255&O,255&z)?he:O},X.Predictor12=function(O,z,ee){var he=z[ee+0];return(Yt((O>>24&255)+(he>>24&255)-((z=z[ee-1])>>24&255))<<24|Yt((O>>16&255)+(he>>16&255)-(z>>16&255))<<16|Yt((O>>8&255)+(he>>8&255)-(z>>8&255))<<8|Yt((255&O)+(255&he)-(255&z)))>>>0},X.Predictor13=function(O,z,ee){var he=z[ee-1];return(Wt((O=Ft(O,z[ee+0]))>>24&255,he>>24&255)<<24|Wt(O>>16&255,he>>16&255)<<16|Wt(O>>8&255,he>>8&255)<<8|Wt(255&O,255&he))>>>0};var _s=X.PredictorAdd0;X.PredictorAdd1=br,rt("Predictor2","PredictorAdd2"),rt("Predictor3","PredictorAdd3"),rt("Predictor4","PredictorAdd4"),rt("Predictor5","PredictorAdd5"),rt("Predictor6","PredictorAdd6"),rt("Predictor7","PredictorAdd7"),rt("Predictor8","PredictorAdd8"),rt("Predictor9","PredictorAdd9"),rt("Predictor10","PredictorAdd10"),rt("Predictor11","PredictorAdd11"),rt("Predictor12","PredictorAdd12"),rt("Predictor13","PredictorAdd13");var qo=X.PredictorAdd2;fr("ColorIndexInverseTransform","MapARGB","32b",function(O){return O>>8&255},function(O){return O}),fr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(O){return O},function(O){return O>>8&255});var hu,du=X.ColorIndexInverseTransform,Os=X.MapARGB,jl=X.VP8LColorIndexInverseTransformAlpha,zl=X.MapAlpha,Ut=X.VP8LPredictorsAdd=[];Ut.length=16,(X.VP8LPredictors=[]).length=16,(X.VP8LPredictorsAdd_C=[]).length=16,(X.VP8LPredictors_C=[]).length=16;var Zt,Wr,en,ai,gn,Fn,Jn,wi,Si,Wi,ja,os,ho,tl,$l,oc,ql,xl,zu,sc,qc,yi,vi,rl,oa,lc,Uo,xs,Po=o(511),wl=o(2041),Ul=o(225),ks=o(767),ss=0,uc=wl,ws=Ul,Ma=ks,io=Po,Sl=0,zn=1,Ls=2,Vl=3,Of=4,cc=5,Np=6,gd=7,vh=8,kf=9,Uc=10,bh=[2,3,7],_h=[3,3,11],Vc=[280,256,256,256,40],xh=[0,1,1,1,0],yd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Lf=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Gc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Hc=8,fc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Df=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nl=null,ry=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Fp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Nf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],vd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Bp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],jp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ff=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],El=[],Ss=[],Gl=[],Ca=1,pu=2,ao=[],ls=[];$o("UpsampleRgbLinePair",Gi,3),$o("UpsampleBgrLinePair",vs,3),$o("UpsampleRgbaLinePair",bs,4),$o("UpsampleBgraLinePair",Ys,4),$o("UpsampleArgbLinePair",Fl,4),$o("UpsampleRgba4444LinePair",Hi,2),$o("UpsampleRgb565LinePair",Xs,2);var Bf=X.UpsampleRgbLinePair,Wc=X.UpsampleBgrLinePair,hc=X.UpsampleRgbaLinePair,wh=X.UpsampleBgraLinePair,Zc=X.UpsampleArgbLinePair,Sh=X.UpsampleRgba4444LinePair,zp=X.UpsampleRgb565LinePair,jf=16,mu=1<<jf-1,Hl=-227,Vo=482,Cl=6,Eh=0,$p=o(256),qp=o(256),Kc=o(256),bd=o(256),Ch=o(Vo-Hl),Up=o(Vo-Hl);Ka("YuvToRgbRow",Gi,3),Ka("YuvToBgrRow",vs,3),Ka("YuvToRgbaRow",bs,4),Ka("YuvToBgraRow",Ys,4),Ka("YuvToArgbRow",Fl,4),Ka("YuvToRgba4444Row",Hi,2),Ka("YuvToRgb565Row",Xs,2);var zf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],dc=[0,2,8],Xc=[8,7,6,4,4,2,2,2,1,1,1,1],il=1;this.WebPDecodeRGBA=function(O,z,ee,he,Ie){var De=zn,Ne=new pn,Ge=new zt;Ne.ba=Ge,Ge.S=De,Ge.width=[Ge.width],Ge.height=[Ge.height];var Je=Ge.width,st=Ge.height,lt=new Ct;if(lt==null||O==null)var sr=2;else t(lt!=null),sr=Js(O,z,ee,lt.width,lt.height,lt.Pd,lt.Qd,lt.format,null);if(sr!=0?Je=0:(Je!=null&&(Je[0]=lt.width[0]),st!=null&&(st[0]=lt.height[0]),Je=1),Je){Ge.width=Ge.width[0],Ge.height=Ge.height[0],he!=null&&(he[0]=Ge.width),Ie!=null&&(Ie[0]=Ge.height);e:{if(he=new _a,(Ie=new Nn).data=O,Ie.w=z,Ie.ha=ee,Ie.kd=1,z=[0],t(Ie!=null),((O=Js(Ie.data,Ie.w,Ie.ha,null,null,null,z,null,Ie))==0||O==7)&&z[0]&&(O=4),(z=O)==0){if(t(Ne!=null),he.data=Ie.data,he.w=Ie.w+Ie.offset,he.ha=Ie.ha-Ie.offset,he.put=ot,he.ac=Ye,he.bc=jt,he.ma=Ne,Ie.xa){if((O=Kr())==null){Ne=1;break e}if((function(ut,Vt){var Xt=[0],gr=[0],ar=[0];t:for(;;){if(ut==null)return 0;if(Vt==null)return ut.a=2,0;if(ut.l=Vt,ut.a=0,Ee(ut.m,Vt.data,Vt.w,Vt.ha),!ne(ut.m,Xt,gr,ar)){ut.a=3;break t}if(ut.xb=pu,Vt.width=Xt[0],Vt.height=gr[0],!An(Xt[0],gr[0],1,ut,null))break t;return 1}return t(ut.a!=0),0})(O,he)){if(he=(z=Bl(he.width,he.height,Ne.Oa,Ne.ba))==0){t:{he=O;r:for(;;){if(he==null){he=0;break t}if(t(he.s.yc!=null),t(he.s.Ya!=null),t(0<he.s.Wb),t((ee=he.l)!=null),t((Ie=ee.ma)!=null),he.xb!=0){if(he.ca=Ie.ba,he.tb=Ie.tb,t(he.ca!=null),!Fa(Ie.Oa,ee,Vl)){he.a=2;break r}if(!Ni(he,ee.width)||ee.da)break r;if((ee.da||Mt(he.ca.S))&&fu(),11>he.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),he.ca.f.kb.F!=null&&fu()),he.Pb&&0<he.s.ua&&he.s.vb.X==null&&!Le(he.s.vb,he.s.Wa.Xa)){he.a=1;break r}he.xb=0}if(!yr(he,he.V,he.Ba,he.c,he.i,ee.o,zr))break r;Ie.Dc=he.Ma,he=1;break t}t(he.a!=0),he=0}he=!he}he&&(z=O.a)}else z=O.a}else{if((O=new ts)==null){Ne=1;break e}if(O.Fa=Ie.na,O.P=Ie.P,O.qc=Ie.Sa,ic(O,he)){if((z=Bl(he.width,he.height,Ne.Oa,Ne.ba))==0){if(O.Aa=0,ee=Ne.Oa,t((Ie=O)!=null),ee!=null){if(0<(Je=0>(Je=ee.Md)?0:100<Je?255:255*Je/100)){for(st=lt=0;4>st;++st)12>(sr=Ie.pb[st]).lc&&(sr.ia=Je*Xc[0>sr.lc?0:sr.lc]>>3),lt|=sr.ia;lt&&(alert("todo:VP8InitRandom"),Ie.ia=1)}Ie.Ga=ee.Id,100<Ie.Ga?Ie.Ga=100:0>Ie.Ga&&(Ie.Ga=0)}(function(ut,Vt){if(ut==null)return 0;if(Vt==null)return xa(ut,2,"NULL VP8Io parameter in VP8Decode().");if(!ut.cb&&!ic(ut,Vt))return 0;if(t(ut.cb),Vt.ac==null||Vt.ac(Vt)){Vt.ob&&(ut.L=0);var Xt=dc[ut.L];if(ut.L==2?(ut.yb=0,ut.zb=0):(ut.yb=Vt.v-Xt>>4,ut.zb=Vt.j-Xt>>4,0>ut.yb&&(ut.yb=0),0>ut.zb&&(ut.zb=0)),ut.Va=Vt.o+15+Xt>>4,ut.Hb=Vt.va+15+Xt>>4,ut.Hb>ut.za&&(ut.Hb=ut.za),ut.Va>ut.Ub&&(ut.Va=ut.Ub),0<ut.L){var gr=ut.ed;for(Xt=0;4>Xt;++Xt){var ar;if(ut.Qa.Cb){var tr=ut.Qa.Lb[Xt];ut.Qa.Fb||(tr+=gr.Tb)}else tr=gr.Tb;for(ar=0;1>=ar;++ar){var Er=ut.gd[Xt][ar],qr=tr;if(gr.Pc&&(qr+=gr.vd[0],ar&&(qr+=gr.od[0])),0<(qr=0>qr?0:63<qr?63:qr)){var Lr=qr;0<gr.wb&&(Lr=4<gr.wb?Lr>>2:Lr>>1)>9-gr.wb&&(Lr=9-gr.wb),1>Lr&&(Lr=1),Er.dd=Lr,Er.tc=2*qr+Lr,Er.ld=40<=qr?2:15<=qr?1:0}else Er.tc=0;Er.La=ar}}}Xt=0}else xa(ut,6,"Frame setup failed"),Xt=ut.a;if(Xt=Xt==0){if(Xt){ut.$c=0,0<ut.Aa||(ut.Ic=il);t:{Xt=ut.Ic,gr=4*(Lr=ut.za);var Pn=32*Lr,yn=Lr+1,Qn=0<ut.L?Lr*(0<ut.Aa?2:1):0,vn=(ut.Aa==2?2:1)*Lr;if((Er=gr+832+(ar=3*(16*Xt+dc[ut.L])/2*Pn)+(tr=ut.Fa!=null&&0<ut.Fa.length?ut.Kc.c*ut.Kc.i:0))!=Er)Xt=0;else{if(Er>ut.Vb){if(ut.Vb=0,ut.Ec=o(Er),ut.Fc=0,ut.Ec==null){Xt=xa(ut,1,"no memory during frame initialization.");break t}ut.Vb=Er}Er=ut.Ec,qr=ut.Fc,ut.Ac=Er,ut.Bc=qr,qr+=gr,ut.Gd=u(Pn,Ti),ut.Hd=0,ut.rb=u(yn+1,qn),ut.sb=1,ut.wa=Qn?u(Qn,$n):null,ut.Y=0,ut.D.Nb=0,ut.D.wa=ut.wa,ut.D.Y=ut.Y,0<ut.Aa&&(ut.D.Y+=Lr),t(!0),ut.oc=Er,ut.pc=qr,qr+=832,ut.ya=u(vn,Hn),ut.aa=0,ut.D.ya=ut.ya,ut.D.aa=ut.aa,ut.Aa==2&&(ut.D.aa+=Lr),ut.R=16*Lr,ut.B=8*Lr,Lr=(Pn=dc[ut.L])*ut.R,Pn=Pn/2*ut.B,ut.sa=Er,ut.ta=qr+Lr,ut.qa=ut.sa,ut.ra=ut.ta+16*Xt*ut.R+Pn,ut.Ha=ut.qa,ut.Ia=ut.ra+8*Xt*ut.B+Pn,ut.$c=0,qr+=ar,ut.mb=tr?Er:null,ut.nb=tr?qr:null,t(qr+tr<=ut.Fc+ut.Vb),Hs(ut),i(ut.Ac,ut.Bc,0,gr),Xt=1}}if(Xt){if(Vt.ka=0,Vt.y=ut.sa,Vt.O=ut.ta,Vt.f=ut.qa,Vt.N=ut.ra,Vt.ea=ut.Ha,Vt.Vd=ut.Ia,Vt.fa=ut.R,Vt.Rc=ut.B,Vt.F=null,Vt.J=0,!ss){for(Xt=-255;255>=Xt;++Xt)Po[255+Xt]=0>Xt?-Xt:Xt;for(Xt=-1020;1020>=Xt;++Xt)wl[1020+Xt]=-128>Xt?-128:127<Xt?127:Xt;for(Xt=-112;112>=Xt;++Xt)Ul[112+Xt]=-16>Xt?-16:15<Xt?15:Xt;for(Xt=-255;510>=Xt;++Xt)ks[255+Xt]=0>Xt?0:255<Xt?255:Xt;ss=1}Jn=pt,wi=Dl,Wi=$,ja=te,os=Oe,Si=Ll,ho=K,tl=Te,$l=Ht,oc=_r,ql=Qe,xl=Rt,zu=Dr,sc=rn,qc=uu,yi=ys,vi=Zs,rl=Ao,Ss[0]=Dn,Ss[1]=xt,Ss[2]=Sr,Ss[3]=Jr,Ss[4]=li,Ss[5]=gi,Ss[6]=jn,Ss[7]=Bu,Ss[8]=Ta,Ss[9]=dn,El[0]=Nr,El[1]=Ir,El[2]=Br,El[3]=Xr,El[4]=wn,El[5]=ln,El[6]=Rn,Gl[0]=bn,Gl[1]=$t,Gl[2]=On,Gl[3]=Sn,Gl[4]=Sa,Gl[5]=Ws,Gl[6]=Ms,Xt=1}else Xt=0}Xt&&(Xt=(function(ui,Xa){for(ui.M=0;ui.M<ui.Va;++ui.M){var Un,_n=ui.Jc[ui.M&ui.Xb],Qr=ui.m,Zi=ui;for(Un=0;Un<Zi.za;++Un){var fn=Qr,oi=Zi,Ki=oi.Ac,oo=oi.Bc+4*Un,Go=oi.zc,Aa=oi.ya[oi.aa+Un];if(oi.Qa.Bb?Aa.$b=nt(fn,oi.Pa.jb[0])?2+nt(fn,oi.Pa.jb[2]):nt(fn,oi.Pa.jb[1]):Aa.$b=0,oi.kc&&(Aa.Ad=nt(fn,oi.Bd)),Aa.Za=!nt(fn,145)+0,Aa.Za){var Ho=Aa.Ob,ma=0;for(oi=0;4>oi;++oi){var Ra,Fr=Go[0+oi];for(Ra=0;4>Ra;++Ra){Fr=Bp[Ki[oo+Ra]][Fr];for(var Yr=Nf[nt(fn,Fr[0])];0<Yr;)Yr=Nf[2*Yr+nt(fn,Fr[Yr])];Fr=-Yr,Ki[oo+Ra]=Fr}n(Ho,ma,Ki,oo,4),ma+=4,Go[0+oi]=Fr}}else Fr=nt(fn,156)?nt(fn,128)?1:3:nt(fn,163)?2:0,Aa.Ob[0]=Fr,i(Ki,oo,Fr,4),i(Go,0,Fr,4);Aa.Dd=nt(fn,142)?nt(fn,114)?nt(fn,183)?1:3:2:0}if(Zi.m.Ka)return xa(ui,7,"Premature end-of-partition0 encountered.");for(;ui.ja<ui.za;++ui.ja){if(Zi=_n,fn=(Qr=ui).rb[Qr.sb-1],Ki=Qr.rb[Qr.sb+Qr.ja],Un=Qr.ya[Qr.aa+Qr.ja],oo=Qr.kc?Un.Ad:0)fn.la=Ki.la=0,Un.Za||(fn.Na=Ki.Na=0),Un.Hc=0,Un.Gc=0,Un.ia=0;else{var sa,Bi;if(fn=Ki,Ki=Zi,oo=Qr.Pa.Xc,Go=Qr.ya[Qr.aa+Qr.ja],Aa=Qr.pb[Go.$b],oi=Go.ad,Ho=0,ma=Qr.rb[Qr.sb-1],Fr=Ra=0,i(oi,Ho,0,384),Go.Za)var za=0,la=oo[3];else{Yr=o(16);var Oa=fn.Na+ma.Na;if(Oa=nl(Ki,oo[1],Oa,Aa.Eb,0,Yr,0),fn.Na=ma.Na=(0<Oa)+0,1<Oa)Jn(Yr,0,oi,Ho);else{var Ui=Yr[0]+3>>3;for(Yr=0;256>Yr;Yr+=16)oi[Ho+Yr]=Ui}za=1,la=oo[0]}var Xi=15&fn.la,ua=15&ma.la;for(Yr=0;4>Yr;++Yr){var bi=1&ua;for(Ui=Bi=0;4>Ui;++Ui)Xi=Xi>>1|(bi=(Oa=nl(Ki,la,Oa=bi+(1&Xi),Aa.Sc,za,oi,Ho))>za)<<7,Bi=Bi<<2|(3<Oa?3:1<Oa?2:oi[Ho+0]!=0),Ho+=16;Xi>>=4,ua=ua>>1|bi<<7,Ra=(Ra<<8|Bi)>>>0}for(la=Xi,za=ua>>4,sa=0;4>sa;sa+=2){for(Bi=0,Xi=fn.la>>4+sa,ua=ma.la>>4+sa,Yr=0;2>Yr;++Yr){for(bi=1&ua,Ui=0;2>Ui;++Ui)Oa=bi+(1&Xi),Xi=Xi>>1|(bi=0<(Oa=nl(Ki,oo[2],Oa,Aa.Qc,0,oi,Ho)))<<3,Bi=Bi<<2|(3<Oa?3:1<Oa?2:oi[Ho+0]!=0),Ho+=16;Xi>>=2,ua=ua>>1|bi<<5}Fr|=Bi<<4*sa,la|=Xi<<4<<sa,za|=(240&ua)<<sa}fn.la=la,ma.la=za,Go.Hc=Ra,Go.Gc=Fr,Go.ia=43690&Fr?0:Aa.ia,oo=!(Ra|Fr)}if(0<Qr.L&&(Qr.wa[Qr.Y+Qr.ja]=Qr.gd[Un.$b][Un.Za],Qr.wa[Qr.Y+Qr.ja].La|=!oo),Zi.Ka)return xa(ui,7,"Premature end-of-file encountered.")}if(Hs(ui),Qr=Xa,Zi=1,Un=(_n=ui).D,fn=0<_n.L&&_n.M>=_n.zb&&_n.M<=_n.Va,_n.Aa==0)t:{if(Un.M=_n.M,Un.uc=fn,_l(_n,Un),Zi=1,Un=(Bi=_n.D).Nb,fn=(Fr=dc[_n.L])*_n.R,Ki=Fr/2*_n.B,Yr=16*Un*_n.R,Ui=8*Un*_n.B,oo=_n.sa,Go=_n.ta-fn+Yr,Aa=_n.qa,oi=_n.ra-Ki+Ui,Ho=_n.Ha,ma=_n.Ia-Ki+Ui,ua=(Xi=Bi.M)==0,Ra=Xi>=_n.Va-1,_n.Aa==2&&_l(_n,Bi),Bi.uc)for(bi=(Oa=_n).D.M,t(Oa.D.uc),Bi=Oa.yb;Bi<Oa.Hb;++Bi){za=Bi,la=bi;var ci=(Es=(lo=Oa).D).Nb;sa=lo.R;var Es=Es.wa[Es.Y+za],Ya=lo.sa,$a=lo.ta+16*ci*sa+16*za,us=Es.dd,Vi=Es.tc;if(Vi!=0)if(t(3<=Vi),lo.L==1)0<za&&yi(Ya,$a,sa,Vi+4),Es.La&&rl(Ya,$a,sa,Vi),0<la&&qc(Ya,$a,sa,Vi+4),Es.La&&vi(Ya,$a,sa,Vi);else{var so=lo.B,cs=lo.qa,gu=lo.ra+8*ci*so+8*za,ol=lo.Ha,lo=lo.Ia+8*ci*so+8*za;ci=Es.ld,0<za&&(tl(Ya,$a,sa,Vi+4,us,ci),oc(cs,gu,ol,lo,so,Vi+4,us,ci)),Es.La&&(xl(Ya,$a,sa,Vi,us,ci),sc(cs,gu,ol,lo,so,Vi,us,ci)),0<la&&(ho(Ya,$a,sa,Vi+4,us,ci),$l(cs,gu,ol,lo,so,Vi+4,us,ci)),Es.La&&(ql(Ya,$a,sa,Vi,us,ci),zu(cs,gu,ol,lo,so,Vi,us,ci))}}if(_n.ia&&alert("todo:DitherRow"),Qr.put!=null){if(Bi=16*Xi,Xi=16*(Xi+1),ua?(Qr.y=_n.sa,Qr.O=_n.ta+Yr,Qr.f=_n.qa,Qr.N=_n.ra+Ui,Qr.ea=_n.Ha,Qr.W=_n.Ia+Ui):(Bi-=Fr,Qr.y=oo,Qr.O=Go,Qr.f=Aa,Qr.N=oi,Qr.ea=Ho,Qr.W=ma),Ra||(Xi-=Fr),Xi>Qr.o&&(Xi=Qr.o),Qr.F=null,Qr.J=null,_n.Fa!=null&&0<_n.Fa.length&&Bi<Xi&&(Qr.J=ta(_n,Qr,Bi,Xi-Bi),Qr.F=_n.mb,Qr.F==null&&Qr.F.length==0)){Zi=xa(_n,3,"Could not decode alpha data.");break t}Bi<Qr.j&&(Fr=Qr.j-Bi,Bi=Qr.j,t(!(1&Fr)),Qr.O+=_n.R*Fr,Qr.N+=_n.B*(Fr>>1),Qr.W+=_n.B*(Fr>>1),Qr.F!=null&&(Qr.J+=Qr.width*Fr)),Bi<Xi&&(Qr.O+=Qr.v,Qr.N+=Qr.v>>1,Qr.W+=Qr.v>>1,Qr.F!=null&&(Qr.J+=Qr.v),Qr.ka=Bi-Qr.j,Qr.U=Qr.va-Qr.v,Qr.T=Xi-Bi,Zi=Qr.put(Qr))}Un+1!=_n.Ic||Ra||(n(_n.sa,_n.ta-fn,oo,Go+16*_n.R,fn),n(_n.qa,_n.ra-Ki,Aa,oi+8*_n.B,Ki),n(_n.Ha,_n.Ia-Ki,Ho,ma+8*_n.B,Ki))}if(!Zi)return xa(ui,6,"Output aborted.")}return 1})(ut,Vt)),Vt.bc!=null&&Vt.bc(Vt),Xt&=1}return Xt?(ut.cb=0,Xt):0})(O,he)||(z=O.a)}}else z=O.a}z==0&&Ne.Oa!=null&&Ne.Oa.fd&&(z=Ia(Ne.ba))}Ne=z}De=Ne!=0?null:11>De?Ge.f.RGBA.eb:Ge.f.kb.y}else De=null;return De};var al=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(X,le){for(var H="",G=0;G<4;G++)H+=String.fromCharCode(X[le++]);return H}function m(X,le){return X[le+0]|X[le+1]<<8}function v(X,le){return(X[le+0]|X[le+1]<<8|X[le+2]<<16)>>>0}function w(X,le){return(X[le+0]|X[le+1]<<8|X[le+2]<<16|X[le+3]<<24)>>>0}new p;var x=[0],P=[0],T=[],R=new p,k=e,N=(function(X,le){var H={},G=0,ae=!1,se=0,ue=0;if(H.frames=[],!(function(fe,_e){for(var Pe=0;Pe<4;Pe++)if(fe[_e+Pe]!="RIFF".charCodeAt(Pe))return!0;return!1})(X,le)){for(w(X,le+=4),le+=8;le<X.length;){var me=h(X,le),Ce=w(X,le+=4);le+=4;var pe=Ce+(1&Ce);switch(me){case"VP8 ":case"VP8L":H.frames[G]===void 0&&(H.frames[G]={}),(Ke=H.frames[G]).src_off=ae?ue:le-8,Ke.src_size=se+Ce+8,G++,ae&&(ae=!1,se=0,ue=0);break;case"VP8X":(Ke=H.header={}).feature_flags=X[le];var Ee=le+4;Ke.canvas_width=1+v(X,Ee),Ee+=3,Ke.canvas_height=1+v(X,Ee),Ee+=3;break;case"ALPH":ae=!0,se=pe+8,ue=le-8;break;case"ANIM":(Ke=H.header).bgcolor=w(X,le),Ee=le+4,Ke.loop_count=m(X,Ee),Ee+=2;break;case"ANMF":var Fe,Ke;(Ke=H.frames[G]={}).offset_x=2*v(X,le),le+=3,Ke.offset_y=2*v(X,le),le+=3,Ke.width=1+v(X,le),le+=3,Ke.height=1+v(X,le),le+=3,Ke.duration=v(X,le),le+=3,Fe=X[le++],Ke.dispose=1&Fe,Ke.blend=Fe>>1&1}me!="ANMF"&&(le+=pe)}return H}})(k,0);N.response=k,N.rgbaoutput=!0,N.dataurl=!1;var F=N.header?N.header:null,D=N.frames?N.frames:null;if(F){F.loop_counter=F.loop_count,x=[F.canvas_height],P=[F.canvas_width];for(var U=0;U<D.length&&D[U].blend!=0;U++);}var B=D[0],Z=R.WebPDecodeRGBA(k,B.src_off,B.src_size,P,x);B.rgba=Z,B.imgwidth=P[0],B.imgheight=x[0];for(var J=0;J<P[0]*x[0]*4;J++)T[J]=Z[J];return this.width=P,this.height=x,this.data=T,this}(function(e){var t,r,n,i,o,u,a,p,h,m=function(fe){return fe=fe||{},this.isStrokeTransparent=fe.isStrokeTransparent||!1,this.strokeOpacity=fe.strokeOpacity||1,this.strokeStyle=fe.strokeStyle||"#000000",this.fillStyle=fe.fillStyle||"#000000",this.isFillTransparent=fe.isFillTransparent||!1,this.fillOpacity=fe.fillOpacity||1,this.font=fe.font||"10px sans-serif",this.textBaseline=fe.textBaseline||"alphabetic",this.textAlign=fe.textAlign||"left",this.lineWidth=fe.lineWidth||1,this.lineJoin=fe.lineJoin||"miter",this.lineCap=fe.lineCap||"butt",this.path=fe.path||[],this.transform=fe.transform!==void 0?fe.transform.clone():new p,this.globalCompositeOperation=fe.globalCompositeOperation||"normal",this.globalAlpha=fe.globalAlpha||1,this.clip_path=fe.clip_path||[],this.currentPoint=fe.currentPoint||new u,this.miterLimit=fe.miterLimit||10,this.lastPoint=fe.lastPoint||new u,this.lineDashOffset=fe.lineDashOffset||0,this.lineDash=fe.lineDash||[],this.margin=fe.margin||[0,0,0,0],this.prevPageLastElemOffset=fe.prevPageLastElemOffset||0,this.ignoreClearRect=typeof fe.ignoreClearRect!="boolean"||fe.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new v(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,a=this.internal.Rectangle,p=this.internal.Matrix,h=new m}]);var v=function(fe){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var _e=fe;Object.defineProperty(this,"pdf",{get:function(){return _e}});var Pe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Pe},set:function(gt){Pe=!!gt}});var ke=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ke},set:function(gt){ke=!!gt}});var $e=0;Object.defineProperty(this,"posX",{get:function(){return $e},set:function(gt){isNaN(gt)||($e=gt)}});var ht=0;Object.defineProperty(this,"posY",{get:function(){return ht},set:function(gt){isNaN(gt)||(ht=gt)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(gt){var Le;typeof gt=="number"?Le=[gt,gt,gt,gt]:((Le=new Array(4))[0]=gt[0],Le[1]=gt.length>=2?gt[1]:Le[0],Le[2]=gt.length>=3?gt[2]:Le[0],Le[3]=gt.length>=4?gt[3]:Le[1]),h.margin=Le}});var Ot=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ot},set:function(gt){Ot=gt}});var mt=0;Object.defineProperty(this,"lastBreak",{get:function(){return mt},set:function(gt){mt=gt}});var nt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return nt},set:function(gt){nt=gt}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(gt){gt instanceof m&&(h=gt)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(gt){h.path=gt}});var Nt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Nt},set:function(gt){Nt=gt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(gt){var Le;Le=w(gt),this.ctx.fillStyle=Le.style,this.ctx.isFillTransparent=Le.a===0,this.ctx.fillOpacity=Le.a,this.pdf.setFillColor(Le.r,Le.g,Le.b,{a:Le.a}),this.pdf.setTextColor(Le.r,Le.g,Le.b,{a:Le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(gt){var Le=w(gt);this.ctx.strokeStyle=Le.style,this.ctx.isStrokeTransparent=Le.a===0,this.ctx.strokeOpacity=Le.a,Le.a===0?this.pdf.setDrawColor(255,255,255):(Le.a,this.pdf.setDrawColor(Le.r,Le.g,Le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(gt){["butt","round","square"].indexOf(gt)!==-1&&(this.ctx.lineCap=gt,this.pdf.setLineCap(gt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(gt){isNaN(gt)||(this.ctx.lineWidth=gt,this.pdf.setLineWidth(gt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(gt){["bevel","round","miter"].indexOf(gt)!==-1&&(this.ctx.lineJoin=gt,this.pdf.setLineJoin(gt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(gt){isNaN(gt)||(this.ctx.miterLimit=gt,this.pdf.setMiterLimit(gt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(gt){this.ctx.textBaseline=gt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(gt){["right","end","center","left","start"].indexOf(gt)!==-1&&(this.ctx.textAlign=gt)}});var kt=null,It=null;Object.defineProperty(this,"fontFaces",{get:function(){return It},set:function(gt){kt=null,It=gt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(gt){var Le;if(this.ctx.font=gt,(Le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(gt))!==null){var pr=Le[1];Le[2];var hr=Le[3],vr=Le[4];Le[5];var Qt=Le[6],qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(vr)[2];vr=Math.floor(qe==="px"?parseFloat(vr)*this.pdf.internal.scaleFactor:qe==="em"?parseFloat(vr)*this.pdf.getFontSize():parseFloat(vr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(vr);var rt=(function(wr){var fr,bt,ve=[],xe=wr.trim();if(xe==="")return s5;if(xe in oD)return[oD[xe]];for(;xe!=="";){switch(bt=null,fr=(xe=lD(xe)).charAt(0)){case'"':case"'":bt=yue(xe.substring(1),fr);break;default:bt=vue(xe)}if(bt===null||(ve.push(bt[0]),(xe=lD(bt[1]))!==""&&xe.charAt(0)!==","))return s5;xe=xe.replace(/^,/,"")}return ve})(Qt);if(this.fontFaces){var ct=(function(wr,fr){if(kt===null){var bt=(function(ve){var xe=[];return Object.keys(ve).forEach(function(Ae){ve[Ae].forEach(function(Ue){var tt=null;switch(Ue){case"bold":tt={family:Ae,weight:"bold"};break;case"italic":tt={family:Ae,style:"italic"};break;case"bolditalic":tt={family:Ae,weight:"bold",style:"italic"};break;case"":case"normal":tt={family:Ae}}tt!==null&&(tt.ref={name:Ae,style:Ue},xe.push(tt))})}),xe})(wr.getFontList());kt=(function(ve){for(var xe={},Ae=0;Ae<ve.length;++Ae){var Ue=o5(ve[Ae]),tt=Ue.family,_t=Ue.stretch,Mt=Ue.style,Pt=Ue.weight;xe[tt]=xe[tt]||{},xe[tt][_t]=xe[tt][_t]||{},xe[tt][_t][Mt]=xe[tt][_t][Mt]||{},xe[tt][_t][Mt][Pt]=Ue}return xe})(bt.concat(fr))}return kt})(this.pdf,this.fontFaces),Ft=rt.map(function(wr){return{family:wr,stretch:"normal",weight:hr,style:pr}}),Yt=(function(wr,fr,bt){for(var ve=(bt=bt||{}).defaultFontFamily||"times",xe=Object.assign({},gue,bt.genericFontFamilies||{}),Ae=null,Ue=null,tt=0;tt<fr.length;++tt)if(xe[(Ae=o5(fr[tt])).family]&&(Ae.family=xe[Ae.family]),wr.hasOwnProperty(Ae.family)){Ue=wr[Ae.family];break}if(!(Ue=Ue||wr[ve]))throw new Error("Could not find a font-family for the rule '"+sD(Ae)+"' and default family '"+ve+"'.");if(Ue=(function(_t,Mt){if(Mt[_t])return Mt[_t];var Pt=nT[_t],Kt=Pt<=nT.normal?-1:1,zt=aD(Mt,Vq,Pt,Kt);if(!zt)throw new Error("Could not find a matching font-stretch value for "+_t);return zt})(Ae.stretch,Ue),Ue=(function(_t,Mt){if(Mt[_t])return Mt[_t];for(var Pt=Uq[_t],Kt=0;Kt<Pt.length;++Kt)if(Mt[Pt[Kt]])return Mt[Pt[Kt]];throw new Error("Could not find a matching font-style for "+_t)})(Ae.style,Ue),!(Ue=(function(_t,Mt){if(Mt[_t])return Mt[_t];if(_t===400&&Mt[500])return Mt[500];if(_t===500&&Mt[400])return Mt[400];var Pt=mue[_t],Kt=aD(Mt,Gq,Pt,_t<400?-1:1);if(!Kt)throw new Error("Could not find a matching font-weight for value "+_t);return Kt})(Ae.weight,Ue)))throw new Error("Failed to resolve a font for the rule '"+sD(Ae)+"'.");return Ue})(ct,Ft);this.pdf.setFont(Yt.ref.name,Yt.ref.style)}else{var Wt="";(hr==="bold"||parseInt(hr,10)>=700||pr==="bold")&&(Wt="bold"),pr==="italic"&&(Wt+="italic"),Wt.length===0&&(Wt="normal");for(var ur="",br={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},xr=0;xr<rt.length;xr++){if(this.pdf.internal.getFont(rt[xr],Wt,{noFallback:!0,disableWarning:!0})!==void 0){ur=rt[xr];break}if(Wt==="bolditalic"&&this.pdf.internal.getFont(rt[xr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ur=rt[xr],Wt="bold";else if(this.pdf.internal.getFont(rt[xr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ur=rt[xr],Wt="normal";break}}if(ur===""){for(var Rr=0;Rr<rt.length;Rr++)if(br[rt[Rr]]){ur=br[rt[Rr]];break}}ur=ur===""?"Times":ur,this.pdf.setFont(ur,Wt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(gt){this.ctx.globalCompositeOperation=gt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(gt){this.ctx.globalAlpha=gt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(gt){this.ctx.lineDashOffset=gt,Ke.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(gt){this.ctx.lineDash=gt,Ke.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(gt){this.ctx.ignoreClearRect=!!gt}})};v.prototype.setLineDash=function(fe){this.lineDash=fe},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){D.call(this,"fill",!1)},v.prototype.stroke=function(){D.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(fe,_e){if(isNaN(fe)||isNaN(_e))throw Pa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Pe=this.ctx.transform.applyToPoint(new u(fe,_e));this.path.push({type:"mt",x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new u(fe,_e)},v.prototype.closePath=function(){var fe=new u(0,0),_e=0;for(_e=this.path.length-1;_e!==-1;_e--)if(this.path[_e].type==="begin"&&ha(this.path[_e+1])==="object"&&typeof this.path[_e+1].x=="number"){fe=new u(this.path[_e+1].x,this.path[_e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(fe.x,fe.y)},v.prototype.lineTo=function(fe,_e){if(isNaN(fe)||isNaN(_e))throw Pa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Pe=this.ctx.transform.applyToPoint(new u(fe,_e));this.path.push({type:"lt",x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new u(Pe.x,Pe.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},v.prototype.quadraticCurveTo=function(fe,_e,Pe,ke){if(isNaN(Pe)||isNaN(ke)||isNaN(fe)||isNaN(_e))throw Pa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var $e=this.ctx.transform.applyToPoint(new u(Pe,ke)),ht=this.ctx.transform.applyToPoint(new u(fe,_e));this.path.push({type:"qct",x1:ht.x,y1:ht.y,x:$e.x,y:$e.y}),this.ctx.lastPoint=new u($e.x,$e.y)},v.prototype.bezierCurveTo=function(fe,_e,Pe,ke,$e,ht){if(isNaN($e)||isNaN(ht)||isNaN(fe)||isNaN(_e)||isNaN(Pe)||isNaN(ke))throw Pa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ot=this.ctx.transform.applyToPoint(new u($e,ht)),mt=this.ctx.transform.applyToPoint(new u(fe,_e)),nt=this.ctx.transform.applyToPoint(new u(Pe,ke));this.path.push({type:"bct",x1:mt.x,y1:mt.y,x2:nt.x,y2:nt.y,x:Ot.x,y:Ot.y}),this.ctx.lastPoint=new u(Ot.x,Ot.y)},v.prototype.arc=function(fe,_e,Pe,ke,$e,ht){if(isNaN(fe)||isNaN(_e)||isNaN(Pe)||isNaN(ke)||isNaN($e))throw Pa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ht=!!ht,!this.ctx.transform.isIdentity){var Ot=this.ctx.transform.applyToPoint(new u(fe,_e));fe=Ot.x,_e=Ot.y;var mt=this.ctx.transform.applyToPoint(new u(0,Pe)),nt=this.ctx.transform.applyToPoint(new u(0,0));Pe=Math.sqrt(Math.pow(mt.x-nt.x,2)+Math.pow(mt.y-nt.y,2))}Math.abs($e-ke)>=2*Math.PI&&(ke=0,$e=2*Math.PI),this.path.push({type:"arc",x:fe,y:_e,radius:Pe,startAngle:ke,endAngle:$e,counterclockwise:ht})},v.prototype.arcTo=function(fe,_e,Pe,ke,$e){throw new Error("arcTo not implemented.")},v.prototype.rect=function(fe,_e,Pe,ke){if(isNaN(fe)||isNaN(_e)||isNaN(Pe)||isNaN(ke))throw Pa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(fe,_e),this.lineTo(fe+Pe,_e),this.lineTo(fe+Pe,_e+ke),this.lineTo(fe,_e+ke),this.lineTo(fe,_e),this.lineTo(fe+Pe,_e),this.lineTo(fe,_e)},v.prototype.fillRect=function(fe,_e,Pe,ke){if(isNaN(fe)||isNaN(_e)||isNaN(Pe)||isNaN(ke))throw Pa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var $e={};this.lineCap!=="butt"&&($e.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&($e.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(fe,_e,Pe,ke),this.fill(),$e.hasOwnProperty("lineCap")&&(this.lineCap=$e.lineCap),$e.hasOwnProperty("lineJoin")&&(this.lineJoin=$e.lineJoin)}},v.prototype.strokeRect=function(fe,_e,Pe,ke){if(isNaN(fe)||isNaN(_e)||isNaN(Pe)||isNaN(ke))throw Pa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(fe,_e,Pe,ke),this.stroke())},v.prototype.clearRect=function(fe,_e,Pe,ke){if(isNaN(fe)||isNaN(_e)||isNaN(Pe)||isNaN(ke))throw Pa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(fe,_e,Pe,ke))},v.prototype.save=function(fe){fe=typeof fe!="boolean"||fe;for(var _e=this.pdf.internal.getCurrentPageInfo().pageNumber,Pe=0;Pe<this.pdf.internal.getNumberOfPages();Pe++)this.pdf.setPage(Pe+1),this.pdf.internal.out("q");if(this.pdf.setPage(_e),fe){this.ctx.fontSize=this.pdf.internal.getFontSize();var ke=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ke}},v.prototype.restore=function(fe){fe=typeof fe!="boolean"||fe;for(var _e=this.pdf.internal.getCurrentPageInfo().pageNumber,Pe=0;Pe<this.pdf.internal.getNumberOfPages();Pe++)this.pdf.setPage(Pe+1),this.pdf.internal.out("Q");this.pdf.setPage(_e),fe&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(fe){var _e,Pe,ke,$e;if(fe.isCanvasGradient===!0&&(fe=fe.getColor()),!fe)return{r:0,g:0,b:0,a:0,style:fe};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(fe))_e=0,Pe=0,ke=0,$e=0;else{var ht=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(fe);if(ht!==null)_e=parseInt(ht[1]),Pe=parseInt(ht[2]),ke=parseInt(ht[3]),$e=1;else if((ht=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(fe))!==null)_e=parseInt(ht[1]),Pe=parseInt(ht[2]),ke=parseInt(ht[3]),$e=parseFloat(ht[4]);else{if($e=1,typeof fe=="string"&&fe.charAt(0)!=="#"){var Ot=new Nq(fe);fe=Ot.ok?Ot.toHex():"#000000"}fe.length===4?(_e=fe.substring(1,2),_e+=_e,Pe=fe.substring(2,3),Pe+=Pe,ke=fe.substring(3,4),ke+=ke):(_e=fe.substring(1,3),Pe=fe.substring(3,5),ke=fe.substring(5,7)),_e=parseInt(_e,16),Pe=parseInt(Pe,16),ke=parseInt(ke,16)}}return{r:_e,g:Pe,b:ke,a:$e,style:fe}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(fe,_e,Pe,ke){if(isNaN(_e)||isNaN(Pe)||typeof fe!="string")throw Pa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ke=isNaN(ke)?void 0:ke,!x.call(this)){var $e=pe(this.ctx.transform.rotation),ht=this.ctx.transform.scaleX;G.call(this,{text:fe,x:_e,y:Pe,scale:ht,angle:$e,align:this.textAlign,maxWidth:ke})}},v.prototype.strokeText=function(fe,_e,Pe,ke){if(isNaN(_e)||isNaN(Pe)||typeof fe!="string")throw Pa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){ke=isNaN(ke)?void 0:ke;var $e=pe(this.ctx.transform.rotation),ht=this.ctx.transform.scaleX;G.call(this,{text:fe,x:_e,y:Pe,scale:ht,renderingMode:"stroke",angle:$e,align:this.textAlign,maxWidth:ke})}},v.prototype.measureText=function(fe){if(typeof fe!="string")throw Pa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var _e=this.pdf,Pe=this.pdf.internal.scaleFactor,ke=_e.internal.getFontSize(),$e=_e.getStringUnitWidth(fe)*ke/_e.internal.scaleFactor;return new function(ht){var Ot=(ht=ht||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ot}}),this}({width:$e*=Math.round(96*Pe/72*1e4)/1e4})},v.prototype.scale=function(fe,_e){if(isNaN(fe)||isNaN(_e))throw Pa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Pe=new p(fe,0,0,_e,0,0);this.ctx.transform=this.ctx.transform.multiply(Pe)},v.prototype.rotate=function(fe){if(isNaN(fe))throw Pa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var _e=new p(Math.cos(fe),Math.sin(fe),-Math.sin(fe),Math.cos(fe),0,0);this.ctx.transform=this.ctx.transform.multiply(_e)},v.prototype.translate=function(fe,_e){if(isNaN(fe)||isNaN(_e))throw Pa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Pe=new p(1,0,0,1,fe,_e);this.ctx.transform=this.ctx.transform.multiply(Pe)},v.prototype.transform=function(fe,_e,Pe,ke,$e,ht){if(isNaN(fe)||isNaN(_e)||isNaN(Pe)||isNaN(ke)||isNaN($e)||isNaN(ht))throw Pa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ot=new p(fe,_e,Pe,ke,$e,ht);this.ctx.transform=this.ctx.transform.multiply(Ot)},v.prototype.setTransform=function(fe,_e,Pe,ke,$e,ht){fe=isNaN(fe)?1:fe,_e=isNaN(_e)?0:_e,Pe=isNaN(Pe)?0:Pe,ke=isNaN(ke)?1:ke,$e=isNaN($e)?0:$e,ht=isNaN(ht)?0:ht,this.ctx.transform=new p(fe,_e,Pe,ke,$e,ht)};var T=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(fe,_e,Pe,ke,$e,ht,Ot,mt,nt){var Nt=this.pdf.getImageProperties(fe),kt=1,It=1,gt=1,Le=1;ke!==void 0&&mt!==void 0&&(gt=mt/ke,Le=nt/$e,kt=Nt.width/ke*mt/ke,It=Nt.height/$e*nt/$e),ht===void 0&&(ht=_e,Ot=Pe,_e=0,Pe=0),ke!==void 0&&mt===void 0&&(mt=ke,nt=$e),ke===void 0&&mt===void 0&&(mt=Nt.width,nt=Nt.height);for(var pr,hr=this.ctx.transform.decompose(),vr=pe(hr.rotate.shx),Qt=new p,qe=(Qt=(Qt=(Qt=Qt.multiply(hr.translate)).multiply(hr.skew)).multiply(hr.scale)).applyToRectangle(new a(ht-_e*gt,Ot-Pe*Le,ke*kt,$e*It)),rt=R.call(this,qe),ct=[],Ft=0;Ft<rt.length;Ft+=1)ct.indexOf(rt[Ft])===-1&&ct.push(rt[Ft]);if(F(ct),this.autoPaging)for(var Yt=ct[0],Wt=ct[ct.length-1],ur=Yt;ur<Wt+1;ur++){this.pdf.setPage(ur);var br=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xr=ur===1?this.posY+this.margin[0]:this.margin[0],Rr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],fr=ur===1?0:Rr+(ur-2)*wr;if(this.ctx.clip_path.length!==0){var bt=this.path;pr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(pr,this.posX+this.margin[3],-fr+xr+this.ctx.prevPageLastElemOffset),U.call(this,"fill",!0),this.path=bt}var ve=JSON.parse(JSON.stringify(qe));ve=N([ve],this.posX+this.margin[3],-fr+xr+this.ctx.prevPageLastElemOffset)[0];var xe=(ur>Yt||ur<Wt)&&T.call(this);xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],br,wr,null).clip().discardPath()),this.pdf.addImage(fe,"JPEG",ve.x,ve.y,ve.w,ve.h,null,null,vr),xe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(fe,"JPEG",qe.x,qe.y,qe.w,qe.h,null,null,vr)};var R=function(fe,_e,Pe){var ke=[];_e=_e||this.pdf.internal.pageSize.width,Pe=Pe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var $e=this.posY+this.ctx.prevPageLastElemOffset;switch(fe.type){default:case"mt":case"lt":ke.push(Math.floor((fe.y+$e)/Pe)+1);break;case"arc":ke.push(Math.floor((fe.y+$e-fe.radius)/Pe)+1),ke.push(Math.floor((fe.y+$e+fe.radius)/Pe)+1);break;case"qct":var ht=Ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,fe.x1,fe.y1,fe.x,fe.y);ke.push(Math.floor((ht.y+$e)/Pe)+1),ke.push(Math.floor((ht.y+ht.h+$e)/Pe)+1);break;case"bct":var Ot=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,fe.x1,fe.y1,fe.x2,fe.y2,fe.x,fe.y);ke.push(Math.floor((Ot.y+$e)/Pe)+1),ke.push(Math.floor((Ot.y+Ot.h+$e)/Pe)+1);break;case"rect":ke.push(Math.floor((fe.y+$e)/Pe)+1),ke.push(Math.floor((fe.y+fe.h+$e)/Pe)+1)}for(var mt=0;mt<ke.length;mt+=1)for(;this.pdf.internal.getNumberOfPages()<ke[mt];)k.call(this);return ke},k=function(){var fe=this.fillStyle,_e=this.strokeStyle,Pe=this.font,ke=this.lineCap,$e=this.lineWidth,ht=this.lineJoin;this.pdf.addPage(),this.fillStyle=fe,this.strokeStyle=_e,this.font=Pe,this.lineCap=ke,this.lineWidth=$e,this.lineJoin=ht},N=function(fe,_e,Pe){for(var ke=0;ke<fe.length;ke++)switch(fe[ke].type){case"bct":fe[ke].x2+=_e,fe[ke].y2+=Pe;case"qct":fe[ke].x1+=_e,fe[ke].y1+=Pe;default:fe[ke].x+=_e,fe[ke].y+=Pe}return fe},F=function(fe){return fe.sort(function(_e,Pe){return _e-Pe})},D=function(fe,_e){for(var Pe,ke,$e=this.fillStyle,ht=this.strokeStyle,Ot=this.lineCap,mt=this.lineWidth,nt=Math.abs(mt*this.ctx.transform.scaleX),Nt=this.lineJoin,kt=JSON.parse(JSON.stringify(this.path)),It=JSON.parse(JSON.stringify(this.path)),gt=[],Le=0;Le<It.length;Le++)if(It[Le].x!==void 0)for(var pr=R.call(this,It[Le]),hr=0;hr<pr.length;hr+=1)gt.indexOf(pr[hr])===-1&&gt.push(pr[hr]);for(var vr=0;vr<gt.length;vr++)for(;this.pdf.internal.getNumberOfPages()<gt[vr];)k.call(this);if(F(gt),this.autoPaging)for(var Qt=gt[0],qe=gt[gt.length-1],rt=Qt;rt<qe+1;rt++){this.pdf.setPage(rt),this.fillStyle=$e,this.strokeStyle=ht,this.lineCap=Ot,this.lineWidth=nt,this.lineJoin=Nt;var ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=rt===1?this.posY+this.margin[0]:this.margin[0],Yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ur=rt===1?0:Yt+(rt-2)*Wt;if(this.ctx.clip_path.length!==0){var br=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Pe,this.posX+this.margin[3],-ur+Ft+this.ctx.prevPageLastElemOffset),U.call(this,fe,!0),this.path=br}if(ke=JSON.parse(JSON.stringify(kt)),this.path=N(ke,this.posX+this.margin[3],-ur+Ft+this.ctx.prevPageLastElemOffset),_e===!1||rt===0){var xr=(rt>Qt||rt<qe)&&T.call(this);xr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ct,Wt,null).clip().discardPath()),U.call(this,fe,_e),xr&&this.pdf.restoreGraphicsState()}this.lineWidth=mt}else this.lineWidth=nt,U.call(this,fe,_e),this.lineWidth=mt;this.path=kt},U=function(fe,_e){if((fe!=="stroke"||_e||!P.call(this))&&(fe==="stroke"||_e||!x.call(this))){for(var Pe,ke,$e=[],ht=this.path,Ot=0;Ot<ht.length;Ot++){var mt=ht[Ot];switch(mt.type){case"begin":$e.push({begin:!0});break;case"close":$e.push({close:!0});break;case"mt":$e.push({start:mt,deltas:[],abs:[]});break;case"lt":var nt=$e.length;if(ht[Ot-1]&&!isNaN(ht[Ot-1].x)&&(Pe=[mt.x-ht[Ot-1].x,mt.y-ht[Ot-1].y],nt>0)){for(;nt>=0;nt--)if($e[nt-1].close!==!0&&$e[nt-1].begin!==!0){$e[nt-1].deltas.push(Pe),$e[nt-1].abs.push(mt);break}}break;case"bct":Pe=[mt.x1-ht[Ot-1].x,mt.y1-ht[Ot-1].y,mt.x2-ht[Ot-1].x,mt.y2-ht[Ot-1].y,mt.x-ht[Ot-1].x,mt.y-ht[Ot-1].y],$e[$e.length-1].deltas.push(Pe);break;case"qct":var Nt=ht[Ot-1].x+2/3*(mt.x1-ht[Ot-1].x),kt=ht[Ot-1].y+2/3*(mt.y1-ht[Ot-1].y),It=mt.x+2/3*(mt.x1-mt.x),gt=mt.y+2/3*(mt.y1-mt.y),Le=mt.x,pr=mt.y;Pe=[Nt-ht[Ot-1].x,kt-ht[Ot-1].y,It-ht[Ot-1].x,gt-ht[Ot-1].y,Le-ht[Ot-1].x,pr-ht[Ot-1].y],$e[$e.length-1].deltas.push(Pe);break;case"arc":$e.push({deltas:[],abs:[],arc:!0}),Array.isArray($e[$e.length-1].abs)&&$e[$e.length-1].abs.push(mt)}}ke=_e?null:fe==="stroke"?"stroke":"fill";for(var hr=!1,vr=0;vr<$e.length;vr++)if($e[vr].arc)for(var Qt=$e[vr].abs,qe=0;qe<Qt.length;qe++){var rt=Qt[qe];rt.type==="arc"?J.call(this,rt.x,rt.y,rt.radius,rt.startAngle,rt.endAngle,rt.counterclockwise,void 0,_e,!hr):ae.call(this,rt.x,rt.y),hr=!0}else if($e[vr].close===!0)this.pdf.internal.out("h"),hr=!1;else if($e[vr].begin!==!0){var ct=$e[vr].start.x,Ft=$e[vr].start.y;se.call(this,$e[vr].deltas,ct,Ft),hr=!0}ke&&X.call(this,ke),_e&&le.call(this)}},B=function(fe){var _e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Pe=_e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return fe-Pe;case"top":return fe+_e-Pe;case"hanging":return fe+_e-2*Pe;case"middle":return fe+_e/2-Pe;default:return fe}},Z=function(fe){return fe+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var fe=function(){};return fe.colorStops=[],fe.addColorStop=function(_e,Pe){this.colorStops.push([_e,Pe])},fe.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},fe.isCanvasGradient=!0,fe},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var J=function(fe,_e,Pe,ke,$e,ht,Ot,mt,nt){for(var Nt=me.call(this,Pe,ke,$e,ht),kt=0;kt<Nt.length;kt++){var It=Nt[kt];kt===0&&(nt?H.call(this,It.x1+fe,It.y1+_e):ae.call(this,It.x1+fe,It.y1+_e)),ue.call(this,fe,_e,It.x2,It.y2,It.x3,It.y3,It.x4,It.y4)}mt?le.call(this):X.call(this,Ot)},X=function(fe){switch(fe){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},le=function(){this.pdf.clip(),this.pdf.discardPath()},H=function(fe,_e){this.pdf.internal.out(r(fe)+" "+n(_e)+" m")},G=function(fe){var _e;switch(fe.align){case"right":case"end":_e="right";break;case"center":_e="center";break;default:_e="left"}var Pe=this.pdf.getTextDimensions(fe.text),ke=B.call(this,fe.y),$e=Z.call(this,ke)-Pe.h,ht=this.ctx.transform.applyToPoint(new u(fe.x,ke)),Ot=this.ctx.transform.decompose(),mt=new p;mt=(mt=(mt=mt.multiply(Ot.translate)).multiply(Ot.skew)).multiply(Ot.scale);for(var nt,Nt,kt,It=this.ctx.transform.applyToRectangle(new a(fe.x,ke,Pe.w,Pe.h)),gt=mt.applyToRectangle(new a(fe.x,$e,Pe.w,Pe.h)),Le=R.call(this,gt),pr=[],hr=0;hr<Le.length;hr+=1)pr.indexOf(Le[hr])===-1&&pr.push(Le[hr]);if(F(pr),this.autoPaging)for(var vr=pr[0],Qt=pr[pr.length-1],qe=vr;qe<Qt+1;qe++){this.pdf.setPage(qe);var rt=qe===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[2],Yt=Ft-this.margin[0],Wt=this.pdf.internal.pageSize.width-this.margin[1],ur=Wt-this.margin[3],br=qe===1?0:ct+(qe-2)*Yt;if(this.ctx.clip_path.length!==0){var xr=this.path;nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(nt,this.posX+this.margin[3],-1*br+rt),U.call(this,"fill",!0),this.path=xr}var Rr=N([JSON.parse(JSON.stringify(gt))],this.posX+this.margin[3],-br+rt+this.ctx.prevPageLastElemOffset)[0];fe.scale>=.01&&(Nt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Nt*fe.scale),kt=this.lineWidth,this.lineWidth=kt*fe.scale);var wr=this.autoPaging!=="text";if(wr||Rr.y+Rr.h<=Ft){if(wr||Rr.y>=rt&&Rr.x<=Wt){var fr=wr?fe.text:this.pdf.splitTextToSize(fe.text,fe.maxWidth||Wt-Rr.x)[0],bt=N([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-br+rt+this.ctx.prevPageLastElemOffset)[0],ve=wr&&(qe>vr||qe<Qt)&&T.call(this);ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ur,Yt,null).clip().discardPath()),this.pdf.text(fr,bt.x,bt.y,{angle:fe.angle,align:_e,renderingMode:fe.renderingMode}),ve&&this.pdf.restoreGraphicsState()}}else Rr.y<Ft&&(this.ctx.prevPageLastElemOffset+=Ft-Rr.y);fe.scale>=.01&&(this.pdf.setFontSize(Nt),this.lineWidth=kt)}else fe.scale>=.01&&(Nt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Nt*fe.scale),kt=this.lineWidth,this.lineWidth=kt*fe.scale),this.pdf.text(fe.text,ht.x+this.posX,ht.y+this.posY,{angle:fe.angle,align:_e,renderingMode:fe.renderingMode,maxWidth:fe.maxWidth}),fe.scale>=.01&&(this.pdf.setFontSize(Nt),this.lineWidth=kt)},ae=function(fe,_e,Pe,ke){Pe=Pe||0,ke=ke||0,this.pdf.internal.out(r(fe+Pe)+" "+n(_e+ke)+" l")},se=function(fe,_e,Pe){return this.pdf.lines(fe,_e,Pe,null,null)},ue=function(fe,_e,Pe,ke,$e,ht,Ot,mt){this.pdf.internal.out([t(i(Pe+fe)),t(o(ke+_e)),t(i($e+fe)),t(o(ht+_e)),t(i(Ot+fe)),t(o(mt+_e)),"c"].join(" "))},me=function(fe,_e,Pe,ke){for(var $e=2*Math.PI,ht=Math.PI/2;_e>Pe;)_e-=$e;var Ot=Math.abs(Pe-_e);Ot<$e&&ke&&(Ot=$e-Ot);for(var mt=[],nt=ke?-1:1,Nt=_e;Ot>1e-5;){var kt=Nt+nt*Math.min(Ot,ht);mt.push(Ce.call(this,fe,Nt,kt)),Ot-=Math.abs(kt-Nt),Nt=kt}return mt},Ce=function(fe,_e,Pe){var ke=(Pe-_e)/2,$e=fe*Math.cos(ke),ht=fe*Math.sin(ke),Ot=$e,mt=-ht,nt=Ot*Ot+mt*mt,Nt=nt+Ot*$e+mt*ht,kt=4/3*(Math.sqrt(2*nt*Nt)-Nt)/(Ot*ht-mt*$e),It=Ot-kt*mt,gt=mt+kt*Ot,Le=It,pr=-gt,hr=ke+_e,vr=Math.cos(hr),Qt=Math.sin(hr);return{x1:fe*Math.cos(_e),y1:fe*Math.sin(_e),x2:It*vr-gt*Qt,y2:It*Qt+gt*vr,x3:Le*vr-pr*Qt,y3:Le*Qt+pr*vr,x4:fe*Math.cos(Pe),y4:fe*Math.sin(Pe)}},pe=function(fe){return 180*fe/Math.PI},Ee=function(fe,_e,Pe,ke,$e,ht){var Ot=fe+.5*(Pe-fe),mt=_e+.5*(ke-_e),nt=$e+.5*(Pe-$e),Nt=ht+.5*(ke-ht),kt=Math.min(fe,$e,Ot,nt),It=Math.max(fe,$e,Ot,nt),gt=Math.min(_e,ht,mt,Nt),Le=Math.max(_e,ht,mt,Nt);return new a(kt,gt,It-kt,Le-gt)},Fe=function(fe,_e,Pe,ke,$e,ht,Ot,mt){var nt,Nt,kt,It,gt,Le,pr,hr,vr,Qt,qe,rt,ct,Ft,Yt=Pe-fe,Wt=ke-_e,ur=$e-Pe,br=ht-ke,xr=Ot-$e,Rr=mt-ht;for(Nt=0;Nt<41;Nt++)vr=(pr=(kt=fe+(nt=Nt/40)*Yt)+nt*((gt=Pe+nt*ur)-kt))+nt*(gt+nt*($e+nt*xr-gt)-pr),Qt=(hr=(It=_e+nt*Wt)+nt*((Le=ke+nt*br)-It))+nt*(Le+nt*(ht+nt*Rr-Le)-hr),Nt==0?(qe=vr,rt=Qt,ct=vr,Ft=Qt):(qe=Math.min(qe,vr),rt=Math.min(rt,Qt),ct=Math.max(ct,vr),Ft=Math.max(Ft,Qt));return new a(Math.round(qe),Math.round(rt),Math.round(ct-qe),Math.round(Ft-rt))},Ke=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var fe,_e,Pe=(fe=this.ctx.lineDash,_e=this.ctx.lineDashOffset,JSON.stringify({lineDash:fe,lineDashOffset:_e}));this.prevLineDash!==Pe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Pe)}}})(Ln.API),(function(e){var t=function(u){var a,p,h,m,v,w,x,P,T,R;for(p=[],h=0,m=(u+=a="\0\0\0\0".slice(u.length%4||4)).length;m>h;h+=4)(v=(u.charCodeAt(h)<<24)+(u.charCodeAt(h+1)<<16)+(u.charCodeAt(h+2)<<8)+u.charCodeAt(h+3))!==0?(w=(v=((v=((v=((v=(v-(R=v%85))/85)-(T=v%85))/85)-(P=v%85))/85)-(x=v%85))/85)%85,p.push(w+33,x+33,P+33,T+33,R+33)):p.push(122);return(function(k,N){for(var F=N;F>0;F--)k.pop()})(p,a.length),String.fromCharCode.apply(String,p)+"~>"},r=function(u){var a,p,h,m,v,w=String,x="length",P=255,T="charCodeAt",R="slice",k="replace";for(u[R](-2),u=u[R](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),h=[],m=0,v=(u+=a="uuuuu"[R](u[x]%5||5))[x];v>m;m+=5)p=52200625*(u[T](m)-33)+614125*(u[T](m+1)-33)+7225*(u[T](m+2)-33)+85*(u[T](m+3)-33)+(u[T](m+4)-33),h.push(P&p>>24,P&p>>16,P&p>>8,P&p);return(function(N,F){for(var D=F;D>0;D--)N.pop()})(h,a[x]),w.fromCharCode.apply(w,h)},n=function(u){return u.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(u){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),a.test(u)===!1)return"";for(var p="",h=0;h<u.length;h+=2)p+=String.fromCharCode("0x"+(u[h]+u[h+1]));return p},o=function(u){for(var a=new Uint8Array(u.length),p=u.length;p--;)a[p]=u.charCodeAt(p);return(a=XP(a)).reduce(function(h,m){return h+String.fromCharCode(m)},"")};e.processDataByFilters=function(u,a){var p=0,h=u||"",m=[];for(typeof(a=a||[])=="string"&&(a=[a]),p=0;p<a.length;p+=1)switch(a[p]){case"ASCII85Decode":case"/ASCII85Decode":h=r(h),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=i(h),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=n(h),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=o(h),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[p]+'" is not implemented')}return{data:h,reverseChain:m.reverse().join(" ")}}})(Ln.API),(function(e){e.loadFile=function(t,r,n){return(function(i,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var a=void 0;try{a=(function(p,h,m){var v=new XMLHttpRequest,w=0,x=function(P){var T=P.length,R=[],k=String.fromCharCode;for(w=0;w<T;w+=1)R.push(k(255&P.charCodeAt(w)));return R.join("")};if(v.open("GET",p,!h),v.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(v.onload=function(){v.status===200?m(x(this.responseText)):m(void 0)}),v.send(null),h&&v.status===200)return x(v.responseText)})(i,o,u)}catch{}return a})(t,r,n)},e.loadImageFile=e.loadFile})(Ln.API),(function(e){function t(){return(ei.html2canvas?Promise.resolve(ei.html2canvas):ww(()=>import("./html2canvas.esm-B0tyYwQk.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(ei.DOMPurify?Promise.resolve(ei.DOMPurify):ww(()=>import("./purify.es-CQJ0hv7W.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var p=ha(a);return p==="undefined"?"undefined":p==="string"||a instanceof String?"string":p==="number"||a instanceof Number?"number":p==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":p==="object"?"object":"unknown"},i=function(a,p){var h=document.createElement(a);for(var m in p.className&&(h.className=p.className),p.innerHTML&&p.dompurify&&(h.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)h.style[m]=p.style[m];return h},o=function a(p,h){for(var m=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),v=p.firstChild;v;v=v.nextSibling)h!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||m.appendChild(a(v,h));return p.nodeType===1&&(p.nodeName==="CANVAS"?(m.width=p.width,m.height=p.height,m.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(m.value=p.value),m.addEventListener("load",function(){m.scrollTop=p.scrollTop,m.scrollLeft=p.scrollLeft},!0)),m},u=function a(p){var h=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),m=a.convert(Promise.resolve(),h);return(m=m.setProgress(1,a,1,[a])).set(p)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(a,p){return a.__proto__=p||u.prototype,a},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(a,p){return this.then(function(){switch(p=p||(function(h){switch(n(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),p){case"string":return this.then(r).then(function(h){return this.set({src:i("div",{innerHTML:a,dompurify:h})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},u.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(p){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,p(this.prop.container,h)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(p){var h=this.opt.jsPDF,m=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=m,m)for(var x=0;x<m.length;++x){var P=m[x],T=P.src.find(function(R){return R.format==="truetype"});T&&h.addFont(T.url,P.ref.name,P.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,h.context2d.save(!0),p(this.prop.container,w)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(a,p,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(a,p):this.outputPdf(a,p)},u.prototype.outputPdf=function(a,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,p)})},u.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},u.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(a){if(n(a)!=="object")return this;var p=Object.keys(a||{}).map(function(h){if(h in u.template.prop)return function(){this.prop[h]=a[h]};switch(h){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[h]=a[h]}}},this);return this.then(function(){return this.thenList(p)})},u.prototype.get=function(a,p){return this.then(function(){var h=a in u.template.prop?this.prop[a]:this.opt[a];return p?p(h):h})},u.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},u.prototype.setPageSize=function(a){function p(h,m){return Math.floor(h*m/72*96)}return this.then(function(){(a=a||Ln.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:p(a.inner.width,a.k),height:p(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},u.prototype.setProgress=function(a,p,h,m){return a!=null&&(this.progress.val=a),p!=null&&(this.progress.state=p),h!=null&&(this.progress.n=h),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(a,p,h,m){return this.setProgress(a?this.progress.val+a:null,p||null,h?this.progress.n+h:null,m?this.progress.stack.concat(m):null)},u.prototype.then=function(a,p){var h=this;return this.thenCore(a,p,function(m,v){return h.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(w){return h.updateProgress(null,m),w}).then(m,v).then(function(w){return h.updateProgress(1),w})})},u.prototype.thenCore=function(a,p,h){h=h||Promise.prototype.then;var m=this;a&&(a=a.bind(m)),p&&(p=p.bind(m));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:u.convert(Object.assign({},m),Promise.prototype),w=h.call(v,a,p);return u.convert(w,m.__proto__)},u.prototype.thenExternal=function(a,p){return Promise.prototype.then.call(this,a,p)},u.prototype.thenList=function(a){var p=this;return a.forEach(function(h){p=p.thenCore(h)}),p},u.prototype.catch=function(a){a&&(a=a.bind(this));var p=Promise.prototype.catch.call(this,a);return u.convert(p,this)},u.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},u.prototype.error=function(a){return this.then(function(){throw new Error(a)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Ln.getPageSize=function(a,p,h){if(ha(a)==="object"){var m=a;a=m.orientation,p=m.unit||p,h=m.format||h}p=p||"mm",h=h||"a4",a=(""+(a||"P")).toLowerCase();var v,w=(""+h).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+p}var P,T=0,R=0;if(x.hasOwnProperty(w))T=x[w][1]/v,R=x[w][0]/v;else try{T=h[1],R=h[0]}catch{throw new Error("Invalid format: "+h)}if(a==="p"||a==="portrait")a="p",R>T&&(P=R,R=T,T=P);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",T>R&&(P=R,R=T,T=P)}return{width:R,height:T,unit:p,k:v,orientation:a}},e.html=function(a,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(o5):null;var h=new u(p);return p.worker?h:h.from(a).doCallback()}})(Ln.API),Ln.API.addJS=function(e){return cD=e,this.internal.events.subscribe("postPutResources",function(){zb=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zb+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),uD=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+cD+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zb!==void 0&&uD!==void 0&&this.internal.out("/Names <</JavaScript "+zb+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),o=0;o<i.length;o++){var u=i[o],a=n.exec(u);if(a!=null){var p=a[1];r.internal.newObjectDeferredBegin(p,!1)}r.internal.write(u)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,m=[];for(o=0;o<h;o++){var v=r.internal.newObject();m.push(v);var w=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<m.length;o++)r.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,o){var u={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(u),u},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var u=n.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var a=this.count=this.count_r({count:0},u);if(a>0&&this.line("/Count "+a),u.options&&u.options.pageNumber){var p=r.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<n.children.length;h++)this.renderItems(n.children[h])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])})(Ln.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,o,u,a){var p,h=this.decode.DCT_DECODE,m=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=u||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,p=(function(v){for(var w,x=256*v.charCodeAt(4)+v.charCodeAt(5),P=v.length,T={width:0,height:0,numcomponents:1},R=4;R<P;R+=2){if(R+=x,t.indexOf(v.charCodeAt(R+1))!==-1){w=256*v.charCodeAt(R+5)+v.charCodeAt(R+6),T={width:256*v.charCodeAt(R+7)+v.charCodeAt(R+8),height:w,numcomponents:v.charCodeAt(R+9)};break}x=256*v.charCodeAt(R+2)+v.charCodeAt(R+3)}return T})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),p.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}m={data:r,width:p.width,height:p.height,colorSpace:a,bitsPerComponent:8,filter:h,index:n,alias:i}}return m}})(Ln.API),Ln.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,o=tue(e,{checkCrc:!0}),u=o.width,a=o.height,p=o.channels,h=o.palette,m=o.depth;i=h&&p===1?(function(Z){for(var J=Z.width,X=Z.height,le=Z.data,H=Z.palette,G=Z.depth,ae=!1,se=[],ue=[],me=void 0,Ce=!1,pe=0,Ee=0;Ee<H.length;Ee++){var Fe=p4(H[Ee],4),Ke=Fe[0],fe=Fe[1],_e=Fe[2],Pe=Fe[3];se.push(Ke,fe,_e),Pe!=null&&(Pe===0?(pe++,ue.length<1&&ue.push(Ee)):Pe<255&&(Ce=!0))}if(Ce||pe>1){ae=!0,ue=void 0;var ke=J*X;me=new Uint8Array(ke);for(var $e=new DataView(le.buffer),ht=0;ht<ke;ht++){var Ot=l5($e,ht,G),mt=p4(H[Ot],4)[3];me[ht]=mt}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:le,alphaBytes:me,needSMask:ae,palette:se,mask:ue}})(o):p===2||p===4?(function(Z){for(var J=Z.data,X=Z.width,le=Z.height,H=Z.channels,G=Z.depth,ae=H===2?"DeviceGray":"DeviceRGB",se=H-1,ue=X*le,me=se,Ce=ue*me,pe=1*ue,Ee=Math.ceil(Ce*G/8),Fe=Math.ceil(pe*G/8),Ke=new Uint8Array(Ee),fe=new Uint8Array(Fe),_e=new DataView(J.buffer),Pe=new DataView(Ke.buffer),ke=new DataView(fe.buffer),$e=!1,ht=0;ht<ue;ht++){for(var Ot=ht*H,mt=0;mt<me;mt++)bD(Pe,l5(_e,Ot+mt,G),ht*me+mt,G);var nt=l5(_e,Ot+me,G);nt<(1<<G)-1&&($e=!0),bD(ke,nt,1*ht,G)}return{colorSpace:ae,colorsPerPixel:se,colorBytes:Ke,alphaBytes:fe,needSMask:$e}})(o):(function(Z){var J=Z.data,X=Z.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:X,colorsPerPixel:X==="DeviceGray"?1:3,colorBytes:J instanceof Uint8Array?J:new Uint8Array(J.buffer),needSMask:!1}})(o);var v,w,x,P=i,T=P.colorSpace,R=P.colorsPerPixel,k=P.colorBytes,N=P.alphaBytes,F=P.needSMask,D=P.palette,U=P.mask,B=null;return n!==Ln.API.image_compression.NONE&&typeof XP=="function"?(B=(function(Z){var J;switch(Z){case Ln.API.image_compression.FAST:J=11;break;case Ln.API.image_compression.MEDIUM:J=13;break;case Ln.API.image_compression.SLOW:J=14;break;default:J=12}return J})(n),v=this.decode.FLATE_DECODE,w="/Predictor ".concat(B," "),e=pD(k,u*R,R,n),F&&(x=pD(N,u,1,n))):(v=void 0,w="",e=k,F&&(x=N)),w+="/Colors ".concat(R," /BitsPerComponent ").concat(m," /Columns ").concat(u),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:r,data:e,index:t,filter:v,decodeParameters:w,transparency:U,palette:D,sMask:x,predictor:B,width:u,height:a,bitsPerComponent:m,colorSpace:T}}},(function(e){e.processGIF89A=function(t,r,n,i){var o=new wue(t),u=o.width,a=o.height,p=[];o.decodeAndBlitFrameRGBA(0,p);var h={data:p,width:u,height:a},m=new u5(100).encode(h,100);return e.processJPEG.call(this,m,r,n,i)},e.processGIF87A=e.processGIF89A})(Ln.API),_c.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_c.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Pa.log("bit decode error:"+r)}},_c.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var p=this.palette[o>>7-a&1];this.data[u+4*a]=p.blue,this.data[u+4*a+1]=p.green,this.data[u+4*a+2]=p.red,this.data[u+4*a+3]=255}r!==0&&(this.pos+=4-r)}},_c.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+2*i*4,a=o>>4,p=15&o,h=this.palette[a];if(this.data[u]=h.blue,this.data[u+1]=h.green,this.data[u+2]=h.red,this.data[u+3]=255,2*i+1>=this.width)break;h=this.palette[p],this.data[u+4]=h.blue,this.data[u+4+1]=h.green,this.data[u+4+2]=h.red,this.data[u+4+3]=255}t!==0&&(this.pos+=4-t)}},_c.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(i<this.palette.length){var u=this.palette[i];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},_c.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&t)/t*255|0,a=(o>>5&t)/t*255|0,p=(o>>10&t)/t*255|0,h=o>>15?255:0,m=n*this.width*4+4*i;this.data[m]=p,this.data[m+1]=a,this.data[m+2]=u,this.data[m+3]=h}this.pos+=e}},_c.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(u&t)/t*255|0,p=(u>>5&r)/r*255|0,h=(u>>11)/t*255|0,m=i*this.width*4+4*o;this.data[m]=h,this.data[m+1]=p,this.data[m+2]=a,this.data[m+3]=255}this.pos+=e}},_c.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*r;this.data[u]=o,this.data[u+1]=i,this.data[u+2]=n,this.data[u+3]=255}this.pos+=this.width%4}},_c.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=u}},_c.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,i){var o=new _c(t,!1),u=o.width,a=o.height,p={data:o.getData(),width:u,height:a},h=new u5(100).encode(p,100);return e.processJPEG.call(this,h,r,n,i)}})(Ln.API),xD.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,i){var o=new xD(t),u=o.width,a=o.height,p={data:o.getData(),width:u,height:a},h=new u5(100).encode(p,100);return e.processJPEG.call(this,h,r,n,i)}})(Ln.API),Ln.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,o=new Uint8Array(i/4*3),u=new Uint8Array(i/4),a=0,p=0,h=0;h<i;h+=4){var m=n[h],v=n[h+1],w=n[h+2],x=n[h+3];o[a++]=m,o[a++]=v,o[a++]=w,u[p++]=x}var P=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:P,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ln.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fm=Ln.API,$b=fm.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),u=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:i.metadata.Unicode.widths,p=a.fof?a.fof:1,h=t.kerning?t.kerning:i.metadata.Unicode.kerning,m=h.fof?h.fof:1,v=t.doKerning!==!1,w=0,x=e.length,P=0,T=a[0]||p,R=[];for(r=0;r<x;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?R.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+u*(1e3/o)||0)/1e3):(w=v&&ha(h[n])==="object"&&!isNaN(parseInt(h[n][P],10))?h[n][P]/m:0,R.push((a[n]||T)/p+w)),P=n;return R},fD=fm.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return fm.processArabic&&(e=fm.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:$b.apply(this,arguments).reduce(function(o,u){return o+u},0)},hD=function(e,t,r,n){for(var i=[],o=0,u=e.length,a=0;o!==u&&a+t[o]<r;)a+=t[o],o++;i.push(e.slice(0,o));var p=o;for(a=0;o!==u;)a+t[o]>n&&(i.push(e.slice(p,o)),a=0,p=o),a+=t[o],o++;return p!==o&&i.push(e.slice(p,o)),i},dD=function(e,t,r){r||(r={});var n,i,o,u,a,p,h,m=[],v=[m],w=r.textIndent||0,x=0,P=0,T=e.split(" "),R=$b.apply(this,[" ",r])[0];if(p=r.lineIndent===-1?T[0].length+2:r.lineIndent||0){var k=Array(p).join(" "),N=[];T.map(function(D){(D=D.split(/\s*\n/)).length>1?N=N.concat(D.map(function(U,B){return(B&&U.length?`
`:"")+U})):N.push(D[0])}),T=N,p=fD.apply(this,[k,r])}for(o=0,u=T.length;o<u;o++){var F=0;if(n=T[o],p&&n[0]==`
`&&(n=n.substr(1),F=1),w+x+(P=(i=$b.apply(this,[n,r])).reduce(function(D,U){return D+U},0))>t||F){if(P>t){for(a=hD.apply(this,[n,i,t-(w+x),t]),m.push(a.shift()),m=[a.pop()];a.length;)v.push([a.shift()]);P=i.slice(n.length-(m[0]?m[0].length:0)).reduce(function(D,U){return D+U},0)}else m=[n];v.push(m),w=P+p,x=R}else m.push(n),w+=x+P,x=R}return h=p?function(D,U){return(U?k:"")+D.join(" ")}:function(D){return D.join(" ")},v.map(h)},fm.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var v=this.internal.getFont(m.fontName,m.fontStyle),w="Unicode";return v.metadata[w]?{widths:v.metadata[w].widths||{0:1},kerning:v.metadata[w].kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var u=1*this.internal.scaleFactor*t/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var a,p,h=[];for(a=0,p=n.length;a<p;a++)h=h.concat(dD.apply(this,[n[a],u,o]));return h},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},o=0;o<16;o++)n[r[o]]=t[o],i[t[o]]=r[o];var u=function(w){return"0x"+parseInt(w,10).toString(16)},a=e.__fontmetrics__.compress=function(w){var x,P,T,R,k=["{"];for(var N in w){if(x=w[N],isNaN(parseInt(N,10))?P="'"+N+"'":(N=parseInt(N,10),P=(P=u(N).slice(2)).slice(0,-1)+i[P.slice(-1)]),typeof x=="number")x<0?(T=u(x).slice(3),R="-"):(T=u(x).slice(2),R=""),T=R+T.slice(0,-1)+i[T.slice(-1)];else{if(ha(x)!=="object")throw new Error("Don't know what to do with value type "+ha(x)+".");T=a(x)}k.push(P+T)}return k.push("}"),k.join("")},p=e.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,P,T,R,k={},N=1,F=k,D=[],U="",B="",Z=w.length-1,J=1;J<Z;J+=1)(R=w[J])=="'"?x?(T=x.join(""),x=void 0):x=[]:x?x.push(R):R=="{"?(D.push([F,T]),F={},T=void 0):R=="}"?((P=D.pop())[0][P[1]]=F,T=void 0,F=P[0]):R=="-"?N=-1:T===void 0?n.hasOwnProperty(R)?(U+=n[R],T=parseInt(U,16)*N,N=1,U=""):U+=R:n.hasOwnProperty(R)?(B+=n[R],F[T]=parseInt(B,16)*N,N=1,T=void 0,B=""):B+=R;return k},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},v={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(w){var x=w.font,P=v.Unicode[x.postScriptName];P&&(x.metadata.Unicode={},x.metadata.Unicode.widths=P.widths,x.metadata.Unicode.kerning=P.kerning);var T=m.Unicode[x.postScriptName];T&&(x.metadata.Unicode.encoding=T,x.encoding=T.codePages[0])}])})(Ln.API),(function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,o=r.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(u,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(S_(a)),u.metadata=e.API.TTFFont.open(a),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(i,n)}}])})(Ln),Ln.API.addSvgAsImage=function(e,t,r,n,i,o,u,a){if(isNaN(t)||isNaN(r))throw Pa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Pa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=n,p.height=i;var h=p.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,p.width,p.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return(ei.canvg?Promise.resolve(ei.canvg):ww(()=>import("./index.es-BhM1n_4y.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)).catch(function(w){return Promise.reject(new Error("Could not load canvg: "+w))}).then(function(w){return w.default?w.default:w}).then(function(w){return w.fromString(h,e,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(m)}).then(function(){v.addImage(p.toDataURL("image/jpeg",1),t,r,n,i,u,a)})},Ln.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},Ln.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(u),p=[],h=0,m=0,v=0;function w(P,T){var R,k=!1;for(R=0;R<P.length;R+=1)P[R]===T&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=a.length;for(v=0;v<x;v+=1)r[a[v]].value=r[a[v]].defaultValue,r[a[v]].explicitSet=!1}if(ha(e)==="object"){for(i in e)if(o=e[i],w(a,i)&&o!==void 0){if(r[i].type==="boolean"&&typeof o=="boolean")r[i].value=o;else if(r[i].type==="name"&&w(r[i].valueSet,o))r[i].value=o;else if(r[i].type==="integer"&&Number.isInteger(o))r[i].value=o;else if(r[i].type==="array"){for(h=0;h<o.length;h+=1)if(n=!0,o[h].length===1&&typeof o[h][0]=="number")p.push(String(o[h]-1));else if(o[h].length>1){for(m=0;m<o[h].length;m+=1)typeof o[h][m]!="number"&&(n=!1);n===!0&&p.push([o[h][0]-1,o[h][1]-1].join(" "))}r[i].value="["+p.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,T=[];for(P in r)r[P].explicitSet===!0&&(r[P].type==="name"?T.push("/"+P+" /"+r[P].value):T.push("/"+P+" "+r[P].value));T.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+T.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),h=o.length+u.length+a.length+i.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(i+o+u+a+p),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(Ln.API),(function(e){var t=e.API,r=t.pdfEscape16=function(o,u){for(var a,p=u.metadata.Unicode.widths,h=["","0","00","000","0000"],m=[""],v=0,w=o.length;v<w;++v){if(a=u.metadata.characterToGlyph(o.charCodeAt(v)),u.metadata.glyIdsUsed.push(a),u.metadata.toUnicode[a]=o.charCodeAt(v),p.indexOf(a)==-1&&(p.push(a),p.push([parseInt(u.metadata.widthOfGlyph(a),10)])),a=="0")return m.join("");a=a.toString(16),m.push(h[4-a.length],a)}return m.join("")},n=function(o){var u,a,p,h,m,v,w;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],v=0,w=(a=Object.keys(o).sort(function(x,P){return x-P})).length;v<w;v++)u=a[v],p.length>=100&&(m+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(h=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),p.push("<"+u+"><"+h+">"));return p.length&&(m+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(u){var a=u.font,p=u.out,h=u.newObject,m=u.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var v=a.metadata.Unicode.widths,w=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),x="",P=0;P<w.length;P++)x+=String.fromCharCode(w[P]);var T=h();m({data:x,addLength1:!0,objectId:T}),p("endobj");var R=h();m({data:n(a.metadata.toUnicode),addLength1:!0,objectId:R}),p("endobj");var k=h();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+wm(a.fontName)),p("/FontFile2 "+T+" 0 R"),p("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),p("/Flags "+a.metadata.flags),p("/StemV "+a.metadata.stemV),p("/ItalicAngle "+a.metadata.italicAngle),p("/Ascent "+a.metadata.ascender),p("/Descent "+a.metadata.decender),p("/CapHeight "+a.metadata.capHeight),p(">>"),p("endobj");var N=h();p("<<"),p("/Type /Font"),p("/BaseFont /"+wm(a.fontName)),p("/FontDescriptor "+k+" 0 R"),p("/W "+e.API.PDFObject.convert(v)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+a.encoding+")"),p(">>"),p(">>"),p("endobj"),a.objectNumber=h(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+R+" 0 R"),p("/BaseFont /"+wm(a.fontName)),p("/Encoding /"+a.encoding),p("/DescendantFonts ["+N+" 0 R]"),p(">>"),p("endobj"),a.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(u){var a=u.font,p=u.out,h=u.newObject,m=u.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var v=a.metadata.rawData,w="",x=0;x<v.length;x++)w+=String.fromCharCode(v[x]);var P=h();m({data:w,addLength1:!0,objectId:P}),p("endobj");var T=h();m({data:n(a.metadata.toUnicode),addLength1:!0,objectId:T}),p("endobj");var R=h();p("<<"),p("/Descent "+a.metadata.decender),p("/CapHeight "+a.metadata.capHeight),p("/StemV "+a.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+P+" 0 R"),p("/Flags 96"),p("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),p("/FontName /"+wm(a.fontName)),p("/ItalicAngle "+a.metadata.italicAngle),p("/Ascent "+a.metadata.ascender),p(">>"),p("endobj"),a.objectNumber=h();for(var k=0;k<a.metadata.hmtx.widths.length;k++)a.metadata.hmtx.widths[k]=parseInt(a.metadata.hmtx.widths[k]*(1e3/a.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+T+" 0 R/BaseFont/"+wm(a.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),p("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var u,a=o.text||"",p=o.x,h=o.y,m=o.options||{},v=o.mutex||{},w=v.pdfEscape,x=v.activeFontKey,P=v.fonts,T=x,R="",k=0,N="",F=P[T].encoding;if(P[T].encoding!=="Identity-H")return{text:a,x:p,y:h,options:m,mutex:v};for(N=a,T=x,Array.isArray(a)&&(N=a[0]),k=0;k<N.length;k+=1)P[T].metadata.hasOwnProperty("cmap")&&(u=P[T].metadata.cmap.unicode.codeMap[N[k].charCodeAt(0)]),u||N[k].charCodeAt(0)<256&&P[T].metadata.hasOwnProperty("Unicode")?R+=N[k]:R+="";var D="";return parseInt(T.slice(1))<14||F==="WinAnsiEncoding"?D=w(R,T).split("").map(function(U){return U.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(D=r(R,P[T])),v.isHex=!0,{text:D,x:p,y:h,options:m,mutex:v}};t.events.push(["postProcessText",function(o){var u=o.text||"",a=[],p={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var h=0;for(h=0;h<u.length;h+=1)Array.isArray(u[h])&&u[h].length===3?a.push([i(Object.assign({},p,{text:u[h][0]})).text,u[h][1],u[h][2]]):a.push(i(Object.assign({},p,{text:u[h]})).text);o.text=a}else o.text=i(Object.assign({},p,{text:u})).text}])})(Ln),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Ln.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,o,u,a,p,h,m,v=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},T={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,F=0;this.__bidiEngine__={};var D=function(H){var G=H.charCodeAt(),ae=G>>8,se=T[ae];return se!==void 0?v[256*se+(255&G)]:ae===252||ae===253?"AL":k.test(ae)?"L":ae===8?"R":"N"},U=function(H){for(var G,ae=0;ae<H.length;ae++){if((G=D(H.charAt(ae)))==="L")return!1;if(G==="R")return!0}return!1},B=function(H,G,ae,se){var ue,me,Ce,pe,Ee=G[se];switch(Ee){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"N":case"AN":break;case"EN":N&&(Ee="AN");break;case"AL":N=!0,Ee="R";break;case"WS":case"BN":Ee="N";break;case"CS":se<1||se+1>=G.length||(ue=ae[se-1])!=="EN"&&ue!=="AN"||(me=G[se+1])!=="EN"&&me!=="AN"?Ee="N":N&&(me="AN"),Ee=me===ue?me:"N";break;case"ES":Ee=(ue=se>0?ae[se-1]:"B")==="EN"&&se+1<G.length&&G[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&ae[se-1]==="EN"){Ee="EN";break}if(N){Ee="N";break}for(Ce=se+1,pe=G.length;Ce<pe&&G[Ce]==="ET";)Ce++;Ee=Ce<pe&&G[Ce]==="EN"?"EN":"N";break;case"NSM":if(u&&!a){for(pe=G.length,Ce=se+1;Ce<pe&&G[Ce]==="NSM";)Ce++;if(Ce<pe){var Fe=H[se],Ke=Fe>=1425&&Fe<=2303||Fe===64286;if(ue=G[Ce],Ke&&(ue==="R"||ue==="AL")){Ee="R";break}}}Ee=se<1||(ue=G[se-1])==="B"?"N":ae[se-1];break;case"B":N=!1,i=!0,Ee=F;break;case"S":o=!0,Ee="N"}return Ee},Z=function(H,G,ae){var se=H.split("");return ae&&J(se,ae,{hiLevel:F}),se.reverse(),G&&G.reverse(),se.join("")},J=function(H,G,ae){var se,ue,me,Ce,pe,Ee=-1,Fe=H.length,Ke=0,fe=[],_e=F?x:w,Pe=[];for(N=!1,i=!1,o=!1,ue=0;ue<Fe;ue++)Pe[ue]=D(H[ue]);for(me=0;me<Fe;me++){if(pe=Ke,fe[me]=B(H,Pe,fe,me),se=240&(Ke=_e[pe][P[fe[me]]]),Ke&=15,G[me]=Ce=_e[Ke][5],se>0)if(se===16){for(ue=Ee;ue<me;ue++)G[ue]=1;Ee=-1}else Ee=-1;if(_e[Ke][6])Ee===-1&&(Ee=me);else if(Ee>-1){for(ue=Ee;ue<me;ue++)G[ue]=Ce;Ee=-1}Pe[me]==="B"&&(G[me]=0),ae.hiLevel|=Ce}o&&(function(ke,$e,ht){for(var Ot=0;Ot<ht;Ot++)if(ke[Ot]==="S"){$e[Ot]=F;for(var mt=Ot-1;mt>=0&&ke[mt]==="WS";mt--)$e[mt]=F}})(Pe,G,Fe)},X=function(H,G,ae,se,ue){if(!(ue.hiLevel<H)){if(H===1&&F===1&&!i)return G.reverse(),void(ae&&ae.reverse());for(var me,Ce,pe,Ee,Fe=G.length,Ke=0;Ke<Fe;){if(se[Ke]>=H){for(pe=Ke+1;pe<Fe&&se[pe]>=H;)pe++;for(Ee=Ke,Ce=pe-1;Ee<Ce;Ee++,Ce--)me=G[Ee],G[Ee]=G[Ce],G[Ce]=me,ae&&(me=ae[Ee],ae[Ee]=ae[Ce],ae[Ce]=me);Ke=pe}Ke++}}},le=function(H,G,ae){var se=H.split(""),ue={hiLevel:F};return ae||(ae=[]),J(se,ae,ue),(function(me,Ce,pe){if(pe.hiLevel!==0&&m)for(var Ee,Fe=0;Fe<me.length;Fe++)Ce[Fe]===1&&(Ee=R.indexOf(me[Fe]))>=0&&(me[Fe]=R[Ee+1])})(se,ae,ue),X(2,se,G,ae,ue),X(1,se,G,ae,ue),se.join("")};return this.__bidiEngine__.doBidiReorder=function(H,G,ae){if((function(ue,me){if(me)for(var Ce=0;Ce<ue.length;Ce++)me[Ce]=Ce;a===void 0&&(a=U(ue)),h===void 0&&(h=U(ue))})(H,G),u||!p||h)if(u&&p&&a^h)F=a?1:0,H=Z(H,G,ae);else if(!u&&p&&h)F=a?1:0,H=le(H,G,ae),H=Z(H,G);else if(!u||a||p||h){if(u&&!p&&a^h)H=Z(H,G),a?(F=0,H=le(H,G,ae)):(F=1,H=le(H,G,ae),H=Z(H,G));else if(u&&a&&!p&&h)F=1,H=le(H,G,ae),H=Z(H,G);else if(!u&&!p&&a^h){var se=m;a?(F=1,H=le(H,G,ae),F=0,m=!1,H=le(H,G,ae),m=se):(F=0,H=le(H,G,ae),H=Z(H,G),F=1,m=!1,H=le(H,G,ae),m=se,H=Z(H,G))}}else F=0,H=le(H,G,ae);else F=a?1:0,H=le(H,G,ae);return H},this.__bidiEngine__.setOptions=function(H){H&&(u=H.isInputVisual,p=H.isOutputVisual,a=H.isInputRtl,h=H.isOutputRtl,m=H.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(u=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?u.push([r.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):u.push([r.doBidiReorder(i[a])]);n.text=u}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])})(Ln),Ln.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Qh(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Fue(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Sue(this.contents),this.head=new Cue(this),this.name=new Mue(this),this.cmap=new Wq(this),this.toUnicode={},this.hhea=new Aue(this),this.maxp=new Rue(this),this.hmtx=new Oue(this),this.post=new Tue(this),this.os2=new Pue(this),this.loca=new Nue(this),this.glyf=new kue(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,a,p,h;for(h=[],u=0,a=(p=this.bbox).length;u<a;u++)t=p[u],h.push(Math.round(t*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,o,u,a;for(u=0,o=0,a=(t=""+t).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=t.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return u*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var Nc,Qh=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,o,u,a,p;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),u=this.readByte(),a=this.readByte(),p=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^u)+256*(255^a)+(255^p)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*o+65536*u+256*a+p},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,o;for(o=[],n=0,i=t.length;n<i;n++)r=t[n],o.push(this.writeByte(r));return o},e})(),Sue=(function(){var e;function t(r){var n,i,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,o,u,a,p,h,m,v,w,x,P,T;for(T in x=Object.keys(r).length,p=Math.log(2),v=16*Math.floor(Math.log(x)/p),u=Math.floor(v/p),m=16*x-v,(i=new Qh).writeInt(this.scalarType),i.writeShort(x),i.writeShort(v),i.writeShort(u),i.writeShort(m),o=16*x,h=i.pos+o,a=null,P=[],r)for(w=r[T],i.writeString(T),i.writeInt(e(w)),i.writeInt(h),i.writeInt(w.length),P=P.concat(w),T==="head"&&(a=h),h+=w.length;h%4;)P.push(0),h++;return i.write(P),n=2981146554-e(i.data),i.pos=a+8,i.writeUInt32(n),i.data},e=function(r){var n,i,o,u;for(r=Zq.call(r);r.length%4;)r.push(0);for(o=new Qh(r),i=0,n=0,u=r.length;n<u;n=n+=4)i+=o.readUInt32();return 4294967295&i},t})(),Eue={}.hasOwnProperty,Sf=function(e,t){for(var r in t)Eue.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Nc=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var Cue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sf(e,Nc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Qh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),wD=(function(){function e(t,r){var n,i,o,u,a,p,h,m,v,w,x,P,T,R,k,N,F;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),v=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=t.readByte();break;case 4:for(x=t.readUInt16(),w=x/2,t.pos+=6,o=(function(){var D,U;for(U=[],p=D=0;0<=w?D<w:D>w;p=0<=w?++D:--D)U.push(t.readUInt16());return U})(),t.pos+=2,T=(function(){var D,U;for(U=[],p=D=0;0<=w?D<w:D>w;p=0<=w?++D:--D)U.push(t.readUInt16());return U})(),h=(function(){var D,U;for(U=[],p=D=0;0<=w?D<w:D>w;p=0<=w?++D:--D)U.push(t.readUInt16());return U})(),m=(function(){var D,U;for(U=[],p=D=0;0<=w?D<w:D>w;p=0<=w?++D:--D)U.push(t.readUInt16());return U})(),i=(this.length-t.pos+this.offset)/2,a=(function(){var D,U;for(U=[],p=D=0;0<=i?D<i:D>i;p=0<=i?++D:--D)U.push(t.readUInt16());return U})(),p=k=0,F=o.length;k<F;p=++k)for(R=o[p],n=N=P=T[p];P<=R?N<=R:N>=R;n=P<=R?++N:--N)m[p]===0?u=n+h[p]:(u=a[m[p]/2+(n-P)-(w-p)]||0)!==0&&(u+=h[p]),this.codeMap[n]=65535&u}t.pos=v}return e.encode=function(t,r){var n,i,o,u,a,p,h,m,v,w,x,P,T,R,k,N,F,D,U,B,Z,J,X,le,H,G,ae,se,ue,me,Ce,pe,Ee,Fe,Ke,fe,_e,Pe,ke,$e,ht,Ot,mt,nt,Nt,kt;switch(se=new Qh,u=Object.keys(t).sort(function(It,gt){return It-gt}),r){case"macroman":for(T=0,R=(function(){var It=[];for(P=0;P<256;++P)It.push(0);return It})(),N={0:0},o={},ue=0,Ee=u.length;ue<Ee;ue++)N[mt=t[i=u[ue]]]==null&&(N[mt]=++T),o[i]={old:t[i],new:N[t[i]]},R[i]=N[t[i]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(R),{charMap:o,subtable:se.data,maxGlyphID:T+1};case"unicode":for(G=[],v=[],F=0,N={},n={},k=h=null,me=0,Fe=u.length;me<Fe;me++)N[U=t[i=u[me]]]==null&&(N[U]=++F),n[i]={old:U,new:N[U]},a=N[U]-i,k!=null&&a===h||(k&&v.push(k),G.push(i),h=a),k=i;for(k&&v.push(k),v.push(65535),G.push(65535),le=2*(X=G.length),J=2*Math.pow(Math.log(X)/Math.LN2,2),w=Math.log(J/2)/Math.LN2,Z=2*X-J,p=[],B=[],x=[],P=Ce=0,Ke=G.length;Ce<Ke;P=++Ce){if(H=G[P],m=v[P],H===65535){p.push(0),B.push(0);break}if(H-(ae=n[H].new)>=32768)for(p.push(0),B.push(2*(x.length+X-P)),i=pe=H;H<=m?pe<=m:pe>=m;i=H<=m?++pe:--pe)x.push(n[i].new);else p.push(ae-H),B.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*X+2*x.length),se.writeUInt16(0),se.writeUInt16(le),se.writeUInt16(J),se.writeUInt16(w),se.writeUInt16(Z),ht=0,fe=v.length;ht<fe;ht++)i=v[ht],se.writeUInt16(i);for(se.writeUInt16(0),Ot=0,_e=G.length;Ot<_e;Ot++)i=G[Ot],se.writeUInt16(i);for(nt=0,Pe=p.length;nt<Pe;nt++)a=p[nt],se.writeUInt16(a);for(Nt=0,ke=B.length;Nt<ke;Nt++)D=B[Nt],se.writeUInt16(D);for(kt=0,$e=x.length;kt<$e;kt++)T=x[kt],se.writeUInt16(T);return{charMap:n,subtable:se.data,maxGlyphID:F+1}}},e})(),Wq=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sf(e,Nc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new wD(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=wD.encode(t,r),(i=new Qh).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e})(),Aue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sf(e,Nc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),Pue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sf(e,Nc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),Tue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sf(e,Nc),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var u,a,p;for(p=[],o=u=0,a=this.file.maxp.numGlyphs;0<=a?u<a:u>a;o=0<=a?++u:--u)p.push(t.readUInt32());return p}).call(this)}},e})(),Iue=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Mue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sf(e,Nc),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,o,u,a,p,h,m,v,w;for(t.pos=this.offset,t.readShort(),r=t.readShort(),a=t.readShort(),n=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(p={},o=m=0,v=n.length;m<v;o=++m)i=n[o],t.pos=i.offset,h=t.readString(i.length),u=new Iue(h,i),p[w=i.nameID]==null&&(p[w]=[]),p[i.nameID].push(u);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},e})(),Rue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sf(e,Nc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),Oue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sf(e,Nc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,o,u,a,p;for(t.pos=this.offset,this.metrics=[],r=0,a=this.file.hhea.numberOfMetrics;0<=a?r<a:r>a;r=0<=a?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,m;for(m=[],r=h=0;0<=i?h<i:h>i;r=0<=i?++h:--h)m.push(t.readInt16());return m})(),this.widths=(function(){var h,m,v,w;for(w=[],h=0,m=(v=this.metrics).length;h<m;h++)o=v[h],w.push(o.advance);return w}).call(this),n=this.widths[this.widths.length-1],p=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)p.push(this.widths.push(n));return p},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),Zq=[].slice,kue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sf(e,Nc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,o,u,a,p,h,m,v;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,n=o.indexOf(t),(i=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,u=(a=new Qh(r.read(i))).readShort(),h=a.readShort(),v=a.readShort(),p=a.readShort(),m=a.readShort(),this.cache[t]=u===-1?new Due(a,h,v,p,m):new Lue(a,u,h,v,p,m),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,o,u,a,p;for(u=[],o=[],a=0,p=r.length;a<p;a++)i=t[r[a]],o.push(u.length),i&&(u=u.concat(i.encode(n)));return o.push(u.length),{table:u,offsets:o}},e})(),Lue=(function(){function e(t,r,n,i,o,u){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=u,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Due=(function(){function e(t,r,n,i,o){var u,a;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;a=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&a;)u.pos+=1&a?4:2,128&a?u.pos+=8:64&a?u.pos+=4:8&a&&(u.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Qh(Zq.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),Nue=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Sf(e,Nc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],n=0,i=this.length;n<i;n+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,o=0,u=0;u<n.length;++u)if(n[u]=i,o<r.length&&r[o]==u){++o,n[u]=i;var a=this.offsets[u],p=this.offsets[u+1]-a;p>0&&(i+=p)}for(var h=new Array(4*n.length),m=0;m<n.length;++m)h[4*m+3]=255&n[m],h[4*m+2]=(65280&n[m])>>8,h[4*m+1]=(16711680&n[m])>>16,h[4*m]=(4278190080&n[m])>>24;return h},e})(),Fue=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,o;for(r in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)n=o[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,o,u,a,p;for(i={},u=0,a=t.length;u<a;u++)i[o=t[u]]=this.font.glyf.glyphFor(o);for(o in r=[],i)(n=i[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in p=this.glyphsFor(r))n=p[o],i[o]=n;return i},e.prototype.encode=function(t,r){var n,i,o,u,a,p,h,m,v,w,x,P,T,R,k;for(i in n=Wq.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(t),x={0:0},k=n.charMap)x[(p=k[i]).old]=p.new;for(P in w=n.maxGlyphID,u)P in x||(x[P]=w++);return m=(function(N){var F,D;for(F in D={},N)D[N[F]]=F;return D})(x),v=Object.keys(m).sort(function(N,F){return N-F}),T=(function(){var N,F,D;for(D=[],N=0,F=v.length;N<F;N++)a=v[N],D.push(m[a]);return D})(),o=this.font.glyf.encode(u,T,x),h=this.font.loca.encode(o.offsets,T),R={cmap:this.font.cmap.raw(),glyf:o.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},e})();Ln.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,o,u;if(Array.isArray(r))return"["+(function(){var a,p,h;for(h=[],a=0,p=r.length;a<p;a++)n=r[a],h.push(t.convert(n));return h})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in o=["<<"],r)u=r[i],o.push("/"+i+" "+t.convert(u));return o.push(">>"),o.join(`
`)}return""+r},t})();je.createContext({});function Kq(e,t,r={}){const n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function Bue(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!SD(e[0])||!SD(e[1]))throw new Error("coordinates must contain numbers");return Kq({type:"Point",coordinates:e},t,r)}function jue(e,t={}){const r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function SD(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Xq(e,t,r){if(e!==null)for(var n,i,o,u,a,p,h,m=0,v=0,w,x=e.type,P=x==="FeatureCollection",T=x==="Feature",R=P?e.features.length:1,k=0;k<R;k++){h=P?e.features[k].geometry:T?e.geometry:e,w=h?h.type==="GeometryCollection":!1,a=w?h.geometries.length:1;for(var N=0;N<a;N++){var F=0,D=0;if(u=w?h.geometries[N]:h,u!==null){p=u.coordinates;var U=u.type;switch(m=U==="Polygon"||U==="MultiPolygon"?1:0,U){case null:break;case"Point":if(t(p,v,k,F,D)===!1)return!1;v++,F++;break;case"LineString":case"MultiPoint":for(n=0;n<p.length;n++){if(t(p[n],v,k,F,D)===!1)return!1;v++,U==="MultiPoint"&&F++}U==="LineString"&&F++;break;case"Polygon":case"MultiLineString":for(n=0;n<p.length;n++){for(i=0;i<p[n].length-m;i++){if(t(p[n][i],v,k,F,D)===!1)return!1;v++}U==="MultiLineString"&&F++,U==="Polygon"&&D++}U==="Polygon"&&F++;break;case"MultiPolygon":for(n=0;n<p.length;n++){for(D=0,i=0;i<p[n].length;i++){for(o=0;o<p[n][i].length-m;o++){if(t(p[n][i][o],v,k,F,D)===!1)return!1;v++}D++}F++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(Xq(u.geometries[n],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Yq(e,t={}){let r=0,n=0,i=0;return Xq(e,function(o){r+=o[0],n+=o[1],i++}),Bue([r/i,n/i],t.properties)}var T_={exports:{}},zue=T_.exports,ED;function $ue(){return ED||(ED=1,(function(e,t){(function(r,n){e.exports=n()})(zue,(function(){var r=function($,te){var Oe={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},pt={on:function(xt,$t,Ir){if(Oe[xt]===void 0)throw new Error("Invalid event type: "+xt);Oe[xt].push({selector:$t,fn:Ir})},render:function(xt){te.store.featureChanged(xt)}},At=function(xt,$t){for(var Ir=Oe[xt],Br=Ir.length;Br--;){var Xr=Ir[Br];if(Xr.selector($t)){Xr.fn.call(pt,$t)||te.store.render(),te.ui.updateMapClasses();break}}};return $.start.call(pt),{render:$.render,stop:function(){$.stop&&$.stop()},trash:function(){$.trash&&($.trash(),te.store.render())},combineFeatures:function(){$.combineFeatures&&$.combineFeatures()},uncombineFeatures:function(){$.uncombineFeatures&&$.uncombineFeatures()},drag:function(xt){At("drag",xt)},click:function(xt){At("click",xt)},mousemove:function(xt){At("mousemove",xt)},mousedown:function(xt){At("mousedown",xt)},mouseup:function(xt){At("mouseup",xt)},mouseout:function(xt){At("mouseout",xt)},keydown:function(xt){At("keydown",xt)},keyup:function(xt){At("keyup",xt)},touchstart:function(xt){At("touchstart",xt)},touchmove:function(xt){At("touchmove",xt)},touchend:function(xt){At("touchend",xt)},tap:function(xt){At("tap",xt)}}};function n($){return $&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$}function i($){if($.__esModule)return $;var te=$.default;if(typeof te=="function"){var Oe=function pt(){if(this instanceof pt){var At=[null];At.push.apply(At,arguments);var xt=Function.bind.apply(te,At);return new xt}return te.apply(this,arguments)};Oe.prototype=te.prototype}else Oe={};return Object.defineProperty(Oe,"__esModule",{value:!0}),Object.keys($).forEach((function(pt){var At=Object.getOwnPropertyDescriptor($,pt);Object.defineProperty(Oe,pt,At.get?At:{enumerable:!0,get:function(){return $[pt]}})})),Oe}var o={},u={RADIUS:6378137},a=u;function p($){var te=0;if($&&$.length>0){te+=Math.abs(h($[0]));for(var Oe=1;Oe<$.length;Oe++)te-=Math.abs(h($[Oe]))}return te}function h($){var te,Oe,pt,At,xt,$t,Ir=0,Br=$.length;if(Br>2){for($t=0;$t<Br;$t++)$t===Br-2?(pt=Br-2,At=Br-1,xt=0):$t===Br-1?(pt=Br-1,At=0,xt=1):(pt=$t,At=$t+1,xt=$t+2),te=$[pt],Oe=$[At],Ir+=(m($[xt][0])-m(te[0]))*Math.sin(m(Oe[1]));Ir=Ir*a.RADIUS*a.RADIUS/2}return Ir}function m($){return $*Math.PI/180}o.geometry=function $(te){var Oe,pt=0;switch(te.type){case"Polygon":return p(te.coordinates);case"MultiPolygon":for(Oe=0;Oe<te.coordinates.length;Oe++)pt+=p(te.coordinates[Oe]);return pt;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Oe=0;Oe<te.geometries.length;Oe++)pt+=$(te.geometries[Oe]);return pt}},o.ring=h;var v={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},w={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},x={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},P={POLYGON:"polygon",LINE:"line_string",POINT:"point"},T={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},R={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},k={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},N={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},F={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},D={ACTIVE:"true",INACTIVE:"false"},U=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],B=-85,Z=Object.freeze({__proto__:null,classes:v,sources:w,cursors:x,types:P,geojsonTypes:T,modes:R,events:k,updateActions:N,meta:F,activeStates:D,interactions:U,LAT_MIN:-90,LAT_RENDERED_MIN:B,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),J={Point:0,LineString:1,MultiLineString:1,Polygon:2};function X($,te){var Oe=J[$.geometry.type]-J[te.geometry.type];return Oe===0&&$.geometry.type===T.POLYGON?$.area-te.area:Oe}function le($){return $.map((function(te){return te.geometry.type===T.POLYGON&&(te.area=o.geometry({type:T.FEATURE,property:{},geometry:te.geometry})),te})).sort(X).map((function(te){return delete te.area,te}))}function H($,te){return te===void 0&&(te=0),[[$.point.x-te,$.point.y-te],[$.point.x+te,$.point.y+te]]}function G($){if(this._items={},this._nums={},this._length=$?$.length:0,$)for(var te=0,Oe=$.length;te<Oe;te++)this.add($[te]),$[te]!==void 0&&(typeof $[te]=="string"?this._items[$[te]]=te:this._nums[$[te]]=te)}G.prototype.add=function($){return this.has($)||(this._length++,typeof $=="string"?this._items[$]=this._length:this._nums[$]=this._length),this},G.prototype.delete=function($){return this.has($)===!1||(this._length--,delete this._items[$],delete this._nums[$]),this},G.prototype.has=function($){return(typeof $=="string"||typeof $=="number")&&(this._items[$]!==void 0||this._nums[$]!==void 0)},G.prototype.values=function(){var $=this,te=[];return Object.keys(this._items).forEach((function(Oe){te.push({k:Oe,v:$._items[Oe]})})),Object.keys(this._nums).forEach((function(Oe){te.push({k:JSON.parse(Oe),v:$._nums[Oe]})})),te.sort((function(Oe,pt){return Oe.v-pt.v})).map((function(Oe){return Oe.k}))},G.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ae=[F.FEATURE,F.MIDPOINT,F.VERTEX],se={click:function($,te,Oe){return ue($,te,Oe,Oe.options.clickBuffer)},touch:function($,te,Oe){return ue($,te,Oe,Oe.options.touchBuffer)}};function ue($,te,Oe,pt){if(Oe.map===null)return[];var At=$?H($,pt):te,xt={};Oe.options.styles&&(xt.layers=Oe.options.styles.map((function(Xr){return Xr.id})).filter((function(Xr){return Oe.map.getLayer(Xr)!=null})));var $t=Oe.map.queryRenderedFeatures(At,xt).filter((function(Xr){return ae.indexOf(Xr.properties.meta)!==-1})),Ir=new G,Br=[];return $t.forEach((function(Xr){var Zr=Xr.properties.id;Ir.has(Zr)||(Ir.add(Zr),Br.push(Xr))})),le(Br)}function me($,te){var Oe=se.click($,null,te),pt={mouse:x.NONE};return Oe[0]&&(pt.mouse=Oe[0].properties.active===D.ACTIVE?x.MOVE:x.POINTER,pt.feature=Oe[0].properties.meta),te.events.currentModeName().indexOf("draw")!==-1&&(pt.mouse=x.ADD),te.ui.queueMapClasses(pt),te.ui.updateMapClasses(),Oe[0]}function Ce($,te){var Oe=$.x-te.x,pt=$.y-te.y;return Math.sqrt(Oe*Oe+pt*pt)}function pe($,te,Oe){Oe===void 0&&(Oe={});var pt=Oe.fineTolerance!=null?Oe.fineTolerance:4,At=Oe.grossTolerance!=null?Oe.grossTolerance:12,xt=Oe.interval!=null?Oe.interval:500;$.point=$.point||te.point,$.time=$.time||te.time;var $t=Ce($.point,te.point);return $t<pt||$t<At&&te.time-$.time<xt}function Ee($,te,Oe){Oe===void 0&&(Oe={});var pt=Oe.tolerance!=null?Oe.tolerance:25,At=Oe.interval!=null?Oe.interval:250;return $.point=$.point||te.point,$.time=$.time||te.time,Ce($.point,te.point)<pt&&te.time-$.time<At}var Fe={exports:{}},Ke=Fe.exports=function($,te){if(te||(te=16),$===void 0&&($=128),$<=0)return"0";for(var Oe=Math.log(Math.pow(2,$))/Math.log(te),pt=2;Oe===1/0;pt*=2)Oe=Math.log(Math.pow(2,$/pt))/Math.log(te)*pt;var At=Oe-Math.floor(Oe),xt="";for(pt=0;pt<Math.floor(Oe);pt++)xt=Math.floor(Math.random()*te).toString(te)+xt;if(At){var $t=Math.pow(te,At);xt=Math.floor(Math.random()*$t).toString(te)+xt}var Ir=parseInt(xt,te);return Ir!==1/0&&Ir>=Math.pow(2,$)?Ke($,te):xt};Ke.rack=function($,te,Oe){var pt=function(xt){var $t=0;do{if($t++>10){if(!Oe)throw new Error("too many ID collisions, use more bits");$+=Oe}var Ir=Ke($,te)}while(Object.hasOwnProperty.call(At,Ir));return At[Ir]=xt,Ir},At=pt.hats={};return pt.get=function(xt){return pt.hats[xt]},pt.set=function(xt,$t){return pt.hats[xt]=$t,pt},pt.bits=$||128,pt.base=te||16,pt};var fe=n(Fe.exports),_e=function($,te){this.ctx=$,this.properties=te.properties||{},this.coordinates=te.geometry.coordinates,this.id=te.id||fe(),this.type=te.geometry.type};_e.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},_e.prototype.incomingCoords=function($){this.setCoordinates($)},_e.prototype.setCoordinates=function($){this.coordinates=$,this.changed()},_e.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},_e.prototype.setProperty=function($,te){this.properties[$]=te},_e.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:T.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},_e.prototype.internal=function($){var te={id:this.id,meta:F.FEATURE,"meta:type":this.type,active:D.INACTIVE,mode:$};if(this.ctx.options.userProperties)for(var Oe in this.properties)te["user_"+Oe]=this.properties[Oe];return{type:T.FEATURE,properties:te,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Pe=function($,te){_e.call(this,$,te)};(Pe.prototype=Object.create(_e.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Pe.prototype.updateCoordinate=function($,te,Oe){this.coordinates=arguments.length===3?[te,Oe]:[$,te],this.changed()},Pe.prototype.getCoordinate=function(){return this.getCoordinates()};var ke=function($,te){_e.call(this,$,te)};(ke.prototype=Object.create(_e.prototype)).isValid=function(){return this.coordinates.length>1},ke.prototype.addCoordinate=function($,te,Oe){this.changed();var pt=parseInt($,10);this.coordinates.splice(pt,0,[te,Oe])},ke.prototype.getCoordinate=function($){var te=parseInt($,10);return JSON.parse(JSON.stringify(this.coordinates[te]))},ke.prototype.removeCoordinate=function($){this.changed(),this.coordinates.splice(parseInt($,10),1)},ke.prototype.updateCoordinate=function($,te,Oe){var pt=parseInt($,10);this.coordinates[pt]=[te,Oe],this.changed()};var $e=function($,te){_e.call(this,$,te),this.coordinates=this.coordinates.map((function(Oe){return Oe.slice(0,-1)}))};($e.prototype=Object.create(_e.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every((function($){return $.length>2}))},$e.prototype.incomingCoords=function($){this.coordinates=$.map((function(te){return te.slice(0,-1)})),this.changed()},$e.prototype.setCoordinates=function($){this.coordinates=$,this.changed()},$e.prototype.addCoordinate=function($,te,Oe){this.changed();var pt=$.split(".").map((function(At){return parseInt(At,10)}));this.coordinates[pt[0]].splice(pt[1],0,[te,Oe])},$e.prototype.removeCoordinate=function($){this.changed();var te=$.split(".").map((function(pt){return parseInt(pt,10)})),Oe=this.coordinates[te[0]];Oe&&(Oe.splice(te[1],1),Oe.length<3&&this.coordinates.splice(te[0],1))},$e.prototype.getCoordinate=function($){var te=$.split(".").map((function(pt){return parseInt(pt,10)})),Oe=this.coordinates[te[0]];return JSON.parse(JSON.stringify(Oe[te[1]]))},$e.prototype.getCoordinates=function(){return this.coordinates.map((function($){return $.concat([$[0]])}))},$e.prototype.updateCoordinate=function($,te,Oe){this.changed();var pt=$.split("."),At=parseInt(pt[0],10),xt=parseInt(pt[1],10);this.coordinates[At]===void 0&&(this.coordinates[At]=[]),this.coordinates[At][xt]=[te,Oe]};var ht={MultiPoint:Pe,MultiLineString:ke,MultiPolygon:$e},Ot=function($,te,Oe,pt,At){var xt=Oe.split("."),$t=parseInt(xt[0],10),Ir=xt[1]?xt.slice(1).join("."):null;return $[$t][te](Ir,pt,At)},mt=function($,te){if(_e.call(this,$,te),delete this.coordinates,this.model=ht[te.geometry.type],this.model===void 0)throw new TypeError(te.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(te.geometry.coordinates)};function nt($){this.map=$.map,this.drawConfig=JSON.parse(JSON.stringify($.options||{})),this._ctx=$}(mt.prototype=Object.create(_e.prototype))._coordinatesToFeatures=function($){var te=this,Oe=this.model.bind(this);return $.map((function(pt){return new Oe(te.ctx,{id:fe(),type:T.FEATURE,properties:{},geometry:{coordinates:pt,type:te.type.replace("Multi","")}})}))},mt.prototype.isValid=function(){return this.features.every((function($){return $.isValid()}))},mt.prototype.setCoordinates=function($){this.features=this._coordinatesToFeatures($),this.changed()},mt.prototype.getCoordinate=function($){return Ot(this.features,"getCoordinate",$)},mt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((function($){return $.type===T.POLYGON?$.getCoordinates():$.coordinates}))))},mt.prototype.updateCoordinate=function($,te,Oe){Ot(this.features,"updateCoordinate",$,te,Oe),this.changed()},mt.prototype.addCoordinate=function($,te,Oe){Ot(this.features,"addCoordinate",$,te,Oe),this.changed()},mt.prototype.removeCoordinate=function($){Ot(this.features,"removeCoordinate",$),this.changed()},mt.prototype.getFeatures=function(){return this.features},nt.prototype.setSelected=function($){return this._ctx.store.setSelected($)},nt.prototype.setSelectedCoordinates=function($){var te=this;this._ctx.store.setSelectedCoordinates($),$.reduce((function(Oe,pt){return Oe[pt.feature_id]===void 0&&(Oe[pt.feature_id]=!0,te._ctx.store.get(pt.feature_id).changed()),Oe}),{})},nt.prototype.getSelected=function(){return this._ctx.store.getSelected()},nt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},nt.prototype.isSelected=function($){return this._ctx.store.isSelected($)},nt.prototype.getFeature=function($){return this._ctx.store.get($)},nt.prototype.select=function($){return this._ctx.store.select($)},nt.prototype.deselect=function($){return this._ctx.store.deselect($)},nt.prototype.deleteFeature=function($,te){return te===void 0&&(te={}),this._ctx.store.delete($,te)},nt.prototype.addFeature=function($){return this._ctx.store.add($)},nt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},nt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},nt.prototype.setActionableState=function($){$===void 0&&($={});var te={trash:$.trash||!1,combineFeatures:$.combineFeatures||!1,uncombineFeatures:$.uncombineFeatures||!1};return this._ctx.events.actionable(te)},nt.prototype.changeMode=function($,te,Oe){return te===void 0&&(te={}),Oe===void 0&&(Oe={}),this._ctx.events.changeMode($,te,Oe)},nt.prototype.updateUIClasses=function($){return this._ctx.ui.queueMapClasses($)},nt.prototype.activateUIButton=function($){return this._ctx.ui.setActiveButton($)},nt.prototype.featuresAt=function($,te,Oe){if(Oe===void 0&&(Oe="click"),Oe!=="click"&&Oe!=="touch")throw new Error("invalid buffer type");return se[Oe]($,te,this._ctx)},nt.prototype.newFeature=function($){var te=$.geometry.type;return te===T.POINT?new Pe(this._ctx,$):te===T.LINE_STRING?new ke(this._ctx,$):te===T.POLYGON?new $e(this._ctx,$):new mt(this._ctx,$)},nt.prototype.isInstanceOf=function($,te){if($===T.POINT)return te instanceof Pe;if($===T.LINE_STRING)return te instanceof ke;if($===T.POLYGON)return te instanceof $e;if($==="MultiFeature")return te instanceof mt;throw new Error("Unknown feature class: "+$)},nt.prototype.doRender=function($){return this._ctx.store.featureChanged($)},nt.prototype.onSetup=function(){},nt.prototype.onDrag=function(){},nt.prototype.onClick=function(){},nt.prototype.onMouseMove=function(){},nt.prototype.onMouseDown=function(){},nt.prototype.onMouseUp=function(){},nt.prototype.onMouseOut=function(){},nt.prototype.onKeyUp=function(){},nt.prototype.onKeyDown=function(){},nt.prototype.onTouchStart=function(){},nt.prototype.onTouchMove=function(){},nt.prototype.onTouchEnd=function(){},nt.prototype.onTap=function(){},nt.prototype.onStop=function(){},nt.prototype.onTrash=function(){},nt.prototype.onCombineFeature=function(){},nt.prototype.onUncombineFeature=function(){},nt.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Nt={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},kt=Object.keys(Nt);function It($){var te=Object.keys($);return function(Oe,pt){pt===void 0&&(pt={});var At={},xt=te.reduce((function($t,Ir){return $t[Ir]=$[Ir],$t}),new nt(Oe));return{start:function(){var $t=this;At=xt.onSetup(pt),kt.forEach((function(Ir){var Br,Xr=Nt[Ir],Zr=function(){return!1};$[Xr]&&(Zr=function(){return!0}),$t.on(Ir,Zr,(Br=Xr,function(Nr){return xt[Br](At,Nr)}))}))},stop:function(){xt.onStop(At)},trash:function(){xt.onTrash(At)},combineFeatures:function(){xt.onCombineFeatures(At)},uncombineFeatures:function(){xt.onUncombineFeatures(At)},render:function($t,Ir){xt.toDisplayFeatures(At,$t,Ir)}}}}function gt($){return[].concat($).filter((function(te){return te!==void 0}))}function Le(){var $=this;if(!($.ctx.map&&$.ctx.map.getSource(w.HOT)!==void 0))return Br();var te=$.ctx.events.currentModeName();$.ctx.ui.queueMapClasses({mode:te});var Oe=[],pt=[];$.isDirty?pt=$.getAllIds():(Oe=$.getChangedIds().filter((function(Xr){return $.get(Xr)!==void 0})),pt=$.sources.hot.filter((function(Xr){return Xr.properties.id&&Oe.indexOf(Xr.properties.id)===-1&&$.get(Xr.properties.id)!==void 0})).map((function(Xr){return Xr.properties.id}))),$.sources.hot=[];var At=$.sources.cold.length;$.sources.cold=$.isDirty?[]:$.sources.cold.filter((function(Xr){var Zr=Xr.properties.id||Xr.properties.parent;return Oe.indexOf(Zr)===-1}));var xt=At!==$.sources.cold.length||pt.length>0;function $t(Xr,Zr){var Nr=$.get(Xr).internal(te);$.ctx.events.currentModeRender(Nr,(function(wn){$.sources[Zr].push(wn)}))}if(Oe.forEach((function(Xr){return $t(Xr,"hot")})),pt.forEach((function(Xr){return $t(Xr,"cold")})),xt&&$.ctx.map.getSource(w.COLD).setData({type:T.FEATURE_COLLECTION,features:$.sources.cold}),$.ctx.map.getSource(w.HOT).setData({type:T.FEATURE_COLLECTION,features:$.sources.hot}),$._emitSelectionChange&&($.ctx.map.fire(k.SELECTION_CHANGE,{features:$.getSelected().map((function(Xr){return Xr.toGeoJSON()})),points:$.getSelectedCoordinates().map((function(Xr){return{type:T.FEATURE,properties:{},geometry:{type:T.POINT,coordinates:Xr.coordinates}}}))}),$._emitSelectionChange=!1),$._deletedFeaturesToEmit.length){var Ir=$._deletedFeaturesToEmit.map((function(Xr){return Xr.toGeoJSON()}));$._deletedFeaturesToEmit=[],$.ctx.map.fire(k.DELETE,{features:Ir})}function Br(){$.isDirty=!1,$.clearChangedIds()}Br(),$.ctx.map.fire(k.RENDER,{})}function pr($){var te,Oe=this;this._features={},this._featureIds=new G,this._selectedFeatureIds=new G,this._selectedCoordinates=[],this._changedFeatureIds=new G,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=$,this.sources={hot:[],cold:[]},this.render=function(){te||(te=requestAnimationFrame((function(){te=null,Le.call(Oe)})))},this.isDirty=!1}function hr($,te){var Oe=$._selectedCoordinates.filter((function(pt){return $._selectedFeatureIds.has(pt.feature_id)}));$._selectedCoordinates.length===Oe.length||te.silent||($._emitSelectionChange=!0),$._selectedCoordinates=Oe}pr.prototype.createRenderBatch=function(){var $=this,te=this.render,Oe=0;return this.render=function(){Oe++},function(){$.render=te,Oe>0&&$.render()}},pr.prototype.setDirty=function(){return this.isDirty=!0,this},pr.prototype.featureChanged=function($){return this._changedFeatureIds.add($),this},pr.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},pr.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},pr.prototype.getAllIds=function(){return this._featureIds.values()},pr.prototype.add=function($){return this.featureChanged($.id),this._features[$.id]=$,this._featureIds.add($.id),this},pr.prototype.delete=function($,te){var Oe=this;return te===void 0&&(te={}),gt($).forEach((function(pt){Oe._featureIds.has(pt)&&(Oe._featureIds.delete(pt),Oe._selectedFeatureIds.delete(pt),te.silent||Oe._deletedFeaturesToEmit.indexOf(Oe._features[pt])===-1&&Oe._deletedFeaturesToEmit.push(Oe._features[pt]),delete Oe._features[pt],Oe.isDirty=!0)})),hr(this,te),this},pr.prototype.get=function($){return this._features[$]},pr.prototype.getAll=function(){var $=this;return Object.keys(this._features).map((function(te){return $._features[te]}))},pr.prototype.select=function($,te){var Oe=this;return te===void 0&&(te={}),gt($).forEach((function(pt){Oe._selectedFeatureIds.has(pt)||(Oe._selectedFeatureIds.add(pt),Oe._changedFeatureIds.add(pt),te.silent||(Oe._emitSelectionChange=!0))})),this},pr.prototype.deselect=function($,te){var Oe=this;return te===void 0&&(te={}),gt($).forEach((function(pt){Oe._selectedFeatureIds.has(pt)&&(Oe._selectedFeatureIds.delete(pt),Oe._changedFeatureIds.add(pt),te.silent||(Oe._emitSelectionChange=!0))})),hr(this,te),this},pr.prototype.clearSelected=function($){return $===void 0&&($={}),this.deselect(this._selectedFeatureIds.values(),{silent:$.silent}),this},pr.prototype.setSelected=function($,te){var Oe=this;return te===void 0&&(te={}),$=gt($),this.deselect(this._selectedFeatureIds.values().filter((function(pt){return $.indexOf(pt)===-1})),{silent:te.silent}),this.select($.filter((function(pt){return!Oe._selectedFeatureIds.has(pt)})),{silent:te.silent}),this},pr.prototype.setSelectedCoordinates=function($){return this._selectedCoordinates=$,this._emitSelectionChange=!0,this},pr.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},pr.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},pr.prototype.getSelected=function(){var $=this;return this._selectedFeatureIds.values().map((function(te){return $.get(te)}))},pr.prototype.getSelectedCoordinates=function(){var $=this;return this._selectedCoordinates.map((function(te){return{coordinates:$.get(te.feature_id).getCoordinate(te.coord_path)}}))},pr.prototype.isSelected=function($){return this._selectedFeatureIds.has($)},pr.prototype.setFeatureProperty=function($,te,Oe){this.get($).setProperty(te,Oe),this.featureChanged($)},pr.prototype.storeMapConfig=function(){var $=this;U.forEach((function(te){$.ctx.map[te]&&($._mapInitialConfig[te]=$.ctx.map[te].isEnabled())}))},pr.prototype.restoreMapConfig=function(){var $=this;Object.keys(this._mapInitialConfig).forEach((function(te){$._mapInitialConfig[te]?$.ctx.map[te].enable():$.ctx.map[te].disable()}))},pr.prototype.getInitialConfigValue=function($){return this._mapInitialConfig[$]===void 0||this._mapInitialConfig[$]};var vr=function(){for(var $=arguments,te={},Oe=0;Oe<arguments.length;Oe++){var pt=$[Oe];for(var At in pt)Qt.call(pt,At)&&(te[At]=pt[At])}return te},Qt=Object.prototype.hasOwnProperty,qe=n(vr),rt=["mode","feature","mouse"];function ct($){var te=null,Oe=null,pt={onRemove:function(){return $.map.off("load",pt.connect),clearInterval(Oe),pt.removeLayers(),$.store.restoreMapConfig(),$.ui.removeButtons(),$.events.removeEventListeners(),$.ui.clearMapClasses(),$.boxZoomInitial&&$.map.boxZoom.enable(),$.map=null,$.container=null,$.store=null,te&&te.parentNode&&te.parentNode.removeChild(te),te=null,this},connect:function(){$.map.off("load",pt.connect),clearInterval(Oe),pt.addLayers(),$.store.storeMapConfig(),$.events.addEventListeners()},onAdd:function(At){var xt=At.fire;return At.fire=function($t,Ir){var Br=arguments;return xt.length===1&&arguments.length!==1&&(Br=[qe({},{type:$t},Ir)]),xt.apply(At,Br)},$.map=At,$.events=(function($t){var Ir=Object.keys($t.options.modes).reduce((function(Sr,Jr){return Sr[Jr]=It($t.options.modes[Jr]),Sr}),{}),Br={},Xr={},Zr={},Nr=null,wn=null;Zr.drag=function(Sr,Jr){Jr({point:Sr.point,time:new Date().getTime()})?($t.ui.queueMapClasses({mouse:x.DRAG}),wn.drag(Sr)):Sr.originalEvent.stopPropagation()},Zr.mousedrag=function(Sr){Zr.drag(Sr,(function(Jr){return!pe(Br,Jr)}))},Zr.touchdrag=function(Sr){Zr.drag(Sr,(function(Jr){return!Ee(Xr,Jr)}))},Zr.mousemove=function(Sr){if((Sr.originalEvent.buttons!==void 0?Sr.originalEvent.buttons:Sr.originalEvent.which)===1)return Zr.mousedrag(Sr);var Jr=me(Sr,$t);Sr.featureTarget=Jr,wn.mousemove(Sr)},Zr.mousedown=function(Sr){Br={time:new Date().getTime(),point:Sr.point};var Jr=me(Sr,$t);Sr.featureTarget=Jr,wn.mousedown(Sr)},Zr.mouseup=function(Sr){var Jr=me(Sr,$t);Sr.featureTarget=Jr,pe(Br,{point:Sr.point,time:new Date().getTime()})?wn.click(Sr):wn.mouseup(Sr)},Zr.mouseout=function(Sr){wn.mouseout(Sr)},Zr.touchstart=function(Sr){if($t.options.touchEnabled){Xr={time:new Date().getTime(),point:Sr.point};var Jr=se.touch(Sr,null,$t)[0];Sr.featureTarget=Jr,wn.touchstart(Sr)}},Zr.touchmove=function(Sr){if($t.options.touchEnabled)return wn.touchmove(Sr),Zr.touchdrag(Sr)},Zr.touchend=function(Sr){if(Sr.originalEvent.preventDefault(),$t.options.touchEnabled){var Jr=se.touch(Sr,null,$t)[0];Sr.featureTarget=Jr,Ee(Xr,{time:new Date().getTime(),point:Sr.point})?wn.tap(Sr):wn.touchend(Sr)}};var ln=function(Sr){return!(Sr===8||Sr===46||Sr>=48&&Sr<=57)};function Rn(Sr,Jr,Dn){Dn===void 0&&(Dn={}),wn.stop();var li=Ir[Sr];if(li===void 0)throw new Error(Sr+" is not valid");Nr=Sr;var jn=li($t,Jr);wn=r(jn,$t),Dn.silent||$t.map.fire(k.MODE_CHANGE,{mode:Sr}),$t.store.setDirty(),$t.store.render()}Zr.keydown=function(Sr){(Sr.srcElement||Sr.target).classList.contains("mapboxgl-canvas")&&(Sr.keyCode!==8&&Sr.keyCode!==46||!$t.options.controls.trash?ln(Sr.keyCode)?wn.keydown(Sr):Sr.keyCode===49&&$t.options.controls.point?Rn(R.DRAW_POINT):Sr.keyCode===50&&$t.options.controls.line_string?Rn(R.DRAW_LINE_STRING):Sr.keyCode===51&&$t.options.controls.polygon&&Rn(R.DRAW_POLYGON):(Sr.preventDefault(),wn.trash()))},Zr.keyup=function(Sr){ln(Sr.keyCode)&&wn.keyup(Sr)},Zr.zoomend=function(){$t.store.changeZoom()},Zr.data=function(Sr){if(Sr.dataType==="style"){var Jr=$t.setup,Dn=$t.map,li=$t.options,jn=$t.store;li.styles.some((function(gi){return Dn.getLayer(gi.id)}))||(Jr.addLayers(),jn.setDirty(),jn.render())}};var un={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Nr=$t.options.defaultMode,wn=r(Ir[Nr]($t),$t)},changeMode:Rn,actionable:function(Sr){var Jr=!1;Object.keys(Sr).forEach((function(Dn){if(un[Dn]===void 0)throw new Error("Invalid action type");un[Dn]!==Sr[Dn]&&(Jr=!0),un[Dn]=Sr[Dn]})),Jr&&$t.map.fire(k.ACTIONABLE,{actions:un})},currentModeName:function(){return Nr},currentModeRender:function(Sr,Jr){return wn.render(Sr,Jr)},fire:function(Sr,Jr){Zr[Sr]&&Zr[Sr](Jr)},addEventListeners:function(){$t.map.on("mousemove",Zr.mousemove),$t.map.on("mousedown",Zr.mousedown),$t.map.on("mouseup",Zr.mouseup),$t.map.on("data",Zr.data),$t.map.on("touchmove",Zr.touchmove),$t.map.on("touchstart",Zr.touchstart),$t.map.on("touchend",Zr.touchend),$t.container.addEventListener("mouseout",Zr.mouseout),$t.options.keybindings&&($t.container.addEventListener("keydown",Zr.keydown),$t.container.addEventListener("keyup",Zr.keyup))},removeEventListeners:function(){$t.map.off("mousemove",Zr.mousemove),$t.map.off("mousedown",Zr.mousedown),$t.map.off("mouseup",Zr.mouseup),$t.map.off("data",Zr.data),$t.map.off("touchmove",Zr.touchmove),$t.map.off("touchstart",Zr.touchstart),$t.map.off("touchend",Zr.touchend),$t.container.removeEventListener("mouseout",Zr.mouseout),$t.options.keybindings&&($t.container.removeEventListener("keydown",Zr.keydown),$t.container.removeEventListener("keyup",Zr.keyup))},trash:function(Sr){wn.trash(Sr)},combineFeatures:function(){wn.combineFeatures()},uncombineFeatures:function(){wn.uncombineFeatures()},getMode:function(){return Nr}}})($),$.ui=(function($t){var Ir={},Br=null,Xr={mode:null,feature:null,mouse:null},Zr={mode:null,feature:null,mouse:null};function Nr(Sr){Zr=qe(Zr,Sr)}function wn(){var Sr,Jr;if($t.container){var Dn=[],li=[];rt.forEach((function(jn){Zr[jn]!==Xr[jn]&&(Dn.push(jn+"-"+Xr[jn]),Zr[jn]!==null&&li.push(jn+"-"+Zr[jn]))})),Dn.length>0&&(Sr=$t.container.classList).remove.apply(Sr,Dn),li.length>0&&(Jr=$t.container.classList).add.apply(Jr,li),Xr=qe(Xr,Zr)}}function ln(Sr,Jr){Jr===void 0&&(Jr={});var Dn=document.createElement("button");return Dn.className=v.CONTROL_BUTTON+" "+Jr.className,Dn.setAttribute("title",Jr.title),Jr.container.appendChild(Dn),Dn.addEventListener("click",(function(li){if(li.preventDefault(),li.stopPropagation(),li.target===Br)return Rn(),void Jr.onDeactivate();un(Sr),Jr.onActivate()}),!0),Dn}function Rn(){Br&&(Br.classList.remove(v.ACTIVE_BUTTON),Br=null)}function un(Sr){Rn();var Jr=Ir[Sr];Jr&&Jr&&Sr!=="trash"&&(Jr.classList.add(v.ACTIVE_BUTTON),Br=Jr)}return{setActiveButton:un,queueMapClasses:Nr,updateMapClasses:wn,clearMapClasses:function(){Nr({mode:null,feature:null,mouse:null}),wn()},addButtons:function(){var Sr=$t.options.controls,Jr=document.createElement("div");return Jr.className=v.CONTROL_GROUP+" "+v.CONTROL_BASE,Sr&&(Sr[P.LINE]&&(Ir[P.LINE]=ln(P.LINE,{container:Jr,className:v.CONTROL_BUTTON_LINE,title:"LineString tool "+($t.options.keybindings?"(l)":""),onActivate:function(){return $t.events.changeMode(R.DRAW_LINE_STRING)},onDeactivate:function(){return $t.events.trash()}})),Sr[P.POLYGON]&&(Ir[P.POLYGON]=ln(P.POLYGON,{container:Jr,className:v.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+($t.options.keybindings?"(p)":""),onActivate:function(){return $t.events.changeMode(R.DRAW_POLYGON)},onDeactivate:function(){return $t.events.trash()}})),Sr[P.POINT]&&(Ir[P.POINT]=ln(P.POINT,{container:Jr,className:v.CONTROL_BUTTON_POINT,title:"Marker tool "+($t.options.keybindings?"(m)":""),onActivate:function(){return $t.events.changeMode(R.DRAW_POINT)},onDeactivate:function(){return $t.events.trash()}})),Sr.trash&&(Ir.trash=ln("trash",{container:Jr,className:v.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){$t.events.trash()}})),Sr.combine_features&&(Ir.combine_features=ln("combineFeatures",{container:Jr,className:v.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){$t.events.combineFeatures()}})),Sr.uncombine_features&&(Ir.uncombine_features=ln("uncombineFeatures",{container:Jr,className:v.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){$t.events.uncombineFeatures()}}))),Jr},removeButtons:function(){Object.keys(Ir).forEach((function(Sr){var Jr=Ir[Sr];Jr.parentNode&&Jr.parentNode.removeChild(Jr),delete Ir[Sr]}))}}})($),$.container=At.getContainer(),$.store=new pr($),te=$.ui.addButtons(),$.options.boxSelect&&($.boxZoomInitial=At.boxZoom.isEnabled(),At.boxZoom.disable(),At.dragPan.disable(),At.dragPan.enable()),At.loaded()?pt.connect():(At.on("load",pt.connect),Oe=setInterval((function(){At.loaded()&&pt.connect()}),16)),$.events.start(),te},addLayers:function(){$.map.addSource(w.COLD,{data:{type:T.FEATURE_COLLECTION,features:[]},type:"geojson"}),$.map.addSource(w.HOT,{data:{type:T.FEATURE_COLLECTION,features:[]},type:"geojson"}),$.options.styles.forEach((function(At){$.map.addLayer(At)})),$.store.setDirty(!0),$.store.render()},removeLayers:function(){$.options.styles.forEach((function(At){$.map.getLayer(At.id)&&$.map.removeLayer(At.id)})),$.map.getSource(w.COLD)&&$.map.removeSource(w.COLD),$.map.getSource(w.HOT)&&$.map.removeSource(w.HOT)}};return $.setup=pt,pt}var Ft=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Yt($){return function(te){var Oe=te.featureTarget;return!!Oe&&!!Oe.properties&&Oe.properties.meta===$}}function Wt($){return!!$.originalEvent&&!!$.originalEvent.shiftKey&&$.originalEvent.button===0}function ur($){return!!$.featureTarget&&!!$.featureTarget.properties&&$.featureTarget.properties.active===D.ACTIVE&&$.featureTarget.properties.meta===F.FEATURE}function br($){return!!$.featureTarget&&!!$.featureTarget.properties&&$.featureTarget.properties.active===D.INACTIVE&&$.featureTarget.properties.meta===F.FEATURE}function xr($){return $.featureTarget===void 0}function Rr($){return!!$.featureTarget&&!!$.featureTarget.properties&&$.featureTarget.properties.meta===F.FEATURE}function wr($){var te=$.featureTarget;return!!te&&!!te.properties&&te.properties.meta===F.VERTEX}function fr($){return!!$.originalEvent&&$.originalEvent.shiftKey===!0}function bt($){return $.keyCode===27}function ve($){return $.keyCode===13}var xe=Object.freeze({__proto__:null,isOfMetaType:Yt,isShiftMousedown:Wt,isActiveFeature:ur,isInactiveFeature:br,noTarget:xr,isFeature:Rr,isVertex:wr,isShiftDown:fr,isEscapeKey:bt,isEnterKey:ve,isTrue:function(){return!0}}),Ae=Ue;function Ue($,te){this.x=$,this.y=te}Ue.prototype={clone:function(){return new Ue(this.x,this.y)},add:function($){return this.clone()._add($)},sub:function($){return this.clone()._sub($)},multByPoint:function($){return this.clone()._multByPoint($)},divByPoint:function($){return this.clone()._divByPoint($)},mult:function($){return this.clone()._mult($)},div:function($){return this.clone()._div($)},rotate:function($){return this.clone()._rotate($)},rotateAround:function($,te){return this.clone()._rotateAround($,te)},matMult:function($){return this.clone()._matMult($)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function($){return this.x===$.x&&this.y===$.y},dist:function($){return Math.sqrt(this.distSqr($))},distSqr:function($){var te=$.x-this.x,Oe=$.y-this.y;return te*te+Oe*Oe},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function($){return Math.atan2(this.y-$.y,this.x-$.x)},angleWith:function($){return this.angleWithSep($.x,$.y)},angleWithSep:function($,te){return Math.atan2(this.x*te-this.y*$,this.x*$+this.y*te)},_matMult:function($){var te=$[0]*this.x+$[1]*this.y,Oe=$[2]*this.x+$[3]*this.y;return this.x=te,this.y=Oe,this},_add:function($){return this.x+=$.x,this.y+=$.y,this},_sub:function($){return this.x-=$.x,this.y-=$.y,this},_mult:function($){return this.x*=$,this.y*=$,this},_div:function($){return this.x/=$,this.y/=$,this},_multByPoint:function($){return this.x*=$.x,this.y*=$.y,this},_divByPoint:function($){return this.x/=$.x,this.y/=$.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var $=this.y;return this.y=this.x,this.x=-$,this},_rotate:function($){var te=Math.cos($),Oe=Math.sin($),pt=te*this.x-Oe*this.y,At=Oe*this.x+te*this.y;return this.x=pt,this.y=At,this},_rotateAround:function($,te){var Oe=Math.cos($),pt=Math.sin($),At=te.x+Oe*(this.x-te.x)-pt*(this.y-te.y),xt=te.y+pt*(this.x-te.x)+Oe*(this.y-te.y);return this.x=At,this.y=xt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ue.convert=function($){return $ instanceof Ue?$:Array.isArray($)?new Ue($[0],$[1]):$};var tt=n(Ae);function _t($,te){var Oe=te.getBoundingClientRect();return new tt($.clientX-Oe.left-(te.clientLeft||0),$.clientY-Oe.top-(te.clientTop||0))}function Mt($,te,Oe,pt){return{type:T.FEATURE,properties:{meta:F.VERTEX,parent:$,coord_path:Oe,active:pt?D.ACTIVE:D.INACTIVE},geometry:{type:T.POINT,coordinates:te}}}function Pt($,te,Oe){var pt=te.geometry.coordinates,At=Oe.geometry.coordinates;if(pt[1]>85||pt[1]<B||At[1]>85||At[1]<B)return null;var xt={lng:(pt[0]+At[0])/2,lat:(pt[1]+At[1])/2};return{type:T.FEATURE,properties:{meta:F.MIDPOINT,parent:$,lng:xt.lng,lat:xt.lat,coord_path:Oe.properties.coord_path},geometry:{type:T.POINT,coordinates:[xt.lng,xt.lat]}}}function Kt($,te,Oe){te===void 0&&(te={}),Oe===void 0&&(Oe=null);var pt,At=$.geometry,xt=At.type,$t=At.coordinates,Ir=$.properties&&$.properties.id,Br=[];function Xr(Nr,wn){var ln="",Rn=null;Nr.forEach((function(un,Sr){var Jr=wn!=null?wn+"."+Sr:String(Sr),Dn=Mt(Ir,un,Jr,Zr(Jr));if(te.midpoints&&Rn){var li=Pt(Ir,Rn,Dn);li&&Br.push(li)}Rn=Dn;var jn=JSON.stringify(un);ln!==jn&&Br.push(Dn),Sr===0&&(ln=jn)}))}function Zr(Nr){return!!te.selectedPaths&&te.selectedPaths.indexOf(Nr)!==-1}return xt===T.POINT?Br.push(Mt(Ir,$t,Oe,Zr(Oe))):xt===T.POLYGON?$t.forEach((function(Nr,wn){Xr(Nr,Oe!==null?Oe+"."+wn:String(wn))})):xt===T.LINE_STRING?Xr($t,Oe):xt.indexOf(T.MULTI_PREFIX)===0&&(pt=xt.replace(T.MULTI_PREFIX,""),$t.forEach((function(Nr,wn){var ln={type:T.FEATURE,properties:$.properties,geometry:{type:pt,coordinates:Nr}};Br=Br.concat(Kt(ln,te,wn))}))),Br}var zt={enable:function($){setTimeout((function(){$.map&&$.map.doubleClickZoom&&$._ctx&&$._ctx.store&&$._ctx.store.getInitialConfigValue&&$._ctx.store.getInitialConfigValue("doubleClickZoom")&&$.map.doubleClickZoom.enable()}),0)},disable:function($){setTimeout((function(){$.map&&$.map.doubleClickZoom&&$.map.doubleClickZoom.disable()}),0)}},Ct={exports:{}},Gt=function($){if(!$||!$.type)return null;var te=vt[$.type];if(!te)return null;if(te==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:$}]};if(te==="feature")return{type:"FeatureCollection",features:[$]};if(te==="featurecollection")return $},vt={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Pr=n(Gt),Tr=Object.freeze({__proto__:null,default:function $(te){switch(te&&te.type||null){case"FeatureCollection":return te.features=te.features.reduce((function(Oe,pt){return Oe.concat($(pt))}),[]),te;case"Feature":return te.geometry?$(te.geometry).map((function(Oe){var pt={type:"Feature",properties:JSON.parse(JSON.stringify(te.properties)),geometry:Oe};return te.id!==void 0&&(pt.id=te.id),pt})):[te];case"MultiPoint":return te.coordinates.map((function(Oe){return{type:"Point",coordinates:Oe}}));case"MultiPolygon":return te.coordinates.map((function(Oe){return{type:"Polygon",coordinates:Oe}}));case"MultiLineString":return te.coordinates.map((function(Oe){return{type:"LineString",coordinates:Oe}}));case"GeometryCollection":return te.geometries.map($).reduce((function(Oe,pt){return Oe.concat(pt)}),[]);case"Point":case"Polygon":case"LineString":return[te]}}}),Ye=Gt,ot=i(Tr),jt=function($){return(function te(Oe){return Array.isArray(Oe)&&Oe.length&&typeof Oe[0]=="number"?[Oe]:Oe.reduce((function(pt,At){return Array.isArray(At)&&Array.isArray(At[0])?pt.concat(te(At)):(pt.push(At),pt)}),[])})($)};ot instanceof Function||(ot=ot.default);var ne={exports:{}},de=ne.exports=function($){return new Be($)};function Be($){this.value=$}function et($,te,Oe){var pt=[],At=[],xt=!0;return(function $t(Ir){var Br=Oe?Lt(Ir):Ir,Xr={},Zr=!0,Nr={node:Br,node_:Ir,path:[].concat(pt),parent:At[At.length-1],parents:At,key:pt.slice(-1)[0],isRoot:pt.length===0,level:pt.length,circular:null,update:function(Rn,un){Nr.isRoot||(Nr.parent.node[Nr.key]=Rn),Nr.node=Rn,un&&(Zr=!1)},delete:function(Rn){delete Nr.parent.node[Nr.key],Rn&&(Zr=!1)},remove:function(Rn){zr(Nr.parent.node)?Nr.parent.node.splice(Nr.key,1):delete Nr.parent.node[Nr.key],Rn&&(Zr=!1)},keys:null,before:function(Rn){Xr.before=Rn},after:function(Rn){Xr.after=Rn},pre:function(Rn){Xr.pre=Rn},post:function(Rn){Xr.post=Rn},stop:function(){xt=!1},block:function(){Zr=!1}};if(!xt)return Nr;function wn(){if(typeof Nr.node=="object"&&Nr.node!==null){Nr.keys&&Nr.node_===Nr.node||(Nr.keys=lr(Nr.node)),Nr.isLeaf=Nr.keys.length==0;for(var Rn=0;Rn<At.length;Rn++)if(At[Rn].node_===Ir){Nr.circular=At[Rn];break}}else Nr.isLeaf=!0,Nr.keys=null;Nr.notLeaf=!Nr.isLeaf,Nr.notRoot=!Nr.isRoot}wn();var ln=te.call(Nr,Nr.node);return ln!==void 0&&Nr.update&&Nr.update(ln),Xr.before&&Xr.before.call(Nr,Nr.node),Zr&&(typeof Nr.node!="object"||Nr.node===null||Nr.circular||(At.push(Nr),wn(),kr(Nr.keys,(function(Rn,un){pt.push(Rn),Xr.pre&&Xr.pre.call(Nr,Nr.node[Rn],Rn);var Sr=$t(Nr.node[Rn]);Oe&&sn.call(Nr.node,Rn)&&(Nr.node[Rn]=Sr.node),Sr.isLast=un==Nr.keys.length-1,Sr.isFirst=un==0,Xr.post&&Xr.post.call(Nr,Sr),pt.pop()})),At.pop()),Xr.after&&Xr.after.call(Nr,Nr.node)),Nr})($).node}function Lt($){if(typeof $=="object"&&$!==null){var te;if(zr($))te=[];else if(qt($)==="[object Date]")te=new Date($.getTime?$.getTime():$);else if((function(At){return qt(At)==="[object RegExp]"})($))te=new RegExp($);else if((function(At){return qt(At)==="[object Error]"})($))te={message:$.message};else if((function(At){return qt(At)==="[object Boolean]"})($))te=new Boolean($);else if((function(At){return qt(At)==="[object Number]"})($))te=new Number($);else if((function(At){return qt(At)==="[object String]"})($))te=new String($);else if(Object.create&&Object.getPrototypeOf)te=Object.create(Object.getPrototypeOf($));else if($.constructor===Object)te={};else{var Oe=$.constructor&&$.constructor.prototype||$.__proto__||{},pt=function(){};pt.prototype=Oe,te=new pt}return kr(lr($),(function(At){te[At]=$[At]})),te}return $}Be.prototype.get=function($){for(var te=this.value,Oe=0;Oe<$.length;Oe++){var pt=$[Oe];if(!te||!sn.call(te,pt)){te=void 0;break}te=te[pt]}return te},Be.prototype.has=function($){for(var te=this.value,Oe=0;Oe<$.length;Oe++){var pt=$[Oe];if(!te||!sn.call(te,pt))return!1;te=te[pt]}return!0},Be.prototype.set=function($,te){for(var Oe=this.value,pt=0;pt<$.length-1;pt++){var At=$[pt];sn.call(Oe,At)||(Oe[At]={}),Oe=Oe[At]}return Oe[$[pt]]=te,te},Be.prototype.map=function($){return et(this.value,$,!0)},Be.prototype.forEach=function($){return this.value=et(this.value,$,!1),this.value},Be.prototype.reduce=function($,te){var Oe=arguments.length===1,pt=Oe?this.value:te;return this.forEach((function(At){this.isRoot&&Oe||(pt=$.call(this,pt,At))})),pt},Be.prototype.paths=function(){var $=[];return this.forEach((function(te){$.push(this.path)})),$},Be.prototype.nodes=function(){var $=[];return this.forEach((function(te){$.push(this.node)})),$},Be.prototype.clone=function(){var $=[],te=[];return(function Oe(pt){for(var At=0;At<$.length;At++)if($[At]===pt)return te[At];if(typeof pt=="object"&&pt!==null){var xt=Lt(pt);return $.push(pt),te.push(xt),kr(lr(pt),(function($t){xt[$t]=Oe(pt[$t])})),$.pop(),te.pop(),xt}return pt})(this.value)};var lr=Object.keys||function($){var te=[];for(var Oe in $)te.push(Oe);return te};function qt($){return Object.prototype.toString.call($)}var zr=Array.isArray||function($){return Object.prototype.toString.call($)==="[object Array]"},kr=function($,te){if($.forEach)return $.forEach(te);for(var Oe=0;Oe<$.length;Oe++)te($[Oe],Oe,$)};kr(lr(Be.prototype),(function($){de[$]=function(te){var Oe=[].slice.call(arguments,1),pt=new Be(te);return pt[$].apply(pt,Oe)}}));var sn=Object.hasOwnProperty||function($,te){return te in $},xn=ne.exports,yr=Vr;function Vr($){if(!(this instanceof Vr))return new Vr($);this._bbox=$||[1/0,1/0,-1/0,-1/0],this._valid=!!$}Vr.prototype.include=function($){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],$[0]),this._bbox[1]=Math.min(this._bbox[1],$[1]),this._bbox[2]=Math.max(this._bbox[2],$[0]),this._bbox[3]=Math.max(this._bbox[3],$[1]),this},Vr.prototype.equals=function($){var te;return te=$ instanceof Vr?$.bbox():$,this._bbox[0]==te[0]&&this._bbox[1]==te[1]&&this._bbox[2]==te[2]&&this._bbox[3]==te[3]},Vr.prototype.center=function($){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Vr.prototype.union=function($){var te;return this._valid=!0,te=$ instanceof Vr?$.bbox():$,this._bbox[0]=Math.min(this._bbox[0],te[0]),this._bbox[1]=Math.min(this._bbox[1],te[1]),this._bbox[2]=Math.max(this._bbox[2],te[2]),this._bbox[3]=Math.max(this._bbox[3],te[3]),this},Vr.prototype.bbox=function(){return this._valid?this._bbox:null},Vr.prototype.contains=function($){if(!$)return this._fastContains();if(!this._valid)return null;var te=$[0],Oe=$[1];return this._bbox[0]<=te&&this._bbox[1]<=Oe&&this._bbox[2]>=te&&this._bbox[3]>=Oe},Vr.prototype.intersect=function($){return this._valid?(te=$ instanceof Vr?$.bbox():$,!(this._bbox[0]>te[2]||this._bbox[2]<te[0]||this._bbox[3]<te[1]||this._bbox[1]>te[3])):null;var te},Vr.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var $="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",$)},Vr.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Kr=function($){if(!$)return[];var te=ot(Ye($)),Oe=[];return te.features.forEach((function(pt){pt.geometry&&(Oe=Oe.concat(jt(pt.geometry.coordinates)))})),Oe},An=xn,Ni=yr,Mi={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},mn=Object.keys(Mi);function Pi($){for(var te=Ni(),Oe=Kr($),pt=0;pt<Oe.length;pt++)te.include(Oe[pt]);return te}Ct.exports=function($){return Pi($).bbox()},Ct.exports.polygon=function($){return Pi($).polygon()},Ct.exports.bboxify=function($){return An($).map((function(te){te&&mn.some((function(Oe){return!!te[Oe]&&Mi[Oe].indexOf(te.type)!==-1}))&&(te.bbox=Pi(te).bbox(),this.update(te))}))};var Ri=n(Ct.exports),ni=-90;function Ji($,te){var Oe=ni,pt=90,At=ni,xt=90,$t=270,Ir=-270;$.forEach((function(Xr){var Zr=Ri(Xr),Nr=Zr[1],wn=Zr[3],ln=Zr[0],Rn=Zr[2];Nr>Oe&&(Oe=Nr),wn<pt&&(pt=wn),wn>At&&(At=wn),Nr<xt&&(xt=Nr),ln<$t&&($t=ln),Rn>Ir&&(Ir=Rn)}));var Br=te;return Oe+Br.lat>85&&(Br.lat=85-Oe),At+Br.lat>90&&(Br.lat=90-At),pt+Br.lat<-85&&(Br.lat=-85-pt),xt+Br.lat<ni&&(Br.lat=ni-xt),$t+Br.lng<=-270&&(Br.lng+=360*Math.ceil(Math.abs(Br.lng)/360)),Ir+Br.lng>=270&&(Br.lng-=360*Math.ceil(Math.abs(Br.lng)/360)),Br}function Eo($,te){var Oe=Ji($.map((function(pt){return pt.toGeoJSON()})),te);$.forEach((function(pt){var At,xt=pt.getCoordinates(),$t=function(Br){var Xr={lng:Br[0]+Oe.lng,lat:Br[1]+Oe.lat};return[Xr.lng,Xr.lat]},Ir=function(Br){return Br.map((function(Xr){return $t(Xr)}))};pt.type===T.POINT?At=$t(xt):pt.type===T.LINE_STRING||pt.type===T.MULTI_POINT?At=xt.map($t):pt.type===T.POLYGON||pt.type===T.MULTI_LINE_STRING?At=xt.map(Ir):pt.type===T.MULTI_POLYGON&&(At=xt.map((function(Br){return Br.map((function(Xr){return Ir(Xr)}))}))),pt.incomingCoords(At)}))}var $n={onSetup:function($){var te=this,Oe={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:$.featureIds||[]};return this.setSelected(Oe.initiallySelectedFeatureIds.filter((function(pt){return te.getFeature(pt)!==void 0}))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Oe},fireUpdate:function(){this.map.fire(k.UPDATE,{action:N.MOVE,features:this.getSelected().map((function($){return $.toGeoJSON()}))})},fireActionable:function(){var $=this,te=this.getSelected(),Oe=te.filter((function(Ir){return $.isInstanceOf("MultiFeature",Ir)})),pt=!1;if(te.length>1){pt=!0;var At=te[0].type.replace("Multi","");te.forEach((function(Ir){Ir.type.replace("Multi","")!==At&&(pt=!1)}))}var xt=Oe.length>0,$t=te.length>0;this.setActionableState({combineFeatures:pt,uncombineFeatures:xt,trash:$t})},getUniqueIds:function($){return $.length?$.map((function(te){return te.properties.id})).filter((function(te){return te!==void 0})).reduce((function(te,Oe){return te.add(Oe),te}),new G).values():[]},stopExtendedInteractions:function($){$.boxSelectElement&&($.boxSelectElement.parentNode&&$.boxSelectElement.parentNode.removeChild($.boxSelectElement),$.boxSelectElement=null),this.map.dragPan.enable(),$.boxSelecting=!1,$.canBoxSelect=!1,$.dragMoving=!1,$.canDragMove=!1},onStop:function(){zt.enable(this)},onMouseMove:function($,te){return Rr(te)&&$.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions($),!0},onMouseOut:function($){return!$.dragMoving||this.fireUpdate()}};$n.onTap=$n.onClick=function($,te){return xr(te)?this.clickAnywhere($,te):Yt(F.VERTEX)(te)?this.clickOnVertex($,te):Rr(te)?this.clickOnFeature($,te):void 0},$n.clickAnywhere=function($){var te=this,Oe=this.getSelectedIds();Oe.length&&(this.clearSelectedFeatures(),Oe.forEach((function(pt){return te.doRender(pt)}))),zt.enable(this),this.stopExtendedInteractions($)},$n.clickOnVertex=function($,te){this.changeMode(R.DIRECT_SELECT,{featureId:te.featureTarget.properties.parent,coordPath:te.featureTarget.properties.coord_path,startPos:te.lngLat}),this.updateUIClasses({mouse:x.MOVE})},$n.startOnActiveFeature=function($,te){this.stopExtendedInteractions($),this.map.dragPan.disable(),this.doRender(te.featureTarget.properties.id),$.canDragMove=!0,$.dragMoveLocation=te.lngLat},$n.clickOnFeature=function($,te){var Oe=this;zt.disable(this),this.stopExtendedInteractions($);var pt=fr(te),At=this.getSelectedIds(),xt=te.featureTarget.properties.id,$t=this.isSelected(xt);if(!pt&&$t&&this.getFeature(xt).type!==T.POINT)return this.changeMode(R.DIRECT_SELECT,{featureId:xt});$t&&pt?(this.deselect(xt),this.updateUIClasses({mouse:x.POINTER}),At.length===1&&zt.enable(this)):!$t&&pt?(this.select(xt),this.updateUIClasses({mouse:x.MOVE})):$t||pt||(At.forEach((function(Ir){return Oe.doRender(Ir)})),this.setSelected(xt),this.updateUIClasses({mouse:x.MOVE})),this.doRender(xt)},$n.onMouseDown=function($,te){return ur(te)?this.startOnActiveFeature($,te):this.drawConfig.boxSelect&&Wt(te)?this.startBoxSelect($,te):void 0},$n.startBoxSelect=function($,te){this.stopExtendedInteractions($),this.map.dragPan.disable(),$.boxSelectStartLocation=_t(te.originalEvent,this.map.getContainer()),$.canBoxSelect=!0},$n.onTouchStart=function($,te){if(ur(te))return this.startOnActiveFeature($,te)},$n.onDrag=function($,te){return $.canDragMove?this.dragMove($,te):this.drawConfig.boxSelect&&$.canBoxSelect?this.whileBoxSelect($,te):void 0},$n.whileBoxSelect=function($,te){$.boxSelecting=!0,this.updateUIClasses({mouse:x.ADD}),$.boxSelectElement||($.boxSelectElement=document.createElement("div"),$.boxSelectElement.classList.add(v.BOX_SELECT),this.map.getContainer().appendChild($.boxSelectElement));var Oe=_t(te.originalEvent,this.map.getContainer()),pt=Math.min($.boxSelectStartLocation.x,Oe.x),At=Math.max($.boxSelectStartLocation.x,Oe.x),xt=Math.min($.boxSelectStartLocation.y,Oe.y),$t=Math.max($.boxSelectStartLocation.y,Oe.y),Ir="translate("+pt+"px, "+xt+"px)";$.boxSelectElement.style.transform=Ir,$.boxSelectElement.style.WebkitTransform=Ir,$.boxSelectElement.style.width=At-pt+"px",$.boxSelectElement.style.height=$t-xt+"px"},$n.dragMove=function($,te){$.dragMoving=!0,te.originalEvent.stopPropagation();var Oe={lng:te.lngLat.lng-$.dragMoveLocation.lng,lat:te.lngLat.lat-$.dragMoveLocation.lat};Eo(this.getSelected(),Oe),$.dragMoveLocation=te.lngLat},$n.onTouchEnd=$n.onMouseUp=function($,te){var Oe=this;if($.dragMoving)this.fireUpdate();else if($.boxSelecting){var pt=[$.boxSelectStartLocation,_t(te.originalEvent,this.map.getContainer())],At=this.featuresAt(null,pt,"click"),xt=this.getUniqueIds(At).filter((function($t){return!Oe.isSelected($t)}));xt.length&&(this.select(xt),xt.forEach((function($t){return Oe.doRender($t)})),this.updateUIClasses({mouse:x.MOVE}))}this.stopExtendedInteractions($)},$n.toDisplayFeatures=function($,te,Oe){te.properties.active=this.isSelected(te.properties.id)?D.ACTIVE:D.INACTIVE,Oe(te),this.fireActionable(),te.properties.active===D.ACTIVE&&te.geometry.type!==T.POINT&&Kt(te).forEach(Oe)},$n.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},$n.onCombineFeatures=function(){var $=this.getSelected();if(!($.length===0||$.length<2)){for(var te=[],Oe=[],pt=$[0].type.replace("Multi",""),At=0;At<$.length;At++){var xt=$[At];if(xt.type.replace("Multi","")!==pt)return;xt.type.includes("Multi")?xt.getCoordinates().forEach((function(Ir){te.push(Ir)})):te.push(xt.getCoordinates()),Oe.push(xt.toGeoJSON())}if(Oe.length>1){var $t=this.newFeature({type:T.FEATURE,properties:Oe[0].properties,geometry:{type:"Multi"+pt,coordinates:te}});this.addFeature($t),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([$t.id]),this.map.fire(k.COMBINE_FEATURES,{createdFeatures:[$t.toGeoJSON()],deletedFeatures:Oe})}this.fireActionable()}},$n.onUncombineFeatures=function(){var $=this,te=this.getSelected();if(te.length!==0){for(var Oe=[],pt=[],At=function($t){var Ir=te[$t];$.isInstanceOf("MultiFeature",Ir)&&(Ir.getFeatures().forEach((function(Br){$.addFeature(Br),Br.properties=Ir.properties,Oe.push(Br.toGeoJSON()),$.select([Br.id])})),$.deleteFeature(Ir.id,{silent:!0}),pt.push(Ir.toGeoJSON()))},xt=0;xt<te.length;xt++)At(xt);Oe.length>1&&this.map.fire(k.UNCOMBINE_FEATURES,{createdFeatures:Oe,deletedFeatures:pt}),this.fireActionable()}};var qn=Yt(F.VERTEX),mi=Yt(F.MIDPOINT),Hn={fireUpdate:function(){this.map.fire(k.UPDATE,{action:N.CHANGE_COORDINATES,features:this.getSelected().map((function($){return $.toGeoJSON()}))})},fireActionable:function($){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:$.selectedCoordPaths.length>0})},startDragging:function($,te){this.map.dragPan.disable(),$.canDragMove=!0,$.dragMoveLocation=te.lngLat},stopDragging:function($){this.map.dragPan.enable(),$.dragMoving=!1,$.canDragMove=!1,$.dragMoveLocation=null},onVertex:function($,te){this.startDragging($,te);var Oe=te.featureTarget.properties,pt=$.selectedCoordPaths.indexOf(Oe.coord_path);fr(te)||pt!==-1?fr(te)&&pt===-1&&$.selectedCoordPaths.push(Oe.coord_path):$.selectedCoordPaths=[Oe.coord_path];var At=this.pathsToCoordinates($.featureId,$.selectedCoordPaths);this.setSelectedCoordinates(At)},onMidpoint:function($,te){this.startDragging($,te);var Oe=te.featureTarget.properties;$.feature.addCoordinate(Oe.coord_path,Oe.lng,Oe.lat),this.fireUpdate(),$.selectedCoordPaths=[Oe.coord_path]},pathsToCoordinates:function($,te){return te.map((function(Oe){return{feature_id:$,coord_path:Oe}}))},onFeature:function($,te){$.selectedCoordPaths.length===0?this.startDragging($,te):this.stopDragging($)},dragFeature:function($,te,Oe){Eo(this.getSelected(),Oe),$.dragMoveLocation=te.lngLat},dragVertex:function($,te,Oe){for(var pt=$.selectedCoordPaths.map((function(Ir){return $.feature.getCoordinate(Ir)})),At=Ji(pt.map((function(Ir){return{type:T.FEATURE,properties:{},geometry:{type:T.POINT,coordinates:Ir}}})),Oe),xt=0;xt<pt.length;xt++){var $t=pt[xt];$.feature.updateCoordinate($.selectedCoordPaths[xt],$t[0]+At.lng,$t[1]+At.lat)}},clickNoTarget:function(){this.changeMode(R.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(R.SIMPLE_SELECT)},clickActiveFeature:function($){$.selectedCoordPaths=[],this.clearSelectedCoordinates(),$.feature.changed()},onSetup:function($){var te=$.featureId,Oe=this.getFeature(te);if(!Oe)throw new Error("You must provide a featureId to enter direct_select mode");if(Oe.type===T.POINT)throw new TypeError("direct_select mode doesn't handle point features");var pt={featureId:te,feature:Oe,dragMoveLocation:$.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:$.coordPath?[$.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(te,pt.selectedCoordPaths)),this.setSelected(te),zt.disable(this),this.setActionableState({trash:!0}),pt},onStop:function(){zt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function($,te,Oe){$.featureId===te.properties.id?(te.properties.active=D.ACTIVE,Oe(te),Kt(te,{map:this.map,midpoints:!0,selectedPaths:$.selectedCoordPaths}).forEach(Oe)):(te.properties.active=D.INACTIVE,Oe(te)),this.fireActionable($)},onTrash:function($){$.selectedCoordPaths.sort((function(te,Oe){return Oe.localeCompare(te,"en",{numeric:!0})})).forEach((function(te){return $.feature.removeCoordinate(te)})),this.fireUpdate(),$.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable($),$.feature.isValid()===!1&&(this.deleteFeature([$.featureId]),this.changeMode(R.SIMPLE_SELECT,{}))},onMouseMove:function($,te){var Oe=ur(te),pt=qn(te),At=mi(te),xt=$.selectedCoordPaths.length===0;return Oe&&xt||pt&&!xt?this.updateUIClasses({mouse:x.MOVE}):this.updateUIClasses({mouse:x.NONE}),(pt||Oe||At)&&$.dragMoving&&this.fireUpdate(),this.stopDragging($),!0},onMouseOut:function($){return $.dragMoving&&this.fireUpdate(),!0}};Hn.onTouchStart=Hn.onMouseDown=function($,te){return qn(te)?this.onVertex($,te):ur(te)?this.onFeature($,te):mi(te)?this.onMidpoint($,te):void 0},Hn.onDrag=function($,te){if($.canDragMove===!0){$.dragMoving=!0,te.originalEvent.stopPropagation();var Oe={lng:te.lngLat.lng-$.dragMoveLocation.lng,lat:te.lngLat.lat-$.dragMoveLocation.lat};$.selectedCoordPaths.length>0?this.dragVertex($,te,Oe):this.dragFeature($,te,Oe),$.dragMoveLocation=te.lngLat}},Hn.onClick=function($,te){return xr(te)?this.clickNoTarget($,te):ur(te)?this.clickActiveFeature($,te):br(te)?this.clickInactive($,te):void this.stopDragging($)},Hn.onTap=function($,te){return xr(te)?this.clickNoTarget($,te):ur(te)?this.clickActiveFeature($,te):br(te)?this.clickInactive($,te):void 0},Hn.onTouchEnd=Hn.onMouseUp=function($){$.dragMoving&&this.fireUpdate(),this.stopDragging($)};var da={};function Ti($,te){return!!$.lngLat&&$.lngLat.lng===te[0]&&$.lngLat.lat===te[1]}da.onSetup=function(){var $=this.newFeature({type:T.FEATURE,properties:{},geometry:{type:T.POINT,coordinates:[]}});return this.addFeature($),this.clearSelectedFeatures(),this.updateUIClasses({mouse:x.ADD}),this.activateUIButton(P.POINT),this.setActionableState({trash:!0}),{point:$}},da.stopDrawingAndRemove=function($){this.deleteFeature([$.point.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)},da.onTap=da.onClick=function($,te){this.updateUIClasses({mouse:x.MOVE}),$.point.updateCoordinate("",te.lngLat.lng,te.lngLat.lat),this.map.fire(k.CREATE,{features:[$.point.toGeoJSON()]}),this.changeMode(R.SIMPLE_SELECT,{featureIds:[$.point.id]})},da.onStop=function($){this.activateUIButton(),$.point.getCoordinate().length||this.deleteFeature([$.point.id],{silent:!0})},da.toDisplayFeatures=function($,te,Oe){var pt=te.properties.id===$.point.id;if(te.properties.active=pt?D.ACTIVE:D.INACTIVE,!pt)return Oe(te)},da.onTrash=da.stopDrawingAndRemove,da.onKeyUp=function($,te){if(bt(te)||ve(te))return this.stopDrawingAndRemove($,te)};var Ha={onSetup:function(){var $=this.newFeature({type:T.FEATURE,properties:{},geometry:{type:T.POLYGON,coordinates:[[]]}});return this.addFeature($),this.clearSelectedFeatures(),zt.disable(this),this.updateUIClasses({mouse:x.ADD}),this.activateUIButton(P.POLYGON),this.setActionableState({trash:!0}),{polygon:$,currentVertexPosition:0}},clickAnywhere:function($,te){if($.currentVertexPosition>0&&Ti(te,$.polygon.coordinates[0][$.currentVertexPosition-1]))return this.changeMode(R.SIMPLE_SELECT,{featureIds:[$.polygon.id]});this.updateUIClasses({mouse:x.ADD}),$.polygon.updateCoordinate("0."+$.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),$.currentVertexPosition++,$.polygon.updateCoordinate("0."+$.currentVertexPosition,te.lngLat.lng,te.lngLat.lat)},clickOnVertex:function($){return this.changeMode(R.SIMPLE_SELECT,{featureIds:[$.polygon.id]})},onMouseMove:function($,te){$.polygon.updateCoordinate("0."+$.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),wr(te)&&this.updateUIClasses({mouse:x.POINTER})}};Ha.onTap=Ha.onClick=function($,te){return wr(te)?this.clickOnVertex($,te):this.clickAnywhere($,te)},Ha.onKeyUp=function($,te){bt(te)?(this.deleteFeature([$.polygon.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)):ve(te)&&this.changeMode(R.SIMPLE_SELECT,{featureIds:[$.polygon.id]})},Ha.onStop=function($){this.updateUIClasses({mouse:x.NONE}),zt.enable(this),this.activateUIButton(),this.getFeature($.polygon.id)!==void 0&&($.polygon.removeCoordinate("0."+$.currentVertexPosition),$.polygon.isValid()?this.map.fire(k.CREATE,{features:[$.polygon.toGeoJSON()]}):(this.deleteFeature([$.polygon.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT,{},{silent:!0})))},Ha.toDisplayFeatures=function($,te,Oe){var pt=te.properties.id===$.polygon.id;if(te.properties.active=pt?D.ACTIVE:D.INACTIVE,!pt)return Oe(te);if(te.geometry.coordinates.length!==0){var At=te.geometry.coordinates[0].length;if(!(At<3)){if(te.properties.meta=F.FEATURE,Oe(Mt($.polygon.id,te.geometry.coordinates[0][0],"0.0",!1)),At>3){var xt=te.geometry.coordinates[0].length-3;Oe(Mt($.polygon.id,te.geometry.coordinates[0][xt],"0."+xt,!1))}if(At<=4){var $t=[[te.geometry.coordinates[0][0][0],te.geometry.coordinates[0][0][1]],[te.geometry.coordinates[0][1][0],te.geometry.coordinates[0][1][1]]];if(Oe({type:T.FEATURE,properties:te.properties,geometry:{coordinates:$t,type:T.LINE_STRING}}),At===3)return}return Oe(te)}}},Ha.onTrash=function($){this.deleteFeature([$.polygon.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)};var _a={onSetup:function($){var te,Oe,pt=($=$||{}).featureId,At="forward";if(pt){if(!(te=this.getFeature(pt)))throw new Error("Could not find a feature with the provided featureId");var xt=$.from;if(xt&&xt.type==="Feature"&&xt.geometry&&xt.geometry.type==="Point"&&(xt=xt.geometry),xt&&xt.type==="Point"&&xt.coordinates&&xt.coordinates.length===2&&(xt=xt.coordinates),!xt||!Array.isArray(xt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var $t=te.coordinates.length-1;if(te.coordinates[$t][0]===xt[0]&&te.coordinates[$t][1]===xt[1])Oe=$t+1,te.addCoordinate.apply(te,[Oe].concat(te.coordinates[$t]));else{if(te.coordinates[0][0]!==xt[0]||te.coordinates[0][1]!==xt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");At="backwards",Oe=0,te.addCoordinate.apply(te,[Oe].concat(te.coordinates[0]))}}else te=this.newFeature({type:T.FEATURE,properties:{},geometry:{type:T.LINE_STRING,coordinates:[]}}),Oe=0,this.addFeature(te);return this.clearSelectedFeatures(),zt.disable(this),this.updateUIClasses({mouse:x.ADD}),this.activateUIButton(P.LINE),this.setActionableState({trash:!0}),{line:te,currentVertexPosition:Oe,direction:At}},clickAnywhere:function($,te){if($.currentVertexPosition>0&&Ti(te,$.line.coordinates[$.currentVertexPosition-1])||$.direction==="backwards"&&Ti(te,$.line.coordinates[$.currentVertexPosition+1]))return this.changeMode(R.SIMPLE_SELECT,{featureIds:[$.line.id]});this.updateUIClasses({mouse:x.ADD}),$.line.updateCoordinate($.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),$.direction==="forward"?($.currentVertexPosition++,$.line.updateCoordinate($.currentVertexPosition,te.lngLat.lng,te.lngLat.lat)):$.line.addCoordinate(0,te.lngLat.lng,te.lngLat.lat)},clickOnVertex:function($){return this.changeMode(R.SIMPLE_SELECT,{featureIds:[$.line.id]})},onMouseMove:function($,te){$.line.updateCoordinate($.currentVertexPosition,te.lngLat.lng,te.lngLat.lat),wr(te)&&this.updateUIClasses({mouse:x.POINTER})}};_a.onTap=_a.onClick=function($,te){if(wr(te))return this.clickOnVertex($,te);this.clickAnywhere($,te)},_a.onKeyUp=function($,te){ve(te)?this.changeMode(R.SIMPLE_SELECT,{featureIds:[$.line.id]}):bt(te)&&(this.deleteFeature([$.line.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT))},_a.onStop=function($){zt.enable(this),this.activateUIButton(),this.getFeature($.line.id)!==void 0&&($.line.removeCoordinate(""+$.currentVertexPosition),$.line.isValid()?this.map.fire(k.CREATE,{features:[$.line.toGeoJSON()]}):(this.deleteFeature([$.line.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT,{},{silent:!0})))},_a.onTrash=function($){this.deleteFeature([$.line.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)},_a.toDisplayFeatures=function($,te,Oe){var pt=te.properties.id===$.line.id;if(te.properties.active=pt?D.ACTIVE:D.INACTIVE,!pt)return Oe(te);te.geometry.coordinates.length<2||(te.properties.meta=F.FEATURE,Oe(Mt($.line.id,te.geometry.coordinates[$.direction==="forward"?te.geometry.coordinates.length-2:1],""+($.direction==="forward"?te.geometry.coordinates.length-2:1),!1)),Oe(te))};var ts={simple_select:$n,direct_select:Hn,draw_point:da,draw_polygon:Ha,draw_line_string:_a},xa={defaultMode:R.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Ft,modes:ts,controls:{},userProperties:!1},nc={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},ic={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Co($,te){return $.map((function(Oe){return Oe.source?Oe:qe(Oe,{id:Oe.id+"."+te,source:te==="hot"?w.HOT:w.COLD})}))}var Hs={exports:{}};(function($,te){var Oe="__lodash_hash_undefined__",pt=9007199254740991,At="[object Arguments]",xt="[object Array]",$t="[object Boolean]",Ir="[object Date]",Br="[object Error]",Xr="[object Function]",Zr="[object Map]",Nr="[object Number]",wn="[object Object]",ln="[object Promise]",Rn="[object RegExp]",un="[object Set]",Sr="[object String]",Jr="[object Symbol]",Dn="[object WeakMap]",li="[object ArrayBuffer]",jn="[object DataView]",gi=/^\[object .+?Constructor\]$/,Bu=/^(?:0|[1-9]\d*)$/,dn={};dn["[object Float32Array]"]=dn["[object Float64Array]"]=dn["[object Int8Array]"]=dn["[object Int16Array]"]=dn["[object Int32Array]"]=dn["[object Uint8Array]"]=dn["[object Uint8ClampedArray]"]=dn["[object Uint16Array]"]=dn["[object Uint32Array]"]=!0,dn[At]=dn[xt]=dn[li]=dn[$t]=dn[jn]=dn[Ir]=dn[Br]=dn[Xr]=dn[Zr]=dn[Nr]=dn[wn]=dn[Rn]=dn[un]=dn[Sr]=dn[Dn]=!1;var Ta=typeof Vh=="object"&&Vh&&Vh.Object===Object&&Vh,On=typeof self=="object"&&self&&self.Object===Object&&self,Sn=Ta||On||Function("return this")(),ns=te&&!te.nodeType&&te,bn=ns&&$&&!$.nodeType&&$,Ws=bn&&bn.exports===ns,Sa=Ws&&Ta.process,Ms=(function(){try{return Sa&&Sa.binding&&Sa.binding("util")}catch{}})(),Na=Ms&&Ms.isTypedArray;function vl(Ut,Zt){for(var Wr=-1,en=Ut==null?0:Ut.length;++Wr<en;)if(Zt(Ut[Wr],Wr,Ut))return!0;return!1}function zo(Ut){var Zt=-1,Wr=Array(Ut.size);return Ut.forEach((function(en,ai){Wr[++Zt]=[ai,en]})),Wr}function lu(Ut){var Zt=-1,Wr=Array(Ut.size);return Ut.forEach((function(en){Wr[++Zt]=en})),Wr}var uu,ys,Zs,Ao=Array.prototype,Oi=Function.prototype,Wa=Object.prototype,K=Sn["__core-js_shared__"],Te=Oi.toString,Qe=Wa.hasOwnProperty,Rt=(uu=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+uu:"",Ht=Wa.toString,_r=RegExp("^"+Te.call(Qe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dr=Ws?Sn.Buffer:void 0,rn=Sn.Symbol,pn=Sn.Uint8Array,Nn=Wa.propertyIsEnumerable,Wn=Ao.splice,kn=rn?rn.toStringTag:void 0,Fi=Object.getOwnPropertySymbols,Ai=Dr?Dr.isBuffer:void 0,Yn=(ys=Object.keys,Zs=Object,function(Ut){return ys(Zs(Ut))}),ia=Ia(Sn,"DataView"),qi=Ia(Sn,"Map"),ta=Ia(Sn,"Promise"),is=Ia(Sn,"Set"),Ks=Ia(Sn,"WeakMap"),cu=Ia(Object,"create"),$c=no(ia),fu=no(qi),$o=no(ta),Nl=no(is),bl=no(Ks),as=rn?rn.prototype:void 0,pa=as?as.valueOf:void 0;function Za(Ut){var Zt=-1,Wr=Ut==null?0:Ut.length;for(this.clear();++Zt<Wr;){var en=Ut[Zt];this.set(en[0],en[1])}}function Gi(Ut){var Zt=-1,Wr=Ut==null?0:Ut.length;for(this.clear();++Zt<Wr;){var en=Ut[Zt];this.set(en[0],en[1])}}function vs(Ut){var Zt=-1,Wr=Ut==null?0:Ut.length;for(this.clear();++Zt<Wr;){var en=Ut[Zt];this.set(en[0],en[1])}}function Xs(Ut){var Zt=-1,Wr=Ut==null?0:Ut.length;for(this.__data__=new vs;++Zt<Wr;)this.add(Ut[Zt])}function Hi(Ut){var Zt=this.__data__=new Gi(Ut);this.size=Zt.size}function Fl(Ut,Zt){var Wr=Rs(Ut),en=!Wr&&aa(Ut),ai=!Wr&&!en&&_s(Ut),gn=!Wr&&!en&&!ai&&jl(Ut),Fn=Wr||en||ai||gn,Jn=Fn?(function(Wi,ja){for(var os=-1,ho=Array(Wi);++os<Wi;)ho[os]=ja(os);return ho})(Ut.length,String):[],wi=Jn.length;for(var Si in Ut)!Qe.call(Ut,Si)||Fn&&(Si=="length"||ai&&(Si=="offset"||Si=="parent")||gn&&(Si=="buffer"||Si=="byteLength"||Si=="byteOffset")||Qs(Si,wi))||Jn.push(Si);return Jn}function Ys(Ut,Zt){for(var Wr=Ut.length;Wr--;)if(el(Ut[Wr][0],Zt))return Wr;return-1}function bs(Ut){return Ut==null?Ut===void 0?"[object Undefined]":"[object Null]":kn&&kn in Object(Ut)?(function(Zt){var Wr=Qe.call(Zt,kn),en=Zt[kn];try{Zt[kn]=void 0;var ai=!0}catch{}var gn=Ht.call(Zt);return ai&&(Wr?Zt[kn]=en:delete Zt[kn]),gn})(Ut):(function(Zt){return Ht.call(Zt)})(Ut)}function Ea(Ut){return Os(Ut)&&bs(Ut)==At}function Ka(Ut,Zt,Wr,en,ai){return Ut===Zt||(Ut==null||Zt==null||!Os(Ut)&&!Os(Zt)?Ut!=Ut&&Zt!=Zt:(function(gn,Fn,Jn,wi,Si,Wi){var ja=Rs(gn),os=Rs(Fn),ho=ja?xt:Ba(gn),tl=os?xt:Ba(Fn),$l=(ho=ho==At?wn:ho)==wn,oc=(tl=tl==At?wn:tl)==wn,ql=ho==tl;if(ql&&_s(gn)){if(!_s(Fn))return!1;ja=!0,$l=!1}if(ql&&!$l)return Wi||(Wi=new Hi),ja||jl(gn)?_l(gn,Fn,Jn,wi,Si,Wi):(function(yi,vi,rl,oa,lc,Uo,xs){switch(rl){case jn:if(yi.byteLength!=vi.byteLength||yi.byteOffset!=vi.byteOffset)return!1;yi=yi.buffer,vi=vi.buffer;case li:return!(yi.byteLength!=vi.byteLength||!Uo(new pn(yi),new pn(vi)));case $t:case Ir:case Nr:return el(+yi,+vi);case Br:return yi.name==vi.name&&yi.message==vi.message;case Rn:case Sr:return yi==vi+"";case Zr:var Po=zo;case un:var wl=1&oa;if(Po||(Po=lu),yi.size!=vi.size&&!wl)return!1;var Ul=xs.get(yi);if(Ul)return Ul==vi;oa|=2,xs.set(yi,vi);var ks=_l(Po(yi),Po(vi),oa,lc,Uo,xs);return xs.delete(yi),ks;case Jr:if(pa)return pa.call(yi)==pa.call(vi)}return!1})(gn,Fn,ho,Jn,wi,Si,Wi);if(!(1&Jn)){var xl=$l&&Qe.call(gn,"__wrapped__"),zu=oc&&Qe.call(Fn,"__wrapped__");if(xl||zu){var sc=xl?gn.value():gn,qc=zu?Fn.value():Fn;return Wi||(Wi=new Hi),Si(sc,qc,Jn,wi,Wi)}}return ql?(Wi||(Wi=new Hi),(function(yi,vi,rl,oa,lc,Uo){var xs=1&rl,Po=Js(yi),wl=Po.length,Ul=Js(vi).length;if(wl!=Ul&&!xs)return!1;for(var ks=wl;ks--;){var ss=Po[ks];if(!(xs?ss in vi:Qe.call(vi,ss)))return!1}var uc=Uo.get(yi);if(uc&&Uo.get(vi))return uc==vi;var ws=!0;Uo.set(yi,vi),Uo.set(vi,yi);for(var Ma=xs;++ks<wl;){var io=yi[ss=Po[ks]],Sl=vi[ss];if(oa)var zn=xs?oa(Sl,io,ss,vi,yi,Uo):oa(io,Sl,ss,yi,vi,Uo);if(!(zn===void 0?io===Sl||lc(io,Sl,rl,oa,Uo):zn)){ws=!1;break}Ma||(Ma=ss=="constructor")}if(ws&&!Ma){var Ls=yi.constructor,Vl=vi.constructor;Ls==Vl||!("constructor"in yi)||!("constructor"in vi)||typeof Ls=="function"&&Ls instanceof Ls&&typeof Vl=="function"&&Vl instanceof Vl||(ws=!1)}return Uo.delete(yi),Uo.delete(vi),ws})(gn,Fn,Jn,wi,Si,Wi)):!1})(Ut,Zt,Wr,en,Ka,ai))}function ac(Ut){return!(!du(Ut)||(function(Zt){return!!Rt&&Rt in Zt})(Ut))&&(qo(Ut)?_r:gi).test(no(Ut))}function ju(Ut){if(Wr=(Zt=Ut)&&Zt.constructor,en=typeof Wr=="function"&&Wr.prototype||Wa,Zt!==en)return Yn(Ut);var Zt,Wr,en,ai=[];for(var gn in Object(Ut))Qe.call(Ut,gn)&&gn!="constructor"&&ai.push(gn);return ai}function _l(Ut,Zt,Wr,en,ai,gn){var Fn=1&Wr,Jn=Ut.length,wi=Zt.length;if(Jn!=wi&&!(Fn&&wi>Jn))return!1;var Si=gn.get(Ut);if(Si&&gn.get(Zt))return Si==Zt;var Wi=-1,ja=!0,os=2&Wr?new Xs:void 0;for(gn.set(Ut,Zt),gn.set(Zt,Ut);++Wi<Jn;){var ho=Ut[Wi],tl=Zt[Wi];if(en)var $l=Fn?en(tl,ho,Wi,Zt,Ut,gn):en(ho,tl,Wi,Ut,Zt,gn);if($l!==void 0){if($l)continue;ja=!1;break}if(os){if(!vl(Zt,(function(oc,ql){if(xl=ql,!os.has(xl)&&(ho===oc||ai(ho,oc,Wr,en,gn)))return os.push(ql);var xl}))){ja=!1;break}}else if(ho!==tl&&!ai(ho,tl,Wr,en,gn)){ja=!1;break}}return gn.delete(Ut),gn.delete(Zt),ja}function Js(Ut){return(function(Zt,Wr,en){var ai=Wr(Zt);return Rs(Zt)?ai:(function(gn,Fn){for(var Jn=-1,wi=Fn.length,Si=gn.length;++Jn<wi;)gn[Si+Jn]=Fn[Jn];return gn})(ai,en(Zt))})(Ut,zl,Bl)}function Fa(Ut,Zt){var Wr,en,ai=Ut.__data__;return((en=typeof(Wr=Zt))=="string"||en=="number"||en=="symbol"||en=="boolean"?Wr!=="__proto__":Wr===null)?ai[typeof Zt=="string"?"string":"hash"]:ai.map}function Ia(Ut,Zt){var Wr=(function(en,ai){return en?.[ai]})(Ut,Zt);return ac(Wr)?Wr:void 0}Za.prototype.clear=function(){this.__data__=cu?cu(null):{},this.size=0},Za.prototype.delete=function(Ut){var Zt=this.has(Ut)&&delete this.__data__[Ut];return this.size-=Zt?1:0,Zt},Za.prototype.get=function(Ut){var Zt=this.__data__;if(cu){var Wr=Zt[Ut];return Wr===Oe?void 0:Wr}return Qe.call(Zt,Ut)?Zt[Ut]:void 0},Za.prototype.has=function(Ut){var Zt=this.__data__;return cu?Zt[Ut]!==void 0:Qe.call(Zt,Ut)},Za.prototype.set=function(Ut,Zt){var Wr=this.__data__;return this.size+=this.has(Ut)?0:1,Wr[Ut]=cu&&Zt===void 0?Oe:Zt,this},Gi.prototype.clear=function(){this.__data__=[],this.size=0},Gi.prototype.delete=function(Ut){var Zt=this.__data__,Wr=Ys(Zt,Ut);return!(Wr<0)&&(Wr==Zt.length-1?Zt.pop():Wn.call(Zt,Wr,1),--this.size,!0)},Gi.prototype.get=function(Ut){var Zt=this.__data__,Wr=Ys(Zt,Ut);return Wr<0?void 0:Zt[Wr][1]},Gi.prototype.has=function(Ut){return Ys(this.__data__,Ut)>-1},Gi.prototype.set=function(Ut,Zt){var Wr=this.__data__,en=Ys(Wr,Ut);return en<0?(++this.size,Wr.push([Ut,Zt])):Wr[en][1]=Zt,this},vs.prototype.clear=function(){this.size=0,this.__data__={hash:new Za,map:new(qi||Gi),string:new Za}},vs.prototype.delete=function(Ut){var Zt=Fa(this,Ut).delete(Ut);return this.size-=Zt?1:0,Zt},vs.prototype.get=function(Ut){return Fa(this,Ut).get(Ut)},vs.prototype.has=function(Ut){return Fa(this,Ut).has(Ut)},vs.prototype.set=function(Ut,Zt){var Wr=Fa(this,Ut),en=Wr.size;return Wr.set(Ut,Zt),this.size+=Wr.size==en?0:1,this},Xs.prototype.add=Xs.prototype.push=function(Ut){return this.__data__.set(Ut,Oe),this},Xs.prototype.has=function(Ut){return this.__data__.has(Ut)},Hi.prototype.clear=function(){this.__data__=new Gi,this.size=0},Hi.prototype.delete=function(Ut){var Zt=this.__data__,Wr=Zt.delete(Ut);return this.size=Zt.size,Wr},Hi.prototype.get=function(Ut){return this.__data__.get(Ut)},Hi.prototype.has=function(Ut){return this.__data__.has(Ut)},Hi.prototype.set=function(Ut,Zt){var Wr=this.__data__;if(Wr instanceof Gi){var en=Wr.__data__;if(!qi||en.length<199)return en.push([Ut,Zt]),this.size=++Wr.size,this;Wr=this.__data__=new vs(en)}return Wr.set(Ut,Zt),this.size=Wr.size,this};var Bl=Fi?function(Ut){return Ut==null?[]:(Ut=Object(Ut),(function(Zt,Wr){for(var en=-1,ai=Zt==null?0:Zt.length,gn=0,Fn=[];++en<ai;){var Jn=Zt[en];Wr(Jn,en,Zt)&&(Fn[gn++]=Jn)}return Fn})(Fi(Ut),(function(Zt){return Nn.call(Ut,Zt)})))}:function(){return[]},Ba=bs;function Qs(Ut,Zt){return!!(Zt=Zt??pt)&&(typeof Ut=="number"||Bu.test(Ut))&&Ut>-1&&Ut%1==0&&Ut<Zt}function no(Ut){if(Ut!=null){try{return Te.call(Ut)}catch{}try{return Ut+""}catch{}}return""}function el(Ut,Zt){return Ut===Zt||Ut!=Ut&&Zt!=Zt}(ia&&Ba(new ia(new ArrayBuffer(1)))!=jn||qi&&Ba(new qi)!=Zr||ta&&Ba(ta.resolve())!=ln||is&&Ba(new is)!=un||Ks&&Ba(new Ks)!=Dn)&&(Ba=function(Ut){var Zt=bs(Ut),Wr=Zt==wn?Ut.constructor:void 0,en=Wr?no(Wr):"";if(en)switch(en){case $c:return jn;case fu:return Zr;case $o:return ln;case Nl:return un;case bl:return Dn}return Zt});var aa=Ea((function(){return arguments})())?Ea:function(Ut){return Os(Ut)&&Qe.call(Ut,"callee")&&!Nn.call(Ut,"callee")},Rs=Array.isArray,_s=Ai||function(){return!1};function qo(Ut){if(!du(Ut))return!1;var Zt=bs(Ut);return Zt==Xr||Zt=="[object GeneratorFunction]"||Zt=="[object AsyncFunction]"||Zt=="[object Proxy]"}function hu(Ut){return typeof Ut=="number"&&Ut>-1&&Ut%1==0&&Ut<=pt}function du(Ut){var Zt=typeof Ut;return Ut!=null&&(Zt=="object"||Zt=="function")}function Os(Ut){return Ut!=null&&typeof Ut=="object"}var jl=Na?(function(Ut){return function(Zt){return Ut(Zt)}})(Na):function(Ut){return Os(Ut)&&hu(Ut.length)&&!!dn[bs(Ut)]};function zl(Ut){return(Zt=Ut)!=null&&hu(Zt.length)&&!qo(Zt)?Fl(Ut):ju(Ut);var Zt}$.exports=function(Ut,Zt){return Ka(Ut,Zt)}})(Hs,Hs.exports);var rs=n(Hs.exports);function gs($,te){return $.length===te.length&&JSON.stringify($.map((function(Oe){return Oe})).sort())===JSON.stringify(te.map((function(Oe){return Oe})).sort())}var wa={Polygon:$e,LineString:ke,Point:Pe,MultiPolygon:mt,MultiLineString:mt,MultiPoint:mt},Fu=Object.freeze({__proto__:null,CommonSelectors:xe,constrainFeatureMovement:Ji,createMidPoint:Pt,createSupplementaryPoints:Kt,createVertex:Mt,doubleClickZoom:zt,euclideanDistance:Ce,featuresAt:se,getFeatureAtAndSetCursors:me,isClick:pe,isEventAtCoordinates:Ti,isTap:Ee,mapEventToBoundingBox:H,ModeHandler:r,moveFeatures:Eo,sortFeatures:le,stringSetsAreEqual:gs,StringSet:G,theme:Ft,toDenseArray:gt}),Ll=function($,te){var Oe={options:$=(function(At){At===void 0&&(At={});var xt=qe(At);return At.controls||(xt.controls={}),At.displayControlsDefault===!1?xt.controls=qe(ic,At.controls):xt.controls=qe(nc,At.controls),(xt=qe(xa,xt)).styles=Co(xt.styles,"cold").concat(Co(xt.styles,"hot")),xt})($)};te=(function(At,xt){return xt.modes=R,xt.getFeatureIdsAt=function($t){return se.click({point:$t},null,At).map((function(Ir){return Ir.properties.id}))},xt.getSelectedIds=function(){return At.store.getSelectedIds()},xt.getSelected=function(){return{type:T.FEATURE_COLLECTION,features:At.store.getSelectedIds().map((function($t){return At.store.get($t)})).map((function($t){return $t.toGeoJSON()}))}},xt.getSelectedPoints=function(){return{type:T.FEATURE_COLLECTION,features:At.store.getSelectedCoordinates().map((function($t){return{type:T.FEATURE,properties:{},geometry:{type:T.POINT,coordinates:$t.coordinates}}}))}},xt.set=function($t){if($t.type===void 0||$t.type!==T.FEATURE_COLLECTION||!Array.isArray($t.features))throw new Error("Invalid FeatureCollection");var Ir=At.store.createRenderBatch(),Br=At.store.getAllIds().slice(),Xr=xt.add($t),Zr=new G(Xr);return(Br=Br.filter((function(Nr){return!Zr.has(Nr)}))).length&&xt.delete(Br),Ir(),Xr},xt.add=function($t){var Ir=JSON.parse(JSON.stringify(Pr($t))).features.map((function(Br){if(Br.id=Br.id||fe(),Br.geometry===null)throw new Error("Invalid geometry: null");if(At.store.get(Br.id)===void 0||At.store.get(Br.id).type!==Br.geometry.type){var Xr=wa[Br.geometry.type];if(Xr===void 0)throw new Error("Invalid geometry type: "+Br.geometry.type+".");var Zr=new Xr(At,Br);At.store.add(Zr)}else{var Nr=At.store.get(Br.id);Nr.properties=Br.properties,rs(Nr.properties,Br.properties)||At.store.featureChanged(Nr.id),rs(Nr.getCoordinates(),Br.geometry.coordinates)||Nr.incomingCoords(Br.geometry.coordinates)}return Br.id}));return At.store.render(),Ir},xt.get=function($t){var Ir=At.store.get($t);if(Ir)return Ir.toGeoJSON()},xt.getAll=function(){return{type:T.FEATURE_COLLECTION,features:At.store.getAll().map((function($t){return $t.toGeoJSON()}))}},xt.delete=function($t){return At.store.delete($t,{silent:!0}),xt.getMode()!==R.DIRECT_SELECT||At.store.getSelectedIds().length?At.store.render():At.events.changeMode(R.SIMPLE_SELECT,void 0,{silent:!0}),xt},xt.deleteAll=function(){return At.store.delete(At.store.getAllIds(),{silent:!0}),xt.getMode()===R.DIRECT_SELECT?At.events.changeMode(R.SIMPLE_SELECT,void 0,{silent:!0}):At.store.render(),xt},xt.changeMode=function($t,Ir){return Ir===void 0&&(Ir={}),$t===R.SIMPLE_SELECT&&xt.getMode()===R.SIMPLE_SELECT?(gs(Ir.featureIds||[],At.store.getSelectedIds())||(At.store.setSelected(Ir.featureIds,{silent:!0}),At.store.render()),xt):($t===R.DIRECT_SELECT&&xt.getMode()===R.DIRECT_SELECT&&Ir.featureId===At.store.getSelectedIds()[0]||At.events.changeMode($t,Ir,{silent:!0}),xt)},xt.getMode=function(){return At.events.getMode()},xt.trash=function(){return At.events.trash({silent:!0}),xt},xt.combineFeatures=function(){return At.events.combineFeatures({silent:!0}),xt},xt.uncombineFeatures=function(){return At.events.uncombineFeatures({silent:!0}),xt},xt.setFeatureProperty=function($t,Ir,Br){return At.store.setFeatureProperty($t,Ir,Br),xt},xt})(Oe,te),Oe.api=te;var pt=ct(Oe);return te.onAdd=pt.onAdd,te.onRemove=pt.onRemove,te.types=P,te.options=$,te};function Dl($){Ll($,this)}return Dl.modes=ts,Dl.constants=Z,Dl.lib=Fu,Dl}))})(T_)),T_.exports}var que=$ue();const CD=qs(que);function Uue(){const e=Du(r=>r.breakpoints.down("md"));return[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.3}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#009EE0","fill-outline-color":"#009EE0","fill-opacity":.2}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":3}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-width":4}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#009EE0","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":e?5:4,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?8:6,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":e?7:5,"circle-color":"#ffffff","circle-stroke-color":"#009EE0","circle-stroke-width":1}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?10:9,"circle-opacity":1,"circle-color":"#009EE0"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":e?7.5:6.5,"circle-color":"#009EE0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":e?11:10,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":e?8.5:7.5,"circle-color":"#009EE0"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":e?8.5:6.5,"circle-color":"#404040"}}]}const Vue=e=>{const t=I.useRef(null),r=P0({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),n=I.useRef(!1),[i,o]=I.useState(!1),[u,a]=I.useState(),p=Uue(),h=I.useCallback(m=>{console.log("MlFeatureEditor mode change to "+m.mode),typeof e.onFinish=="function"&&m.mode==="simple_select"&&e.onFinish()},[e.onFinish]);return I.useEffect(()=>{r.map&&!n.current&&(n.current=!0,r.map.map.style&&r.map.map.getSource("mapbox-gl-draw-cold")&&t.current&&t.current?.remove(),t.current=new CD({displayControlsDefault:!1,defaultMode:e.mode||"simple_select",modes:Object.assign({},CD.modes),userProperties:!0,styles:p}),r.map.addControl(t.current,"top-left",r.componentId),r.map.on("draw.modechange",h,r.componentId),o(!0))},[r.map,e,n,h]),I.useEffect(()=>{if(!r.map||!i)return;const m=()=>{if(t.current){const v=t.current.getAll?.();a(v?.features),typeof e.onChange=="function"&&e.onChange(v?.features)}};return r.map.on("mouseup",m),r.map.on("touchend",m),()=>{r.map&&(r.map.map.off("mouseup",m),r.map.map.off("touchend",m))}},[i,r.map]),I.useEffect(()=>{t.current&&e.geojson?.geometry&&t.current.set({type:"FeatureCollection",features:[e.geojson]})},[e.geojson,i]),I.useEffect(()=>{e.mode&&t.current&&t.current?.getMode?.()!==e.mode&&(t.current?.changeMode?.(e.mode),e.mode!=="simple_select"&&e.mode!=="direct_select"&&t.current.set({type:"FeatureCollection",features:[]}))},[e.mode,r.map]),{feature:u,drawToolsReady:i,draw:t.current}},I_=e=>(Vue({mode:e.mode,geojson:e.geojson,onChange:e.onChange,onFinish:e.onFinish,mapId:e.mapId}),ze.jsx(ze.Fragment,{}));I_.__docgenInfo={description:"",methods:[],displayName:"MlFeatureEditor",props:{mapId:{required:!1,tsType:{name:"string"},description:"Id of the target MapLibre instance in mapContext"},insertBeforeLayer:{required:!1,tsType:{name:"string"},description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.`},geojson:{required:!1,tsType:{name:"Feature"},description:"Input GeoJson data at initialization"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(para: Feature[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"Feature"}],raw:"Feature[]"},name:"para"}],return:{name:"void"}}},description:`Callback function that is called each time the GeoJson data has changed within MlFeatureEditor.
First parameter is the new GeoJson feature.`},onFinish:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:`Callback function that is called each time the GeoJson data within has been finished within MlFeatureEditor.
First parameter is the new GeoJson feature.`},mode:{required:!1,tsType:{name:"MapboxDraw.Modes"},description:`Feature editor modes:
- draw_line_string
- draw_polygon
- draw_point
- simple_select
- direct_select`}}};const AD=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background"];function Gue(e){return typeof e.options.source=="string"?{source:e.options.source}:e.geojson&&(!e.options?.source||typeof e?.options?.source!="string"&&e.options?.source?.attribution&&!e.options?.source?.type)?{source:{type:"geojson",data:e.geojson||"",attribution:typeof e?.options?.source!="string"&&e.options.source?.attribution?e.options.source?.attribution:""}}:{}}function Hue(e,t){if(e?.insertBeforeLayer)return e.insertBeforeLayer;if(e?.insertBeforeFirstSymbolLayer)return t?.map?.firstSymbolLayer}function iT(e){const t=P0({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=I.useRef(""),n=I.useRef(""),i=I.useRef(""),[o,u]=I.useState(),a=I.useRef(e.layerId||(e.idPrefix?e.idPrefix:"Layer-")+t.componentId),p=I.useCallback(()=>{if(!t.map||t?.map.cancelled||(t.map.map.getLayer(a.current)&&t.cleanup(),typeof e?.options?.source!="string"&&t.map.map.getSource(a.current)&&t.map.map.removeSource(a.current),typeof e.options.source=="string"&&(e.options.source===""||!t.map.map.getSource(e.options.source)))||typeof e?.options?.source!="string"&&!e.geojson&&!e?.options?.source?.data&&e?.options?.type!=="background"||typeof e.options.type>"u")return;try{t.map.addLayer({...e.options,...Gue(e),id:a.current},Hue(e,t),t.componentId)}catch(v){console.error("Failed to add layer:",v)}u(()=>t.map?.map.getLayer(a.current));const h=()=>{t.map?.map.getLayer(a.current)||p()};t.map.on("styledata",h,t.componentId);const m=(v,w,{source_id:x})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===x&&p()};t.map.wrapper.on("addsource",m,t.componentId),n.current=JSON.stringify(e.options?.paint),i.current=JSON.stringify(e.options?.layout),r.current=e.options.type},[e,t]);return I.useEffect(()=>{t.map&&(!e.geojson&&!e.options.source&&e?.options?.type!=="background"||t.map?.cancelled===!1&&t?.map?.map?.getLayer?.(a.current)&&(AD.indexOf(e.options.type)===-1||AD.indexOf(e.options.type)!==-1&&e.options.type===r.current)||p())},[t.map,t.mapIsReady,e,p]),I.useEffect(()=>{t.map?.cancelled===!0||!t.map?.map?.getSource?.(a.current)||t.map.map.getSource(a.current)?.setData?.(e.geojson)},[e.geojson,t.map,e.options.type]),I.useEffect(()=>{if(t.map?.cancelled===!0||!t.map||!t.map?.map?.getLayer?.(a.current)||e.options.type!==r.current)return;let h;const m=JSON.stringify(e.options.layout);if(e.options.layout&&m!==i.current){const w=JSON.parse(i.current);for(h in e.options.layout)e.options.layout?.[h]&&e.options.layout[h]!==w[h]&&t.map.map.setLayoutProperty(a.current,h,e.options.layout[h]);i.current=m}const v=JSON.stringify(e.options.paint);if(v!==n.current){const w=JSON.parse(n.current);for(h in e.options.paint)e.options.paint?.[h]&&e.options.paint[h]!==w[h]&&t.map.map.setPaintProperty(a.current,h,e.options.paint[h]);n.current=v}},[e.options,t.map]),I.useEffect(()=>{!e.insertBeforeLayer||!t.map||!t.map.getLayer(e.insertBeforeLayer)||!t.map.getLayer(a.current)||t.map.moveLayer(a.current,e.insertBeforeLayer)},[t.map,e.insertBeforeLayer]),I.useEffect(()=>()=>{t.cleanup()},[]),I.useEffect(()=>{if(typeof e?.options?.source!="string"||!t.map)return;const h=()=>{typeof e?.options?.source=="string"&&t?.map?.getSource?.(e.options.source)&&!t.map.getLayer(a.current)&&p()};t.map.on("sourcedataloading",h);const m=(v,w,{source_id:x})=>{t.map&&typeof e?.options?.source=="string"&&e.options.source===x&&p()};return t.map.wrapper.on("addsource",m),()=>{t?.map&&(t.map.off("sourcedataloading",h),t.map.wrapper.off("addsource",m))}},[t.map,e.options?.source]),I.useEffect(()=>{if(!e.onClick||!t?.map||!t?.map?.getLayer?.(a.current))return;const h=e.onClick;return t.map?.on("click",a.current,h),()=>{h&&t?.map&&t.map?.off("click",a.current,h)}},[t.map,e.onClick]),I.useEffect(()=>{if(!e.onHover||!t?.map||!t?.map?.getLayer?.(a.current))return;const h=e.onHover;return t.map?.on("mousemove",a.current,h),()=>{h&&t?.map&&t.map?.off("mousemove",a.current,h)}},[t.map,e.onHover]),I.useEffect(()=>{if(!e.onLeave||!t?.map||!t?.map?.getLayer?.(a.current))return;const h=e.onLeave;return t.map?.on("mouseleave",a.current,h),()=>{h&&t?.map&&t.map?.off("mouseleave",a.current,h)}},[t.map,e.onLeave]),{map:t.map,layer:o,layerId:a.current,componentId:t.componentId,mapHook:t}}iT.defaultProps={};const Wue=(e,t)=>{switch(e){case"fill":return t?.fill?t.fill:{"fill-color":"#009EE0","fill-outline-color":"#009EE0"};case"line":return t?.line?(console.log(t.line),t.line):{"line-color":"#009EE0","line-width":4,"line-blur":0};case"circle":return t?.circle?t.circle:{"circle-color":"#009EE0","circle-stroke-color":"#fff","circle-stroke-width":2,"circle-radius":5};default:return{}}},PD={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},Jq=e=>e?.type==="Feature"?PD?.[e?.geometry?.type]?PD[e.geometry.type]:"circle":e?.type==="FeatureCollection"?e.features.length?Jq(e.features[0]):"circle":"fill";function Zue(e){const t=P0({mapId:e.mapId}),[r,n]=I.useState(),i=I.useRef(e.sourceId||(e.idPrefix?e.idPrefix:"Source-")+t.componentId),o=I.useCallback(()=>{if(t.map&&t.map?.style?._layers){for(const[a,p]of Object.entries(t.map.style._layers))p.source===i.current&&t.map.removeLayer(a);t.map.getSource(i.current)&&t.map.removeSource(i.current)}},[t.map]),u=I.useCallback(()=>{t.map&&(e.source.type==="geojson"&&!e.source.data||(t.map.map.getSource(i.current)&&o(),t.map?.addSource(i.current,{...e.source}),n(t.map.map.getSource(i.current))))},[e,t,o]);return I.useEffect(()=>{t.map?.map?.getSource(i.current)&&t.map.map.getSource(i.current)?.setData?.(e.source.data)},[e.source?.data]),I.useEffect(()=>{t?.map?.map?.getSource?.(e.sourceId)&&e.sourceId===i.current||(i.current=e.sourceId,u())},[t.map,e,u]),I.useEffect(()=>{if(!t.map)return;const a=()=>{t?.map?.getSource?.(e.sourceId)||u()};return t.map.on("styledata",a),()=>{t?.map&&t.map.off("styledata",a)}},[t.map,u]),I.useEffect(()=>()=>{o()},[o]),{map:t.map,source:r,componentId:t.componentId,mapHook:t}}const Ev=e=>{const t=e.type||Jq(e.geojson),r=I.useRef(e.layerId||"MlGeoJsonLayer-"+Jv()),n=`label-${r.current}`;return I.useEffect(()=>{e.layerId?r.current=e.layerId:r.current="MlGeoJsonLayer-"+Jv()},[e.layerId]),Zue({mapId:e.mapId,sourceId:"source-"+r.current,source:{type:"geojson",data:e.geojson,...typeof e?.options?.source<"u"&&typeof e?.options?.source!="string"?e.options.source:{}}}),iT({mapId:e.mapId,layerId:r.current,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},paint:{...e.paint||Wue(t,e.defaultPaintOverrides),...e?.options?.paint},layout:{...e?.layout||{},...e?.options?.layout},type:t},insertBeforeLayer:e.insertBeforeLayer,onHover:e.onHover,onClick:e.onClick,onLeave:e.onLeave}),iT({mapId:e.mapId,options:{...typeof e?.options?.source<"u"&&typeof e?.options?.source=="string"?{source:e.options.source}:{source:"source-"+r.current},id:n,type:"symbol",maxzoom:24,minzoom:1,...e?.labelOptions?e.labelOptions:{},...e?.options?.filter?{filter:e.options.filter}:{},layout:{"text-font":["Open Sans Regular"],"text-field":`{${e.labelProp}}`,"text-size":12,"text-anchor":"top",...e?.labelOptions?.layout?e.labelOptions.layout:{},visibility:e?.layout?.visibility??e?.options?.layout?.visibility??"visible"},paint:{"text-halo-width":1,"text-halo-color":"#fefefe","text-color":"#121212",...e?.labelOptions?.paint?e.labelOptions.paint:{}}}}),ze.jsx(ze.Fragment,{})};Ev.__docgenInfo={description:`Adds source and layer to display GeoJSON data on the map.

@component`,methods:[],displayName:"MlGeoJsonLayer",props:{mapId:{required:!1,tsType:{name:"string"},description:"Id of the target MapLibre instance in mapContext"},insertBeforeLayer:{required:!1,tsType:{name:"string"},description:`Id of an existing layer in the mapLibre instance to help specify the layer order
This layer will be visually beneath the layer with the "insertBeforeLayer" id.
This layer will not be added to the maplibre-gl instance until a layer with an
id that matches the value of insertBeforeLayer is created.`},layerId:{required:!1,tsType:{name:"string"},description:"Id of the new layer and source that are added to the MapLibre instance"},geojson:{required:!1,tsType:{name:"union",raw:"Feature | FeatureCollection | undefined",elements:[{name:"Feature"},{name:"FeatureCollection"},{name:"undefined"}]},description:"GeoJSON data that is supposed to be rendered by this component."},type:{required:!1,tsType:{name:"Exclude",elements:[{name:"LayerSpecification['type']",raw:"LayerSpecification['type']"},{name:"RasterLayerSpecification['type']",raw:"RasterLayerSpecification['type']"}],raw:"Exclude<LayerSpecification['type'], RasterLayerSpecification['type']>"},description:`Type of the layer that will be added to the MapLibre instance.
All types from LayerSpecification union type are supported except the type from
RasterLayerSpecification`},paint:{required:!1,tsType:{name:"Exclude",elements:[{name:"LayerSpecification['paint']",raw:"LayerSpecification['paint']"},{name:"RasterLayerSpecification['paint']",raw:"RasterLayerSpecification['paint']"}],raw:"Exclude<LayerSpecification['paint'], RasterLayerSpecification['paint']>"},description:`@deprecated The property should not be used. Please use the options.paint property instead. This will be removed in the next major release.
Paint property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All paint types from LayerSpecification union type are supported except the paint type from
RasterLayerSpecification`},layout:{required:!1,tsType:{name:"LayerSpecification['layout']",raw:"LayerSpecification['layout']"},description:`@deprecated The property should not be used. Please use the options.layout property instead. This will be removed in the next major release.
Layout property object, that is passed to the addLayer call.
Possible props depend on the layer type.
See https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/
Some examples are:
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle
https://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill
All layout types from LayerSpecification union type are supported except the layout type from
RasterLayerSpecification`},options:{required:!1,tsType:{name:"useLayerProps['options']",raw:"useLayerProps['options']"},description:"Javascript object that is spread into the addLayer commands first parameter."},defaultPaintOverrides:{required:!1,tsType:{name:"signature",type:"object",raw:`{
	circle?: CircleLayerSpecification['paint'];
	fill?: FillLayerSpecification['paint'];
	line?: LineLayerSpecification['paint'];
}`,signature:{properties:[{key:"circle",value:{name:"CircleLayerSpecification['paint']",raw:"CircleLayerSpecification['paint']",required:!1}},{key:"fill",value:{name:"FillLayerSpecification['paint']",raw:"FillLayerSpecification['paint']",required:!1}},{key:"line",value:{name:"LineLayerSpecification['paint']",raw:"LineLayerSpecification['paint']",required:!1}}]}},description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.'},labelProp:{required:!1,tsType:{name:"string"},description:"Property name in the GeoJSON object to be used as a label."},labelOptions:{required:!1,tsType:{name:"useLayerProps['options']",raw:"useLayerProps['options']"},description:"Label configuration options."},onHover:{required:!1,tsType:{name:"useLayerProps['onHover']",raw:"useLayerProps['onHover']"},description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered."},onClick:{required:!1,tsType:{name:"useLayerProps['onClick']",raw:"useLayerProps['onClick']"},description:"Click event handler that is executed whenever a geometry rendered by this component is clicked."},onLeave:{required:!1,tsType:{name:"useLayerProps['onLeave']",raw:"useLayerProps['onLeave']"},description:`Leave event handler that is executed whenever a geometry rendered by this component is
left/unhovered.`}}};nr(M0)({marginTop:"15px"});const Qq=Ci(ze.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Kue=Ci(ze.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}));_p(EI)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});_p(R0)({minWidth:"30px"});_p(Bo)({marginRight:"0px",padding:"0px"});_p(z9)({padding:0,marginRight:"5px"});_p(NJ)(({open:e})=>({display:e?"block":"none"}));_p(M0)({marginLeft:"50px"});var Zl={},hm={},c5,TD;function eU(){if(TD)return c5;TD=1;var e=typeof Vh=="object"&&Vh&&Vh.Object===Object&&Vh;return c5=e,c5}var f5,ID;function Ef(){if(ID)return f5;ID=1;var e=eU(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return f5=r,f5}var h5,MD;function Cg(){if(MD)return h5;MD=1;var e=Ef(),t=e.Symbol;return h5=t,h5}var d5,RD;function Xue(){if(RD)return d5;RD=1;var e=Cg(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function o(u){var a=r.call(u,i),p=u[i];try{u[i]=void 0;var h=!0}catch{}var m=n.call(u);return h&&(a?u[i]=p:delete u[i]),m}return d5=o,d5}var p5,OD;function Yue(){if(OD)return p5;OD=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return p5=r,p5}var m5,kD;function Ep(){if(kD)return m5;kD=1;var e=Cg(),t=Xue(),r=Yue(),n="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function u(a){return a==null?a===void 0?i:n:o&&o in Object(a)?t(a):r(a)}return m5=u,m5}var g5,LD;function Nu(){if(LD)return g5;LD=1;var e=Array.isArray;return g5=e,g5}var y5,DD;function Cf(){if(DD)return y5;DD=1;function e(t){return t!=null&&typeof t=="object"}return y5=e,y5}var v5,ND;function Jue(){if(ND)return v5;ND=1;var e=Ep(),t=Nu(),r=Cf(),n="[object String]";function i(o){return typeof o=="string"||!t(o)&&r(o)&&e(o)==n}return v5=i,v5}var b5,FD;function Que(){if(FD)return b5;FD=1;function e(t){return function(r,n,i){for(var o=-1,u=Object(r),a=i(r),p=a.length;p--;){var h=a[t?p:++o];if(n(u[h],h,u)===!1)break}return r}}return b5=e,b5}var _5,BD;function tU(){if(BD)return _5;BD=1;var e=Que(),t=e();return _5=t,_5}var x5,jD;function ece(){if(jD)return x5;jD=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return x5=e,x5}var w5,zD;function tce(){if(zD)return w5;zD=1;var e=Ep(),t=Cf(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return w5=n,w5}var S5,$D;function qx(){if($D)return S5;$D=1;var e=tce(),t=Cf(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(u){return t(u)&&n.call(u,"callee")&&!i.call(u,"callee")};return S5=o,S5}var iv={exports:{}},E5,qD;function rce(){if(qD)return E5;qD=1;function e(){return!1}return E5=e,E5}iv.exports;var UD;function Ux(){return UD||(UD=1,(function(e,t){var r=Ef(),n=rce(),i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,u=o&&o.exports===i,a=u?r.Buffer:void 0,p=a?a.isBuffer:void 0,h=p||n;e.exports=h})(iv,iv.exports)),iv.exports}var C5,VD;function Ag(){if(VD)return C5;VD=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var o=typeof n;return i=i??e,!!i&&(o=="number"||o!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return C5=r,C5}var A5,GD;function FI(){if(GD)return A5;GD=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return A5=t,A5}var P5,HD;function nce(){if(HD)return P5;HD=1;var e=Ep(),t=FI(),r=Cf(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",u="[object Date]",a="[object Error]",p="[object Function]",h="[object Map]",m="[object Number]",v="[object Object]",w="[object RegExp]",x="[object Set]",P="[object String]",T="[object WeakMap]",R="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",F="[object Float64Array]",D="[object Int8Array]",U="[object Int16Array]",B="[object Int32Array]",Z="[object Uint8Array]",J="[object Uint8ClampedArray]",X="[object Uint16Array]",le="[object Uint32Array]",H={};H[N]=H[F]=H[D]=H[U]=H[B]=H[Z]=H[J]=H[X]=H[le]=!0,H[n]=H[i]=H[R]=H[o]=H[k]=H[u]=H[a]=H[p]=H[h]=H[m]=H[v]=H[w]=H[x]=H[P]=H[T]=!1;function G(ae){return r(ae)&&t(ae.length)&&!!H[e(ae)]}return P5=G,P5}var T5,WD;function BI(){if(WD)return T5;WD=1;function e(t){return function(r){return t(r)}}return T5=e,T5}var av={exports:{}};av.exports;var ZD;function jI(){return ZD||(ZD=1,(function(e,t){var r=eU(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,u=o&&r.process,a=(function(){try{var p=i&&i.require&&i.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}})();e.exports=a})(av,av.exports)),av.exports}var I5,KD;function zI(){if(KD)return I5;KD=1;var e=nce(),t=BI(),r=jI(),n=r&&r.isTypedArray,i=n?t(n):e;return I5=i,I5}var M5,XD;function rU(){if(XD)return M5;XD=1;var e=ece(),t=qx(),r=Nu(),n=Ux(),i=Ag(),o=zI(),u=Object.prototype,a=u.hasOwnProperty;function p(h,m){var v=r(h),w=!v&&t(h),x=!v&&!w&&n(h),P=!v&&!w&&!x&&o(h),T=v||w||x||P,R=T?e(h.length,String):[],k=R.length;for(var N in h)(m||a.call(h,N))&&!(T&&(N=="length"||x&&(N=="offset"||N=="parent")||P&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,k)))&&R.push(N);return R}return M5=p,M5}var R5,YD;function $I(){if(YD)return R5;YD=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return R5=t,R5}var O5,JD;function nU(){if(JD)return O5;JD=1;function e(t,r){return function(n){return t(r(n))}}return O5=e,O5}var k5,QD;function ice(){if(QD)return k5;QD=1;var e=nU(),t=e(Object.keys,Object);return k5=t,k5}var L5,e6;function ace(){if(e6)return L5;e6=1;var e=$I(),t=ice(),r=Object.prototype,n=r.hasOwnProperty;function i(o){if(!e(o))return t(o);var u=[];for(var a in Object(o))n.call(o,a)&&a!="constructor"&&u.push(a);return u}return L5=i,L5}var D5,t6;function Af(){if(t6)return D5;t6=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return D5=e,D5}var N5,r6;function qI(){if(r6)return N5;r6=1;var e=Ep(),t=Af(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function u(a){if(!t(a))return!1;var p=e(a);return p==n||p==i||p==r||p==o}return N5=u,N5}var F5,n6;function Pg(){if(n6)return F5;n6=1;var e=qI(),t=FI();function r(n){return n!=null&&t(n.length)&&!e(n)}return F5=r,F5}var B5,i6;function k0(){if(i6)return B5;i6=1;var e=rU(),t=ace(),r=Pg();function n(i){return r(i)?e(i):t(i)}return B5=n,B5}var j5,a6;function iU(){if(a6)return j5;a6=1;var e=tU(),t=k0();function r(n,i){return n&&e(n,i,t)}return j5=r,j5}var z5,o6;function Vx(){if(o6)return z5;o6=1;function e(t){return t}return z5=e,z5}var $5,s6;function oce(){if(s6)return $5;s6=1;var e=Vx();function t(r){return typeof r=="function"?r:e}return $5=t,$5}var q5,l6;function UI(){if(l6)return q5;l6=1;var e=iU(),t=oce();function r(n,i){return n&&e(n,t(i))}return q5=r,q5}var U5,u6;function VI(){if(u6)return U5;u6=1;var e=nU(),t=e(Object.getPrototypeOf,Object);return U5=t,U5}var V5,c6;function aU(){if(c6)return V5;c6=1;var e=Ep(),t=VI(),r=Cf(),n="[object Object]",i=Function.prototype,o=Object.prototype,u=i.toString,a=o.hasOwnProperty,p=u.call(Object);function h(m){if(!r(m)||e(m)!=n)return!1;var v=t(m);if(v===null)return!0;var w=a.call(v,"constructor")&&v.constructor;return typeof w=="function"&&w instanceof w&&u.call(w)==p}return V5=h,V5}var G5,f6;function GI(){if(f6)return G5;f6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=r(t[n],n,t);return o}return G5=e,G5}var H5,h6;function sce(){if(h6)return H5;h6=1;function e(){this.__data__=[],this.size=0}return H5=e,H5}var W5,d6;function Tg(){if(d6)return W5;d6=1;function e(t,r){return t===r||t!==t&&r!==r}return W5=e,W5}var Z5,p6;function Gx(){if(p6)return Z5;p6=1;var e=Tg();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return Z5=t,Z5}var K5,m6;function lce(){if(m6)return K5;m6=1;var e=Gx(),t=Array.prototype,r=t.splice;function n(i){var o=this.__data__,u=e(o,i);if(u<0)return!1;var a=o.length-1;return u==a?o.pop():r.call(o,u,1),--this.size,!0}return K5=n,K5}var X5,g6;function uce(){if(g6)return X5;g6=1;var e=Gx();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return X5=t,X5}var Y5,y6;function cce(){if(y6)return Y5;y6=1;var e=Gx();function t(r){return e(this.__data__,r)>-1}return Y5=t,Y5}var J5,v6;function fce(){if(v6)return J5;v6=1;var e=Gx();function t(r,n){var i=this.__data__,o=e(i,r);return o<0?(++this.size,i.push([r,n])):i[o][1]=n,this}return J5=t,J5}var Q5,b6;function Hx(){if(b6)return Q5;b6=1;var e=sce(),t=lce(),r=uce(),n=cce(),i=fce();function o(u){var a=-1,p=u==null?0:u.length;for(this.clear();++a<p;){var h=u[a];this.set(h[0],h[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,Q5=o,Q5}var eS,_6;function hce(){if(_6)return eS;_6=1;var e=Hx();function t(){this.__data__=new e,this.size=0}return eS=t,eS}var tS,x6;function dce(){if(x6)return tS;x6=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return tS=e,tS}var rS,w6;function pce(){if(w6)return rS;w6=1;function e(t){return this.__data__.get(t)}return rS=e,rS}var nS,S6;function mce(){if(S6)return nS;S6=1;function e(t){return this.__data__.has(t)}return nS=e,nS}var iS,E6;function gce(){if(E6)return iS;E6=1;var e=Ef(),t=e["__core-js_shared__"];return iS=t,iS}var aS,C6;function yce(){if(C6)return aS;C6=1;var e=gce(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return aS=r,aS}var oS,A6;function oU(){if(A6)return oS;A6=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return oS=r,oS}var sS,P6;function vce(){if(P6)return sS;P6=1;var e=qI(),t=yce(),r=Af(),n=oU(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,u=Function.prototype,a=Object.prototype,p=u.toString,h=a.hasOwnProperty,m=RegExp("^"+p.call(h).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function v(w){if(!r(w)||t(w))return!1;var x=e(w)?m:o;return x.test(n(w))}return sS=v,sS}var lS,T6;function bce(){if(T6)return lS;T6=1;function e(t,r){return t?.[r]}return lS=e,lS}var uS,I6;function Cp(){if(I6)return uS;I6=1;var e=vce(),t=bce();function r(n,i){var o=t(n,i);return e(o)?o:void 0}return uS=r,uS}var cS,M6;function HI(){if(M6)return cS;M6=1;var e=Cp(),t=Ef(),r=e(t,"Map");return cS=r,cS}var fS,R6;function Wx(){if(R6)return fS;R6=1;var e=Cp(),t=e(Object,"create");return fS=t,fS}var hS,O6;function _ce(){if(O6)return hS;O6=1;var e=Wx();function t(){this.__data__=e?e(null):{},this.size=0}return hS=t,hS}var dS,k6;function xce(){if(k6)return dS;k6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return dS=e,dS}var pS,L6;function wce(){if(L6)return pS;L6=1;var e=Wx(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(o){var u=this.__data__;if(e){var a=u[o];return a===t?void 0:a}return n.call(u,o)?u[o]:void 0}return pS=i,pS}var mS,D6;function Sce(){if(D6)return mS;D6=1;var e=Wx(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var o=this.__data__;return e?o[i]!==void 0:r.call(o,i)}return mS=n,mS}var gS,N6;function Ece(){if(N6)return gS;N6=1;var e=Wx(),t="__lodash_hash_undefined__";function r(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=e&&i===void 0?t:i,this}return gS=r,gS}var yS,F6;function Cce(){if(F6)return yS;F6=1;var e=_ce(),t=xce(),r=wce(),n=Sce(),i=Ece();function o(u){var a=-1,p=u==null?0:u.length;for(this.clear();++a<p;){var h=u[a];this.set(h[0],h[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,yS=o,yS}var vS,B6;function Ace(){if(B6)return vS;B6=1;var e=Cce(),t=Hx(),r=HI();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return vS=n,vS}var bS,j6;function Pce(){if(j6)return bS;j6=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return bS=e,bS}var _S,z6;function Zx(){if(z6)return _S;z6=1;var e=Pce();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return _S=t,_S}var xS,$6;function Tce(){if($6)return xS;$6=1;var e=Zx();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return xS=t,xS}var wS,q6;function Ice(){if(q6)return wS;q6=1;var e=Zx();function t(r){return e(this,r).get(r)}return wS=t,wS}var SS,U6;function Mce(){if(U6)return SS;U6=1;var e=Zx();function t(r){return e(this,r).has(r)}return SS=t,SS}var ES,V6;function Rce(){if(V6)return ES;V6=1;var e=Zx();function t(r,n){var i=e(this,r),o=i.size;return i.set(r,n),this.size+=i.size==o?0:1,this}return ES=t,ES}var CS,G6;function WI(){if(G6)return CS;G6=1;var e=Ace(),t=Tce(),r=Ice(),n=Mce(),i=Rce();function o(u){var a=-1,p=u==null?0:u.length;for(this.clear();++a<p;){var h=u[a];this.set(h[0],h[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,CS=o,CS}var AS,H6;function Oce(){if(H6)return AS;H6=1;var e=Hx(),t=HI(),r=WI(),n=200;function i(o,u){var a=this.__data__;if(a instanceof e){var p=a.__data__;if(!t||p.length<n-1)return p.push([o,u]),this.size=++a.size,this;a=this.__data__=new r(p)}return a.set(o,u),this.size=a.size,this}return AS=i,AS}var PS,W6;function Kx(){if(W6)return PS;W6=1;var e=Hx(),t=hce(),r=dce(),n=pce(),i=mce(),o=Oce();function u(a){var p=this.__data__=new e(a);this.size=p.size}return u.prototype.clear=t,u.prototype.delete=r,u.prototype.get=n,u.prototype.has=i,u.prototype.set=o,PS=u,PS}var TS,Z6;function kce(){if(Z6)return TS;Z6=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return TS=t,TS}var IS,K6;function Lce(){if(K6)return IS;K6=1;function e(t){return this.__data__.has(t)}return IS=e,IS}var MS,X6;function Dce(){if(X6)return MS;X6=1;var e=WI(),t=kce(),r=Lce();function n(i){var o=-1,u=i==null?0:i.length;for(this.__data__=new e;++o<u;)this.add(i[o])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,MS=n,MS}var RS,Y6;function Nce(){if(Y6)return RS;Y6=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return RS=e,RS}var OS,J6;function Fce(){if(J6)return OS;J6=1;function e(t,r){return t.has(r)}return OS=e,OS}var kS,Q6;function sU(){if(Q6)return kS;Q6=1;var e=Dce(),t=Nce(),r=Fce(),n=1,i=2;function o(u,a,p,h,m,v){var w=p&n,x=u.length,P=a.length;if(x!=P&&!(w&&P>x))return!1;var T=v.get(u),R=v.get(a);if(T&&R)return T==a&&R==u;var k=-1,N=!0,F=p&i?new e:void 0;for(v.set(u,a),v.set(a,u);++k<x;){var D=u[k],U=a[k];if(h)var B=w?h(U,D,k,a,u,v):h(D,U,k,u,a,v);if(B!==void 0){if(B)continue;N=!1;break}if(F){if(!t(a,function(Z,J){if(!r(F,J)&&(D===Z||m(D,Z,p,h,v)))return F.push(J)})){N=!1;break}}else if(!(D===U||m(D,U,p,h,v))){N=!1;break}}return v.delete(u),v.delete(a),N}return kS=o,kS}var LS,eN;function lU(){if(eN)return LS;eN=1;var e=Ef(),t=e.Uint8Array;return LS=t,LS}var DS,tN;function Bce(){if(tN)return DS;tN=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,o){n[++r]=[o,i]}),n}return DS=e,DS}var NS,rN;function jce(){if(rN)return NS;rN=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return NS=e,NS}var FS,nN;function zce(){if(nN)return FS;nN=1;var e=Cg(),t=lU(),r=Tg(),n=sU(),i=Bce(),o=jce(),u=1,a=2,p="[object Boolean]",h="[object Date]",m="[object Error]",v="[object Map]",w="[object Number]",x="[object RegExp]",P="[object Set]",T="[object String]",R="[object Symbol]",k="[object ArrayBuffer]",N="[object DataView]",F=e?e.prototype:void 0,D=F?F.valueOf:void 0;function U(B,Z,J,X,le,H,G){switch(J){case N:if(B.byteLength!=Z.byteLength||B.byteOffset!=Z.byteOffset)return!1;B=B.buffer,Z=Z.buffer;case k:return!(B.byteLength!=Z.byteLength||!H(new t(B),new t(Z)));case p:case h:case w:return r(+B,+Z);case m:return B.name==Z.name&&B.message==Z.message;case x:case T:return B==Z+"";case v:var ae=i;case P:var se=X&u;if(ae||(ae=o),B.size!=Z.size&&!se)return!1;var ue=G.get(B);if(ue)return ue==Z;X|=a,G.set(B,Z);var me=n(ae(B),ae(Z),X,le,H,G);return G.delete(B),me;case R:if(D)return D.call(B)==D.call(Z)}return!1}return FS=U,FS}var BS,iN;function ZI(){if(iN)return BS;iN=1;function e(t,r){for(var n=-1,i=r.length,o=t.length;++n<i;)t[o+n]=r[n];return t}return BS=e,BS}var jS,aN;function uU(){if(aN)return jS;aN=1;var e=ZI(),t=Nu();function r(n,i,o){var u=i(n);return t(n)?u:e(u,o(n))}return jS=r,jS}var zS,oN;function $ce(){if(oN)return zS;oN=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=0,u=[];++n<i;){var a=t[n];r(a,n,t)&&(u[o++]=a)}return u}return zS=e,zS}var $S,sN;function cU(){if(sN)return $S;sN=1;function e(){return[]}return $S=e,$S}var qS,lN;function KI(){if(lN)return qS;lN=1;var e=$ce(),t=cU(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(u){return u==null?[]:(u=Object(u),e(i(u),function(a){return n.call(u,a)}))}:t;return qS=o,qS}var US,uN;function fU(){if(uN)return US;uN=1;var e=uU(),t=KI(),r=k0();function n(i){return e(i,r,t)}return US=n,US}var VS,cN;function qce(){if(cN)return VS;cN=1;var e=fU(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(o,u,a,p,h,m){var v=a&t,w=e(o),x=w.length,P=e(u),T=P.length;if(x!=T&&!v)return!1;for(var R=x;R--;){var k=w[R];if(!(v?k in u:n.call(u,k)))return!1}var N=m.get(o),F=m.get(u);if(N&&F)return N==u&&F==o;var D=!0;m.set(o,u),m.set(u,o);for(var U=v;++R<x;){k=w[R];var B=o[k],Z=u[k];if(p)var J=v?p(Z,B,k,u,o,m):p(B,Z,k,o,u,m);if(!(J===void 0?B===Z||h(B,Z,a,p,m):J)){D=!1;break}U||(U=k=="constructor")}if(D&&!U){var X=o.constructor,le=u.constructor;X!=le&&"constructor"in o&&"constructor"in u&&!(typeof X=="function"&&X instanceof X&&typeof le=="function"&&le instanceof le)&&(D=!1)}return m.delete(o),m.delete(u),D}return VS=i,VS}var GS,fN;function Uce(){if(fN)return GS;fN=1;var e=Cp(),t=Ef(),r=e(t,"DataView");return GS=r,GS}var HS,hN;function Vce(){if(hN)return HS;hN=1;var e=Cp(),t=Ef(),r=e(t,"Promise");return HS=r,HS}var WS,dN;function Gce(){if(dN)return WS;dN=1;var e=Cp(),t=Ef(),r=e(t,"Set");return WS=r,WS}var ZS,pN;function Hce(){if(pN)return ZS;pN=1;var e=Cp(),t=Ef(),r=e(t,"WeakMap");return ZS=r,ZS}var KS,mN;function Xx(){if(mN)return KS;mN=1;var e=Uce(),t=HI(),r=Vce(),n=Gce(),i=Hce(),o=Ep(),u=oU(),a="[object Map]",p="[object Object]",h="[object Promise]",m="[object Set]",v="[object WeakMap]",w="[object DataView]",x=u(e),P=u(t),T=u(r),R=u(n),k=u(i),N=o;return(e&&N(new e(new ArrayBuffer(1)))!=w||t&&N(new t)!=a||r&&N(r.resolve())!=h||n&&N(new n)!=m||i&&N(new i)!=v)&&(N=function(F){var D=o(F),U=D==p?F.constructor:void 0,B=U?u(U):"";if(B)switch(B){case x:return w;case P:return a;case T:return h;case R:return m;case k:return v}return D}),KS=N,KS}var XS,gN;function Wce(){if(gN)return XS;gN=1;var e=Kx(),t=sU(),r=zce(),n=qce(),i=Xx(),o=Nu(),u=Ux(),a=zI(),p=1,h="[object Arguments]",m="[object Array]",v="[object Object]",w=Object.prototype,x=w.hasOwnProperty;function P(T,R,k,N,F,D){var U=o(T),B=o(R),Z=U?m:i(T),J=B?m:i(R);Z=Z==h?v:Z,J=J==h?v:J;var X=Z==v,le=J==v,H=Z==J;if(H&&u(T)){if(!u(R))return!1;U=!0,X=!1}if(H&&!X)return D||(D=new e),U||a(T)?t(T,R,k,N,F,D):r(T,R,Z,k,N,F,D);if(!(k&p)){var G=X&&x.call(T,"__wrapped__"),ae=le&&x.call(R,"__wrapped__");if(G||ae){var se=G?T.value():T,ue=ae?R.value():R;return D||(D=new e),F(se,ue,k,N,D)}}return H?(D||(D=new e),n(T,R,k,N,F,D)):!1}return XS=P,XS}var YS,yN;function XI(){if(yN)return YS;yN=1;var e=Wce(),t=Cf();function r(n,i,o,u,a){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,o,u,r,a)}return YS=r,YS}var JS,vN;function Zce(){if(vN)return JS;vN=1;var e=Kx(),t=XI(),r=1,n=2;function i(o,u,a,p){var h=a.length,m=h,v=!p;if(o==null)return!m;for(o=Object(o);h--;){var w=a[h];if(v&&w[2]?w[1]!==o[w[0]]:!(w[0]in o))return!1}for(;++h<m;){w=a[h];var x=w[0],P=o[x],T=w[1];if(v&&w[2]){if(P===void 0&&!(x in o))return!1}else{var R=new e;if(p)var k=p(P,T,x,o,u,R);if(!(k===void 0?t(T,P,r|n,p,R):k))return!1}}return!0}return JS=i,JS}var QS,bN;function hU(){if(bN)return QS;bN=1;var e=Af();function t(r){return r===r&&!e(r)}return QS=t,QS}var eE,_N;function Kce(){if(_N)return eE;_N=1;var e=hU(),t=k0();function r(n){for(var i=t(n),o=i.length;o--;){var u=i[o],a=n[u];i[o]=[u,a,e(a)]}return i}return eE=r,eE}var tE,xN;function dU(){if(xN)return tE;xN=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return tE=e,tE}var rE,wN;function Xce(){if(wN)return rE;wN=1;var e=Zce(),t=Kce(),r=dU();function n(i){var o=t(i);return o.length==1&&o[0][2]?r(o[0][0],o[0][1]):function(u){return u===i||e(u,i,o)}}return rE=n,rE}var nE,SN;function Yx(){if(SN)return nE;SN=1;var e=Ep(),t=Cf(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return nE=n,nE}var iE,EN;function YI(){if(EN)return iE;EN=1;var e=Nu(),t=Yx(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,u){if(e(o))return!1;var a=typeof o;return a=="number"||a=="symbol"||a=="boolean"||o==null||t(o)?!0:n.test(o)||!r.test(o)||u!=null&&o in Object(u)}return iE=i,iE}var aE,CN;function pU(){if(CN)return aE;CN=1;var e=WI(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var u=arguments,a=i?i.apply(this,u):u[0],p=o.cache;if(p.has(a))return p.get(a);var h=n.apply(this,u);return o.cache=p.set(a,h)||p,h};return o.cache=new(r.Cache||e),o}return r.Cache=e,aE=r,aE}var oE,AN;function Yce(){if(AN)return oE;AN=1;var e=pU(),t=500;function r(n){var i=e(n,function(u){return o.size===t&&o.clear(),u}),o=i.cache;return i}return oE=r,oE}var sE,PN;function Jce(){if(PN)return sE;PN=1;var e=Yce(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(u,a,p,h){o.push(p?h.replace(r,"$1"):a||u)}),o});return sE=n,sE}var lE,TN;function Qce(){if(TN)return lE;TN=1;var e=Cg(),t=GI(),r=Nu(),n=Yx(),i=e?e.prototype:void 0,o=i?i.toString:void 0;function u(a){if(typeof a=="string")return a;if(r(a))return t(a,u)+"";if(n(a))return o?o.call(a):"";var p=a+"";return p=="0"&&1/a==-1/0?"-0":p}return lE=u,lE}var uE,IN;function efe(){if(IN)return uE;IN=1;var e=Qce();function t(r){return r==null?"":e(r)}return uE=t,uE}var cE,MN;function L0(){if(MN)return cE;MN=1;var e=Nu(),t=YI(),r=Jce(),n=efe();function i(o,u){return e(o)?o:t(o,u)?[o]:r(n(o))}return cE=i,cE}var fE,RN;function Ig(){if(RN)return fE;RN=1;var e=Yx();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return fE=t,fE}var hE,ON;function Jx(){if(ON)return hE;ON=1;var e=L0(),t=Ig();function r(n,i){i=e(i,n);for(var o=0,u=i.length;n!=null&&o<u;)n=n[t(i[o++])];return o&&o==u?n:void 0}return hE=r,hE}var dE,kN;function JI(){if(kN)return dE;kN=1;var e=Jx();function t(r,n,i){var o=r==null?void 0:e(r,n);return o===void 0?i:o}return dE=t,dE}var pE,LN;function tfe(){if(LN)return pE;LN=1;function e(t,r){return t!=null&&r in Object(t)}return pE=e,pE}var mE,DN;function rfe(){if(DN)return mE;DN=1;var e=L0(),t=qx(),r=Nu(),n=Ag(),i=FI(),o=Ig();function u(a,p,h){p=e(p,a);for(var m=-1,v=p.length,w=!1;++m<v;){var x=o(p[m]);if(!(w=a!=null&&h(a,x)))break;a=a[x]}return w||++m!=v?w:(v=a==null?0:a.length,!!v&&i(v)&&n(x,v)&&(r(a)||t(a)))}return mE=u,mE}var gE,NN;function mU(){if(NN)return gE;NN=1;var e=tfe(),t=rfe();function r(n,i){return n!=null&&t(n,i,e)}return gE=r,gE}var yE,FN;function nfe(){if(FN)return yE;FN=1;var e=XI(),t=JI(),r=mU(),n=YI(),i=hU(),o=dU(),u=Ig(),a=1,p=2;function h(m,v){return n(m)&&i(v)?o(u(m),v):function(w){var x=t(w,m);return x===void 0&&x===v?r(w,m):e(v,x,a|p)}}return yE=h,yE}var vE,BN;function ife(){if(BN)return vE;BN=1;function e(t){return function(r){return r?.[t]}}return vE=e,vE}var bE,jN;function afe(){if(jN)return bE;jN=1;var e=Jx();function t(r){return function(n){return e(n,r)}}return bE=t,bE}var _E,zN;function ofe(){if(zN)return _E;zN=1;var e=ife(),t=afe(),r=YI(),n=Ig();function i(o){return r(o)?e(n(o)):t(o)}return _E=i,_E}var xE,$N;function sfe(){if($N)return xE;$N=1;var e=Xce(),t=nfe(),r=Vx(),n=Nu(),i=ofe();function o(u){return typeof u=="function"?u:u==null?r:typeof u=="object"?n(u)?t(u[0],u[1]):e(u):i(u)}return xE=o,xE}var wE,qN;function lfe(){if(qN)return wE;qN=1;var e=Pg();function t(r,n){return function(i,o){if(i==null)return i;if(!e(i))return r(i,o);for(var u=i.length,a=n?u:-1,p=Object(i);(n?a--:++a<u)&&o(p[a],a,p)!==!1;);return i}}return wE=t,wE}var SE,UN;function ufe(){if(UN)return SE;UN=1;var e=iU(),t=lfe(),r=t(e);return SE=r,SE}var EE,VN;function cfe(){if(VN)return EE;VN=1;var e=ufe(),t=Pg();function r(n,i){var o=-1,u=t(n)?Array(n.length):[];return e(n,function(a,p,h){u[++o]=i(a,p,h)}),u}return EE=r,EE}var CE,GN;function ffe(){if(GN)return CE;GN=1;var e=GI(),t=sfe(),r=cfe(),n=Nu();function i(o,u){var a=n(o)?e:r;return a(o,t(u,3))}return CE=i,CE}var HN;function hfe(){if(HN)return hm;HN=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.flattenNames=void 0;var e=Jue(),t=p(e),r=UI(),n=p(r),i=aU(),o=p(i),u=ffe(),a=p(u);function p(m){return m&&m.__esModule?m:{default:m}}var h=hm.flattenNames=function m(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=[];return(0,a.default)(v,function(x){Array.isArray(x)?m(x).map(function(P){return w.push(P)}):(0,o.default)(x)?(0,n.default)(x,function(P,T){P===!0&&w.push(T),w.push(T+"-"+P)}):(0,t.default)(x)&&w.push(x)}),w};return hm.default=h,hm}var dm={},AE,WN;function dfe(){if(WN)return AE;WN=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return AE=e,AE}var PE,ZN;function gU(){if(ZN)return PE;ZN=1;var e=Cp(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return PE=t,PE}var TE,KN;function QI(){if(KN)return TE;KN=1;var e=gU();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return TE=t,TE}var IE,XN;function eM(){if(XN)return IE;XN=1;var e=QI(),t=Tg(),r=Object.prototype,n=r.hasOwnProperty;function i(o,u,a){var p=o[u];(!(n.call(o,u)&&t(p,a))||a===void 0&&!(u in o))&&e(o,u,a)}return IE=i,IE}var ME,YN;function D0(){if(YN)return ME;YN=1;var e=eM(),t=QI();function r(n,i,o,u){var a=!o;o||(o={});for(var p=-1,h=i.length;++p<h;){var m=i[p],v=u?u(o[m],n[m],m,o,n):void 0;v===void 0&&(v=n[m]),a?t(o,m,v):e(o,m,v)}return o}return ME=r,ME}var RE,JN;function pfe(){if(JN)return RE;JN=1;var e=D0(),t=k0();function r(n,i){return n&&e(i,t(i),n)}return RE=r,RE}var OE,QN;function mfe(){if(QN)return OE;QN=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return OE=e,OE}var kE,eF;function gfe(){if(eF)return kE;eF=1;var e=Af(),t=$I(),r=mfe(),n=Object.prototype,i=n.hasOwnProperty;function o(u){if(!e(u))return r(u);var a=t(u),p=[];for(var h in u)h=="constructor"&&(a||!i.call(u,h))||p.push(h);return p}return kE=o,kE}var LE,tF;function Mg(){if(tF)return LE;tF=1;var e=rU(),t=gfe(),r=Pg();function n(i){return r(i)?e(i,!0):t(i)}return LE=n,LE}var DE,rF;function yfe(){if(rF)return DE;rF=1;var e=D0(),t=Mg();function r(n,i){return n&&e(i,t(i),n)}return DE=r,DE}var ov={exports:{}};ov.exports;var nF;function yU(){return nF||(nF=1,(function(e,t){var r=Ef(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,u=o?r.Buffer:void 0,a=u?u.allocUnsafe:void 0;function p(h,m){if(m)return h.slice();var v=h.length,w=a?a(v):new h.constructor(v);return h.copy(w),w}e.exports=p})(ov,ov.exports)),ov.exports}var NE,iF;function vU(){if(iF)return NE;iF=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return NE=e,NE}var FE,aF;function vfe(){if(aF)return FE;aF=1;var e=D0(),t=KI();function r(n,i){return e(n,t(n),i)}return FE=r,FE}var BE,oF;function bU(){if(oF)return BE;oF=1;var e=ZI(),t=VI(),r=KI(),n=cU(),i=Object.getOwnPropertySymbols,o=i?function(u){for(var a=[];u;)e(a,r(u)),u=t(u);return a}:n;return BE=o,BE}var jE,sF;function bfe(){if(sF)return jE;sF=1;var e=D0(),t=bU();function r(n,i){return e(n,t(n),i)}return jE=r,jE}var zE,lF;function _fe(){if(lF)return zE;lF=1;var e=uU(),t=bU(),r=Mg();function n(i){return e(i,r,t)}return zE=n,zE}var $E,uF;function xfe(){if(uF)return $E;uF=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return $E=r,$E}var qE,cF;function tM(){if(cF)return qE;cF=1;var e=lU();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return qE=t,qE}var UE,fF;function wfe(){if(fF)return UE;fF=1;var e=tM();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return UE=t,UE}var VE,hF;function Sfe(){if(hF)return VE;hF=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return VE=t,VE}var GE,dF;function Efe(){if(dF)return GE;dF=1;var e=Cg(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return GE=n,GE}var HE,pF;function _U(){if(pF)return HE;pF=1;var e=tM();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return HE=t,HE}var WE,mF;function Cfe(){if(mF)return WE;mF=1;var e=tM(),t=wfe(),r=Sfe(),n=Efe(),i=_U(),o="[object Boolean]",u="[object Date]",a="[object Map]",p="[object Number]",h="[object RegExp]",m="[object Set]",v="[object String]",w="[object Symbol]",x="[object ArrayBuffer]",P="[object DataView]",T="[object Float32Array]",R="[object Float64Array]",k="[object Int8Array]",N="[object Int16Array]",F="[object Int32Array]",D="[object Uint8Array]",U="[object Uint8ClampedArray]",B="[object Uint16Array]",Z="[object Uint32Array]";function J(X,le,H){var G=X.constructor;switch(le){case x:return e(X);case o:case u:return new G(+X);case P:return t(X,H);case T:case R:case k:case N:case F:case D:case U:case B:case Z:return i(X,H);case a:return new G;case p:case v:return new G(X);case h:return r(X);case m:return new G;case w:return n(X)}}return WE=J,WE}var ZE,gF;function Afe(){if(gF)return ZE;gF=1;var e=Af(),t=Object.create,r=(function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}})();return ZE=r,ZE}var KE,yF;function xU(){if(yF)return KE;yF=1;var e=Afe(),t=VI(),r=$I();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return KE=n,KE}var XE,vF;function Pfe(){if(vF)return XE;vF=1;var e=Xx(),t=Cf(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return XE=n,XE}var YE,bF;function Tfe(){if(bF)return YE;bF=1;var e=Pfe(),t=BI(),r=jI(),n=r&&r.isMap,i=n?t(n):e;return YE=i,YE}var JE,_F;function Ife(){if(_F)return JE;_F=1;var e=Xx(),t=Cf(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return JE=n,JE}var QE,xF;function Mfe(){if(xF)return QE;xF=1;var e=Ife(),t=BI(),r=jI(),n=r&&r.isSet,i=n?t(n):e;return QE=i,QE}var eC,wF;function Rfe(){if(wF)return eC;wF=1;var e=Kx(),t=dfe(),r=eM(),n=pfe(),i=yfe(),o=yU(),u=vU(),a=vfe(),p=bfe(),h=fU(),m=_fe(),v=Xx(),w=xfe(),x=Cfe(),P=xU(),T=Nu(),R=Ux(),k=Tfe(),N=Af(),F=Mfe(),D=k0(),U=Mg(),B=1,Z=2,J=4,X="[object Arguments]",le="[object Array]",H="[object Boolean]",G="[object Date]",ae="[object Error]",se="[object Function]",ue="[object GeneratorFunction]",me="[object Map]",Ce="[object Number]",pe="[object Object]",Ee="[object RegExp]",Fe="[object Set]",Ke="[object String]",fe="[object Symbol]",_e="[object WeakMap]",Pe="[object ArrayBuffer]",ke="[object DataView]",$e="[object Float32Array]",ht="[object Float64Array]",Ot="[object Int8Array]",mt="[object Int16Array]",nt="[object Int32Array]",Nt="[object Uint8Array]",kt="[object Uint8ClampedArray]",It="[object Uint16Array]",gt="[object Uint32Array]",Le={};Le[X]=Le[le]=Le[Pe]=Le[ke]=Le[H]=Le[G]=Le[$e]=Le[ht]=Le[Ot]=Le[mt]=Le[nt]=Le[me]=Le[Ce]=Le[pe]=Le[Ee]=Le[Fe]=Le[Ke]=Le[fe]=Le[Nt]=Le[kt]=Le[It]=Le[gt]=!0,Le[ae]=Le[se]=Le[_e]=!1;function pr(hr,vr,Qt,qe,rt,ct){var Ft,Yt=vr&B,Wt=vr&Z,ur=vr&J;if(Qt&&(Ft=rt?Qt(hr,qe,rt,ct):Qt(hr)),Ft!==void 0)return Ft;if(!N(hr))return hr;var br=T(hr);if(br){if(Ft=w(hr),!Yt)return u(hr,Ft)}else{var xr=v(hr),Rr=xr==se||xr==ue;if(R(hr))return o(hr,Yt);if(xr==pe||xr==X||Rr&&!rt){if(Ft=Wt||Rr?{}:P(hr),!Yt)return Wt?p(hr,i(Ft,hr)):a(hr,n(Ft,hr))}else{if(!Le[xr])return rt?hr:{};Ft=x(hr,xr,Yt)}}ct||(ct=new e);var wr=ct.get(hr);if(wr)return wr;ct.set(hr,Ft),F(hr)?hr.forEach(function(ve){Ft.add(pr(ve,vr,Qt,ve,hr,ct))}):k(hr)&&hr.forEach(function(ve,xe){Ft.set(xe,pr(ve,vr,Qt,xe,hr,ct))});var fr=ur?Wt?m:h:Wt?U:D,bt=br?void 0:fr(hr);return t(bt||hr,function(ve,xe){bt&&(xe=ve,ve=hr[xe]),r(Ft,xe,pr(ve,vr,Qt,xe,hr,ct))}),Ft}return eC=pr,eC}var tC,SF;function Ofe(){if(SF)return tC;SF=1;var e=Rfe(),t=1,r=4;function n(i){return e(i,t|r)}return tC=n,tC}var EF;function kfe(){if(EF)return dm;EF=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.mergeClasses=void 0;var e=UI(),t=o(e),r=Ofe(),n=o(r),i=Object.assign||function(a){for(var p=1;p<arguments.length;p++){var h=arguments[p];for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(a[m]=h[m])}return a};function o(a){return a&&a.__esModule?a:{default:a}}var u=dm.mergeClasses=function(p){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=p.default&&(0,n.default)(p.default)||{};return h.map(function(v){var w=p[v];return w&&(0,t.default)(w,function(x,P){m[P]||(m[P]={}),m[P]=i({},m[P],w[P])}),v}),m};return dm.default=u,dm}var pm={},CF;function Lfe(){if(CF)return pm;CF=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.autoprefix=void 0;var e=UI(),t=n(e),r=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&(u[h]=p[h])}return u};function n(u){return u&&u.__esModule?u:{default:u}}var i={borderRadius:function(a){return{msBorderRadius:a,MozBorderRadius:a,OBorderRadius:a,WebkitBorderRadius:a,borderRadius:a}},boxShadow:function(a){return{msBoxShadow:a,MozBoxShadow:a,OBoxShadow:a,WebkitBoxShadow:a,boxShadow:a}},userSelect:function(a){return{WebkitTouchCallout:a,KhtmlUserSelect:a,MozUserSelect:a,msUserSelect:a,WebkitUserSelect:a,userSelect:a}},flex:function(a){return{WebkitBoxFlex:a,MozBoxFlex:a,WebkitFlex:a,msFlex:a,flex:a}},flexBasis:function(a){return{WebkitFlexBasis:a,flexBasis:a}},justifyContent:function(a){return{WebkitJustifyContent:a,justifyContent:a}},transition:function(a){return{msTransition:a,MozTransition:a,OTransition:a,WebkitTransition:a,transition:a}},transform:function(a){return{msTransform:a,MozTransform:a,OTransform:a,WebkitTransform:a,transform:a}},absolute:function(a){var p=a&&a.split(" ");return{position:"absolute",top:p&&p[0],right:p&&p[1],bottom:p&&p[2],left:p&&p[3]}},extend:function(a,p){var h=p[a];return h||{extend:a}}},o=pm.autoprefix=function(a){var p={};return(0,t.default)(a,function(h,m){var v={};(0,t.default)(h,function(w,x){var P=i[x];P?v=r({},v,P(w)):v[x]=w}),p[m]=v}),p};return pm.default=o,pm}var mm={},AF;function Dfe(){if(AF)return mm;AF=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.hover=void 0;var e=Object.assign||function(p){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(p[v]=m[v])}return p},t=ux(),r=n(t);function n(p){return p&&p.__esModule?p:{default:p}}function i(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function o(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function u(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var a=mm.hover=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){u(w,v);function w(){var x,P,T,R;i(this,w);for(var k=arguments.length,N=Array(k),F=0;F<k;F++)N[F]=arguments[F];return R=(P=(T=o(this,(x=w.__proto__||Object.getPrototypeOf(w)).call.apply(x,[this].concat(N))),T),T.state={hover:!1},T.handleMouseOver=function(){return T.setState({hover:!0})},T.handleMouseOut=function(){return T.setState({hover:!1})},T.render=function(){return r.default.createElement(m,{onMouseOver:T.handleMouseOver,onMouseOut:T.handleMouseOut},r.default.createElement(h,e({},T.props,T.state)))},P),o(T,R)}return w})(r.default.Component)};return mm.default=a,mm}var gm={},PF;function Nfe(){if(PF)return gm;PF=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.active=void 0;var e=Object.assign||function(p){for(var h=1;h<arguments.length;h++){var m=arguments[h];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(p[v]=m[v])}return p},t=ux(),r=n(t);function n(p){return p&&p.__esModule?p:{default:p}}function i(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function o(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function u(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var a=gm.active=function(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(v){u(w,v);function w(){var x,P,T,R;i(this,w);for(var k=arguments.length,N=Array(k),F=0;F<k;F++)N[F]=arguments[F];return R=(P=(T=o(this,(x=w.__proto__||Object.getPrototypeOf(w)).call.apply(x,[this].concat(N))),T),T.state={active:!1},T.handleMouseDown=function(){return T.setState({active:!0})},T.handleMouseUp=function(){return T.setState({active:!1})},T.render=function(){return r.default.createElement(m,{onMouseDown:T.handleMouseDown,onMouseUp:T.handleMouseUp},r.default.createElement(h,e({},T.props,T.state)))},P),o(T,R)}return w})(r.default.Component)};return gm.default=a,gm}var qb={},TF;function Ffe(){if(TF)return qb;TF=1,Object.defineProperty(qb,"__esModule",{value:!0});var e=function(r,n){var i={},o=function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[a]=p};return r===0&&o("first-child"),r===n-1&&o("last-child"),(r===0||r%2===0)&&o("even"),Math.abs(r%2)===1&&o("odd"),o("nth-child",r),i};return qb.default=e,qb}var IF;function Bfe(){if(IF)return Zl;IF=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.ReactCSS=Zl.loop=Zl.handleActive=Zl.handleHover=Zl.hover=void 0;var e=hfe(),t=w(e),r=kfe(),n=w(r),i=Lfe(),o=w(i),u=Dfe(),a=w(u),p=Nfe(),h=w(p),m=Ffe(),v=w(m);function w(P){return P&&P.__esModule?P:{default:P}}Zl.hover=a.default,Zl.handleHover=a.default,Zl.handleActive=h.default,Zl.loop=v.default;var x=Zl.ReactCSS=function(T){for(var R=arguments.length,k=Array(R>1?R-1:0),N=1;N<R;N++)k[N-1]=arguments[N];var F=(0,t.default)(k),D=(0,n.default)(T,F);return(0,o.default)(D)};return Zl.default=x,Zl}var rM=Bfe();const ti=qs(rM);var jfe=function(t,r,n,i,o){var u=o.clientWidth,a=o.clientHeight,p=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,h=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,m=p-(o.getBoundingClientRect().left+window.pageXOffset),v=h-(o.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var w=void 0;if(v<0?w=0:v>a?w=1:w=Math.round(v*100/a)/100,r.a!==w)return{h:r.h,s:r.s,l:r.l,a:w,source:"rgb"}}else{var x=void 0;if(m<0?x=0:m>u?x=1:x=Math.round(m*100/u)/100,i!==x)return{h:r.h,s:r.s,l:r.l,a:x,source:"rgb"}}return null},rC={},zfe=function(t,r,n,i){if(typeof document>"u"&&!i)return null;var o=i?new i:document.createElement("canvas");o.width=n*2,o.height=n*2;var u=o.getContext("2d");return u?(u.fillStyle=t,u.fillRect(0,0,o.width,o.height),u.fillStyle=r,u.fillRect(0,0,n,n),u.translate(n,n),u.fillRect(0,0,n,n),o.toDataURL()):null},$fe=function(t,r,n,i){var o=t+"-"+r+"-"+n+(i?"-server":"");if(rC[o])return rC[o];var u=zfe(t,r,n,i);return rC[o]=u,u},MF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rg=function(t){var r=t.white,n=t.grey,i=t.size,o=t.renderers,u=t.borderRadius,a=t.boxShadow,p=t.children,h=ti({default:{grid:{borderRadius:u,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+$fe(r,n,i,o.canvas)+") center left"}}});return I.isValidElement(p)?je.cloneElement(p,MF({},p.props,{style:MF({},p.props.style,h.grid)})):je.createElement("div",{style:h.grid})};Rg.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var qfe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ufe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Vfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Gfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var nM=(function(e){Gfe(t,e);function t(){var r,n,i,o;Vfe(this,t);for(var u=arguments.length,a=Array(u),p=0;p<u;p++)a[p]=arguments[p];return o=(n=(i=RF(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(h){var m=jfe(h,i.props.hsl,i.props.direction,i.props.a,i.container);m&&typeof i.props.onChange=="function"&&i.props.onChange(m,h)},i.handleMouseDown=function(h){i.handleChange(h),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),RF(i,o)}return Ufe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,o=ti({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:qfe({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return je.createElement("div",{style:o.alpha},je.createElement("div",{style:o.checkboard},je.createElement(Rg,{renderers:this.props.renderers})),je.createElement("div",{style:o.gradient}),je.createElement("div",{style:o.container,ref:function(a){return n.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},je.createElement("div",{style:o.pointer},this.props.pointer?je.createElement(this.props.pointer,this.props):je.createElement("div",{style:o.slider}))))}}]),t})(I.PureComponent||I.Component),Hfe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Wfe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kfe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Xfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Yfe=1,wU=38,Jfe=40,Qfe=[wU,Jfe],ehe=function(t){return Qfe.indexOf(t)>-1},the=function(t){return Number(String(t).replace(/%/g,""))},rhe=1,$i=(function(e){Xfe(t,e);function t(r){Zfe(this,t);var n=Kfe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var o=the(i.target.value);if(!isNaN(o)&&ehe(i.keyCode)){var u=n.getArrowOffset(),a=i.keyCode===wU?o+u:o-u;n.setUpdatedValue(a,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var o=Math.round(n.props.value+i.movementX);o>=0&&o<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(o),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+rhe++,n}return Hfe(t,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return Wfe({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Yfe}},{key:"setUpdatedValue",value:function(n,i){var o=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(o,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=ti({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return je.createElement("div",{style:i.wrap},je.createElement("input",{id:this.inputId,style:i.input,ref:function(u){return n.input=u},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?je.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t})(I.PureComponent||I.Component),nhe=function(t,r,n,i){var o=i.clientWidth,u=i.clientHeight,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,p=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,h=a-(i.getBoundingClientRect().left+window.pageXOffset),m=p-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var v=void 0;if(m<0)v=359;else if(m>u)v=0;else{var w=-(m*100/u)+100;v=360*w/100}if(n.h!==v)return{h:v,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var x=void 0;if(h<0)x=0;else if(h>o)x=359;else{var P=h*100/o;x=360*P/100}if(n.h!==x)return{h:x,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},ihe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function ahe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ohe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Og=(function(e){ohe(t,e);function t(){var r,n,i,o;ahe(this,t);for(var u=arguments.length,a=Array(u),p=0;p<u;p++)a[p]=arguments[p];return o=(n=(i=OF(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),i),i.handleChange=function(h){var m=nhe(h,i.props.direction,i.props.hsl,i.container);m&&typeof i.props.onChange=="function"&&i.props.onChange(m,h)},i.handleMouseDown=function(h){i.handleChange(h),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),OF(i,o)}return ihe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,o=i===void 0?"horizontal":i,u=ti({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:o==="vertical"});return je.createElement("div",{style:u.hue},je.createElement("div",{className:"hue-"+o,style:u.container,ref:function(p){return n.container=p},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},je.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),je.createElement("div",{style:u.pointer},this.props.pointer?je.createElement(this.props.pointer,this.props):je.createElement("div",{style:u.slider}))))}}]),t})(I.PureComponent||I.Component);function she(){this.__data__=[],this.size=0}function N0(e,t){return e===t||e!==e&&t!==t}function Qx(e,t){for(var r=e.length;r--;)if(N0(e[r][0],t))return r;return-1}var lhe=Array.prototype,uhe=lhe.splice;function che(e){var t=this.__data__,r=Qx(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():uhe.call(t,r,1),--this.size,!0}function fhe(e){var t=this.__data__,r=Qx(t,e);return r<0?void 0:t[r][1]}function hhe(e){return Qx(this.__data__,e)>-1}function dhe(e,t){var r=this.__data__,n=Qx(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function mh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}mh.prototype.clear=she;mh.prototype.delete=che;mh.prototype.get=fhe;mh.prototype.has=hhe;mh.prototype.set=dhe;function phe(){this.__data__=new mh,this.size=0}function mhe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function ghe(e){return this.__data__.get(e)}function yhe(e){return this.__data__.has(e)}var SU=typeof global=="object"&&global&&global.Object===Object&&global,vhe=typeof self=="object"&&self&&self.Object===Object&&self,Fc=SU||vhe||Function("return this")(),ed=Fc.Symbol,EU=Object.prototype,bhe=EU.hasOwnProperty,_he=EU.toString,Ly=ed?ed.toStringTag:void 0;function xhe(e){var t=bhe.call(e,Ly),r=e[Ly];try{e[Ly]=void 0;var n=!0}catch{}var i=_he.call(e);return n&&(t?e[Ly]=r:delete e[Ly]),i}var whe=Object.prototype,She=whe.toString;function Ehe(e){return She.call(e)}var Che="[object Null]",Ahe="[object Undefined]",kF=ed?ed.toStringTag:void 0;function Ap(e){return e==null?e===void 0?Ahe:Che:kF&&kF in Object(e)?xhe(e):Ehe(e)}function Qu(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Phe="[object AsyncFunction]",The="[object Function]",Ihe="[object GeneratorFunction]",Mhe="[object Proxy]";function iM(e){if(!Qu(e))return!1;var t=Ap(e);return t==The||t==Ihe||t==Phe||t==Mhe}var nC=Fc["__core-js_shared__"],LF=(function(){var e=/[^.]+$/.exec(nC&&nC.keys&&nC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Rhe(e){return!!LF&&LF in e}var Ohe=Function.prototype,khe=Ohe.toString;function Pp(e){if(e!=null){try{return khe.call(e)}catch{}try{return e+""}catch{}}return""}var Lhe=/[\\^$.*+?()[\]{}|]/g,Dhe=/^\[object .+?Constructor\]$/,Nhe=Function.prototype,Fhe=Object.prototype,Bhe=Nhe.toString,jhe=Fhe.hasOwnProperty,zhe=RegExp("^"+Bhe.call(jhe).replace(Lhe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $he(e){if(!Qu(e)||Rhe(e))return!1;var t=iM(e)?zhe:Dhe;return t.test(Pp(e))}function qhe(e,t){return e?.[t]}function Tp(e,t){var r=qhe(e,t);return $he(r)?r:void 0}var i0=Tp(Fc,"Map"),a0=Tp(Object,"create");function Uhe(){this.__data__=a0?a0(null):{},this.size=0}function Vhe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ghe="__lodash_hash_undefined__",Hhe=Object.prototype,Whe=Hhe.hasOwnProperty;function Zhe(e){var t=this.__data__;if(a0){var r=t[e];return r===Ghe?void 0:r}return Whe.call(t,e)?t[e]:void 0}var Khe=Object.prototype,Xhe=Khe.hasOwnProperty;function Yhe(e){var t=this.__data__;return a0?t[e]!==void 0:Xhe.call(t,e)}var Jhe="__lodash_hash_undefined__";function Qhe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=a0&&t===void 0?Jhe:t,this}function dp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}dp.prototype.clear=Uhe;dp.prototype.delete=Vhe;dp.prototype.get=Zhe;dp.prototype.has=Yhe;dp.prototype.set=Qhe;function ede(){this.size=0,this.__data__={hash:new dp,map:new(i0||mh),string:new dp}}function tde(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function e2(e,t){var r=e.__data__;return tde(t)?r[typeof t=="string"?"string":"hash"]:r.map}function rde(e){var t=e2(this,e).delete(e);return this.size-=t?1:0,t}function nde(e){return e2(this,e).get(e)}function ide(e){return e2(this,e).has(e)}function ade(e,t){var r=e2(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function gh(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}gh.prototype.clear=ede;gh.prototype.delete=rde;gh.prototype.get=nde;gh.prototype.has=ide;gh.prototype.set=ade;var ode=200;function sde(e,t){var r=this.__data__;if(r instanceof mh){var n=r.__data__;if(!i0||n.length<ode-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new gh(n)}return r.set(e,t),this.size=r.size,this}function vf(e){var t=this.__data__=new mh(e);this.size=t.size}vf.prototype.clear=phe;vf.prototype.delete=mhe;vf.prototype.get=ghe;vf.prototype.has=yhe;vf.prototype.set=sde;var i1=(function(){try{var e=Tp(Object,"defineProperty");return e({},"",{}),e}catch{}})();function aM(e,t,r){t=="__proto__"&&i1?i1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function aT(e,t,r){(r!==void 0&&!N0(e[t],r)||r===void 0&&!(t in e))&&aM(e,t,r)}function lde(e){return function(t,r,n){for(var i=-1,o=Object(t),u=n(t),a=u.length;a--;){var p=u[++i];if(r(o[p],p,o)===!1)break}return t}}var CU=lde(),AU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,DF=AU&&typeof module=="object"&&module&&!module.nodeType&&module,ude=DF&&DF.exports===AU,NF=ude?Fc.Buffer:void 0;NF&&NF.allocUnsafe;function cde(e,t){return e.slice()}var a1=Fc.Uint8Array;function fde(e){var t=new e.constructor(e.byteLength);return new a1(t).set(new a1(e)),t}function hde(e,t){var r=fde(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function dde(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var FF=Object.create,pde=(function(){function e(){}return function(t){if(!Qu(t))return{};if(FF)return FF(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function PU(e,t){return function(r){return e(t(r))}}var TU=PU(Object.getPrototypeOf,Object),mde=Object.prototype;function oM(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||mde;return e===r}function gde(e){return typeof e.constructor=="function"&&!oM(e)?pde(TU(e)):{}}function td(e){return e!=null&&typeof e=="object"}var yde="[object Arguments]";function BF(e){return td(e)&&Ap(e)==yde}var IU=Object.prototype,vde=IU.hasOwnProperty,bde=IU.propertyIsEnumerable,o1=BF((function(){return arguments})())?BF:function(e){return td(e)&&vde.call(e,"callee")&&!bde.call(e,"callee")},ku=Array.isArray,_de=9007199254740991;function sM(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_de}function kg(e){return e!=null&&sM(e.length)&&!iM(e)}function xde(e){return td(e)&&kg(e)}function wde(){return!1}var MU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jF=MU&&typeof module=="object"&&module&&!module.nodeType&&module,Sde=jF&&jF.exports===MU,zF=Sde?Fc.Buffer:void 0,Ede=zF?zF.isBuffer:void 0,s1=Ede||wde,Cde="[object Object]",Ade=Function.prototype,Pde=Object.prototype,RU=Ade.toString,Tde=Pde.hasOwnProperty,Ide=RU.call(Object);function Mde(e){if(!td(e)||Ap(e)!=Cde)return!1;var t=TU(e);if(t===null)return!0;var r=Tde.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&RU.call(r)==Ide}var Rde="[object Arguments]",Ode="[object Array]",kde="[object Boolean]",Lde="[object Date]",Dde="[object Error]",Nde="[object Function]",Fde="[object Map]",Bde="[object Number]",jde="[object Object]",zde="[object RegExp]",$de="[object Set]",qde="[object String]",Ude="[object WeakMap]",Vde="[object ArrayBuffer]",Gde="[object DataView]",Hde="[object Float32Array]",Wde="[object Float64Array]",Zde="[object Int8Array]",Kde="[object Int16Array]",Xde="[object Int32Array]",Yde="[object Uint8Array]",Jde="[object Uint8ClampedArray]",Qde="[object Uint16Array]",epe="[object Uint32Array]",Ua={};Ua[Hde]=Ua[Wde]=Ua[Zde]=Ua[Kde]=Ua[Xde]=Ua[Yde]=Ua[Jde]=Ua[Qde]=Ua[epe]=!0;Ua[Rde]=Ua[Ode]=Ua[Vde]=Ua[kde]=Ua[Gde]=Ua[Lde]=Ua[Dde]=Ua[Nde]=Ua[Fde]=Ua[Bde]=Ua[jde]=Ua[zde]=Ua[$de]=Ua[qde]=Ua[Ude]=!1;function tpe(e){return td(e)&&sM(e.length)&&!!Ua[Ap(e)]}function rpe(e){return function(t){return e(t)}}var OU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Cv=OU&&typeof module=="object"&&module&&!module.nodeType&&module,npe=Cv&&Cv.exports===OU,iC=npe&&SU.process,$F=(function(){try{var e=Cv&&Cv.require&&Cv.require("util").types;return e||iC&&iC.binding&&iC.binding("util")}catch{}})(),qF=$F&&$F.isTypedArray,lM=qF?rpe(qF):tpe;function oT(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var ipe=Object.prototype,ape=ipe.hasOwnProperty;function ope(e,t,r){var n=e[t];(!(ape.call(e,t)&&N0(n,r))||r===void 0&&!(t in e))&&aM(e,t,r)}function spe(e,t,r,n){var i=!r;r||(r={});for(var o=-1,u=t.length;++o<u;){var a=t[o],p=void 0;p===void 0&&(p=e[a]),i?aM(r,a,p):ope(r,a,p)}return r}function lpe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var upe=9007199254740991,cpe=/^(?:0|[1-9]\d*)$/;function uM(e,t){var r=typeof e;return t=t??upe,!!t&&(r=="number"||r!="symbol"&&cpe.test(e))&&e>-1&&e%1==0&&e<t}var fpe=Object.prototype,hpe=fpe.hasOwnProperty;function kU(e,t){var r=ku(e),n=!r&&o1(e),i=!r&&!n&&s1(e),o=!r&&!n&&!i&&lM(e),u=r||n||i||o,a=u?lpe(e.length,String):[],p=a.length;for(var h in e)(t||hpe.call(e,h))&&!(u&&(h=="length"||i&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||uM(h,p)))&&a.push(h);return a}function dpe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var ppe=Object.prototype,mpe=ppe.hasOwnProperty;function gpe(e){if(!Qu(e))return dpe(e);var t=oM(e),r=[];for(var n in e)n=="constructor"&&(t||!mpe.call(e,n))||r.push(n);return r}function LU(e){return kg(e)?kU(e,!0):gpe(e)}function ype(e){return spe(e,LU(e))}function vpe(e,t,r,n,i,o,u){var a=oT(e,r),p=oT(t,r),h=u.get(p);if(h){aT(e,r,h);return}var m=o?o(a,p,r+"",e,t,u):void 0,v=m===void 0;if(v){var w=ku(p),x=!w&&s1(p),P=!w&&!x&&lM(p);m=p,w||x||P?ku(a)?m=a:xde(a)?m=dde(a):x?(v=!1,m=cde(p)):P?(v=!1,m=hde(p)):m=[]:Mde(p)||o1(p)?(m=a,o1(a)?m=ype(a):(!Qu(a)||iM(a))&&(m=gde(p))):v=!1}v&&(u.set(p,m),i(m,p,n,o,u),u.delete(p)),aT(e,r,m)}function DU(e,t,r,n,i){e!==t&&CU(t,function(o,u){if(i||(i=new vf),Qu(o))vpe(e,t,u,r,DU,n,i);else{var a=n?n(oT(e,u),o,u+"",e,t,i):void 0;a===void 0&&(a=o),aT(e,u,a)}},LU)}function t2(e){return e}function bpe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var UF=Math.max;function _pe(e,t,r){return t=UF(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=UF(n.length-t,0),u=Array(o);++i<o;)u[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(u),bpe(e,this,a)}}function xpe(e){return function(){return e}}var wpe=i1?function(e,t){return i1(e,"toString",{configurable:!0,enumerable:!1,value:xpe(t),writable:!0})}:t2,Spe=800,Epe=16,Cpe=Date.now;function Ape(e){var t=0,r=0;return function(){var n=Cpe(),i=Epe-(n-r);if(r=n,i>0){if(++t>=Spe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Ppe=Ape(wpe);function Tpe(e,t){return Ppe(_pe(e,t,t2),e+"")}function Ipe(e,t,r){if(!Qu(r))return!1;var n=typeof t;return(n=="number"?kg(r)&&uM(t,r.length):n=="string"&&t in r)?N0(r[t],e):!1}function Mpe(e){return Tpe(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,u=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,u&&Ipe(r[0],r[1],u)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,o)}return t})}var au=Mpe(function(e,t,r){DU(e,t,r)}),F0=function(t){var r=t.zDepth,n=t.radius,i=t.background,o=t.children,u=t.styles,a=u===void 0?{}:u,p=ti(au({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":r===1});return je.createElement("div",{style:p.wrap},je.createElement("div",{style:p.bg}),je.createElement("div",{style:p.content},o))};F0.propTypes={background:tn.string,zDepth:tn.oneOf([0,1,2,3,4,5]),radius:tn.number,styles:tn.object};F0.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var aC=function(){return Fc.Date.now()},Rpe=/\s/;function Ope(e){for(var t=e.length;t--&&Rpe.test(e.charAt(t)););return t}var kpe=/^\s+/;function Lpe(e){return e&&e.slice(0,Ope(e)+1).replace(kpe,"")}var Dpe="[object Symbol]";function r2(e){return typeof e=="symbol"||td(e)&&Ap(e)==Dpe}var VF=NaN,Npe=/^[-+]0x[0-9a-f]+$/i,Fpe=/^0b[01]+$/i,Bpe=/^0o[0-7]+$/i,jpe=parseInt;function GF(e){if(typeof e=="number")return e;if(r2(e))return VF;if(Qu(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Qu(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Lpe(e);var r=Fpe.test(e);return r||Bpe.test(e)?jpe(e.slice(2),r?2:8):Npe.test(e)?VF:+e}var zpe="Expected a function",$pe=Math.max,qpe=Math.min;function NU(e,t,r){var n,i,o,u,a,p,h=0,m=!1,v=!1,w=!0;if(typeof e!="function")throw new TypeError(zpe);t=GF(t)||0,Qu(r)&&(m=!!r.leading,v="maxWait"in r,o=v?$pe(GF(r.maxWait)||0,t):o,w="trailing"in r?!!r.trailing:w);function x(B){var Z=n,J=i;return n=i=void 0,h=B,u=e.apply(J,Z),u}function P(B){return h=B,a=setTimeout(k,t),m?x(B):u}function T(B){var Z=B-p,J=B-h,X=t-Z;return v?qpe(X,o-J):X}function R(B){var Z=B-p,J=B-h;return p===void 0||Z>=t||Z<0||v&&J>=o}function k(){var B=aC();if(R(B))return N(B);a=setTimeout(k,T(B))}function N(B){return a=void 0,w&&n?x(B):(n=i=void 0,u)}function F(){a!==void 0&&clearTimeout(a),h=0,n=p=i=a=void 0}function D(){return a===void 0?u:N(aC())}function U(){var B=aC(),Z=R(B);if(n=arguments,i=this,p=B,Z){if(a===void 0)return P(p);if(v)return clearTimeout(a),a=setTimeout(k,t),x(p)}return a===void 0&&(a=setTimeout(k,t)),u}return U.cancel=F,U.flush=D,U}var Upe="Expected a function";function Vpe(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Upe);return Qu(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),NU(e,t,{leading:n,maxWait:t,trailing:i})}var Gpe=function(t,r,n){var i=n.getBoundingClientRect(),o=i.width,u=i.height,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,p=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,h=a-(n.getBoundingClientRect().left+window.pageXOffset),m=p-(n.getBoundingClientRect().top+window.pageYOffset);h<0?h=0:h>o&&(h=o),m<0?m=0:m>u&&(m=u);var v=h/o,w=1-m/u;return{h:r.h,s:v,v:w,a:r.a,source:"hsv"}},Hpe=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Wpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zpe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Kpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var n2=(function(e){Kpe(t,e);function t(r){Wpe(this,t);var n=Zpe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,Gpe(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var o=n.getContainerRenderWindow();o.addEventListener("mousemove",n.handleChange),o.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=Vpe(function(i,o,u){i(o,u)},50),n}return Hpe(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},o=i.color,u=i.white,a=i.black,p=i.pointer,h=i.circle,m=ti({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:o,white:u,black:a,pointer:p,circle:h}},{custom:!!this.props.style});return je.createElement("div",{style:m.color,ref:function(w){return n.container=w},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},je.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),je.createElement("div",{style:m.white,className:"saturation-white"},je.createElement("div",{style:m.black,className:"saturation-black"}),je.createElement("div",{style:m.pointer},this.props.pointer?je.createElement(this.props.pointer,this.props):je.createElement("div",{style:m.circle}))))}}]),t})(I.PureComponent||I.Component);function Xpe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Ype=PU(Object.keys,Object),Jpe=Object.prototype,Qpe=Jpe.hasOwnProperty;function eme(e){if(!oM(e))return Ype(e);var t=[];for(var r in Object(e))Qpe.call(e,r)&&r!="constructor"&&t.push(r);return t}function cM(e){return kg(e)?kU(e):eme(e)}function tme(e,t){return e&&CU(e,t,cM)}function rme(e,t){return function(r,n){if(r==null)return r;if(!kg(r))return e(r,n);for(var i=r.length,o=-1,u=Object(r);++o<i&&n(u[o],o,u)!==!1;);return r}}var FU=rme(tme);function nme(e){return typeof e=="function"?e:t2}function ime(e,t){var r=ku(e)?Xpe:FU;return r(e,nme(t))}function l1(e){"@babel/helpers - typeof";return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l1(e)}var ame=/^\s+/,ome=/\s+$/;function Mn(e,t){if(e=e||"",t=t||{},e instanceof Mn)return e;if(!(this instanceof Mn))return new Mn(e,t);var r=sme(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Mn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,i,o,u,a;return r=t.r/255,n=t.g/255,i=t.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?u=n/12.92:u=Math.pow((n+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*u+.0722*a},setAlpha:function(t){return this._a=BU(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=WF(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=WF(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=HF(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=HF(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return ZF(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return fme(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(ro(this._r,255)*100)+"%",g:Math.round(ro(this._g,255)*100)+"%",b:Math.round(ro(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(ro(this._r,255)*100)+"%, "+Math.round(ro(this._g,255)*100)+"%, "+Math.round(ro(this._b,255)*100)+"%)":"rgba("+Math.round(ro(this._r,255)*100)+"%, "+Math.round(ro(this._g,255)*100)+"%, "+Math.round(ro(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Sme[ZF(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+KF(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=Mn(t);n="#"+KF(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,o=!r&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Mn(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(mme,arguments)},brighten:function(){return this._applyModification(gme,arguments)},darken:function(){return this._applyModification(yme,arguments)},desaturate:function(){return this._applyModification(hme,arguments)},saturate:function(){return this._applyModification(dme,arguments)},greyscale:function(){return this._applyModification(pme,arguments)},spin:function(){return this._applyModification(vme,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(xme,arguments)},complement:function(){return this._applyCombination(bme,arguments)},monochromatic:function(){return this._applyCombination(wme,arguments)},splitcomplement:function(){return this._applyCombination(_me,arguments)},triad:function(){return this._applyCombination(XF,[3])},tetrad:function(){return this._applyCombination(XF,[4])}};Mn.fromRatio=function(e,t){if(l1(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=sv(e[n]));e=r}return Mn(e,t)};function sme(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,o=null,u=!1,a=!1;return typeof e=="string"&&(e=Pme(e)),l1(e)=="object"&&(Zf(e.r)&&Zf(e.g)&&Zf(e.b)?(t=lme(e.r,e.g,e.b),u=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Zf(e.h)&&Zf(e.s)&&Zf(e.v)?(n=sv(e.s),i=sv(e.v),t=cme(e.h,n,i),u=!0,a="hsv"):Zf(e.h)&&Zf(e.s)&&Zf(e.l)&&(n=sv(e.s),o=sv(e.l),t=ume(e.h,n,o),u=!0,a="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=BU(r),{ok:u,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function lme(e,t,r){return{r:ro(e,255)*255,g:ro(t,255)*255,b:ro(r,255)*255}}function HF(e,t,r){e=ro(e,255),t=ro(t,255),r=ro(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,u,a=(n+i)/2;if(n==i)o=u=0;else{var p=n-i;switch(u=a>.5?p/(2-n-i):p/(n+i),n){case e:o=(t-r)/p+(t<r?6:0);break;case t:o=(r-e)/p+2;break;case r:o=(e-t)/p+4;break}o/=6}return{h:o,s:u,l:a}}function ume(e,t,r){var n,i,o;e=ro(e,360),t=ro(t,100),r=ro(r,100);function u(h,m,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?h+(m-h)*6*v:v<1/2?m:v<2/3?h+(m-h)*(2/3-v)*6:h}if(t===0)n=i=o=r;else{var a=r<.5?r*(1+t):r+t-r*t,p=2*r-a;n=u(p,a,e+1/3),i=u(p,a,e),o=u(p,a,e-1/3)}return{r:n*255,g:i*255,b:o*255}}function WF(e,t,r){e=ro(e,255),t=ro(t,255),r=ro(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,u,a=n,p=n-i;if(u=n===0?0:p/n,n==i)o=0;else{switch(n){case e:o=(t-r)/p+(t<r?6:0);break;case t:o=(r-e)/p+2;break;case r:o=(e-t)/p+4;break}o/=6}return{h:o,s:u,v:a}}function cme(e,t,r){e=ro(e,360)*6,t=ro(t,100),r=ro(r,100);var n=Math.floor(e),i=e-n,o=r*(1-t),u=r*(1-i*t),a=r*(1-(1-i)*t),p=n%6,h=[r,u,o,o,a,r][p],m=[a,r,r,u,o,o][p],v=[o,o,a,r,r,u][p];return{r:h*255,g:m*255,b:v*255}}function ZF(e,t,r,n){var i=[Ac(Math.round(e).toString(16)),Ac(Math.round(t).toString(16)),Ac(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function fme(e,t,r,n,i){var o=[Ac(Math.round(e).toString(16)),Ac(Math.round(t).toString(16)),Ac(Math.round(r).toString(16)),Ac(jU(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function KF(e,t,r,n){var i=[Ac(jU(n)),Ac(Math.round(e).toString(16)),Ac(Math.round(t).toString(16)),Ac(Math.round(r).toString(16))];return i.join("")}Mn.equals=function(e,t){return!e||!t?!1:Mn(e).toRgbString()==Mn(t).toRgbString()};Mn.random=function(){return Mn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function hme(e,t){t=t===0?0:t||10;var r=Mn(e).toHsl();return r.s-=t/100,r.s=i2(r.s),Mn(r)}function dme(e,t){t=t===0?0:t||10;var r=Mn(e).toHsl();return r.s+=t/100,r.s=i2(r.s),Mn(r)}function pme(e){return Mn(e).desaturate(100)}function mme(e,t){t=t===0?0:t||10;var r=Mn(e).toHsl();return r.l+=t/100,r.l=i2(r.l),Mn(r)}function gme(e,t){t=t===0?0:t||10;var r=Mn(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),Mn(r)}function yme(e,t){t=t===0?0:t||10;var r=Mn(e).toHsl();return r.l-=t/100,r.l=i2(r.l),Mn(r)}function vme(e,t){var r=Mn(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,Mn(r)}function bme(e){var t=Mn(e).toHsl();return t.h=(t.h+180)%360,Mn(t)}function XF(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Mn(e).toHsl(),n=[Mn(e)],i=360/t,o=1;o<t;o++)n.push(Mn({h:(r.h+o*i)%360,s:r.s,l:r.l}));return n}function _me(e){var t=Mn(e).toHsl(),r=t.h;return[Mn(e),Mn({h:(r+72)%360,s:t.s,l:t.l}),Mn({h:(r+216)%360,s:t.s,l:t.l})]}function xme(e,t,r){t=t||6,r=r||30;var n=Mn(e).toHsl(),i=360/r,o=[Mn(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,o.push(Mn(n));return o}function wme(e,t){t=t||6;for(var r=Mn(e).toHsv(),n=r.h,i=r.s,o=r.v,u=[],a=1/t;t--;)u.push(Mn({h:n,s:i,v:o})),o=(o+a)%1;return u}Mn.mix=function(e,t,r){r=r===0?0:r||50;var n=Mn(e).toRgb(),i=Mn(t).toRgb(),o=r/100,u={r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a};return Mn(u)};Mn.readability=function(e,t){var r=Mn(e),n=Mn(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};Mn.isReadable=function(e,t,r){var n=Mn.readability(e,t),i,o;switch(o=!1,i=Tme(r),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7;break}return o};Mn.mostReadable=function(e,t,r){var n=null,i=0,o,u,a,p;r=r||{},u=r.includeFallbackColors,a=r.level,p=r.size;for(var h=0;h<t.length;h++)o=Mn.readability(e,t[h]),o>i&&(i=o,n=Mn(t[h]));return Mn.isReadable(e,n,{level:a,size:p})||!u?n:(r.includeFallbackColors=!1,Mn.mostReadable(e,["#fff","#000"],r))};var sT=Mn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Sme=Mn.hexNames=Eme(sT);function Eme(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function BU(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function ro(e,t){Cme(e)&&(e="100%");var r=Ame(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function i2(e){return Math.min(1,Math.max(0,e))}function Su(e){return parseInt(e,16)}function Cme(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function Ame(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Ac(e){return e.length==1?"0"+e:""+e}function sv(e){return e<=1&&(e=e*100+"%"),e}function jU(e){return Math.round(parseFloat(e)*255).toString(16)}function YF(e){return Su(e)/255}var xc=(function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Zf(e){return!!xc.CSS_UNIT.exec(e)}function Pme(e){e=e.replace(ame,"").replace(ome,"").toLowerCase();var t=!1;if(sT[e])e=sT[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=xc.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=xc.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=xc.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=xc.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=xc.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=xc.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=xc.hex8.exec(e))?{r:Su(r[1]),g:Su(r[2]),b:Su(r[3]),a:YF(r[4]),format:t?"name":"hex8"}:(r=xc.hex6.exec(e))?{r:Su(r[1]),g:Su(r[2]),b:Su(r[3]),format:t?"name":"hex"}:(r=xc.hex4.exec(e))?{r:Su(r[1]+""+r[1]),g:Su(r[2]+""+r[2]),b:Su(r[3]+""+r[3]),a:YF(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=xc.hex3.exec(e))?{r:Su(r[1]+""+r[1]),g:Su(r[2]+""+r[2]),b:Su(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function Tme(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var JF=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return ime(r,function(o){if(t[o]&&(n+=1,isNaN(t[o])||(i+=1),o==="s"||o==="l")){var u=/^\d+%$/;u.test(t[o])&&(i+=1)}}),n===i?t:!1},lv=function(t,r){var n=t.hex?Mn(t.hex):Mn(t),i=n.toHsl(),o=n.toHsv(),u=n.toRgb(),a=n.toHex();i.s===0&&(i.h=r||0,o.h=r||0);var p=a==="000000"&&u.a===0;return{hsl:i,hex:p?"transparent":"#"+a,rgb:u,hsv:o,oldHue:t.h||r||i.h,source:t.source}},sd=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&Mn(t).isValid()},fM=function(t){if(!t)return"#fff";var r=lv(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},oC=function(t,r){var n=t.replace("°","");return Mn(r+" ("+n+")")._ok},Dy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ime=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Mme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rme(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ome(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ou=function(t){var r=(function(n){Ome(i,n);function i(o){Mme(this,i);var u=Rme(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return u.handleChange=function(a,p){var h=JF(a);if(h){var m=lv(a,a.h||u.state.oldHue);u.setState(m),u.props.onChangeComplete&&u.debounce(u.props.onChangeComplete,m,p),u.props.onChange&&u.props.onChange(m,p)}},u.handleSwatchHover=function(a,p){var h=JF(a);if(h){var m=lv(a,a.h||u.state.oldHue);u.props.onSwatchHover&&u.props.onSwatchHover(m,p)}},u.state=Dy({},lv(o.color,0)),u.debounce=NU(function(a,p,h){a(p,h)},100),u}return Ime(i,[{key:"render",value:function(){var u={};return this.props.onSwatchHover&&(u.onSwatchHover=this.handleSwatchHover),je.createElement(t,Dy({},this.props,this.state,{onChange:this.handleChange},u))}}],[{key:"getDerivedStateFromProps",value:function(u,a){return Dy({},lv(u.color,a.oldHue))}}]),i})(I.PureComponent||I.Component);return r.propTypes=Dy({},t.propTypes),r.defaultProps=Dy({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},kme=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lme=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Dme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QF(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Nme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Fme=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return(function(n){Nme(i,n);function i(){var o,u,a,p;Dme(this,i);for(var h=arguments.length,m=Array(h),v=0;v<h;v++)m[v]=arguments[v];return p=(u=(a=QF(this,(o=i.__proto__||Object.getPrototypeOf(i)).call.apply(o,[this].concat(m))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},u),QF(a,p)}return Lme(i,[{key:"render",value:function(){return je.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},je.createElement(t,kme({},this.props,this.state)))}}]),i})(je.Component)},e8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bme=13,jme=function(t){var r=t.color,n=t.style,i=t.onClick,o=i===void 0?function(){}:i,u=t.onHover,a=t.title,p=a===void 0?r:a,h=t.children,m=t.focus,v=t.focusStyle,w=v===void 0?{}:v,x=r==="transparent",P=ti({default:{swatch:e8({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,m?w:{})}}),T=function(D){return o(r,D)},R=function(D){return D.keyCode===Bme&&o(r,D)},k=function(D){return u(r,D)},N={};return u&&(N.onMouseOver=k),je.createElement("div",e8({style:P.swatch,onClick:T,title:p,tabIndex:0,onKeyDown:R},N),h,x&&je.createElement(Rg,{borderRadius:P.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Ip=Fme(jme);var zme=function(t){var r=t.direction,n=ti({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return je.createElement("div",{style:n.picker})},$me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zU=function(t){var r=t.rgb,n=t.hsl,i=t.width,o=t.height,u=t.onChange,a=t.direction,p=t.style,h=t.renderers,m=t.pointer,v=t.className,w=v===void 0?"":v,x=ti({default:{picker:{position:"relative",width:i,height:o},alpha:{radius:"2px",style:p}}});return je.createElement("div",{style:x.picker,className:"alpha-picker "+w},je.createElement(nM,$me({},x.alpha,{rgb:r,hsl:n,pointer:m,renderers:h,onChange:u,direction:a})))};zU.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:zme};ou(zU);function $U(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var qme="__lodash_hash_undefined__";function Ume(e){return this.__data__.set(e,qme),this}function Vme(e){return this.__data__.has(e)}function u1(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new gh;++t<r;)this.add(e[t])}u1.prototype.add=u1.prototype.push=Ume;u1.prototype.has=Vme;function Gme(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Hme(e,t){return e.has(t)}var Wme=1,Zme=2;function qU(e,t,r,n,i,o){var u=r&Wme,a=e.length,p=t.length;if(a!=p&&!(u&&p>a))return!1;var h=o.get(e),m=o.get(t);if(h&&m)return h==t&&m==e;var v=-1,w=!0,x=r&Zme?new u1:void 0;for(o.set(e,t),o.set(t,e);++v<a;){var P=e[v],T=t[v];if(n)var R=u?n(T,P,v,t,e,o):n(P,T,v,e,t,o);if(R!==void 0){if(R)continue;w=!1;break}if(x){if(!Gme(t,function(k,N){if(!Hme(x,N)&&(P===k||i(P,k,r,n,o)))return x.push(N)})){w=!1;break}}else if(!(P===T||i(P,T,r,n,o))){w=!1;break}}return o.delete(e),o.delete(t),w}function Kme(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function Xme(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Yme=1,Jme=2,Qme="[object Boolean]",ege="[object Date]",tge="[object Error]",rge="[object Map]",nge="[object Number]",ige="[object RegExp]",age="[object Set]",oge="[object String]",sge="[object Symbol]",lge="[object ArrayBuffer]",uge="[object DataView]",t8=ed?ed.prototype:void 0,sC=t8?t8.valueOf:void 0;function cge(e,t,r,n,i,o,u){switch(r){case uge:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case lge:return!(e.byteLength!=t.byteLength||!o(new a1(e),new a1(t)));case Qme:case ege:case nge:return N0(+e,+t);case tge:return e.name==t.name&&e.message==t.message;case ige:case oge:return e==t+"";case rge:var a=Kme;case age:var p=n&Yme;if(a||(a=Xme),e.size!=t.size&&!p)return!1;var h=u.get(e);if(h)return h==t;n|=Jme,u.set(e,t);var m=qU(a(e),a(t),n,i,o,u);return u.delete(e),m;case sge:if(sC)return sC.call(e)==sC.call(t)}return!1}function fge(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function hge(e,t,r){var n=t(e);return ku(e)?n:fge(n,r(e))}function dge(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var u=e[r];t(u,r,e)&&(o[i++]=u)}return o}function pge(){return[]}var mge=Object.prototype,gge=mge.propertyIsEnumerable,r8=Object.getOwnPropertySymbols,yge=r8?function(e){return e==null?[]:(e=Object(e),dge(r8(e),function(t){return gge.call(e,t)}))}:pge;function n8(e){return hge(e,cM,yge)}var vge=1,bge=Object.prototype,_ge=bge.hasOwnProperty;function xge(e,t,r,n,i,o){var u=r&vge,a=n8(e),p=a.length,h=n8(t),m=h.length;if(p!=m&&!u)return!1;for(var v=p;v--;){var w=a[v];if(!(u?w in t:_ge.call(t,w)))return!1}var x=o.get(e),P=o.get(t);if(x&&P)return x==t&&P==e;var T=!0;o.set(e,t),o.set(t,e);for(var R=u;++v<p;){w=a[v];var k=e[w],N=t[w];if(n)var F=u?n(N,k,w,t,e,o):n(k,N,w,e,t,o);if(!(F===void 0?k===N||i(k,N,r,n,o):F)){T=!1;break}R||(R=w=="constructor")}if(T&&!R){var D=e.constructor,U=t.constructor;D!=U&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof U=="function"&&U instanceof U)&&(T=!1)}return o.delete(e),o.delete(t),T}var lT=Tp(Fc,"DataView"),uT=Tp(Fc,"Promise"),cT=Tp(Fc,"Set"),fT=Tp(Fc,"WeakMap"),i8="[object Map]",wge="[object Object]",a8="[object Promise]",o8="[object Set]",s8="[object WeakMap]",l8="[object DataView]",Sge=Pp(lT),Ege=Pp(i0),Cge=Pp(uT),Age=Pp(cT),Pge=Pp(fT),Nh=Ap;(lT&&Nh(new lT(new ArrayBuffer(1)))!=l8||i0&&Nh(new i0)!=i8||uT&&Nh(uT.resolve())!=a8||cT&&Nh(new cT)!=o8||fT&&Nh(new fT)!=s8)&&(Nh=function(e){var t=Ap(e),r=t==wge?e.constructor:void 0,n=r?Pp(r):"";if(n)switch(n){case Sge:return l8;case Ege:return i8;case Cge:return a8;case Age:return o8;case Pge:return s8}return t});var Tge=1,u8="[object Arguments]",c8="[object Array]",Ub="[object Object]",Ige=Object.prototype,f8=Ige.hasOwnProperty;function Mge(e,t,r,n,i,o){var u=ku(e),a=ku(t),p=u?c8:Nh(e),h=a?c8:Nh(t);p=p==u8?Ub:p,h=h==u8?Ub:h;var m=p==Ub,v=h==Ub,w=p==h;if(w&&s1(e)){if(!s1(t))return!1;u=!0,m=!1}if(w&&!m)return o||(o=new vf),u||lM(e)?qU(e,t,r,n,i,o):cge(e,t,p,r,n,i,o);if(!(r&Tge)){var x=m&&f8.call(e,"__wrapped__"),P=v&&f8.call(t,"__wrapped__");if(x||P){var T=x?e.value():e,R=P?t.value():t;return o||(o=new vf),i(T,R,r,n,o)}}return w?(o||(o=new vf),xge(e,t,r,n,i,o)):!1}function hM(e,t,r,n,i){return e===t?!0:e==null||t==null||!td(e)&&!td(t)?e!==e&&t!==t:Mge(e,t,r,n,hM,i)}var Rge=1,Oge=2;function kge(e,t,r,n){var i=r.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var u=r[i];if(u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){u=r[i];var a=u[0],p=e[a],h=u[1];if(u[2]){if(p===void 0&&!(a in e))return!1}else{var m=new vf,v;if(!(v===void 0?hM(h,p,Rge|Oge,n,m):v))return!1}}return!0}function UU(e){return e===e&&!Qu(e)}function Lge(e){for(var t=cM(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,UU(i)]}return t}function VU(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function Dge(e){var t=Lge(e);return t.length==1&&t[0][2]?VU(t[0][0],t[0][1]):function(r){return r===e||kge(r,e,t)}}var Nge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fge=/^\w*$/;function dM(e,t){if(ku(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||r2(e)?!0:Fge.test(e)||!Nge.test(e)||t!=null&&e in Object(t)}var Bge="Expected a function";function pM(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Bge);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var u=e.apply(this,n);return r.cache=o.set(i,u)||o,u};return r.cache=new(pM.Cache||gh),r}pM.Cache=gh;var jge=500;function zge(e){var t=pM(e,function(n){return r.size===jge&&r.clear(),n}),r=t.cache;return t}var $ge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qge=/\\(\\)?/g,Uge=zge(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace($ge,function(r,n,i,o){t.push(i?o.replace(qge,"$1"):n||r)}),t}),h8=ed?ed.prototype:void 0,d8=h8?h8.toString:void 0;function GU(e){if(typeof e=="string")return e;if(ku(e))return $U(e,GU)+"";if(r2(e))return d8?d8.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Vge(e){return e==null?"":GU(e)}function HU(e,t){return ku(e)?e:dM(e,t)?[e]:Uge(Vge(e))}function a2(e){if(typeof e=="string"||r2(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function WU(e,t){t=HU(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[a2(t[r++])];return r&&r==n?e:void 0}function Gge(e,t,r){var n=e==null?void 0:WU(e,t);return n===void 0?r:n}function Hge(e,t){return e!=null&&t in Object(e)}function Wge(e,t,r){t=HU(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var u=a2(t[n]);if(!(o=e!=null&&r(e,u)))break;e=e[u]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&sM(i)&&uM(u,i)&&(ku(e)||o1(e)))}function Zge(e,t){return e!=null&&Wge(e,t,Hge)}var Kge=1,Xge=2;function Yge(e,t){return dM(e)&&UU(t)?VU(a2(e),t):function(r){var n=Gge(r,e);return n===void 0&&n===t?Zge(r,e):hM(t,n,Kge|Xge)}}function Jge(e){return function(t){return t?.[e]}}function Qge(e){return function(t){return WU(t,e)}}function eye(e){return dM(e)?Jge(a2(e)):Qge(e)}function tye(e){return typeof e=="function"?e:e==null?t2:typeof e=="object"?ku(e)?Yge(e[0],e[1]):Dge(e):eye(e)}function rye(e,t){var r=-1,n=kg(e)?Array(e.length):[];return FU(e,function(i,o,u){n[++r]=t(i,o,u)}),n}function Mp(e,t){var r=ku(e)?$U:rye;return r(e,tye(t))}var nye=function(t){var r=t.colors,n=t.onClick,i=t.onSwatchHover,o=ti({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return je.createElement("div",{style:o.swatches},Mp(r,function(u){return je.createElement(Ip,{key:u,color:u,style:o.swatch,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+u}})}),je.createElement("div",{style:o.clear}))},mM=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,u=t.width,a=t.triangle,p=t.styles,h=p===void 0?{}:p,m=t.className,v=m===void 0?"":m,w=i==="transparent",x=function(R,k){sd(R)&&r({hex:R,source:"hex"},k)},P=ti(au({default:{card:{width:u,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:fM(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},h),{"hide-triangle":a==="hide"});return je.createElement("div",{style:P.card,className:"block-picker "+v},je.createElement("div",{style:P.triangle}),je.createElement("div",{style:P.head},w&&je.createElement(Rg,{borderRadius:"6px 6px 0 0"}),je.createElement("div",{style:P.label},i)),je.createElement("div",{style:P.body},je.createElement(nye,{colors:o,onClick:x,onSwatchHover:n}),je.createElement($i,{style:{input:P.input},value:i,onChange:x})))};mM.propTypes={width:tn.oneOfType([tn.string,tn.number]),colors:tn.arrayOf(tn.string),triangle:tn.oneOf(["top","hide"]),styles:tn.object};mM.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};ou(mM);var Sm={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},Em={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},Cm={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},Am={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},Pm={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},Tm={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Im={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Mm={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},Rm={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},uv={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},Om={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},km={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},Lm={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},Dm={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},Nm={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},Fm={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},Bm={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},jm={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},ZU=function(t){var r=t.color,n=t.onClick,i=t.onSwatchHover,o=t.hover,u=t.active,a=t.circleSize,p=t.circleSpacing,h=ti({default:{swatch:{width:a,height:a,marginRight:p,marginBottom:p,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:o,active:u});return je.createElement("div",{style:h.swatch},je.createElement(Ip,{style:h.Swatch,color:r,onClick:n,onHover:i,focusStyle:{boxShadow:h.Swatch.boxShadow+", 0 0 5px "+r}}))};ZU.defaultProps={circleSize:28,circleSpacing:14};const iye=rM.handleHover(ZU);var gM=function(t){var r=t.width,n=t.onChange,i=t.onSwatchHover,o=t.colors,u=t.hex,a=t.circleSize,p=t.styles,h=p===void 0?{}:p,m=t.circleSpacing,v=t.className,w=v===void 0?"":v,x=ti(au({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-m,marginBottom:-m}}},h)),P=function(R,k){return n({hex:R,source:"hex"},k)};return je.createElement("div",{style:x.card,className:"circle-picker "+w},Mp(o,function(T){return je.createElement(iye,{key:T,color:T,onClick:P,onSwatchHover:i,active:u===T.toLowerCase(),circleSize:a,circleSpacing:m})}))};gM.propTypes={width:tn.oneOfType([tn.string,tn.number]),circleSize:tn.number,circleSpacing:tn.number,styles:tn.object};gM.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Sm[500],Em[500],Cm[500],Am[500],Pm[500],Tm[500],Im[500],Mm[500],Rm[500],uv[500],Om[500],km[500],Lm[500],Dm[500],Nm[500],Fm[500],Bm[500],jm[500]],styles:{}};ou(gM);function p8(e){return e===void 0}var Vb={},m8;function aye(){if(m8)return Vb;m8=1,Object.defineProperty(Vb,"__esModule",{value:!0});var e=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&(u[h]=p[h])}return u},t=ux(),r=n(t);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,a){var p={};for(var h in u)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(u,h)&&(p[h]=u[h]);return p}var o=24;return Vb.default=function(u){var a=u.fill,p=a===void 0?"currentColor":a,h=u.width,m=h===void 0?o:h,v=u.height,w=v===void 0?o:v,x=u.style,P=x===void 0?{}:x,T=i(u,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+o+" "+o,style:e({fill:p,width:m,height:w},P)},T),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Vb}var oye=aye();const sye=qs(oye);var lye=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function uye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function fye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var KU=(function(e){fye(t,e);function t(r){uye(this,t);var n=cye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,o){i.hex?sd(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},o):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},o):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},o)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(p8(i.s)?n.props.hsl.s:i.s),l:Number(p8(i.l)?n.props.hsl.l:i.l),source:"hsl"},o))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return lye(t,[{key:"render",value:function(){var n=this,i=ti({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),o=void 0;return this.state.view==="hex"?o=je.createElement("div",{style:i.fields,className:"flexbox-fix"},je.createElement("div",{style:i.field},je.createElement($i,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?o=je.createElement("div",{style:i.fields,className:"flexbox-fix"},je.createElement("div",{style:i.field},je.createElement($i,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement($i,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement($i,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),je.createElement("div",{style:i.alpha},je.createElement($i,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(o=je.createElement("div",{style:i.fields,className:"flexbox-fix"},je.createElement("div",{style:i.field},je.createElement($i,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement($i,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),je.createElement("div",{style:i.field},je.createElement($i,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),je.createElement("div",{style:i.alpha},je.createElement($i,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),je.createElement("div",{style:i.wrap,className:"flexbox-fix"},o,je.createElement("div",{style:i.toggle},je.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return n.icon=a}},je.createElement(sye,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),t})(je.Component);KU.defaultProps={view:"hex"};var g8=function(){var t=ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return je.createElement("div",{style:t.picker})},hye=function(){var t=ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return je.createElement("div",{style:t.picker})},yM=function(t){var r=t.width,n=t.onChange,i=t.disableAlpha,o=t.rgb,u=t.hsl,a=t.hsv,p=t.hex,h=t.renderers,m=t.styles,v=m===void 0?{}:m,w=t.className,x=w===void 0?"":w,P=t.defaultView,T=ti(au({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},v),{disableAlpha:i});return je.createElement("div",{style:T.picker,className:"chrome-picker "+x},je.createElement("div",{style:T.saturation},je.createElement(n2,{style:T.Saturation,hsl:u,hsv:a,pointer:hye,onChange:n})),je.createElement("div",{style:T.body},je.createElement("div",{style:T.controls,className:"flexbox-fix"},je.createElement("div",{style:T.color},je.createElement("div",{style:T.swatch},je.createElement("div",{style:T.active}),je.createElement(Rg,{renderers:h}))),je.createElement("div",{style:T.toggles},je.createElement("div",{style:T.hue},je.createElement(Og,{style:T.Hue,hsl:u,pointer:g8,onChange:n})),je.createElement("div",{style:T.alpha},je.createElement(nM,{style:T.Alpha,rgb:o,hsl:u,pointer:g8,renderers:h,onChange:n})))),je.createElement(KU,{rgb:o,hsl:u,hex:p,view:P,onChange:n,disableAlpha:i})))};yM.propTypes={width:tn.oneOfType([tn.string,tn.number]),disableAlpha:tn.bool,styles:tn.object,defaultView:tn.oneOf(["hex","rgb","hsl"])};yM.defaultProps={width:225,disableAlpha:!1,styles:{}};ou(yM);var dye=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,u=t.active,a=ti({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:fM(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:u,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return je.createElement(Ip,{style:a.color,color:r,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},je.createElement("div",{style:a.dot}))},pye=function(t){var r=t.hex,n=t.rgb,i=t.onChange,o=ti({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),u=function(p,h){p.r||p.g||p.b?i({r:p.r||n.r,g:p.g||n.g,b:p.b||n.b,source:"rgb"},h):i({hex:p.hex,source:"hex"},h)};return je.createElement("div",{style:o.fields,className:"flexbox-fix"},je.createElement("div",{style:o.active}),je.createElement($i,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"hex",value:r,onChange:u}),je.createElement($i,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:u}),je.createElement($i,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:u}),je.createElement($i,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:u}))},vM=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.colors,o=t.hex,u=t.rgb,a=t.styles,p=a===void 0?{}:a,h=t.className,m=h===void 0?"":h,v=ti(au({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},p)),w=function(P,T){P.hex?sd(P.hex)&&r({hex:P.hex,source:"hex"},T):r(P,T)};return je.createElement(F0,{style:v.Compact,styles:p},je.createElement("div",{style:v.compact,className:"compact-picker "+m},je.createElement("div",null,Mp(i,function(x){return je.createElement(dye,{key:x,color:x,active:x.toLowerCase()===o,onClick:w,onSwatchHover:n})}),je.createElement("div",{style:v.clear})),je.createElement(pye,{hex:o,rgb:u,onChange:w})))};vM.propTypes={colors:tn.arrayOf(tn.string),styles:tn.object};vM.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};ou(vM);var mye=function(t){var r=t.hover,n=t.color,i=t.onClick,o=t.onSwatchHover,u={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=ti({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:u}},{hover:r});return je.createElement("div",{style:a.swatch},je.createElement(Ip,{color:n,onClick:i,onHover:o,focusStyle:u}))};const gye=rM.handleHover(mye);var bM=function(t){var r=t.width,n=t.colors,i=t.onChange,o=t.onSwatchHover,u=t.triangle,a=t.styles,p=a===void 0?{}:a,h=t.className,m=h===void 0?"":h,v=ti(au({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},p),{"hide-triangle":u==="hide","top-left-triangle":u==="top-left","top-right-triangle":u==="top-right","bottom-left-triangle":u==="bottom-left","bottom-right-triangle":u==="bottom-right"}),w=function(P,T){return i({hex:P,source:"hex"},T)};return je.createElement("div",{style:v.card,className:"github-picker "+m},je.createElement("div",{style:v.triangleShadow}),je.createElement("div",{style:v.triangle}),Mp(n,function(x){return je.createElement(gye,{color:x,key:x,onClick:w,onSwatchHover:o})}))};bM.propTypes={width:tn.oneOfType([tn.string,tn.number]),colors:tn.arrayOf(tn.string),triangle:tn.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:tn.object};bM.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};ou(bM);var yye=function(t){var r=t.direction,n=ti({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return je.createElement("div",{style:n.picker})},vye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_M=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.hsl,u=t.direction,a=t.pointer,p=t.styles,h=p===void 0?{}:p,m=t.className,v=m===void 0?"":m,w=ti(au({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},h)),x=function(T){return i({a:1,h:T.h,l:.5,s:1})};return je.createElement("div",{style:w.picker,className:"hue-picker "+v},je.createElement(Og,vye({},w.hue,{hsl:o,pointer:a,onChange:x,direction:u})))};_M.propTypes={styles:tn.object};_M.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:yye,styles:{}};ou(_M);var bye=function(t){var r=t.onChange,n=t.hex,i=t.rgb,o=t.styles,u=o===void 0?{}:o,a=t.className,p=a===void 0?"":a,h=ti(au({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},u)),m=function(w,x){w.hex?sd(w.hex)&&r({hex:w.hex,source:"hex"},x):(w.r||w.g||w.b)&&r({r:w.r||i.r,g:w.g||i.g,b:w.b||i.b,source:"rgb"},x)};return je.createElement(F0,{styles:u},je.createElement("div",{style:h.material,className:"material-picker "+p},je.createElement($i,{style:{wrap:h.HEXwrap,input:h.HEXinput,label:h.HEXlabel},label:"hex",value:n,onChange:m}),je.createElement("div",{style:h.split,className:"flexbox-fix"},je.createElement("div",{style:h.third},je.createElement($i,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"r",value:i.r,onChange:m})),je.createElement("div",{style:h.third},je.createElement($i,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"g",value:i.g,onChange:m})),je.createElement("div",{style:h.third},je.createElement($i,{style:{wrap:h.RGBwrap,input:h.RGBinput,label:h.RGBlabel},label:"b",value:i.b,onChange:m})))))};ou(bye);var _ye=function(t){var r=t.onChange,n=t.rgb,i=t.hsv,o=t.hex,u=ti({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(h,m){h["#"]?sd(h["#"])&&r({hex:h["#"],source:"hex"},m):h.r||h.g||h.b?r({r:h.r||n.r,g:h.g||n.g,b:h.b||n.b,source:"rgb"},m):(h.h||h.s||h.v)&&r({h:h.h||i.h,s:h.s||i.s,v:h.v||i.v,source:"hsv"},m)};return je.createElement("div",{style:u.fields},je.createElement($i,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),je.createElement($i,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),je.createElement($i,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),je.createElement("div",{style:u.divider}),je.createElement($i,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:n.r,onChange:a}),je.createElement($i,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:n.g,onChange:a}),je.createElement($i,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:n.b,onChange:a}),je.createElement("div",{style:u.divider}),je.createElement($i,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"#",value:o.replace("#",""),onChange:a}),je.createElement("div",{style:u.fieldSymbols},je.createElement("div",{style:u.symbol},"°"),je.createElement("div",{style:u.symbol},"%"),je.createElement("div",{style:u.symbol},"%")))},xye=function(t){var r=t.hsl,n=ti({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return je.createElement("div",{style:n.picker})},wye=function(){var t=ti({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return je.createElement("div",{style:t.pointer},je.createElement("div",{style:t.left},je.createElement("div",{style:t.leftInside})),je.createElement("div",{style:t.right},je.createElement("div",{style:t.rightInside})))},y8=function(t){var r=t.onClick,n=t.label,i=t.children,o=t.active,u=ti({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:o});return je.createElement("div",{style:u.button,onClick:r},n||i)},Sye=function(t){var r=t.rgb,n=t.currentColor,i=ti({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return je.createElement("div",null,je.createElement("div",{style:i.label},"new"),je.createElement("div",{style:i.swatches},je.createElement("div",{style:i.new}),je.createElement("div",{style:i.current})),je.createElement("div",{style:i.label},"current"))},Eye=(function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}})();function Cye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Pye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xM=(function(e){Pye(t,e);function t(r){Cye(this,t);var n=Aye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:r.hex},n}return Eye(t,[{key:"render",value:function(){var n=this.props,i=n.styles,o=i===void 0?{}:i,u=n.className,a=u===void 0?"":u,p=ti(au({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},o));return je.createElement("div",{style:p.picker,className:"photoshop-picker "+a},je.createElement("div",{style:p.head},this.props.header),je.createElement("div",{style:p.body,className:"flexbox-fix"},je.createElement("div",{style:p.saturation},je.createElement(n2,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:xye,onChange:this.props.onChange})),je.createElement("div",{style:p.hue},je.createElement(Og,{direction:"vertical",hsl:this.props.hsl,pointer:wye,onChange:this.props.onChange})),je.createElement("div",{style:p.controls},je.createElement("div",{style:p.top,className:"flexbox-fix"},je.createElement("div",{style:p.previews},je.createElement(Sye,{rgb:this.props.rgb,currentColor:this.state.currentColor})),je.createElement("div",{style:p.actions},je.createElement(y8,{label:"OK",onClick:this.props.onAccept,active:!0}),je.createElement(y8,{label:"Cancel",onClick:this.props.onCancel}),je.createElement(_ye,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t})(je.Component);xM.propTypes={header:tn.string,styles:tn.object};xM.defaultProps={header:"Color Picker",styles:{}};ou(xM);var Tye=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,u=t.disableAlpha,a=ti({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:u}),p=function(m,v){m.hex?sd(m.hex)&&r({hex:m.hex,source:"hex"},v):m.r||m.g||m.b?r({r:m.r||n.r,g:m.g||n.g,b:m.b||n.b,a:n.a,source:"rgb"},v):m.a&&(m.a<0?m.a=0:m.a>100&&(m.a=100),m.a/=100,r({h:i.h,s:i.s,l:i.l,a:m.a,source:"rgb"},v))};return je.createElement("div",{style:a.fields,className:"flexbox-fix"},je.createElement("div",{style:a.double},je.createElement($i,{style:{input:a.input,label:a.label},label:"hex",value:o.replace("#",""),onChange:p})),je.createElement("div",{style:a.single},je.createElement($i,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:p,dragLabel:"true",dragMax:"255"})),je.createElement("div",{style:a.single},je.createElement($i,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:p,dragLabel:"true",dragMax:"255"})),je.createElement("div",{style:a.single},je.createElement($i,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:p,dragLabel:"true",dragMax:"255"})),je.createElement("div",{style:a.alpha},je.createElement($i,{style:{input:a.input,label:a.label},label:"a",value:Math.round(n.a*100),onChange:p,dragLabel:"true",dragMax:"100"})))},Iye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XU=function(t){var r=t.colors,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,u=ti({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),a=function(h,m){i({hex:h,source:"hex"},m)};return je.createElement("div",{style:u.colors,className:"flexbox-fix"},r.map(function(p){var h=typeof p=="string"?{color:p}:p,m=""+h.color+(h.title||"");return je.createElement("div",{key:m,style:u.swatchWrap},je.createElement(Ip,Iye({},h,{style:u.swatch,onClick:a,onHover:o,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+h.color}})))}))};XU.propTypes={colors:tn.arrayOf(tn.oneOfType([tn.string,tn.shape({color:tn.string,title:tn.string})])).isRequired};var Mye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wM=function(t){var r=t.width,n=t.rgb,i=t.hex,o=t.hsv,u=t.hsl,a=t.onChange,p=t.onSwatchHover,h=t.disableAlpha,m=t.presetColors,v=t.renderers,w=t.styles,x=w===void 0?{}:w,P=t.className,T=P===void 0?"":P,R=ti(au({default:Mye({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},x),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},x),{disableAlpha:h});return je.createElement("div",{style:R.picker,className:"sketch-picker "+T},je.createElement("div",{style:R.saturation},je.createElement(n2,{style:R.Saturation,hsl:u,hsv:o,onChange:a})),je.createElement("div",{style:R.controls,className:"flexbox-fix"},je.createElement("div",{style:R.sliders},je.createElement("div",{style:R.hue},je.createElement(Og,{style:R.Hue,hsl:u,onChange:a})),je.createElement("div",{style:R.alpha},je.createElement(nM,{style:R.Alpha,rgb:n,hsl:u,renderers:v,onChange:a}))),je.createElement("div",{style:R.color},je.createElement(Rg,null),je.createElement("div",{style:R.activeColor}))),je.createElement(Tye,{rgb:n,hsl:u,hex:i,onChange:a,disableAlpha:h}),je.createElement(XU,{colors:m,onClick:a,onSwatchHover:p}))};wM.propTypes={disableAlpha:tn.bool,width:tn.oneOfType([tn.string,tn.number]),styles:tn.object};wM.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};ou(wM);var Ny=function(t){var r=t.hsl,n=t.offset,i=t.onClick,o=i===void 0?function(){}:i,u=t.active,a=t.first,p=t.last,h=ti({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:u,first:a,last:p}),m=function(w){return o({h:r.h,s:.5,l:n,source:"hsl"},w)};return je.createElement("div",{style:h.swatch,onClick:m})},Rye=function(t){var r=t.onClick,n=t.hsl,i=ti({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),o=.1;return je.createElement("div",{style:i.swatches},je.createElement("div",{style:i.swatch},je.createElement(Ny,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<o&&Math.abs(n.s-.5)<o,onClick:r,first:!0})),je.createElement("div",{style:i.swatch},je.createElement(Ny,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<o&&Math.abs(n.s-.5)<o,onClick:r})),je.createElement("div",{style:i.swatch},je.createElement(Ny,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<o&&Math.abs(n.s-.5)<o,onClick:r})),je.createElement("div",{style:i.swatch},je.createElement(Ny,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<o&&Math.abs(n.s-.5)<o,onClick:r})),je.createElement("div",{style:i.swatch},je.createElement(Ny,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<o&&Math.abs(n.s-.5)<o,onClick:r,last:!0})),je.createElement("div",{style:i.clear}))},Oye=function(){var t=ti({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return je.createElement("div",{style:t.picker})},SM=function(t){var r=t.hsl,n=t.onChange,i=t.pointer,o=t.styles,u=o===void 0?{}:o,a=t.className,p=a===void 0?"":a,h=ti(au({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},u));return je.createElement("div",{style:h.wrap||{},className:"slider-picker "+p},je.createElement("div",{style:h.hue},je.createElement(Og,{style:h.Hue,hsl:r,pointer:i,onChange:n})),je.createElement("div",{style:h.swatches},je.createElement(Rye,{hsl:r,onClick:n})))};SM.propTypes={styles:tn.object};SM.defaultProps={pointer:Oye,styles:{}};ou(SM);var Gb={},v8;function kye(){if(v8)return Gb;v8=1,Object.defineProperty(Gb,"__esModule",{value:!0});var e=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var p=arguments[a];for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&(u[h]=p[h])}return u},t=ux(),r=n(t);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,a){var p={};for(var h in u)a.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(u,h)&&(p[h]=u[h]);return p}var o=24;return Gb.default=function(u){var a=u.fill,p=a===void 0?"currentColor":a,h=u.width,m=h===void 0?o:h,v=u.height,w=v===void 0?o:v,x=u.style,P=x===void 0?{}:x,T=i(u,["fill","width","height","style"]);return r.default.createElement("svg",e({viewBox:"0 0 "+o+" "+o,style:e({fill:p,width:m,height:w},P)},T),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Gb}var Lye=kye();const Dye=qs(Lye);var Nye=function(t){var r=t.color,n=t.onClick,i=n===void 0?function(){}:n,o=t.onSwatchHover,u=t.first,a=t.last,p=t.active,h=ti({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:fM(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:u,last:a,active:p,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return je.createElement(Ip,{color:r,style:h.color,onClick:i,onHover:o,focusStyle:{boxShadow:"0 0 4px "+r}},je.createElement("div",{style:h.check},je.createElement(Dye,null)))},Fye=function(t){var r=t.onClick,n=t.onSwatchHover,i=t.group,o=t.active,u=ti({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return je.createElement("div",{style:u.group},Mp(i,function(a,p){return je.createElement(Nye,{key:a,color:a,active:a.toLowerCase()===o,first:p===0,last:p===i.length-1,onClick:r,onSwatchHover:n})}))},EM=function(t){var r=t.width,n=t.height,i=t.onChange,o=t.onSwatchHover,u=t.colors,a=t.hex,p=t.styles,h=p===void 0?{}:p,m=t.className,v=m===void 0?"":m,w=ti(au({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},h)),x=function(T,R){return i({hex:T,source:"hex"},R)};return je.createElement("div",{style:w.picker,className:"swatches-picker "+v},je.createElement(F0,null,je.createElement("div",{style:w.overflow},je.createElement("div",{style:w.body},Mp(u,function(P){return je.createElement(Fye,{key:P.toString(),group:P,active:a,onClick:x,onSwatchHover:o})}),je.createElement("div",{style:w.clear})))))};EM.propTypes={width:tn.oneOfType([tn.string,tn.number]),height:tn.oneOfType([tn.string,tn.number]),colors:tn.arrayOf(tn.arrayOf(tn.string)),styles:tn.object};EM.defaultProps={width:320,height:240,colors:[[Sm[900],Sm[700],Sm[500],Sm[300],Sm[100]],[Em[900],Em[700],Em[500],Em[300],Em[100]],[Cm[900],Cm[700],Cm[500],Cm[300],Cm[100]],[Am[900],Am[700],Am[500],Am[300],Am[100]],[Pm[900],Pm[700],Pm[500],Pm[300],Pm[100]],[Tm[900],Tm[700],Tm[500],Tm[300],Tm[100]],[Im[900],Im[700],Im[500],Im[300],Im[100]],[Mm[900],Mm[700],Mm[500],Mm[300],Mm[100]],[Rm[900],Rm[700],Rm[500],Rm[300],Rm[100]],["#194D33",uv[700],uv[500],uv[300],uv[100]],[Om[900],Om[700],Om[500],Om[300],Om[100]],[km[900],km[700],km[500],km[300],km[100]],[Lm[900],Lm[700],Lm[500],Lm[300],Lm[100]],[Dm[900],Dm[700],Dm[500],Dm[300],Dm[100]],[Nm[900],Nm[700],Nm[500],Nm[300],Nm[100]],[Fm[900],Fm[700],Fm[500],Fm[300],Fm[100]],[Bm[900],Bm[700],Bm[500],Bm[300],Bm[100]],[jm[900],jm[700],jm[500],jm[300],jm[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};ou(EM);var CM=function(t){var r=t.onChange,n=t.onSwatchHover,i=t.hex,o=t.colors,u=t.width,a=t.triangle,p=t.styles,h=p===void 0?{}:p,m=t.className,v=m===void 0?"":m,w=ti(au({default:{card:{width:u,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},h),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),x=function(T,R){sd(T)&&r({hex:T,source:"hex"},R)};return je.createElement("div",{style:w.card,className:"twitter-picker "+v},je.createElement("div",{style:w.triangleShadow}),je.createElement("div",{style:w.triangle}),je.createElement("div",{style:w.body},Mp(o,function(P,T){return je.createElement(Ip,{key:T,color:P,hex:P,style:w.swatch,onClick:x,onHover:n,focusStyle:{boxShadow:"0 0 4px "+P}})}),je.createElement("div",{style:w.hash},"#"),je.createElement($i,{label:null,style:{input:w.input},value:i.replace("#",""),onChange:x}),je.createElement("div",{style:w.clear})))};CM.propTypes={width:tn.oneOfType([tn.string,tn.number]),triangle:tn.oneOf(["hide","top-left","top-right"]),colors:tn.arrayOf(tn.string),styles:tn.object};CM.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};ou(CM);var AM=function(t){var r=ti({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return je.createElement("div",{style:r.picker})};AM.propTypes={hsl:tn.shape({h:tn.number,s:tn.number,l:tn.number,a:tn.number})};AM.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var PM=function(t){var r=ti({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return je.createElement("div",{style:r.picker})};PM.propTypes={hsl:tn.shape({h:tn.number,s:tn.number,l:tn.number,a:tn.number})};PM.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Bye=function(t){var r=t.onChange,n=t.rgb,i=t.hsl,o=t.hex,u=t.hsv,a=function(x,P){if(x.hex)sd(x.hex)&&r({hex:x.hex,source:"hex"},P);else if(x.rgb){var T=x.rgb.split(",");oC(x.rgb,"rgb")&&r({r:T[0],g:T[1],b:T[2],a:1,source:"rgb"},P)}else if(x.hsv){var R=x.hsv.split(",");oC(x.hsv,"hsv")&&(R[2]=R[2].replace("%",""),R[1]=R[1].replace("%",""),R[0]=R[0].replace("°",""),R[1]==1?R[1]=.01:R[2]==1&&(R[2]=.01),r({h:Number(R[0]),s:Number(R[1]),v:Number(R[2]),source:"hsv"},P))}else if(x.hsl){var k=x.hsl.split(",");oC(x.hsl,"hsl")&&(k[2]=k[2].replace("%",""),k[1]=k[1].replace("%",""),k[0]=k[0].replace("°",""),v[1]==1?v[1]=.01:v[2]==1&&(v[2]=.01),r({h:Number(k[0]),s:Number(k[1]),v:Number(k[2]),source:"hsl"},P))}},p=ti({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),h=n.r+", "+n.g+", "+n.b,m=Math.round(i.h)+"°, "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",v=Math.round(u.h)+"°, "+Math.round(u.s*100)+"%, "+Math.round(u.v*100)+"%";return je.createElement("div",{style:p.wrap,className:"flexbox-fix"},je.createElement("div",{style:p.fields},je.createElement("div",{style:p.double},je.createElement($i,{style:{input:p.input,label:p.label},label:"hex",value:o,onChange:a})),je.createElement("div",{style:p.column},je.createElement("div",{style:p.single},je.createElement($i,{style:{input:p.input2,label:p.label2},label:"rgb",value:h,onChange:a})),je.createElement("div",{style:p.single},je.createElement($i,{style:{input:p.input2,label:p.label2},label:"hsv",value:v,onChange:a})),je.createElement("div",{style:p.single},je.createElement($i,{style:{input:p.input2,label:p.label2},label:"hsl",value:m,onChange:a})))))},TM=function(t){var r=t.width,n=t.onChange,i=t.rgb,o=t.hsl,u=t.hsv,a=t.hex,p=t.header,h=t.styles,m=h===void 0?{}:h,v=t.className,w=v===void 0?"":v,x=ti(au({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},m));return je.createElement("div",{style:x.picker,className:"google-picker "+w},je.createElement("div",{style:x.head},p),je.createElement("div",{style:x.swatch}),je.createElement("div",{style:x.saturation},je.createElement(n2,{hsl:o,hsv:u,pointer:AM,onChange:n})),je.createElement("div",{style:x.body},je.createElement("div",{style:x.controls,className:"flexbox-fix"},je.createElement("div",{style:x.hue},je.createElement(Og,{style:x.Hue,hsl:o,radius:"4px",pointer:PM,onChange:n}))),je.createElement(Bye,{rgb:i,hsl:o,hex:a,hsv:u,onChange:n})))};TM.propTypes={width:tn.oneOfType([tn.string,tn.number]),styles:tn.object,header:tn.string};TM.defaultProps={width:652,styles:{},header:"Color picker"};ou(TM);nr(Lc)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});nr(od)({marginLeft:"61px"});nr(EI)(e=>({paddingRight:e?"56px":0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}));nr(Bo)({padding:"4px",marginTop:"-3px"});nr(R0)({minWidth:"30px"});nr(z9)({padding:0});var b8;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(b8||(b8={}));const jye=Object.freeze({x:0,y:0});var Vm;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Vm||(Vm={}));var _8;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(_8||(_8={}));var Hu;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Hu||(Hu={}));Hu.Space,Hu.Enter,Hu.Esc,Hu.Space,Hu.Enter,Hu.Tab;var x8;(function(e){e[e.RightClick=2]="RightClick"})(x8||(x8={}));var w8;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(w8||(w8={}));var S8;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(S8||(S8={}));Vm.Backward+"",Vm.Forward+"",Vm.Backward+"",Vm.Forward+"";var hT;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(hT||(hT={}));var dT;(function(e){e.Optimized="optimized"})(dT||(dT={}));hT.WhileDragging,dT.Optimized;({...jye});var E8;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(E8||(E8={}));Hu.Down,Hu.Right,Hu.Up,Hu.Left;nr(Bo)({padding:"4px",marginTop:"-3px"});nr(Bo)({marginLeft:"20px"});nr("div")(()=>({display:"flex",alignItems:"center"}));nr(od)(({theme:e})=>({width:30,height:6,backgroundColor:e.palette.text.primary,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}));nr(od)(({theme:e})=>({zIndex:1e3,cursor:"pointer",transform:"scale(1)",[e.breakpoints.down("md")]:{transform:"scale(1.6)"}}));nr(od)(({theme:e})=>({position:"absolute",right:"-10px",top:"-52px",width:"52px",height:"52px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",[e.breakpoints.down("md")]:{right:"0px",top:"-52px"},circle:{fill:e.palette.compass.compColor,stroke:e.palette.compass.compStroke},path:{fill:e.palette.compass.compStroke},"&:hover circle":{fill:e.palette.compass.compHover}}));nr(od)(({theme:e})=>({display:"flex",flexDirection:"row","path:nth-of-type(2)":{fill:e.palette.compass.compSouth},"path:nth-of-type(1)":{fill:e.palette.compass.compNorth}}));nr(Mc)(({theme:e})=>({zIndex:1e3,color:e.palette.navigation.buttonColor,transform:"scale(1)"}));var zi={},Ps={},C8;function Lg(){if(C8)return Ps;C8=1;function e(k,N,F){if(F===void 0&&(F=Array.prototype),k&&typeof F.find=="function")return F.find.call(k,N);for(var D=0;D<k.length;D++)if(r(k,D)){var U=k[D];if(N.call(void 0,U,D,k))return U}}function t(k,N){return N===void 0&&(N=Object),N&&typeof N.getOwnPropertyDescriptors=="function"&&(k=N.create(null,N.getOwnPropertyDescriptors(k))),N&&typeof N.freeze=="function"?N.freeze(k):k}function r(k,N){return Object.prototype.hasOwnProperty.call(k,N)}function n(k,N){if(k===null||typeof k!="object")throw new TypeError("target is not an object");for(var F in N)r(N,F)&&(k[F]=N[F]);return k}var i=t({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function o(k){return r(i,k.toLowerCase())}var u=t({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function a(k){return r(u,k.toLowerCase())}var p=t({script:!1,style:!1,textarea:!0,title:!0});function h(k){var N=k.toLowerCase();return r(p,N)&&!p[N]}function m(k){var N=k.toLowerCase();return r(p,N)&&p[N]}function v(k){return k===x.HTML}function w(k){return v(k)||k===x.XML_XHTML_APPLICATION}var x=t({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),P=Object.keys(x).map(function(k){return x[k]});function T(k){return P.indexOf(k)>-1}var R=t({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Ps.assign=n,Ps.find=e,Ps.freeze=t,Ps.HTML_BOOLEAN_ATTRIBUTES=i,Ps.HTML_RAW_TEXT_ELEMENTS=p,Ps.HTML_VOID_ELEMENTS=u,Ps.hasDefaultHTMLNamespace=w,Ps.hasOwn=r,Ps.isHTMLBooleanAttribute=o,Ps.isHTMLRawTextElement=h,Ps.isHTMLEscapableRawTextElement=m,Ps.isHTMLMimeType=v,Ps.isHTMLVoidElement=a,Ps.isValidMimeType=T,Ps.MIME_TYPE=x,Ps.NAMESPACE=R,Ps}var ym={},A8;function o2(){if(A8)return ym;A8=1;var e=Lg();function t(w,x){w.prototype=Object.create(Error.prototype,{constructor:{value:w},name:{value:w.name,enumerable:!0,writable:x}})}var r=e.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),n=Object.keys(r);function i(w){return typeof w=="number"&&w>=1&&w<=25}function o(w){return typeof w=="string"&&w.substring(w.length-r.Error.length)===r.Error}function u(w,x){i(w)?(this.name=n[w],this.message=x||""):(this.message=w,this.name=o(x)?x:r.Error),Error.captureStackTrace&&Error.captureStackTrace(this,u)}t(u,!0),Object.defineProperties(u.prototype,{code:{enumerable:!0,get:function(){var w=n.indexOf(this.name);return i(w)?w:0}}});for(var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},p=Object.entries(a),h=0;h<p.length;h++){var m=p[h][0];u[m]=p[h][1]}function v(w,x){this.message=w,this.locator=x,Error.captureStackTrace&&Error.captureStackTrace(this,v)}return t(v),ym.DOMException=u,ym.DOMExceptionName=r,ym.ExceptionCode=a,ym.ParseError=v,ym}var go={},di={},P8;function YU(){if(P8)return di;P8=1;function e(Gt){try{typeof Gt!="function"&&(Gt=RegExp);var vt=new Gt("𝌆","u").exec("𝌆");return!!vt&&vt[0].length===2}catch{}return!1}var t=e();function r(Gt){if(Gt.source[0]!=="[")throw new Error(Gt+" can not be used with chars");return Gt.source.slice(1,Gt.source.lastIndexOf("]"))}function n(Gt,vt){if(Gt.source[0]!=="[")throw new Error("/"+Gt.source+"/ can not be used with chars_without");if(!vt||typeof vt!="string")throw new Error(JSON.stringify(vt)+" is not a valid search");if(Gt.source.indexOf(vt)===-1)throw new Error('"'+vt+'" is not is /'+Gt.source+"/");if(vt==="-"&&Gt.source.indexOf(vt)!==1)throw new Error('"'+vt+'" is not at the first postion of /'+Gt.source+"/");return new RegExp(Gt.source.replace(vt,""),t?"u":"")}function i(Gt){var vt=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(Pr){var Tr=typeof Pr=="string";if(Tr&&vt===void 0&&Pr==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return Tr?Pr:Pr.source}).join(""),t?"mu":"m")}function o(Gt){if(arguments.length===0)throw new Error("no parameters provided");return i.apply(o,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var u="�",a=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;t&&(a=i("[",r(a),"\\u{10000}-\\u{10FFFF}","]"));var p=/[\x20\x09\x0D\x0A]/,h=r(p),m=i(p,"+"),v=i(p,"*"),w=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;t&&(w=i("[",r(w),"\\u{10000}-\\u{10FFFF}","]"));var x=r(w),P=i("[",x,r(/[-.0-9\xB7]/),r(/[\u0300-\u036F\u203F-\u2040]/),"]"),T=i(w,P,"*"),R=i(P,"+"),k=i("&",T,";"),N=o(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),F=o(k,"|",N),D=i("%",T,";"),U=o(i('"',o(/[^%&"]/,"|",D,"|",F),"*",'"'),"|",i("'",o(/[^%&']/,"|",D,"|",F),"*","'")),B=o('"',o(/[^<&"]/,"|",F),"*",'"',"|","'",o(/[^<&']/,"|",F),"*","'"),Z=n(w,":"),J=n(P,":"),X=i(Z,J,"*"),le=i(X,o(":",X),"?"),H=i("^",le,"$"),G=i("(",le,")"),ae=o(/"[^"]*"|'[^']*'/),se=i(/^<\?/,"(",T,")",o(m,"(",a,"*?)"),"?",/\?>/),ue=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,me=o('"',ue,'*"',"|","'",n(ue,"'"),"*'"),Ce="<!--",pe="-->",Ee=i(Ce,o(n(a,"-"),"|",i("-",n(a,"-"))),"*",pe),Fe="#PCDATA",Ke=o(i(/\(/,v,Fe,o(v,/\|/,v,le),"*",v,/\)\*/),"|",i(/\(/,v,Fe,v,/\)/)),fe=/[?*+]?/,_e=i(/\([^>]+\)/,fe),Pe=o("EMPTY","|","ANY","|",Ke,"|",_e),ke="<!ELEMENT",$e=i(ke,m,o(le,"|",D),m,o(Pe,"|",D),v,">"),ht=i("NOTATION",m,/\(/,v,T,o(v,/\|/,v,T),"*",v,/\)/),Ot=i(/\(/,v,R,o(v,/\|/,v,R),"*",v,/\)/),mt=o(ht,"|",Ot),nt=o(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",mt),Nt=o(/#REQUIRED|#IMPLIED/,"|",o(o("#FIXED",m),"?",B)),kt=o(m,T,m,nt,m,Nt),It="<!ATTLIST",gt=i(It,m,T,kt,"*",v,">"),Le="about:legacy-compat",pr=o('"'+Le+'"',"|","'"+Le+"'"),hr="SYSTEM",vr="PUBLIC",Qt=o(o(hr,m,ae),"|",o(vr,m,me,m,ae)),qe=i("^",o(o(hr,m,"(?<SystemLiteralOnly>",ae,")"),"|",o(vr,m,"(?<PubidLiteral>",me,")",m,"(?<SystemLiteral>",ae,")"))),rt=o(m,"NDATA",m,T),ct=o(U,"|",o(Qt,rt,"?")),Ft="<!ENTITY",Yt=i(Ft,m,T,m,ct,v,">"),Wt=o(U,"|",Qt),ur=i(Ft,m,"%",m,T,m,Wt,v,">"),br=o(Yt,"|",ur),xr=i(vr,m,me),Rr=i("<!NOTATION",m,T,m,o(Qt,"|",xr),v,">"),wr=i(v,"=",v),fr=/1[.]\d+/,bt=i(m,"version",wr,o("'",fr,"'","|",'"',fr,'"')),ve=/[A-Za-z][-A-Za-z0-9._]*/,xe=o(m,"encoding",wr,o('"',ve,'"',"|","'",ve,"'")),Ae=o(m,"standalone",wr,o("'",o("yes","|","no"),"'","|",'"',o("yes","|","no"),'"')),Ue=i(/^<\?xml/,bt,xe,"?",Ae,"?",v,/\?>/),tt="<!DOCTYPE",_t="<![CDATA[",Mt="]]>",Pt=/<!\[CDATA\[/,Kt=/\]\]>/,zt=i(a,"*?",Kt),Ct=i(Pt,zt);return di.chars=r,di.chars_without=n,di.detectUnicodeSupport=e,di.reg=i,di.regg=o,di.ABOUT_LEGACY_COMPAT=Le,di.ABOUT_LEGACY_COMPAT_SystemLiteral=pr,di.AttlistDecl=gt,di.CDATA_START=_t,di.CDATA_END=Mt,di.CDSect=Ct,di.Char=a,di.Comment=Ee,di.COMMENT_START=Ce,di.COMMENT_END=pe,di.DOCTYPE_DECL_START=tt,di.elementdecl=$e,di.EntityDecl=br,di.EntityValue=U,di.ExternalID=Qt,di.ExternalID_match=qe,di.Name=T,di.NotationDecl=Rr,di.Reference=F,di.PEReference=D,di.PI=se,di.PUBLIC=vr,di.PubidLiteral=me,di.QName=le,di.QName_exact=H,di.QName_group=G,di.S=m,di.SChar_s=h,di.S_OPT=v,di.SYSTEM=hr,di.SystemLiteral=ae,di.UNICODE_REPLACEMENT_CHARACTER=u,di.UNICODE_SUPPORT=t,di.XMLDecl=Ue,di}var T8;function JU(){if(T8)return go;T8=1;var e=Lg(),t=e.find,r=e.hasDefaultHTMLNamespace,n=e.hasOwn,i=e.isHTMLMimeType,o=e.isHTMLRawTextElement,u=e.isHTMLVoidElement,a=e.MIME_TYPE,p=e.NAMESPACE,h=Symbol(),m=o2(),v=m.DOMException,w=m.DOMExceptionName,x=YU();function P(ne){if(ne!==h)throw new TypeError("Illegal constructor")}function T(ne){return ne!==""}function R(ne){return ne?ne.split(/[\t\n\f\r ]+/).filter(T):[]}function k(ne,de){return n(ne,de)||(ne[de]=!0),ne}function N(ne){if(!ne)return[];var de=R(ne);return Object.keys(de.reduce(k,{}))}function F(ne){return function(de){return ne&&ne.indexOf(de)!==-1}}function D(ne){if(!x.QName_exact.test(ne))throw new v(v.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+ne+'"')}function U(ne,de){D(de),ne=ne||null;var Be=null,et=de;if(de.indexOf(":")>=0){var Lt=de.split(":");Be=Lt[0],et=Lt[1]}if(Be!==null&&ne===null)throw new v(v.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(Be==="xml"&&ne!==e.NAMESPACE.XML)throw new v(v.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((Be==="xmlns"||de==="xmlns")&&ne!==e.NAMESPACE.XMLNS)throw new v(v.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(ne===e.NAMESPACE.XMLNS&&Be!=="xmlns"&&de!=="xmlns")throw new v(v.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[ne,Be,et]}function B(ne,de){for(var Be in ne)n(ne,Be)&&(de[Be]=ne[Be])}function Z(ne,de){var Be=ne.prototype;if(!(Be instanceof de)){let et=function(){};et.prototype=de.prototype,et=new et,B(Be,et),ne.prototype=Be=et}Be.constructor!=ne&&(typeof ne!="function"&&console.error("unknown Class:"+ne),Be.constructor=ne)}var J={},X=J.ELEMENT_NODE=1,le=J.ATTRIBUTE_NODE=2,H=J.TEXT_NODE=3,G=J.CDATA_SECTION_NODE=4,ae=J.ENTITY_REFERENCE_NODE=5,se=J.ENTITY_NODE=6,ue=J.PROCESSING_INSTRUCTION_NODE=7,me=J.COMMENT_NODE=8,Ce=J.DOCUMENT_NODE=9,pe=J.DOCUMENT_TYPE_NODE=10,Ee=J.DOCUMENT_FRAGMENT_NODE=11,Fe=J.NOTATION_NODE=12,Ke=e.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function fe(ne,de){if(de.length<ne.length)return fe(de,ne);var Be=null;for(var et in ne){if(ne[et]!==de[et])return Be;Be=ne[et]}return Be}function _e(ne){return ne.guid||(ne.guid=Math.random()),ne.guid}function Pe(){}Pe.prototype={length:0,item:function(ne){return ne>=0&&ne<this.length?this[ne]:null},toString:function(ne){for(var de=[],Be=0;Be<this.length;Be++)Tr(this[Be],de,ne);return de.join("")},filter:function(ne){return Array.prototype.filter.call(this,ne)},indexOf:function(ne){return Array.prototype.indexOf.call(this,ne)}},Pe.prototype[Symbol.iterator]=function(){var ne=this,de=0;return{next:function(){return de<ne.length?{value:ne[de++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function ke(ne,de){this._node=ne,this._refresh=de,$e(this)}function $e(ne){var de=ne._node._inc||ne._node.ownerDocument._inc;if(ne._inc!==de){var Be=ne._refresh(ne._node);if(jt(ne,"length",Be.length),!ne.$$length||Be.length<ne.$$length)for(var et=Be.length;et in ne;et++)n(ne,et)&&delete ne[et];B(Be,ne),ne._inc=de}}ke.prototype.item=function(ne){return $e(this),this[ne]||null},Z(ke,Pe);function ht(){}function Ot(ne,de){for(var Be=0;Be<ne.length;){if(ne[Be]===de)return Be;Be++}}function mt(ne,de,Be,et){if(et?de[Ot(de,et)]=Be:(de[de.length]=Be,de.length++),ne){Be.ownerElement=ne;var Lt=ne.ownerDocument;Lt&&(et&&hr(Lt,ne,et),pr(Lt,ne,Be))}}function nt(ne,de,Be){var et=Ot(de,Be);if(et>=0){for(var Lt=de.length-1;et<=Lt;)de[et]=de[++et];if(de.length=Lt,ne){var lr=ne.ownerDocument;lr&&hr(lr,ne,Be),Be.ownerElement=null}}}ht.prototype={length:0,item:Pe.prototype.item,getNamedItem:function(ne){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(ne=ne.toLowerCase());for(var de=0;de<this.length;){var Be=this[de];if(Be.nodeName===ne)return Be;de++}return null},setNamedItem:function(ne){var de=ne.ownerElement;if(de&&de!==this._ownerElement)throw new v(v.INUSE_ATTRIBUTE_ERR);var Be=this.getNamedItemNS(ne.namespaceURI,ne.localName);return Be===ne?ne:(mt(this._ownerElement,this,ne,Be),Be)},setNamedItemNS:function(ne){return this.setNamedItem(ne)},removeNamedItem:function(ne){var de=this.getNamedItem(ne);if(!de)throw new v(v.NOT_FOUND_ERR,ne);return nt(this._ownerElement,this,de),de},removeNamedItemNS:function(ne,de){var Be=this.getNamedItemNS(ne,de);if(!Be)throw new v(v.NOT_FOUND_ERR,ne?ne+" : "+de:de);return nt(this._ownerElement,this,Be),Be},getNamedItemNS:function(ne,de){ne||(ne=null);for(var Be=0;Be<this.length;){var et=this[Be];if(et.localName===de&&et.namespaceURI===ne)return et;Be++}return null}},ht.prototype[Symbol.iterator]=function(){var ne=this,de=0;return{next:function(){return de<ne.length?{value:ne[de++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function Nt(){}Nt.prototype={hasFeature:function(ne,de){return!0},createDocument:function(ne,de,Be){var et=a.XML_APPLICATION;ne===p.HTML?et=a.XML_XHTML_APPLICATION:ne===p.SVG&&(et=a.XML_SVG_IMAGE);var Lt=new Le(h,{contentType:et});if(Lt.implementation=this,Lt.childNodes=new Pe,Lt.doctype=Be||null,Be&&Lt.appendChild(Be),de){var lr=Lt.createElementNS(ne,de);Lt.appendChild(lr)}return Lt},createDocumentType:function(ne,de,Be,et){D(ne);var Lt=new tt(h);return Lt.name=ne,Lt.nodeName=ne,Lt.publicId=de||"",Lt.systemId=Be||"",Lt.internalSubset=et||"",Lt.childNodes=new Pe,Lt},createHTMLDocument:function(ne){var de=new Le(h,{contentType:a.HTML});if(de.implementation=this,de.childNodes=new Pe,ne!==!1){de.doctype=this.createDocumentType("html"),de.doctype.ownerDocument=de,de.appendChild(de.doctype);var Be=de.createElement("html");de.appendChild(Be);var et=de.createElement("head");if(Be.appendChild(et),typeof ne=="string"){var Lt=de.createElement("title");Lt.appendChild(de.createTextNode(ne)),et.appendChild(Lt)}Be.appendChild(de.createElement("body"))}return de}};function kt(ne){P(ne)}kt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var ne=this.getRootNode();return ne&&ne.nodeType===ne.DOCUMENT_NODE},contains:function(ne){if(!ne)return!1;var de=ne;do{if(this===de)return!0;de=ne.parentNode}while(de);return!1},getRootNode:function(ne){var de=this;do{if(!de.parentNode)return de;de=de.parentNode}while(de)},isEqualNode:function(ne){if(!ne||this.nodeType!==ne.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==ne.name||this.publicId!==ne.publicId||this.systemId!==ne.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==ne.namespaceURI||this.prefix!==ne.prefix||this.localName!==ne.localName||this.attributes.length!==ne.attributes.length)return!1;for(var de=0;de<this.attributes.length;de++){var Be=this.attributes.item(de);if(!Be.isEqualNode(ne.getAttributeNodeNS(Be.namespaceURI,Be.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==ne.namespaceURI||this.localName!==ne.localName||this.value!==ne.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==ne.target||this.data!==ne.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==ne.data)return!1;break}if(this.childNodes.length!==ne.childNodes.length)return!1;for(var de=0;de<this.childNodes.length;de++)if(!this.childNodes[de].isEqualNode(ne.childNodes[de]))return!1;return!0},isSameNode:function(ne){return this===ne},insertBefore:function(ne,de){return wr(this,ne,de)},replaceChild:function(ne,de){wr(this,ne,de,Rr),de&&this.removeChild(de)},removeChild:function(ne){return Qt(this,ne)},appendChild:function(ne){return this.insertBefore(ne,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(ne){return ot(this.ownerDocument||this,this,ne)},normalize:function(){for(var ne=this.firstChild;ne;){var de=ne.nextSibling;de&&de.nodeType==H&&ne.nodeType==H?(this.removeChild(de),ne.appendData(de.data)):(ne.normalize(),ne=de)}},isSupported:function(ne,de){return this.ownerDocument.implementation.hasFeature(ne,de)},lookupPrefix:function(ne){for(var de=this;de;){var Be=de._nsMap;if(Be){for(var et in Be)if(n(Be,et)&&Be[et]===ne)return et}de=de.nodeType==le?de.ownerDocument:de.parentNode}return null},lookupNamespaceURI:function(ne){for(var de=this;de;){var Be=de._nsMap;if(Be&&n(Be,ne))return Be[ne];de=de.nodeType==le?de.ownerDocument:de.parentNode}return null},isDefaultNamespace:function(ne){var de=this.lookupPrefix(ne);return de==null},compareDocumentPosition:function(ne){if(this===ne)return 0;var de=ne,Be=this,et=null,Lt=null;if(de instanceof bt&&(et=de,de=et.ownerElement),Be instanceof bt&&(Lt=Be,Be=Lt.ownerElement,et&&de&&Be===de))for(var lr=0,qt;qt=Be.attributes[lr];lr++){if(qt===et)return Ke.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Ke.DOCUMENT_POSITION_PRECEDING;if(qt===Lt)return Ke.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+Ke.DOCUMENT_POSITION_FOLLOWING}if(!de||!Be||Be.ownerDocument!==de.ownerDocument)return Ke.DOCUMENT_POSITION_DISCONNECTED+Ke.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(_e(Be.ownerDocument)>_e(de.ownerDocument)?Ke.DOCUMENT_POSITION_FOLLOWING:Ke.DOCUMENT_POSITION_PRECEDING);if(Lt&&de===Be)return Ke.DOCUMENT_POSITION_CONTAINS+Ke.DOCUMENT_POSITION_PRECEDING;if(et&&de===Be)return Ke.DOCUMENT_POSITION_CONTAINED_BY+Ke.DOCUMENT_POSITION_FOLLOWING;for(var zr=[],kr=de.parentNode;kr;){if(!Lt&&kr===Be)return Ke.DOCUMENT_POSITION_CONTAINED_BY+Ke.DOCUMENT_POSITION_FOLLOWING;zr.push(kr),kr=kr.parentNode}zr.reverse();for(var sn=[],xn=Be.parentNode;xn;){if(!et&&xn===de)return Ke.DOCUMENT_POSITION_CONTAINS+Ke.DOCUMENT_POSITION_PRECEDING;sn.push(xn),xn=xn.parentNode}sn.reverse();var yr=fe(zr,sn);for(var Vr in yr.childNodes){var Kr=yr.childNodes[Vr];if(Kr===Be)return Ke.DOCUMENT_POSITION_FOLLOWING;if(Kr===de)return Ke.DOCUMENT_POSITION_PRECEDING;if(sn.indexOf(Kr)>=0)return Ke.DOCUMENT_POSITION_FOLLOWING;if(zr.indexOf(Kr)>=0)return Ke.DOCUMENT_POSITION_PRECEDING}return 0}};function It(ne){return ne=="<"&&"&lt;"||ne==">"&&"&gt;"||ne=="&"&&"&amp;"||ne=='"'&&"&quot;"||"&#"+ne.charCodeAt()+";"}B(J,kt),B(J,kt.prototype),B(Ke,kt),B(Ke,kt.prototype);function gt(ne,de){if(de(ne))return!0;if(ne=ne.firstChild)do if(gt(ne,de))return!0;while(ne=ne.nextSibling)}function Le(ne,de){P(ne);var Be=de||{};this.ownerDocument=this,this.contentType=Be.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function pr(ne,de,Be){ne&&ne._inc++;var et=Be.namespaceURI;et===p.XMLNS&&(de._nsMap[Be.prefix?Be.localName:""]=Be.value)}function hr(ne,de,Be,et){ne&&ne._inc++;var Lt=Be.namespaceURI;Lt===p.XMLNS&&delete de._nsMap[Be.prefix?Be.localName:""]}function vr(ne,de,Be){if(ne&&ne._inc){ne._inc++;var et=de.childNodes;if(Be&&!Be.nextSibling)et[et.length++]=Be;else{for(var Lt=de.firstChild,lr=0;Lt;)et[lr++]=Lt,Lt=Lt.nextSibling;et.length=lr,delete et[et.length]}}}function Qt(ne,de){if(ne!==de.parentNode)throw new v(v.NOT_FOUND_ERR,"child's parent is not parent");var Be=de.previousSibling,et=de.nextSibling;return Be?Be.nextSibling=et:ne.firstChild=et,et?et.previousSibling=Be:ne.lastChild=Be,vr(ne.ownerDocument,ne),de.parentNode=null,de.previousSibling=null,de.nextSibling=null,de}function qe(ne){return ne&&(ne.nodeType===kt.DOCUMENT_NODE||ne.nodeType===kt.DOCUMENT_FRAGMENT_NODE||ne.nodeType===kt.ELEMENT_NODE)}function rt(ne){return ne&&(ne.nodeType===kt.CDATA_SECTION_NODE||ne.nodeType===kt.COMMENT_NODE||ne.nodeType===kt.DOCUMENT_FRAGMENT_NODE||ne.nodeType===kt.DOCUMENT_TYPE_NODE||ne.nodeType===kt.ELEMENT_NODE||ne.nodeType===kt.PROCESSING_INSTRUCTION_NODE||ne.nodeType===kt.TEXT_NODE)}function ct(ne){return ne&&ne.nodeType===kt.DOCUMENT_TYPE_NODE}function Ft(ne){return ne&&ne.nodeType===kt.ELEMENT_NODE}function Yt(ne){return ne&&ne.nodeType===kt.TEXT_NODE}function Wt(ne,de){var Be=ne.childNodes||[];if(t(Be,Ft)||ct(de))return!1;var et=t(Be,ct);return!(de&&et&&Be.indexOf(et)>Be.indexOf(de))}function ur(ne,de){var Be=ne.childNodes||[];function et(lr){return Ft(lr)&&lr!==de}if(t(Be,et))return!1;var Lt=t(Be,ct);return!(de&&Lt&&Be.indexOf(Lt)>Be.indexOf(de))}function br(ne,de,Be){if(!qe(ne))throw new v(v.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+ne.nodeType);if(Be&&Be.parentNode!==ne)throw new v(v.NOT_FOUND_ERR,"child not in parent");if(!rt(de)||ct(de)&&ne.nodeType!==kt.DOCUMENT_NODE)throw new v(v.HIERARCHY_REQUEST_ERR,"Unexpected node type "+de.nodeType+" for parent node type "+ne.nodeType)}function xr(ne,de,Be){var et=ne.childNodes||[],Lt=de.childNodes||[];if(de.nodeType===kt.DOCUMENT_FRAGMENT_NODE){var lr=Lt.filter(Ft);if(lr.length>1||t(Lt,Yt))throw new v(v.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(lr.length===1&&!Wt(ne,Be))throw new v(v.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Ft(de)&&!Wt(ne,Be))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ct(de)){if(t(et,ct))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var qt=t(et,Ft);if(Be&&et.indexOf(qt)<et.indexOf(Be))throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!Be&&qt)throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function Rr(ne,de,Be){var et=ne.childNodes||[],Lt=de.childNodes||[];if(de.nodeType===kt.DOCUMENT_FRAGMENT_NODE){var lr=Lt.filter(Ft);if(lr.length>1||t(Lt,Yt))throw new v(v.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(lr.length===1&&!ur(ne,Be))throw new v(v.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(Ft(de)&&!ur(ne,Be))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(ct(de)){if(t(et,function(kr){return ct(kr)&&kr!==Be}))throw new v(v.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var qt=t(et,Ft);if(Be&&et.indexOf(qt)<et.indexOf(Be))throw new v(v.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function wr(ne,de,Be,et){br(ne,de,Be),ne.nodeType===kt.DOCUMENT_NODE&&(et||xr)(ne,de,Be);var Lt=de.parentNode;if(Lt&&Lt.removeChild(de),de.nodeType===Ee){var lr=de.firstChild;if(lr==null)return de;var qt=de.lastChild}else lr=qt=de;var zr=Be?Be.previousSibling:ne.lastChild;lr.previousSibling=zr,qt.nextSibling=Be,zr?zr.nextSibling=lr:ne.firstChild=lr,Be==null?ne.lastChild=qt:Be.previousSibling=qt;do lr.parentNode=ne;while(lr!==qt&&(lr=lr.nextSibling));return vr(ne.ownerDocument||ne,ne,de),de.nodeType==Ee&&(de.firstChild=de.lastChild=null),de}Le.prototype={implementation:null,nodeName:"#document",nodeType:Ce,doctype:null,documentElement:null,_inc:1,insertBefore:function(ne,de){if(ne.nodeType===Ee){for(var Be=ne.firstChild;Be;){var et=Be.nextSibling;this.insertBefore(Be,de),Be=et}return ne}return wr(this,ne,de),ne.ownerDocument=this,this.documentElement===null&&ne.nodeType===X&&(this.documentElement=ne),ne},removeChild:function(ne){var de=Qt(this,ne);return de===this.documentElement&&(this.documentElement=null),de},replaceChild:function(ne,de){wr(this,ne,de,Rr),ne.ownerDocument=this,de&&this.removeChild(de),Ft(ne)&&(this.documentElement=ne)},importNode:function(ne,de){return Ye(this,ne,de)},getElementById:function(ne){var de=null;return gt(this.documentElement,function(Be){if(Be.nodeType==X&&Be.getAttribute("id")==ne)return de=Be,!0}),de},createElement:function(ne){var de=new fr(h);de.ownerDocument=this,this.type==="html"&&(ne=ne.toLowerCase()),r(this.contentType)&&(de.namespaceURI=p.HTML),de.nodeName=ne,de.tagName=ne,de.localName=ne,de.childNodes=new Pe;var Be=de.attributes=new ht;return Be._ownerElement=de,de},createDocumentFragment:function(){var ne=new Kt(h);return ne.ownerDocument=this,ne.childNodes=new Pe,ne},createTextNode:function(ne){var de=new xe(h);return de.ownerDocument=this,de.childNodes=new Pe,de.appendData(ne),de},createComment:function(ne){var de=new Ae(h);return de.ownerDocument=this,de.childNodes=new Pe,de.appendData(ne),de},createCDATASection:function(ne){var de=new Ue(h);return de.ownerDocument=this,de.childNodes=new Pe,de.appendData(ne),de},createProcessingInstruction:function(ne,de){var Be=new zt(h);return Be.ownerDocument=this,Be.childNodes=new Pe,Be.nodeName=Be.target=ne,Be.nodeValue=Be.data=de,Be},createAttribute:function(ne){if(!x.QName_exact.test(ne))throw new v(v.INVALID_CHARACTER_ERR,'invalid character in name "'+ne+'"');return this.type==="html"&&(ne=ne.toLowerCase()),this._createAttribute(ne)},_createAttribute:function(ne){var de=new bt(h);return de.ownerDocument=this,de.childNodes=new Pe,de.name=ne,de.nodeName=ne,de.localName=ne,de.specified=!0,de},createEntityReference:function(ne){if(!x.Name.test(ne))throw new v(v.INVALID_CHARACTER_ERR,'not a valid xml name "'+ne+'"');if(this.type==="html")throw new v("document is an html document",w.NotSupportedError);var de=new Pt(h);return de.ownerDocument=this,de.childNodes=new Pe,de.nodeName=ne,de},createElementNS:function(ne,de){var Be=U(ne,de),et=new fr(h),Lt=et.attributes=new ht;return et.childNodes=new Pe,et.ownerDocument=this,et.nodeName=de,et.tagName=de,et.namespaceURI=Be[0],et.prefix=Be[1],et.localName=Be[2],Lt._ownerElement=et,et},createAttributeNS:function(ne,de){var Be=U(ne,de),et=new bt(h);return et.ownerDocument=this,et.childNodes=new Pe,et.nodeName=de,et.name=de,et.specified=!0,et.namespaceURI=Be[0],et.prefix=Be[1],et.localName=Be[2],et}},Z(Le,kt);function fr(ne){P(ne),this._nsMap=Object.create(null)}fr.prototype={nodeType:X,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===p.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(ne){return!!this.getAttributeNode(ne)},getAttribute:function(ne){var de=this.getAttributeNode(ne);return de?de.value:null},getAttributeNode:function(ne){return this._isInHTMLDocumentAndNamespace()&&(ne=ne.toLowerCase()),this.attributes.getNamedItem(ne)},setAttribute:function(ne,de){this._isInHTMLDocumentAndNamespace()&&(ne=ne.toLowerCase());var Be=this.getAttributeNode(ne);Be?Be.value=Be.nodeValue=""+de:(Be=this.ownerDocument._createAttribute(ne),Be.value=Be.nodeValue=""+de,this.setAttributeNode(Be))},removeAttribute:function(ne){var de=this.getAttributeNode(ne);de&&this.removeAttributeNode(de)},setAttributeNode:function(ne){return this.attributes.setNamedItem(ne)},setAttributeNodeNS:function(ne){return this.attributes.setNamedItemNS(ne)},removeAttributeNode:function(ne){return this.attributes.removeNamedItem(ne.nodeName)},removeAttributeNS:function(ne,de){var Be=this.getAttributeNodeNS(ne,de);Be&&this.removeAttributeNode(Be)},hasAttributeNS:function(ne,de){return this.getAttributeNodeNS(ne,de)!=null},getAttributeNS:function(ne,de){var Be=this.getAttributeNodeNS(ne,de);return Be?Be.value:null},setAttributeNS:function(ne,de,Be){var et=U(ne,de),Lt=et[2],lr=this.getAttributeNodeNS(ne,Lt);lr?lr.value=lr.nodeValue=""+Be:(lr=this.ownerDocument.createAttributeNS(ne,de),lr.value=lr.nodeValue=""+Be,this.setAttributeNode(lr))},getAttributeNodeNS:function(ne,de){return this.attributes.getNamedItemNS(ne,de)},getElementsByClassName:function(ne){var de=N(ne);return new ke(this,function(Be){var et=[];return de.length>0&&gt(Be,function(Lt){if(Lt!==Be&&Lt.nodeType===X){var lr=Lt.getAttribute("class");if(lr){var qt=ne===lr;if(!qt){var zr=N(lr);qt=de.every(F(zr))}qt&&et.push(Lt)}}}),et})},getElementsByTagName:function(ne){var de=(this.nodeType===Ce?this:this.ownerDocument).type==="html",Be=ne.toLowerCase();return new ke(this,function(et){var Lt=[];return gt(et,function(lr){if(!(lr===et||lr.nodeType!==X))if(ne==="*")Lt.push(lr);else{var qt=lr.getQualifiedName(),zr=de&&lr.namespaceURI===p.HTML?Be:ne;qt===zr&&Lt.push(lr)}}),Lt})},getElementsByTagNameNS:function(ne,de){return new ke(this,function(Be){var et=[];return gt(Be,function(Lt){Lt!==Be&&Lt.nodeType===X&&(ne==="*"||Lt.namespaceURI===ne)&&(de==="*"||Lt.localName==de)&&et.push(Lt)}),et})}},Le.prototype.getElementsByClassName=fr.prototype.getElementsByClassName,Le.prototype.getElementsByTagName=fr.prototype.getElementsByTagName,Le.prototype.getElementsByTagNameNS=fr.prototype.getElementsByTagNameNS,Z(fr,kt);function bt(ne){P(ne),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}bt.prototype.nodeType=le,Z(bt,kt);function ve(ne){P(ne)}ve.prototype={data:"",substringData:function(ne,de){return this.data.substring(ne,ne+de)},appendData:function(ne){ne=this.data+ne,this.nodeValue=this.data=ne,this.length=ne.length},insertData:function(ne,de){this.replaceData(ne,0,de)},deleteData:function(ne,de){this.replaceData(ne,de,"")},replaceData:function(ne,de,Be){var et=this.data.substring(0,ne),Lt=this.data.substring(ne+de);Be=et+Be+Lt,this.nodeValue=this.data=Be,this.length=Be.length}},Z(ve,kt);function xe(ne){P(ne)}xe.prototype={nodeName:"#text",nodeType:H,splitText:function(ne){var de=this.data,Be=de.substring(ne);de=de.substring(0,ne),this.data=this.nodeValue=de,this.length=de.length;var et=this.ownerDocument.createTextNode(Be);return this.parentNode&&this.parentNode.insertBefore(et,this.nextSibling),et}},Z(xe,ve);function Ae(ne){P(ne)}Ae.prototype={nodeName:"#comment",nodeType:me},Z(Ae,ve);function Ue(ne){P(ne)}Ue.prototype={nodeName:"#cdata-section",nodeType:G},Z(Ue,xe);function tt(ne){P(ne)}tt.prototype.nodeType=pe,Z(tt,kt);function _t(ne){P(ne)}_t.prototype.nodeType=Fe,Z(_t,kt);function Mt(ne){P(ne)}Mt.prototype.nodeType=se,Z(Mt,kt);function Pt(ne){P(ne)}Pt.prototype.nodeType=ae,Z(Pt,kt);function Kt(ne){P(ne)}Kt.prototype.nodeName="#document-fragment",Kt.prototype.nodeType=Ee,Z(Kt,kt);function zt(ne){P(ne)}zt.prototype.nodeType=ue,Z(zt,ve);function Ct(){}Ct.prototype.serializeToString=function(ne,de){return Gt.call(ne,de)},kt.prototype.toString=Gt;function Gt(ne){var de=[],Be=this.nodeType===Ce&&this.documentElement||this,et=Be.prefix,Lt=Be.namespaceURI;if(Lt&&et==null){var et=Be.lookupPrefix(Lt);if(et==null)var lr=[{namespace:Lt,prefix:null}]}return Tr(this,de,ne,lr),de.join("")}function vt(ne,de,Be){var et=ne.prefix||"",Lt=ne.namespaceURI;if(!Lt||et==="xml"&&Lt===p.XML||Lt===p.XMLNS)return!1;for(var lr=Be.length;lr--;){var qt=Be[lr];if(qt.prefix===et)return qt.namespace!==Lt}return!0}function Pr(ne,de,Be){ne.push(" ",de,'="',Be.replace(/[<>&"\t\n\r]/g,It),'"')}function Tr(ne,de,Be,et){et||(et=[]);var Lt=ne.nodeType===Ce?ne:ne.ownerDocument,lr=Lt.type==="html";if(Be)if(ne=Be(ne),ne){if(typeof ne=="string"){de.push(ne);return}}else return;switch(ne.nodeType){case X:var qt=ne.attributes,zr=qt.length,Ri=ne.firstChild,kr=ne.tagName,sn=kr;if(!lr&&!ne.prefix&&ne.namespaceURI){for(var xn,yr=0;yr<qt.length;yr++)if(qt.item(yr).name==="xmlns"){xn=qt.item(yr).value;break}if(!xn)for(var Vr=et.length-1;Vr>=0;Vr--){var Kr=et[Vr];if(Kr.prefix===""&&Kr.namespace===ne.namespaceURI){xn=Kr.namespace;break}}if(xn!==ne.namespaceURI)for(var Vr=et.length-1;Vr>=0;Vr--){var Kr=et[Vr];if(Kr.namespace===ne.namespaceURI){Kr.prefix&&(sn=Kr.prefix+":"+kr);break}}}de.push("<",sn);for(var An=0;An<zr;An++){var Ni=qt.item(An);Ni.prefix=="xmlns"?et.push({prefix:Ni.localName,namespace:Ni.value}):Ni.nodeName=="xmlns"&&et.push({prefix:"",namespace:Ni.value})}for(var An=0;An<zr;An++){var Ni=qt.item(An);if(vt(Ni,lr,et)){var Mi=Ni.prefix||"",mn=Ni.namespaceURI;Pr(de,Mi?"xmlns:"+Mi:"xmlns",mn),et.push({prefix:Mi,namespace:mn})}Tr(Ni,de,Be,et)}if(kr===sn&&vt(ne,lr,et)){var Mi=ne.prefix||"",mn=ne.namespaceURI;Pr(de,Mi?"xmlns:"+Mi:"xmlns",mn),et.push({prefix:Mi,namespace:mn})}var Pi=!Ri;if(Pi&&(lr||ne.namespaceURI===p.HTML)&&(Pi=u(kr)),Pi)de.push("/>");else{if(de.push(">"),lr&&o(kr))for(;Ri;)Ri.data?de.push(Ri.data):Tr(Ri,de,Be,et.slice()),Ri=Ri.nextSibling;else for(;Ri;)Tr(Ri,de,Be,et.slice()),Ri=Ri.nextSibling;de.push("</",sn,">")}return;case Ce:case Ee:for(var Ri=ne.firstChild;Ri;)Tr(Ri,de,Be,et.slice()),Ri=Ri.nextSibling;return;case le:return Pr(de,ne.name,ne.value);case H:return de.push(ne.data.replace(/[<&>]/g,It));case G:return de.push(x.CDATA_START,ne.data,x.CDATA_END);case me:return de.push(x.COMMENT_START,ne.data,x.COMMENT_END);case pe:var ni=ne.publicId,Ji=ne.systemId;de.push(x.DOCTYPE_DECL_START," ",ne.name),ni?(de.push(" ",x.PUBLIC," ",ni),Ji&&Ji!=="."&&de.push(" ",Ji)):Ji&&Ji!=="."&&de.push(" ",x.SYSTEM," ",Ji),ne.internalSubset&&de.push(" [",ne.internalSubset,"]"),de.push(">");return;case ue:return de.push("<?",ne.target," ",ne.data,"?>");case ae:return de.push("&",ne.nodeName,";");default:de.push("??",ne.nodeName)}}function Ye(ne,de,Be){var et;switch(de.nodeType){case X:et=de.cloneNode(!1),et.ownerDocument=ne;case Ee:break;case le:Be=!0;break}if(et||(et=de.cloneNode(!1)),et.ownerDocument=ne,et.parentNode=null,Be)for(var Lt=de.firstChild;Lt;)et.appendChild(Ye(ne,Lt,Be)),Lt=Lt.nextSibling;return et}function ot(ne,de,Be){var et=new de.constructor(h);for(var Lt in de)if(n(de,Lt)){var lr=de[Lt];typeof lr!="object"&&lr!=et[Lt]&&(et[Lt]=lr)}switch(de.childNodes&&(et.childNodes=new Pe),et.ownerDocument=ne,et.nodeType){case X:var qt=de.attributes,zr=et.attributes=new ht,kr=qt.length;zr._ownerElement=et;for(var sn=0;sn<kr;sn++)et.setAttributeNode(ot(ne,qt.item(sn),!0));break;case le:Be=!0}if(Be)for(var xn=de.firstChild;xn;)et.appendChild(ot(ne,xn,Be)),xn=xn.nextSibling;return et}function jt(ne,de,Be){ne[de]=Be}try{if(Object.defineProperty){let ne=function(de){switch(de.nodeType){case X:case Ee:var Be=[];for(de=de.firstChild;de;)de.nodeType!==7&&de.nodeType!==8&&Be.push(ne(de)),de=de.nextSibling;return Be.join("");default:return de.nodeValue}};Object.defineProperty(ke.prototype,"length",{get:function(){return $e(this),this.$$length}}),Object.defineProperty(kt.prototype,"textContent",{get:function(){return ne(this)},set:function(de){switch(this.nodeType){case X:case Ee:for(;this.firstChild;)this.removeChild(this.firstChild);(de||String(de))&&this.appendChild(this.ownerDocument.createTextNode(de));break;default:this.data=de,this.value=de,this.nodeValue=de}}}),jt=function(de,Be,et){de["$$"+Be]=et}}}catch{}return go._updateLiveList=$e,go.Attr=bt,go.CDATASection=Ue,go.CharacterData=ve,go.Comment=Ae,go.Document=Le,go.DocumentFragment=Kt,go.DocumentType=tt,go.DOMImplementation=Nt,go.Element=fr,go.Entity=Mt,go.EntityReference=Pt,go.LiveNodeList=ke,go.NamedNodeMap=ht,go.Node=kt,go.NodeList=Pe,go.Notation=_t,go.Text=xe,go.ProcessingInstruction=zt,go.XMLSerializer=Ct,go}var Dd={},lC={},I8;function zye(){return I8||(I8=1,(function(e){var t=Lg().freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),e.entityMap=e.HTML_ENTITIES})(lC)),lC}var Fy={},M8;function $ye(){if(M8)return Fy;M8=1;var e=Lg(),t=YU(),r=o2(),n=e.isHTMLEscapableRawTextElement,i=e.isHTMLMimeType,o=e.isHTMLRawTextElement,u=e.hasOwn,a=e.NAMESPACE,p=r.ParseError,h=r.DOMException,m=0,v=1,w=2,x=3,P=4,T=5,R=6,k=7;function N(){}N.prototype={parse:function(ue,me,Ce){var pe=this.domBuilder;pe.startDocument(),X(me,me=Object.create(null)),D(ue,me,Ce,pe,this.errorHandler),pe.endDocument()}};var F=/&#?\w+;?/g;function D(ue,me,Ce,pe,Ee){var Fe=i(pe.mimeType);ue.indexOf(t.UNICODE_REPLACEMENT_CHARACTER)>=0&&Ee.warning("Unicode replacement character detected, source encoding issues?");function Ke(wr){if(wr>65535){wr-=65536;var fr=55296+(wr>>10),bt=56320+(wr&1023);return String.fromCharCode(fr,bt)}else return String.fromCharCode(wr)}function fe(wr){var fr=wr[wr.length-1]===";"?wr:wr+";";if(!Fe&&fr!==wr)return Ee.error("EntityRef: expecting ;"),wr;var bt=t.Reference.exec(fr);if(!bt||bt[0].length!==fr.length)return Ee.error("entity not matching Reference production: "+wr),wr;var ve=fr.slice(1,-1);return u(Ce,ve)?Ce[ve]:ve.charAt(0)==="#"?Ke(parseInt(ve.substring(1).replace("x","0x"))):(Ee.error("entity not found:"+wr),wr)}function _e(wr){if(wr>Nt){var fr=ue.substring(Nt,wr).replace(F,fe);ht&&Ot(Nt),pe.characters(fr,0,wr-Nt),Nt=wr}}var Pe=0,ke=0,$e=/\r\n?|\n|$/g,ht=pe.locator;function Ot(wr,fr){for(;wr>=ke&&(fr=$e.exec(ue));)Pe=ke,ke=fr.index+fr[0].length,ht.lineNumber++;ht.columnNumber=wr-Pe+1}for(var mt=[{currentNSMap:me}],nt=[],Nt=0;;){try{var kt=ue.indexOf("<",Nt);if(kt<0){if(!Fe&&nt.length>0)return Ee.fatalError("unclosed xml tag(s): "+nt.join(", "));if(!ue.substring(Nt).match(/^\s*$/)){var It=pe.doc,gt=It.createTextNode(ue.substring(Nt));if(It.documentElement)return Ee.error("Extra content at the end of the document");It.appendChild(gt),pe.currentElement=gt}return}if(kt>Nt){var Le=ue.substring(Nt,kt);!Fe&&nt.length===0&&(Le=Le.replace(new RegExp(t.S_OPT.source,"g"),""),Le&&Ee.error("Unexpected content outside root element: '"+Le+"'")),_e(kt)}switch(ue.charAt(kt+1)){case"/":var Wt=ue.indexOf(">",kt+2),pr=ue.substring(kt+2,Wt>0?Wt:void 0);if(!pr)return Ee.fatalError("end tag name missing");var hr=Wt>0&&t.reg("^",t.QName_group,t.S_OPT,"$").exec(pr);if(!hr)return Ee.fatalError('end tag name contains invalid characters: "'+pr+'"');if(!pe.currentElement&&!pe.doc.documentElement)return;var vr=nt[nt.length-1]||pe.currentElement.tagName||pe.doc.documentElement.tagName||"";if(vr!==hr[1]){var Qt=hr[1].toLowerCase();if(!Fe||vr.toLowerCase()!==Qt)return Ee.fatalError('Opening and ending tag mismatch: "'+vr+'" != "'+pr+'"')}var qe=mt.pop();nt.pop();var rt=qe.localNSMap;if(pe.endElement(qe.uri,qe.localName,vr),rt)for(var ct in rt)u(rt,ct)&&pe.endPrefixMapping(ct);Wt++;break;case"?":ht&&Ot(kt),Wt=ae(ue,kt,pe,Ee);break;case"!":ht&&Ot(kt),Wt=G(ue,kt,pe,Ee,Fe);break;default:ht&&Ot(kt);var Ft=new se,Yt=mt[mt.length-1].currentNSMap,Wt=B(ue,kt,Ft,Yt,fe,Ee,Fe),ur=Ft.length;if(Ft.closed||(Fe&&e.isHTMLVoidElement(Ft.tagName)?Ft.closed=!0:nt.push(Ft.tagName)),ht&&ur){for(var br=U(ht,{}),xr=0;xr<ur;xr++){var Rr=Ft[xr];Ot(Rr.offset),Rr.locator=U(ht,{})}pe.locator=br,Z(Ft,pe,Yt)&&mt.push(Ft),pe.locator=ht}else Z(Ft,pe,Yt)&&mt.push(Ft);Fe&&!Ft.closed?Wt=J(ue,Wt,Ft.tagName,fe,pe):Wt++}}catch(wr){if(wr instanceof p)throw wr;if(wr instanceof h)throw new p(wr.name+": "+wr.message,pe.locator,wr);Ee.error("element parse error: "+wr),Wt=-1}Wt>Nt?Nt=Wt:_e(Math.max(kt,Nt)+1)}}function U(ue,me){return me.lineNumber=ue.lineNumber,me.columnNumber=ue.columnNumber,me}function B(ue,me,Ce,pe,Ee,Fe,Ke){function fe(Ot,mt,nt){if(u(Ce.attributeNames,Ot))return Fe.fatalError("Attribute "+Ot+" redefined");if(!Ke&&mt.indexOf("<")>=0)return Fe.fatalError("Unescaped '<' not allowed in attributes values");Ce.addValue(Ot,mt.replace(/[\t\n\r]/g," ").replace(F,Ee),nt)}for(var _e,Pe,ke=++me,$e=m;;){var ht=ue.charAt(ke);switch(ht){case"=":if($e===v)_e=ue.slice(me,ke),$e=x;else if($e===w)$e=x;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if($e===x||$e===v)if($e===v&&(Fe.warning('attribute value must after "="'),_e=ue.slice(me,ke)),me=ke+1,ke=ue.indexOf(ht,me),ke>0)Pe=ue.slice(me,ke),fe(_e,Pe,me-1),$e=T;else throw new Error("attribute value no end '"+ht+"' match");else if($e==P)Pe=ue.slice(me,ke),fe(_e,Pe,me),Fe.warning('attribute "'+_e+'" missed start quot('+ht+")!!"),me=ke+1,$e=T;else throw new Error('attribute value must after "="');break;case"/":switch($e){case m:Ce.setTagName(ue.slice(me,ke));case T:case R:case k:$e=k,Ce.closed=!0;case P:case v:break;case w:Ce.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Fe.error("unexpected end of input"),$e==m&&Ce.setTagName(ue.slice(me,ke)),ke;case">":switch($e){case m:Ce.setTagName(ue.slice(me,ke));case T:case R:case k:break;case P:case v:Pe=ue.slice(me,ke),Pe.slice(-1)==="/"&&(Ce.closed=!0,Pe=Pe.slice(0,-1));case w:$e===w&&(Pe=_e),$e==P?(Fe.warning('attribute "'+Pe+'" missed quot(")!'),fe(_e,Pe,me)):(Ke||Fe.warning('attribute "'+Pe+'" missed value!! "'+Pe+'" instead!!'),fe(Pe,Pe,me));break;case x:if(!Ke)return Fe.fatalError(`AttValue: ' or " expected`)}return ke;case"":ht=" ";default:if(ht<=" ")switch($e){case m:Ce.setTagName(ue.slice(me,ke)),$e=R;break;case v:_e=ue.slice(me,ke),$e=w;break;case P:var Pe=ue.slice(me,ke);Fe.warning('attribute "'+Pe+'" missed quot(")!!'),fe(_e,Pe,me);case T:$e=R;break}else switch($e){case w:Ke||Fe.warning('attribute "'+_e+'" missed value!! "'+_e+'" instead2!!'),fe(_e,_e,me),me=ke,$e=v;break;case T:Fe.warning('attribute space is required"'+_e+'"!!');case R:$e=v,me=ke;break;case x:$e=P,me=ke;break;case k:throw new Error("elements closed character '/' and '>' must be connected to")}}ke++}}function Z(ue,me,Ce){for(var pe=ue.tagName,Ee=null,$e=ue.length;$e--;){var Fe=ue[$e],Ke=Fe.qName,fe=Fe.value,ht=Ke.indexOf(":");if(ht>0)var _e=Fe.prefix=Ke.slice(0,ht),Pe=Ke.slice(ht+1),ke=_e==="xmlns"&&Pe;else Pe=Ke,_e=null,ke=Ke==="xmlns"&&"";Fe.localName=Pe,ke!==!1&&(Ee==null&&(Ee=Object.create(null),X(Ce,Ce=Object.create(null))),Ce[ke]=Ee[ke]=fe,Fe.uri=a.XMLNS,me.startPrefixMapping(ke,fe))}for(var $e=ue.length;$e--;)Fe=ue[$e],Fe.prefix&&(Fe.prefix==="xml"&&(Fe.uri=a.XML),Fe.prefix!=="xmlns"&&(Fe.uri=Ce[Fe.prefix]));var ht=pe.indexOf(":");ht>0?(_e=ue.prefix=pe.slice(0,ht),Pe=ue.localName=pe.slice(ht+1)):(_e=null,Pe=ue.localName=pe);var Ot=ue.uri=Ce[_e||""];if(me.startElement(Ot,Pe,pe,ue),ue.closed){if(me.endElement(Ot,Pe,pe),Ee)for(_e in Ee)u(Ee,_e)&&me.endPrefixMapping(_e)}else return ue.currentNSMap=Ce,ue.localNSMap=Ee,!0}function J(ue,me,Ce,pe,Ee){var Fe=n(Ce);if(Fe||o(Ce)){var Ke=ue.indexOf("</"+Ce+">",me),fe=ue.substring(me+1,Ke);return Fe&&(fe=fe.replace(F,pe)),Ee.characters(fe,0,fe.length),Ke}return me+1}function X(ue,me){for(var Ce in ue)u(ue,Ce)&&(me[Ce]=ue[Ce])}function le(ue,me){var Ce=me;function pe(ke){return ke=ke||0,ue.charAt(Ce+ke)}function Ee(ke){ke=ke||1,Ce+=ke}function Fe(){for(var ke=0;Ce<ue.length;){var $e=pe();if($e!==" "&&$e!==`
`&&$e!=="	"&&$e!=="\r")return ke;ke++,Ee()}return-1}function Ke(){return ue.substring(Ce)}function fe(ke){return ue.substring(Ce,Ce+ke.length)===ke}function _e(ke){return ue.substring(Ce,Ce+ke.length).toUpperCase()===ke.toUpperCase()}function Pe(ke){var $e=t.reg("^",ke),ht=$e.exec(Ke());return ht?(Ee(ht[0].length),ht[0]):null}return{char:pe,getIndex:function(){return Ce},getMatch:Pe,getSource:function(){return ue},skip:Ee,skipBlanks:Fe,substringFromIndex:Ke,substringStartsWith:fe,substringStartsWithCaseInsensitive:_e}}function H(ue,me){function Ce(fe,_e){var Pe=t.PI.exec(fe.substringFromIndex());return Pe?Pe[1].toLowerCase()==="xml"?_e.fatalError("xml declaration is only allowed at the start of the document, but found at position "+fe.getIndex()):(fe.skip(Pe[0].length),Pe[0]):_e.fatalError("processing instruction is not well-formed at position "+fe.getIndex())}var pe=ue.getSource();if(ue.char()==="["){ue.skip(1);for(var Ee=ue.getIndex();ue.getIndex()<pe.length;){if(ue.skipBlanks(),ue.char()==="]"){var Fe=pe.substring(Ee,ue.getIndex());return ue.skip(1),Fe}var Ke=null;if(ue.char()==="<"&&ue.char(1)==="!")switch(ue.char(2)){case"E":ue.char(3)==="L"?Ke=ue.getMatch(t.elementdecl):ue.char(3)==="N"&&(Ke=ue.getMatch(t.EntityDecl));break;case"A":Ke=ue.getMatch(t.AttlistDecl);break;case"N":Ke=ue.getMatch(t.NotationDecl);break;case"-":Ke=ue.getMatch(t.Comment);break}else if(ue.char()==="<"&&ue.char(1)==="?")Ke=Ce(ue,me);else if(ue.char()==="%")Ke=ue.getMatch(t.PEReference);else return me.fatalError("Error detected in Markup declaration");if(!Ke)return me.fatalError("Error in internal subset at position "+ue.getIndex())}return me.fatalError("doctype internal subset is not well-formed, missing ]")}}function G(ue,me,Ce,pe,Ee){var Fe=le(ue,me);switch(Ee?Fe.char(2).toUpperCase():Fe.char(2)){case"-":var Ke=Fe.getMatch(t.Comment);return Ke?(Ce.comment(Ke,t.COMMENT_START.length,Ke.length-t.COMMENT_START.length-t.COMMENT_END.length),Fe.getIndex()):pe.fatalError("comment is not well-formed at position "+Fe.getIndex());case"[":var fe=Fe.getMatch(t.CDSect);return fe?!Ee&&!Ce.currentElement?pe.fatalError("CDATA outside of element"):(Ce.startCDATA(),Ce.characters(fe,t.CDATA_START.length,fe.length-t.CDATA_START.length-t.CDATA_END.length),Ce.endCDATA(),Fe.getIndex()):pe.fatalError("Invalid CDATA starting at position "+me);case"D":{if(Ce.doc&&Ce.doc.documentElement)return pe.fatalError("Doctype not allowed inside or after documentElement at position "+Fe.getIndex());if(Ee?!Fe.substringStartsWithCaseInsensitive(t.DOCTYPE_DECL_START):!Fe.substringStartsWith(t.DOCTYPE_DECL_START))return pe.fatalError("Expected "+t.DOCTYPE_DECL_START+" at position "+Fe.getIndex());if(Fe.skip(t.DOCTYPE_DECL_START.length),Fe.skipBlanks()<1)return pe.fatalError("Expected whitespace after "+t.DOCTYPE_DECL_START+" at position "+Fe.getIndex());var _e={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(_e.name=Fe.getMatch(t.Name),!_e.name)return pe.fatalError("doctype name missing or contains unexpected characters at position "+Fe.getIndex());if(Ee&&_e.name.toLowerCase()!=="html"&&pe.warning("Unexpected DOCTYPE in HTML document at position "+Fe.getIndex()),Fe.skipBlanks(),Fe.substringStartsWith(t.PUBLIC)||Fe.substringStartsWith(t.SYSTEM)){var Pe=t.ExternalID_match.exec(Fe.substringFromIndex());if(!Pe)return pe.fatalError("doctype external id is not well-formed at position "+Fe.getIndex());Pe.groups.SystemLiteralOnly!==void 0?_e.systemId=Pe.groups.SystemLiteralOnly:(_e.systemId=Pe.groups.SystemLiteral,_e.publicId=Pe.groups.PubidLiteral),Fe.skip(Pe[0].length)}else if(Ee&&Fe.substringStartsWithCaseInsensitive(t.SYSTEM)){if(Fe.skip(t.SYSTEM.length),Fe.skipBlanks()<1)return pe.fatalError("Expected whitespace after "+t.SYSTEM+" at position "+Fe.getIndex());if(_e.systemId=Fe.getMatch(t.ABOUT_LEGACY_COMPAT_SystemLiteral),!_e.systemId)return pe.fatalError("Expected "+t.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+t.SYSTEM+" at position "+Fe.getIndex())}return Ee&&_e.systemId&&!t.ABOUT_LEGACY_COMPAT_SystemLiteral.test(_e.systemId)&&pe.warning("Unexpected doctype.systemId in HTML document at position "+Fe.getIndex()),Ee||(Fe.skipBlanks(),_e.internalSubset=H(Fe,pe)),Fe.skipBlanks(),Fe.char()!==">"?pe.fatalError("doctype not terminated with > at position "+Fe.getIndex()):(Fe.skip(1),Ce.startDTD(_e.name,_e.publicId,_e.systemId,_e.internalSubset),Ce.endDTD(),Fe.getIndex())}default:return pe.fatalError('Not well-formed XML starting with "<!" at position '+me)}}function ae(ue,me,Ce,pe){var Ee=ue.substring(me).match(t.PI);if(!Ee)return pe.fatalError("Invalid processing instruction starting at position "+me);if(Ee[1].toLowerCase()==="xml"){if(me>0)return pe.fatalError("processing instruction at position "+me+" is an xml declaration which is only at the start of the document");if(!t.XMLDecl.test(ue.substring(me)))return pe.fatalError("xml declaration is not well-formed")}return Ce.processingInstruction(Ee[1],Ee[2]),me+Ee[0].length}function se(){this.attributeNames=Object.create(null)}return se.prototype={setTagName:function(ue){if(!t.QName_exact.test(ue))throw new Error("invalid tagName:"+ue);this.tagName=ue},addValue:function(ue,me,Ce){if(!t.QName_exact.test(ue))throw new Error("invalid attribute:"+ue);this.attributeNames[ue]=this.length,this[this.length++]={qName:ue,value:me,offset:Ce}},length:0,getLocalName:function(ue){return this[ue].localName},getLocator:function(ue){return this[ue].locator},getQName:function(ue){return this[ue].qName},getURI:function(ue){return this[ue].uri},getValue:function(ue){return this[ue].value}},Fy.XMLReader=N,Fy.parseUtils=le,Fy.parseDoctypeCommentOrCData=G,Fy}var R8;function qye(){if(R8)return Dd;R8=1;var e=Lg(),t=JU(),r=o2(),n=zye(),i=$ye(),o=t.DOMImplementation,u=e.hasDefaultHTMLNamespace,a=e.isHTMLMimeType,p=e.isValidMimeType,h=e.MIME_TYPE,m=e.NAMESPACE,v=r.ParseError,w=i.XMLReader;function x(B){return B.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function P(B){if(B=B||{},B.locator===void 0&&(B.locator=!0),this.assign=B.assign||e.assign,this.domHandler=B.domHandler||T,this.onError=B.onError||B.errorHandler,B.errorHandler&&typeof B.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");B.errorHandler&&B.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=B.normalizeLineEndings||x,this.locator=!!B.locator,this.xmlns=this.assign(Object.create(null),B.xmlns)}P.prototype.parseFromString=function(B,Z){if(!p(Z))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+Z+'" is not valid.');var J=this.assign(Object.create(null),this.xmlns),X=n.XML_ENTITIES,le=J[""]||null;u(Z)?(X=n.HTML_ENTITIES,le=m.HTML):Z===h.XML_SVG_IMAGE&&(le=m.SVG),J[""]=le,J.xml=J.xml||m.XML;var H=new this.domHandler({mimeType:Z,defaultNamespace:le,onError:this.onError}),G=this.locator?{}:void 0;this.locator&&H.setDocumentLocator(G);var ae=new w;ae.errorHandler=H,ae.domBuilder=H;var se=!e.isHTMLMimeType(Z);return se&&typeof B!="string"&&ae.errorHandler.fatalError("source is not a string"),ae.parse(this.normalizeLineEndings(String(B)),J,X),H.doc.documentElement||ae.errorHandler.fatalError("missing root element"),H.doc};function T(B){var Z=B||{};this.mimeType=Z.mimeType||h.XML_APPLICATION,this.defaultNamespace=Z.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=Z.onError}function R(B,Z){Z.lineNumber=B.lineNumber,Z.columnNumber=B.columnNumber}T.prototype={startDocument:function(){var B=new o;this.doc=a(this.mimeType)?B.createHTMLDocument(!1):B.createDocument(this.defaultNamespace,"")},startElement:function(B,Z,J,X){var le=this.doc,H=le.createElementNS(B,J||Z),G=X.length;F(this,H),this.currentElement=H,this.locator&&R(this.locator,H);for(var ae=0;ae<G;ae++){var B=X.getURI(ae),se=X.getValue(ae),J=X.getQName(ae),ue=le.createAttributeNS(B,J);this.locator&&R(X.getLocator(ae),ue),ue.value=ue.nodeValue=se,H.setAttributeNode(ue)}},endElement:function(B,Z,J){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(B,Z){},endPrefixMapping:function(B){},processingInstruction:function(B,Z){var J=this.doc.createProcessingInstruction(B,Z);this.locator&&R(this.locator,J),F(this,J)},ignorableWhitespace:function(B,Z,J){},characters:function(B,Z,J){if(B=N.apply(this,arguments),B){if(this.cdata)var X=this.doc.createCDATASection(B);else var X=this.doc.createTextNode(B);this.currentElement?this.currentElement.appendChild(X):/^\s*$/.test(B)&&this.doc.appendChild(X),this.locator&&R(this.locator,X)}},skippedEntity:function(B){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(B){B&&(B.lineNumber=0),this.locator=B},comment:function(B,Z,J){B=N.apply(this,arguments);var X=this.doc.createComment(B);this.locator&&R(this.locator,X),F(this,X)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(B,Z,J,X){var le=this.doc.implementation;if(le&&le.createDocumentType){var H=le.createDocumentType(B,Z,J,X);this.locator&&R(this.locator,H),F(this,H),this.doc.doctype=H}},reportError:function(B,Z){if(typeof this.onError=="function")try{this.onError(B,Z,this)}catch(J){throw new v("Reporting "+B+' "'+Z+'" caused '+J,this.locator)}else console.error("[xmldom "+B+"]	"+Z,k(this.locator))},warning:function(B){this.reportError("warning",B)},error:function(B){this.reportError("error",B)},fatalError:function(B){throw this.reportError("fatalError",B),new v(B,this.locator)}};function k(B){if(B)return`
@#[line:`+B.lineNumber+",col:"+B.columnNumber+"]"}function N(B,Z,J){return typeof B=="string"?B.substr(Z,J):B.length>=Z+J||Z?new java.lang.String(B,Z,J)+"":B}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(B){T.prototype[B]=function(){return null}});function F(B,Z){B.currentElement?B.currentElement.appendChild(Z):B.doc.appendChild(Z)}function D(B){if(B==="error")throw"onErrorStopParsing"}function U(){throw"onWarningStopParsing"}return Dd.__DOMHandler=T,Dd.DOMParser=P,Dd.normalizeLineEndings=x,Dd.onErrorStopParsing=D,Dd.onWarningStopParsing=U,Dd}var O8;function Uye(){if(O8)return zi;O8=1;var e=Lg();zi.assign=e.assign,zi.hasDefaultHTMLNamespace=e.hasDefaultHTMLNamespace,zi.isHTMLMimeType=e.isHTMLMimeType,zi.isValidMimeType=e.isValidMimeType,zi.MIME_TYPE=e.MIME_TYPE,zi.NAMESPACE=e.NAMESPACE;var t=o2();zi.DOMException=t.DOMException,zi.DOMExceptionName=t.DOMExceptionName,zi.ExceptionCode=t.ExceptionCode,zi.ParseError=t.ParseError;var r=JU();zi.Attr=r.Attr,zi.CDATASection=r.CDATASection,zi.CharacterData=r.CharacterData,zi.Comment=r.Comment,zi.Document=r.Document,zi.DocumentFragment=r.DocumentFragment,zi.DocumentType=r.DocumentType,zi.DOMImplementation=r.DOMImplementation,zi.Element=r.Element,zi.Entity=r.Entity,zi.EntityReference=r.EntityReference,zi.LiveNodeList=r.LiveNodeList,zi.NamedNodeMap=r.NamedNodeMap,zi.Node=r.Node,zi.NodeList=r.NodeList,zi.Notation=r.Notation,zi.ProcessingInstruction=r.ProcessingInstruction,zi.Text=r.Text,zi.XMLSerializer=r.XMLSerializer;var n=qye();return zi.DOMParser=n.DOMParser,zi.normalizeLineEndings=n.normalizeLineEndings,zi.onErrorStopParsing=n.onErrorStopParsing,zi.onWarningStopParsing=n.onWarningStopParsing,zi}var Vye=Uye();(function(){const e=/\s*/g,t=/^\s*|\s*$/g,r=/\s+/;function n(D){if(!D||!D.length)return 0;for(var U=0,B=0;U<D.length;U++)B=(B<<5)-B+D.charCodeAt(U)|0;return B}function i(D,U){return D.getElementsByTagName(U)}function o(D,U){return D.getAttribute(U)}function u(D,U){return parseFloat(o(D,U))}function a(D,U){const B=i(D,U);return B.length?B[0]:null}function p(D){return D.normalize&&D.normalize(),D}function h(D){for(var U=0,B=[];U<D.length;U++)B[U]=parseFloat(D[U]);return B}function m(D){return D&&p(D),D&&D.textContent||""}function v(D,U){let B={},Z,J;for(J=0;J<U.length;J++)Z=a(D,U[J]),Z&&(B[U[J]]=m(Z));return B}function w(D,U){for(const B in U)D[B]=U[B]}function x(D){return h(D.replace(e,"").split(","))}function P(D){const U=D.replace(t,"").split(r),B=[];for(let Z=0;Z<U.length;Z++)B.push(x(U[Z]));return B}function T(D){let U=[u(D,"lon"),u(D,"lat")],B=a(D,"ele"),Z=a(D,"gpxtpx:hr")||a(D,"hr"),J=a(D,"time"),X;return B&&(X=parseFloat(m(B)),isNaN(X)||U.push(X)),{coordinates:U,time:J?m(J):null,heartRate:Z?parseFloat(m(Z)):null}}function R(){return{type:"FeatureCollection",features:[]}}let k;if(typeof XMLSerializer<"u")k=new XMLSerializer;else{const D=typeof process=="object"&&!process.browser,U=typeof Titanium=="object";if(typeof exports=="object"&&(D||U))k=Vye.XMLSerializer;else throw new Error("Unable to initialize serializer")}function N(D){return D.xml!==void 0?D.xml:k.serializeToString(D)}return{kml:function(D){const U=R(),B={},Z={},J={},X=["Polygon","LineString","Point","Track","gx:Track"],le=i(D,"Placemark"),H=i(D,"Style"),G=i(D,"StyleMap");for(let pe=0;pe<H.length;pe++){const Ee=n(N(H[pe])).toString(16);B["#"+o(H[pe],"id")]=Ee,Z[Ee]=H[pe]}for(let pe=0;pe<G.length;pe++){B["#"+o(G[pe],"id")]=n(N(G[pe])).toString(16);const Ee=i(G[pe],"Pair"),Fe={};for(let Ke=0;Ke<Ee.length;Ke++)Fe[m(a(Ee[Ke],"key"))]=m(a(Ee[Ke],"styleUrl"));J["#"+o(G[pe],"id")]=Fe}for(let pe=0;pe<le.length;pe++)U.features=U.features.concat(Ce(le[pe]));function ae(pe){let Ee,Fe;return pe=pe||"",pe.substr(0,1)==="#"&&(pe=pe.substr(1)),(pe.length===6||pe.length===3)&&(Ee=pe),pe.length===8&&(Fe=parseInt(pe.substr(0,2),16)/255,Ee="#"+pe.substr(6,2)+pe.substr(4,2)+pe.substr(2,2)),[Ee,isNaN(Fe)?void 0:Fe]}function se(pe){return h(pe.split(" "))}function ue(pe){let Ee=i(pe,"coord"),Fe=[],Ke=[];Ee.length===0&&(Ee=i(pe,"gx:coord"));for(let _e=0;_e<Ee.length;_e++)Fe.push(se(m(Ee[_e])));const fe=i(pe,"when");for(let _e=0;_e<fe.length;_e++)Ke.push(m(fe[_e]));return{coords:Fe,times:Ke}}function me(pe){let Ee,Fe,Ke,fe,_e,Pe=[],ke=[];if(a(pe,"MultiGeometry"))return me(a(pe,"MultiGeometry"));if(a(pe,"MultiTrack"))return me(a(pe,"MultiTrack"));if(a(pe,"gx:MultiTrack"))return me(a(pe,"gx:MultiTrack"));for(Ke=0;Ke<X.length;Ke++)if(Fe=i(pe,X[Ke]),Fe){for(fe=0;fe<Fe.length;fe++)if(Ee=Fe[fe],X[Ke]==="Point")Pe.push({type:"Point",coordinates:x(m(a(Ee,"coordinates")))});else if(X[Ke]==="LineString")Pe.push({type:"LineString",coordinates:P(m(a(Ee,"coordinates")))});else if(X[Ke]==="Polygon"){const $e=i(Ee,"LinearRing"),ht=[];for(_e=0;_e<$e.length;_e++)ht.push(P(m(a($e[_e],"coordinates"))));Pe.push({type:"Polygon",coordinates:ht})}else if(X[Ke]==="Track"||X[Ke]==="gx:Track"){const $e=ue(Ee);Pe.push({type:"LineString",coordinates:$e.coords}),$e.times.length&&ke.push($e.times)}}return{geoms:Pe,coordTimes:ke}}function Ce(pe){let Ee=me(pe),Fe,Ke={},fe=m(a(pe,"name")),_e=m(a(pe,"address")),Pe=m(a(pe,"styleUrl")),ke=m(a(pe,"description")),$e=a(pe,"TimeSpan"),ht=a(pe,"TimeStamp"),Ot=a(pe,"ExtendedData"),mt=a(pe,"LineStyle"),nt=a(pe,"PolyStyle"),Nt=a(pe,"visibility");if(!Ee.geoms.length)return[];if(fe&&(Ke.name=fe),_e&&(Ke.address=_e),Pe){Pe[0]!=="#"&&(Pe="#"+Pe),Ke.styleUrl=Pe,B[Pe]&&(Ke.styleHash=B[Pe]),J[Pe]&&(Ke.styleMapHash=J[Pe],Ke.styleHash=B[J[Pe].normal]);const It=Z[Ke.styleHash];if(It){mt||(mt=a(It,"LineStyle")),nt||(nt=a(It,"PolyStyle"));const gt=a(It,"IconStyle");if(gt){const Le=a(gt,"Icon");if(Le){const pr=m(a(Le,"href"));pr&&(Ke.icon=pr)}}}}if(ke&&(Ke.description=ke),$e){const It=m(a($e,"begin")),gt=m(a($e,"end"));Ke.timespan={begin:It,end:gt}}if(ht&&(Ke.timestamp=m(a(ht,"when"))),mt){const It=ae(m(a(mt,"color"))),gt=It[0],Le=It[1],pr=parseFloat(m(a(mt,"width")));gt&&(Ke.stroke=gt),isNaN(Le)||(Ke["stroke-opacity"]=Le),isNaN(pr)||(Ke["stroke-width"]=pr)}if(nt){const It=ae(m(a(nt,"color"))),gt=It[0],Le=It[1],pr=m(a(nt,"fill")),hr=m(a(nt,"outline"));gt&&(Ke.fill=gt),isNaN(Le)||(Ke["fill-opacity"]=Le),pr&&(Ke["fill-opacity"]=pr==="1"?Ke["fill-opacity"]||1:0),hr&&(Ke["stroke-opacity"]=hr==="1"?Ke["stroke-opacity"]||1:0)}if(Ot){const It=i(Ot,"Data"),gt=i(Ot,"SimpleData");for(Fe=0;Fe<It.length;Fe++)Ke[It[Fe].getAttribute("name")]=m(a(It[Fe],"value"));for(Fe=0;Fe<gt.length;Fe++)Ke[gt[Fe].getAttribute("name")]=m(gt[Fe])}Nt&&(Ke.visibility=m(Nt)),Ee.coordTimes.length&&(Ke.coordTimes=Ee.coordTimes.length===1?Ee.coordTimes[0]:Ee.coordTimes);const kt={type:"Feature",geometry:Ee.geoms.length===1?Ee.geoms[0]:{type:"GeometryCollection",geometries:Ee.geoms},properties:Ke};return o(pe,"id")&&(kt.id=o(pe,"id")),[kt]}return U},gpx:function(D){let U,B=i(D,"trk"),Z=i(D,"rte"),J=i(D,"wpt"),X=R(),le;for(U=0;U<B.length;U++)le=ae(B[U]),le&&X.features.push(le);for(U=0;U<Z.length;U++)le=se(Z[U]),le&&X.features.push(le);for(U=0;U<J.length;U++)X.features.push(ue(J[U]));function H(pe,Ee){for(let Fe=0;Fe<Ee;Fe++)pe.push(null);return pe}function G(pe,Ee){const Fe=i(pe,Ee),Ke=[],fe=[],_e=[],Pe=Fe.length;if(Pe<2)return{};for(let ke=0;ke<Pe;ke++){const $e=T(Fe[ke]);Ke.push($e.coordinates),$e.time&&fe.push($e.time),($e.heartRate||_e.length)&&(_e.length||H(_e,ke),_e.push($e.heartRate||null))}return{line:Ke,times:fe,heartRates:_e}}function ae(pe){let Ee=i(pe,"trkseg"),Fe=[],Ke=[],fe=[],_e;for(let ke=0;ke<Ee.length;ke++)if(_e=G(Ee[ke],"trkpt"),_e&&(_e.line&&Fe.push(_e.line),_e.times&&_e.times.length&&Ke.push(_e.times),fe.length||_e.heartRates&&_e.heartRates.length)){if(!fe.length)for(let $e=0;$e<ke;$e++)fe.push(H([],Fe[$e].length));_e.heartRates&&_e.heartRates.length?fe.push(_e.heartRates):fe.push(H([],_e.line.length||0))}if(Fe.length===0)return;const Pe=Ce(pe);return w(Pe,me(a(pe,"extensions"))),Ke.length&&(Pe.coordTimes=Fe.length===1?Ke[0]:Ke),fe.length&&(Pe.heartRates=Fe.length===1?fe[0]:fe),{type:"Feature",properties:Pe,geometry:{type:Fe.length===1?"LineString":"MultiLineString",coordinates:Fe.length===1?Fe[0]:Fe}}}function se(pe){const Ee=G(pe,"rtept");if(!Ee.line)return;const Fe=Ce(pe);return w(Fe,me(a(pe,"extensions"))),{type:"Feature",properties:Fe,geometry:{type:"LineString",coordinates:Ee.line}}}function ue(pe){const Ee=Ce(pe);return w(Ee,v(pe,["sym"])),{type:"Feature",properties:Ee,geometry:{type:"Point",coordinates:T(pe).coordinates}}}function me(pe){const Ee={};if(pe){const Fe=a(pe,"line");if(Fe){const Ke=m(a(Fe,"color")),fe=parseFloat(m(a(Fe,"opacity"))),_e=parseFloat(m(a(Fe,"width")));Ke&&(Ee.stroke=Ke),isNaN(fe)||(Ee["stroke-opacity"]=fe),isNaN(_e)||(Ee["stroke-width"]=_e*96/25.4)}}return Ee}function Ce(pe){const Ee=v(pe,["name","cmt","desc","type","time","keywords"]),Fe=i(pe,"link");Fe.length&&(Ee.links=[]);for(let Ke=0,fe;Ke<Fe.length;Ke++)fe={href:o(Fe[Ke],"href")},w(fe,v(Fe[Ke],["text","type"])),Ee.links.push(fe);return Ee}return X}}})();const Gye=je.createContext({});Gye.Provider;const Hye=()=>{const e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(e?.layers?e.layers:"[]"),e};Hye();/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var Ii=e=>e!==void 0,QU=(e,t,r)=>t in e?e[t]:e[t]=r;const c1={ELEMENT:1,TEXT:3,CDATA_SECTION:4};function IM(e,t){return eV(e,t,[]).join("")}function eV(e,t,r){if(e.nodeType===c1.CDATA_SECTION||e.nodeType===c1.TEXT)r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)eV(n,t,r)}return r}function Wye(e,t,r,n){for(var i=Zye(t);i;i=Kye(i)){var o=i.namespaceURI||null,u=e[o];if(Ii(u)){var a=u[i.localName];Ii(a)&&a.call(n,i,r)}}}function Zye(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==c1.ELEMENT;)t=t.nextSibling;return t}function Kye(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==c1.ELEMENT;)t=t.nextSibling;return t}function Us(e,t,r){return Xye(e,t,r)}function Xye(e,t,r){var n=Ii(r)?r:{},i,o;for(i=0,o=e.length;i<o;++i)n[e[i]]=t;return n}function tV(e,t){return(function(r,n){var i=e.call(Ii(t)?t:this,r,n);if(Ii(i)){var o=n[n.length-1];o.push(i)}})}function Vs(e,t,r,n,i){return n.push(e),Wye(t,r,n,i),n.pop()}function In(e,t,r){return(function(n,i){let o=e.call(Ii(r)?r:this,n,i);if(Ii(o)){var u=i[i.length-1],a=Ii(t)?t:n.localName;u[a]=o}})}function Kl(e,t,r){return(function(n,i){var o=e.call(Ii(r)?r:this,n,i);if(Ii(o)){var u=i[i.length-1],a=Ii(t)?t:n.localName,p=QU(u,a,[]);p.push(o)}})}const Yye=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function Jye(e){return e.replace(Yye,"")}function op(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Ii(t[1])||!1}function Gm(e){return oh(IM(e,!1))}function oh(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function uC(e){return f1(IM(e,!1))}function f1(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Yi(e){return Jye(IM(e,!1))}const Qye="http://www.w3.org/1999/xlink";function MM(e){return e.getAttributeNS(Qye,"href")}function eve(e,t){return Vs({},Ave,e,t)}function rV(e){return[oh(e.getAttribute("minx")),oh(e.getAttribute("miny")),oh(e.getAttribute("maxx")),oh(e.getAttribute("maxy"))]}function tve(e,t){const r=rV(e),n=[oh(e.getAttribute("resx")),oh(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function rve(e,t){const r=rV(e);if(!(!Ii(r[0])||!Ii(r[1])||!Ii(r[2])||!Ii(r[3])))return r}function nve(e,t){const r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function ive(e,t){const r=Vs({},Pve,e,t);if(!Ii(r))return;const n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,u=r.northBoundLatitude;if(!(!Ii(n)||!Ii(i)||!Ii(o)||!Ii(u)))return[n,i,o,u]}function ave(e,t){return Vs({},_ve,e,t)}function ove(e,t){return Vs({},xve,e,t)}function sve(e,t){return Vs({},wve,e,t)}function lve(e,t){return Vs({},Sve,e,t)}function uve(e,t){return Vs({},Eve,e,t)}function cve(e,t){return Vs([],Cve,e,t)}function fve(e,t){const r=op(e.getAttribute("queryable"));return Vs({queryable:Ii(r)?r:!1},aV,e,t)}function hve(e,t){var r=t[t.length-1];const n=Vs({},aV,e,t);if(!Ii(n))return;let i=op(e.getAttribute("queryable"));Ii(i)||(i=r.queryable),n.queryable=Ii(i)?i:!1;let o=f1(e.getAttribute("cascaded"));Ii(o)||(o=r.cascaded),n.cascaded=o;let u=op(e.getAttribute("opaque"));Ii(u)||(u=r.opaque),n.opaque=Ii(u)?u:!1;let a=op(e.getAttribute("noSubsets"));Ii(a)||(a=r.noSubsets),n.noSubsets=Ii(a)?a:!1;let p=oh(e.getAttribute("fixedWidth"));Ii(p)||(p=r.fixedWidth),n.fixedWidth=p;let h=oh(e.getAttribute("fixedHeight"));Ii(h)||(h=r.fixedHeight),n.fixedHeight=h;const m=["Style","CRS","AuthorityURL"];for(let w=0,x=m.length;w<x;w++){const P=m[w],T=r[P];if(Ii(T)){let R=QU(n,P,[]);R=R.concat(T),n[P]=R}}const v=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let w=0,x=v.length;w<x;w++){const P=v[w],T=n[P];if(!Ii(T)){const R=r[P];n[P]=R}}return n}function dve(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:op(e.getAttribute("multipleValues")),nearestValue:op(e.getAttribute("nearestValue")),current:op(e.getAttribute("current")),values:Yi(e)}}function hh(e,t){return Vs({},kve,e,t)}function pve(e,t){return Vs({},Tve,e,t)}function mve(e,t){return Vs({},Mve,e,t)}function gve(e,t){return Vs({},Rve,e,t)}function cC(e,t){return Vs({},Ive,e,t)}function nV(e,t){var r=hh(e,t);if(Ii(r)){const n=[f1(e.getAttribute("width")),f1(e.getAttribute("height"))];return r.size=n,r}}function yve(e,t){var r=hh(e,t);if(Ii(r))return r.name=e.getAttribute("name"),r}function vve(e,t){var r=hh(e,t);if(Ii(r))return r.type=e.getAttribute("type"),r}function bve(e,t){return Vs({},Ove,e,t)}function iV(e,t){return Vs([],Lve,e,t)}const Gs=[null,"http://www.opengis.net/wms"];Us(Gs,{Service:In(ove),Capability:In(ave)});const _ve=Us(Gs,{Request:In(pve),Exception:In(cve),Layer:In(fve)}),xve=Us(Gs,{Name:In(Yi),Title:In(Yi),Abstract:In(Yi),KeywordList:In(iV),OnlineResource:In(MM),ContactInformation:In(sve),Fees:In(Yi),AccessConstraints:In(Yi),LayerLimit:In(uC),MaxWidth:In(uC),MaxHeight:In(uC)}),wve=Us(Gs,{ContactPersonPrimary:In(lve),ContactPosition:In(Yi),ContactAddress:In(uve),ContactVoiceTelephone:In(Yi),ContactFacsimileTelephone:In(Yi),ContactElectronicMailAddress:In(Yi)}),Sve=Us(Gs,{ContactPerson:In(Yi),ContactOrganization:In(Yi)}),Eve=Us(Gs,{AddressType:In(Yi),Address:In(Yi),City:In(Yi),StateOrProvince:In(Yi),PostCode:In(Yi),Country:In(Yi)}),Cve=Us(Gs,{Format:tV(Yi)}),aV=Us(Gs,{Name:In(Yi),Title:In(Yi),Abstract:In(Yi),KeywordList:In(iV),CRS:Kl(Yi),SRS:Kl(Yi),EX_GeographicBoundingBox:In(ive),LatLonBoundingBox:In(rve),BoundingBox:Kl(tve),Dimension:Kl(dve),Attribution:In(eve),AuthorityURL:Kl(yve),Identifier:Kl(Yi),MetadataURL:Kl(vve),DataURL:Kl(hh),FeatureListURL:Kl(hh),Style:Kl(bve),MinScaleDenominator:In(Gm),MaxScaleDenominator:In(Gm),ScaleHint:In(nve),Layer:Kl(hve)}),Ave=Us(Gs,{Title:In(Yi),OnlineResource:In(MM),LogoURL:In(nV)}),Pve=Us(Gs,{westBoundLongitude:In(Gm),eastBoundLongitude:In(Gm),southBoundLatitude:In(Gm),northBoundLatitude:In(Gm)}),Tve=Us(Gs,{GetCapabilities:In(cC),GetMap:In(cC),GetFeatureInfo:In(cC)}),Ive=Us(Gs,{Format:Kl(Yi),DCPType:Kl(mve)}),Mve=Us(Gs,{HTTP:In(gve)}),Rve=Us(Gs,{Get:In(hh),Post:In(hh)}),Ove=Us(Gs,{Name:In(Yi),Title:In(Yi),Abstract:In(Yi),LegendURL:Kl(nV),StyleSheetURL:In(hh),StyleURL:In(hh)}),kve=Us(Gs,{Format:In(Yi),OnlineResource:In(MM)}),Lve=Us(Gs,{Keyword:tV(Yi)});function oV(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function Dve(e,t){var r=oV(e);return function(n,i){return t(r(n),i,e)}}function Nve(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function RM(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function n(h,m){var v,w,x=i(h,function(P,T){if(v)return v(P,T-1);w=P,v=m?Dve(P,m):oV(P)});return x.columns=w,x}function i(h,m){var v={},w={},x=[],P=h.length,T=0,R=0,k,N;function F(){if(T>=P)return w;if(N)return N=!1,v;var U=T,B;if(h.charCodeAt(U)===34){for(var Z=U;Z++<P;)if(h.charCodeAt(Z)===34){if(h.charCodeAt(Z+1)!==34)break;++Z}return T=Z+2,B=h.charCodeAt(Z+1),B===13?(N=!0,h.charCodeAt(Z+2)===10&&++T):B===10&&(N=!0),h.slice(U+1,Z).replace(/""/g,'"')}for(;T<P;){var J=1;if(B=h.charCodeAt(T++),B===10)N=!0;else if(B===13)N=!0,h.charCodeAt(T)===10&&(++T,++J);else if(B!==r)continue;return h.slice(U,T-J)}return h.slice(U)}for(;(k=F())!==w;){for(var D=[];k!==v&&k!==w;)D.push(k),k=F();m&&(D=m(D,R++))==null||x.push(D)}return x}function o(h,m){return m==null&&(m=Nve(h)),[m.map(p).join(e)].concat(h.map(function(v){return m.map(function(w){return p(v[w])}).join(e)})).join(`
`)}function u(h){return h.map(a).join(`
`)}function a(h){return h.map(p).join(e)}function p(h){return h==null?"":t.test(h+="")?'"'+h.replace(/\"/g,'""')+'"':h}return{parse:n,parseRows:i,format:o,formatRows:u}}var s2=RM(","),Fve=s2.parse,Bve=s2.parseRows,jve=s2.format,zve=s2.formatRows,l2=RM("	"),$ve=l2.parse,qve=l2.parseRows,Uve=l2.format,Vve=l2.formatRows;const Gve=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:jve,csvFormatRows:zve,csvParse:Fve,csvParseRows:Bve,dsvFormat:RM,tsvFormat:Uve,tsvFormatRows:Vve,tsvParse:$ve,tsvParseRows:qve},Symbol.toStringTag,{value:"Module"})),Hve=wX(Gve);var Nd={exports:{}},k8;function Wve(){if(k8)return Nd.exports;k8=1,Nd.exports=e,Nd.exports.pair=o,Nd.exports.format=r,Nd.exports.formatPair=t,Nd.exports.coordToDMS=n;function e(a,p){var h=i(a,p);return h===null?null:h.val}function t(a){return r(a.lat,"lat")+" "+r(a.lon,"lon")}function r(a,p){var h=n(a,p);return h.whole+"° "+(h.minutes?h.minutes+"' ":"")+(h.seconds?h.seconds+'" ':"")+h.dir}function n(a,p){var h={lat:["N","S"],lon:["E","W"]}[p]||"",m=h[a>=0?0:1],v=Math.abs(a),w=Math.floor(v),x=v-w,P=x*60,T=Math.floor(P),R=Math.floor((P-T)*60);return{whole:w,minutes:T,seconds:R,dir:m}}function i(a,p){if(p||(p="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var h=/^[\s\,]*([NSEW])?\s*([\-|\—|\―]?[0-9.]+)[°º˚]?\s*(?:([0-9.]+)['’′‘]\s*)?(?:([0-9.]+)(?:''|"|”|″)\s*)?([NSEW])?/,m=a.match(h);if(!m)return null;var v=m[0],w;if(m[1]&&m[5]?(w=m[1],v=v.slice(0,-1)):w=m[1]||m[5],w&&p.indexOf(w)===-1)return null;var x=m[2]?parseFloat(m[2]):0,P=m[3]?parseFloat(m[3])/60:0,T=m[4]?parseFloat(m[4])/3600:0,R=x<0?-1:1;return(w==="S"||w==="W")&&(R*=-1),{val:(Math.abs(x)+P+T)*R,dim:w,matched:v,remain:a.slice(v.length)}}function o(a,p){a=a.trim();var h=i(a,p);if(!h)return null;a=h.remain.trim();var m=i(a,p);return!m||m.remain?null:h.dim?u(h.val,m.val,h.dim):[h.val,m.val]}function u(a,p,h){if(h==="N"||h==="S")return[a,p];if(h==="W"||h==="E")return[p,a]}return Nd.exports}var fC,L8;function Zve(){if(L8)return fC;L8=1;var e=Hve,t=Wve(),r=/(Lat)(itude)?/gi,n=/(L)(on|ng)(gitude)?/i;function i(R,k){var N,F,D;for(var U in R)F=U.match(k),F&&(!N||F[0].length/U.length>D)&&(D=F[0].length/U.length,N=U);return N}function o(R){return i(R,r)}function u(R){return i(R,n)}function a(R){return!!R.match(r)}function p(R){return!!R.match(n)}function h(R){return typeof R=="object"?Object.keys(R).length:0}function m(R){var k=[",",";","	","|"],N=[];return k.forEach(function(F){var D=e.dsvFormat(F).parse(R);if(D.length>=1){for(var U=h(D[0]),B=0;B<D.length;B++)if(h(D[B])!==U)return;N.push({delimiter:F,arity:Object.keys(D[0]).length})}}),N.length?N.sort(function(F,D){return D.arity-F.arity})[0].delimiter:null}function v(R){return delete R.columns,R}function w(R){var k=m(R);return k?v(e.dsvFormat(k).parse(R)):null}function x(R,k,N){N||(N=k,k={}),k.delimiter=k.delimiter||",";var F=k.latfield||"",D=k.lonfield||"",U=k.crs||"",B=[],Z={type:"FeatureCollection",features:B};if(U!==""&&(Z.crs={type:"name",properties:{name:U}}),k.delimiter==="auto"&&typeof R=="string"&&(k.delimiter=m(R),!k.delimiter)){N({type:"Error",message:"Could not autodetect delimiter"});return}var J=k.numericFields?k.numericFields.split(","):null,X=typeof R=="string"?e.dsvFormat(k.delimiter).parse(R,function(pe){if(J)for(var Ee in pe)J.includes(Ee)&&(pe[Ee]=+pe[Ee]);return pe}):R;if(!X.length){N(null,Z);return}var le=[],H;F||(F=o(X[0])),D||(D=u(X[0]));var G=!F||!D;if(G){for(H=0;H<X.length;H++)B.push({type:"Feature",properties:X[H],geometry:null});N(le.length?le:null,Z);return}for(H=0;H<X.length;H++)if(X[H][D]!==void 0&&X[H][F]!==void 0){var ae=X[H][D],se=X[H][F],ue,me,Ce;Ce=t(ae,"EW"),Ce&&(ae=Ce),Ce=t(se,"NS"),Ce&&(se=Ce),ue=parseFloat(ae),me=parseFloat(se),isNaN(ue)||isNaN(me)?le.push({message:"A row contained an invalid value for latitude or longitude",row:X[H],index:H}):(k.includeLatLon||(delete X[H][D],delete X[H][F]),B.push({type:"Feature",properties:X[H],geometry:{type:"Point",coordinates:[parseFloat(ue),parseFloat(me)]}}))}N(le.length?le:null,Z)}function P(R){for(var k=R.features,N={type:"Feature",geometry:{type:"LineString",coordinates:[]}},F=0;F<k.length;F++)N.geometry.coordinates.push(k[F].geometry.coordinates);return N.properties=k.reduce(function(D,U){for(var B in U.properties)D[B]||(D[B]=[]),D[B].push(U.properties[B]);return D},{}),{type:"FeatureCollection",features:[N]}}function T(R){for(var k=R.features,N={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},F=0;F<k.length;F++)N.geometry.coordinates[0].push(k[F].geometry.coordinates);return N.properties=k.reduce(function(D,U){for(var B in U.properties)D[B]||(D[B]=[]),D[B].push(U.properties[B]);return D},{}),{type:"FeatureCollection",features:[N]}}return fC={isLon:p,isLat:a,guessLatHeader:o,guessLonHeader:u,csv:e.csvParse,tsv:e.tsvParse,dsv:e,auto:w,csv2geojson:x,toLine:P,toPolygon:T},fC}Zve();var Il={},D8;function B0(){if(D8)return Il;D8=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.purgeProps=e,Il.first=t,Il.last=r,Il.coordsToKey=n,Il.addToMap=i,Il.removeFromMap=o,Il.getFirstFromMap=u,Il.isRing=a,Il.ringDirection=p,Il.pointInsidePolygon=h,Il.strArrayArrayToFloat=m,Il.strArrayToFloat=v;function e(w,x){if(w){const P=Object.assign({},w);if(x)for(const T of x)delete P[T];return P}return{}}function t(w){return w[0]}function r(w){return w[w.length-1]}function n(w){return w.join(",")}function i(w,x,P){const T=w[x];T?T.push(P):w[x]=[P]}function o(w,x,P){const T=w[x];let R=-1;T&&(R=T.indexOf(P)),R>=0&&T.splice(R,1)}function u(w,x){const P=w[x];return P&&P.length>0?P[0]:null}function a(w){return w.length>3&&n(t(w))===n(r(w))}function p(w,x,P){x=x||0,P=P||1;const T=w.reduce((X,le,H)=>w[X][x||0]>le[x||0]?X:H,0),R=T<=0?w.length-2:T-1,k=T>=w.length-1?1:T+1,N=w[R][x],F=w[T][x],D=w[k][x],U=w[R][P],B=w[T][P],Z=w[k][P];return(F-N)*(Z-U)-(D-N)*(B-U)<0?"clockwise":"counterclockwise"}function h(w,x,P,T){P=P||0,T=T||1;let R=!1;for(let k=0,N=x.length-1;k<x.length;N=k++)(x[k][P]<=w[P]&&w[P]<x[N][P]||x[N][P]<=w[P]&&w[P]<x[k][P])&&w[T]<(x[N][T]-x[k][T])*(w[P]-x[k][P])/(x[N][P]-x[k][P])+x[k][T]&&(R=!R);return R}function m(w){return w.map(v)}function v(w){return w.map(parseFloat)}return Il}var By={},N8;function Kve(){if(N8)return By;N8=1,Object.defineProperty(By,"__esModule",{value:!0}),By.XmlParser=void 0;function e(i){return i.match(/^(.+?)\[(.+?)\]>$/g)!==null}function t(i){const o=/^(.+?)\[(.+?)\]>$/g.exec(i);return o?{evt:o[1]+">",exp:o[2]}:{evt:i}}function r(i){const o="return "+i.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",o)}class n{constructor(o){this.queryParent=!1,this.progressive=!1,this.parentMap=new WeakMap,o&&(this.queryParent=!!o.queryParent,this.progressive=o.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(o,u,a){a=a?a+".":"";const p=/<([^ >\/]+)(.*?)>/mg,h=[];let m=p.exec(o);for(;m;){const v=m[1],w={$tag:v},x=a+v,P=m[2].trim();let T=!1;(P.endsWith("/")||v.startsWith("?")||v.startsWith("!"))&&(T=!0);const R=/([^ ]+?)="(.+?)"/g,k=/([^ ]+?)='(.+?)'/g;let N=R.exec(P),F=!1;for(;N;)F=!0,w[N[1]]=N[2],N=R.exec(P);if(!F)for(N=k.exec(P);N;)F=!0,w[N[1]]=N[2],N=k.exec(P);if(!F&&P!==""&&(w.text=P),this.progressive&&this.emit(`<${x}>`,w,u),!T){const D=new RegExp(`([^]+?)</${v}>`,"g");D.lastIndex=p.lastIndex;const U=D.exec(o);if(U&&U[1]){p.lastIndex=D.lastIndex;const B=this.parse(U[1],w,x);B.length>0?w.$innerNodes=B:w.$innerText=U[1]}}this.queryParent&&u&&this.parentMap.set(w,u),this.progressive&&this.emit(`</${x}>`,w,u),h.push(w),m=p.exec(o)}return h}getParent(o){return this.queryParent?this.parentMap.get(o):null}addListener(o,u){if(e(o)){const a=t(o);a.exp&&(u.condition=r(a.exp)),o=a.evt}this.$addListener(o,u)}removeListener(o,u){e(o)&&(o=t(o).evt),this.$removeListener(o,u)}on(o,u){this.addListener(o,u)}off(o,u){this.removeListener(o,u)}$addListener(o,u){const a=this.evtListeners[o];a?a.push(u):this.evtListeners[o]=[u]}$removeListener(o,u){const a=this.evtListeners[o];let p=-1;a&&(p=a.indexOf(u)),p>=0&&a.splice(p,1)}emit(o,...u){const a=this.evtListeners[o];if(a)for(const p of a)p.condition?p.condition.apply(null,u)===!0&&p.apply(null,u):p.apply(null,u)}}return By.XmlParser=n,By}var jy={},zy={},F8;function OM(){if(F8)return zy;F8=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.OsmObject=void 0;class e{constructor(r,n,i){this.type=r,this.id=n,this.refElems=i,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,i&&i.add(this.getCompositeId(),this)}addTags(r){this.tags=Object.assign(this.tags,r),this.hasTag=!0}addTag(r,n){this.tags[r]=n,this.hasTag=!0}addProp(r,n){this.props[r]=n}addProps(r){this.props=Object.assign(this.props,r)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}}return zy.OsmObject=e,zy}var B8;function sV(){if(B8)return jy;B8=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.Node=void 0;const e=OM(),t=B0();class r extends e.OsmObject{constructor(i,o){super("node",i,o)}setLatLng(i){this.latLng=i}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:(0,t.strArrayToFloat)([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}return jy.Node=r,jy}var Fd={},$y={},j8;function lV(){if(j8)return $y;j8=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.LateBinder=void 0;class e{constructor(r,n,i,o){this.container=r,this.valueFunc=n,this.ctx=i,this.args=o}bind(){const r=this.valueFunc.apply(this.ctx,this.args),n=this.container.indexOf(this);if(n<0)return;const i=[n,1];r&&i.push(r),Array.prototype.splice.apply(this.container,i)}}return $y.LateBinder=e,$y}const Xve={},Yve={whitelist:["services","rest_area","escape","elevator"]},Jve={blacklist:["coastline","cliff","ridge","arete","tree_row"]},Qve={},e0e={whitelist:["riverbank","dock","boatyard","dam"]},t0e={},r0e={},n0e={whitelist:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},i0e={whitelist:["station","turntable","roundhouse","platform"]},a0e={},o0e={},s0e={blacklist:["cutline","embankment","pipeline"]},l0e={whitelist:["plant","substation","generator","transformer"]},u0e={},c0e={},f0e={blacklist:["taxiway"]},h0e={},d0e={},p0e={},m0e={},g0e={},y0e={},v0e={},b0e={},_0e={},x0e={building:Xve,highway:Yve,natural:Jve,landuse:Qve,waterway:e0e,amenity:t0e,leisure:r0e,barrier:n0e,railway:i0e,area:a0e,boundary:o0e,man_made:s0e,power:l0e,place:u0e,shop:c0e,aeroway:f0e,tourism:h0e,historic:d0e,public_transport:p0e,office:m0e,"building:part":{},military:g0e,ruins:y0e,"area:highway":{},craft:v0e,golf:b0e,indoor:_0e};var z8;function uV(){if(z8)return Fd;z8=1;var e=Fd&&Fd.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.Way=void 0;const t=OM(),r=lV(),n=B0(),i=e(x0e);class o extends t.OsmObject{constructor(a,p){super("way",a,p),this.latLngArray=[],this.isPolygon=!1}addLatLng(a){this.latLngArray.push(a)}setLatLngArray(a){this.latLngArray=a}addNodeRef(a){const p=new r.LateBinder(this.latLngArray,h=>{const m=this.refElems.get(`node/${h}`);if(m)return m.refCount++,m.getLatLng()},this,[a]);this.latLngArray.push(p),this.refElems.addBinder(p)}addTags(a){super.addTags(a);for(const[p,h]of Object.entries(a))this.analyzeTag(p,h)}addTag(a,p){super.addTag(a,p),this.analyzeTag(a,p)}toCoordsArray(){return this.latLngArray.map(a=>[a.lon,a.lat])}toFeatureArray(){let a=this.toCoordsArray();if(a.length>1){const p=(0,n.strArrayArrayToFloat)(a),h={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:p}};return this.isPolygon&&(0,n.isRing)(p)?((0,n.ringDirection)(p)!=="counterclockwise"&&p.reverse(),h.geometry={type:"Polygon",coordinates:[p]},[h]):[h]}return[]}analyzeTag(a,p){const h=i.default[a];h&&(this.isPolygon=!0,h.whitelist?this.isPolygon=h.whitelist.indexOf(p)>=0:h.blacklist&&(this.isPolygon=!(h.blacklist.indexOf(p)>=0)))}}return Fd.Way=o,Fd}var qy={},Uy={},$8;function w0e(){if($8)return Uy;$8=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.WayCollection=void 0;const e=B0();class t extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay(n){const i=n.toCoordsArray();i.length>0&&(this.push(i),(0,e.addToMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.addToMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i))}mergeWays(){const n=[];let i=this.shift();for(;i;){(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(i)),i),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(i)),i);let o=i,u;do{let a=this.getNextWay(o);u=a.next;let p=a.mergeType;if(u)switch(this.splice(this.indexOf(u),1),(0,e.removeFromMap)(this.firstMap,(0,e.coordsToKey)((0,e.first)(u)),u),(0,e.removeFromMap)(this.lastMap,(0,e.coordsToKey)((0,e.last)(u)),u),p){case 0:o=o.concat(u.slice(1));break;case 1:u.reverse(),o=o.concat(u.slice(1));break;case 2:o.reverse(),o=o.concat(u.slice(1));break;case 3:o=u.concat(o.slice(1));break}}while(u);n.push((0,e.strArrayArrayToFloat)(o)),i=this.shift()}return n}getNextWay(n){const i=(0,e.coordsToKey)((0,e.last)(n)),o=(0,e.coordsToKey)((0,e.first)(n));let u=this.length>0?this[0]:null;if(u){const a=(0,e.coordsToKey)((0,e.first)(u)),p=(0,e.coordsToKey)((0,e.last)(u));if(i===a)return{next:u,mergeType:0};if(i===p)return{next:u,mergeType:1};if(o===a)return{next:u,mergeType:2};if(o===p)return{next:u,mergeType:3}}return u=(0,e.getFirstFromMap)(this.firstMap,i),u?{next:u,mergeType:0}:(u=(0,e.getFirstFromMap)(this.lastMap,i),{next:u,mergeType:1})}toRings(n){const i=this.mergeWays(),o=[];let u=i.shift();for(;u;)(0,e.isRing)(u)&&((0,e.ringDirection)(u)!==n&&u.reverse(),o.push(u)),u=i.shift();return o}}return Uy.WayCollection=t,Uy}var q8;function S0e(){if(q8)return qy;q8=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.Relation=void 0;const e=OM(),t=uV(),r=sV(),n=w0e(),i=lV(),o=B0();class u extends e.OsmObject{constructor(p,h){super("relation",p,h),this.relations=[],this.nodes=[],this.bounds=void 0,this.ways=[],this.roles=[]}setBounds(p){this.bounds=p}addMember(p){switch(p.type){case"relation":let h=new i.LateBinder(this.relations,v=>{const w=this.refElems.get(`relation/${v}`);if(w)return w.refCount++,w},this,[p.ref]);this.relations.push(h),this.refElems.addBinder(h);break;case"way":if(p.role||(p.role=""),p.geometry){const v=new t.Way(p.ref,this.refElems);v.setLatLngArray(p.geometry),v.refCount++,this.ways.push(v),this.roles.push(p.role)}else if(p.nodes){const v=new t.Way(p.ref,this.refElems);for(const w of p.nodes)v.addNodeRef(w);v.refCount++,this.ways.push(v),this.roles.push(p.role)}else{let v=new i.LateBinder(this.ways,w=>{const x=this.refElems.get(`way/${w}`);if(x)return x.refCount++,x},this,[p.ref]);this.ways.push(v),this.roles.push(p.role),this.refElems.addBinder(v)}break;case"node":let m=null;if(p.lat&&p.lon){m=new r.Node(p.ref,this.refElems),m.setLatLng({lon:p.lon,lat:p.lat}),p.tags&&m.addTags(p.tags);for(const[v,w]of Object.entries(p))["id","type","lat","lon"].indexOf(v)<0&&m.addProp(v,w);m.refCount++,this.nodes.push(m)}else{let v=new i.LateBinder(this.nodes,w=>{const x=this.refElems.get(`node/${w}`);if(x)return x.refCount++,x},this,[p.ref]);this.nodes.push(v),this.refElems.addBinder(v)}break}}constructStringGeometry(p){const h=p?p.mergeWays():[];return h.length===0?null:{type:"MultiLineString",coordinates:h}}constructPolygonGeometry(p,h){const m=p?p.toRings("counterclockwise"):[],v=h?h.toRings("clockwise"):[];if(m.length>0){const w=[];let x;for(x of m)w.push([x]);for(x=v.shift();x;){for(const P in m)if((0,o.pointInsidePolygon)((0,o.first)(x),m[P])){w[P].push(x);break}x=v.shift()}return w.length===1?{type:"Polygon",coordinates:w[0]}:{type:"MultiPolygon",coordinates:w}}return null}toFeatureArray(){const p=[],h=[];let m=[];for(const w of this.relations)if(w)for(let x=0;x<w.ways.length;x++){const P=w.ways[x];this.ways.push(P),this.roles.push(w.roles[x])}let v={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps(),geometry:null};if(this.bounds||delete v.bbox,this.roles.some(w=>w==="outer")){const w=new n.WayCollection,x=new n.WayCollection;for(let R=0;R<this.ways.length;R++){const k=this.ways[R],N=this.roles[R];N==="outer"?w.addWay(k):N==="inner"&&x.addWay(k)}let P=Object.assign({},v),T=this.constructPolygonGeometry(w,x);T&&(P.geometry=T,p.push(P))}else{const w=new n.WayCollection;for(let P of this.ways)w.addWay(P);let x=this.constructStringGeometry(w);if(x){let P=Object.assign({},v);P.geometry=x,h.push(P)}}for(let w of this.nodes)m=m.concat(w.toFeatureArray());return[...p,...h,...m]}}return qy.Relation=u,qy}var Vy={},U8;function E0e(){if(U8)return Vy;U8=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.RefElements=void 0;class e extends Map{constructor(){super(),this.binders=[]}add(r,n){this.set(r,n)}addBinder(r){this.binders.push(r)}bindAll(){this.binders.forEach(r=>r.bind())}}return Vy.RefElements=e,Vy}var hC,V8;function C0e(){if(V8)return hC;V8=1;const e=B0(),t=Kve(),r=sV(),n=uV(),i=S0e(),o=E0e();function u(v){if(!v)return{completeFeature:!1,renderTagged:!1,excludeWay:!0};let w=v.excludeWay===void 0||v.excludeWay,x=!!v.completeFeature,P=!!v.renderTagged;return{completeFeature:x,renderTagged:P,excludeWay:w}}function a(v){return v.elements?"json":v.indexOf("<osm")>=0?"xml":v.trim().startsWith("{")?"json-raw":"invalid"}function p(v,w){for(const x of v.elements)switch(x.type){case"node":const P=new r.Node(x.id,w);x.tags&&P.addTags(x.tags),P.addProps((0,e.purgeProps)(x,["id","type","tags","lat","lon"])),P.setLatLng(x);break;case"way":const T=new n.Way(x.id,w);if(x.tags&&T.addTags(x.tags),T.addProps((0,e.purgeProps)(x,["id","type","tags","nodes","geometry"])),x.geometry)T.setLatLngArray(x.geometry);else if(x.nodes)for(const k of x.nodes)T.addNodeRef(k);break;case"relation":const R=new i.Relation(x.id,w);if(x.bounds&&R.setBounds([parseFloat(x.bounds.minlon),parseFloat(x.bounds.minlat),parseFloat(x.bounds.maxlon),parseFloat(x.bounds.maxlat)]),x.tags&&R.addTags(x.tags),R.addProps((0,e.purgeProps)(x,["id","type","tags","bounds","members"])),x.members)for(const k of x.members)R.addMember(k)}}function h(v,w){const x=new t.XmlParser({progressive:!0});x.on("</osm.node>",P=>{const T=new r.Node(P.id,w);for(const[R,k]of Object.entries(P))!R.startsWith("$")&&["id","lon","lat"].indexOf(R)<0&&T.addProp(R,k);if(T.setLatLng(P),P.$innerNodes)for(const R of P.$innerNodes)R.$tag==="tag"&&T.addTag(R.k,R.v)}),x.on("</osm.way>",P=>{const T=new n.Way(P.id,w);for(const[R,k]of Object.entries(P))!R.startsWith("$")&&["id"].indexOf(R)<0&&T.addProp(R,k);if(P.$innerNodes)for(const R of P.$innerNodes)R.$tag==="nd"?R.lon&&R.lat?T.addLatLng(R):R.ref&&T.addNodeRef(R.ref):R.$tag==="tag"&&T.addTag(R.k,R.v)}),x.on("<osm.relation>",P=>new i.Relation(P.id,w)),x.on("</osm.relation.member>",(P,T)=>{const R=w.get(`relation/${T?.id}`),k={type:P.type,role:P.role?P.role:"",ref:P.ref};if(P.lat&&P.lon){k.lat=P.lat,k.lon=P.lon,k.tags={};for(const[N,F]of Object.entries(P))!N.startsWith("$")&&["type","lat","lon"].indexOf(N)<0&&(k[N]=F)}if(P.$innerNodes){const N=[],F=[];for(const D of P.$innerNodes)D.lat&&D.lon?N.push(D):D.ref&&F.push(D.ref);N.length>0?k.geometry=N:F.length>0&&(k.nodes=F)}R.addMember(k)}),x.on("</osm.relation.bounds>",(P,T)=>{w.get(`relation/${T?.id}`).setBounds([parseFloat(P.minlon),parseFloat(P.minlat),parseFloat(P.maxlon),parseFloat(P.maxlat)])}),x.on("</osm.relation.tag>",(P,T)=>{w.get(`relation/${T?.id}`).addTag(P.k,P.v)}),x.parse(v)}function m(v,w){let{completeFeature:x,renderTagged:P,excludeWay:T}=u(w),R=a(v);const k=new o.RefElements;let N=[];R==="json-raw"&&(v=JSON.parse(v),v.elements?R="json":R="invalid"),R==="json"?p(v,k):R==="xml"&&h(v,k),k.bindAll();for(const F of k.values()){if(F.refCount>0&&(!F.hasTag||!P||F instanceof n.Way&&T))continue;const D=F.toFeatureArray();if(F instanceof i.Relation&&!x&&D.length>0)return D[0].geometry;N=N.concat(D)}return{type:"FeatureCollection",features:N}}return hC=m,hC}C0e();var G8;(function(e){e.ABSOLUTE="absolute",e.RELATIVE_TO_GROUND="relativeToGround",e.CLAMP_TO_GROUND="clampToGround",e.CLAMP_TO_SEAFLOOR="clampToSeaFloor",e.RELATIVE_TO_SEAFLOOR="relativeToSeaFloor"})(G8||(G8={}));const A0e=je.createContext({});A0e.Provider;var P0e={value:()=>{}};function cV(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new M_(r)}function M_(e){this._=e}function T0e(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}M_.prototype=cV.prototype={constructor:M_,on:function(e,t){var r=this._,n=T0e(e+"",r),i,o=-1,u=n.length;if(arguments.length<2){for(;++o<u;)if((i=(e=n[o]).type)&&(i=I0e(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<u;)if(i=(e=n[o]).type)r[i]=H8(r[i],e.name,t);else if(t==null)for(i in r)r[i]=H8(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new M_(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,i=o.length;n<i;++n)o[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,o=n.length;i<o;++i)n[i].value.apply(t,r)}};function I0e(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function H8(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=P0e,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var pT="http://www.w3.org/1999/xhtml";const W8={svg:"http://www.w3.org/2000/svg",xhtml:pT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function u2(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),W8.hasOwnProperty(t)?{space:W8[t],local:e}:e}function M0e(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===pT&&t.documentElement.namespaceURI===pT?t.createElement(e):t.createElementNS(r,e)}}function R0e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fV(e){var t=u2(e);return(t.local?R0e:M0e)(t)}function O0e(){}function kM(e){return e==null?O0e:function(){return this.querySelector(e)}}function k0e(e){typeof e!="function"&&(e=kM(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,a=n[i]=new Array(u),p,h,m=0;m<u;++m)(p=o[m])&&(h=e.call(p,p.__data__,m,o))&&("__data__"in p&&(h.__data__=p.__data__),a[m]=h);return new Oc(n,this._parents)}function L0e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function D0e(){return[]}function hV(e){return e==null?D0e:function(){return this.querySelectorAll(e)}}function N0e(e){return function(){return L0e(e.apply(this,arguments))}}function F0e(e){typeof e=="function"?e=N0e(e):e=hV(e);for(var t=this._groups,r=t.length,n=[],i=[],o=0;o<r;++o)for(var u=t[o],a=u.length,p,h=0;h<a;++h)(p=u[h])&&(n.push(e.call(p,p.__data__,h,u)),i.push(p));return new Oc(n,i)}function dV(e){return function(){return this.matches(e)}}function pV(e){return function(t){return t.matches(e)}}var B0e=Array.prototype.find;function j0e(e){return function(){return B0e.call(this.children,e)}}function z0e(){return this.firstElementChild}function $0e(e){return this.select(e==null?z0e:j0e(typeof e=="function"?e:pV(e)))}var q0e=Array.prototype.filter;function U0e(){return Array.from(this.children)}function V0e(e){return function(){return q0e.call(this.children,e)}}function G0e(e){return this.selectAll(e==null?U0e:V0e(typeof e=="function"?e:pV(e)))}function H0e(e){typeof e!="function"&&(e=dV(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,a=n[i]=[],p,h=0;h<u;++h)(p=o[h])&&e.call(p,p.__data__,h,o)&&a.push(p);return new Oc(n,this._parents)}function mV(e){return new Array(e.length)}function W0e(){return new Oc(this._enter||this._groups.map(mV),this._parents)}function h1(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}h1.prototype={constructor:h1,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Z0e(e){return function(){return e}}function K0e(e,t,r,n,i,o){for(var u=0,a,p=t.length,h=o.length;u<h;++u)(a=t[u])?(a.__data__=o[u],n[u]=a):r[u]=new h1(e,o[u]);for(;u<p;++u)(a=t[u])&&(i[u]=a)}function X0e(e,t,r,n,i,o,u){var a,p,h=new Map,m=t.length,v=o.length,w=new Array(m),x;for(a=0;a<m;++a)(p=t[a])&&(w[a]=x=u.call(p,p.__data__,a,t)+"",h.has(x)?i[a]=p:h.set(x,p));for(a=0;a<v;++a)x=u.call(e,o[a],a,o)+"",(p=h.get(x))?(n[a]=p,p.__data__=o[a],h.delete(x)):r[a]=new h1(e,o[a]);for(a=0;a<m;++a)(p=t[a])&&h.get(w[a])===p&&(i[a]=p)}function Y0e(e){return e.__data__}function J0e(e,t){if(!arguments.length)return Array.from(this,Y0e);var r=t?X0e:K0e,n=this._parents,i=this._groups;typeof e!="function"&&(e=Z0e(e));for(var o=i.length,u=new Array(o),a=new Array(o),p=new Array(o),h=0;h<o;++h){var m=n[h],v=i[h],w=v.length,x=Q0e(e.call(m,m&&m.__data__,h,n)),P=x.length,T=a[h]=new Array(P),R=u[h]=new Array(P),k=p[h]=new Array(w);r(m,v,T,R,k,x,t);for(var N=0,F=0,D,U;N<P;++N)if(D=T[N]){for(N>=F&&(F=N+1);!(U=R[F])&&++F<P;);D._next=U||null}}return u=new Oc(u,n),u._enter=a,u._exit=p,u}function Q0e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ebe(){return new Oc(this._exit||this._groups.map(mV),this._parents)}function tbe(e,t,r){var n=this.enter(),i=this,o=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function rbe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,o=n.length,u=Math.min(i,o),a=new Array(i),p=0;p<u;++p)for(var h=r[p],m=n[p],v=h.length,w=a[p]=new Array(v),x,P=0;P<v;++P)(x=h[P]||m[P])&&(w[P]=x);for(;p<i;++p)a[p]=r[p];return new Oc(a,this._parents)}function nbe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,o=n[i],u;--i>=0;)(u=n[i])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function ibe(e){e||(e=abe);function t(v,w){return v&&w?e(v.__data__,w.__data__):!v-!w}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var u=r[o],a=u.length,p=i[o]=new Array(a),h,m=0;m<a;++m)(h=u[m])&&(p[m]=h);p.sort(t)}return new Oc(i,this._parents).order()}function abe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function obe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sbe(){return Array.from(this)}function lbe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var u=n[i];if(u)return u}return null}function ube(){let e=0;for(const t of this)++e;return e}function cbe(){return!this.node()}function fbe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,u=i.length,a;o<u;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function hbe(e){return function(){this.removeAttribute(e)}}function dbe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pbe(e,t){return function(){this.setAttribute(e,t)}}function mbe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gbe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function ybe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function vbe(e,t){var r=u2(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?dbe:hbe:typeof t=="function"?r.local?ybe:gbe:r.local?mbe:pbe)(r,t))}function gV(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bbe(e){return function(){this.style.removeProperty(e)}}function _be(e,t,r){return function(){this.style.setProperty(e,t,r)}}function xbe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function wbe(e,t,r){return arguments.length>1?this.each((t==null?bbe:typeof t=="function"?xbe:_be)(e,t,r??"")):yg(this.node(),e)}function yg(e,t){return e.style.getPropertyValue(t)||gV(e).getComputedStyle(e,null).getPropertyValue(t)}function Sbe(e){return function(){delete this[e]}}function Ebe(e,t){return function(){this[e]=t}}function Cbe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Abe(e,t){return arguments.length>1?this.each((t==null?Sbe:typeof t=="function"?Cbe:Ebe)(e,t)):this.node()[e]}function yV(e){return e.trim().split(/^|\s+/)}function LM(e){return e.classList||new vV(e)}function vV(e){this._node=e,this._names=yV(e.getAttribute("class")||"")}vV.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function bV(e,t){for(var r=LM(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function _V(e,t){for(var r=LM(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function Pbe(e){return function(){bV(this,e)}}function Tbe(e){return function(){_V(this,e)}}function Ibe(e,t){return function(){(t.apply(this,arguments)?bV:_V)(this,e)}}function Mbe(e,t){var r=yV(e+"");if(arguments.length<2){for(var n=LM(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?Ibe:t?Pbe:Tbe)(r,t))}function Rbe(){this.textContent=""}function Obe(e){return function(){this.textContent=e}}function kbe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Lbe(e){return arguments.length?this.each(e==null?Rbe:(typeof e=="function"?kbe:Obe)(e)):this.node().textContent}function Dbe(){this.innerHTML=""}function Nbe(e){return function(){this.innerHTML=e}}function Fbe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Bbe(e){return arguments.length?this.each(e==null?Dbe:(typeof e=="function"?Fbe:Nbe)(e)):this.node().innerHTML}function jbe(){this.nextSibling&&this.parentNode.appendChild(this)}function zbe(){return this.each(jbe)}function $be(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qbe(){return this.each($be)}function Ube(e){var t=typeof e=="function"?e:fV(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Vbe(){return null}function Gbe(e,t){var r=typeof e=="function"?e:fV(e),n=t==null?Vbe:typeof t=="function"?t:kM(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Hbe(){var e=this.parentNode;e&&e.removeChild(this)}function Wbe(){return this.each(Hbe)}function Zbe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kbe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xbe(e){return this.select(e?Kbe:Zbe)}function Ybe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Jbe(e){return function(t){e.call(this,t,this.__data__)}}function Qbe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function e_e(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,o;r<i;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++n]=o;++n?t.length=n:delete this.__on}}}function t_e(e,t,r){return function(){var n=this.__on,i,o=Jbe(t);if(n){for(var u=0,a=n.length;u<a;++u)if((i=n[u]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=t;return}}this.addEventListener(e.type,o,r),i={type:e.type,name:e.name,value:t,listener:o,options:r},n?n.push(i):this.__on=[i]}}function r_e(e,t,r){var n=Qbe(e+""),i,o=n.length,u;if(arguments.length<2){var a=this.node().__on;if(a){for(var p=0,h=a.length,m;p<h;++p)for(i=0,m=a[p];i<o;++i)if((u=n[i]).type===m.type&&u.name===m.name)return m.value}return}for(a=t?t_e:e_e,i=0;i<o;++i)this.each(a(n[i],t,r));return this}function xV(e,t,r){var n=gV(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function n_e(e,t){return function(){return xV(this,e,t)}}function i_e(e,t){return function(){return xV(this,e,t.apply(this,arguments))}}function a_e(e,t){return this.each((typeof t=="function"?i_e:n_e)(e,t))}function*o_e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length,u;i<o;++i)(u=n[i])&&(yield u)}var s_e=[null];function Oc(e,t){this._groups=e,this._parents=t}function j0(){return new Oc([[document.documentElement]],s_e)}function l_e(){return this}Oc.prototype=j0.prototype={constructor:Oc,select:k0e,selectAll:F0e,selectChild:$0e,selectChildren:G0e,filter:H0e,data:J0e,enter:W0e,exit:ebe,join:tbe,merge:rbe,selection:l_e,order:nbe,sort:ibe,call:obe,nodes:sbe,node:lbe,size:ube,empty:cbe,each:fbe,attr:vbe,style:wbe,property:Abe,classed:Mbe,text:Lbe,html:Bbe,raise:zbe,lower:qbe,append:Ube,insert:Gbe,remove:Wbe,clone:Xbe,datum:Ybe,on:r_e,dispatch:a_e,[Symbol.iterator]:o_e};function DM(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function wV(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function z0(){}var o0=.7,d1=1/o0,tg="\\s*([+-]?\\d+)\\s*",s0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u_e=/^#([0-9a-f]{3,8})$/,c_e=new RegExp(`^rgb\\(${tg},${tg},${tg}\\)$`),f_e=new RegExp(`^rgb\\(${bf},${bf},${bf}\\)$`),h_e=new RegExp(`^rgba\\(${tg},${tg},${tg},${s0}\\)$`),d_e=new RegExp(`^rgba\\(${bf},${bf},${bf},${s0}\\)$`),p_e=new RegExp(`^hsl\\(${s0},${bf},${bf}\\)$`),m_e=new RegExp(`^hsla\\(${s0},${bf},${bf},${s0}\\)$`),Z8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};DM(z0,l0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:K8,formatHex:K8,formatHex8:g_e,formatHsl:y_e,formatRgb:X8,toString:X8});function K8(){return this.rgb().formatHex()}function g_e(){return this.rgb().formatHex8()}function y_e(){return SV(this).formatHsl()}function X8(){return this.rgb().formatRgb()}function l0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=u_e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Y8(t):r===3?new Jl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Hb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Hb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=c_e.exec(e))?new Jl(t[1],t[2],t[3],1):(t=f_e.exec(e))?new Jl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=h_e.exec(e))?Hb(t[1],t[2],t[3],t[4]):(t=d_e.exec(e))?Hb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=p_e.exec(e))?eB(t[1],t[2]/100,t[3]/100,1):(t=m_e.exec(e))?eB(t[1],t[2]/100,t[3]/100,t[4]):Z8.hasOwnProperty(e)?Y8(Z8[e]):e==="transparent"?new Jl(NaN,NaN,NaN,0):null}function Y8(e){return new Jl(e>>16&255,e>>8&255,e&255,1)}function Hb(e,t,r,n){return n<=0&&(e=t=r=NaN),new Jl(e,t,r,n)}function v_e(e){return e instanceof z0||(e=l0(e)),e?(e=e.rgb(),new Jl(e.r,e.g,e.b,e.opacity)):new Jl}function mT(e,t,r,n){return arguments.length===1?v_e(e):new Jl(e,t,r,n??1)}function Jl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}DM(Jl,mT,wV(z0,{brighter(e){return e=e==null?d1:Math.pow(d1,e),new Jl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?o0:Math.pow(o0,e),new Jl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jl(sp(this.r),sp(this.g),sp(this.b),p1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:J8,formatHex:J8,formatHex8:b_e,formatRgb:Q8,toString:Q8}));function J8(){return`#${ep(this.r)}${ep(this.g)}${ep(this.b)}`}function b_e(){return`#${ep(this.r)}${ep(this.g)}${ep(this.b)}${ep((isNaN(this.opacity)?1:this.opacity)*255)}`}function Q8(){const e=p1(this.opacity);return`${e===1?"rgb(":"rgba("}${sp(this.r)}, ${sp(this.g)}, ${sp(this.b)}${e===1?")":`, ${e})`}`}function p1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ep(e){return e=sp(e),(e<16?"0":"")+e.toString(16)}function eB(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new wc(e,t,r,n)}function SV(e){if(e instanceof wc)return new wc(e.h,e.s,e.l,e.opacity);if(e instanceof z0||(e=l0(e)),!e)return new wc;if(e instanceof wc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),u=NaN,a=o-i,p=(o+i)/2;return a?(t===o?u=(r-n)/a+(r<n)*6:r===o?u=(n-t)/a+2:u=(t-r)/a+4,a/=p<.5?o+i:2-o-i,u*=60):a=p>0&&p<1?0:u,new wc(u,a,p,e.opacity)}function __e(e,t,r,n){return arguments.length===1?SV(e):new wc(e,t,r,n??1)}function wc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}DM(wc,__e,wV(z0,{brighter(e){return e=e==null?d1:Math.pow(d1,e),new wc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?o0:Math.pow(o0,e),new wc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Jl(dC(e>=240?e-240:e+120,i,n),dC(e,i,n),dC(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new wc(tB(this.h),Wb(this.s),Wb(this.l),p1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=p1(this.opacity);return`${e===1?"hsl(":"hsla("}${tB(this.h)}, ${Wb(this.s)*100}%, ${Wb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tB(e){return e=(e||0)%360,e<0?e+360:e}function Wb(e){return Math.max(0,Math.min(1,e||0))}function dC(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const EV=e=>()=>e;function x_e(e,t){return function(r){return e+r*t}}function w_e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function S_e(e){return(e=+e)==1?CV:function(t,r){return r-t?w_e(t,r,e):EV(isNaN(t)?r:t)}}function CV(e,t){var r=t-e;return r?x_e(e,r):EV(isNaN(e)?t:e)}const rB=(function e(t){var r=S_e(t);function n(i,o){var u=r((i=mT(i)).r,(o=mT(o)).r),a=r(i.g,o.g),p=r(i.b,o.b),h=CV(i.opacity,o.opacity);return function(m){return i.r=u(m),i.g=a(m),i.b=p(m),i.opacity=h(m),i+""}}return n.gamma=e,n})(1);function Fh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var gT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pC=new RegExp(gT.source,"g");function E_e(e){return function(){return e}}function C_e(e){return function(t){return e(t)+""}}function A_e(e,t){var r=gT.lastIndex=pC.lastIndex=0,n,i,o,u=-1,a=[],p=[];for(e=e+"",t=t+"";(n=gT.exec(e))&&(i=pC.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),a[u]?a[u]+=o:a[++u]=o),(n=n[0])===(i=i[0])?a[u]?a[u]+=i:a[++u]=i:(a[++u]=null,p.push({i:u,x:Fh(n,i)})),r=pC.lastIndex;return r<t.length&&(o=t.slice(r),a[u]?a[u]+=o:a[++u]=o),a.length<2?p[0]?C_e(p[0].x):E_e(t):(t=p.length,function(h){for(var m=0,v;m<t;++m)a[(v=p[m]).i]=v.x(h);return a.join("")})}var nB=180/Math.PI,yT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function AV(e,t,r,n,i,o){var u,a,p;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(p=e*r+t*n)&&(r-=e*p,n-=t*p),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,p/=a),e*n<t*r&&(e=-e,t=-t,p=-p,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*nB,skewX:Math.atan(p)*nB,scaleX:u,scaleY:a}}var Zb;function P_e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?yT:AV(t.a,t.b,t.c,t.d,t.e,t.f)}function T_e(e){return e==null||(Zb||(Zb=document.createElementNS("http://www.w3.org/2000/svg","g")),Zb.setAttribute("transform",e),!(e=Zb.transform.baseVal.consolidate()))?yT:(e=e.matrix,AV(e.a,e.b,e.c,e.d,e.e,e.f))}function PV(e,t,r,n){function i(h){return h.length?h.pop()+" ":""}function o(h,m,v,w,x,P){if(h!==v||m!==w){var T=x.push("translate(",null,t,null,r);P.push({i:T-4,x:Fh(h,v)},{i:T-2,x:Fh(m,w)})}else(v||w)&&x.push("translate("+v+t+w+r)}function u(h,m,v,w){h!==m?(h-m>180?m+=360:m-h>180&&(h+=360),w.push({i:v.push(i(v)+"rotate(",null,n)-2,x:Fh(h,m)})):m&&v.push(i(v)+"rotate("+m+n)}function a(h,m,v,w){h!==m?w.push({i:v.push(i(v)+"skewX(",null,n)-2,x:Fh(h,m)}):m&&v.push(i(v)+"skewX("+m+n)}function p(h,m,v,w,x,P){if(h!==v||m!==w){var T=x.push(i(x)+"scale(",null,",",null,")");P.push({i:T-4,x:Fh(h,v)},{i:T-2,x:Fh(m,w)})}else(v!==1||w!==1)&&x.push(i(x)+"scale("+v+","+w+")")}return function(h,m){var v=[],w=[];return h=e(h),m=e(m),o(h.translateX,h.translateY,m.translateX,m.translateY,v,w),u(h.rotate,m.rotate,v,w),a(h.skewX,m.skewX,v,w),p(h.scaleX,h.scaleY,m.scaleX,m.scaleY,v,w),h=m=null,function(x){for(var P=-1,T=w.length,R;++P<T;)v[(R=w[P]).i]=R.x(x);return v.join("")}}}var I_e=PV(P_e,"px, ","px)","deg)"),M_e=PV(T_e,", ",")",")"),vg=0,cv=0,Gy=0,TV=1e3,m1,fv,g1=0,pp=0,c2=0,u0=typeof performance=="object"&&performance.now?performance:Date,IV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function NM(){return pp||(IV(R_e),pp=u0.now()+c2)}function R_e(){pp=0}function y1(){this._call=this._time=this._next=null}y1.prototype=MV.prototype={constructor:y1,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?NM():+r)+(t==null?0:+t),!this._next&&fv!==this&&(fv?fv._next=this:m1=this,fv=this),this._call=e,this._time=r,vT()},stop:function(){this._call&&(this._call=null,this._time=1/0,vT())}};function MV(e,t,r){var n=new y1;return n.restart(e,t,r),n}function O_e(){NM(),++vg;for(var e=m1,t;e;)(t=pp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--vg}function iB(){pp=(g1=u0.now())+c2,vg=cv=0;try{O_e()}finally{vg=0,L_e(),pp=0}}function k_e(){var e=u0.now(),t=e-g1;t>TV&&(c2-=t,g1=e)}function L_e(){for(var e,t=m1,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:m1=r);fv=e,vT(n)}function vT(e){if(!vg){cv&&(cv=clearTimeout(cv));var t=e-pp;t>24?(e<1/0&&(cv=setTimeout(iB,e-u0.now()-c2)),Gy&&(Gy=clearInterval(Gy))):(Gy||(g1=u0.now(),Gy=setInterval(k_e,TV)),vg=1,IV(iB))}}function aB(e,t,r){var n=new y1;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var D_e=cV("start","end","cancel","interrupt"),N_e=[],RV=0,oB=1,bT=2,R_=3,sB=4,_T=5,O_=6;function f2(e,t,r,n,i,o){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;F_e(e,r,{name:t,index:n,group:i,on:D_e,tween:N_e,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:RV})}function FM(e,t){var r=Bc(e,t);if(r.state>RV)throw new Error("too late; already scheduled");return r}function Pf(e,t){var r=Bc(e,t);if(r.state>R_)throw new Error("too late; already running");return r}function Bc(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function F_e(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=MV(o,0,r.time);function o(h){r.state=oB,r.timer.restart(u,r.delay,r.time),r.delay<=h&&u(h-r.delay)}function u(h){var m,v,w,x;if(r.state!==oB)return p();for(m in n)if(x=n[m],x.name===r.name){if(x.state===R_)return aB(u);x.state===sB?(x.state=O_,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete n[m]):+m<t&&(x.state=O_,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete n[m])}if(aB(function(){r.state===R_&&(r.state=sB,r.timer.restart(a,r.delay,r.time),a(h))}),r.state=bT,r.on.call("start",e,e.__data__,r.index,r.group),r.state===bT){for(r.state=R_,i=new Array(w=r.tween.length),m=0,v=-1;m<w;++m)(x=r.tween[m].value.call(e,e.__data__,r.index,r.group))&&(i[++v]=x);i.length=v+1}}function a(h){for(var m=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(p),r.state=_T,1),v=-1,w=i.length;++v<w;)i[v].call(e,m);r.state===_T&&(r.on.call("end",e,e.__data__,r.index,r.group),p())}function p(){r.state=O_,r.timer.stop(),delete n[t];for(var h in n)return;delete e.__transition}}function B_e(e,t){var r=e.__transition,n,i,o=!0,u;if(r){t=t==null?null:t+"";for(u in r){if((n=r[u]).name!==t){o=!1;continue}i=n.state>bT&&n.state<_T,n.state=O_,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[u]}o&&delete e.__transition}}function j_e(e){return this.each(function(){B_e(this,e)})}function z_e(e,t){var r,n;return function(){var i=Pf(this,e),o=i.tween;if(o!==r){n=r=o;for(var u=0,a=n.length;u<a;++u)if(n[u].name===t){n=n.slice(),n.splice(u,1);break}}i.tween=n}}function $_e(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=Pf(this,e),u=o.tween;if(u!==n){i=(n=u).slice();for(var a={name:t,value:r},p=0,h=i.length;p<h;++p)if(i[p].name===t){i[p]=a;break}p===h&&i.push(a)}o.tween=i}}function q_e(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Bc(this.node(),r).tween,i=0,o=n.length,u;i<o;++i)if((u=n[i]).name===e)return u.value;return null}return this.each((t==null?z_e:$_e)(r,e,t))}function BM(e,t,r){var n=e._id;return e.each(function(){var i=Pf(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return Bc(i,n).value[t]}}function OV(e,t){var r;return(typeof t=="number"?Fh:t instanceof l0?rB:(r=l0(t))?(t=r,rB):A_e)(e,t)}function U_e(e){return function(){this.removeAttribute(e)}}function V_e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function G_e(e,t,r){var n,i=r+"",o;return function(){var u=this.getAttribute(e);return u===i?null:u===n?o:o=t(n=u,r)}}function H_e(e,t,r){var n,i=r+"",o;return function(){var u=this.getAttributeNS(e.space,e.local);return u===i?null:u===n?o:o=t(n=u,r)}}function W_e(e,t,r){var n,i,o;return function(){var u,a=r(this),p;return a==null?void this.removeAttribute(e):(u=this.getAttribute(e),p=a+"",u===p?null:u===n&&p===i?o:(i=p,o=t(n=u,a)))}}function Z_e(e,t,r){var n,i,o;return function(){var u,a=r(this),p;return a==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),p=a+"",u===p?null:u===n&&p===i?o:(i=p,o=t(n=u,a)))}}function K_e(e,t){var r=u2(e),n=r==="transform"?M_e:OV;return this.attrTween(e,typeof t=="function"?(r.local?Z_e:W_e)(r,n,BM(this,"attr."+e,t)):t==null?(r.local?V_e:U_e)(r):(r.local?H_e:G_e)(r,n,t))}function X_e(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Y_e(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function J_e(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&Y_e(e,o)),r}return i._value=t,i}function Q_e(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&X_e(e,o)),r}return i._value=t,i}function e1e(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=u2(e);return this.tween(r,(n.local?J_e:Q_e)(n,t))}function t1e(e,t){return function(){FM(this,e).delay=+t.apply(this,arguments)}}function r1e(e,t){return t=+t,function(){FM(this,e).delay=t}}function n1e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?t1e:r1e)(t,e)):Bc(this.node(),t).delay}function i1e(e,t){return function(){Pf(this,e).duration=+t.apply(this,arguments)}}function a1e(e,t){return t=+t,function(){Pf(this,e).duration=t}}function o1e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?i1e:a1e)(t,e)):Bc(this.node(),t).duration}function s1e(e,t){if(typeof t!="function")throw new Error;return function(){Pf(this,e).ease=t}}function l1e(e){var t=this._id;return arguments.length?this.each(s1e(t,e)):Bc(this.node(),t).ease}function u1e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Pf(this,e).ease=r}}function c1e(e){if(typeof e!="function")throw new Error;return this.each(u1e(this._id,e))}function f1e(e){typeof e!="function"&&(e=dV(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],u=o.length,a=n[i]=[],p,h=0;h<u;++h)(p=o[h])&&e.call(p,p.__data__,h,o)&&a.push(p);return new dh(n,this._parents,this._name,this._id)}function h1e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),u=new Array(n),a=0;a<o;++a)for(var p=t[a],h=r[a],m=p.length,v=u[a]=new Array(m),w,x=0;x<m;++x)(w=p[x]||h[x])&&(v[x]=w);for(;a<n;++a)u[a]=t[a];return new dh(u,this._parents,this._name,this._id)}function d1e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function p1e(e,t,r){var n,i,o=d1e(t)?FM:Pf;return function(){var u=o(this,e),a=u.on;a!==n&&(i=(n=a).copy()).on(t,r),u.on=i}}function m1e(e,t){var r=this._id;return arguments.length<2?Bc(this.node(),r).on.on(e):this.each(p1e(r,e,t))}function g1e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function y1e(){return this.on("end.remove",g1e(this._id))}function v1e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=kM(e));for(var n=this._groups,i=n.length,o=new Array(i),u=0;u<i;++u)for(var a=n[u],p=a.length,h=o[u]=new Array(p),m,v,w=0;w<p;++w)(m=a[w])&&(v=e.call(m,m.__data__,w,a))&&("__data__"in m&&(v.__data__=m.__data__),h[w]=v,f2(h[w],t,r,w,h,Bc(m,r)));return new dh(o,this._parents,t,r)}function b1e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=hV(e));for(var n=this._groups,i=n.length,o=[],u=[],a=0;a<i;++a)for(var p=n[a],h=p.length,m,v=0;v<h;++v)if(m=p[v]){for(var w=e.call(m,m.__data__,v,p),x,P=Bc(m,r),T=0,R=w.length;T<R;++T)(x=w[T])&&f2(x,t,r,T,w,P);o.push(w),u.push(m)}return new dh(o,u,t,r)}var _1e=j0.prototype.constructor;function x1e(){return new _1e(this._groups,this._parents)}function w1e(e,t){var r,n,i;return function(){var o=yg(this,e),u=(this.style.removeProperty(e),yg(this,e));return o===u?null:o===r&&u===n?i:i=t(r=o,n=u)}}function kV(e){return function(){this.style.removeProperty(e)}}function S1e(e,t,r){var n,i=r+"",o;return function(){var u=yg(this,e);return u===i?null:u===n?o:o=t(n=u,r)}}function E1e(e,t,r){var n,i,o;return function(){var u=yg(this,e),a=r(this),p=a+"";return a==null&&(p=a=(this.style.removeProperty(e),yg(this,e))),u===p?null:u===n&&p===i?o:(i=p,o=t(n=u,a))}}function C1e(e,t){var r,n,i,o="style."+t,u="end."+o,a;return function(){var p=Pf(this,e),h=p.on,m=p.value[o]==null?a||(a=kV(t)):void 0;(h!==r||i!==m)&&(n=(r=h).copy()).on(u,i=m),p.on=n}}function A1e(e,t,r){var n=(e+="")=="transform"?I_e:OV;return t==null?this.styleTween(e,w1e(e,n)).on("end.style."+e,kV(e)):typeof t=="function"?this.styleTween(e,E1e(e,n,BM(this,"style."+e,t))).each(C1e(this._id,e)):this.styleTween(e,S1e(e,n,t),r).on("end.style."+e,null)}function P1e(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function T1e(e,t,r){var n,i;function o(){var u=t.apply(this,arguments);return u!==i&&(n=(i=u)&&P1e(e,u,r)),n}return o._value=t,o}function I1e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,T1e(e,t,r??""))}function M1e(e){return function(){this.textContent=e}}function R1e(e){return function(){var t=e(this);this.textContent=t??""}}function O1e(e){return this.tween("text",typeof e=="function"?R1e(BM(this,"text",e)):M1e(e==null?"":e+""))}function k1e(e){return function(t){this.textContent=e.call(this,t)}}function L1e(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&k1e(i)),t}return n._value=e,n}function D1e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,L1e(e))}function N1e(){for(var e=this._name,t=this._id,r=LV(),n=this._groups,i=n.length,o=0;o<i;++o)for(var u=n[o],a=u.length,p,h=0;h<a;++h)if(p=u[h]){var m=Bc(p,t);f2(p,e,r,h,u,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new dh(n,this._parents,e,r)}function F1e(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(o,u){var a={value:u},p={value:function(){--i===0&&o()}};r.each(function(){var h=Pf(this,n),m=h.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(p)),h.on=t}),i===0&&o()})}var B1e=0;function dh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function LV(){return++B1e}var Kf=j0.prototype;dh.prototype={constructor:dh,select:v1e,selectAll:b1e,selectChild:Kf.selectChild,selectChildren:Kf.selectChildren,filter:f1e,merge:h1e,selection:x1e,transition:N1e,call:Kf.call,nodes:Kf.nodes,node:Kf.node,size:Kf.size,empty:Kf.empty,each:Kf.each,on:m1e,attr:K_e,attrTween:e1e,style:A1e,styleTween:I1e,text:O1e,textTween:D1e,remove:y1e,tween:q_e,delay:n1e,duration:o1e,ease:l1e,easeVarying:c1e,end:F1e,[Symbol.iterator]:Kf[Symbol.iterator]};function j1e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var z1e={time:null,delay:0,duration:250,ease:j1e};function $1e(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function q1e(e){var t,r;e instanceof dh?(t=e._id,e=e._name):(t=LV(),(r=z1e).time=NM(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var u=n[o],a=u.length,p,h=0;h<a;++h)(p=u[h])&&f2(p,e,t,h,u,r||$1e(p,t));return new dh(n,this._parents,e,t)}j0.prototype.interrupt=j_e;j0.prototype.transition=q1e;function hv(e,t,r){this.k=e,this.x=t,this.y=r}hv.prototype={constructor:hv,scale:function(e){return e===1?this:new hv(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new hv(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};hv.prototype;nr(Bo)({padding:"4px",marginTop:"-3px",background:"none","&:hover":{background:"none"}});const U1e=Ci(ze.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"})),V1e=Ci(ze.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"})),G1e=Ci(ze.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}));function Bs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var H1e=typeof Symbol=="function"&&Symbol.observable||"@@observable",lB=H1e,mC=()=>Math.random().toString(36).substring(7).split("").join("."),W1e={INIT:`@@redux/INIT${mC()}`,REPLACE:`@@redux/REPLACE${mC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${mC()}`},v1=W1e;function jM(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function DV(e,t,r){if(typeof e!="function")throw new Error(Bs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Bs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Bs(1));return r(DV)(e,t)}let n=e,i=t,o=new Map,u=o,a=0,p=!1;function h(){u===o&&(u=new Map,o.forEach((R,k)=>{u.set(k,R)}))}function m(){if(p)throw new Error(Bs(3));return i}function v(R){if(typeof R!="function")throw new Error(Bs(4));if(p)throw new Error(Bs(5));let k=!0;h();const N=a++;return u.set(N,R),function(){if(k){if(p)throw new Error(Bs(6));k=!1,h(),u.delete(N),o=null}}}function w(R){if(!jM(R))throw new Error(Bs(7));if(typeof R.type>"u")throw new Error(Bs(8));if(typeof R.type!="string")throw new Error(Bs(17));if(p)throw new Error(Bs(9));try{p=!0,i=n(i,R)}finally{p=!1}return(o=u).forEach(N=>{N()}),R}function x(R){if(typeof R!="function")throw new Error(Bs(10));n=R,w({type:v1.REPLACE})}function P(){const R=v;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(Bs(11));function N(){const D=k;D.next&&D.next(m())}return N(),{unsubscribe:R(N)}},[lB](){return this}}}return w({type:v1.INIT}),{dispatch:w,subscribe:v,getState:m,replaceReducer:x,[lB]:P}}function Z1e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:v1.INIT})>"u")throw new Error(Bs(12));if(typeof r(void 0,{type:v1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Bs(13))})}function K1e(e){const t=Object.keys(e),r={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(r[u]=e[u])}const n=Object.keys(r);let i;try{Z1e(r)}catch(o){i=o}return function(u={},a){if(i)throw i;let p=!1;const h={};for(let m=0;m<n.length;m++){const v=n[m],w=r[v],x=u[v],P=w(x,a);if(typeof P>"u")throw a&&a.type,new Error(Bs(14));h[v]=P,p=p||P!==x}return p=p||n.length!==Object.keys(u).length,p?h:u}}function b1(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function X1e(...e){return t=>(r,n)=>{const i=t(r,n);let o=()=>{throw new Error(Bs(15))};const u={getState:i.getState,dispatch:(p,...h)=>o(p,...h)},a=e.map(p=>p(u));return o=b1(...a)(i.dispatch),{...i,dispatch:o}}}function Y1e(e){return jM(e)&&"type"in e&&typeof e.type=="string"}var NV=Symbol.for("immer-nothing"),uB=Symbol.for("immer-draftable"),Lu=Symbol.for("immer-state");function Sc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var bg=Object.getPrototypeOf;function mp(e){return!!e&&!!e[Lu]}function ph(e){return e?FV(e)||Array.isArray(e)||!!e[uB]||!!e.constructor?.[uB]||$0(e)||d2(e):!1}var J1e=Object.prototype.constructor.toString();function FV(e){if(!e||typeof e!="object")return!1;const t=bg(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===J1e}function _1(e,t){h2(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function h2(e){const t=e[Lu];return t?t.type_:Array.isArray(e)?1:$0(e)?2:d2(e)?3:0}function xT(e,t){return h2(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function BV(e,t,r){const n=h2(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Q1e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function $0(e){return e instanceof Map}function d2(e){return e instanceof Set}function qd(e){return e.copy_||e.base_}function wT(e,t){if($0(e))return new Map(e);if(d2(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=FV(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Lu];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const u=i[o],a=n[u];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[u]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[u]})}return Object.create(bg(e),n)}else{const n=bg(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function zM(e,t=!1){return p2(e)||mp(e)||!ph(e)||(h2(e)>1&&Object.defineProperties(e,{set:{value:Kb},add:{value:Kb},clear:{value:Kb},delete:{value:Kb}}),Object.freeze(e),t&&Object.values(e).forEach(r=>zM(r,!0))),e}function Kb(){Sc(2)}function p2(e){return Object.isFrozen(e)}var exe={};function gp(e){const t=exe[e];return t||Sc(0,e),t}var c0;function jV(){return c0}function txe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cB(e,t){t&&(gp("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ST(e){ET(e),e.drafts_.forEach(rxe),e.drafts_=null}function ET(e){e===c0&&(c0=e.parent_)}function fB(e){return c0=txe(c0,e)}function rxe(e){const t=e[Lu];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hB(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Lu].modified_&&(ST(t),Sc(4)),ph(e)&&(e=x1(t,e),t.parent_||w1(t,e)),t.patches_&&gp("Patches").generateReplacementPatches_(r[Lu].base_,e,t.patches_,t.inversePatches_)):e=x1(t,r,[]),ST(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NV?e:void 0}function x1(e,t,r){if(p2(t))return t;const n=t[Lu];if(!n)return _1(t,(i,o)=>dB(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return w1(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,u=!1;n.type_===3&&(o=new Set(i),i.clear(),u=!0),_1(o,(a,p)=>dB(e,n,i,a,p,r,u)),w1(e,i,!1),r&&e.patches_&&gp("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function dB(e,t,r,n,i,o,u){if(mp(i)){const a=o&&t&&t.type_!==3&&!xT(t.assigned_,n)?o.concat(n):void 0,p=x1(e,i,a);if(BV(r,n,p),mp(p))e.canAutoFreeze_=!1;else return}else u&&r.add(i);if(ph(i)&&!p2(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;x1(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&($0(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&w1(e,i)}}function w1(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&zM(t,r)}function nxe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:jV(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=$M;r&&(i=[n],o=f0);const{revoke:u,proxy:a}=Proxy.revocable(i,o);return n.draft_=a,n.revoke_=u,a}var $M={get(e,t){if(t===Lu)return e;const r=qd(e);if(!xT(r,t))return ixe(e,r,t);const n=r[t];return e.finalized_||!ph(n)?n:n===gC(e.base_,t)?(yC(e),e.copy_[t]=AT(n,e)):n},has(e,t){return t in qd(e)},ownKeys(e){return Reflect.ownKeys(qd(e))},set(e,t,r){const n=zV(qd(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=gC(qd(e),t),o=i?.[Lu];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Q1e(r,i)&&(r!==void 0||xT(e.base_,t)))return!0;yC(e),CT(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return gC(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,yC(e),CT(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=qd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Sc(11)},getPrototypeOf(e){return bg(e.base_)},setPrototypeOf(){Sc(12)}},f0={};_1($M,(e,t)=>{f0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});f0.deleteProperty=function(e,t){return f0.set.call(this,e,t,void 0)};f0.set=function(e,t,r){return $M.set.call(this,e[0],t,r,e[0])};function gC(e,t){const r=e[Lu];return(r?qd(r):e)[t]}function ixe(e,t,r){const n=zV(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function zV(e,t){if(!(t in e))return;let r=bg(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=bg(r)}}function CT(e){e.modified_||(e.modified_=!0,e.parent_&&CT(e.parent_))}function yC(e){e.copy_||(e.copy_=wT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var axe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const u=this;return function(p=o,...h){return u.produce(p,m=>r.call(this,m,...h))}}typeof r!="function"&&Sc(6),n!==void 0&&typeof n!="function"&&Sc(7);let i;if(ph(t)){const o=fB(this),u=AT(t,void 0);let a=!0;try{i=r(u),a=!1}finally{a?ST(o):ET(o)}return cB(o,n),hB(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===NV&&(i=void 0),this.autoFreeze_&&zM(i,!0),n){const o=[],u=[];gp("Patches").generateReplacementPatches_(t,i,o,u),n(o,u)}return i}else Sc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...a)=>this.produceWithPatches(u,p=>t(p,...a));let n,i;return[this.produce(t,r,(u,a)=>{n=u,i=a}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ph(e)||Sc(8),mp(e)&&(e=oxe(e));const t=fB(this),r=AT(e,void 0);return r[Lu].isManual_=!0,ET(t),r}finishDraft(e,t){const r=e&&e[Lu];(!r||!r.isManual_)&&Sc(9);const{scope_:n}=r;return cB(n,t),hB(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=gp("Patches").applyPatches_;return mp(e)?n(e,t):this.produce(e,i=>n(i,t))}};function AT(e,t){const r=$0(e)?gp("MapSet").proxyMap_(e,t):d2(e)?gp("MapSet").proxySet_(e,t):nxe(e,t);return(t?t.scope_:jV()).drafts_.push(r),r}function oxe(e){return mp(e)||Sc(10,e),$V(e)}function $V(e){if(!ph(e)||p2(e))return e;const t=e[Lu];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=wT(e,t.scope_.immer_.useStrictShallowCopy_)}else r=wT(e,!0);return _1(r,(n,i)=>{BV(r,n,$V(i))}),t&&(t.finalized_=!1),r}var sxe=new axe,qV=sxe.produce;function UV(e){return({dispatch:r,getState:n})=>i=>o=>typeof o=="function"?o(r,n,e):i(o)}var lxe=UV(),uxe=UV,cxe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?b1:b1.apply(null,arguments)};function pB(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(uh(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Y1e(n)&&n.type===e,r}var VV=class dv extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,dv.prototype)}static get[Symbol.species](){return dv}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new dv(...t[0].concat(this)):new dv(...t.concat(this))}};function mB(e){return ph(e)?qV(e,()=>{}):e}function Xb(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function fxe(e){return typeof e=="boolean"}var hxe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let u=new VV;return r&&(fxe(r)?u.push(lxe):u.push(uxe(r.extraArgument))),u},dxe="RTK_autoBatch",gB=e=>t=>{setTimeout(t,e)},pxe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,o=!1,u=!1;const a=new Set,p=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gB(10):e.type==="callback"?e.queueNotification:gB(e.timeout),h=()=>{u=!1,o&&(o=!1,a.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const v=()=>i&&m(),w=n.subscribe(v);return a.add(m),()=>{w(),a.delete(m)}},dispatch(m){try{return i=!m?.meta?.[dxe],o=!i,o&&(u||(u=!0,p(h))),n.dispatch(m)}finally{i=!0}}})},mxe=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new VV(e);return n&&i.push(pxe(typeof n=="object"?n:void 0)),i};function gxe(e){const t=hxe(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(jM(r))a=K1e(r);else throw new Error(uh(1));let p;typeof n=="function"?p=n(t):p=t();let h=b1;i&&(h=cxe({trace:!1,...typeof i=="object"&&i}));const m=X1e(...p),v=mxe(m);let w=typeof u=="function"?u(v):v();const x=h(...w);return DV(a,o,x)}function GV(e){const t={},r=[];let n;const i={addCase(o,u){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(uh(28));if(a in t)throw new Error(uh(29));return t[a]=u,i},addAsyncThunk(o,u){return u.pending&&(t[o.pending.type]=u.pending),u.rejected&&(t[o.rejected.type]=u.rejected),u.fulfilled&&(t[o.fulfilled.type]=u.fulfilled),u.settled&&r.push({matcher:o.settled,reducer:u.settled}),i},addMatcher(o,u){return r.push({matcher:o,reducer:u}),i},addDefaultCase(o){return n=o,i}};return e(i),[t,r,n]}function yxe(e){return typeof e=="function"}function vxe(e,t){let[r,n,i]=GV(t),o;if(yxe(e))o=()=>mB(e());else{const a=mB(e);o=()=>a}function u(a=o(),p){let h=[r[p.type],...n.filter(({matcher:m})=>m(p)).map(({reducer:m})=>m)];return h.filter(m=>!!m).length===0&&(h=[i]),h.reduce((m,v)=>{if(v)if(mp(m)){const x=v(m,p);return x===void 0?m:x}else{if(ph(m))return qV(m,w=>v(w,p));{const w=v(m,p);if(w===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return w}}return m},a)}return u.getInitialState=o,u}var bxe=Symbol.for("rtk-slice-createasyncthunk");function _xe(e,t){return`${e}/${t}`}function xxe({creators:e}={}){const t=e?.asyncThunk?.[bxe];return function(n){const{name:i,reducerPath:o=i}=n;if(!i)throw new Error(uh(11));const u=(typeof n.reducers=="function"?n.reducers(Exe()):n.reducers)||{},a=Object.keys(u),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(F,D){const U=typeof F=="string"?F:F.type;if(!U)throw new Error(uh(12));if(U in p.sliceCaseReducersByType)throw new Error(uh(13));return p.sliceCaseReducersByType[U]=D,h},addMatcher(F,D){return p.sliceMatchers.push({matcher:F,reducer:D}),h},exposeAction(F,D){return p.actionCreators[F]=D,h},exposeCaseReducer(F,D){return p.sliceCaseReducersByName[F]=D,h}};a.forEach(F=>{const D=u[F],U={reducerName:F,type:_xe(i,F),createNotation:typeof n.reducers=="function"};Axe(D)?Txe(U,D,h,t):Cxe(U,D,h)});function m(){const[F={},D=[],U=void 0]=typeof n.extraReducers=="function"?GV(n.extraReducers):[n.extraReducers],B={...F,...p.sliceCaseReducersByType};return vxe(n.initialState,Z=>{for(let J in B)Z.addCase(J,B[J]);for(let J of p.sliceMatchers)Z.addMatcher(J.matcher,J.reducer);for(let J of D)Z.addMatcher(J.matcher,J.reducer);U&&Z.addDefaultCase(U)})}const v=F=>F,w=new Map,x=new WeakMap;let P;function T(F,D){return P||(P=m()),P(F,D)}function R(){return P||(P=m()),P.getInitialState()}function k(F,D=!1){function U(Z){let J=Z[F];return typeof J>"u"&&D&&(J=Xb(x,U,R)),J}function B(Z=v){const J=Xb(w,D,()=>new WeakMap);return Xb(J,Z,()=>{const X={};for(const[le,H]of Object.entries(n.selectors??{}))X[le]=wxe(H,Z,()=>Xb(x,Z,R),D);return X})}return{reducerPath:F,getSelectors:B,get selectors(){return B(U)},selectSlice:U}}const N={name:i,reducer:T,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:R,...k(o),injectInto(F,{reducerPath:D,...U}={}){const B=D??o;return F.inject({reducerPath:B,reducer:T},U),{...N,...k(B,!0)}}};return N}}function wxe(e,t,r,n){function i(o,...u){let a=t(o);return typeof a>"u"&&n&&(a=r()),e(a,...u)}return i.unwrapped=e,i}var Sxe=xxe();function Exe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Cxe({type:e,reducerName:t,createNotation:r},n,i){let o,u;if("reducer"in n){if(r&&!Pxe(n))throw new Error(uh(17));o=n.reducer,u=n.prepare}else o=n;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?pB(e,u):pB(e))}function Axe(e){return e._reducerDefinitionType==="asyncThunk"}function Pxe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Txe({type:e,reducerName:t},r,n,i){if(!i)throw new Error(uh(18));const{payloadCreator:o,fulfilled:u,pending:a,rejected:p,settled:h,options:m}=r,v=i(e,o,m);n.exposeAction(t,v),u&&n.addCase(v.fulfilled,u),a&&n.addCase(v.pending,a),p&&n.addCase(v.rejected,p),h&&n.addMatcher(v.settled,h),n.exposeCaseReducer(t,{fulfilled:u||Yb,pending:a||Yb,rejected:p||Yb,settled:h||Yb})}function Yb(){}function uh(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function HV(e,t,r){t.forEach(n=>{e(n,r),n.layers&&n.layers.length>0&&HV(e,n.layers,n)})}const Ixe={mapConfigs:{}},WV=Sxe({name:"mapConfig",initialState:Ixe,reducers:{setMapConfig:(e,t)=>{const r=t.payload.mapConfig,n=t.payload.key;e.mapConfigs[n]=r},removeMapConfig:(e,t)=>{delete e.mapConfigs[t.payload.key]},setLayerInMapConfig:(e,t)=>{const{mapConfigKey:r,layer:n}=t.payload,i=e.mapConfigs[r];if(i){for(let o=0;o<i.layers.length;o++)if(i.layers[o].uuid===n.uuid){i.layers[o]=n;break}}},removeLayerFromMapConfig:(e,t)=>{const{mapConfigKey:r,layerUuid:n}=t.payload,i=e.mapConfigs[r];if(i){const o=i.layers.findIndex(u=>u.uuid===n);o!==-1&&(delete i.layers[o],HV(function(u,a){a&&a.layers&&(a.layers=a.layers.filter(p=>p.uuid!==n))},i.layerOrder))}},updateLayerOrder:(e,t)=>{const{mapConfigKey:r,newOrder:n}=t.payload,i=e.mapConfigs[r];i&&(i.layerOrder=n)},setMasterVisible(e,t){const{mapConfigKey:r,layerId:n,masterVisible:i}=t.payload,o=e.mapConfigs[r];if(o){const u=o.layers.findIndex(a=>a.uuid===n);if(u!==-1){const a=o.layers[u];if(a){const p=[...o.layers];a.type==="folder"&&o.layerOrder.forEach(h=>{h.uuid===n&&h.layers?.forEach(m=>{const v=o.layers.findIndex(x=>x.uuid===m.uuid),w=p[v];p[v]={...w,masterVisible:i},w?.type==="vt"&&w?.config?.layers&&(w.config.layers=w.config.layers.map(x=>({...x,masterVisible:i})))})}),a.type==="vt"&&a?.config?.layers&&(a.config.layers=a.config.layers.map(h=>({...h,masterVisible:i}))),e.mapConfigs[r].layers=p}}}}}});gxe({reducer:{mapConfig:WV.reducer}});const{setMapConfig:yje,removeMapConfig:vje,setLayerInMapConfig:bje,removeLayerFromMapConfig:_je,updateLayerOrder:xje,setMasterVisible:wje}=WV.actions;nr(Lc)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});nr(od)({marginLeft:"61px"});nr(Bo)({padding:"4px",marginTop:"-3px"});nr(Bo)({marginLeft:"20px"});nr(EI)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});nr(R0)({minWidth:"30px"});nr(Bo)({marginRight:"0px",padding:"0px"});nr(od)(({open:e})=>({display:e?"block":"none"}));nr(M0)({marginLeft:"50px"});nr(M0)({marginTop:"15px"});var qM=I.createContext(void 0);qM.displayName="AuthContext";var m2={loginUrl:"/login",afterLoginUrl:"/"},rc=function(){return I.useContext(qM)},Dg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},yp=typeof window>"u"||"Deno"in globalThis;function Rl(){}function Mxe(e,t){return typeof e=="function"?e(t):e}function PT(e){return typeof e=="number"&&e>=0&&e!==1/0}function ZV(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Zh(e,t){return typeof e=="function"?e(t):e}function Vu(e,t){return typeof e=="function"?e(t):e}function yB(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:u,stale:a}=e;if(u){if(n){if(t.queryHash!==UM(u,t.options))return!1}else if(!h0(t.queryKey,u))return!1}if(r!=="all"){const p=t.isActive();if(r==="active"&&!p||r==="inactive"&&p)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||o&&!o(t))}function vB(e,t){const{exact:r,status:n,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(vp(t.options.mutationKey)!==vp(o))return!1}else if(!h0(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function UM(e,t){return(t?.queryKeyHashFn||vp)(e)}function vp(e){return JSON.stringify(e,(t,r)=>TT(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function h0(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>h0(e[r],t[r])):!1}var Rxe=Object.prototype.hasOwnProperty;function KV(e,t){if(e===t)return e;const r=bB(e)&&bB(t);if(!r&&!(TT(e)&&TT(t)))return t;const i=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),u=o.length,a=r?new Array(u):{};let p=0;for(let h=0;h<u;h++){const m=r?h:o[h],v=e[m],w=t[m];if(v===w){a[m]=v,(r?h<i:Rxe.call(e,m))&&p++;continue}if(v===null||w===null||typeof v!="object"||typeof w!="object"){a[m]=w;continue}const x=KV(v,w);a[m]=x,x===v&&p++}return i===u&&p===i?e:a}function S1(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function bB(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function TT(e){if(!_B(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!_B(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function _B(e){return Object.prototype.toString.call(e)==="[object Object]"}function Oxe(e){return new Promise(t=>{setTimeout(t,e)})}function IT(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?KV(e,t):t}function kxe(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Lxe(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var VM=Symbol();function XV(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===VM?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function YV(e,t){return typeof e=="function"?e(...t):!!e}var Dxe=class extends Dg{#t;#e;#r;constructor(){super(),this.#r=e=>{if(!yp&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#r=e,this.#e?.(),this.#e=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#t!==e&&(this.#t=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},GM=new Dxe,Nxe=class extends Dg{#t=!0;#e;#r;constructor(){super(),this.#r=e=>{if(!yp&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#e||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#r=e,this.#e?.(),this.#e=e(this.setOnline.bind(this))}setOnline(e){this.#t!==e&&(this.#t=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#t}},E1=new Nxe;function MT(){let e,t;const r=new Promise((i,o)=>{e=i,t=o});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function Fxe(e){return Math.min(1e3*2**e,3e4)}function JV(e){return(e??"online")==="online"?E1.isOnline():!0}var RT=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function QV(e){let t=!1,r=0,n;const i=MT(),o=()=>i.status!=="pending",u=T=>{if(!o()){const R=new RT(T);w(R),e.onCancel?.(R)}},a=()=>{t=!0},p=()=>{t=!1},h=()=>GM.isFocused()&&(e.networkMode==="always"||E1.isOnline())&&e.canRun(),m=()=>JV(e.networkMode)&&e.canRun(),v=T=>{o()||(n?.(),i.resolve(T))},w=T=>{o()||(n?.(),i.reject(T))},x=()=>new Promise(T=>{n=R=>{(o()||h())&&T(R)},e.onPause?.()}).then(()=>{n=void 0,o()||e.onContinue?.()}),P=()=>{if(o())return;let T;const R=r===0?e.initialPromise:void 0;try{T=R??e.fn()}catch(k){T=Promise.reject(k)}Promise.resolve(T).then(v).catch(k=>{if(o())return;const N=e.retry??(yp?0:3),F=e.retryDelay??Fxe,D=typeof F=="function"?F(r,k):F,U=N===!0||typeof N=="number"&&r<N||typeof N=="function"&&N(r,k);if(t||!U){w(k);return}r++,e.onFail?.(r,k),Oxe(D).then(()=>h()?void 0:x()).then(()=>{t?w(k):P()})})};return{promise:i,status:()=>i.status,cancel:u,continue:()=>(n?.(),i),cancelRetry:a,continueRetry:p,canStart:m,start:()=>(m()?P():x().then(P),i)}}var Bxe=e=>setTimeout(e,0);function jxe(){let e=[],t=0,r=a=>{a()},n=a=>{a()},i=Bxe;const o=a=>{t?e.push(a):i(()=>{r(a)})},u=()=>{const a=e;e=[],a.length&&i(()=>{n(()=>{a.forEach(p=>{r(p)})})})};return{batch:a=>{let p;t++;try{p=a()}finally{t--,t||u()}return p},batchCalls:a=>(...p)=>{o(()=>{a(...p)})},schedule:o,setNotifyFunction:a=>{r=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{i=a}}}var Do=jxe(),eG=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),PT(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(yp?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},zxe=class extends eG{#t;#e;#r;#n;#i;#o;#s;constructor(e){super(),this.#s=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#r=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#t=$xe(this.options),this.state=e.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=IT(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#i?.promise;return this.#i?.cancel(e),t?t.then(Rl).catch(Rl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(e=>Vu(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===VM||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Zh(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ZV(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#i&&(this.#s?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(e&&this.setOptions(e),!this.options.queryFn){const a=this.observers.find(p=>p.options.queryFn);a&&this.setOptions(a.options)}const r=new AbortController,n=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},i=()=>{const a=XV(this.options,t),h=(()=>{const m={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#s=!1,this.options.persister?this.options.persister(a,h,this):a(h)},u=(()=>{const a={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:i};return n(a),a})();this.options.behavior?.onFetch(u,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#a({type:"fetch",meta:u.fetchOptions?.meta}),this.#i=QV({initialPromise:t?.initialPromise,fn:u.fetchFn,onCancel:a=>{a instanceof RT&&a.revert&&this.setState({...this.#e,fetchStatus:"idle"}),r.abort()},onFail:(a,p)=>{this.#a({type:"failed",failureCount:a,error:p})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0});try{const a=await this.#i.start();if(a===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(a),this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),a}catch(a){if(a instanceof RT){if(a.silent)return this.#i.promise;if(a.revert){if(this.state.data===void 0)throw a;return this.state.data}}throw this.#a({type:"error",error:a}),this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this),a}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...tG(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#e=e.manual?n:void 0,n;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Do.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function tG(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:JV(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function $xe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var qxe=class extends Dg{constructor(e={}){super(),this.config=e,this.#t=new Map}#t;build(e,t,r){const n=t.queryKey,i=t.queryHash??UM(n,t);let o=this.get(i);return o||(o=new zxe({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){this.#t.has(e.queryHash)||(this.#t.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#t.get(e.queryHash);t&&(e.destroy(),t===e&&this.#t.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Do.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#t.get(e)}getAll(){return[...this.#t.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>yB(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>yB(e,r)):t}notify(e){Do.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Do.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Do.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Uxe=class extends eG{#t;#e;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#e=e.mutationCache,this.#t=[],this.state=e.state||rG(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})};this.#r=QV({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const r=this.state.status==="pending",n=!this.#r.canStart();try{if(r)t();else{this.#n({type:"pending",variables:e,isPaused:n}),await this.#e.config.onMutate?.(e,this);const o=await this.options.onMutate?.(e);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:n})}const i=await this.#r.start();return await this.#e.config.onSuccess?.(i,e,this.state.context,this),await this.options.onSuccess?.(i,e,this.state.context),await this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,e,this.state.context),this.#n({type:"success",data:i}),i}catch(i){try{throw await this.#e.config.onError?.(i,e,this.state.context,this),await this.options.onError?.(i,e,this.state.context),await this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,e,this.state.context),i}finally{this.#n({type:"error",error:i})}}finally{this.#e.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Do.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#e.notify({mutation:this,type:"updated",action:e})})}};function rG(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Vxe=class extends Dg{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#e=new Map,this.#r=0}#t;#e;#r;build(e,t,r){const n=new Uxe({mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#t.add(e);const t=Jb(e);if(typeof t=="string"){const r=this.#e.get(t);r?r.push(e):this.#e.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const t=Jb(e);if(typeof t=="string"){const r=this.#e.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#e.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Jb(e);if(typeof t=="string"){const n=this.#e.get(t)?.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=Jb(e);return typeof t=="string"?this.#e.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Do.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>vB(t,r))}findAll(e={}){return this.getAll().filter(t=>vB(e,t))}notify(e){Do.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Do.batch(()=>Promise.all(e.map(t=>t.continue().catch(Rl))))}};function Jb(e){return e.options.scope?.id}function xB(e){return{onFetch:(t,r)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],u=t.state.data?.pageParams||[];let a={pages:[],pageParams:[]},p=0;const h=async()=>{let m=!1;const v=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},w=XV(t.options,t.fetchOptions),x=async(P,T,R)=>{if(m)return Promise.reject();if(T==null&&P.pages.length)return Promise.resolve(P);const N=(()=>{const B={client:t.client,queryKey:t.queryKey,pageParam:T,direction:R?"backward":"forward",meta:t.options.meta};return v(B),B})(),F=await w(N),{maxPages:D}=t.options,U=R?Lxe:kxe;return{pages:U(P.pages,F,D),pageParams:U(P.pageParams,T,D)}};if(i&&o.length){const P=i==="backward",T=P?Gxe:wB,R={pages:o,pageParams:u},k=T(n,R);a=await x(R,k,P)}else{const P=e??o.length;do{const T=p===0?u[0]??n.initialPageParam:wB(n,a);if(p>0&&T==null)break;a=await x(a,T),p++}while(p<P)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=h}}}function wB(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Gxe(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Hxe=class{#t;#e;#r;#n;#i;#o;#s;#a;constructor(e={}){this.#t=e.queryCache||new qxe,this.#e=e.mutationCache||new Vxe,this.#r=e.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=GM.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=E1.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#t.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Zh(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),o=this.#t.get(n.queryHash)?.state.data,u=Mxe(t,o);if(u!==void 0)return this.#t.build(this,n).setData(u,{...r,manual:!0})}setQueriesData(e,t,r){return Do.batch(()=>this.#t.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#t.get(t.queryHash)?.state}removeQueries(e){const t=this.#t;Do.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#t;return Do.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Do.batch(()=>this.#t.findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(Rl).catch(Rl)}invalidateQueries(e,t={}){return Do.batch(()=>(this.#t.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Do.batch(()=>this.#t.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(Rl)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Rl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#t.build(this,t);return r.isStaleByTime(Zh(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Rl).catch(Rl)}fetchInfiniteQuery(e){return e.behavior=xB(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Rl).catch(Rl)}ensureInfiniteQueryData(e){return e.behavior=xB(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return E1.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(vp(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{h0(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#i.set(vp(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()],r={};return t.forEach(n=>{h0(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=UM(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===VM&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},Wxe=class extends Dg{constructor(e,t){super(),this.options=t,this.#t=e,this.#a=null,this.#s=MT(),this.bindMethods(),this.setOptions(t)}#t;#e=void 0;#r=void 0;#n=void 0;#i;#o;#s;#a;#m;#h;#d;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),SB(this.#e,this.options)?this.#f():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return OT(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return OT(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#x(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,r=this.#e;if(this.options=this.#t.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vu(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),t._defaulted&&!S1(this.options,t)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&EB(this.#e,r,this.options,t)&&this.#f(),this.updateResult(),n&&(this.#e!==r||Vu(this.options.enabled,this.#e)!==Vu(t.enabled,this.#e)||Zh(this.options.staleTime,this.#e)!==Zh(t.staleTime,this.#e))&&this.#g();const i=this.#y();n&&(this.#e!==r||Vu(this.options.enabled,this.#e)!==Vu(t.enabled,this.#e)||i!==this.#l)&&this.#v(i)}getOptimisticResult(e){const t=this.#t.getQueryCache().build(this.#t,e),r=this.createResult(t,e);return Kxe(this,r)&&(this.#n=r,this.#o=this.options,this.#i=this.#e.state),r}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#s.status==="pending"&&this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#t.defaultQueryOptions(e),r=this.#t.getQueryCache().build(this.#t,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#f({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#f(e){this.#w();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Rl)),t}#g(){this.#_();const e=Zh(this.options.staleTime,this.#e);if(yp||this.#n.isStale||!PT(e))return;const r=ZV(this.#n.dataUpdatedAt,e)+1;this.#u=setTimeout(()=>{this.#n.isStale||this.updateResult()},r)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(e){this.#x(),this.#l=e,!(yp||Vu(this.options.enabled,this.#e)===!1||!PT(this.#l)||this.#l===0)&&(this.#c=setInterval(()=>{(this.options.refetchIntervalInBackground||GM.isFocused())&&this.#f()},this.#l))}#b(){this.#g(),this.#v(this.#y())}#_(){this.#u&&(clearTimeout(this.#u),this.#u=void 0)}#x(){this.#c&&(clearInterval(this.#c),this.#c=void 0)}createResult(e,t){const r=this.#e,n=this.options,i=this.#n,o=this.#i,u=this.#o,p=e!==r?e.state:this.#r,{state:h}=e;let m={...h},v=!1,w;if(t._optimisticResults){const J=this.hasListeners(),X=!J&&SB(e,t),le=J&&EB(e,r,t,n);(X||le)&&(m={...m,...tG(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:P,status:T}=m;w=m.data;let R=!1;if(t.placeholderData!==void 0&&w===void 0&&T==="pending"){let J;i?.isPlaceholderData&&t.placeholderData===u?.placeholderData?(J=i.data,R=!0):J=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,J!==void 0&&(T="success",w=IT(i?.data,J,t),v=!0)}if(t.select&&w!==void 0&&!R)if(i&&w===o?.data&&t.select===this.#m)w=this.#h;else try{this.#m=t.select,w=t.select(w),w=IT(i?.data,w,t),this.#h=w,this.#a=null}catch(J){this.#a=J}this.#a&&(x=this.#a,w=this.#h,P=Date.now(),T="error");const k=m.fetchStatus==="fetching",N=T==="pending",F=T==="error",D=N&&k,U=w!==void 0,Z={status:T,fetchStatus:m.fetchStatus,isPending:N,isSuccess:T==="success",isError:F,isInitialLoading:D,isLoading:D,data:w,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:P,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>p.dataUpdateCount||m.errorUpdateCount>p.errorUpdateCount,isFetching:k,isRefetching:k&&!N,isLoadingError:F&&!U,isPaused:m.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:F&&U,isStale:HM(e,t),refetch:this.refetch,promise:this.#s,isEnabled:Vu(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const J=H=>{Z.status==="error"?H.reject(Z.error):Z.data!==void 0&&H.resolve(Z.data)},X=()=>{const H=this.#s=Z.promise=MT();J(H)},le=this.#s;switch(le.status){case"pending":e.queryHash===r.queryHash&&J(le);break;case"fulfilled":(Z.status==="error"||Z.data!==le.value)&&X();break;case"rejected":(Z.status!=="error"||Z.error!==le.reason)&&X();break}}return Z}updateResult(){const e=this.#n,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#o=this.options,this.#i.data!==void 0&&(this.#d=this.#e),S1(t,e))return;this.#n=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!this.#p.size)return!0;const o=new Set(i??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#n).some(u=>{const a=u;return this.#n[a]!==e[a]&&o.has(a)})};this.#S({listeners:r()})}#w(){const e=this.#t.getQueryCache().build(this.#t,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){Do.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function Zxe(e,t){return Vu(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function SB(e,t){return Zxe(e,t)||e.state.data!==void 0&&OT(e,t,t.refetchOnMount)}function OT(e,t,r){if(Vu(t.enabled,e)!==!1&&Zh(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&HM(e,t)}return!1}function EB(e,t,r,n){return(e!==t||Vu(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&HM(e,r)}function HM(e,t){return Vu(t.enabled,e)!==!1&&e.isStaleByTime(Zh(t.staleTime,e))}function Kxe(e,t){return!S1(e.getCurrentResult(),t)}var Xxe=class extends Dg{#t;#e=void 0;#r;#n;constructor(t,r){super(),this.#t=t,this.setOptions(r),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#t.defaultMutationOptions(t),S1(this.options,r)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&vp(r.mutationKey)!==vp(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#o(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#o()}mutate(t,r){return this.#n=r,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#i(){const t=this.#r?.state??rG();this.#e={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){Do.batch(()=>{if(this.#n&&this.hasListeners()){const r=this.#e.variables,n=this.#e.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,r,n),this.#n.onSettled?.(t.data,null,r,n)):t?.type==="error"&&(this.#n.onError?.(t.error,r,n),this.#n.onSettled?.(void 0,t.error,r,n))}this.listeners.forEach(r=>{r(this.#e)})})}},nG=I.createContext(void 0),Tf=e=>{const t=I.useContext(nG);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Yxe=({client:e,children:t})=>(I.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),ze.jsx(nG.Provider,{value:e,children:t})),iG=I.createContext(!1),Jxe=()=>I.useContext(iG);iG.Provider;function Qxe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var e2e=I.createContext(Qxe()),t2e=()=>I.useContext(e2e),r2e=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},n2e=e=>{I.useEffect(()=>{e.clearReset()},[e])},i2e=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||YV(r,[e.error,n])),a2e=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...i)=>r(n(...i)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},o2e=(e,t)=>e.isLoading&&e.isFetching&&!t,s2e=(e,t)=>e?.suspense&&t.isPending,CB=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function l2e(e,t,r){const n=Jxe(),i=t2e(),o=Tf(),u=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(u),u._optimisticResults=n?"isRestoring":"optimistic",a2e(u),r2e(u,i),n2e(i);const a=!o.getQueryCache().get(u.queryHash),[p]=I.useState(()=>new t(o,u)),h=p.getOptimisticResult(u),m=!n&&e.subscribed!==!1;if(I.useSyncExternalStore(I.useCallback(v=>{const w=m?p.subscribe(Do.batchCalls(v)):Rl;return p.updateResult(),w},[p,m]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),I.useEffect(()=>{p.setOptions(u)},[u,p]),s2e(u,h))throw CB(u,p,i);if(i2e({result:h,errorResetBoundary:i,throwOnError:u.throwOnError,query:o.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw h.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(u,h),u.experimental_prefetchInRender&&!yp&&o2e(h,n)&&(a?CB(u,p,i):o.getQueryCache().get(u.queryHash)?.promise)?.catch(Rl).finally(()=>{p.updateResult()}),u.notifyOnChangeProps?h:p.trackResult(h)}function Rp(e,t){return l2e(e,Wxe)}function aG(e,t){const r=Tf(),[n]=I.useState(()=>new Xxe(r,e));I.useEffect(()=>{n.setOptions(e)},[n,e]);const i=I.useSyncExternalStore(I.useCallback(u=>n.subscribe(Do.batchCalls(u)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=I.useCallback((u,a)=>{n.mutate(u,a).catch(Rl)},[n]);if(i.error&&YV(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var oG=e=>{throw TypeError(e)},u2e=(e,t,r)=>t.has(e)||oG("Cannot "+r),vC=(e,t,r)=>(u2e(e,t,"read from private field"),r?r.call(e):t.get(e)),c2e=(e,t,r)=>t.has(e)?oG("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),AB="popstate";function f2e(e={}){function t(i,o){let{pathname:u="/",search:a="",hash:p=""}=If(i.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),d0("",{pathname:u,search:a,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){let u=i.document.querySelector("base"),a="";if(u&&u.getAttribute("href")){let p=i.location.href,h=p.indexOf("#");a=h===-1?p:p.slice(0,h)}return a+"#"+(typeof o=="string"?o:rd(o))}function n(i,o){xo(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return d2e(t,r,n,e)}function ii(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function h2e(){return Math.random().toString(36).substring(2,10)}function PB(e,t){return{usr:e.state,key:e.key,idx:t}}function d0(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?If(t):t,state:r,key:t&&t.key||n||h2e()}}function rd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function If(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function d2e(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:o=!1}=n,u=i.history,a="POP",p=null,h=m();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function m(){return(u.state||{idx:null}).idx}function v(){a="POP";let R=m(),k=R==null?null:R-h;h=R,p&&p({action:a,location:T.location,delta:k})}function w(R,k){a="PUSH";let N=d0(T.location,R,k);r&&r(N,R),h=m()+1;let F=PB(N,h),D=T.createHref(N);try{u.pushState(F,"",D)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(D)}o&&p&&p({action:a,location:T.location,delta:1})}function x(R,k){a="REPLACE";let N=d0(T.location,R,k);r&&r(N,R),h=m();let F=PB(N,h),D=T.createHref(N);u.replaceState(F,"",D),o&&p&&p({action:a,location:T.location,delta:0})}function P(R){return sG(R)}let T={get action(){return a},get location(){return e(i,u)},listen(R){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(AB,v),p=R,()=>{i.removeEventListener(AB,v),p=null}},createHref(R){return t(i,R)},createURL:P,encodeLocation(R){let k=P(R);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:w,replace:x,go(R){return u.go(R)}};return T}function sG(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ii(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:rd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}var pv,TB=class{constructor(e){if(c2e(this,pv,new Map),e)for(let[t,r]of e)this.set(t,r)}get(e){if(vC(this,pv).has(e))return vC(this,pv).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){vC(this,pv).set(e,t)}};pv=new WeakMap;var p2e=new Set(["lazy","caseSensitive","path","id","index","children"]);function m2e(e){return p2e.has(e)}var g2e=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function y2e(e){return g2e.has(e)}function v2e(e){return e.index===!0}function p0(e,t,r=[],n={},i=!1){return e.map((o,u)=>{let a=[...r,String(u)],p=typeof o.id=="string"?o.id:a.join("-");if(ii(o.index!==!0||!o.children,"Cannot specify children on an index route"),ii(i||!n[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),v2e(o)){let h={...o,...t(o),id:p};return n[p]=h,h}else{let h={...o,...t(o),id:p,children:void 0};return n[p]=h,o.children&&(h.children=p0(o.children,t,a,n,i)),h}})}function zh(e,t,r="/"){return k_(e,t,r,!1)}function k_(e,t,r,n){let i=typeof t=="string"?If(t):t,o=ru(i.pathname||"/",r);if(o==null)return null;let u=lG(e);_2e(u);let a=null;for(let p=0;a==null&&p<u.length;++p){let h=cG(o);a=I2e(u[p],h,n)}return a}function b2e(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],loaderData:t[r.id],handle:r.handle}}function lG(e,t=[],r=[],n="",i=!1){let o=(u,a,p=i,h)=>{let m={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:a,route:u};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(n)&&p)return;ii(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length)}let v=_f([n,m.relativePath]),w=r.concat(m);u.children&&u.children.length>0&&(ii(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),lG(u.children,t,w,v,p)),!(u.path==null&&!u.index)&&t.push({path:v,score:P2e(v,u.index),routesMeta:w})};return e.forEach((u,a)=>{if(u.path===""||!u.path?.includes("?"))o(u,a);else for(let p of uG(u.path))o(u,a,!0,p)}),t}function uG(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let u=uG(n.join("/")),a=[];return a.push(...u.map(p=>p===""?o:[o,p].join("/"))),i&&a.push(...u),a.map(p=>e.startsWith("/")&&p===""?"/":p)}function _2e(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:T2e(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var x2e=/^:[\w-]+$/,w2e=3,S2e=2,E2e=1,C2e=10,A2e=-2,IB=e=>e==="*";function P2e(e,t){let r=e.split("/"),n=r.length;return r.some(IB)&&(n+=A2e),t&&(n+=S2e),r.filter(i=>!IB(i)).reduce((i,o)=>i+(x2e.test(o)?w2e:o===""?E2e:C2e),n)}function T2e(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function I2e(e,t,r=!1){let{routesMeta:n}=e,i={},o="/",u=[];for(let a=0;a<n.length;++a){let p=n[a],h=a===n.length-1,m=o==="/"?t:t.slice(o.length)||"/",v=m0({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},m),w=p.route;if(!v&&h&&r&&!n[n.length-1].route.index&&(v=m0({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},m)),!v)return null;Object.assign(i,v.params),u.push({params:i,pathname:_f([o,v.pathname]),pathnameBase:L2e(_f([o,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(o=_f([o,v.pathnameBase]))}return u}function m0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=M2e(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((h,{paramName:m,isOptional:v},w)=>{if(m==="*"){let P=a[w]||"";u=o.slice(0,o.length-P.length).replace(/(.)\/+$/,"$1")}const x=a[w];return v&&!x?h[m]=void 0:h[m]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:u,pattern:e}}function M2e(e,t=!1,r=!0){xo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,a,p)=>(n.push({paramName:a,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function cG(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xo(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ru(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function R2e({basename:e,pathname:t}){return t==="/"?e:_f([e,t])}function O2e(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?If(e):e;return{pathname:r?r.startsWith("/")?r:k2e(r,t):t,search:D2e(n),hash:N2e(i)}}function k2e(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function bC(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fG(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function g2(e){let t=fG(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function y2(e,t,r,n=!1){let i;typeof e=="string"?i=If(e):(i={...e},ii(!i.pathname||!i.pathname.includes("?"),bC("?","pathname","search",i)),ii(!i.pathname||!i.pathname.includes("#"),bC("#","pathname","hash",i)),ii(!i.search||!i.search.includes("#"),bC("#","search","hash",i)));let o=e===""||i.pathname==="",u=o?"/":i.pathname,a;if(u==null)a=r;else{let v=t.length-1;if(!n&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),v-=1;i.pathname=w.join("/")}a=v>=0?t[v]:"/"}let p=O2e(i,a),h=u&&u!=="/"&&u.endsWith("/"),m=(o||u===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(h||m)&&(p.pathname+="/"),p}var _f=e=>e.join("/").replace(/\/\/+/g,"/"),L2e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),D2e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,N2e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,C1=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function g0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var hG=["POST","PUT","PATCH","DELETE"],F2e=new Set(hG),B2e=["GET",...hG],j2e=new Set(B2e),z2e=new Set([301,302,303,307,308]),$2e=new Set([307,308]),_C={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},q2e={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},zm={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},U2e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WM=e=>U2e.test(e),V2e=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),dG="remix-router-transitions",pG=Symbol("ResetLoaderData");function G2e(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";ii(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=e.hydrationRouteProperties||[],i=e.mapRouteProperties||V2e,o={},u=p0(e.routes,i,void 0,o),a,p=e.basename||"/";p.startsWith("/")||(p=`/${p}`);let h=e.dataStrategy||X2e,m={...e.future},v=null,w=new Set,x=null,P=null,T=null,R=e.hydrationData!=null,k=zh(u,e.history.location,p),N=!1,F=null,D;if(k==null&&!e.patchRoutesOnNavigation){let Ye=qu(404,{pathname:e.history.location.pathname}),{matches:ot,route:jt}=Qb(u);D=!0,k=ot,F={[jt.id]:Ye}}else if(k&&!e.hydrationData&&Gt(k,u,e.history.location.pathname).active&&(k=null),k)if(k.some(Ye=>Ye.route.lazy))D=!1;else if(!k.some(Ye=>Ye.route.loader))D=!0;else{let Ye=e.hydrationData?e.hydrationData.loaderData:null,ot=e.hydrationData?e.hydrationData.errors:null;if(ot){let jt=k.findIndex(ne=>ot[ne.route.id]!==void 0);D=k.slice(0,jt+1).every(ne=>!LT(ne.route,Ye,ot))}else D=k.every(jt=>!LT(jt.route,Ye,ot))}else{D=!1,k=[];let Ye=Gt(null,u,e.history.location.pathname);Ye.active&&Ye.matches&&(N=!0,k=Ye.matches)}let U,B={historyAction:e.history.action,location:e.history.location,matches:k,initialized:D,navigation:_C,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||F,fetchers:new Map,blockers:new Map},Z="POP",J=!1,X,le=!1,H=new Map,G=null,ae=!1,se=!1,ue=new Set,me=new Map,Ce=0,pe=-1,Ee=new Map,Fe=new Set,Ke=new Map,fe=new Map,_e=new Set,Pe=new Map,ke,$e=null;function ht(){if(v=e.history.listen(({action:Ye,location:ot,delta:jt})=>{if(ke){ke(),ke=void 0;return}xo(Pe.size===0||jt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ne=_t({currentLocation:B.location,nextLocation:ot,historyAction:Ye});if(ne&&jt!=null){let de=new Promise(Be=>{ke=Be});e.history.go(jt*-1),tt(ne,{state:"blocked",location:ot,proceed(){tt(ne,{state:"proceeding",proceed:void 0,reset:void 0,location:ot}),de.then(()=>e.history.go(jt))},reset(){let Be=new Map(B.blockers);Be.set(ne,zm),nt({blockers:Be})}});return}return gt(Ye,ot)}),r){fwe(t,H);let Ye=()=>hwe(t,H);t.addEventListener("pagehide",Ye),G=()=>t.removeEventListener("pagehide",Ye)}return B.initialized||gt("POP",B.location,{initialHydration:!0}),U}function Ot(){v&&v(),G&&G(),w.clear(),X&&X.abort(),B.fetchers.forEach((Ye,ot)=>Rr(ot)),B.blockers.forEach((Ye,ot)=>Ue(ot))}function mt(Ye){return w.add(Ye),()=>w.delete(Ye)}function nt(Ye,ot={}){Ye.matches&&(Ye.matches=Ye.matches.map(de=>{let Be=o[de.route.id],et=de.route;return et.element!==Be.element||et.errorElement!==Be.errorElement||et.hydrateFallbackElement!==Be.hydrateFallbackElement?{...de,route:Be}:de})),B={...B,...Ye};let jt=[],ne=[];B.fetchers.forEach((de,Be)=>{de.state==="idle"&&(_e.has(Be)?jt.push(Be):ne.push(Be))}),_e.forEach(de=>{!B.fetchers.has(de)&&!me.has(de)&&jt.push(de)}),[...w].forEach(de=>de(B,{deletedFetchers:jt,viewTransitionOpts:ot.viewTransitionOpts,flushSync:ot.flushSync===!0})),jt.forEach(de=>Rr(de)),ne.forEach(de=>B.fetchers.delete(de))}function Nt(Ye,ot,{flushSync:jt}={}){let ne=B.actionData!=null&&B.navigation.formMethod!=null&&Yl(B.navigation.formMethod)&&B.navigation.state==="loading"&&Ye.state?._isRedirect!==!0,de;ot.actionData?Object.keys(ot.actionData).length>0?de=ot.actionData:de=null:ne?de=B.actionData:de=null;let Be=ot.loaderData?jB(B.loaderData,ot.loaderData,ot.matches||[],ot.errors):B.loaderData,et=B.blockers;et.size>0&&(et=new Map(et),et.forEach((zr,kr)=>et.set(kr,zm)));let Lt=ae?!1:Ct(Ye,ot.matches||B.matches),lr=J===!0||B.navigation.formMethod!=null&&Yl(B.navigation.formMethod)&&Ye.state?._isRedirect!==!0;a&&(u=a,a=void 0),ae||Z==="POP"||(Z==="PUSH"?e.history.push(Ye,Ye.state):Z==="REPLACE"&&e.history.replace(Ye,Ye.state));let qt;if(Z==="POP"){let zr=H.get(B.location.pathname);zr&&zr.has(Ye.pathname)?qt={currentLocation:B.location,nextLocation:Ye}:H.has(Ye.pathname)&&(qt={currentLocation:Ye,nextLocation:B.location})}else if(le){let zr=H.get(B.location.pathname);zr?zr.add(Ye.pathname):(zr=new Set([Ye.pathname]),H.set(B.location.pathname,zr)),qt={currentLocation:B.location,nextLocation:Ye}}nt({...ot,actionData:de,loaderData:Be,historyAction:Z,location:Ye,initialized:!0,navigation:_C,revalidation:"idle",restoreScrollPosition:Lt,preventScrollReset:lr,blockers:et},{viewTransitionOpts:qt,flushSync:jt===!0}),Z="POP",J=!1,le=!1,ae=!1,se=!1,$e?.resolve(),$e=null}async function kt(Ye,ot){if(typeof Ye=="number"){e.history.go(Ye);return}let jt=kT(B.location,B.matches,p,Ye,ot?.fromRouteId,ot?.relative),{path:ne,submission:de,error:Be}=MB(!1,jt,ot),et=B.location,Lt=d0(B.location,ne,ot&&ot.state);Lt={...Lt,...e.history.encodeLocation(Lt)};let lr=ot&&ot.replace!=null?ot.replace:void 0,qt="PUSH";lr===!0?qt="REPLACE":lr===!1||de!=null&&Yl(de.formMethod)&&de.formAction===B.location.pathname+B.location.search&&(qt="REPLACE");let zr=ot&&"preventScrollReset"in ot?ot.preventScrollReset===!0:void 0,kr=(ot&&ot.flushSync)===!0,sn=_t({currentLocation:et,nextLocation:Lt,historyAction:qt});if(sn){tt(sn,{state:"blocked",location:Lt,proceed(){tt(sn,{state:"proceeding",proceed:void 0,reset:void 0,location:Lt}),kt(Ye,ot)},reset(){let xn=new Map(B.blockers);xn.set(sn,zm),nt({blockers:xn})}});return}await gt(qt,Lt,{submission:de,pendingError:Be,preventScrollReset:zr,replace:ot&&ot.replace,enableViewTransition:ot&&ot.viewTransition,flushSync:kr})}function It(){$e||($e=dwe()),Wt(),nt({revalidation:"loading"});let Ye=$e.promise;return B.navigation.state==="submitting"?Ye:B.navigation.state==="idle"?(gt(B.historyAction,B.location,{startUninterruptedRevalidation:!0}),Ye):(gt(Z||B.historyAction,B.navigation.location,{overrideNavigation:B.navigation,enableViewTransition:le===!0}),Ye)}async function gt(Ye,ot,jt){X&&X.abort(),X=null,Z=Ye,ae=(jt&&jt.startUninterruptedRevalidation)===!0,zt(B.location,B.matches),J=(jt&&jt.preventScrollReset)===!0,le=(jt&&jt.enableViewTransition)===!0;let ne=a||u,de=jt&&jt.overrideNavigation,Be=jt?.initialHydration&&B.matches&&B.matches.length>0&&!N?B.matches:zh(ne,ot,p),et=(jt&&jt.flushSync)===!0;if(Be&&B.initialized&&!se&&iwe(B.location,ot)&&!(jt&&jt.submission&&Yl(jt.submission.formMethod))){Nt(ot,{matches:Be},{flushSync:et});return}let Lt=Gt(Be,ne,ot.pathname);if(Lt.active&&Lt.matches&&(Be=Lt.matches),!Be){let{error:Vr,notFoundMatches:Kr,route:An}=Mt(ot.pathname);Nt(ot,{matches:Kr,loaderData:{},errors:{[An.id]:Vr}},{flushSync:et});return}X=new AbortController;let lr=$m(e.history,ot,X.signal,jt&&jt.submission),qt=e.unstable_getContext?await e.unstable_getContext():new TB,zr;if(jt&&jt.pendingError)zr=[$h(Be).route.id,{type:"error",error:jt.pendingError}];else if(jt&&jt.submission&&Yl(jt.submission.formMethod)){let Vr=await Le(lr,ot,jt.submission,Be,qt,Lt.active,jt&&jt.initialHydration===!0,{replace:jt.replace,flushSync:et});if(Vr.shortCircuited)return;if(Vr.pendingActionResult){let[Kr,An]=Vr.pendingActionResult;if(Cu(An)&&g0(An.error)&&An.error.status===404){X=null,Nt(ot,{matches:Vr.matches,loaderData:{},errors:{[Kr]:An.error}});return}}Be=Vr.matches||Be,zr=Vr.pendingActionResult,de=xC(ot,jt.submission),et=!1,Lt.active=!1,lr=$m(e.history,lr.url,lr.signal)}let{shortCircuited:kr,matches:sn,loaderData:xn,errors:yr}=await pr(lr,ot,Be,qt,Lt.active,de,jt&&jt.submission,jt&&jt.fetcherSubmission,jt&&jt.replace,jt&&jt.initialHydration===!0,et,zr);kr||(X=null,Nt(ot,{matches:sn||Be,...zB(zr),loaderData:xn,errors:yr}))}async function Le(Ye,ot,jt,ne,de,Be,et,Lt={}){Wt();let lr=uwe(ot,jt);if(nt({navigation:lr},{flushSync:Lt.flushSync===!0}),Be){let kr=await vt(ne,ot.pathname,Ye.signal);if(kr.type==="aborted")return{shortCircuited:!0};if(kr.type==="error"){if(kr.partialMatches.length===0){let{matches:xn,route:yr}=Qb(u);return{matches:xn,pendingActionResult:[yr.id,{type:"error",error:kr.error}]}}let sn=$h(kr.partialMatches).route.id;return{matches:kr.partialMatches,pendingActionResult:[sn,{type:"error",error:kr.error}]}}else if(kr.matches)ne=kr.matches;else{let{notFoundMatches:sn,error:xn,route:yr}=Mt(ot.pathname);return{matches:sn,pendingActionResult:[yr.id,{type:"error",error:xn}]}}}let qt,zr=L_(ne,ot);if(!zr.route.action&&!zr.route.lazy)qt={type:"error",error:qu(405,{method:Ye.method,pathname:ot.pathname,routeId:zr.route.id})};else{let kr=rg(i,o,Ye,ne,zr,et?[]:n,de),sn=await Ft(Ye,kr,de,null);if(qt=sn[zr.route.id],!qt){for(let xn of ne)if(sn[xn.route.id]){qt=sn[xn.route.id];break}}if(Ye.signal.aborted)return{shortCircuited:!0}}if(tp(qt)){let kr;return Lt&&Lt.replace!=null?kr=Lt.replace:kr=NB(qt.response.headers.get("Location"),new URL(Ye.url),p)===B.location.pathname+B.location.search,await ct(Ye,qt,!0,{submission:jt,replace:kr}),{shortCircuited:!0}}if(Cu(qt)){let kr=$h(ne,zr.route.id);return(Lt&&Lt.replace)!==!0&&(Z="PUSH"),{matches:ne,pendingActionResult:[kr.route.id,qt,zr.route.id]}}return{matches:ne,pendingActionResult:[zr.route.id,qt]}}async function pr(Ye,ot,jt,ne,de,Be,et,Lt,lr,qt,zr,kr){let sn=Be||xC(ot,et),xn=et||Lt||qB(sn),yr=!ae&&!qt;if(de){if(yr){let mi=hr(kr);nt({navigation:sn,...mi!==void 0?{actionData:mi}:{}},{flushSync:zr})}let qn=await vt(jt,ot.pathname,Ye.signal);if(qn.type==="aborted")return{shortCircuited:!0};if(qn.type==="error"){if(qn.partialMatches.length===0){let{matches:Hn,route:da}=Qb(u);return{matches:Hn,loaderData:{},errors:{[da.id]:qn.error}}}let mi=$h(qn.partialMatches).route.id;return{matches:qn.partialMatches,loaderData:{},errors:{[mi]:qn.error}}}else if(qn.matches)jt=qn.matches;else{let{error:mi,notFoundMatches:Hn,route:da}=Mt(ot.pathname);return{matches:Hn,loaderData:{},errors:{[da.id]:mi}}}}let Vr=a||u,{dsMatches:Kr,revalidatingFetchers:An}=RB(Ye,ne,i,o,e.history,B,jt,xn,ot,qt?[]:n,qt===!0,se,ue,_e,Ke,Fe,Vr,p,e.patchRoutesOnNavigation!=null,kr);if(pe=++Ce,!e.dataStrategy&&!Kr.some(qn=>qn.shouldLoad)&&!Kr.some(qn=>qn.route.unstable_middleware)&&An.length===0){let qn=ve();return Nt(ot,{matches:jt,loaderData:{},errors:kr&&Cu(kr[1])?{[kr[0]]:kr[1].error}:null,...zB(kr),...qn?{fetchers:new Map(B.fetchers)}:{}},{flushSync:zr}),{shortCircuited:!0}}if(yr){let qn={};if(!de){qn.navigation=sn;let mi=hr(kr);mi!==void 0&&(qn.actionData=mi)}An.length>0&&(qn.fetchers=vr(An)),nt(qn,{flushSync:zr})}An.forEach(qn=>{fr(qn.key),qn.controller&&me.set(qn.key,qn.controller)});let Ni=()=>An.forEach(qn=>fr(qn.key));X&&X.signal.addEventListener("abort",Ni);let{loaderResults:Mi,fetcherResults:mn}=await Yt(Kr,An,Ye,ne);if(Ye.signal.aborted)return{shortCircuited:!0};X&&X.signal.removeEventListener("abort",Ni),An.forEach(qn=>me.delete(qn.key));let Pi=e_(Mi);if(Pi)return await ct(Ye,Pi.result,!0,{replace:lr}),{shortCircuited:!0};if(Pi=e_(mn),Pi)return Fe.add(Pi.key),await ct(Ye,Pi.result,!0,{replace:lr}),{shortCircuited:!0};let{loaderData:Ri,errors:ni}=BB(B,jt,Mi,kr,An,mn);qt&&B.errors&&(ni={...B.errors,...ni});let Ji=ve(),Eo=xe(pe),$n=Ji||Eo||An.length>0;return{matches:jt,loaderData:Ri,errors:ni,...$n?{fetchers:new Map(B.fetchers)}:{}}}function hr(Ye){if(Ye&&!Cu(Ye[1]))return{[Ye[0]]:Ye[1].data};if(B.actionData)return Object.keys(B.actionData).length===0?null:B.actionData}function vr(Ye){return Ye.forEach(ot=>{let jt=B.fetchers.get(ot.key),ne=Hy(void 0,jt?jt.data:void 0);B.fetchers.set(ot.key,ne)}),new Map(B.fetchers)}async function Qt(Ye,ot,jt,ne){fr(Ye);let de=(ne&&ne.flushSync)===!0,Be=a||u,et=kT(B.location,B.matches,p,jt,ot,ne?.relative),Lt=zh(Be,et,p),lr=Gt(Lt,Be,et);if(lr.active&&lr.matches&&(Lt=lr.matches),!Lt){br(Ye,ot,qu(404,{pathname:et}),{flushSync:de});return}let{path:qt,submission:zr,error:kr}=MB(!0,et,ne);if(kr){br(Ye,ot,kr,{flushSync:de});return}let sn=e.unstable_getContext?await e.unstable_getContext():new TB,xn=(ne&&ne.preventScrollReset)===!0;if(zr&&Yl(zr.formMethod)){await qe(Ye,ot,qt,Lt,sn,lr.active,de,xn,zr);return}Ke.set(Ye,{routeId:ot,path:qt}),await rt(Ye,ot,qt,Lt,sn,lr.active,de,xn,zr)}async function qe(Ye,ot,jt,ne,de,Be,et,Lt,lr){Wt(),Ke.delete(Ye);let qt=B.fetchers.get(Ye);ur(Ye,cwe(lr,qt),{flushSync:et});let zr=new AbortController,kr=$m(e.history,jt,zr.signal,lr);if(Be){let Ti=await vt(ne,new URL(kr.url).pathname,kr.signal,Ye);if(Ti.type==="aborted")return;if(Ti.type==="error"){br(Ye,ot,Ti.error,{flushSync:et});return}else if(Ti.matches)ne=Ti.matches;else{br(Ye,ot,qu(404,{pathname:jt}),{flushSync:et});return}}let sn=L_(ne,jt);if(!sn.route.action&&!sn.route.lazy){let Ti=qu(405,{method:lr.formMethod,pathname:jt,routeId:ot});br(Ye,ot,Ti,{flushSync:et});return}me.set(Ye,zr);let xn=Ce,yr=rg(i,o,kr,ne,sn,n,de),Kr=(await Ft(kr,yr,de,Ye))[sn.route.id];if(kr.signal.aborted){me.get(Ye)===zr&&me.delete(Ye);return}if(_e.has(Ye)){if(tp(Kr)||Cu(Kr)){ur(Ye,Dh(void 0));return}}else{if(tp(Kr))if(me.delete(Ye),pe>xn){ur(Ye,Dh(void 0));return}else return Fe.add(Ye),ur(Ye,Hy(lr)),ct(kr,Kr,!1,{fetcherSubmission:lr,preventScrollReset:Lt});if(Cu(Kr)){br(Ye,ot,Kr.error);return}}let An=B.navigation.location||B.location,Ni=$m(e.history,An,zr.signal),Mi=a||u,mn=B.navigation.state!=="idle"?zh(Mi,B.navigation.location,p):B.matches;ii(mn,"Didn't find any matches after fetcher action");let Pi=++Ce;Ee.set(Ye,Pi);let Ri=Hy(lr,Kr.data);B.fetchers.set(Ye,Ri);let{dsMatches:ni,revalidatingFetchers:Ji}=RB(Ni,de,i,o,e.history,B,mn,lr,An,n,!1,se,ue,_e,Ke,Fe,Mi,p,e.patchRoutesOnNavigation!=null,[sn.route.id,Kr]);Ji.filter(Ti=>Ti.key!==Ye).forEach(Ti=>{let Ha=Ti.key,_a=B.fetchers.get(Ha),ts=Hy(void 0,_a?_a.data:void 0);B.fetchers.set(Ha,ts),fr(Ha),Ti.controller&&me.set(Ha,Ti.controller)}),nt({fetchers:new Map(B.fetchers)});let Eo=()=>Ji.forEach(Ti=>fr(Ti.key));zr.signal.addEventListener("abort",Eo);let{loaderResults:$n,fetcherResults:qn}=await Yt(ni,Ji,Ni,de);if(zr.signal.aborted)return;if(zr.signal.removeEventListener("abort",Eo),Ee.delete(Ye),me.delete(Ye),Ji.forEach(Ti=>me.delete(Ti.key)),B.fetchers.has(Ye)){let Ti=Dh(Kr.data);B.fetchers.set(Ye,Ti)}let mi=e_($n);if(mi)return ct(Ni,mi.result,!1,{preventScrollReset:Lt});if(mi=e_(qn),mi)return Fe.add(mi.key),ct(Ni,mi.result,!1,{preventScrollReset:Lt});let{loaderData:Hn,errors:da}=BB(B,mn,$n,void 0,Ji,qn);xe(Pi),B.navigation.state==="loading"&&Pi>pe?(ii(Z,"Expected pending action"),X&&X.abort(),Nt(B.navigation.location,{matches:mn,loaderData:Hn,errors:da,fetchers:new Map(B.fetchers)})):(nt({errors:da,loaderData:jB(B.loaderData,Hn,mn,da),fetchers:new Map(B.fetchers)}),se=!1)}async function rt(Ye,ot,jt,ne,de,Be,et,Lt,lr){let qt=B.fetchers.get(Ye);ur(Ye,Hy(lr,qt?qt.data:void 0),{flushSync:et});let zr=new AbortController,kr=$m(e.history,jt,zr.signal);if(Be){let An=await vt(ne,new URL(kr.url).pathname,kr.signal,Ye);if(An.type==="aborted")return;if(An.type==="error"){br(Ye,ot,An.error,{flushSync:et});return}else if(An.matches)ne=An.matches;else{br(Ye,ot,qu(404,{pathname:jt}),{flushSync:et});return}}let sn=L_(ne,jt);me.set(Ye,zr);let xn=Ce,yr=rg(i,o,kr,ne,sn,n,de),Kr=(await Ft(kr,yr,de,Ye))[sn.route.id];if(me.get(Ye)===zr&&me.delete(Ye),!kr.signal.aborted){if(_e.has(Ye)){ur(Ye,Dh(void 0));return}if(tp(Kr))if(pe>xn){ur(Ye,Dh(void 0));return}else{Fe.add(Ye),await ct(kr,Kr,!1,{preventScrollReset:Lt});return}if(Cu(Kr)){br(Ye,ot,Kr.error);return}ur(Ye,Dh(Kr.data))}}async function ct(Ye,ot,jt,{submission:ne,fetcherSubmission:de,preventScrollReset:Be,replace:et}={}){ot.response.headers.has("X-Remix-Revalidate")&&(se=!0);let Lt=ot.response.headers.get("Location");ii(Lt,"Expected a Location header on the redirect Response"),Lt=NB(Lt,new URL(Ye.url),p);let lr=d0(B.location,Lt,{_isRedirect:!0});if(r){let yr=!1;if(ot.response.headers.has("X-Remix-Reload-Document"))yr=!0;else if(WM(Lt)){const Vr=sG(Lt,!0);yr=Vr.origin!==t.location.origin||ru(Vr.pathname,p)==null}if(yr){et?t.location.replace(Lt):t.location.assign(Lt);return}}X=null;let qt=et===!0||ot.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:zr,formAction:kr,formEncType:sn}=B.navigation;!ne&&!de&&zr&&kr&&sn&&(ne=qB(B.navigation));let xn=ne||de;if($2e.has(ot.response.status)&&xn&&Yl(xn.formMethod))await gt(qt,lr,{submission:{...xn,formAction:Lt},preventScrollReset:Be||J,enableViewTransition:jt?le:void 0});else{let yr=xC(lr,ne);await gt(qt,lr,{overrideNavigation:yr,fetcherSubmission:de,preventScrollReset:Be||J,enableViewTransition:jt?le:void 0})}}async function Ft(Ye,ot,jt,ne){let de,Be={};try{de=await J2e(h,Ye,ot,ne,jt,!1)}catch(et){return ot.filter(Lt=>Lt.shouldLoad).forEach(Lt=>{Be[Lt.route.id]={type:"error",error:et}}),Be}if(Ye.signal.aborted)return Be;for(let[et,Lt]of Object.entries(de))if(swe(Lt)){let lr=Lt.result;Be[et]={type:"redirect",response:rwe(lr,Ye,et,ot,p)}}else Be[et]=await twe(Lt);return Be}async function Yt(Ye,ot,jt,ne){let de=Ft(jt,Ye,ne,null),Be=Promise.all(ot.map(async lr=>{if(lr.matches&&lr.match&&lr.request&&lr.controller){let zr=(await Ft(lr.request,lr.matches,ne,lr.key))[lr.match.route.id];return{[lr.key]:zr}}else return Promise.resolve({[lr.key]:{type:"error",error:qu(404,{pathname:lr.path})}})})),et=await de,Lt=(await Be).reduce((lr,qt)=>Object.assign(lr,qt),{});return{loaderResults:et,fetcherResults:Lt}}function Wt(){se=!0,Ke.forEach((Ye,ot)=>{me.has(ot)&&ue.add(ot),fr(ot)})}function ur(Ye,ot,jt={}){B.fetchers.set(Ye,ot),nt({fetchers:new Map(B.fetchers)},{flushSync:(jt&&jt.flushSync)===!0})}function br(Ye,ot,jt,ne={}){let de=$h(B.matches,ot);Rr(Ye),nt({errors:{[de.route.id]:jt},fetchers:new Map(B.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function xr(Ye){return fe.set(Ye,(fe.get(Ye)||0)+1),_e.has(Ye)&&_e.delete(Ye),B.fetchers.get(Ye)||q2e}function Rr(Ye){let ot=B.fetchers.get(Ye);me.has(Ye)&&!(ot&&ot.state==="loading"&&Ee.has(Ye))&&fr(Ye),Ke.delete(Ye),Ee.delete(Ye),Fe.delete(Ye),_e.delete(Ye),ue.delete(Ye),B.fetchers.delete(Ye)}function wr(Ye){let ot=(fe.get(Ye)||0)-1;ot<=0?(fe.delete(Ye),_e.add(Ye)):fe.set(Ye,ot),nt({fetchers:new Map(B.fetchers)})}function fr(Ye){let ot=me.get(Ye);ot&&(ot.abort(),me.delete(Ye))}function bt(Ye){for(let ot of Ye){let jt=xr(ot),ne=Dh(jt.data);B.fetchers.set(ot,ne)}}function ve(){let Ye=[],ot=!1;for(let jt of Fe){let ne=B.fetchers.get(jt);ii(ne,`Expected fetcher: ${jt}`),ne.state==="loading"&&(Fe.delete(jt),Ye.push(jt),ot=!0)}return bt(Ye),ot}function xe(Ye){let ot=[];for(let[jt,ne]of Ee)if(ne<Ye){let de=B.fetchers.get(jt);ii(de,`Expected fetcher: ${jt}`),de.state==="loading"&&(fr(jt),Ee.delete(jt),ot.push(jt))}return bt(ot),ot.length>0}function Ae(Ye,ot){let jt=B.blockers.get(Ye)||zm;return Pe.get(Ye)!==ot&&Pe.set(Ye,ot),jt}function Ue(Ye){B.blockers.delete(Ye),Pe.delete(Ye)}function tt(Ye,ot){let jt=B.blockers.get(Ye)||zm;ii(jt.state==="unblocked"&&ot.state==="blocked"||jt.state==="blocked"&&ot.state==="blocked"||jt.state==="blocked"&&ot.state==="proceeding"||jt.state==="blocked"&&ot.state==="unblocked"||jt.state==="proceeding"&&ot.state==="unblocked",`Invalid blocker state transition: ${jt.state} -> ${ot.state}`);let ne=new Map(B.blockers);ne.set(Ye,ot),nt({blockers:ne})}function _t({currentLocation:Ye,nextLocation:ot,historyAction:jt}){if(Pe.size===0)return;Pe.size>1&&xo(!1,"A router only supports one blocker at a time");let ne=Array.from(Pe.entries()),[de,Be]=ne[ne.length-1],et=B.blockers.get(de);if(!(et&&et.state==="proceeding")&&Be({currentLocation:Ye,nextLocation:ot,historyAction:jt}))return de}function Mt(Ye){let ot=qu(404,{pathname:Ye}),jt=a||u,{matches:ne,route:de}=Qb(jt);return{notFoundMatches:ne,route:de,error:ot}}function Pt(Ye,ot,jt){if(x=Ye,T=ot,P=jt||null,!R&&B.navigation===_C){R=!0;let ne=Ct(B.location,B.matches);ne!=null&&nt({restoreScrollPosition:ne})}return()=>{x=null,T=null,P=null}}function Kt(Ye,ot){return P&&P(Ye,ot.map(ne=>b2e(ne,B.loaderData)))||Ye.key}function zt(Ye,ot){if(x&&T){let jt=Kt(Ye,ot);x[jt]=T()}}function Ct(Ye,ot){if(x){let jt=Kt(Ye,ot),ne=x[jt];if(typeof ne=="number")return ne}return null}function Gt(Ye,ot,jt){if(e.patchRoutesOnNavigation)if(Ye){if(Object.keys(Ye[0].params).length>0)return{active:!0,matches:k_(ot,jt,p,!0)}}else return{active:!0,matches:k_(ot,jt,p,!0)||[]};return{active:!1,matches:null}}async function vt(Ye,ot,jt,ne){if(!e.patchRoutesOnNavigation)return{type:"success",matches:Ye};let de=Ye;for(;;){let Be=a==null,et=a||u,Lt=o;try{await e.patchRoutesOnNavigation({signal:jt,path:ot,matches:de,fetcherKey:ne,patch:(zr,kr)=>{jt.aborted||OB(zr,kr,et,Lt,i,!1)}})}catch(zr){return{type:"error",error:zr,partialMatches:de}}finally{Be&&!jt.aborted&&(u=[...u])}if(jt.aborted)return{type:"aborted"};let lr=zh(et,ot,p);if(lr)return{type:"success",matches:lr};let qt=k_(et,ot,p,!0);if(!qt||de.length===qt.length&&de.every((zr,kr)=>zr.route.id===qt[kr].route.id))return{type:"success",matches:null};de=qt}}function Pr(Ye){o={},a=p0(Ye,i,void 0,o)}function Tr(Ye,ot,jt=!1){let ne=a==null;OB(Ye,ot,a||u,o,i,jt),ne&&(u=[...u],nt({}))}return U={get basename(){return p},get future(){return m},get state(){return B},get routes(){return u},get window(){return t},initialize:ht,subscribe:mt,enableScrollRestoration:Pt,navigate:kt,fetch:Qt,revalidate:It,createHref:Ye=>e.history.createHref(Ye),encodeLocation:Ye=>e.history.encodeLocation(Ye),getFetcher:xr,deleteFetcher:wr,dispose:Ot,getBlocker:Ae,deleteBlocker:Ue,patchRoutes:Tr,_internalFetchControllers:me,_internalSetRoutes:Pr,_internalSetStateDoNotUseOrYouWillBreakYourApp(Ye){nt(Ye)}},U}function H2e(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function kT(e,t,r,n,i,o){let u,a;if(i){u=[];for(let h of t)if(u.push(h),h.route.id===i){a=h;break}}else u=t,a=t[t.length-1];let p=y2(n||".",g2(u),ru(e.pathname,r)||e.pathname,o==="path");if(n==null&&(p.search=e.search,p.hash=e.hash),(n==null||n===""||n===".")&&a){let h=ZM(p.search);if(a.route.index&&!h)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&h){let m=new URLSearchParams(p.search),v=m.getAll("index");m.delete("index"),v.filter(x=>x).forEach(x=>m.append("index",x));let w=m.toString();p.search=w?`?${w}`:""}}return r!=="/"&&(p.pathname=R2e({basename:r,pathname:p.pathname})),rd(p)}function MB(e,t,r){if(!r||!H2e(r))return{path:t};if(r.formMethod&&!lwe(r.formMethod))return{path:t,error:qu(405,{method:r.formMethod})};let n=()=>({path:t,error:qu(400,{type:"invalid-body"})}),o=(r.formMethod||"get").toUpperCase(),u=_G(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Yl(o))return n();let v=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((w,[x,P])=>`${w}${x}=${P}
`,""):String(r.body);return{path:t,submission:{formMethod:o,formAction:u,formEncType:r.formEncType,formData:void 0,json:void 0,text:v}}}else if(r.formEncType==="application/json"){if(!Yl(o))return n();try{let v=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:o,formAction:u,formEncType:r.formEncType,formData:void 0,json:v,text:void 0}}}catch{return n()}}}ii(typeof FormData=="function","FormData is not available in this environment");let a,p;if(r.formData)a=NT(r.formData),p=r.formData;else if(r.body instanceof FormData)a=NT(r.body),p=r.body;else if(r.body instanceof URLSearchParams)a=r.body,p=FB(a);else if(r.body==null)a=new URLSearchParams,p=new FormData;else try{a=new URLSearchParams(r.body),p=FB(a)}catch{return n()}let h={formMethod:o,formAction:u,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Yl(h.formMethod))return{path:t,submission:h};let m=If(t);return e&&m.search&&ZM(m.search)&&a.append("index",""),m.search=`?${a}`,{path:rd(m),submission:h}}function RB(e,t,r,n,i,o,u,a,p,h,m,v,w,x,P,T,R,k,N,F){let D=F?Cu(F[1])?F[1].error:F[1].data:void 0,U=i.createURL(o.location),B=i.createURL(p),Z;if(m&&o.errors){let ae=Object.keys(o.errors)[0];Z=u.findIndex(se=>se.route.id===ae)}else if(F&&Cu(F[1])){let ae=F[0];Z=u.findIndex(se=>se.route.id===ae)-1}let J=F?F[1].statusCode:void 0,X=J&&J>=400,le={currentUrl:U,currentParams:o.matches[0]?.params||{},nextUrl:B,nextParams:u[0].params,...a,actionResult:D,actionStatus:J},H=u.map((ae,se)=>{let{route:ue}=ae,me=null;if(Z!=null&&se>Z?me=!1:ue.lazy?me=!0:ue.loader==null?me=!1:m?me=LT(ue,o.loaderData,o.errors):W2e(o.loaderData,o.matches[se],ae)&&(me=!0),me!==null)return DT(r,n,e,ae,h,t,me);let Ce=X?!1:v||U.pathname+U.search===B.pathname+B.search||U.search!==B.search||Z2e(o.matches[se],ae),pe={...le,defaultShouldRevalidate:Ce},Ee=A1(ae,pe);return DT(r,n,e,ae,h,t,Ee,pe)}),G=[];return P.forEach((ae,se)=>{if(m||!u.some(fe=>fe.route.id===ae.routeId)||x.has(se))return;let ue=o.fetchers.get(se),me=ue&&ue.state!=="idle"&&ue.data===void 0,Ce=zh(R,ae.path,k);if(!Ce){if(N&&me)return;G.push({key:se,routeId:ae.routeId,path:ae.path,matches:null,match:null,request:null,controller:null});return}if(T.has(se))return;let pe=L_(Ce,ae.path),Ee=new AbortController,Fe=$m(i,ae.path,Ee.signal),Ke=null;if(w.has(se))w.delete(se),Ke=rg(r,n,Fe,Ce,pe,h,t);else if(me)v&&(Ke=rg(r,n,Fe,Ce,pe,h,t));else{let fe={...le,defaultShouldRevalidate:X?!1:v};A1(pe,fe)&&(Ke=rg(r,n,Fe,Ce,pe,h,t,fe))}Ke&&G.push({key:se,routeId:ae.routeId,path:ae.path,matches:Ke,match:pe,request:Fe,controller:Ee})}),{dsMatches:H,revalidatingFetchers:G}}function LT(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&e.id in t,i=r!=null&&r[e.id]!==void 0;return!n&&i?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!i}function W2e(e,t,r){let n=!t||r.route.id!==t.route.id,i=!e.hasOwnProperty(r.route.id);return n||i}function Z2e(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function A1(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function OB(e,t,r,n,i,o){let u;if(e){let h=n[e];ii(h,`No route found to patch children into: routeId = ${e}`),h.children||(h.children=[]),u=h.children}else u=r;let a=[],p=[];if(t.forEach(h=>{let m=u.find(v=>mG(h,v));m?p.push({existingRoute:m,newRoute:h}):a.push(h)}),a.length>0){let h=p0(a,i,[e||"_","patch",String(u?.length||"0")],n);u.push(...h)}if(o&&p.length>0)for(let h=0;h<p.length;h++){let{existingRoute:m,newRoute:v}=p[h],w=m,[x]=p0([v],i,[],{},!0);Object.assign(w,{element:x.element?x.element:w.element,errorElement:x.errorElement?x.errorElement:w.errorElement,hydrateFallbackElement:x.hydrateFallbackElement?x.hydrateFallbackElement:w.hydrateFallbackElement})}}function mG(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>t.children?.some(i=>mG(r,i))):!1}var kB=new WeakMap,gG=({key:e,route:t,manifest:r,mapRouteProperties:n})=>{let i=r[t.id];if(ii(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let o=i.lazy[e];if(!o)return;let u=kB.get(i);u||(u={},kB.set(i,u));let a=u[e];if(a)return a;let p=(async()=>{let h=m2e(e),v=i[e]!==void 0&&e!=="hasErrorBoundary";if(h)xo(!h,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),u[e]=Promise.resolve();else if(v)xo(!1,`Route "${i.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let w=await o();w!=null&&(Object.assign(i,{[e]:w}),Object.assign(i,n(i)))}typeof i.lazy=="object"&&(i.lazy[e]=void 0,Object.values(i.lazy).every(w=>w===void 0)&&(i.lazy=void 0))})();return u[e]=p,p},LB=new WeakMap;function K2e(e,t,r,n,i){let o=r[e.id];if(ii(o,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let m=LB.get(o);if(m)return{lazyRoutePromise:m,lazyHandlerPromise:m};let v=(async()=>{ii(typeof e.lazy=="function","No lazy route function found");let w=await e.lazy(),x={};for(let P in w){let T=w[P];if(T===void 0)continue;let R=y2e(P),N=o[P]!==void 0&&P!=="hasErrorBoundary";R?xo(!R,"Route property "+P+" is not a supported property to be returned from a lazy route function. This property will be ignored."):N?xo(!N,`Route "${o.id}" has a static property "${P}" defined but its lazy function is also returning a value for this property. The lazy route property "${P}" will be ignored.`):x[P]=T}Object.assign(o,x),Object.assign(o,{...n(o),lazy:void 0})})();return LB.set(o,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let u=Object.keys(e.lazy),a=[],p;for(let m of u){if(i&&i.includes(m))continue;let v=gG({key:m,route:e,manifest:r,mapRouteProperties:n});v&&(a.push(v),m===t&&(p=v))}let h=a.length>0?Promise.all(a).then(()=>{}):void 0;return h?.catch(()=>{}),p?.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:p}}async function DB(e){let t=e.matches.filter(i=>i.shouldLoad),r={};return(await Promise.all(t.map(i=>i.resolve()))).forEach((i,o)=>{r[t[o].route.id]=i}),r}async function X2e(e){return e.matches.some(t=>t.route.unstable_middleware)?yG(e,()=>DB(e)):DB(e)}function yG(e,t){return Y2e(e,t,n=>n,awe,r);function r(n,i,o){if(o)return Promise.resolve(Object.assign(o.value,{[i]:{type:"error",result:n}}));{let{matches:u}=e,a=Math.min(u.findIndex(h=>h.route.id===i)||0,u.findIndex(h=>h.unstable_shouldCallHandler())||0),p=$h(u,u[a].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:n}})}}}async function Y2e(e,t,r,n,i){let{matches:o,request:u,params:a,context:p}=e,h=o.flatMap(v=>v.route.unstable_middleware?v.route.unstable_middleware.map(w=>[v.route.id,w]):[]);return await vG({request:u,params:a,context:p},h,t,r,n,i)}async function vG(e,t,r,n,i,o,u=0){let{request:a}=e;if(a.signal.aborted)throw a.signal.reason??new Error(`Request aborted: ${a.method} ${a.url}`);let p=t[u];if(!p)return await r();let[h,m]=p,v,w=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await vG(e,t,r,n,i,o,u+1)},v.value}catch(x){return v={value:await o(x,h,v)},v.value}};try{let x=await m(e,w),P=x!=null?n(x):void 0;return i(P)?P:v?P??v.value:(v={value:await w()},v.value)}catch(x){return await o(x,h,v)}}function bG(e,t,r,n,i){let o=gG({key:"unstable_middleware",route:n.route,manifest:t,mapRouteProperties:e}),u=K2e(n.route,Yl(r.method)?"action":"loader",t,e,i);return{middleware:o,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function DT(e,t,r,n,i,o,u,a=null){let p=!1,h=bG(e,t,r,n,i);return{...n,_lazyPromises:h,shouldLoad:u,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler(m){return p=!0,a?typeof m=="boolean"?A1(n,{...a,defaultShouldRevalidate:m}):A1(n,a):u},resolve(m){return p||u||m&&!Yl(r.method)&&(n.route.lazy||n.route.loader)?Q2e({request:r,match:n,lazyHandlerPromise:h?.handler,lazyRoutePromise:h?.route,handlerOverride:m,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function rg(e,t,r,n,i,o,u,a=null){return n.map(p=>p.route.id!==i.route.id?{...p,shouldLoad:!1,unstable_shouldRevalidateArgs:a,unstable_shouldCallHandler:()=>!1,_lazyPromises:bG(e,t,r,p,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:DT(e,t,r,p,o,u,!0,a))}async function J2e(e,t,r,n,i,o){r.some(h=>h._lazyPromises?.middleware)&&await Promise.all(r.map(h=>h._lazyPromises?.middleware));let u={request:t,params:r[0].params,context:i,matches:r},p=await e({...u,fetcherKey:n,unstable_runClientMiddleware:h=>{let m=u;return yG(m,()=>h({...m,fetcherKey:n,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}))}});try{await Promise.all(r.flatMap(h=>[h._lazyPromises?.handler,h._lazyPromises?.route]))}catch{}return p}async function Q2e({request:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:n,handlerOverride:i,scopedContext:o}){let u,a,p=Yl(e.method),h=p?"action":"loader",m=v=>{let w,x=new Promise((R,k)=>w=k);a=()=>w(),e.signal.addEventListener("abort",a);let P=R=>typeof v!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${h}" [routeId: ${t.route.id}]`)):v({request:e,params:t.params,context:o},...R!==void 0?[R]:[]),T=(async()=>{try{return{type:"data",result:await(i?i(k=>P(k)):P())}}catch(R){return{type:"error",result:R}}})();return Promise.race([T,x])};try{let v=p?t.route.action:t.route.loader;if(r||n)if(v){let w,[x]=await Promise.all([m(v).catch(P=>{w=P}),r,n]);if(w!==void 0)throw w;u=x}else{await r;let w=p?t.route.action:t.route.loader;if(w)[u]=await Promise.all([m(w),n]);else if(h==="action"){let x=new URL(e.url),P=x.pathname+x.search;throw qu(405,{method:e.method,pathname:P,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(v)u=await m(v);else{let w=new URL(e.url),x=w.pathname+w.search;throw qu(404,{pathname:x})}}catch(v){return{type:"error",result:v}}finally{a&&e.signal.removeEventListener("abort",a)}return u}async function ewe(e){let t=e.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?e.body==null?null:e.json():e.text()}async function twe(e){let{result:t,type:r}=e;if(xG(t)){let n;try{n=await ewe(t)}catch(i){return{type:"error",error:i}}return r==="error"?{type:"error",error:new C1(t.status,t.statusText,n),statusCode:t.status,headers:t.headers}:{type:"data",data:n,statusCode:t.status,headers:t.headers}}return r==="error"?$B(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new C1(t.init?.status||500,void 0,t.data),statusCode:g0(t)?t.status:void 0,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:g0(t)?t.status:void 0}:$B(t)?{type:"data",data:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function rwe(e,t,r,n,i){let o=e.headers.get("Location");if(ii(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!WM(o)){let u=n.slice(0,n.findIndex(a=>a.route.id===r)+1);o=kT(new URL(t.url),u,i,o),e.headers.set("Location",o)}return e}function NB(e,t,r){if(WM(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),o=ru(i.pathname,r)!=null;if(i.origin===t.origin&&o)return i.pathname+i.search+i.hash}return e}function $m(e,t,r,n){let i=e.createURL(_G(t)).toString(),o={signal:r};if(n&&Yl(n.formMethod)){let{formMethod:u,formEncType:a}=n;o.method=u.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(n.json)):a==="text/plain"?o.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?o.body=NT(n.formData):o.body=n.formData}return new Request(i,o)}function NT(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function FB(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function nwe(e,t,r,n=!1,i=!1){let o={},u=null,a,p=!1,h={},m=r&&Cu(r[1])?r[1].error:void 0;return e.forEach(v=>{if(!(v.route.id in t))return;let w=v.route.id,x=t[w];if(ii(!tp(x),"Cannot handle redirect results in processLoaderData"),Cu(x)){let P=x.error;if(m!==void 0&&(P=m,m=void 0),u=u||{},i)u[w]=P;else{let T=$h(e,w);u[T.route.id]==null&&(u[T.route.id]=P)}n||(o[w]=pG),p||(p=!0,a=g0(x.error)?x.error.status:500),x.headers&&(h[w]=x.headers)}else o[w]=x.data,x.statusCode&&x.statusCode!==200&&!p&&(a=x.statusCode),x.headers&&(h[w]=x.headers)}),m!==void 0&&r&&(u={[r[0]]:m},r[2]&&(o[r[2]]=void 0)),{loaderData:o,errors:u,statusCode:a||200,loaderHeaders:h}}function BB(e,t,r,n,i,o){let{loaderData:u,errors:a}=nwe(t,r,n);return i.filter(p=>!p.matches||p.matches.some(h=>h.shouldLoad)).forEach(p=>{let{key:h,match:m,controller:v}=p;if(v&&v.signal.aborted)return;let w=o[h];if(ii(w,"Did not find corresponding fetcher result"),Cu(w)){let x=$h(e.matches,m?.route.id);a&&a[x.route.id]||(a={...a,[x.route.id]:w.error}),e.fetchers.delete(h)}else if(tp(w))ii(!1,"Unhandled fetcher revalidation redirect");else{let x=Dh(w.data);e.fetchers.set(h,x)}}),{loaderData:u,errors:a}}function jB(e,t,r,n){let i=Object.entries(t).filter(([,o])=>o!==pG).reduce((o,[u,a])=>(o[u]=a,o),{});for(let o of r){let u=o.route.id;if(!t.hasOwnProperty(u)&&e.hasOwnProperty(u)&&o.route.loader&&(i[u]=e[u]),n&&n.hasOwnProperty(u))break}return i}function zB(e){return e?Cu(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function $h(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function Qb(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function qu(e,{pathname:t,routeId:r,method:n,type:i,message:o}={}){let u="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(u="Bad Request",n&&t&&r?a=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:i==="invalid-body"&&(a="Unable to encode submission body")):e===403?(u="Forbidden",a=`Route "${r}" does not match URL "${t}"`):e===404?(u="Not Found",a=`No route matches URL "${t}"`):e===405&&(u="Method Not Allowed",n&&t&&r?a=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(a=`Invalid request method "${n.toUpperCase()}"`)),new C1(e||500,u,new Error(a),!0)}function e_(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,i]=t[r];if(tp(i))return{key:n,result:i}}}function _G(e){let t=typeof e=="string"?If(e):e;return rd({...t,hash:""})}function iwe(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function awe(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,r])=>typeof t=="string"&&owe(r))}function owe(e){return e!=null&&typeof e=="object"&&"type"in e&&"result"in e&&(e.type==="data"||e.type==="error")}function swe(e){return xG(e.result)&&z2e.has(e.result.status)}function Cu(e){return e.type==="error"}function tp(e){return(e&&e.type)==="redirect"}function $B(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function xG(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function lwe(e){return j2e.has(e.toUpperCase())}function Yl(e){return F2e.has(e.toUpperCase())}function ZM(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function L_(e,t){let r=typeof t=="string"?If(t).search:t.search;if(e[e.length-1].route.index&&ZM(r||""))return e[e.length-1];let n=fG(e);return n[n.length-1]}function qB(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:o,json:u}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:t,formAction:r,formEncType:n,formData:o,json:void 0,text:void 0};if(u!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:u,text:void 0}}}function xC(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function uwe(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Hy(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function cwe(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Dh(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function fwe(e,t){try{let r=e.sessionStorage.getItem(dG);if(r){let n=JSON.parse(r);for(let[i,o]of Object.entries(n||{}))o&&Array.isArray(o)&&t.set(i,new Set(o||[]))}}catch{}}function hwe(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(dG,JSON.stringify(r))}catch(n){xo(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function dwe(){let e,t,r=new Promise((n,i)=>{e=async o=>{n(o);try{await r}catch{}},t=async o=>{i(o);try{await r}catch{}}});return{promise:r,resolve:e,reject:t}}var ld=I.createContext(null);ld.displayName="DataRouter";var Ng=I.createContext(null);Ng.displayName="DataRouterState";I.createContext(!1);var KM=I.createContext({isTransitioning:!1});KM.displayName="ViewTransition";var wG=I.createContext(new Map);wG.displayName="Fetchers";var pwe=I.createContext(null);pwe.displayName="Await";var jc=I.createContext(null);jc.displayName="Navigation";var q0=I.createContext(null);q0.displayName="Location";var zc=I.createContext({outlet:null,matches:[],isDataRoute:!1});zc.displayName="Route";var XM=I.createContext(null);XM.displayName="RouteError";function mwe(e,{relative:t}={}){ii(ud(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=I.useContext(jc),{hash:i,pathname:o,search:u}=U0(e,{relative:t}),a=o;return r!=="/"&&(a=o==="/"?r:_f([r,o])),n.createHref({pathname:a,search:u,hash:i})}function ud(){return I.useContext(q0)!=null}function gl(){return ii(ud(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(q0).location}function gwe(e){ii(ud(),"useMatch() may be used only in the context of a <Router> component.");let{pathname:t}=gl();return I.useMemo(()=>m0(e,cG(t)),[t,e])}var SG="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function EG(e){I.useContext(jc).static||I.useLayoutEffect(e)}function cd(){let{isDataRoute:e}=I.useContext(zc);return e?Iwe():ywe()}function ywe(){ii(ud(),"useNavigate() may be used only in the context of a <Router> component.");let e=I.useContext(ld),{basename:t,navigator:r}=I.useContext(jc),{matches:n}=I.useContext(zc),{pathname:i}=gl(),o=JSON.stringify(g2(n)),u=I.useRef(!1);return EG(()=>{u.current=!0}),I.useCallback((p,h={})=>{if(xo(u.current,SG),!u.current)return;if(typeof p=="number"){r.go(p);return}let m=y2(p,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:_f([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,o,i,e])}I.createContext(null);function CG(){let{matches:e}=I.useContext(zc),t=e[e.length-1];return t?t.params:{}}function U0(e,{relative:t}={}){let{matches:r}=I.useContext(zc),{pathname:n}=gl(),i=JSON.stringify(g2(r));return I.useMemo(()=>y2(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function vwe(e,t){return AG(e,t)}function AG(e,t,r,n,i){ii(ud(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(jc),{matches:u}=I.useContext(zc),a=u[u.length-1],p=a?a.params:{},h=a?a.pathname:"/",m=a?a.pathnameBase:"/",v=a&&a.route;{let N=v&&v.path||"";IG(h,!v||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let w=gl(),x;if(t){let N=typeof t=="string"?If(t):t;ii(m==="/"||N.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${N.pathname}" was given in the \`location\` prop.`),x=N}else x=w;let P=x.pathname||"/",T=P;if(m!=="/"){let N=m.replace(/^\//,"").split("/");T="/"+P.replace(/^\//,"").split("/").slice(N.length).join("/")}let R=zh(e,{pathname:T});xo(v||R!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),xo(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=Swe(R&&R.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:_f([m,o.encodeLocation?o.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?m:_f([m,o.encodeLocation?o.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),u,r,n,i);return t&&k?I.createElement(q0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},k):k}function bwe(){let e=Awe(),t=g0(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:o},"ErrorBoundary")," or"," ",I.createElement("code",{style:o},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),r?I.createElement("pre",{style:i},r):null,u)}var _we=I.createElement(bwe,null),xwe=class extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?I.createElement(zc.Provider,{value:this.props.routeContext},I.createElement(XM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wwe({routeContext:e,match:t,children:r}){let n=I.useContext(ld);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(zc.Provider,{value:e},r)}function Swe(e,t=[],r=null,n=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,u=r?.errors;if(u!=null){let h=o.findIndex(m=>m.route.id&&u?.[m.route.id]!==void 0);ii(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let a=!1,p=-1;if(r)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(p=h),m.route.id){let{loaderData:v,errors:w}=r,x=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||x){a=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((h,m,v)=>{let w,x=!1,P=null,T=null;r&&(w=u&&m.route.id?u[m.route.id]:void 0,P=m.route.errorElement||_we,a&&(p<0&&v===0?(IG("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,T=null):p===v&&(x=!0,T=m.route.hydrateFallbackElement||null)));let R=t.concat(o.slice(0,v+1)),k=()=>{let N;return w?N=P:x?N=T:m.route.Component?N=I.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=h,I.createElement(wwe,{match:m,routeContext:{outlet:h,matches:R,isDataRoute:r!=null},children:N})};return r&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?I.createElement(xwe,{location:r.location,revalidation:r.revalidation,component:P,error:w,children:k(),routeContext:{outlet:null,matches:R,isDataRoute:!0},unstable_onError:n}):k()},null)}function YM(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PG(e){let t=I.useContext(ld);return ii(t,YM(e)),t}function TG(e){let t=I.useContext(Ng);return ii(t,YM(e)),t}function Ewe(e){let t=I.useContext(zc);return ii(t,YM(e)),t}function JM(e){let t=Ewe(e),r=t.matches[t.matches.length-1];return ii(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Cwe(){return JM("useRouteId")}function Awe(){let e=I.useContext(XM),t=TG("useRouteError"),r=JM("useRouteError");return e!==void 0?e:t.errors?.[r]}var Pwe=0;function Twe(e){let{router:t,basename:r}=PG("useBlocker"),n=TG("useBlocker"),[i,o]=I.useState(""),u=I.useCallback(a=>{if(typeof e!="function")return!!e;if(r==="/")return e(a);let{currentLocation:p,nextLocation:h,historyAction:m}=a;return e({currentLocation:{...p,pathname:ru(p.pathname,r)||p.pathname},nextLocation:{...h,pathname:ru(h.pathname,r)||h.pathname},historyAction:m})},[r,e]);return I.useEffect(()=>{let a=String(++Pwe);return o(a),()=>t.deleteBlocker(a)},[t]),I.useEffect(()=>{i!==""&&t.getBlocker(i,u)},[t,i,u]),i&&n.blockers.has(i)?n.blockers.get(i):zm}function Iwe(){let{router:e}=PG("useNavigate"),t=JM("useNavigate"),r=I.useRef(!1);return EG(()=>{r.current=!0}),I.useCallback(async(i,o={})=>{xo(r.current,SG),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var UB={};function IG(e,t,r){!t&&!UB[e]&&(UB[e]=!0,xo(!1,r))}var VB={};function GB(e,t){!e&&!VB[t]&&(VB[t]=!0,console.warn(t))}function Mwe(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&xo(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:I.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&xo(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:I.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&xo(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:I.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var Rwe=["HydrateFallback","hydrateFallbackElement"],Owe=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function kwe({router:e,flushSync:t,unstable_onError:r}){let[n,i]=I.useState(e.state),[o,u]=I.useState(),[a,p]=I.useState({isTransitioning:!1}),[h,m]=I.useState(),[v,w]=I.useState(),[x,P]=I.useState(),T=I.useRef(new Map),R=I.useCallback(U=>{i(B=>(U.errors&&r&&Object.entries(U.errors).forEach(([Z,J])=>{B.errors?.[Z]!==J&&r(J)}),U))},[r]),k=I.useCallback((U,{deletedFetchers:B,flushSync:Z,viewTransitionOpts:J})=>{U.fetchers.forEach((le,H)=>{le.data!==void 0&&T.current.set(H,le.data)}),B.forEach(le=>T.current.delete(le)),GB(Z===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let X=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(GB(J==null||X,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!J||!X){t&&Z?t(()=>R(U)):I.startTransition(()=>R(U));return}if(t&&Z){t(()=>{v&&(h&&h.resolve(),v.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:J.currentLocation,nextLocation:J.nextLocation})});let le=e.window.document.startViewTransition(()=>{t(()=>R(U))});le.finished.finally(()=>{t(()=>{m(void 0),w(void 0),u(void 0),p({isTransitioning:!1})})}),t(()=>w(le));return}v?(h&&h.resolve(),v.skipTransition(),P({state:U,currentLocation:J.currentLocation,nextLocation:J.nextLocation})):(u(U),p({isTransitioning:!0,flushSync:!1,currentLocation:J.currentLocation,nextLocation:J.nextLocation}))},[e.window,t,v,h,R]);I.useLayoutEffect(()=>e.subscribe(k),[e,k]),I.useEffect(()=>{a.isTransitioning&&!a.flushSync&&m(new Owe)},[a]),I.useEffect(()=>{if(h&&o&&e.window){let U=o,B=h.promise,Z=e.window.document.startViewTransition(async()=>{I.startTransition(()=>R(U)),await B});Z.finished.finally(()=>{m(void 0),w(void 0),u(void 0),p({isTransitioning:!1})}),w(Z)}},[o,h,e.window,R]),I.useEffect(()=>{h&&o&&n.location.key===o.location.key&&h.resolve()},[h,v,n.location,o]),I.useEffect(()=>{!a.isTransitioning&&x&&(u(x.state),p({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),P(void 0))},[a.isTransitioning,x]);let N=I.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:U=>e.navigate(U),push:(U,B,Z)=>e.navigate(U,{state:B,preventScrollReset:Z?.preventScrollReset}),replace:(U,B,Z)=>e.navigate(U,{replace:!0,state:B,preventScrollReset:Z?.preventScrollReset})}),[e]),F=e.basename||"/",D=I.useMemo(()=>({router:e,navigator:N,static:!1,basename:F,unstable_onError:r}),[e,N,F,r]);return I.createElement(I.Fragment,null,I.createElement(ld.Provider,{value:D},I.createElement(Ng.Provider,{value:n},I.createElement(wG.Provider,{value:T.current},I.createElement(KM.Provider,{value:a},I.createElement(Fwe,{basename:F,location:n.location,navigationType:n.historyAction,navigator:N},I.createElement(Lwe,{routes:e.routes,future:e.future,state:n,unstable_onError:r})))))),null)}var Lwe=I.memo(Dwe);function Dwe({routes:e,future:t,state:r,unstable_onError:n}){return AG(e,void 0,r,n,t)}function Nwe({to:e,replace:t,state:r,relative:n}){ii(ud(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=I.useContext(jc);xo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=I.useContext(zc),{pathname:u}=gl(),a=cd(),p=y2(e,g2(o),u,n==="path"),h=JSON.stringify(p);return I.useEffect(()=>{a(JSON.parse(h),{replace:t,state:r,relative:n})},[a,h,n,t,r]),null}function Eu(e){ii(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Fwe({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:o=!1}){ii(!ud(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),a=I.useMemo(()=>({basename:u,navigator:i,static:o,future:{}}),[u,i,o]);typeof r=="string"&&(r=If(r));let{pathname:p="/",search:h="",hash:m="",state:v=null,key:w="default"}=r,x=I.useMemo(()=>{let P=ru(p,u);return P==null?null:{location:{pathname:P,search:h,hash:m,state:v,key:w},navigationType:n}},[u,p,h,m,v,w,n]);return xo(x!=null,`<Router basename="${u}"> is not able to match the URL "${p}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:I.createElement(jc.Provider,{value:a},I.createElement(q0.Provider,{children:t,value:x}))}function mv({children:e,location:t}){return vwe(FT(e),t)}function FT(e,t=[]){let r=[];return I.Children.forEach(e,(n,i)=>{if(!I.isValidElement(n))return;let o=[...t,i];if(n.type===I.Fragment){r.push.apply(r,FT(n.props.children,o));return}ii(n.type===Eu,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ii(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=FT(n.props.children,o)),r.push(u)}),r}var D_="get",N_="application/x-www-form-urlencoded";function v2(e){return e!=null&&typeof e.tagName=="string"}function Bwe(e){return v2(e)&&e.tagName.toLowerCase()==="button"}function jwe(e){return v2(e)&&e.tagName.toLowerCase()==="form"}function zwe(e){return v2(e)&&e.tagName.toLowerCase()==="input"}function $we(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qwe(e,t){return e.button===0&&(!t||t==="_self")&&!$we(e)}var t_=null;function Uwe(){if(t_===null)try{new FormData(document.createElement("form"),0),t_=!1}catch{t_=!0}return t_}var Vwe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wC(e){return e!=null&&!Vwe.has(e)?(xo(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${N_}"`),null):e}function Gwe(e,t){let r,n,i,o,u;if(jwe(e)){let a=e.getAttribute("action");n=a?ru(a,t):null,r=e.getAttribute("method")||D_,i=wC(e.getAttribute("enctype"))||N_,o=new FormData(e)}else if(Bwe(e)||zwe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||a.getAttribute("action");if(n=p?ru(p,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||D_,i=wC(e.getAttribute("formenctype"))||wC(a.getAttribute("enctype"))||N_,o=new FormData(a,e),!Uwe()){let{name:h,type:m,value:v}=e;if(m==="image"){let w=h?`${h}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else h&&o.append(h,v)}}else{if(v2(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=D_,n=null,i=N_,u=e}return o&&i==="text/plain"&&(u=o,o=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function QM(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Hwe(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&ru(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function Wwe(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zwe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Kwe(e,t,r){let n=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let u=await Wwe(o,r);return u.links?u.links():[]}return[]}));return Qwe(n.flat(1).filter(Zwe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function HB(e,t,r,n,i,o){let u=(p,h)=>r[h]?p.route.id!==r[h].route.id:!0,a=(p,h)=>r[h].pathname!==p.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==p.params["*"];return o==="assets"?t.filter((p,h)=>u(p,h)||a(p,h)):o==="data"?t.filter((p,h)=>{let m=n.routes[p.route.id];if(!m||!m.hasLoader)return!1;if(u(p,h)||a(p,h))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Xwe(e,t,{includeHydrateFallback:r}={}){return Ywe(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function Ywe(e){return[...new Set(e)]}function Jwe(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Qwe(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let o=JSON.stringify(Jwe(i));return r.has(o)||(r.add(o),n.push({key:o,link:i})),n},[])}function MG(){let e=I.useContext(ld);return QM(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function e5e(){let e=I.useContext(Ng);return QM(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var eR=I.createContext(void 0);eR.displayName="FrameworkContext";function RG(){let e=I.useContext(eR);return QM(e,"You must render this element inside a <HydratedRouter> element"),e}function t5e(e,t){let r=I.useContext(eR),[n,i]=I.useState(!1),[o,u]=I.useState(!1),{onFocus:a,onBlur:p,onMouseEnter:h,onMouseLeave:m,onTouchStart:v}=t,w=I.useRef(null);I.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let T=k=>{k.forEach(N=>{u(N.isIntersecting)})},R=new IntersectionObserver(T,{threshold:.5});return w.current&&R.observe(w.current),()=>{R.disconnect()}}},[e]),I.useEffect(()=>{if(n){let T=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(T)}}},[n]);let x=()=>{i(!0)},P=()=>{i(!1),u(!1)};return r?e!=="intent"?[o,w,{}]:[o,w,{onFocus:Wy(a,x),onBlur:Wy(p,P),onMouseEnter:Wy(h,x),onMouseLeave:Wy(m,P),onTouchStart:Wy(v,x)}]:[!1,w,{}]}function Wy(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function r5e({page:e,...t}){let{router:r}=MG(),n=I.useMemo(()=>zh(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?I.createElement(i5e,{page:e,matches:n,...t}):null}function n5e(e){let{manifest:t,routeModules:r}=RG(),[n,i]=I.useState([]);return I.useEffect(()=>{let o=!1;return Kwe(e,t,r).then(u=>{o||i(u)}),()=>{o=!0}},[e,t,r]),n}function i5e({page:e,matches:t,...r}){let n=gl(),{manifest:i,routeModules:o}=RG(),{basename:u}=MG(),{loaderData:a,matches:p}=e5e(),h=I.useMemo(()=>HB(e,t,p,i,n,"data"),[e,t,p,i,n]),m=I.useMemo(()=>HB(e,t,p,i,n,"assets"),[e,t,p,i,n]),v=I.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let P=new Set,T=!1;if(t.forEach(k=>{let N=i.routes[k.route.id];!N||!N.hasLoader||(!h.some(F=>F.route.id===k.route.id)&&k.route.id in a&&o[k.route.id]?.shouldRevalidate||N.hasClientLoader?T=!0:P.add(k.route.id))}),P.size===0)return[];let R=Hwe(e,u,"data");return T&&P.size>0&&R.searchParams.set("_routes",t.filter(k=>P.has(k.route.id)).map(k=>k.route.id).join(",")),[R.pathname+R.search]},[u,a,n,i,h,t,e,o]),w=I.useMemo(()=>Xwe(m,i),[m,i]),x=n5e(m);return I.createElement(I.Fragment,null,v.map(P=>I.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...r})),w.map(P=>I.createElement("link",{key:P,rel:"modulepreload",href:P,...r})),x.map(({key:P,link:T})=>I.createElement("link",{key:P,nonce:r.nonce,...T})))}function a5e(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var OG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{OG&&(window.__reactRouterVersion="7.8.2")}catch{}function o5e(e,t){return G2e({basename:t?.basename,unstable_getContext:t?.unstable_getContext,future:t?.future,history:f2e({window:t?.window}),hydrationData:t?.hydrationData||s5e(),routes:e,mapRouteProperties:Mwe,hydrationRouteProperties:Rwe,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}function s5e(){let e=window?.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:l5e(e.errors)}),e}function l5e(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new C1(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let u=new o(i.message);u.stack="",r[n]=u}catch{}}if(r[n]==null){let o=new Error(i.message);o.stack="",r[n]=o}}else r[n]=i;return r}var kG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fg=I.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:o,replace:u,state:a,target:p,to:h,preventScrollReset:m,viewTransition:v,...w},x){let{basename:P}=I.useContext(jc),T=typeof h=="string"&&kG.test(h),R,k=!1;if(typeof h=="string"&&T&&(R=h,OG))try{let X=new URL(window.location.href),le=h.startsWith("//")?new URL(X.protocol+h):new URL(h),H=ru(le.pathname,P);le.origin===X.origin&&H!=null?h=H+le.search+le.hash:k=!0}catch{xo(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=mwe(h,{relative:i}),[F,D,U]=t5e(n,w),B=h5e(h,{replace:u,state:a,target:p,preventScrollReset:m,relative:i,viewTransition:v});function Z(X){t&&t(X),X.defaultPrevented||B(X)}let J=I.createElement("a",{...w,...U,href:R||N,onClick:k||o?t:Z,ref:a5e(x,D),target:p,"data-discover":!T&&r==="render"?"true":void 0});return F&&!T?I.createElement(I.Fragment,null,J,I.createElement(r5e,{page:N})):J});Fg.displayName="Link";var u5e=I.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:o,to:u,viewTransition:a,children:p,...h},m){let v=U0(u,{relative:h.relative}),w=gl(),x=I.useContext(Ng),{navigator:P,basename:T}=I.useContext(jc),R=x!=null&&y5e(v)&&a===!0,k=P.encodeLocation?P.encodeLocation(v).pathname:v.pathname,N=w.pathname,F=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(N=N.toLowerCase(),F=F?F.toLowerCase():null,k=k.toLowerCase()),F&&T&&(F=ru(F,T)||F);const D=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let U=N===k||!i&&N.startsWith(k)&&N.charAt(D)==="/",B=F!=null&&(F===k||!i&&F.startsWith(k)&&F.charAt(k.length)==="/"),Z={isActive:U,isPending:B,isTransitioning:R},J=U?t:void 0,X;typeof n=="function"?X=n(Z):X=[n,U?"active":null,B?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let le=typeof o=="function"?o(Z):o;return I.createElement(Fg,{...h,"aria-current":J,className:X,ref:m,style:le,to:u,viewTransition:a},typeof p=="function"?p(Z):p)});u5e.displayName="NavLink";var c5e=I.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:o,method:u=D_,action:a,onSubmit:p,relative:h,preventScrollReset:m,viewTransition:v,...w},x)=>{let P=m5e(),T=g5e(a,{relative:h}),R=u.toLowerCase()==="get"?"get":"post",k=typeof a=="string"&&kG.test(a),N=F=>{if(p&&p(F),F.defaultPrevented)return;F.preventDefault();let D=F.nativeEvent.submitter,U=D?.getAttribute("formmethod")||u;P(D||F.currentTarget,{fetcherKey:t,method:U,navigate:r,replace:i,state:o,relative:h,preventScrollReset:m,viewTransition:v})};return I.createElement("form",{ref:x,method:R,action:T,onSubmit:n?p:N,...w,"data-discover":!k&&e==="render"?"true":void 0})});c5e.displayName="Form";function f5e(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LG(e){let t=I.useContext(ld);return ii(t,f5e(e)),t}function h5e(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:o,viewTransition:u}={}){let a=cd(),p=gl(),h=U0(e,{relative:o});return I.useCallback(m=>{if(qwe(m,t)){m.preventDefault();let v=r!==void 0?r:rd(p)===rd(h);a(e,{replace:v,state:n,preventScrollReset:i,relative:o,viewTransition:u})}},[p,a,h,r,n,t,e,i,o,u])}var d5e=0,p5e=()=>`__${String(++d5e)}__`;function m5e(){let{router:e}=LG("useSubmit"),{basename:t}=I.useContext(jc),r=Cwe();return I.useCallback(async(n,i={})=>{let{action:o,method:u,encType:a,formData:p,body:h}=Gwe(n,t);if(i.navigate===!1){let m=i.fetcherKey||p5e();await e.fetch(m,r,i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:h,formMethod:i.method||u,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:h,formMethod:i.method||u,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function g5e(e,{relative:t}={}){let{basename:r}=I.useContext(jc),n=I.useContext(zc);ii(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),o={...U0(e||".",{relative:t})},u=gl();if(e==null){o.search=u.search;let a=new URLSearchParams(o.search),p=a.getAll("index");if(p.some(m=>m==="")){a.delete("index"),p.filter(v=>v).forEach(v=>a.append("index",v));let m=a.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:_f([r,o.pathname])),rd(o)}function y5e(e,{relative:t}={}){let r=I.useContext(KM);ii(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=LG("useViewTransitionState"),i=U0(e,{relative:t});if(!r.isTransitioning)return!1;let o=ru(r.currentLocation.pathname,n)||r.currentLocation.pathname,u=ru(r.nextLocation.pathname,n)||r.nextLocation.pathname;return m0(i.pathname,u)!=null||m0(i.pathname,o)!=null}function v5e(e){return I.createElement(kwe,{flushSync:Rx.flushSync,...e})}var b5e="RaStore",_5e=function(){if(typeof window>"u"||window.localStorage==null)return!1;try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch{return!1}},BT=_5e(),x5e=function(e,t){e===void 0&&(e="1"),t===void 0&&(t="");var r="".concat(b5e).concat(t),n=r.length,i={},o=function(a,p){Object.keys(i).forEach(function(h){i[h]&&i[h].key===a&&i[h].callback(p)})},u=function(a){var p;if(((p=a.key)===null||p===void 0?void 0:p.substring(0,n))===r){var h=a.key.substring(n+1),m=a.newValue?WB(a.newValue):void 0;Object.keys(i).forEach(function(v){i[v]&&i[v].key===h&&(m===null?i[v].callback(void 0):i[v].callback(m??void 0))})}};return{setup:function(){if(BT){var a=Xf().getItem("".concat(r,".version"));if(a&&a!==e){var p=Xf();Object.keys(p).forEach(function(h){h.startsWith(r)&&p.removeItem(h)})}Xf().setItem("".concat(r,".version"),e),window.addEventListener("storage",u)}},teardown:function(){BT&&window.removeEventListener("storage",u)},getItem:function(a,p){var h=Xf().getItem("".concat(r,".").concat(a));return h==null?p:WB(h)},setItem:function(a,p){p===void 0?Xf().removeItem("".concat(r,".").concat(a)):Xf().setItem("".concat(r,".").concat(a),JSON.stringify(p)),o(a,p)},removeItem:function(a){Xf().removeItem("".concat(r,".").concat(a)),o(a,void 0)},removeItems:function(a){var p=Xf();Object.keys(p).forEach(function(h){if(h.startsWith("".concat(r,".").concat(a))){p.removeItem(h);var m=h.substring(n+1);o(m,void 0)}})},reset:function(){var a=Xf();Object.keys(a).forEach(function(p){if(p.startsWith(r)){a.removeItem(p);var h=p.substring(n+1);o(h,void 0)}})},subscribe:function(a,p){var h=Math.random().toString();return i[h]={key:a,callback:p},function(){delete i[h]}}}},WB=function(e){try{return JSON.parse(e)}catch{return e}},w5e=(function(){function e(){this.valuesMap=new Map}return e.prototype.getItem=function(t){return this.valuesMap.has(t)?String(this.valuesMap.get(t)):null},e.prototype.setItem=function(t,r){this.valuesMap.set(t,r)},e.prototype.removeItem=function(t){this.valuesMap.delete(t)},e.prototype.removeItems=function(t){var r=this;this.valuesMap.forEach(function(n,i){i.startsWith(t)&&r.valuesMap.delete(i)})},e.prototype.clear=function(){this.valuesMap.clear()},e.prototype.key=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.");var r=Array.from(this.valuesMap.keys());return r[t]},Object.defineProperty(e.prototype,"length",{get:function(){return this.valuesMap.size},enumerable:!1,configurable:!0}),e})(),S5e=new w5e,Xf=function(){return BT?window.localStorage:S5e},SC,ZB;function DG(){if(ZB)return SC;ZB=1;var e=eM(),t=L0(),r=Ag(),n=Af(),i=Ig();function o(u,a,p,h){if(!n(u))return u;a=t(a,u);for(var m=-1,v=a.length,w=v-1,x=u;x!=null&&++m<v;){var P=i(a[m]),T=p;if(P==="__proto__"||P==="constructor"||P==="prototype")return u;if(m!=w){var R=x[P];T=h?h(R,P,x):void 0,T===void 0&&(T=n(R)?R:r(a[m+1])?[]:{})}e(x,P,T),x=x[P]}return u}return SC=o,SC}var EC,KB;function E5e(){if(KB)return EC;KB=1;var e=DG();function t(r,n,i){return r==null?r:e(r,n,i)}return EC=t,EC}var C5e=E5e();const A5e=qs(C5e);var CC,XB;function P5e(){if(XB)return CC;XB=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return CC=e,CC}var AC,YB;function T5e(){if(YB)return AC;YB=1;function e(t,r,n){var i=-1,o=t.length;r<0&&(r=-r>o?0:o+r),n=n>o?o:n,n<0&&(n+=o),o=r>n?0:n-r>>>0,r>>>=0;for(var u=Array(o);++i<o;)u[i]=t[i+r];return u}return AC=e,AC}var PC,JB;function I5e(){if(JB)return PC;JB=1;var e=Jx(),t=T5e();function r(n,i){return i.length<2?n:e(n,t(i,0,-1))}return PC=r,PC}var TC,QB;function NG(){if(QB)return TC;QB=1;var e=L0(),t=P5e(),r=I5e(),n=Ig();function i(o,u){return u=e(u,o),o=r(o,u),o==null||delete o[n(t(u))]}return TC=i,TC}var IC,ej;function M5e(){if(ej)return IC;ej=1;var e=NG();function t(r,n){return r==null?!0:e(r,n)}return IC=t,IC}var R5e=M5e();const MC=qs(R5e);var O5e=JI();const Pc=qs(O5e);var FG=function(e){e===void 0&&(e={});var t={},r=function(n,i){Object.keys(t).forEach(function(o){t[o]&&t[o].key===n&&t[o].callback(i)})};return{setup:function(){},teardown:function(){Object.keys(e).forEach(function(n){return delete e[n]})},getItem:function(n,i){return Pc(e,n,i)},setItem:function(n,i){A5e(e,n,i),r(n,i)},removeItem:function(n){MC(e,n),r(n,void 0)},removeItems:function(n){var i=tj(e);Object.keys(i).forEach(function(o){o.startsWith(n)&&(MC(e,o),r(o,void 0))})},reset:function(){var n=tj(e);Object.keys(n).forEach(function(i){MC(e,i),r(i,void 0)})},subscribe:function(n,i){var o=Math.random().toString();return t[o]={key:n,callback:i},function(){delete t[o]}}}},tj=function(e){var t={};function r(n,i){if(Object(n)!==n)t[i]=n;else if(Array.isArray(n))t[i]=n;else{var o=!0;for(var u in n)o=!1,r(n[u],i?i+"."+u:u);o&&i&&(t[i]={})}}return r(e,""),t},k5e=FG(),BG=I.createContext(k5e),L5e=function(e){var t=e.value,r=e.children;return I.useEffect(function(){return t.setup(),function(){t.teardown()}},[t]),I.createElement(BG.Provider,{value:t},r)},b2=function(){return I.useContext(BG)},RC,rj;function D5e(){if(rj)return RC;rj=1;var e=XI();function t(r,n){return e(r,n)}return RC=t,RC}var N5e=D5e();const tR=qs(N5e);var nj=function(e,t){return e&&t?String.prototype.replace.call(e,F5e,function(r,n){return!t.hasOwnProperty(n)||t[n]==null?r:t[n]}):e},F5e=/%\{(.*?)\}/g,B5e={translate:function(e,t){return t?._?nj(t._,t):nj(e,t)},changeLocale:function(){return Promise.resolve()},getLocale:function(){return"en"}},rR=I.createContext(B5e);rR.displayName="I18nContext";var jG=I.createContext(function(){}),j5e=I.createContext(null),zG=I.createContext({notifications:[],addNotification:function(){},takeNotification:function(){},resetNotifications:function(){},setNotifications:function(){}}),ij=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},z5e=function(e){var t=e.children,r=I.useState([]),n=r[0],i=r[1],o=I.useCallback(function(h){i(function(m){return ij(ij([],m,!0),[h],!1)})},[]),u=I.useCallback(function(){if(n.length!==0){var h=n[0],m=n.slice(1);return i(m),h}},[n]),a=I.useCallback(function(){i([])},[]),p=I.useMemo(function(){return{notifications:n,addNotification:o,takeNotification:u,resetNotifications:a,setNotifications:i}},[n]);return I.createElement(zG.Provider,{value:p},I.createElement(jG.Provider,{value:o},t))},$5e=function(){return I.useContext(jG)},$G=function(){return I.useContext(zG)},q5e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Mf=function(){var e=$5e();return I.useCallback(function(t,r){r===void 0&&(r={});var n=r.type,i=n===void 0?"info":n,o=q5e(r,["type"]);e({message:t,type:i,notificationOptions:o})},[e])},U5e=function(e){var t=e.value,r=t===void 0?V5e:t,n=e.children,i=Op("locale")[0],o=Mf(),u=I.useState(0),a=u[0],p=u[1],h=I.useState(i===r.getLocale()),m=h[0],v=h[1];return I.useEffect(function(){i&&r.getLocale()!==i?new Promise(function(w){w(r.changeLocale(i))}).then(function(){p(function(w){return w+1}),v(!0)}).catch(function(w){v(!0),o("ra.notification.i18n_error",{type:"error"}),console.error(w)}):v(!0)},[r,i,o]),m?I.createElement(rR.Provider,{value:r,key:a},n):null},V5e={translate:function(e){return e},changeLocale:function(){return Promise.resolve()},getLocale:function(){return"en"}},nR=function(){return I.useContext(rR)},Di=function(){var e=nR(),t=I.useCallback(function(r,n){return e.translate(r,n)},[e]);return e?t:G5e},G5e=function(e){return e},OC,aj;function qG(){if(aj)return OC;aj=1;var e=QI(),t=Tg();function r(n,i,o){(o!==void 0&&!t(n[i],o)||o===void 0&&!(i in n))&&e(n,i,o)}return OC=r,OC}var kC,oj;function H5e(){if(oj)return kC;oj=1;var e=Pg(),t=Cf();function r(n){return t(n)&&e(n)}return kC=r,kC}var LC,sj;function UG(){if(sj)return LC;sj=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return LC=e,LC}var DC,lj;function W5e(){if(lj)return DC;lj=1;var e=D0(),t=Mg();function r(n){return e(n,t(n))}return DC=r,DC}var NC,uj;function Z5e(){if(uj)return NC;uj=1;var e=qG(),t=yU(),r=_U(),n=vU(),i=xU(),o=qx(),u=Nu(),a=H5e(),p=Ux(),h=qI(),m=Af(),v=aU(),w=zI(),x=UG(),P=W5e();function T(R,k,N,F,D,U,B){var Z=x(R,N),J=x(k,N),X=B.get(J);if(X){e(R,N,X);return}var le=U?U(Z,J,N+"",R,k,B):void 0,H=le===void 0;if(H){var G=u(J),ae=!G&&p(J),se=!G&&!ae&&w(J);le=J,G||ae||se?u(Z)?le=Z:a(Z)?le=n(Z):ae?(H=!1,le=t(J,!0)):se?(H=!1,le=r(J,!0)):le=[]:v(J)||o(J)?(le=Z,o(Z)?le=P(Z):(!m(Z)||h(Z))&&(le=i(J))):H=!1}H&&(B.set(J,le),D(le,J,F,U,B),B.delete(J)),e(R,N,le)}return NC=T,NC}var FC,cj;function K5e(){if(cj)return FC;cj=1;var e=Kx(),t=qG(),r=tU(),n=Z5e(),i=Af(),o=Mg(),u=UG();function a(p,h,m,v,w){p!==h&&r(h,function(x,P){if(w||(w=new e),i(x))n(p,h,P,m,a,v,w);else{var T=v?v(u(p,P),x,P+"",p,h,w):void 0;T===void 0&&(T=x),t(p,P,T)}},o)}return FC=a,FC}var BC,fj;function X5e(){if(fj)return BC;fj=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return BC=e,BC}var jC,hj;function VG(){if(hj)return jC;hj=1;var e=X5e(),t=Math.max;function r(n,i,o){return i=t(i===void 0?n.length-1:i,0),function(){for(var u=arguments,a=-1,p=t(u.length-i,0),h=Array(p);++a<p;)h[a]=u[i+a];a=-1;for(var m=Array(i+1);++a<i;)m[a]=u[a];return m[i]=o(h),e(n,this,m)}}return jC=r,jC}var zC,dj;function Y5e(){if(dj)return zC;dj=1;function e(t){return function(){return t}}return zC=e,zC}var $C,pj;function J5e(){if(pj)return $C;pj=1;var e=Y5e(),t=gU(),r=Vx(),n=t?function(i,o){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(o),writable:!0})}:r;return $C=n,$C}var qC,mj;function Q5e(){if(mj)return qC;mj=1;var e=800,t=16,r=Date.now;function n(i){var o=0,u=0;return function(){var a=r(),p=t-(a-u);if(u=a,p>0){if(++o>=e)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return qC=n,qC}var UC,gj;function GG(){if(gj)return UC;gj=1;var e=J5e(),t=Q5e(),r=t(e);return UC=r,UC}var VC,yj;function HG(){if(yj)return VC;yj=1;var e=Vx(),t=VG(),r=GG();function n(i,o){return r(t(i,o,e),i+"")}return VC=n,VC}var GC,vj;function WG(){if(vj)return GC;vj=1;var e=Tg(),t=Pg(),r=Ag(),n=Af();function i(o,u,a){if(!n(a))return!1;var p=typeof u;return(p=="number"?t(a)&&r(u,a.length):p=="string"&&u in a)?e(a[u],o):!1}return GC=i,GC}var HC,bj;function eSe(){if(bj)return HC;bj=1;var e=HG(),t=WG();function r(n){return e(function(i,o){var u=-1,a=o.length,p=a>1?o[a-1]:void 0,h=a>2?o[2]:void 0;for(p=n.length>3&&typeof p=="function"?(a--,p):void 0,h&&t(o[0],o[1],h)&&(p=a<3?void 0:p,a=1),i=Object(i);++u<a;){var m=o[u];m&&n(i,m,u,p)}return i})}return HC=r,HC}var WC,_j;function tSe(){if(_j)return WC;_j=1;var e=K5e(),t=eSe(),r=t(function(n,i,o){e(n,i,o)});return WC=r,WC}var rSe=tSe();const ZG=qs(rSe);var KG=function(){var e=nR(),t=I.useMemo(function(){return e.getLocale()},[e]);return Op("locale",t)},nSe=function(){var e=KG()[0];return e},XG=function(e){var t,r=nR(),n=I.useMemo(function(){return r?.getLocales?r?.getLocales():[]},[r]);return(t=e?.locales)!==null&&t!==void 0?t:n},Av=function(){return Av=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Av.apply(this,arguments)},lp=function(e){var t=e.resourceI18nKey,r=e.baseI18nKey,n=e.userText,i=e.options,o=Di();return n!==void 0?typeof n!="string"?n:o(n,Av({_:n},i)):t?o(t,Av(Av({},i),{_:o(r,i)})):o(r,i)},YG=I.createContext(""),iSe=function(e){var t=e.children,r=e.basename;return I.createElement(YG.Provider,{value:r},t)},aSe=function(e){var t=e.basename,r=t===void 0?"":t,n=e.children,i=ud(),o=i?oSe:lSe;return I.createElement(iSe,{basename:i?r:""},I.createElement(o,{basename:r},n))},oSe=function(e){var t=e.children;return I.createElement(I.Fragment,null,t)},sSe={v7_startTransition:!1,v7_relativeSplatPath:!1},lSe=function(e){var t=e.children,r=e.basename,n=o5e([{path:"*",element:I.createElement(I.Fragment,null,t)}],{basename:r,future:{v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1}});return I.createElement(v5e,{router:n,future:sSe})},yh=function(){return I.useContext(YG)},V0=function(){var e=yh();return I.useCallback(function(t){var r=t.resource,n=t.id,i=t.type;if(["list","create","edit","show"].includes(i)&&!r)throw new Error("Cannot create a link without a resource. You must provide the resource name.");switch(i){case"list":return cf("".concat(e,"/").concat(r));case"create":return cf("".concat(e,"/").concat(r,"/create"));case"edit":return n==null?cf("".concat(e,"/").concat(r)):cf("".concat(e,"/").concat(r,"/").concat(encodeURIComponent(n)));case"show":return n==null?cf("".concat(e,"/").concat(r)):cf("".concat(e,"/").concat(r,"/").concat(encodeURIComponent(n),"/show"));default:return i}},[e])},cf=function(e){return e.replace("//","/")},JG=I.createContext(void 0),su=function(e){var t=I.useContext(JG);return e&&e.resource||t},iR=I.createContext(void 0);iR.displayName="RecordContext";var aR=function(e){var t=e.children,r=e.value;return I.createElement(iR.Provider,{value:r},t)},yl=function(e){var t=I.useContext(iR);return e&&e.record||t},P1=function(){return P1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},P1.apply(this,arguments)},uSe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},QG=I.createContext({definitions:{},register:function(){},unregister:function(){}}),cSe=function(e){var t=e.definitions,r=t===void 0?{}:t,n=e.children,i=I.useState(r),o=i[0],u=i[1],a=I.useCallback(function(m){u(function(v){var w;return tR(v[m.name],m)?v:P1(P1({},v),(w={},w[m.name]=m,w))})},[]),p=I.useCallback(function(m){u(function(v){var w=v,x=m.name;w[x];var P=uSe(w,[typeof x=="symbol"?x:x+""]);return P})},[]),h=I.useMemo(function(){return{definitions:o,register:a,unregister:p}},[o]);return I.createElement(QG.Provider,{value:h},n)},eH=function(){return I.useContext(QG)},G0=function(){return eH().definitions},Pv=function(){return Pv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Pv.apply(this,arguments)},H0=function(){var e=cd(),t=yh(),r=V0();return I.useCallback(function(n,i,o,u,a){var p;if(i===void 0&&(i=""),a===void 0&&(a={}),n)if(typeof n=="function"){var h=n(i,o,u),m=typeof h=="string"?"".concat(t).concat(h.startsWith("/")?"":"/").concat(h):Pv({pathname:"".concat(t).concat(!((p=h.pathname)===null||p===void 0)&&p.startsWith("/")?"":"/").concat(h.pathname)},h);e(m,{state:Pv({_scrollToTop:!0},a)});return}else if(typeof n=="string"&&n.startsWith("http")&&window){window.location.href=n;return}else{e(r({resource:i,id:o,type:n}),{state:n==="list"?a:Pv({_scrollToTop:!0},a)});return}else return},[e,t,r])},tH=function(e){var t=gl().pathname,r=I.useRef(t);I.useEffect(function(){t!==r.current&&e()},[t,e])},fSe=function(){var e=gl();I.useEffect(function(){var t;!((t=e.state)===null||t===void 0)&&t._scrollToTop&&typeof window<"u"&&typeof window.scrollTo=="function"&&window.scrollTo(0,0)},[e])},T1=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},hSe="GET_LIST",dSe="GET_ONE",pSe="GET_MANY",mSe="GET_MANY_REFERENCE",gSe="CREATE",ySe="UPDATE",vSe="UPDATE_MANY",bSe="DELETE",_Se="DELETE_MANY",xSe=["getOne","create","update"],wSe=["getList","getMany","getManyReference"],SSe=T1(T1([],wSe,!0),["updateMany","deleteMany"],!1);T1(T1([],xSe,!0),SSe,!0);var oR={create:function(){return Promise.resolve({data:null})},delete:function(){return Promise.resolve({data:null})},deleteMany:function(){return Promise.resolve({data:[]})},getList:function(){return Promise.resolve({data:[],total:0})},getMany:function(){return Promise.resolve({data:[]})},getManyReference:function(){return Promise.resolve({data:[],total:0})},getOne:function(){return Promise.resolve({data:null})},update:function(){return Promise.resolve({data:null})},updateMany:function(){return Promise.resolve({data:[]})}},xj={create:gSe,delete:bSe,deleteMany:_Se,getList:hSe,getMany:pSe,getManyReference:mSe,getOne:dSe,update:ySe,updateMany:vSe},ESe=function(e){var t=new Proxy(oR,{get:function(r,n){return function(i,o){if(Object.keys(xj).includes(n.toString())){var u=xj[n.toString()];return e(u,i,o)}return e(n.toString(),i,o)}},apply:function(r,n,i){return e.apply(e,i)}});return t},sR=I.createContext(null);sR.displayName="DataProviderContext";var ZC={},KC,wj;function CSe(){return wj||(wj=1,KC=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)),KC}var XC,Sj;function ASe(){if(Sj)return XC;Sj=1;var e="%[a-f0-9]{2}",t=new RegExp("("+e+")|([^%]+?)","gi"),r=new RegExp("("+e+")+","gi");function n(u,a){try{return[decodeURIComponent(u.join(""))]}catch{}if(u.length===1)return u;a=a||1;var p=u.slice(0,a),h=u.slice(a);return Array.prototype.concat.call([],n(p),n(h))}function i(u){try{return decodeURIComponent(u)}catch{for(var a=u.match(t)||[],p=1;p<a.length;p++)u=n(a,p).join(""),a=u.match(t)||[];return u}}function o(u){for(var a={"%FE%FF":"��","%FF%FE":"��"},p=r.exec(u);p;){try{a[p[0]]=decodeURIComponent(p[0])}catch{var h=i(p[0]);h!==p[0]&&(a[p[0]]=h)}p=r.exec(u)}a["%C2"]="�";for(var m=Object.keys(a),v=0;v<m.length;v++){var w=m[v];u=u.replace(new RegExp(w,"g"),a[w])}return u}return XC=function(u){if(typeof u!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof u+"`");try{return u=u.replace(/\+/g," "),decodeURIComponent(u)}catch{return o(u)}},XC}var YC,Ej;function PSe(){return Ej||(Ej=1,YC=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}),YC}var JC,Cj;function TSe(){return Cj||(Cj=1,JC=function(e,t){for(var r={},n=Object.keys(e),i=Array.isArray(t),o=0;o<n.length;o++){var u=n[o],a=e[u];(i?t.indexOf(u)!==-1:t(u,a,e))&&(r[u]=a)}return r}),JC}var Aj;function ISe(){return Aj||(Aj=1,(function(e){const t=CSe(),r=ASe(),n=PSe(),i=TSe(),o=N=>N==null,u=Symbol("encodeFragmentIdentifier");function a(N){switch(N.arrayFormat){case"index":return F=>(D,U)=>{const B=D.length;return U===void 0||N.skipNull&&U===null||N.skipEmptyString&&U===""?D:U===null?[...D,[m(F,N),"[",B,"]"].join("")]:[...D,[m(F,N),"[",m(B,N),"]=",m(U,N)].join("")]};case"bracket":return F=>(D,U)=>U===void 0||N.skipNull&&U===null||N.skipEmptyString&&U===""?D:U===null?[...D,[m(F,N),"[]"].join("")]:[...D,[m(F,N),"[]=",m(U,N)].join("")];case"colon-list-separator":return F=>(D,U)=>U===void 0||N.skipNull&&U===null||N.skipEmptyString&&U===""?D:U===null?[...D,[m(F,N),":list="].join("")]:[...D,[m(F,N),":list=",m(U,N)].join("")];case"comma":case"separator":case"bracket-separator":{const F=N.arrayFormat==="bracket-separator"?"[]=":"=";return D=>(U,B)=>B===void 0||N.skipNull&&B===null||N.skipEmptyString&&B===""?U:(B=B===null?"":B,U.length===0?[[m(D,N),F,m(B,N)].join("")]:[[U,m(B,N)].join(N.arrayFormatSeparator)])}default:return F=>(D,U)=>U===void 0||N.skipNull&&U===null||N.skipEmptyString&&U===""?D:U===null?[...D,m(F,N)]:[...D,[m(F,N),"=",m(U,N)].join("")]}}function p(N){let F;switch(N.arrayFormat){case"index":return(D,U,B)=>{if(F=/\[(\d*)\]$/.exec(D),D=D.replace(/\[\d*\]$/,""),!F){B[D]=U;return}B[D]===void 0&&(B[D]={}),B[D][F[1]]=U};case"bracket":return(D,U,B)=>{if(F=/(\[\])$/.exec(D),D=D.replace(/\[\]$/,""),!F){B[D]=U;return}if(B[D]===void 0){B[D]=[U];return}B[D]=[].concat(B[D],U)};case"colon-list-separator":return(D,U,B)=>{if(F=/(:list)$/.exec(D),D=D.replace(/:list$/,""),!F){B[D]=U;return}if(B[D]===void 0){B[D]=[U];return}B[D]=[].concat(B[D],U)};case"comma":case"separator":return(D,U,B)=>{const Z=typeof U=="string"&&U.includes(N.arrayFormatSeparator),J=typeof U=="string"&&!Z&&v(U,N).includes(N.arrayFormatSeparator);U=J?v(U,N):U;const X=Z||J?U.split(N.arrayFormatSeparator).map(le=>v(le,N)):U===null?U:v(U,N);B[D]=X};case"bracket-separator":return(D,U,B)=>{const Z=/(\[\])$/.test(D);if(D=D.replace(/\[\]$/,""),!Z){B[D]=U&&v(U,N);return}const J=U===null?[]:U.split(N.arrayFormatSeparator).map(X=>v(X,N));if(B[D]===void 0){B[D]=J;return}B[D]=[].concat(B[D],J)};default:return(D,U,B)=>{if(B[D]===void 0){B[D]=U;return}B[D]=[].concat(B[D],U)}}}function h(N){if(typeof N!="string"||N.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function m(N,F){return F.encode?F.strict?t(N):encodeURIComponent(N):N}function v(N,F){return F.decode?r(N):N}function w(N){return Array.isArray(N)?N.sort():typeof N=="object"?w(Object.keys(N)).sort((F,D)=>Number(F)-Number(D)).map(F=>N[F]):N}function x(N){const F=N.indexOf("#");return F!==-1&&(N=N.slice(0,F)),N}function P(N){let F="";const D=N.indexOf("#");return D!==-1&&(F=N.slice(D)),F}function T(N){N=x(N);const F=N.indexOf("?");return F===-1?"":N.slice(F+1)}function R(N,F){return F.parseNumbers&&!Number.isNaN(Number(N))&&typeof N=="string"&&N.trim()!==""?N=Number(N):F.parseBooleans&&N!==null&&(N.toLowerCase()==="true"||N.toLowerCase()==="false")&&(N=N.toLowerCase()==="true"),N}function k(N,F){F=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},F),h(F.arrayFormatSeparator);const D=p(F),U=Object.create(null);if(typeof N!="string"||(N=N.trim().replace(/^[?#&]/,""),!N))return U;for(const B of N.split("&")){if(B==="")continue;let[Z,J]=n(F.decode?B.replace(/\+/g," "):B,"=");J=J===void 0?null:["comma","separator","bracket-separator"].includes(F.arrayFormat)?J:v(J,F),D(v(Z,F),J,U)}for(const B of Object.keys(U)){const Z=U[B];if(typeof Z=="object"&&Z!==null)for(const J of Object.keys(Z))Z[J]=R(Z[J],F);else U[B]=R(Z,F)}return F.sort===!1?U:(F.sort===!0?Object.keys(U).sort():Object.keys(U).sort(F.sort)).reduce((B,Z)=>{const J=U[Z];return J&&typeof J=="object"&&!Array.isArray(J)?B[Z]=w(J):B[Z]=J,B},Object.create(null))}e.extract=T,e.parse=k,e.stringify=(N,F)=>{if(!N)return"";F=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},F),h(F.arrayFormatSeparator);const D=J=>F.skipNull&&o(N[J])||F.skipEmptyString&&N[J]==="",U=a(F),B={};for(const J of Object.keys(N))D(J)||(B[J]=N[J]);const Z=Object.keys(B);return F.sort!==!1&&Z.sort(F.sort),Z.map(J=>{const X=N[J];return X===void 0?"":X===null?m(J,F):Array.isArray(X)?X.length===0&&F.arrayFormat==="bracket-separator"?m(J,F)+"[]":X.reduce(U(J),[]).join("&"):m(J,F)+"="+m(X,F)}).filter(J=>J.length>0).join("&")},e.parseUrl=(N,F)=>{F=Object.assign({decode:!0},F);const[D,U]=n(N,"#");return Object.assign({url:D.split("?")[0]||"",query:k(T(N),F)},F&&F.parseFragmentIdentifier&&U?{fragmentIdentifier:v(U,F)}:{})},e.stringifyUrl=(N,F)=>{F=Object.assign({encode:!0,strict:!0,[u]:!0},F);const D=x(N.url).split("?")[0]||"",U=e.extract(N.url),B=e.parse(U,{sort:!1}),Z=Object.assign(B,N.query);let J=e.stringify(Z,F);J&&(J=`?${J}`);let X=P(N.url);return N.fragmentIdentifier&&(X=`#${F[u]?m(N.fragmentIdentifier,F):N.fragmentIdentifier}`),`${D}${J}${X}`},e.pick=(N,F,D)=>{D=Object.assign({parseFragmentIdentifier:!0,[u]:!1},D);const{url:U,query:B,fragmentIdentifier:Z}=e.parseUrl(N,D);return e.stringifyUrl({url:U,query:i(B,F),fragmentIdentifier:Z},D)},e.exclude=(N,F,D)=>{const U=Array.isArray(F)?B=>!F.includes(B):(B,Z)=>!F(B,Z);return e.pick(N,U,D)}})(ZC)),ZC}var MSe=ISe(),QC={exports:{}},Pj;function RSe(){return Pj||(Pj=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(p,h,m){this.fn=p,this.context=h,this.once=m||!1}function o(p,h,m,v,w){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new i(m,v||p,w),P=r?r+h:h;return p._events[P]?p._events[P].fn?p._events[P]=[p._events[P],x]:p._events[P].push(x):(p._events[P]=x,p._eventsCount++),p}function u(p,h){--p._eventsCount===0?p._events=new n:delete p._events[h]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],m,v;if(this._eventsCount===0)return h;for(v in m=this._events)t.call(m,v)&&h.push(r?v.slice(1):v);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},a.prototype.listeners=function(h){var m=r?r+h:h,v=this._events[m];if(!v)return[];if(v.fn)return[v.fn];for(var w=0,x=v.length,P=new Array(x);w<x;w++)P[w]=v[w].fn;return P},a.prototype.listenerCount=function(h){var m=r?r+h:h,v=this._events[m];return v?v.fn?1:v.length:0},a.prototype.emit=function(h,m,v,w,x,P){var T=r?r+h:h;if(!this._events[T])return!1;var R=this._events[T],k=arguments.length,N,F;if(R.fn){switch(R.once&&this.removeListener(h,R.fn,void 0,!0),k){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,m),!0;case 3:return R.fn.call(R.context,m,v),!0;case 4:return R.fn.call(R.context,m,v,w),!0;case 5:return R.fn.call(R.context,m,v,w,x),!0;case 6:return R.fn.call(R.context,m,v,w,x,P),!0}for(F=1,N=new Array(k-1);F<k;F++)N[F-1]=arguments[F];R.fn.apply(R.context,N)}else{var D=R.length,U;for(F=0;F<D;F++)switch(R[F].once&&this.removeListener(h,R[F].fn,void 0,!0),k){case 1:R[F].fn.call(R[F].context);break;case 2:R[F].fn.call(R[F].context,m);break;case 3:R[F].fn.call(R[F].context,m,v);break;case 4:R[F].fn.call(R[F].context,m,v,w);break;default:if(!N)for(U=1,N=new Array(k-1);U<k;U++)N[U-1]=arguments[U];R[F].fn.apply(R[F].context,N)}}return!0},a.prototype.on=function(h,m,v){return o(this,h,m,v,!1)},a.prototype.once=function(h,m,v){return o(this,h,m,v,!0)},a.prototype.removeListener=function(h,m,v,w){var x=r?r+h:h;if(!this._events[x])return this;if(!m)return u(this,x),this;var P=this._events[x];if(P.fn)P.fn===m&&(!w||P.once)&&(!v||P.context===v)&&u(this,x);else{for(var T=0,R=[],k=P.length;T<k;T++)(P[T].fn!==m||w&&!P[T].once||v&&P[T].context!==v)&&R.push(P[T]);R.length?this._events[x]=R.length===1?R[0]:R:u(this,x)}return this},a.prototype.removeAllListeners=function(h){var m;return h?(m=r?r+h:h,this._events[m]&&u(this,m)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(QC)),QC.exports}var OSe=RSe();const kSe=qs(OSe),Tj=new kSe;var rH=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},nH=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},eA,iH=function(){var e=rc(),t=zg(),r=Mf(),n=cd(),i=I.useCallback(function(u){u.startsWith("http")?window.location.href=u:n(u)},[n]),o=I.useCallback(function(u){return rH(void 0,void 0,void 0,function(){var a,p,h,m,v;return nH(this,function(w){switch(w.label){case 0:if(!e)return[2,LSe()];w.label=1;case 1:return w.trys.push([1,3,,8]),[4,e.checkError(u)];case 2:return w.sent(),[2,!1];case 3:if(a=w.sent(),p=(v=a?.logoutUser)!==null&&v!==void 0?v:!0,eA)return[2,!0];if(eA=setTimeout(function(){eA=void 0},0),h=a&&a.redirectTo!=null?a.redirectTo:u&&u.redirectTo?u.redirectTo:void 0,m=!(a&&a.message===!1||u&&u.message===!1||h?.startsWith("http")),!m)return[3,7];w.label=4;case 4:return w.trys.push([4,6,,7]),[4,e.checkAuth({})];case 5:return w.sent(),p?r(Ij(a,"ra.notification.logged_out"),{type:"error"}):r(Ij(a,"ra.notification.not_authorized"),{type:"error"}),[3,7];case 6:return w.sent(),[3,7];case 7:return p?t({},h):h&&i(h),[2,!0];case 8:return[2]}})})},[e,t,r,i]);return o},LSe=function(){return rH(void 0,void 0,void 0,function(){return nH(this,function(e){return[2,!1]})})},Ij=function(e,t){return typeof e=="string"?e:typeof e>"u"||!e.message?t:e.message},DSe=function(e){var t=e.data,r=e.queryClient,n=e.staleTime,i=n===void 0?1e3:n,o=Date.now()+i;Object.keys(t).forEach(function(u){t[u].forEach(function(p){!p||p.id==null||r.setQueryData([u,"getOne",{id:String(p.id)}],p,{updatedAt:o})});var a=t[u].map(function(p){return String(p.id)});r.setQueryData([u,"getMany",{ids:a}],t[u],{updatedAt:o})})},NSe=["getList","getMany","getManyReference"],lR=function(){var e=I.useContext(sR)||oR,t=Tf(),r=iH(),n=I.useMemo(function(){return new Proxy(e,{get:function(i,o){if(!(typeof o=="symbol"||o==="then"))return o==="supportAbortSignal"?e.supportAbortSignal:function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];var p=o.toString();if(typeof e[p]!="function")throw new Error("Unknown dataProvider function: ".concat(p));try{return e[p].apply(e,u).then(function(h){var m;return!((m=h?.meta)===null||m===void 0)&&m.prefetched&&DSe({data:h?.meta.prefetched,queryClient:t}),h}).catch(function(h){return r(h).then(function(m){if(m)return{data:NSe.includes(p)?[]:{}};throw h})})}catch{throw new Error("The dataProvider threw an error. It should return a rejected Promise instead.")}}}})},[e,r,t]);return n},FSe=function(){var e=Tf(),t=je.useRef(!1),r=je.useRef(e.isFetching()>0),n=je.useRef(e.isMutating()>0),i=je.useState(r.current||n.current),o=i[0],u=i[1];return je.useEffect(function(){t.current=!0;var a=e.getQueryCache().subscribe(Do.batchCalls(function(){t.current&&(r.current=e.isFetching()>0,u(r.current||n.current))})),p=e.getMutationCache().subscribe(Do.batchCalls(function(){t.current&&(n.current=e.isMutating()>0,u(r.current||n.current))}));return function(){t.current=!1,a(),p()}},[e]),o},BSe=function(){var e=Tf();return I.useCallback(function(){e.invalidateQueries()},[e])},jT=function(){return jT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jT.apply(this,arguments)},jSe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},aH=function(e,t,r){var n=t.id,i=t.meta;r===void 0&&(r={});var o=lR(),u=r.onError,a=u===void 0?tA:u,p=r.onSuccess,h=p===void 0?tA:p,m=r.onSettled,v=m===void 0?tA:m,w=r.enabled,x=jSe(r,["onError","onSuccess","onSettled","enabled"]),P=wo(h),T=wo(a),R=wo(v),k=Rp(jT({queryKey:[e,"getOne",{id:String(n),meta:i}],queryFn:function(N){return n==null?Promise.reject("useGetOne: id cannot be null"):o.getOne(e,{id:n,meta:i,signal:o.supportAbortSignal===!0?N.signal:void 0}).then(function(F){var D=F.data;return D})},enabled:w??n!=null},x));return I.useEffect(function(){k.data===void 0||k.error!=null||k.isFetching||P(k.data)},[P,k.data,k.error,k.isFetching]),I.useEffect(function(){k.error==null||k.isFetching||T(k.error)},[T,k.error,k.isFetching]),I.useEffect(function(){k.status==="pending"||k.isFetching||R(k.data,k.error)},[R,k.data,k.error,k.status,k.isFetching]),k},tA=function(){},rA,Mj;function zSe(){if(Mj)return rA;Mj=1;var e=Cg(),t=qx(),r=Nu(),n=e?e.isConcatSpreadable:void 0;function i(o){return r(o)||t(o)||!!(n&&o&&o[n])}return rA=i,rA}var nA,Rj;function $Se(){if(Rj)return nA;Rj=1;var e=ZI(),t=zSe();function r(n,i,o,u,a){var p=-1,h=n.length;for(o||(o=t),a||(a=[]);++p<h;){var m=n[p];i>0&&o(m)?i>1?r(m,i-1,o,u,a):e(a,m):u||(a[a.length]=m)}return a}return nA=r,nA}var zT=function(){return zT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zT.apply(this,arguments)},qSe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},oH=function(e){var t=e.record,r=e.redirect,n=r===void 0?"list":r,i=e.mutationMode,o=e.mutationOptions,u=o===void 0?{}:o,a=e.successMessage,p=u.meta,h=qSe(u,["meta"]),m=su(e),v=Mf(),w=cH(m),x=H0(),P=Di(),T=ECe(m,void 0,{onSuccess:function(){v(a??"resources.".concat(m,".notifications.deleted"),{type:"info",messageArgs:{smart_count:1,_:P("ra.notification.deleted",{smart_count:1})},undoable:i==="undoable"}),t&&w([t.id]),x(n,m)},onError:function(F){v(typeof F=="string"?F:F?.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof F=="string"?F:F?.message?F.message:void 0}})}}),R=T[0],k=T[1].isPending,N=I.useCallback(function(){if(!t)throw new Error("The record cannot be deleted because no record has been passed");R(m,{id:t.id,previousData:t,meta:p},zT({mutationMode:i},h))},[R,p,i,h,t,m]);return I.useMemo(function(){return{isPending:k,isLoading:k,handleDelete:N}},[k,N])},sH=I.createContext({}),USe=function(e){var t=e.children,r=e.value;return I.createElement(sH.Provider,{value:r},t)},iA,Oj;function VSe(){if(Oj)return iA;Oj=1;var e=Jx(),t=DG(),r=L0();function n(i,o,u){for(var a=-1,p=o.length,h={};++a<p;){var m=o[a],v=e(i,m);u(v,m)&&t(h,r(m,i),v)}return h}return iA=n,iA}var aA,kj;function GSe(){if(kj)return aA;kj=1;var e=VSe(),t=mU();function r(n,i){return e(n,i,function(o,u){return t(n,u)})}return aA=r,aA}var oA,Lj;function HSe(){if(Lj)return oA;Lj=1;var e=$Se();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return oA=t,oA}var sA,Dj;function lH(){if(Dj)return sA;Dj=1;var e=HSe(),t=VG(),r=GG();function n(i){return r(t(i,void 0,e),i+"")}return sA=n,sA}var lA,Nj;function WSe(){if(Nj)return lA;Nj=1;var e=GSe(),t=lH(),r=t(function(n,i){return n==null?{}:e(n,i)});return lA=r,lA}var ZSe=WSe();const KSe=qs(ZSe);var XSe=function(e){var t=I.useMemo(function(){return KSe(e,["save","saving","mutationMode","registerMutationMiddleware","unregisterMutationMiddleware"])},[e.save,e.saving,e.mutationMode,e.registerMutationMiddleware,e.unregisterMutationMiddleware]);return t},uR=function(e){return I.useContext(sH)},Zy=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},YSe=function(){var e=I.useRef([]),t=I.useCallback(function(o){e.current.push(o)},[]),r=I.useCallback(function(o){e.current=e.current.filter(function(u){return u!==o})},[]),n=I.useCallback(function(o){var u=Zy([],e.current,!0);return function(){for(var a=[],p=0;p<arguments.length;p++)a[p]=arguments[p];var h=u.length-1,m=function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return h--,h>=0?u[h].apply(u,Zy(Zy([],v,!1),[m],!1)):o.apply(void 0,v)};return u.length>0?u[h].apply(u,Zy(Zy([],a,!1),[m],!1)):o.apply(void 0,a)}},[]),i=I.useMemo(function(){return{registerMutationMiddleware:t,getMutateWithMiddlewares:n,unregisterMutationMiddleware:r}},[t,n,r]);return i},Tv=function(){return Tv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Tv.apply(this,arguments)},Fj=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},Bj=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},jj=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},JSe=function(e){e===void 0&&(e={});var t=e.disableAuthentication,r=t===void 0?!1:t,n=e.id,i=e.mutationMode,o=i===void 0?"undoable":i,u=e.mutationOptions,a=u===void 0?{}:u,p=e.queryOptions,h=p===void 0?{}:p,m=e.redirect,v=m===void 0?QSe:m,w=e.transform,x=su(e);if(!x)throw new Error("useEditController requires a non-empty resource prop or context");var P=X0({enabled:!r}).isPending,T=KH({action:"edit",resource:x,enabled:!r&&!P}).isPending,R=jg(x),k=Di(),N=Mf(),F=H0(),D=CG().id;if(!D&&!n)throw new Error("useEditController requires an id prop or a route with an /:id? parameter.");var U=n??D,B=h.meta,Z=jj(h,["meta"]),J=a.meta,X=a.onSuccess,le=a.onError,H=jj(a,["meta","onSuccess","onError"]);(B||J)&&JSON.stringify(B)!==JSON.stringify(J)&&v===!1&&console.warn("When not redirecting after editing, query meta and mutation meta should be the same, or you will have data update issues.");var G=YSe(),ae=G.registerMutationMiddleware,se=G.getMutateWithMiddlewares,ue=G.unregisterMutationMiddleware,me=aH(x,{id:U,meta:B},Tv({enabled:!P&&!T||r,onError:function(){N("ra.notification.item_doesnt_exist",{type:"error"}),F("list",x)},refetchOnReconnect:!1,refetchOnWindowFocus:!1,retry:!1},Z)),Ce=me.data,pe=me.error,Ee=me.isLoading,Fe=me.isFetching,Ke=me.isPaused,fe=me.isPending,_e=me.isPlaceholderData,Pe=me.refetch;if(Ce&&Ce.id&&Ce.id!=U)throw new Error("useEditController: Fetched record's id attribute (".concat(Ce.id,") must match the requested 'id' (").concat(U,")"));var ke=Bg(),$e=R(Ce),ht=k("resources.".concat(x,".page.edit"),{id:U,record:Ce,recordRepresentation:typeof $e=="string"?$e:"",_:k("ra.page.edit",{name:ke(x,1),id:U,record:Ce,recordRepresentation:typeof $e=="string"?$e:""})}),Ot={id:U,previousData:Ce},mt=SCe(x,Ot,Tv(Tv({onSuccess:function(It,gt,Le){return Fj(void 0,void 0,void 0,function(){return Bj(this,function(pr){return X?[2,X(It,gt,Le)]:(N("resources.".concat(x,".notifications.updated"),{type:"info",messageArgs:{smart_count:1,_:k("ra.notification.updated",{smart_count:1})},undoable:o==="undoable"}),F(v,x,It.id,It),[2])})})},onError:function(It,gt,Le){var pr;if(le)return le(It,gt,Le);var hr=(pr=It?.body)===null||pr===void 0?void 0:pr.errors,vr=!!hr&&Object.keys(hr).length>0;(!vr||o!=="pessimistic")&&N(typeof It=="string"?It:It.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof It=="string"?It:It instanceof Error||typeof It=="object"&&It!==null&&It.hasOwnProperty("message")?It.message:void 0}})}},H),{mutationMode:o,returnPromise:o==="pessimistic",getMutateWithMiddlewares:se})),nt=mt[0],Nt=mt[1].isPending,kt=I.useCallback(function(It,gt){var Le=gt===void 0?{}:gt,pr=Le.onSuccess,hr=Le.onError,vr=Le.transform,Qt=Le.meta;return Promise.resolve(vr?vr(It,{previousData:Ot.previousData}):w?w(It,{previousData:Ot.previousData}):It).then(function(qe){return Fj(void 0,void 0,void 0,function(){var rt,ct;return Bj(this,function(Ft){switch(Ft.label){case 0:return Ft.trys.push([0,2,,3]),[4,nt(x,{id:U,data:qe,meta:Qt??J,previousData:Ce},{onError:hr,onSuccess:pr})];case 1:return Ft.sent(),[3,3];case 2:return rt=Ft.sent(),((ct=rt.body)===null||ct===void 0?void 0:ct.errors)!=null?[2,rt.body.errors]:[3,3];case 3:return[2]}})})})},[U,J,Ce,x,w,nt,Ot.previousData]);return{defaultTitle:ht,error:pe,isFetching:Fe,isLoading:Ee,isPaused:Ke,isPending:fe,isPlaceholderData:_e,mutationMode:o,record:Ce,redirect:v,refetch:Pe,registerMutationMiddleware:ae,resource:x,save:kt,saving:Nt,unregisterMutationMiddleware:ue}},QSe="list",uH=function(e){var t=e.value,r=e.children;return t?I.createElement(aR,{value:t},r):r},cR=I.createContext(null);cR.displayName="EditContext";var eEe=function(e){var t=e.children,r=e.value;return I.createElement(cR.Provider,{value:r},I.createElement(USe,{value:XSe(r)},I.createElement(aR,{value:r&&r.record},t)))},tEe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},rEe=function(e){var t=e.children,r=e.loading,n=e.offline,i=e.render,o=tEe(e,["children","loading","offline","render"]),u=JSe(o),a=ZH({resource:u.resource,action:"edit"});if(!i&&!t)throw new Error("<EditBase> requires either a 'render' prop or 'children' prop");var p=u.isPaused,h=u.isPending,m=a&&!o.disableAuthentication&&r!==!1&&r!==void 0,v=p&&h&&n!==!1&&n!==void 0;return I.createElement(zH,{value:o.resource},I.createElement(eEe,{value:u},m?r:v?n:i?i(u):t))},nEe=function(){var e=I.useContext(cR);if(!e)throw new Error("useEditContext must be used inside an EditContextProvider");return e},vm=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},iEe=function(e){var t=e.resource,r=t===void 0?"":t,n=e.disableSyncWithStore,i=n===void 0?!1:n,o="".concat(r,".selectedIds"),u=I.useState(uA),a=u[0],p=u[1],h=Op(o,uA),m=h[0],v=h[1],w=fAe(o),x=i?a:m,P=i?p:v,T=I.useCallback(function(){i?p(uA):w()},[i,w]),R=I.useMemo(function(){return{select:function(k){k&&P(vm([],k,!0))},unselect:function(k){!k||k.length===0||P(function(N){return Array.isArray(N)?N.filter(function(F){return!k.includes(F)}):[]})},toggle:function(k){typeof k>"u"||P(function(N){if(!Array.isArray(N))return vm([],N,!0);var F=N.indexOf(k);return F>-1?vm(vm([],N.slice(0,F),!0),N.slice(F+1),!0):vm(vm([],N,!0),[k],!1)})},clearSelection:function(){T()}}},[P,T]);return[x,R]},uA=[];function aEe(e,t){e===void 0&&(e=0),t===void 0&&(t="");var r=I.useState(!1),n=r[0],i=r[1];return I.useEffect(function(){i(!1);var o=setTimeout(function(){i(!0)},e);return function(){clearTimeout(o)}},[t,e,i]),n}var cA,zj;function oEe(){if(zj)return cA;zj=1;var e=HG(),t=Tg(),r=WG(),n=Mg(),i=Object.prototype,o=i.hasOwnProperty,u=e(function(a,p){a=Object(a);var h=-1,m=p.length,v=m>2?p[2]:void 0;for(v&&r(p[0],p[1],v)&&(m=1);++h<m;)for(var w=p[h],x=n(w),P=-1,T=x.length;++P<T;){var R=x[P],k=a[R];(k===void 0||t(k,i[R])&&!o.call(a,R))&&(a[R]=w[R])}return a});return cA=u,cA}var sEe=oEe();const lEe=qs(sEe);var cH=function(e){var t=iEe(e?{resource:e}:{disableSyncWithStore:!0}),r=t[1].unselect;return I.useCallback(function(n){r(n)},[r])},uEe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},cEe=function(e){e.cellClassName,e.className,e.emptyText,e.fullWidth,e.headerClassName,e.label,e.linkType,e.link,e.locale,e.record,e.refetch,e.resource,e.sortable,e.sortBy,e.sortByOrder,e.source,e.textAlign,e.translateChoice;var t=uEe(e,["cellClassName","className","emptyText","fullWidth","headerClassName","label","linkType","link","locale","record","refetch","resource","sortable","sortBy","sortByOrder","source","textAlign","translateChoice"]);return t},W0=e=>e.type==="checkbox",rp=e=>e instanceof Date,Ol=e=>e==null;const fH=e=>typeof e=="object";var Fo=e=>!Ol(e)&&!Array.isArray(e)&&fH(e)&&!rp(e),hH=e=>Fo(e)&&e.target?W0(e.target)?e.target.checked:e.target.value:e,fEe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,dH=(e,t)=>e.has(fEe(t)),hEe=e=>{const t=e.constructor&&e.constructor.prototype;return Fo(t)&&t.hasOwnProperty("isPrototypeOf")},fR=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ms(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(fR&&(e instanceof Blob||n))&&(r||Fo(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!hEe(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=ms(e[i]));else return e;return t}var _2=e=>/^\w*$/.test(e),Ro=e=>e===void 0,hR=e=>Array.isArray(e)?e.filter(Boolean):[],dR=e=>hR(e.replace(/["|']|\]/g,"").split(/\.|\[/)),cn=(e,t,r)=>{if(!t||!Fo(e))return r;const n=(_2(t)?[t]:dR(t)).reduce((i,o)=>Ol(i)?i:i[o],e);return Ro(n)||n===e?Ro(e[t])?r:e[t]:n},Au=e=>typeof e=="boolean",Da=(e,t,r)=>{let n=-1;const i=_2(t)?[t]:dR(t),o=i.length,u=o-1;for(;++n<o;){const a=i[n];let p=r;if(n!==u){const h=e[a];p=Fo(h)||Array.isArray(h)?h:isNaN(+i[n+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;e[a]=p,e=e[a]}};const I1={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ec={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Yf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},pR=je.createContext(null);pR.displayName="HookFormContext";const Z0=()=>je.useContext(pR),dEe=e=>{const{children:t,...r}=e;return je.createElement(pR.Provider,{value:r},t)};var pH=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const u=o;return t._proxyFormState[u]!==Ec.all&&(t._proxyFormState[u]=!n||Ec.all),r&&(r[u]=!0),e[u]}});return i};const mR=typeof window<"u"?je.useLayoutEffect:je.useEffect;function x2(e){const t=Z0(),{control:r=t.control,disabled:n,name:i,exact:o}=e||{},[u,a]=je.useState(r._formState),p=je.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return mR(()=>r._subscribe({name:i,formState:p.current,exact:o,callback:h=>{!n&&a({...r._formState,...h})}}),[i,n,o]),je.useEffect(()=>{p.current.isValid&&r._setValid(!0)},[r]),je.useMemo(()=>pH(u,r,p.current,!1),[u,r])}var mf=e=>typeof e=="string",mH=(e,t,r,n,i)=>mf(e)?(n&&t.watch.add(e),cn(r,e,i)):Array.isArray(e)?e.map(o=>(n&&t.watch.add(o),cn(r,o))):(n&&(t.watchAll=!0),r),$T=e=>Ol(e)||!fH(e);function ah(e,t,r=new WeakSet){if($T(e)||$T(t))return e===t;if(rp(e)&&rp(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const o of n){const u=e[o];if(!i.includes(o))return!1;if(o!=="ref"){const a=t[o];if(rp(u)&&rp(a)||Fo(u)&&Fo(a)||Array.isArray(u)&&Array.isArray(a)?!ah(u,a,r):u!==a)return!1}}return!0}function pEe(e){const t=Z0(),{control:r=t.control,name:n,defaultValue:i,disabled:o,exact:u,compute:a}=e||{},p=je.useRef(i),h=je.useRef(a),m=je.useRef(void 0);h.current=a;const v=je.useMemo(()=>r._getWatch(n,p.current),[r,n]),[w,x]=je.useState(h.current?h.current(v):v);return mR(()=>r._subscribe({name:n,formState:{values:!0},exact:u,callback:P=>{if(!o){const T=mH(n,r._names,P.values||r._formValues,!1,p.current);if(h.current){const R=h.current(T);ah(R,m.current)||(x(R),m.current=R)}else x(T)}}}),[r,o,n,u]),je.useEffect(()=>r._removeUnmounted()),w}function mEe(e){const t=Z0(),{name:r,disabled:n,control:i=t.control,shouldUnregister:o,defaultValue:u}=e,a=dH(i._names.array,r),p=je.useMemo(()=>cn(i._formValues,r,cn(i._defaultValues,r,u)),[i,r,u]),h=pEe({control:i,name:r,defaultValue:p,exact:!0}),m=x2({control:i,name:r,exact:!0}),v=je.useRef(e),w=je.useRef(i.register(r,{...e.rules,value:h,...Au(e.disabled)?{disabled:e.disabled}:{}}));v.current=e;const x=je.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!cn(m.errors,r)},isDirty:{enumerable:!0,get:()=>!!cn(m.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!cn(m.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!cn(m.validatingFields,r)},error:{enumerable:!0,get:()=>cn(m.errors,r)}}),[m,r]),P=je.useCallback(N=>w.current.onChange({target:{value:hH(N),name:r},type:I1.CHANGE}),[r]),T=je.useCallback(()=>w.current.onBlur({target:{value:cn(i._formValues,r),name:r},type:I1.BLUR}),[r,i._formValues]),R=je.useCallback(N=>{const F=cn(i._fields,r);F&&N&&(F._f.ref={focus:()=>N.focus&&N.focus(),select:()=>N.select&&N.select(),setCustomValidity:D=>N.setCustomValidity(D),reportValidity:()=>N.reportValidity()})},[i._fields,r]),k=je.useMemo(()=>({name:r,value:h,...Au(n)||m.disabled?{disabled:m.disabled||n}:{},onChange:P,onBlur:T,ref:R}),[r,n,m.disabled,P,T,R,h]);return je.useEffect(()=>{const N=i._options.shouldUnregister||o;i.register(r,{...v.current.rules,...Au(v.current.disabled)?{disabled:v.current.disabled}:{}});const F=(D,U)=>{const B=cn(i._fields,D);B&&B._f&&(B._f.mount=U)};if(F(r,!0),N){const D=ms(cn(i._options.defaultValues,r));Da(i._defaultValues,r,D),Ro(cn(i._formValues,r))&&Da(i._formValues,r,D)}return!a&&i.register(r),()=>{(a?N&&!i._state.action:N)?i.unregister(r):F(r,!1)}},[r,i,a,o]),je.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),je.useMemo(()=>({field:k,formState:m,fieldState:x}),[k,m,x])}var gEe=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},Iv=e=>Array.isArray(e)?e:[e],$j=()=>{let e=[];return{get observers(){return e},next:i=>{for(const o of e)o.next&&o.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(o=>o!==i)}}),unsubscribe:()=>{e=[]}}},Xl=e=>Fo(e)&&!Object.keys(e).length,gR=e=>e.type==="file",Cc=e=>typeof e=="function",M1=e=>{if(!fR)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},gH=e=>e.type==="select-multiple",yR=e=>e.type==="radio",yEe=e=>yR(e)||W0(e),fA=e=>M1(e)&&e.isConnected;function vEe(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ro(e)?n++:e[t[n++]];return e}function bEe(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ro(e[t]))return!1;return!0}function Jo(e,t){const r=Array.isArray(t)?t:_2(t)?[t]:dR(t),n=r.length===1?e:vEe(e,r),i=r.length-1,o=r[i];return n&&delete n[o],i!==0&&(Fo(n)&&Xl(n)||Array.isArray(n)&&bEe(n))&&Jo(e,r.slice(0,-1)),e}var yH=e=>{for(const t in e)if(Cc(e[t]))return!0;return!1};function R1(e,t={}){const r=Array.isArray(e);if(Fo(e)||r)for(const n in e)Array.isArray(e[n])||Fo(e[n])&&!yH(e[n])?(t[n]=Array.isArray(e[n])?[]:{},R1(e[n],t[n])):Ol(e[n])||(t[n]=!0);return t}function vH(e,t,r){const n=Array.isArray(e);if(Fo(e)||n)for(const i in e)Array.isArray(e[i])||Fo(e[i])&&!yH(e[i])?Ro(t)||$T(r[i])?r[i]=Array.isArray(e[i])?R1(e[i],[]):{...R1(e[i])}:vH(e[i],Ol(t)?{}:t[i],r[i]):r[i]=!ah(e[i],t[i]);return r}var Ky=(e,t)=>vH(e,t,R1(t));const qj={value:!1,isValid:!1},Uj={value:!0,isValid:!0};var bH=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ro(e[0].attributes.value)?Ro(e[0].value)||e[0].value===""?Uj:{value:e[0].value,isValid:!0}:Uj:qj}return qj},_H=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ro(e)?e:t?e===""?NaN:e&&+e:r&&mf(e)?new Date(e):n?n(e):e;const Vj={isValid:!1,value:null};var xH=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Vj):Vj;function Gj(e){const t=e.ref;return gR(t)?t.files:yR(t)?xH(e.refs).value:gH(t)?[...t.selectedOptions].map(({value:r})=>r):W0(t)?bH(e.refs).value:_H(Ro(t.value)?e.ref.value:t.value,e)}var _Ee=(e,t,r,n)=>{const i={};for(const o of e){const u=cn(t,o);u&&Da(i,o,u._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},O1=e=>e instanceof RegExp,Xy=e=>Ro(e)?e:O1(e)?e.source:Fo(e)?O1(e.value)?e.value.source:e.value:e,Hj=e=>({isOnSubmit:!e||e===Ec.onSubmit,isOnBlur:e===Ec.onBlur,isOnChange:e===Ec.onChange,isOnAll:e===Ec.all,isOnTouch:e===Ec.onTouched});const Wj="AsyncFunction";var xEe=e=>!!e&&!!e.validate&&!!(Cc(e.validate)&&e.validate.constructor.name===Wj||Fo(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Wj)),wEe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Zj=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Mv=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const o=cn(e,i);if(o){const{_f:u,...a}=o;if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],i)&&!n)return!0;if(u.ref&&t(u.ref,u.name)&&!n)return!0;if(Mv(a,t))break}else if(Fo(a)&&Mv(a,t))break}}};function Kj(e,t,r){const n=cn(e,r);if(n||_2(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const o=i.join("."),u=cn(t,o),a=cn(e,o);if(u&&!Array.isArray(u)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};if(a&&a.root&&a.root.type)return{name:`${o}.root`,error:a.root};i.pop()}return{name:r}}var SEe=(e,t,r,n)=>{r(e);const{name:i,...o}=e;return Xl(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(u=>t[u]===(!n||Ec.all))},EEe=(e,t,r)=>!e||!t||e===t||Iv(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),CEe=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,AEe=(e,t)=>!hR(cn(e,t)).length&&Jo(e,t),PEe=(e,t,r)=>{const n=Iv(cn(e,r));return Da(n,"root",t[r]),Da(e,r,n),e},F_=e=>mf(e);function Xj(e,t,r="validate"){if(F_(e)||Array.isArray(e)&&e.every(F_)||Au(e)&&!e)return{type:r,message:F_(e)?e:"",ref:t}}var bm=e=>Fo(e)&&!O1(e)?e:{value:e,message:""},Yj=async(e,t,r,n,i,o)=>{const{ref:u,refs:a,required:p,maxLength:h,minLength:m,min:v,max:w,pattern:x,validate:P,name:T,valueAsNumber:R,mount:k}=e._f,N=cn(r,T);if(!k||t.has(T))return{};const F=a?a[0]:u,D=G=>{i&&F.reportValidity&&(F.setCustomValidity(Au(G)?"":G||""),F.reportValidity())},U={},B=yR(u),Z=W0(u),J=B||Z,X=(R||gR(u))&&Ro(u.value)&&Ro(N)||M1(u)&&u.value===""||N===""||Array.isArray(N)&&!N.length,le=gEe.bind(null,T,n,U),H=(G,ae,se,ue=Yf.maxLength,me=Yf.minLength)=>{const Ce=G?ae:se;U[T]={type:G?ue:me,message:Ce,ref:u,...le(G?ue:me,Ce)}};if(o?!Array.isArray(N)||!N.length:p&&(!J&&(X||Ol(N))||Au(N)&&!N||Z&&!bH(a).isValid||B&&!xH(a).isValid)){const{value:G,message:ae}=F_(p)?{value:!!p,message:p}:bm(p);if(G&&(U[T]={type:Yf.required,message:ae,ref:F,...le(Yf.required,ae)},!n))return D(ae),U}if(!X&&(!Ol(v)||!Ol(w))){let G,ae;const se=bm(w),ue=bm(v);if(!Ol(N)&&!isNaN(N)){const me=u.valueAsNumber||N&&+N;Ol(se.value)||(G=me>se.value),Ol(ue.value)||(ae=me<ue.value)}else{const me=u.valueAsDate||new Date(N),Ce=Fe=>new Date(new Date().toDateString()+" "+Fe),pe=u.type=="time",Ee=u.type=="week";mf(se.value)&&N&&(G=pe?Ce(N)>Ce(se.value):Ee?N>se.value:me>new Date(se.value)),mf(ue.value)&&N&&(ae=pe?Ce(N)<Ce(ue.value):Ee?N<ue.value:me<new Date(ue.value))}if((G||ae)&&(H(!!G,se.message,ue.message,Yf.max,Yf.min),!n))return D(U[T].message),U}if((h||m)&&!X&&(mf(N)||o&&Array.isArray(N))){const G=bm(h),ae=bm(m),se=!Ol(G.value)&&N.length>+G.value,ue=!Ol(ae.value)&&N.length<+ae.value;if((se||ue)&&(H(se,G.message,ae.message),!n))return D(U[T].message),U}if(x&&!X&&mf(N)){const{value:G,message:ae}=bm(x);if(O1(G)&&!N.match(G)&&(U[T]={type:Yf.pattern,message:ae,ref:u,...le(Yf.pattern,ae)},!n))return D(ae),U}if(P){if(Cc(P)){const G=await P(N,r),ae=Xj(G,F);if(ae&&(U[T]={...ae,...le(Yf.validate,ae.message)},!n))return D(ae.message),U}else if(Fo(P)){let G={};for(const ae in P){if(!Xl(G)&&!n)break;const se=Xj(await P[ae](N,r),F,ae);se&&(G={...se,...le(ae,se.message)},D(se.message),n&&(U[T]=G))}if(!Xl(G)&&(U[T]={ref:F,...G},!n))return U}}return D(!0),U};const TEe={mode:Ec.onSubmit,reValidateMode:Ec.onChange,shouldFocusError:!0};function IEe(e={}){let t={...TEe,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Cc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=Fo(t.defaultValues)||Fo(t.values)?ms(t.defaultValues||t.values)||{}:{},o=t.shouldUnregister?{}:ms(i),u={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,h=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...m};const w={array:$j(),state:$j()},x=t.criteriaMode===Ec.all,P=qe=>rt=>{clearTimeout(h),h=setTimeout(qe,rt)},T=async qe=>{if(!t.disabled&&(m.isValid||v.isValid||qe)){const rt=t.resolver?Xl((await Z()).errors):await X(n,!0);rt!==r.isValid&&w.state.next({isValid:rt})}},R=(qe,rt)=>{!t.disabled&&(m.isValidating||m.validatingFields||v.isValidating||v.validatingFields)&&((qe||Array.from(a.mount)).forEach(ct=>{ct&&(rt?Da(r.validatingFields,ct,rt):Jo(r.validatingFields,ct))}),w.state.next({validatingFields:r.validatingFields,isValidating:!Xl(r.validatingFields)}))},k=(qe,rt=[],ct,Ft,Yt=!0,Wt=!0)=>{if(Ft&&ct&&!t.disabled){if(u.action=!0,Wt&&Array.isArray(cn(n,qe))){const ur=ct(cn(n,qe),Ft.argA,Ft.argB);Yt&&Da(n,qe,ur)}if(Wt&&Array.isArray(cn(r.errors,qe))){const ur=ct(cn(r.errors,qe),Ft.argA,Ft.argB);Yt&&Da(r.errors,qe,ur),AEe(r.errors,qe)}if((m.touchedFields||v.touchedFields)&&Wt&&Array.isArray(cn(r.touchedFields,qe))){const ur=ct(cn(r.touchedFields,qe),Ft.argA,Ft.argB);Yt&&Da(r.touchedFields,qe,ur)}(m.dirtyFields||v.dirtyFields)&&(r.dirtyFields=Ky(i,o)),w.state.next({name:qe,isDirty:H(qe,rt),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Da(o,qe,rt)},N=(qe,rt)=>{Da(r.errors,qe,rt),w.state.next({errors:r.errors})},F=qe=>{r.errors=qe,w.state.next({errors:r.errors,isValid:!1})},D=(qe,rt,ct,Ft)=>{const Yt=cn(n,qe);if(Yt){const Wt=cn(o,qe,Ro(ct)?cn(i,qe):ct);Ro(Wt)||Ft&&Ft.defaultChecked||rt?Da(o,qe,rt?Wt:Gj(Yt._f)):se(qe,Wt),u.mount&&T()}},U=(qe,rt,ct,Ft,Yt)=>{let Wt=!1,ur=!1;const br={name:qe};if(!t.disabled){if(!ct||Ft){(m.isDirty||v.isDirty)&&(ur=r.isDirty,r.isDirty=br.isDirty=H(),Wt=ur!==br.isDirty);const xr=ah(cn(i,qe),rt);ur=!!cn(r.dirtyFields,qe),xr?Jo(r.dirtyFields,qe):Da(r.dirtyFields,qe,!0),br.dirtyFields=r.dirtyFields,Wt=Wt||(m.dirtyFields||v.dirtyFields)&&ur!==!xr}if(ct){const xr=cn(r.touchedFields,qe);xr||(Da(r.touchedFields,qe,ct),br.touchedFields=r.touchedFields,Wt=Wt||(m.touchedFields||v.touchedFields)&&xr!==ct)}Wt&&Yt&&w.state.next(br)}return Wt?br:{}},B=(qe,rt,ct,Ft)=>{const Yt=cn(r.errors,qe),Wt=(m.isValid||v.isValid)&&Au(rt)&&r.isValid!==rt;if(t.delayError&&ct?(p=P(()=>N(qe,ct)),p(t.delayError)):(clearTimeout(h),p=null,ct?Da(r.errors,qe,ct):Jo(r.errors,qe)),(ct?!ah(Yt,ct):Yt)||!Xl(Ft)||Wt){const ur={...Ft,...Wt&&Au(rt)?{isValid:rt}:{},errors:r.errors,name:qe};r={...r,...ur},w.state.next(ur)}},Z=async qe=>{R(qe,!0);const rt=await t.resolver(o,t.context,_Ee(qe||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return R(qe),rt},J=async qe=>{const{errors:rt}=await Z(qe);if(qe)for(const ct of qe){const Ft=cn(rt,ct);Ft?Da(r.errors,ct,Ft):Jo(r.errors,ct)}else r.errors=rt;return rt},X=async(qe,rt,ct={valid:!0})=>{for(const Ft in qe){const Yt=qe[Ft];if(Yt){const{_f:Wt,...ur}=Yt;if(Wt){const br=a.array.has(Wt.name),xr=Yt._f&&xEe(Yt._f);xr&&m.validatingFields&&R([Ft],!0);const Rr=await Yj(Yt,a.disabled,o,x,t.shouldUseNativeValidation&&!rt,br);if(xr&&m.validatingFields&&R([Ft]),Rr[Wt.name]&&(ct.valid=!1,rt))break;!rt&&(cn(Rr,Wt.name)?br?PEe(r.errors,Rr,Wt.name):Da(r.errors,Wt.name,Rr[Wt.name]):Jo(r.errors,Wt.name))}!Xl(ur)&&await X(ur,rt,ct)}}return ct.valid},le=()=>{for(const qe of a.unMount){const rt=cn(n,qe);rt&&(rt._f.refs?rt._f.refs.every(ct=>!fA(ct)):!fA(rt._f.ref))&&ht(qe)}a.unMount=new Set},H=(qe,rt)=>!t.disabled&&(qe&&rt&&Da(o,qe,rt),!ah(Fe(),i)),G=(qe,rt,ct)=>mH(qe,a,{...u.mount?o:Ro(rt)?i:mf(qe)?{[qe]:rt}:rt},ct,rt),ae=qe=>hR(cn(u.mount?o:i,qe,t.shouldUnregister?cn(i,qe,[]):[])),se=(qe,rt,ct={})=>{const Ft=cn(n,qe);let Yt=rt;if(Ft){const Wt=Ft._f;Wt&&(!Wt.disabled&&Da(o,qe,_H(rt,Wt)),Yt=M1(Wt.ref)&&Ol(rt)?"":rt,gH(Wt.ref)?[...Wt.ref.options].forEach(ur=>ur.selected=Yt.includes(ur.value)):Wt.refs?W0(Wt.ref)?Wt.refs.forEach(ur=>{(!ur.defaultChecked||!ur.disabled)&&(Array.isArray(Yt)?ur.checked=!!Yt.find(br=>br===ur.value):ur.checked=Yt===ur.value||!!Yt)}):Wt.refs.forEach(ur=>ur.checked=ur.value===Yt):gR(Wt.ref)?Wt.ref.value="":(Wt.ref.value=Yt,Wt.ref.type||w.state.next({name:qe,values:ms(o)})))}(ct.shouldDirty||ct.shouldTouch)&&U(qe,Yt,ct.shouldTouch,ct.shouldDirty,!0),ct.shouldValidate&&Ee(qe)},ue=(qe,rt,ct)=>{for(const Ft in rt){if(!rt.hasOwnProperty(Ft))return;const Yt=rt[Ft],Wt=qe+"."+Ft,ur=cn(n,Wt);(a.array.has(qe)||Fo(Yt)||ur&&!ur._f)&&!rp(Yt)?ue(Wt,Yt,ct):se(Wt,Yt,ct)}},me=(qe,rt,ct={})=>{const Ft=cn(n,qe),Yt=a.array.has(qe),Wt=ms(rt);Da(o,qe,Wt),Yt?(w.array.next({name:qe,values:ms(o)}),(m.isDirty||m.dirtyFields||v.isDirty||v.dirtyFields)&&ct.shouldDirty&&w.state.next({name:qe,dirtyFields:Ky(i,o),isDirty:H(qe,Wt)})):Ft&&!Ft._f&&!Ol(Wt)?ue(qe,Wt,ct):se(qe,Wt,ct),Zj(qe,a)&&w.state.next({...r,name:qe}),w.state.next({name:u.mount?qe:void 0,values:ms(o)})},Ce=async qe=>{u.mount=!0;const rt=qe.target;let ct=rt.name,Ft=!0;const Yt=cn(n,ct),Wt=xr=>{Ft=Number.isNaN(xr)||rp(xr)&&isNaN(xr.getTime())||ah(xr,cn(o,ct,xr))},ur=Hj(t.mode),br=Hj(t.reValidateMode);if(Yt){let xr,Rr;const wr=rt.type?Gj(Yt._f):hH(qe),fr=qe.type===I1.BLUR||qe.type===I1.FOCUS_OUT,bt=!wEe(Yt._f)&&!t.resolver&&!cn(r.errors,ct)&&!Yt._f.deps||CEe(fr,cn(r.touchedFields,ct),r.isSubmitted,br,ur),ve=Zj(ct,a,fr);Da(o,ct,wr),fr?(!rt||!rt.readOnly)&&(Yt._f.onBlur&&Yt._f.onBlur(qe),p&&p(0)):Yt._f.onChange&&Yt._f.onChange(qe);const xe=U(ct,wr,fr),Ae=!Xl(xe)||ve;if(!fr&&w.state.next({name:ct,type:qe.type,values:ms(o)}),bt)return(m.isValid||v.isValid)&&(t.mode==="onBlur"?fr&&T():fr||T()),Ae&&w.state.next({name:ct,...ve?{}:xe});if(!fr&&ve&&w.state.next({...r}),t.resolver){const{errors:Ue}=await Z([ct]);if(Wt(wr),Ft){const tt=Kj(r.errors,n,ct),_t=Kj(Ue,n,tt.name||ct);xr=_t.error,ct=_t.name,Rr=Xl(Ue)}}else R([ct],!0),xr=(await Yj(Yt,a.disabled,o,x,t.shouldUseNativeValidation))[ct],R([ct]),Wt(wr),Ft&&(xr?Rr=!1:(m.isValid||v.isValid)&&(Rr=await X(n,!0)));Ft&&(Yt._f.deps&&Ee(Yt._f.deps),B(ct,Rr,xr,xe))}},pe=(qe,rt)=>{if(cn(r.errors,rt)&&qe.focus)return qe.focus(),1},Ee=async(qe,rt={})=>{let ct,Ft;const Yt=Iv(qe);if(t.resolver){const Wt=await J(Ro(qe)?qe:Yt);ct=Xl(Wt),Ft=qe?!Yt.some(ur=>cn(Wt,ur)):ct}else qe?(Ft=(await Promise.all(Yt.map(async Wt=>{const ur=cn(n,Wt);return await X(ur&&ur._f?{[Wt]:ur}:ur)}))).every(Boolean),!(!Ft&&!r.isValid)&&T()):Ft=ct=await X(n);return w.state.next({...!mf(qe)||(m.isValid||v.isValid)&&ct!==r.isValid?{}:{name:qe},...t.resolver||!qe?{isValid:ct}:{},errors:r.errors}),rt.shouldFocus&&!Ft&&Mv(n,pe,qe?Yt:a.mount),Ft},Fe=qe=>{const rt={...u.mount?o:i};return Ro(qe)?rt:mf(qe)?cn(rt,qe):qe.map(ct=>cn(rt,ct))},Ke=(qe,rt)=>({invalid:!!cn((rt||r).errors,qe),isDirty:!!cn((rt||r).dirtyFields,qe),error:cn((rt||r).errors,qe),isValidating:!!cn(r.validatingFields,qe),isTouched:!!cn((rt||r).touchedFields,qe)}),fe=qe=>{qe&&Iv(qe).forEach(rt=>Jo(r.errors,rt)),w.state.next({errors:qe?r.errors:{}})},_e=(qe,rt,ct)=>{const Ft=(cn(n,qe,{_f:{}})._f||{}).ref,Yt=cn(r.errors,qe)||{},{ref:Wt,message:ur,type:br,...xr}=Yt;Da(r.errors,qe,{...xr,...rt,ref:Ft}),w.state.next({name:qe,errors:r.errors,isValid:!1}),ct&&ct.shouldFocus&&Ft&&Ft.focus&&Ft.focus()},Pe=(qe,rt)=>Cc(qe)?w.state.subscribe({next:ct=>"values"in ct&&qe(G(void 0,rt),ct)}):G(qe,rt,!0),ke=qe=>w.state.subscribe({next:rt=>{EEe(qe.name,rt.name,qe.exact)&&SEe(rt,qe.formState||m,hr,qe.reRenderRoot)&&qe.callback({values:{...o},...r,...rt,defaultValues:i})}}).unsubscribe,$e=qe=>(u.mount=!0,v={...v,...qe.formState},ke({...qe,formState:v})),ht=(qe,rt={})=>{for(const ct of qe?Iv(qe):a.mount)a.mount.delete(ct),a.array.delete(ct),rt.keepValue||(Jo(n,ct),Jo(o,ct)),!rt.keepError&&Jo(r.errors,ct),!rt.keepDirty&&Jo(r.dirtyFields,ct),!rt.keepTouched&&Jo(r.touchedFields,ct),!rt.keepIsValidating&&Jo(r.validatingFields,ct),!t.shouldUnregister&&!rt.keepDefaultValue&&Jo(i,ct);w.state.next({values:ms(o)}),w.state.next({...r,...rt.keepDirty?{isDirty:H()}:{}}),!rt.keepIsValid&&T()},Ot=({disabled:qe,name:rt})=>{(Au(qe)&&u.mount||qe||a.disabled.has(rt))&&(qe?a.disabled.add(rt):a.disabled.delete(rt))},mt=(qe,rt={})=>{let ct=cn(n,qe);const Ft=Au(rt.disabled)||Au(t.disabled);return Da(n,qe,{...ct||{},_f:{...ct&&ct._f?ct._f:{ref:{name:qe}},name:qe,mount:!0,...rt}}),a.mount.add(qe),ct?Ot({disabled:Au(rt.disabled)?rt.disabled:t.disabled,name:qe}):D(qe,!0,rt.value),{...Ft?{disabled:rt.disabled||t.disabled}:{},...t.progressive?{required:!!rt.required,min:Xy(rt.min),max:Xy(rt.max),minLength:Xy(rt.minLength),maxLength:Xy(rt.maxLength),pattern:Xy(rt.pattern)}:{},name:qe,onChange:Ce,onBlur:Ce,ref:Yt=>{if(Yt){mt(qe,rt),ct=cn(n,qe);const Wt=Ro(Yt.value)&&Yt.querySelectorAll&&Yt.querySelectorAll("input,select,textarea")[0]||Yt,ur=yEe(Wt),br=ct._f.refs||[];if(ur?br.find(xr=>xr===Wt):Wt===ct._f.ref)return;Da(n,qe,{_f:{...ct._f,...ur?{refs:[...br.filter(fA),Wt,...Array.isArray(cn(i,qe))?[{}]:[]],ref:{type:Wt.type,name:qe}}:{ref:Wt}}}),D(qe,!1,void 0,Wt)}else ct=cn(n,qe,{}),ct._f&&(ct._f.mount=!1),(t.shouldUnregister||rt.shouldUnregister)&&!(dH(a.array,qe)&&u.action)&&a.unMount.add(qe)}}},nt=()=>t.shouldFocusError&&Mv(n,pe,a.mount),Nt=qe=>{Au(qe)&&(w.state.next({disabled:qe}),Mv(n,(rt,ct)=>{const Ft=cn(n,ct);Ft&&(rt.disabled=Ft._f.disabled||qe,Array.isArray(Ft._f.refs)&&Ft._f.refs.forEach(Yt=>{Yt.disabled=Ft._f.disabled||qe}))},0,!1))},kt=(qe,rt)=>async ct=>{let Ft;ct&&(ct.preventDefault&&ct.preventDefault(),ct.persist&&ct.persist());let Yt=ms(o);if(w.state.next({isSubmitting:!0}),t.resolver){const{errors:Wt,values:ur}=await Z();r.errors=Wt,Yt=ms(ur)}else await X(n);if(a.disabled.size)for(const Wt of a.disabled)Jo(Yt,Wt);if(Jo(r.errors,"root"),Xl(r.errors)){w.state.next({errors:{}});try{await qe(Yt,ct)}catch(Wt){Ft=Wt}}else rt&&await rt({...r.errors},ct),nt(),setTimeout(nt);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Xl(r.errors)&&!Ft,submitCount:r.submitCount+1,errors:r.errors}),Ft)throw Ft},It=(qe,rt={})=>{cn(n,qe)&&(Ro(rt.defaultValue)?me(qe,ms(cn(i,qe))):(me(qe,rt.defaultValue),Da(i,qe,ms(rt.defaultValue))),rt.keepTouched||Jo(r.touchedFields,qe),rt.keepDirty||(Jo(r.dirtyFields,qe),r.isDirty=rt.defaultValue?H(qe,ms(cn(i,qe))):H()),rt.keepError||(Jo(r.errors,qe),m.isValid&&T()),w.state.next({...r}))},gt=(qe,rt={})=>{const ct=qe?ms(qe):i,Ft=ms(ct),Yt=Xl(qe),Wt=Yt?i:Ft;if(rt.keepDefaultValues||(i=ct),!rt.keepValues){if(rt.keepDirtyValues){const ur=new Set([...a.mount,...Object.keys(Ky(i,o))]);for(const br of Array.from(ur))cn(r.dirtyFields,br)?Da(Wt,br,cn(o,br)):me(br,cn(Wt,br))}else{if(fR&&Ro(qe))for(const ur of a.mount){const br=cn(n,ur);if(br&&br._f){const xr=Array.isArray(br._f.refs)?br._f.refs[0]:br._f.ref;if(M1(xr)){const Rr=xr.closest("form");if(Rr){Rr.reset();break}}}}if(rt.keepFieldsRef)for(const ur of a.mount)me(ur,cn(Wt,ur));else n={}}o=t.shouldUnregister?rt.keepDefaultValues?ms(i):{}:ms(Wt),w.array.next({values:{...Wt}}),w.state.next({values:{...Wt}})}a={mount:rt.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!m.isValid||!!rt.keepIsValid||!!rt.keepDirtyValues,u.watch=!!t.shouldUnregister,w.state.next({submitCount:rt.keepSubmitCount?r.submitCount:0,isDirty:Yt?!1:rt.keepDirty?r.isDirty:!!(rt.keepDefaultValues&&!ah(qe,i)),isSubmitted:rt.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Yt?{}:rt.keepDirtyValues?rt.keepDefaultValues&&o?Ky(i,o):r.dirtyFields:rt.keepDefaultValues&&qe?Ky(i,qe):rt.keepDirty?r.dirtyFields:{},touchedFields:rt.keepTouched?r.touchedFields:{},errors:rt.keepErrors?r.errors:{},isSubmitSuccessful:rt.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Le=(qe,rt)=>gt(Cc(qe)?qe(o):qe,rt),pr=(qe,rt={})=>{const ct=cn(n,qe),Ft=ct&&ct._f;if(Ft){const Yt=Ft.refs?Ft.refs[0]:Ft.ref;Yt.focus&&(Yt.focus(),rt.shouldSelect&&Cc(Yt.select)&&Yt.select())}},hr=qe=>{r={...r,...qe}},Qt={control:{register:mt,unregister:ht,getFieldState:Ke,handleSubmit:kt,setError:_e,_subscribe:ke,_runSchema:Z,_focusError:nt,_getWatch:G,_getDirty:H,_setValid:T,_setFieldArray:k,_setDisabledField:Ot,_setErrors:F,_getFieldArray:ae,_reset:gt,_resetDefaultValues:()=>Cc(t.defaultValues)&&t.defaultValues().then(qe=>{Le(qe,t.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:le,_disableForm:Nt,_subjects:w,_proxyFormState:m,get _fields(){return n},get _formValues(){return o},get _state(){return u},set _state(qe){u=qe},get _defaultValues(){return i},get _names(){return a},set _names(qe){a=qe},get _formState(){return r},get _options(){return t},set _options(qe){t={...t,...qe}}},subscribe:$e,trigger:Ee,register:mt,handleSubmit:kt,watch:Pe,setValue:me,getValues:Fe,reset:Le,resetField:It,clearErrors:fe,unregister:ht,setError:_e,setFocus:pr,getFieldState:Ke};return{...Qt,formControl:Qt}}function MEe(e={}){const t=je.useRef(void 0),r=je.useRef(void 0),[n,i]=je.useState({isDirty:!1,isValidating:!1,isLoading:Cc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Cc(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Cc(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...a}=IEe(e);t.current={...a,formState:n}}const o=t.current.control;return o._options=e,mR(()=>{const u=o._subscribe({formState:o._proxyFormState,callback:()=>i({...o._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),o._formState.isReady=!0,u},[o]),je.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),je.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),je.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),je.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),je.useEffect(()=>{if(o._proxyFormState.isDirty){const u=o._getDirty();u!==n.isDirty&&o._subjects.state.next({isDirty:u})}},[o,n.isDirty]),je.useEffect(()=>{e.values&&!ah(e.values,r.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),r.current=e.values,i(u=>({...u}))):o._resetDefaultValues()},[o,e.values]),je.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=pH(n,o),t.current}var wH=I.createContext(void 0),Jj=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},REe=function(e){var t=e.children,r=I.useRef({}),n=I.useRef({}),i=I.useMemo(function(){return{subscribe:function(o,u){return n.current[o]||(n.current[o]=[]),n.current[o].push(u),function(){n.current[o]=n.current[o].filter(function(a){return a!==u})}},getGroupFields:function(o){return r.current[o]||[]},registerGroup:function(o){r.current[o]=r.current[o]||[]},unregisterGroup:function(o){delete r[o]},registerField:function(o,u){u!=null&&((r.current[u]||[]).includes(o)||(r.current[u]=Jj(Jj([],r.current[u]||[],!0),[o],!1),n.current[u]&&n.current[u].forEach(function(a){return a()})))},unregisterField:function(o,u){if(u!=null)if(!r.current[u])console.warn("Invalid form group ".concat(u));else{var a=new Set(r.current[u]);a.delete(o),r.current[u]=Array.from(a),n.current[u]&&n.current[u].forEach(function(p){return p()})}}}},[]);return I.createElement(wH.Provider,{value:i},t)},OEe=function(e,t,r){var n=Di(),i=x2(r?{control:r}:void 0),o=i.isSubmitSuccessful,u=i.dirtyFields,a=Object.keys(u).length>0,p=I.useState(!1),h=p[0],m=p[1],v=!e||!a||o,w=Twe(function(x){var P=x.currentLocation,T=x.nextLocation;if(v)return!1;var R=t||P.pathname,k=T.pathname.startsWith(R),N=T.pathname.startsWith("".concat(R,"/show")),F=k&&!N;return!F});I.useEffect(function(){if(w.state==="blocked"){if(v){w.proceed();return}m(!0)}},[w.state]),I.useEffect(function(){if(h){var x=window.confirm(n("ra.message.unsaved_changes"));x?w.proceed&&w.proceed():w.reset&&w.reset()}m(!1)},[h,n]),I.useEffect(function(){var x=function(P){P.preventDefault(),P.returnValue=!0};if(!v)return window.addEventListener("beforeunload",x),function(){window.removeEventListener("beforeunload",x)}},[v])},kEe=function(e){var t=e.enable,r=t===void 0?!0:t,n=e.formRootPathName,i=e.formControl;return OEe(r,n,i),null};function LEe(e,t){var r=ZG({},DEe(e,t),t);return r}function DEe(e,t){return typeof e=="object"?e:typeof e=="function"?e(t):{}}var Bh=function(){return Bh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Bh.apply(this,arguments)},NEe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},FEe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},BEe=function(e){return function(t){return NEe(void 0,void 0,void 0,function(){var r,n;return FEe(this,function(i){switch(i.label){case 0:return[4,e(t)];case 1:return r=i.sent(),!r||k1(r)?[2,{values:t,errors:{}}]:(n=qT(r),!n||k1(n)?[2,{values:t,errors:{}}]:[2,{values:{},errors:n}])}})})}},qT=function(e){return Object.keys(e).reduce(function(t,r){var n,i,o;if(Array.isArray(e[r])){var u=!1,a=e[r].map(function(p){return k1(p)||(u=!0),qT(p)});return u?Bh(Bh({},t),(n={},n[r]=a,n)):t}return k1(e[r])?t:typeof e[r]=="object"&&!SH(e[r])?Bh(Bh({},t),(i={},i[r]=qT(e[r]),i)):Bh(Bh({},t),(o={},o[r]=jEe(e[r]),o))},{})},jEe=function(e){return{type:"manual",message:SH(e)?e:{message:e}}},SH=function(e){return Object.keys(e).includes("message")&&Object.keys(e).includes("args")},k1=function(e){return e==null||Object.getOwnPropertyNames(e).length===0},EH=function(e,t){var r=function(n,i){Object.entries(n).forEach(function(o){var u=o[0],a=o[1];if(typeof a=="object"){r(a,"".concat(i).concat(u,"."));return}t("".concat(i).concat(u),{type:"server",message:a.toString()})})};r(e,"")},zEe=function(e,t){t===void 0&&(t=!0);var r=x2(e?{control:e}:void 0),n=r.submitCount,i=r.errors,o=I.useRef(n),u=Mf();I.useEffect(function(){var a,p;if(n>o.current&&t&&(o.current=n,Object.keys(i).length>0)){var h=typeof((p=(a=i.root)===null||a===void 0?void 0:a.serverError)===null||p===void 0?void 0:p.message)=="string"?i.root.serverError.message:void 0;u(h||"ra.message.invalid_form",{type:"error"})}},[i,n,u,t])},$Ee=function(e,t){t===void 0&&(t={});var r={};return Object.keys(e).forEach(function(n){e[n]==null||e[n]===""?t.hasOwnProperty(n)&&(r[n]=null):r[n]=e[n]}),r},CH=function(e){e===void 0&&(e={});var t=e.searchSource,r=e.stateSource,n=gl(),i=I.useState(function(){return Qj(n,{stateSource:r,searchSource:t})}),o=i[0],u=i[1],a=I.useRef(o);return I.useEffect(function(){var p=Qj(n,{stateSource:r,searchSource:t});tR(p,a.current)||(a.current=p,u(p))},[n,r,t]),o},Qj=function(e,t){var r=e.state,n=e.search,i=t===void 0?{}:t,o=i.searchSource,u=o===void 0?"source":o,a=i.stateSource,p=a===void 0?"record":a;if(r&&r[p])return r[p];if(n)try{var h=MSe.parse(n),m=h[u];if(m)return Array.isArray(m)?(console.error("Failed to parse location ".concat(u," parameter '").concat(n,"'. To pre-fill some fields in the Create form, pass a stringified ").concat(u," parameter (e.g. '?").concat(u,`={"title":"foo"}')`)),null):JSON.parse(m)}catch{console.error("Failed to parse location ".concat(u," parameter '").concat(n,"'. To pre-fill some fields in the Create form, pass a stringified ").concat(u," parameter (e.g. '?").concat(u,`={"title":"foo"}')`))}return null},UT=function(){return UT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},UT.apply(this,arguments)},qEe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},UEe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},VEe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},GEe=function(e){var t=e.criteriaMode,r=t===void 0?"firstError":t,n=e.defaultValues;e.formRootPathname;var i=e.resolver,o=e.reValidateMode,u=o===void 0?"onChange":o,a=e.onSubmit,p=e.sanitizeEmptyValues,h=e.validate,m=e.disableInvalidFormNotification,v=VEe(e,["criteriaMode","defaultValues","formRootPathname","resolver","reValidateMode","onSubmit","sanitizeEmptyValues","validate","disableInvalidFormNotification"]),w=uR(),x=yl(e),P=I.useMemo(function(){return LEe(n,x)},[JSON.stringify({defaultValues:typeof n=="function"?"function":n,record:x})]),T=i||(h?BEe(h):void 0),R=MEe(UT({criteriaMode:r,values:P,reValidateMode:u,resolver:T},v)),k=I.useRef(R);zEe(R.control,!m);var N=CH(),F=I.useRef(!1),D=R.reset;I.useEffect(function(){N&&!F.current&&(D(ZG({},P,N),{keepDefaultValues:!0}),F.current=!0)},[P,N,D]);var U=I.useCallback(function(Z,J){return qEe(void 0,void 0,void 0,function(){var X,le;return UEe(this,function(H){switch(H.label){case 0:return le=p?$Ee(Z,x):Z,a?[4,a(le,J)]:[3,2];case 1:X=H.sent(),H.label=2;case 2:return a==null&&w?.save?[4,w.save(le,J)]:[3,4];case 3:X=H.sent(),H.label=4;case 4:return X!=null&&EH(X,k.current.setError),[2]}})})},[a,w,p,x]),B=I.useCallback(function(Z){Z.defaultPrevented||(Z.stopPropagation(),R.handleSubmit(U)(Z))},[R,U]);return{form:R,handleSubmit:U,formHandleSubmit:B}},VT=function(){return VT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},VT.apply(this,arguments)};function AH(e){var t=e.children,r=e.id,n=e.className,i=e.noValidate,o=i===void 0?!1:i,u=e.formRootPathname,a=e.warnWhenUnsavedChanges,p=e.WarnWhenUnsavedChangesComponent,h=p===void 0?kEe:p,m=yl(e),v=su(e),w=GEe(e),x=w.form,P=w.formHandleSubmit,T=I.useMemo(function(){return{getSource:function(N){return N},getLabel:function(N){return"resources.".concat(v,".fields.").concat(N)}}},[v]),R=I.useContext(ld),k=I.useContext(Ng);return I.createElement(uH,{value:m},I.createElement(JCe,{value:T},I.createElement(dEe,VT({},x),I.createElement(REe,null,I.createElement("form",{onSubmit:P,noValidate:o,id:r,className:n},t),a&&R&&k&&I.createElement(h,{enable:!0,formRootPathName:u,formControl:x.control})))))}var HEe=I.createContext(null),WEe=function(){var e=I.useContext(wH);return e},ZEe=function(){var e=I.useContext(HEe);return e},KEe=function(e){var t=e.inputProps,r=e.isArrayInput,n=e.fieldArrayInputControl,i=t.defaultValue,o=t.source,u=t.disabled,a=$H(o),p=yl(t),h=Z0(),m=h.getValues,v=h.resetField,w=h.formState,x=h.reset,P=Pc(p,a),T=Pc(m(),a),R=w.dirtyFields,k=Object.keys(R).includes(a);I.useEffect(function(){if(!(i==null||T!=null||u||P!==void 0||k)){var N=a.split(".").some(function(U){return XEe.test(U)});if(N){var F=a.split(".").slice(0,-1).join("."),D=Pc(m(),F);if(D==null)return}if(r){if(!n)throw new Error("useApplyInputDefaultValues: No fieldArrayInputControl passed in props for array input usage");n.replace(i),x({},{keepValues:!0});return}v(a,{defaultValue:i})}})},XEe=/^\d+$/,YEe=pU();const PH=qs(YEe);var JEe=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,fd=function(e){return typeof e>"u"||e===null||e===""||Array.isArray(e)&&e.length===0};function QEe(e){return e?e.hasOwnProperty("message"):!1}var hd=function(e,t,r,n){return typeof e=="function"?e({args:t,value:r,values:n}):t?{message:e,args:t}:e},dd=function(e){return PH(e,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return JSON.stringify(t)})},eCe=function(e){return typeof e=="function"},tCe=function(e,t){return function(r,n,i){var o=e(r,n,i);return o?typeof o=="string"||QEe(o)?o:o.then(function(u){return u||t(r,n,i)}):t(r,n,i)}},rCe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(Array.isArray(e[0])?e[0]:e).filter(eCe);return r.reduce(tCe,function(){return null})},ez=dd(function(e){return e===void 0&&(e="ra.validation.required"),Object.assign(function(t,r){return fd(t)?hd(e,void 0,t,r):void 0},{isRequired:!0})});dd(function(e,t){return t===void 0&&(t="ra.validation.minLength"),function(r,n){return!fd(r)&&r.length<e?hd(t,{min:e},r,n):void 0}});dd(function(e,t){return t===void 0&&(t="ra.validation.maxLength"),function(r,n){return!fd(r)&&r.length>e?hd(t,{max:e},r,n):void 0}});dd(function(e,t){return t===void 0&&(t="ra.validation.minValue"),function(r,n){return!fd(r)&&r<e?hd(t,{min:e},r,n):void 0}});dd(function(e,t){return t===void 0&&(t="ra.validation.maxValue"),function(r,n){return!fd(r)&&r>e?hd(t,{max:e},r,n):void 0}});dd(function(e){return e===void 0&&(e="ra.validation.number"),function(t,r){return!fd(t)&&isNaN(Number(t))?hd(e,void 0,t,r):void 0}});var nCe=PH(function(e,t){return t===void 0&&(t="ra.validation.regex"),function(r,n){return!fd(r)&&typeof r=="string"&&!e.test(r)?hd(t,{pattern:e},r,n):void 0}},function(e,t){return e.toString()+t});dd(function(e){return e===void 0&&(e="ra.validation.email"),nCe(JEe,e)});var iCe=function(e){var t=e.args;return{message:"ra.validation.oneOf",args:t}};dd(function(e,t){return t===void 0&&(t=iCe),function(r,n){return!fd(r)&&e.indexOf(r)===-1?hd(t,{list:e},r,n):void 0}});var aCe=function(e){return e&&e.isRequired?!0:Array.isArray(e)?!!e.find(function(t){return t.isRequired}):!1},GT=function(){return GT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},GT.apply(this,arguments)},tz="@@react-admin@@",oCe=function(e){var t=e.error,r=t,n=Di();if(typeof t=="string"&&t.startsWith(tz)&&(r=JSON.parse(t.substring(tz.length))),r.message){var i=r,o=i.message,u=i.args;return I.createElement(I.Fragment,null,n(o,GT({_:o},u)))}return I.createElement(I.Fragment,null,n(r,{_:r}))},Gd=function(){return Gd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Gd.apply(this,arguments)},sCe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,[])).next())})},lCe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},uCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},cCe=function(e){return e??""},fCe=function(e){return e===""?null:e},TH=function(e){var t=e.defaultValue,r=e.format,n=r===void 0?cCe:r,i=e.id,o=e.isRequired,u=e.name,a=e.onBlur,p=e.onChange,h=e.parse,m=h===void 0?fCe:h,v=e.source,w=e.validate,x=uCe(e,["defaultValue","format","id","isRequired","name","onBlur","onChange","parse","source","validate"]),P=$H(v),T=u||P,R=ZEe(),k=WEe(),N=yl(),F=wo(m),D=I.useId();I.useEffect(function(){if(!(!k||R==null))return k.registerField(P,R),function(){k.unregisterField(P,R)}},[k,R,P]);var U=Array.isArray(w)?rCe(w):w,B=mEe(Gd({name:T,defaultValue:Pc(N,P,t),rules:{validate:function(ae,se){return sCe(void 0,void 0,void 0,function(){var ue;return lCe(this,function(me){switch(me.label){case 0:return U?[4,U(ae,se,Gd(Gd({},e),{finalSource:P}))]:[2,!0];case 1:return ue=me.sent(),ue?[2,"@@react-admin@@".concat(JSON.stringify(ue))]:[2,!0]}})})}}},x)),Z=B.field,J=B.fieldState,X=B.formState;KEe({inputProps:e});var le=wo(function(){for(var ae=[],se=0;se<arguments.length;se++)ae[se]=arguments[se];Z.onBlur(),a&&a.apply(void 0,ae)}),H=wo(function(){for(var ae,se,ue,me,Ce,pe=[],Ee=0;Ee<arguments.length;Ee++)pe[Ee]=arguments[Ee];var Fe=e.type==="checkbox"&&((se=(ae=pe[0])===null||ae===void 0?void 0:ae.target)===null||se===void 0?void 0:se.value)==="on"?pe[0].target.checked:(Ce=(me=(ue=pe[0])===null||ue===void 0?void 0:ue.target)===null||me===void 0?void 0:me.value)!==null&&Ce!==void 0?Ce:pe[0];Z.onChange(F?F(Fe):Fe),p&&p.apply(void 0,pe)}),G=Gd(Gd({},Z),{value:n?n(Z.value):Z.value,onBlur:le,onChange:H});return{id:i||D,field:G,fieldState:J,formState:X,isRequired:o||aCe(w)}},hCe=function(e){var t=e.children,r=e.value;return r?I.createElement(JG.Provider,{value:r},t):t},dCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},pCe=function(e){e.afterSubmit,e.allowNull,e.alwaysOn,e.beforeSubmit,e.component,e.data,e.defaultValue,e.error,e.format,e.formatOnBlur,e.initializeForm,e.input,e.isEqual,e.isRequired,e.label,e.limitChoicesToValue,e.locale,e.meta,e.multiple,e.name,e.options,e.optionText,e.optionValue,e.parse,e.record,e.ref,e.refetch,e.render,e.resource,e.setFilter,e.setPagination,e.setSort,e.shouldUnregister,e.source,e.submitError,e.subscription,e.textAlign,e.translate,e.translateChoice,e.validate,e.validateFields,e.value;var t=dCe(e,["afterSubmit","allowNull","alwaysOn","beforeSubmit","component","data","defaultValue","error","format","formatOnBlur","initializeForm","input","isEqual","isRequired","label","limitChoicesToValue","locale","meta","multiple","name","options","optionText","optionValue","parse","record","ref","refetch","render","resource","setFilter","setPagination","setSort","shouldUnregister","source","submitError","subscription","textAlign","translate","translateChoice","validate","validateFields","value"]);return t},HT=function(){return HT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},HT.apply(this,arguments)},mCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},gCe=function(e){e===void 0&&(e={});var t=e.disableAuthentication,r=t===void 0?!1:t,n=e.id,i=e.queryOptions,o=i===void 0?{}:i,u=su(e);if(!u)throw new Error("useShowController requires a non-empty resource prop or context");var a=X0({enabled:!r}).isPending,p=KH({action:"show",resource:u,enabled:!r&&!a}).isPending,h=jg(u),m=Di(),v=Mf(),w=H0(),x=CG().id;if(!x&&!n)throw new Error("useShowController requires an id prop or a route with an /:id? parameter.");var P=n??x,T=o.meta,R=mCe(o,["meta"]),k=aH(u,{id:P,meta:T},HT({enabled:!a&&!p||r,onError:function(){v("ra.notification.item_doesnt_exist",{type:"error"}),w("list",u)},retry:!1},R)),N=k.data,F=k.error,D=k.isLoading,U=k.isFetching,B=k.isPaused,Z=k.isPending,J=k.isPlaceholderData,X=k.refetch;if(N&&N.id&&N.id!=P)throw new Error("useShowController: Fetched record's id attribute (".concat(N.id,") must match the requested 'id' (").concat(P,")"));var le=Bg(),H=h(N),G=m("resources.".concat(u,".page.show"),{id:P,record:N,recordRepresentation:typeof H=="string"?H:"",_:m("ra.page.show",{name:le(u,1),id:P,record:N,recordRepresentation:typeof H=="string"?H:""})});return{defaultTitle:G,error:F,isLoading:D,isFetching:U,isPaused:B,isPending:Z,isPlaceholderData:J,record:N,refetch:X,resource:u}},vR=I.createContext(null);vR.displayName="ShowContext";var yCe=function(e){var t=e.children,r=e.value;return I.createElement(vR.Provider,{value:r},I.createElement(aR,{value:r&&r.record},t))},vCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},bCe=function(e){var t=e.children,r=e.loading,n=e.offline,i=e.render,o=vCe(e,["children","loading","offline","render"]),u=gCe(o),a=ZH({resource:u.resource,action:"show"});if(!i&&!t)throw new Error("<ShowBase> requires either a `render` prop or `children` prop");var p=u.isPaused,h=u.isPending,m=a&&!o.disableAuthentication&&r!==!1&&r!==void 0,v=p&&h&&n!==!1&&n!==void 0;return I.createElement(zH,{value:o.resource},I.createElement(yCe,{value:u},m?r:v?n:i?i(u):t))},_Ce=function(){var e=I.useContext(vR);if(!e)throw new Error("useShowContext must be used inside a ShowContextProvider");return e},IH=I.createContext(function(){}),MH=I.createContext(function(){}),rz=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},xCe=function(e){var t=e.children,r=I.useState([]),n=r[0],i=r[1],o=I.useCallback(function(a){i(function(p){return rz(rz([],p,!0),[a],!1)})},[]),u=I.useCallback(function(){if(n.length!==0){var a=n[0],p=n.slice(1);return i(p),a}},[n]);return I.createElement(MH.Provider,{value:u},I.createElement(IH.Provider,{value:o},t))},RH=function(){return I.useContext(IH)},wCe=function(){return I.useContext(MH)},ba=function(){return ba=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ba.apply(this,arguments)},nz=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},iz=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},az=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},r_=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},SCe=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var n=lR(),i=Tf(),o=RH(),u=t.id,a=t.data,p=t.meta,h=r.mutationMode,m=h===void 0?"pessimistic":h,v=r.getMutateWithMiddlewares,w=az(r,["mutationMode","getMutateWithMiddlewares"]),x=I.useRef(m);I.useEffect(function(){x.current=m},[m]);var P=I.useRef(t);I.useEffect(function(){P.current=t},[t]);var T=I.useRef([]),R=I.useRef(n.update),k=I.useRef(),N=I.useRef(),F=I.useRef(!1),D=function(J){var X=J.resource,le=J.id,H=J.data,G=J.meta,ae=Date.now(),se=x.current==="undoable"?ae+5*1e3:ae,ue=JSON.parse(JSON.stringify(H)),me=function(Ce){if(!Ce)return Ce;var pe=Ce.findIndex(function(Ee){return Ee.id==le});return pe===-1?Ce:r_(r_(r_([],Ce.slice(0,pe),!0),[ba(ba({},Ce[pe]),ue)],!1),Ce.slice(pe+1),!0)};i.setQueryData([X,"getOne",{id:String(le),meta:G}],function(Ce){return ba(ba({},Ce),ue)},{updatedAt:se}),i.setQueriesData({queryKey:[X,"getList"]},function(Ce){return Ce&&Ce.data?ba(ba({},Ce),{data:me(Ce.data)}):Ce},{updatedAt:se}),i.setQueriesData({queryKey:[X,"getInfiniteList"]},function(Ce){return Ce&&Ce.pages?ba(ba({},Ce),{pages:Ce.pages.map(function(pe){return ba(ba({},pe),{data:me(pe.data)})})}):Ce},{updatedAt:se}),i.setQueriesData({queryKey:[X,"getMany"]},function(Ce){return Ce&&Ce.length>0?me(Ce):Ce},{updatedAt:se}),i.setQueriesData({queryKey:[X,"getManyReference"]},function(Ce){return Ce&&Ce.data?{data:me(Ce.data),total:Ce.total}:Ce},{updatedAt:se})},U=aG(ba(ba({mutationKey:[e,"update",t],mutationFn:function(J){var X=J===void 0?{}:J,le=X.resource,H=le===void 0?e:le,G=X.id,ae=G===void 0?P.current.id:G,se=X.data,ue=se===void 0?P.current.data:se,me=X.meta,Ce=me===void 0?P.current.meta:me,pe=X.previousData,Ee=pe===void 0?P.current.previousData:pe;if(!H)throw new Error("useUpdate mutation requires a non-empty resource");if(ae==null)throw new Error("useUpdate mutation requires a non-empty id");if(!ue)throw new Error("useUpdate mutation requires a non-empty data object");return R.current(H,{id:ae,data:ue,previousData:Ee,meta:Ce}).then(function(Fe){var Ke=Fe.data;return Ke})}},w),{onMutate:function(J){return nz(void 0,void 0,void 0,function(){var X;return iz(this,function(le){switch(le.label){case 0:return w.onMutate?[4,w.onMutate(J)]:[3,2];case 1:return X=le.sent()||{},[2,ba({snapshot:T.current},X)];case 2:return[2,{snapshot:T.current}]}})})},onError:function(J,X,le){if(X===void 0&&(X={}),(x.current==="optimistic"||x.current==="undoable")&&le.snapshot.forEach(function(H){var G=H[0],ae=H[1];i.setQueryData(G,ae)}),k.current)return k.current(J,X,le);if(w.onError)return w.onError(J,X,le)},onSuccess:function(J,X,le){if(X===void 0&&(X={}),x.current==="pessimistic"){var H=X.resource,G=H===void 0?e:H,ae=X.id,se=ae===void 0?u:ae,ue=X.meta,me=ue===void 0?p:ue;D({resource:G,id:se,data:J,meta:me}),w.onSuccess&&!F.current&&w.onSuccess(J,X,le)}},onSettled:function(J,X,le,H){if(le===void 0&&(le={}),(x.current==="optimistic"||x.current==="undoable")&&H.snapshot.forEach(function(G){var ae=G[0];i.invalidateQueries({queryKey:ae})}),N.current)return N.current(J,X,le,H);if(w.onSettled)return w.onSettled(J,X,le,H)}})),B=function(){for(var J=[],X=0;X<arguments.length;X++)J[X]=arguments[X];return nz(void 0,r_([],J,!0),void 0,function(le,H,G){var ae,se,ue,me,Ce,pe,Ee,Fe,Ke,fe,_e,Pe,ke,$e,ht;return le===void 0&&(le=e),H===void 0&&(H={}),G===void 0&&(G={}),iz(this,function(Ot){switch(Ot.label){case 0:return ae=G.mutationMode,se=G.returnPromise,ue=se===void 0?w.returnPromise:se,me=G.onError,Ce=G.onSettled,pe=G.onSuccess,Ee=az(G,["mutationMode","returnPromise","onError","onSettled","onSuccess"]),v?R.current=v(n.update.bind(n)):R.current=n.update,F.current=!!pe,k.current=me,N.current=Ce,P.current=t,ae&&(x.current=ae),ue&&x.current!=="pessimistic"&&console.warn("The returnPromise parameter can only be used if the mutationMode is set to pessimistic"),x.current==="pessimistic"?ue?[2,U.mutateAsync(ba({resource:le},H),ba({onSuccess:pe},Ee))]:[2,U.mutate(ba({resource:le},H),ba({onSuccess:pe},Ee))]:(Fe=H.id,Ke=Fe===void 0?u:Fe,fe=H.data,_e=fe===void 0?a:fe,Pe=H.meta,ke=Pe===void 0?p:Pe,$e=i.getQueryData([le,"getOne",{id:String(Ke),meta:ke}]),ht=[[le,"getOne",{id:String(Ke),meta:ke}],[le,"getList"],[le,"getInfiniteList"],[le,"getMany"],[le,"getManyReference"]],T.current=ht.reduce(function(mt,nt){return mt.concat(i.getQueriesData({queryKey:nt}))},[]),[4,Promise.all(T.current.map(function(mt){var nt=mt[0];return i.cancelQueries({queryKey:nt})}))]);case 1:return Ot.sent(),D({resource:le,id:Ke,data:_e,meta:ke}),setTimeout(function(){pe?pe(ba(ba({},$e),_e),ba({resource:le},H),{snapshot:T.current}):w.onSuccess&&!F.current&&w.onSuccess(ba(ba({},$e),_e),ba({resource:le},H),{snapshot:T.current})},0),x.current==="optimistic"?[2,U.mutate(ba({resource:le},H))]:(o(function(mt){var nt=mt.isUndo;nt?T.current.forEach(function(Nt){var kt=Nt[0],It=Nt[1];i.setQueryData(kt,It)}):U.mutate(ba({resource:le},H))}),[2])}})})},Z=I.useMemo(function(){return ba({isLoading:U.isPending},U)},[U]);return[wo(B),Z]},Ml=function(){return Ml=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ml.apply(this,arguments)},oz=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},sz=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},lz=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},hA=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},ECe=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r={});var n=lR(),i=Tf(),o=RH(),u=t.id,a=t.previousData,p=r.mutationMode,h=p===void 0?"pessimistic":p,m=lz(r,["mutationMode"]),v=I.useRef(h);I.useEffect(function(){v.current=h},[h]);var w=I.useRef(t);I.useEffect(function(){w.current=t},[t]);var x=I.useRef([]),P=I.useRef(!1),T=I.useRef(!1),R=I.useRef(!1),k=function(U){var B=U.resource,Z=U.id,J=Date.now(),X=v.current==="undoable"?J+5*1e3:J,le=function(H){if(!H)return H;var G=H.findIndex(function(ae){return ae.id==Z});return G===-1?H:hA(hA([],H.slice(0,G),!0),H.slice(G+1),!0)};i.setQueriesData({queryKey:[B,"getList"]},function(H){if(!H||!H.data)return H;var G=le(H.data),ae=G.length<H.data.length;return ae?{data:G,total:H.total?H.total-1:void 0,pageInfo:H.pageInfo}:H},{updatedAt:X}),i.setQueriesData({queryKey:[B,"getInfiniteList"]},function(H){return!H||!H.pages?H:Ml(Ml({},H),{pages:H.pages.map(function(G){var ae=le(G.data),se=ae.length<G.data.length;return se?Ml(Ml({},G),{data:ae,total:G.total?G.total-1:void 0,pageInfo:G.pageInfo}):G})})},{updatedAt:X}),i.setQueriesData({queryKey:[B,"getMany"]},function(H){return H&&H.length>0?le(H):H},{updatedAt:X}),i.setQueriesData({queryKey:[B,"getManyReference"]},function(H){if(!H||!H.data)return H;var G=le(H.data),ae=G.length<H.data.length;return ae?{data:G,total:H.total-1}:H},{updatedAt:X})},N=aG(Ml(Ml({mutationKey:[e,"delete",t],mutationFn:function(U){var B=U===void 0?{}:U,Z=B.resource,J=Z===void 0?e:Z,X=B.id,le=X===void 0?w.current.id:X,H=B.previousData,G=H===void 0?w.current.previousData:H,ae=B.meta,se=ae===void 0?w.current.meta:ae;if(!J)throw new Error("useDelete mutation requires a non-empty resource");if(le==null)throw new Error("useDelete mutation requires a non-empty id");return n.delete(J,{id:le,previousData:G,meta:se}).then(function(ue){var me=ue.data;return me})}},m),{onMutate:function(U){return oz(void 0,void 0,void 0,function(){var B;return sz(this,function(Z){switch(Z.label){case 0:return m.onMutate?[4,m.onMutate(U)]:[3,2];case 1:return B=Z.sent()||{},[2,Ml({snapshot:x.current},B)];case 2:return[2,{snapshot:x.current}]}})})},onError:function(U,B,Z){if(B===void 0&&(B={}),(v.current==="optimistic"||v.current==="undoable")&&Z.snapshot.forEach(function(J){var X=J[0],le=J[1];i.setQueryData(X,le)}),m.onError&&!P.current)return m.onError(U,B,Z)},onSuccess:function(U,B,Z){if(B===void 0&&(B={}),v.current==="pessimistic"){var J=B.resource,X=J===void 0?e:J,le=B.id,H=le===void 0?u:le;k({resource:X,id:H}),m.onSuccess&&!T.current&&m.onSuccess(U,B,Z)}},onSettled:function(U,B,Z,J){if(Z===void 0&&(Z={}),J.snapshot.forEach(function(X){var le=X[0];i.invalidateQueries({queryKey:le})}),m.onSettled&&!R.current)return m.onSettled(U,B,Z,J)}})),F=function(){for(var U=[],B=0;B<arguments.length;B++)U[B]=arguments[B];return oz(void 0,hA([],U,!0),void 0,function(Z,J,X){var le,H,G,ae,se,ue,me;return Z===void 0&&(Z=e),J===void 0&&(J={}),X===void 0&&(X={}),sz(this,function(Ce){switch(Ce.label){case 0:return le=X.mutationMode,H=lz(X,["mutationMode"]),P.current=!!X.onError,T.current=!!X.onSuccess,R.current=!!X.onSettled,w.current=t,le&&(v.current=le),G=J.id,ae=G===void 0?u:G,se=J.previousData,ue=se===void 0?a:se,me=[[Z,"getList"],[Z,"getInfiniteList"],[Z,"getMany"],[Z,"getManyReference"]],x.current=me.reduce(function(pe,Ee){return pe.concat(i.getQueriesData({queryKey:Ee}))},[]),v.current==="pessimistic"?[2,N.mutate(Ml({resource:Z},J),H)]:[4,Promise.all(x.current.map(function(pe){var Ee=pe[0];return i.cancelQueries({queryKey:Ee})}))];case 1:return Ce.sent(),k({resource:Z,id:ae}),setTimeout(function(){X.onSuccess?X.onSuccess(ue,Ml({resource:Z},J),{snapshot:x.current}):m.onSuccess&&m.onSuccess(ue,Ml({resource:Z},J),{snapshot:x.current})},0),v.current==="optimistic"?[2,N.mutate(Ml({resource:Z},J),{onSettled:X.onSettled,onError:X.onError})]:(o(function(pe){var Ee=pe.isUndo;Ee?x.current.forEach(function(Fe){var Ke=Fe[0],fe=Fe[1];i.setQueryData(Ke,fe)}):N.mutate(Ml({resource:Z},J),{onSettled:X.onSettled,onError:X.onError})}),[2])}})})},D=I.useMemo(function(){return Ml({isLoading:N.isPending},N)},[N]);return[wo(F),D]},OH=I.createContext(void 0),CCe=function(e){var t=e.children,r=I.useState(!1),n=r[0],i=r[1],o=I.useState(null),u=o[0],a=o[1],p=I.useState(null),h=p[0],m=p[1],v=I.useState(null),w=v[0],x=v[1],P=I.useState(null),T=P[0],R=P[1],k=I.useState(),N=k[0],F=k[1],D=I.useCallback(function(){return i(!0)},[]),U=I.useCallback(function(){i(!1),a(null)},[]),B=I.useCallback(function(J,X){R(J),F(X)},[]),Z=I.useMemo(function(){return{editor:u,setEditor:a,preferenceKey:h,setPreferenceKey:m,title:T,titleOptions:N,setTitle:B,isEnabled:n,disable:U,enable:D,path:w,setPath:x}},[U,D,u,h,n,w,x,T,N,B]);return I.createElement(OH.Provider,{value:Z},t)},ACe=FG(),PCe=function(e){var t=e.authProvider,r=e.basename,n=e.dataProvider,i=n===void 0?oR:n,o=e.i18nProvider,u=e.store,a=u===void 0?ACe:u,p=e.children,h=e.queryClient;if(!i)throw new Error(`Missing dataProvider prop.
React-admin requires a valid dataProvider function to work.`);var m=I.useMemo(function(){return h||new Hxe},[h]),v=I.useMemo(function(){return t instanceof Function?TAe(t):t},[t]),w=I.useMemo(function(){return i instanceof Function?ESe(i):i},[i]);return I.createElement(qM.Provider,{value:v},I.createElement(sR.Provider,{value:w},I.createElement(L5e,{value:a},I.createElement(CCe,null,I.createElement(Yxe,{client:m},I.createElement(aSe,{basename:r},I.createElement(U5e,{value:o},I.createElement(z5e,null,I.createElement(xCe,null,I.createElement(cSe,null,p))))))))))};const TCe=I.createContext(null),dA={didCatch:!1,error:null};class kH extends I.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=dA}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,n,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:o,reason:"imperative-api"}),this.setState(dA)}}componentDidCatch(t,r){var n,i;(n=(i=this.props).onError)===null||n===void 0||n.call(i,t,r)}componentDidUpdate(t,r){const{didCatch:n}=this.state,{resetKeys:i}=this.props;if(n&&r.error!==null&&ICe(t.resetKeys,i)){var o,u;(o=(u=this.props).onReset)===null||o===void 0||o.call(u,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(dA)}}render(){const{children:t,fallbackRender:r,FallbackComponent:n,fallback:i}=this.props,{didCatch:o,error:u}=this.state;let a=t;if(o){const p={error:u,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")a=r(p);else if(n)a=I.createElement(n,p);else if(i!==void 0)a=i;else throw u}return I.createElement(TCe.Provider,{value:{didCatch:o,error:u,resetErrorBoundary:this.resetErrorBoundary}},a)}}function ICe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}var Hd=function(){return Hd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hd.apply(this,arguments)},MCe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},RCe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},OCe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},kCe={},LH=function(e,t){e===void 0&&(e=kCe),t===void 0&&(t={staleTime:300*1e3});var r=rc(),n=iH(),i=t??{},o=i.onSuccess,u=i.onError,a=i.onSettled,p=OCe(i,["onSuccess","onError","onSettled"]),h=Rp(Hd({queryKey:["auth","getPermissions",e],queryFn:function(P){return MCe(void 0,[P],void 0,function(T){var R,k=T.signal;return RCe(this,function(N){switch(N.label){case 0:return!r||!r.getPermissions?[2,[]]:[4,r.getPermissions(Hd(Hd({},e),{signal:k}))];case 1:return R=N.sent(),[2,R??null]}})})}},p)),m=wo(o??uz),v=wo(a??uz),w=wo(u??(function(P){n(P)}));I.useEffect(function(){h.data===void 0||h.isFetching||m(h.data)},[m,h.data,h.isFetching]),I.useEffect(function(){h.error==null||h.isFetching||w(h.error)},[w,h.error,h.isFetching]),I.useEffect(function(){h.status==="pending"||h.isFetching||v(h.data,h.error)},[v,h.data,h.error,h.status,h.isFetching]);var x=I.useMemo(function(){return Hd(Hd({},h),{permissions:h.data})},[h]);return!r||!r.getPermissions?DH:x},uz=function(){},DH={permissions:void 0,data:void 0,dataUpdatedAt:0,error:null,errorUpdatedAt:0,errorUpdateCount:0,failureCount:0,failureReason:null,fetchStatus:"idle",isError:!1,isInitialLoading:!1,isLoading:!1,isLoadingError:!1,isFetched:!0,isFetchedAfterMount:!0,isFetching:!1,isPaused:!1,isPlaceholderData:!1,isPending:!1,isRefetchError:!1,isRefetching:!1,isStale:!1,isSuccess:!0,status:"success",refetch:function(){return Promise.resolve(DH)}},WT=function(){return WT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},WT.apply(this,arguments)},cz=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},fz=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},LCe=function(e){var t=LH(),r=t.permissions,n=t.isPending,i=DCe(e,r,n),o=i[0],u=i[1];return FCe(o.resources,r),{customRoutesWithLayout:o.customRoutesWithLayout,customRoutesWithoutLayout:o.customRoutesWithoutLayout,status:u,resources:o.resources}},DCe=function(e,t,r){var n=zg(),i=NCe(gv(e)),o=i[0],u=i[1],a=i[2],p=I.useState(function(){return BCe(WT({children:e},o))}),h=p[0],m=p[1];if(!h)throw new Error("Status should be defined");return I.useEffect(function(){var v=function(x){return cz(void 0,void 0,void 0,function(){var P;return fz(this,function(T){try{P=x(t),P?.then?P.then(function(R){a(gv(R)),m("ready")}):(a(gv(P)),m("ready"))}catch(R){console.error(R),n()}return[2]})})},w=function(){return cz(void 0,void 0,void 0,function(){var x,P;return fz(this,function(T){return x=NH(e),P=gv(e),u(P),m(x?"loading":P.resources.length>0||P.customRoutesWithLayout.length>0||P.customRoutesWithoutLayout.length>0?"ready":"empty"),x&&v(x),[2]})})};r||w()},[e,n,r,a,t,u,m]),[o,h]},NCe=function(e){var t=I.useState(e),r=t[0],n=t[1],i=I.useCallback(function(o){n(function(u){return{customRoutesWithLayout:u.customRoutesWithLayout.concat(o.customRoutesWithLayout),customRoutesWithoutLayout:u.customRoutesWithoutLayout.concat(o.customRoutesWithoutLayout),resources:u.resources.concat(o.resources)}})},[]);return[r,n,i]},FCe=function(e,t){var r=eH(),n=r.register,i=r.unregister;I.useEffect(function(){return e.forEach(function(o){if(typeof o.type.registerResource=="function"){var u=o.type.registerResource(o.props,t);n(u)}else throw new Error("When using a custom Resource element, it must have a static registerResource method accepting its props and returning a ResourceDefinition")}),function(){e.forEach(function(o){if(typeof o.type.registerResource=="function"){var u=o.type.registerResource(o.props,t);i(u)}else throw new Error("When using a custom Resource element, it must have a static registerResource method accepting its props and returning a ResourceDefinition")})}},[t,n,e,i])},BCe=function(e){var t=e.children,r=e.resources,n=e.customRoutesWithLayout,i=e.customRoutesWithoutLayout;return NH(t)?"loading":r.length>0||n.length>0||i.length>0?"ready":"empty"},NH=function(e){var t=Array.isArray(e)?e:[e],r=t.filter(function(n){return typeof n=="function"});if(r.length>1)throw new Error("You can only provide one function child to AdminRouter");return r.length===0?null:r[0]},gv=function(e){var t=[],r=[],n=[];return typeof e=="function"?{customRoutesWithLayout:[],customRoutesWithoutLayout:[],resources:[]}:(I.Children.forEach(e,function(i){if(I.isValidElement(i)){if(i.type===I.Fragment){var o=gv(i.props.children);t.push.apply(t,o.customRoutesWithLayout),r.push.apply(r,o.customRoutesWithoutLayout),n.push.apply(n,o.resources)}if(i.type.raName==="CustomRoutes"){var u=i;u.props.noLayout?r.push(u.props.children):t.push(u.props.children)}else i.type.raName==="Resource"&&n.push(i)}}),{customRoutesWithLayout:t,customRoutesWithoutLayout:r,resources:n})},FH=I.createContext(!1),jCe=FH.Provider,zCe=function(){return I.useContext(FH)},L1=function(){return L1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},L1.apply(this,arguments)},hz=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},dz=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},$Ce=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},qCe=function(e){var t=rc(),r=yl(e),n=e.action,i=e.resources,o=$Ce(e,["action","resources"]),u=Rp(L1({queryKey:["auth","canAccess",i,n,r],queryFn:function(h){return hz(void 0,[h],void 0,function(m){var v,w,x=m.signal;return dz(this,function(P){switch(P.label){case 0:return[4,Promise.all(i.map(function(T){return hz(void 0,void 0,void 0,function(){var R;return dz(this,function(k){switch(k.label){case 0:return!t||!t.canAccess?[2,{canAccess:!0,resource:T}]:[4,t.canAccess({resource:T,action:n,record:r,signal:t.supportAbortSignal?x:void 0})];case 1:return R=k.sent(),[2,{canAccess:R,resource:T}]}})})}))];case 1:return v=P.sent(),w=v.reduce(function(T,R){var k=R.resource,N=R.canAccess;return T[k]=N,T},{}),[2,w]}})})}},o)),a=I.useMemo(function(){return L1({canAccess:u.data},u)},[u]),p=I.useMemo(function(){return{canAccess:i.reduce(function(h,m){return h[m]=!0,h},{}),isPending:!1,isError:!1,error:null}},[i]);return!t||!t.canAccess?p:a},UCe=function(){var e=X0().isPending,t=G0(),r=Object.keys(t).filter(function(a){return t[a].hasList}),n=qCe({action:"list",resources:r,enabled:!e}),i=n.canAccess,o=n.isPending,u=r.find(function(a){return i&&i[a]===!0});return{resource:u,isPending:o}},VCe=function(e){var t=e.loading,r=UCe(),n=r.resource,i=r.isPending,o=V0();if(i)return I.createElement(t,null);if(n)return I.createElement(Nwe,{to:o({resource:n,type:"list"}),replace:!0})},GCe=function(e){fSe();var t=LCe(e.children),r=t.customRoutesWithLayout,n=t.customRoutesWithoutLayout,i=t.status,o=t.resources,u=e.layout,a=e.catchAll,p=e.dashboard,h=e.loading,m=e.requireAuth,v=e.ready,w=e.authenticationError,x=w===void 0?pz:w,P=e.accessDenied,T=P===void 0?pz:P,R=wR(void 0,!1,{enabled:m}),k=R.authenticated,N=R.isPending;if(i==="empty"){if(!v)throw new Error("The admin is empty. Please provide an empty component, or pass Resource or CustomRoutes as children.");return I.createElement(v,null)}return i==="loading"||m&&N?I.createElement(mv,null,n,I.createElement(Eu,{path:"*",element:I.createElement("div",{style:{height:"100vh"}},I.createElement(h,null))})):m&&(N||!k)?I.createElement(mv,null,n,I.createElement(Eu,{path:"*",element:I.createElement(OAe,null)})):I.createElement(mv,null,n,I.createElement(Eu,{path:"/*",element:I.createElement(jCe,{value:!!p},I.createElement(u,null,I.createElement(mv,null,r,I.Children.map(o,function(F){return I.createElement(Eu,{key:F.props.name,path:"".concat(F.props.name,"/*"),element:F})}),I.createElement(Eu,{path:"/",element:p?I.createElement(xAe,{authParams:HCe,component:p,loading:h}):I.createElement(VCe,{loading:h})}),I.createElement(Eu,{path:"/authentication-error",element:I.createElement(x,null)}),I.createElement(Eu,{path:"/access-denied",element:I.createElement(T,null)}),I.createElement(Eu,{path:"*",element:I.createElement(a,null)}))))}))},HCe={params:{route:"dashboard"}},pz=function(){return null},BH=I.createContext("React Admin"),WCe=BH.Provider,bR=function(){return I.useContext(BH)},ZCe=function(e){var t=e.children;return I.createElement(I.Fragment,null,t)},KCe=function(e){var t=e.error,r=e.errorInfo,n=e.resetErrorBoundary;return tH(n),I.createElement("div",null,I.createElement("h1",null,"Error"),I.createElement("pre",null,t.message,r?.componentStack))},XCe=function(e){var t=I.useState({}),r=t[0],n=t[1],i=e.authCallbackPage,o=i===void 0?!1:i,u=e.catchAll,a=u===void 0?n_:u,p=e.children,h=e.dashboard,m=e.disableTelemetry,v=m===void 0?!1:m,w=e.error,x=w===void 0?KCe:w,P=e.layout,T=P===void 0?ZCe:P,R=e.loading,k=R===void 0?n_:R,N=e.loginPage,F=N===void 0?!1:N,D=e.ready,U=D===void 0?aAe:D,B=e.requireAuth,Z=B===void 0?!1:B,J=e.title,X=J===void 0?"React Admin":J,le=e.authenticationError,H=le===void 0?n_:le,G=e.accessDenied,ae=G===void 0?n_:G;I.useEffect(function(){if(!(v||typeof window>"u"||typeof window.location>"u"||typeof Image>"u")){var ue=new Image;ue.src="https://react-admin-telemetry.marmelab.com/react-admin-telemetry?domain=".concat(window.location.hostname)}},[v]);var se=function(ue,me){return n(me)};return I.createElement(WCe,{value:X},I.createElement(kH,{onError:se,fallbackRender:function(ue){var me=ue.error,Ce=ue.resetErrorBoundary;return I.createElement("div",{style:{minHeight:"100vh"}},I.createElement(x,{error:me,errorInfo:r,resetErrorBoundary:Ce}))}},I.createElement(mv,null,F!==!1&&F!==!0?I.createElement(Eu,{path:"/login",element:mz(F)}):null,o!==!1&&o!==!0?I.createElement(Eu,{path:"/auth-callback",element:mz(o)}):null,I.createElement(Eu,{path:"/*",element:I.createElement(GCe,{catchAll:a,dashboard:h,layout:T,loading:k,requireAuth:Z,ready:U,authenticationError:H,accessDenied:ae},p)}))))},mz=function(e){return I.isValidElement(e)?e:I.createElement(e)},n_=function(){return null},jH=function(e){return null};jH.raName="CustomRoutes";var zH=function(e){var t=e.value,r=e.children;return t?I.createElement(hCe,{value:t},r):r},_R=I.createContext(void 0),YCe={getSource:function(e){return e},getLabel:function(e){return e}},JCe=_R.Provider,QCe=function(){var e=I.useContext(_R);return e||YCe},eAe=function(){return I.useContext(_R)},tAe=I.createContext(void 0),rAe=function(e){var t=e.children,r=e.value;return I.createElement(tAe.Provider,{value:r},t)},Ts={},gz;function nAe(){if(gz)return Ts;gz=1;/*!
 * inflection
 * Copyright(c) 2011 Ben Lin <ben@dreamerslab.com>
 * MIT Licensed
 *
 * @fileoverview
 * A port of inflection-js to node.js module.
 */Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.pluralize=v,Ts.singularize=w,Ts.inflect=x,Ts.camelize=P,Ts.underscore=T,Ts.humanize=R,Ts.capitalize=k,Ts.dasherize=N,Ts.titleize=F,Ts.demodulize=D,Ts.tableize=U,Ts.classify=B,Ts.foreignKey=Z,Ts.ordinalize=J,Ts.transform=le;const e=["accommodation","adulthood","advertising","advice","aggression","aid","air","aircraft","alcohol","anger","applause","arithmetic","assistance","athletics","bacon","baggage","beef","biology","blood","botany","bread","butter","carbon","cardboard","cash","chalk","chaos","chess","crossroads","countryside","dancing","deer","dignity","dirt","dust","economics","education","electricity","engineering","enjoyment","envy","equipment","ethics","evidence","evolution","fame","fiction","flour","flu","food","fuel","fun","furniture","gallows","garbage","garlic","genetics","gold","golf","gossip","gratitude","grief","guilt","gymnastics","happiness","hardware","harm","hate","hatred","health","heat","help","homework","honesty","honey","hospitality","housework","humour","hunger","hydrogen","ice","importance","inflation","information","innocence","iron","irony","jam","jewelry","judo","karate","knowledge","lack","laughter","lava","leather","leisure","lightning","linguine","linguini","linguistics","literature","litter","livestock","logic","loneliness","luck","luggage","macaroni","machinery","magic","management","mankind","marble","mathematics","mayonnaise","measles","methane","milk","minus","money","mud","music","mumps","nature","news","nitrogen","nonsense","nurture","nutrition","obedience","obesity","oxygen","pasta","patience","physics","poetry","pollution","poverty","pride","psychology","publicity","punctuation","quartz","racism","relaxation","reliability","research","respect","revenge","rice","rubbish","rum","safety","scenery","seafood","seaside","series","shame","sheep","shopping","sleep","smoke","smoking","snow","soap","software","soil","spaghetti","species","steam","stuff","stupidity","sunshine","symmetry","tennis","thirst","thunder","timber","traffic","transportation","trust","underwear","unemployment","unity","validity","veal","vegetation","vegetarianism","vengeance","violence","vitality","warmth","wealth","weather","welfare","wheat","wildlife","wisdom","yoga","zinc","zoology"],t={plural:{men:new RegExp("^(m|wom)en$","gi"),people:new RegExp("(pe)ople$","gi"),children:new RegExp("(child)ren$","gi"),tia:new RegExp("([ti])a$","gi"),analyses:new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),databases:new RegExp("(database)s$","gi"),drives:new RegExp("(drive)s$","gi"),hives:new RegExp("(hi|ti)ves$","gi"),curves:new RegExp("(curve)s$","gi"),lrves:new RegExp("([lr])ves$","gi"),aves:new RegExp("([a])ves$","gi"),foves:new RegExp("([^fo])ves$","gi"),movies:new RegExp("(m)ovies$","gi"),aeiouyies:new RegExp("([^aeiouy]|qu)ies$","gi"),series:new RegExp("(s)eries$","gi"),xes:new RegExp("(x|ch|ss|sh)es$","gi"),mice:new RegExp("([m|l])ice$","gi"),buses:new RegExp("(bus)es$","gi"),oes:new RegExp("(o)es$","gi"),shoes:new RegExp("(shoe)s$","gi"),crises:new RegExp("(cris|ax|test)es$","gi"),octopuses:new RegExp("(octop|vir)uses$","gi"),aliases:new RegExp("(alias|canvas|status|campus)es$","gi"),summonses:new RegExp("^(summons|bonus)es$","gi"),oxen:new RegExp("^(ox)en","gi"),matrices:new RegExp("(matr)ices$","gi"),vertices:new RegExp("(vert|ind)ices$","gi"),feet:new RegExp("^feet$","gi"),teeth:new RegExp("^teeth$","gi"),geese:new RegExp("^geese$","gi"),quizzes:new RegExp("(quiz)zes$","gi"),whereases:new RegExp("^(whereas)es$","gi"),criteria:new RegExp("^(criteri)a$","gi"),genera:new RegExp("^genera$","gi"),ss:new RegExp("ss$","gi"),s:new RegExp("s$","gi")},singular:{man:new RegExp("^(m|wom)an$","gi"),person:new RegExp("(pe)rson$","gi"),child:new RegExp("(child)$","gi"),drive:new RegExp("(drive)$","gi"),ox:new RegExp("^(ox)$","gi"),axis:new RegExp("(ax|test)is$","gi"),octopus:new RegExp("(octop|vir)us$","gi"),alias:new RegExp("(alias|status|canvas|campus)$","gi"),summons:new RegExp("^(summons|bonus)$","gi"),bus:new RegExp("(bu)s$","gi"),buffalo:new RegExp("(buffal|tomat|potat)o$","gi"),tium:new RegExp("([ti])um$","gi"),sis:new RegExp("sis$","gi"),ffe:new RegExp("(?:([^f])fe|([lr])f)$","gi"),focus:new RegExp("^(focus)$","gi"),hive:new RegExp("(hi|ti)ve$","gi"),aeiouyy:new RegExp("([^aeiouy]|qu)y$","gi"),x:new RegExp("(x|ch|ss|sh)$","gi"),matrix:new RegExp("(matr)ix$","gi"),vertex:new RegExp("(vert|ind)ex$","gi"),mouse:new RegExp("([m|l])ouse$","gi"),foot:new RegExp("^foot$","gi"),tooth:new RegExp("^tooth$","gi"),goose:new RegExp("^goose$","gi"),quiz:new RegExp("(quiz)$","gi"),whereas:new RegExp("^(whereas)$","gi"),criterion:new RegExp("^(criteri)on$","gi"),genus:new RegExp("^genus$","gi"),s:new RegExp("s$","gi"),common:new RegExp("$","gi")}},r=[[t.plural.men],[t.plural.people],[t.plural.children],[t.plural.tia],[t.plural.analyses],[t.plural.databases],[t.plural.drives],[t.plural.hives],[t.plural.curves],[t.plural.lrves],[t.plural.foves],[t.plural.aeiouyies],[t.plural.series],[t.plural.movies],[t.plural.xes],[t.plural.mice],[t.plural.buses],[t.plural.oes],[t.plural.shoes],[t.plural.crises],[t.plural.octopuses],[t.plural.aliases],[t.plural.summonses],[t.plural.oxen],[t.plural.matrices],[t.plural.feet],[t.plural.teeth],[t.plural.geese],[t.plural.quizzes],[t.plural.whereases],[t.plural.criteria],[t.plural.genera],[t.singular.man,"$1en"],[t.singular.person,"$1ople"],[t.singular.child,"$1ren"],[t.singular.drive,"$1s"],[t.singular.ox,"$1en"],[t.singular.axis,"$1es"],[t.singular.octopus,"$1uses"],[t.singular.alias,"$1es"],[t.singular.summons,"$1es"],[t.singular.bus,"$1ses"],[t.singular.buffalo,"$1oes"],[t.singular.tium,"$1a"],[t.singular.sis,"ses"],[t.singular.ffe,"$1$2ves"],[t.singular.focus,"$1es"],[t.singular.hive,"$1ves"],[t.singular.aeiouyy,"$1ies"],[t.singular.matrix,"$1ices"],[t.singular.vertex,"$1ices"],[t.singular.x,"$1es"],[t.singular.mouse,"$1ice"],[t.singular.foot,"feet"],[t.singular.tooth,"teeth"],[t.singular.goose,"geese"],[t.singular.quiz,"$1zes"],[t.singular.whereas,"$1es"],[t.singular.criterion,"$1a"],[t.singular.genus,"genera"],[t.singular.s,"s"],[t.singular.common,"s"]],n=[[t.singular.man],[t.singular.person],[t.singular.child],[t.singular.drive],[t.singular.ox],[t.singular.axis],[t.singular.octopus],[t.singular.alias],[t.singular.summons],[t.singular.bus],[t.singular.buffalo],[t.singular.tium],[t.singular.sis],[t.singular.ffe],[t.singular.focus],[t.singular.hive],[t.singular.aeiouyy],[t.singular.x],[t.singular.matrix],[t.singular.mouse],[t.singular.foot],[t.singular.tooth],[t.singular.goose],[t.singular.quiz],[t.singular.whereas],[t.singular.criterion],[t.singular.genus],[t.plural.men,"$1an"],[t.plural.people,"$1rson"],[t.plural.children,"$1"],[t.plural.databases,"$1"],[t.plural.drives,"$1"],[t.plural.genera,"genus"],[t.plural.criteria,"$1on"],[t.plural.tia,"$1um"],[t.plural.analyses,"$1$2sis"],[t.plural.hives,"$1ve"],[t.plural.curves,"$1"],[t.plural.lrves,"$1f"],[t.plural.aves,"$1ve"],[t.plural.foves,"$1fe"],[t.plural.movies,"$1ovie"],[t.plural.aeiouyies,"$1y"],[t.plural.series,"$1eries"],[t.plural.xes,"$1"],[t.plural.mice,"$1ouse"],[t.plural.buses,"$1"],[t.plural.oes,"$1"],[t.plural.shoes,"$1"],[t.plural.crises,"$1is"],[t.plural.octopuses,"$1us"],[t.plural.aliases,"$1"],[t.plural.summonses,"$1"],[t.plural.oxen,"$1"],[t.plural.matrices,"$1ix"],[t.plural.vertices,"$1ex"],[t.plural.feet,"foot"],[t.plural.teeth,"tooth"],[t.plural.geese,"goose"],[t.plural.quizzes,"$1"],[t.plural.whereases,"$1"],[t.plural.ss,"ss"],[t.plural.s,""]],i=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],o=new RegExp("(_ids|_id)$","g"),u=new RegExp("_","g"),a=new RegExp("[ _]","g"),p=new RegExp("([A-Z])","g"),h=new RegExp("^_");function m(H,G,ae,se){if(se)return se;if(ae.includes(H.toLocaleLowerCase()))return H;for(const ue of G)if(H.match(ue[0]))return ue[1]!==void 0?H.replace(ue[0],ue[1]):H;return H}function v(H,G){return m(H,r,e,G)}function w(H,G){return m(H,n,e,G)}function x(H,G,ae,se){return isNaN(G)?H:G===1?m(H,n,e,ae):m(H,r,e,se)}function P(H,G){const ae=H.split("/"),se=ae.length;let ue,me,Ce,pe;for(let Ee=0;Ee<se;Ee++){for(ue=ae[Ee].split("_"),me=0,Ce=ue.length;me<Ce;me++)me!==0&&(ue[me]=ue[me].toLowerCase()),pe=ue[me].charAt(0),pe=G&&Ee===0&&me===0?pe.toLowerCase():pe.toUpperCase(),ue[me]=pe+ue[me].substring(1);ae[Ee]=ue.join("")}return ae.join("::")}function T(H,G){if(G&&H===H.toUpperCase())return H;const ae=H.split("::"),se=ae.length;for(let ue=0;ue<se;ue++)ae[ue]=ae[ue].replace(p,"_$1"),ae[ue]=ae[ue].replace(h,"");return ae.join("/").toLowerCase()}function R(H,G){return H=H.toLowerCase(),H=H.replace(o,""),H=H.replace(u," "),G||(H=k(H)),H}function k(H){return H=H.toLowerCase(),H.substring(0,1).toUpperCase()+H.substring(1)}function N(H){return H.replace(a,"-")}function F(H){H=H.toLowerCase().replace(u," ");const G=H.split(" "),ae=G.length;let se,ue;for(let me=0;me<ae;me++){se=G[me].split("-"),ue=se.length;for(let Ce=0;Ce<ue;Ce++)i.indexOf(se[Ce].toLowerCase())<0&&(se[Ce]=k(se[Ce]));G[me]=se.join("-")}return H=G.join(" "),H=H.substring(0,1).toUpperCase()+H.substring(1),H}function D(H){const G=H.split("::");return G[G.length-1]}function U(H){return H=T(H),H=v(H),H}function B(H){return H=P(H),H=w(H),H}function Z(H,G){return H=D(H),H=T(H)+(G?"":"_")+"id",H}function J(H){const G=H.split(" "),ae=G.length;for(let se=0;se<ae;se++){const ue=parseInt(G[se],10);if(!isNaN(ue)){const me=G[se].substring(G[se].length-2),Ce=G[se].substring(G[se].length-1);let pe="th";me!="11"&&me!="12"&&me!="13"&&(Ce==="1"?pe="st":Ce==="2"?pe="nd":Ce==="3"&&(pe="rd")),G[se]+=pe}}return G.join(" ")}const X={pluralize:v,singularize:w,camelize:P,underscore:T,humanize:R,capitalize:k,dasherize:N,titleize:F,demodulize:D,tableize:U,classify:B,foreignKey:Z,ordinalize:J};function le(H,G){const ae=G.length;for(let se=0;se<ae;se++){const ue=G[se],me=X[ue];me&&(H=me(H))}return H}return Ts}var bp=nAe(),Bg=function(){var e=Di(),t=G0();return function(r,n){n===void 0&&(n=2);var i=t[r],o=e("resources.".concat(r,".name"),{smart_count:n,_:i&&i.options&&i.options.label?e(i.options.label,{smart_count:n,_:i.options.label}):bp.humanize(bp.inflect(r,n))});return o}},K0=function(e){var t=su(e),r=G0(),n=e||{},i=n.hasCreate,o=n.hasEdit,u=n.hasList,a=n.hasShow,p=n.recordRepresentation,h=I.useMemo(function(){return lEe({},{hasCreate:i,hasEdit:o,hasList:u,hasShow:a,recordRepresentation:p},t?r[t]:{})},[t,r,i,o,u,a,p]);return h},jg=function(e){var t=K0({resource:e}).recordRepresentation;return I.useCallback(function(r){return r?typeof t=="function"?t(r):typeof t=="string"?Pc(r,t):I.isValidElement(t)?t:r?.name!=null&&r?.name!==""?r.name:r?.title!=null&&r?.title!==""?r.title:r?.label!=null&&r?.label!==""?r.label:r?.reference!=null&&r?.reference!==""?r.reference:"#".concat(r.id):""},[t])},$H=function(e){var t=QCe();return t.getSource(e)},iAe=function(){var e=Di(),t=su(),r=eAe();return I.useCallback(function(n){var i=n.source,o=n.label,u=n.resource;return o===!1||o===""?null:o&&typeof o!="string"?o:e.apply(void 0,oAe({label:o,defaultLabel:i?r?.getLabel(i):void 0,resource:u,resourceFromContext:t,source:i}))},[t,e,r])},qH=function(e){var t=e.source,r=e.label,n=e.resource,i=e.isRequired,o=iAe();if(r===!0)throw new Error("Label parameter must be a string, a ReactElement or false");return r===!1||r===""?null:r!=null&&typeof r!="string"?r:I.createElement("span",null,o({label:r,resource:n,source:t}),i&&I.createElement("span",{"aria-hidden":"true"}," *"))};qH.displayName="FieldTitle";const UH=I.memo(qH),aAe=(function(){return I.createElement("span",null)}),xR=(function(e,t){});var oAe=function(e){if(!e)return[""];var t=e.label,r=e.defaultLabel,n=e.resource,i=e.resourceFromContext,o=e.source;if(typeof t<"u")return[t,{_:t}];if(typeof o>"u")return[""];var u=sAe(o),a=u.sourceWithoutDigits,p=u.sourceSuffix,h=bp.transform(p.replace(/\./g," "),["underscore","humanize"]);return n?[yz(n,a),{_:h}]:r?[r,{_:h}]:[yz(i||"undefined",a),{_:h}]},yz=function(e,t){return"resources.".concat(e,".fields.").concat(t)},sAe=function(e){var t=e.replace(/\.\d+\./g,"."),r=e.split("."),n;r.forEach(function(o,u){lAe(o)&&(n=u)});var i=n!=null?r.slice(n+1).join("."):e;return{sourceWithoutDigits:t,sourceSuffix:i}},lAe=function(e){for(var t=e.length-1;t>=0;t--){var r=e.charCodeAt(t);if(r<48||r>57)return!1}return!0},uAe=typeof window<"u"?I.useLayoutEffect:I.useEffect,wo=function(e){var t=I.useRef(function(){throw new Error("Cannot call an event handler while rendering.")});return uAe(function(){t.current=e}),I.useCallback(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.current.apply(t,r)},[])},cAe=function(e){var t=e.defaultValue,r=e.source,n=yl(e);return Pc(n,r,t)};function Op(e,t){var r=b2(),n=r.getItem,i=r.setItem,o=r.subscribe,u=I.useState(function(){return n(e,t)}),a=u[0],p=u[1];I.useEffect(function(){var m=n(e,t);tR(a,m)||p(m);var v=o(e,function(w){p(typeof w>"u"?t:w)});return function(){return v()}},[e,o,t,n,a]);var h=wo(function(m,v){var w=typeof m=="function"?m(a):m;i(e,typeof w>"u"?typeof v>"u"?t:v:w)});return[a,h]}var fAe=function(e){var t=b2().removeItem;return I.useCallback(function(r){if(typeof r>"u"&&typeof e>"u")throw new Error("You must provide a key to remove an item from the store");return t(r??e)},[t,e])},hAe=function(e){var t=b2().removeItems;return I.useCallback(function(r){if(typeof r>"u"&&typeof e>"u")throw new Error("You must provide a key to remove an item from the store");return t(r??e)},[t,e])},dAe=function(){var e=b2().reset;return e},zg=function(){var e=rc(),t=Tf(),r=dAe(),n=cd(),i=I.useRef(n),o=gl(),u=I.useRef(o),a=yh(),p=cf("".concat(a,"/").concat(m2.loginUrl));I.useEffect(function(){u.current=o,i.current=n},[o,n]);var h=I.useCallback(function(m,v,w){return m===void 0&&(m={}),v===void 0&&(v=p),w===void 0&&(w=!0),e?e.logout(m).then(function(x){if(x===!1||v===!1){r(),t.clear();return}var P=x||v;if(P?.startsWith("http"))return r(),t.clear(),window.location.href=P,P;var T=P.split("?"),R={pathname:T[0]},k={};return w&&u.current&&u.current.pathname&&(k={state:{nextPathname:u.current.pathname,nextSearch:u.current.search}}),T[1]&&(R.search=T[1]),setTimeout(function(){i.current(R,k),r(),t.clear()},0),x}):(i.current({pathname:p},{state:{nextPathname:u.current&&u.current.pathname}}),r(),t.clear(),Promise.resolve())},[e,r,p,t]);return h},Wd=function(){return Wd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Wd.apply(this,arguments)},pAe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},mAe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},gAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},vz={},wR=function(e,t,r){e===void 0&&(e=vz),t===void 0&&(t=!1),r===void 0&&(r=vz);var n=rc(),i=zg(),o=yh(),u=Mf(),a=r.onSuccess,p=r.onError,h=r.onSettled,m=gAe(r,["onSuccess","onError","onSettled"]),v=Rp(Wd({queryKey:["auth","checkAuth",e],queryFn:function(R){return pAe(void 0,[R],void 0,function(k){var N,F=k.signal;return mAe(this,function(D){switch(D.label){case 0:if(!n)return[2,!0];D.label=1;case 1:return D.trys.push([1,3,,4]),[4,n.checkAuth(Wd(Wd({},e),{signal:F}))];case 2:return D.sent(),[2,!0];case 3:throw N=D.sent(),N??new Error;case 4:return[2]}})})},retry:!1},m)),w=wo(a??bz),x=wo(h??bz),P=wo(p??(function(R){if(t){var k=cf("".concat(o,"/").concat(m2.loginUrl));i({},R&&R.redirectTo!=null?R.redirectTo:k);var N=R&&R.message===!1;!N&&u(yAe(R,"ra.auth.auth_check_error"),{type:"error"})}}));I.useEffect(function(){v.data===void 0||v.isFetching||r.enabled!==!1&&w(v.data)},[w,v.data,v.isFetching,r.enabled]),I.useEffect(function(){v.error==null||v.isFetching||r.enabled!==!1&&P(v.error)},[P,v.error,v.isFetching,r.enabled]),I.useEffect(function(){v.status==="pending"||v.isFetching||r.enabled!==!1&&x(v.data,v.error)},[x,v.data,v.error,v.status,v.isFetching,r.enabled]);var T=I.useMemo(function(){return Wd(Wd({},v),{authenticated:v.error?!1:v.data})},[v]);return n!=null?T:VH},yAe=function(e,t){return typeof e=="string"?e:typeof e>"u"||!e.message?t:e.message},bz=function(){},VH={authenticated:!0,data:!0,dataUpdatedAt:0,error:null,errorUpdatedAt:0,errorUpdateCount:0,failureCount:0,failureReason:null,fetchStatus:"idle",isError:!1,isInitialLoading:!1,isLoading:!1,isLoadingError:!1,isFetched:!0,isFetchedAfterMount:!0,isFetching:!1,isPaused:!1,isPlaceholderData:!1,isPending:!1,isRefetchError:!1,isRefetching:!1,isStale:!1,isSuccess:!0,status:"success",refetch:function(){return Promise.resolve(VH)}},vAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},X0=function(e){e===void 0&&(e={});var t=e.params,r=e.logoutOnFailure,n=r===void 0?!0:r,i=vAe(e,["params","logoutOnFailure"]);return wR(t??bAe,n,i)},bAe={},Rv=function(){return Rv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Rv.apply(this,arguments)},_Ae=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},_z=function(e){return I.Children.count(e)===0},xAe=function(e){var t=e.authParams,r=e.children,n=e.render,i=e.component,o=e.loading,u=o===void 0?null:o;e.staticContext;var a=_Ae(e,["authParams","children","render","component","loading","staticContext"]);xR(n&&r&&!_z(r)||n&&i||i&&r&&!_z(r),"You should only use one of the `component`, `render` and `children` props in <WithPermissions>");var p=X0(t).isPending,h=LH(t,{enabled:!p}),m=h.permissions,v=h.isPending;if(p||v)return u?I.createElement(u,null):null;if(i)return I.createElement(i,Rv({permissions:m},a));if(n)return n(Rv({permissions:m},a));if(r)return r(Rv({permissions:m},a))},wAe=function(){var e=rc(),t=Tf(),r=gl(),n=r.state,i=cd(),o=yh(),u=$G().resetNotifications,a=n&&n.nextPathname,p=n&&n.nextSearch,h=cf("".concat(o,"/").concat(m2.afterLoginUrl)),m=I.useCallback(function(v,w){return v===void 0&&(v={}),e?e.login(v).then(function(x){if(u(),t.invalidateQueries({queryKey:["auth","getPermissions"]}),x&&x.hasOwnProperty("redirectTo"))x&&i(x.redirectTo);else{var P=w||a+p||h;i(P)}return x}):(u(),i(h),Promise.resolve())},[e,t,i,a,p,u,h]);return m},SAe="AUTH_LOGIN",EAe="AUTH_CHECK",CAe="AUTH_ERROR",AAe="AUTH_LOGOUT",PAe="AUTH_GET_PERMISSIONS";const TAe=(function(e){var t=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.apply(null,r)};return t.login=function(r){return e(SAe,r)},t.logout=function(r){return e(AAe,r)},t.checkAuth=function(r){return e(EAe,r)},t.checkError=function(r){return e(CAe,r)},t.getPermissions=function(r){return e(PAe,r)},t});var Qf=function(){return Qf=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Qf.apply(this,arguments)},IAe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},MAe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},RAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Y0=function(e){var t=rc(),r=su(e);if(!r)throw new Error("useCanAccess must be used inside a <Resource> component or provide a resource prop");var n=yl(e);e.record;var i=RAe(e,["record"]),o=!!t?.canAccess,u=Rp(Qf({queryKey:["auth","canAccess",Qf(Qf({},i),{recordId:n?.id,resource:r})],queryFn:function(p){return IAe(void 0,[p],void 0,function(h){var m=h.signal;return MAe(this,function(v){return!t||!t.canAccess?[2,!0]:[2,t.canAccess(Qf(Qf({},e),{record:n,resource:r,signal:t.supportAbortSignal?m:void 0}))]})})},enabled:o},e)),a=I.useMemo(function(){return Qf(Qf({},u),{canAccess:u.data})},[u]);return o?a:GH},GH={canAccess:!0,data:!0,dataUpdatedAt:0,error:null,errorUpdatedAt:0,errorUpdateCount:0,failureCount:0,failureReason:null,fetchStatus:"idle",isError:!1,isInitialLoading:!1,isLoading:!1,isLoadingError:!1,isFetched:!0,isFetchedAfterMount:!0,isFetching:!1,isPaused:!1,isPlaceholderData:!1,isPending:!1,isRefetchError:!1,isRefetching:!1,isStale:!1,isSuccess:!0,status:"success",refetch:function(){return Promise.resolve(GH)}},OAe=function(){var e=zg();return I.useEffect(function(){e()},[e]),null},HH=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},WH=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},kAe=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},LAe=function(){var e=rc(),t=Mf(),r=zg(),n=yh(),i=cf("".concat(n,"/").concat(m2.loginUrl)),o=I.useCallback(function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];return HH(void 0,kAe([],u,!0),void 0,function(p,h,m){var v,w;return p===void 0&&(p={}),h===void 0&&(h=!0),m===void 0&&(m=i),WH(this,function(x){switch(x.label){case 0:if(!e)return[2,DAe()];x.label=1;case 1:return x.trys.push([1,3,,4]),[4,e.checkAuth(p)];case 2:return[2,x.sent()];case 3:throw v=x.sent(),h&&(r({},v&&v.redirectTo!=null?v.redirectTo:m),w=v&&v.message===!1,!w&&t(NAe(v,"ra.auth.auth_check_error"),{type:"error"})),v;case 4:return[2]}})})},[e,r,t,i]);return o},DAe=function(){return HH(void 0,void 0,void 0,function(){return WH(this,function(e){return[2,void 0]})})},NAe=function(e,t){return typeof e=="string"?e:typeof e>"u"||!e.message?t:e.message},Ov=function(){return Ov=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ov.apply(this,arguments)},FAe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},BAe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},jAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},zAe={id:""},$Ae={staleTime:300*1e3},qAe=function(e){e===void 0&&(e=$Ae);var t=rc(),r=e.onSuccess,n=e.onError,i=e.onSettled,o=jAe(e,["onSuccess","onError","onSettled"]),u=Rp(Ov({queryKey:["auth","getIdentity"],queryFn:function(m){return FAe(void 0,[m],void 0,function(v){var w=v.signal;return BAe(this,function(x){return t&&typeof t.getIdentity=="function"?[2,t.getIdentity({signal:w})]:[2,zAe]})})}},o)),a=wo(r??pA),p=wo(n??pA),h=wo(i??pA);return I.useEffect(function(){u.data===void 0||u.isFetching||a(u.data)},[a,u.data,u.isFetching]),I.useEffect(function(){u.error==null||u.isFetching||p(u.error)},[p,u.error,u.isFetching]),I.useEffect(function(){u.status==="pending"||u.isFetching||h(u.data,u.error)},[h,u.data,u.error,u.status,u.isFetching]),I.useMemo(function(){return Ov(Ov({},u),{identity:u.data})},[u])},pA=function(){},ZT=function(){return ZT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ZT.apply(this,arguments)},UAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},VAe=function(e){var t=rc(),r=H0(),n=gl(),i=n.state,o=i&&i.nextPathname,u=i&&i.nextSearch,a=o?o+u:"/",p={},h=p.onSuccess,m=p.onError,v=p.onSettled,w=UAe(p,["onSuccess","onError","onSettled"]),x,P=Rp(ZT({queryKey:["auth","handleCallback"],queryFn:function(N){var F=N.signal;return x||(x=t&&typeof t.handleCallback=="function"?t.handleCallback({signal:F}).then(function(D){return D??null}):Promise.resolve()),x},retry:!1},w)),T=wo(h??(function(N){var F,D=localStorage.getItem(GAe),U=(F=N?.redirectTo)!==null&&F!==void 0?F:D;U!==!1&&r(U??a)})),R=wo(m??xz),k=wo(v??xz);return I.useEffect(function(){P.error==null||P.isFetching||R(P.error)},[R,P.error,P.isFetching]),I.useEffect(function(){P.data===void 0||P.isFetching||T(P.data)},[T,P.data,P.isFetching]),I.useEffect(function(){P.status==="pending"||P.isFetching||k(P.data,P.error)},[k,P.data,P.error,P.status,P.isFetching]),P},GAe="@react-admin/nextPathname",xz=function(){},HAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},ZH=function(e){var t=e.action,r=HAe(e,["action"]),n=Tf(),i=rc(),o=su(r);if(!i)return!1;var u=n.getQueryState(["auth","checkAuth",{}]),a=n.getQueryState(["auth","canAccess",{action:t,resource:o}]);return!!(u?.status==="pending"||i.canAccess&&a?.status==="pending")},WAe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},KH=function(e){var t=Y0(e),r=t.canAccess;t.data;var n=t.error,i=WAe(t,["canAccess","data","error"]),o=cd(),u=yh();return I.useEffect(function(){i.isPending||r===!1&&o("".concat(u,"/access-denied"))},[u,r,o,i.isPending]),I.useEffect(function(){n&&o("".concat(u,"/authentication-error"))},[u,o,n]),i},XH=I.createContext(""),YH=function(e){var t=e.value,r=t===void 0?"":t,n=e.children;return I.createElement(XH.Provider,{value:r},n)},ZAe=function(){return I.useContext(XH)};function JH(e,t){e===void 0&&(e=""),t===void 0&&(t=void 0);var r=ZAe();if(!r)throw new Error("usePreference cannot be used outside of a Configurable component. Did you forget to wrap your component with <Configurable>? If you don't want to use Configurable, you can use the useStore hook instead.");return Op(r&&e?"".concat(r,".").concat(e):r??e,t)}var SR=function(){var e=I.useContext(OH);if(!e)throw new Error("usePreferencesEditor must be used within a PreferencesEditorContextProvider");return e},KAe=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},XAe=function(e,t){var r=JH(e,t),n=r[0],i=r[1],o=I.useState(n),u=o[0],a=o[1];I.useEffect(function(){a(n||t)},[n,t]);var p=function(v){a(v.target.value===""?t:v.target.value)},h=function(){i(u)},m=function(v){var w;if(v.key==="Enter"){i(u);var x=v.target.form;if(x){var P=KAe([],x,!0).indexOf(v.target);(w=x.elements[P+1])===null||w===void 0||w.focus()}v.preventDefault()}};return{value:u,onChange:p,onBlur:h,onKeyDown:m}},YAe=function(e,t){var r=SR();if(!r)throw new Error("useSetInspectorTitle cannot be called outside of a PreferencesEditorContext");var n=r.setTitle;I.useEffect(function(){n(e,t)},[e,JSON.stringify(t),n])};const ER=Ci(ze.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}));var kv=function(){return kv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},kv.apply(this,arguments)},QH=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},$g=function(e){var t=pi({props:e,name:eW}),r=t.alignIcon,n=r===void 0?"left":r,i=t.children,o=t.className,u=t.disabled,a=t.label,p=t.color,h=p===void 0?"primary":p,m=t.size,v=m===void 0?"small":m,w=t.to,x=QH(t,["alignIcon","children","className","disabled","label","color","size","to"]),P=Di(),T=a;typeof a=="string"&&(T=P(a,{_:a}));var R=QAe(w),k=Du(function(N){return N.breakpoints.down("sm")});return k?a&&!u?I.createElement(Sg,{title:T},I.createElement(Bo,kv({"aria-label":typeof T=="string"?T:void 0,className:o,color:h,size:"large"},R,x),i)):I.createElement(Bo,kv({className:o,color:h,disabled:u,size:"large"},R,x),i):I.createElement(JAe,kv({className:o,color:h,size:v,"aria-label":typeof T=="string"?T:void 0,disabled:u,startIcon:n==="left"&&i?i:void 0,endIcon:n==="right"&&i?i:void 0},R,x),T)},eW="RaButton",JAe=nr(Mc,{name:eW,overridesResolver:function(e,t){return t.root}})({"&.MuiButton-sizeSmall":{lineHeight:1.5}}),QAe=function(e){if(e!=null){if(typeof e=="string")return{to:e};var t=e.redirect,r=e.replace,n=e.state,i=QH(e,["redirect","replace","state"]);return{to:i,redirect:t,replace:r,state:n}}};const ePe=Ci(ze.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}));var KT=function(){return KT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},KT.apply(this,arguments)},tPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},rPe=function(e){var t=pi({props:e,name:tW}),r=t.icon,n=r===void 0?iPe:r,i=t.label;t.record,t.resource;var o=t.scrollToTop,u=o===void 0?!0:o,a=tPe(t,["icon","label","record","resource","scrollToTop"]),p=su(t);if(!p)throw new Error("<ShowButton> components should be used inside a <Resource> component or provided the resource prop.");var h=yl(t),m=V0(),v=Y0({action:"show",resource:p,record:h}),w=v.canAccess,x=v.isPending,P=Bg(),T=jg(),R=T(h),k=typeof R=="string"?R:R?.toString(),N=lp({resourceI18nKey:"resources.".concat(p,".action.show"),baseI18nKey:"ra.action.show",options:{name:P(p,1),recordRepresentation:k},userText:i});return!h||!w||x?null:I.createElement(sPe,KT({component:Fg,to:m({type:"show",resource:p,id:h.id}),state:nPe[String(u)],label:I.createElement(I.Fragment,null,N),"aria-label":typeof N=="string"?N:void 0,onClick:aPe},a),n)},nPe={true:{_scrollToTop:!0},false:{}},iPe=I.createElement(ePe,null),aPe=function(e){return e.stopPropagation()},oPe=I.memo(rPe,function(e,t){return e.resource===t.resource&&(e.record&&t.record?e.record.id===t.record.id:e.record==t.record)&&e.label===t.label&&e.disabled===t.disabled}),tW="RaShowButton",sPe=nr($g,{name:tW,overridesResolver:function(e,t){return t.root}})({}),XT=function(){return XT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},XT.apply(this,arguments)},lPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},i_,uPe=function(e){var t=pi({props:e,name:Lv}),r=t.className,n=t.icon,i=n===void 0?fPe:n,o=t.textPrimary,u=o===void 0?"ra.page.access_denied":o,a=t.textSecondary,p=a===void 0?"ra.message.access_denied":a,h=lPe(t,["className","icon","textPrimary","textSecondary"]),m=Di();return I.createElement(cPe,XT({className:Hr(y0.root,r)},h),I.createElement("div",{className:y0.message},i,I.createElement(No,{variant:"h5",sx:{mt:3,color:"text.secondary"}},m(u,{_:u})),I.createElement(No,{variant:"body2"},m(p,{_:p}))))},Lv="RaAccessDenied",y0={root:"".concat(Lv,"-root"),icon:"".concat(Lv,"-icon"),message:"".concat(Lv,"-message")},cPe=nr("div",{name:Lv,overridesResolver:function(e,t){return t.root}})((i_={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},i_["& .".concat(y0.message)]={textAlign:"center",paddingTop:"1em",paddingBottom:"1em",opacity:.5},i_["& .".concat(y0.icon)]={width:"9em",height:"9em"},i_)),fPe=I.createElement(ER,{className:y0.icon}),J0=function(){var e=Du(function(t){return t?.breakpoints.down("sm")},{noSsr:!0});return Op("sidebar.open",!e)},hPe=function(e){var t=pi({props:e,name:D1}),r=Di(),n=t.className,i=J0(),o=i[0],u=i[1];return I.createElement(Sg,{className:n,title:r(o?"ra.action.close_menu":"ra.action.open_menu",{_:"Open/Close menu"}),enterDelay:500},I.createElement(dPe,{color:"inherit",onClick:function(){return u(!o)}},I.createElement(G1e,{classes:{root:o?N1.menuButtonIconOpen:N1.menuButtonIconClosed}})))},D1="RaSidebarToggleButton",N1={menuButtonIconClosed:"".concat(D1,"-menuButtonIconClosed"),menuButtonIconOpen:"".concat(D1,"-menuButtonIconOpen")},dPe=nr(Bo,{name:D1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat(N1.menuButtonIconClosed)]={transition:r.transitions.create(["transform"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),transform:"rotate(0deg)"},t["& .".concat(N1.menuButtonIconOpen)]={transition:r.transitions.create(["transform"],{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),transform:"rotate(180deg)"},t}),YT=function(){return YT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},YT.apply(this,arguments)},pPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},a_,mA,mPe=function(e){var t=pi({props:e,name:Dv}),r=t.className,n=t.onClick,i=t.sx,o=pPe(t,["className","onClick","sx"]),u=FSe(),a=wf();return I.createElement(gPe,{className:r,sx:i},I.createElement(R3e,{className:"".concat(ng.loadedIcon," ").concat(u&&ng.loadedLoading),onClick:n}),u&&I.createElement(xg,YT({className:Hr("app-loader",ng.loader),color:"inherit",size:a.spacing(2),thickness:6},o)))},Dv="RaLoadingIndicator",ng={loader:"".concat(Dv,"-loader"),loadedLoading:"".concat(Dv,"-loadedLoading"),loadedIcon:"".concat(Dv,"-loadedIcon")},gPe=nr("div",{name:Dv,overridesResolver:function(e,t){return t.root}})((a_={position:"relative"},a_["& .".concat(ng.loadedIcon)]=(mA={},mA["&.".concat(ng.loadedLoading)]={opacity:0},mA),a_["& .".concat(ng.loader)]={position:"absolute",top:"30%",left:"30%"},a_));const yPe=Ci(ze.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"})),vPe=Ci(ze.jsx("path",{d:"M13 3h-2v10h2zm4.83 2.17-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83"}));var JT=function(){return JT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},JT.apply(this,arguments)},bPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},gA,_Pe=I.forwardRef(function(t,r){var n=pi({props:t,name:CR}),i=n.className,o=n.redirectTo,u=n.icon,a=bPe(n,["className","redirectTo","icon"]),p=wR().authenticated,h=Du(function(x){return x.breakpoints.down("sm")}),m=Di(),v=zg(),w=I.useCallback(function(){return v(null,o,!1)},[o,v]);return p?I.createElement(xPe,JT({className:Hr("logout",i),onClick:w,ref:r,component:h?"span":"li"},a),I.createElement(R0,{className:rW.icon},u||I.createElement(vPe,{fontSize:"small"})),I.createElement($ae,null,m("ra.auth.logout",{_:"Logout"}))):null}),CR="RaLogout",rW={icon:"".concat(CR,"-icon")},xPe=nr(AI,{name:CR,overridesResolver:function(e,t){return t.root}})((gA={},gA["& .".concat(rW.icon)]={},gA)),nW=function(e){var t=pi({props:e,name:F1}),r=I.useState(null),n=r[0],i=r[1],o=Di(),u=qAe(),a=u.isPending,p=u.identity,h=rc(),m=Du(function(B){return B.breakpoints.up("sm")}),v=t.children,w=v===void 0?h?I.createElement(_Pe,null):null:v,x=t.className,P=t.label,T=P===void 0?"ra.auth.user_menu":P,R=t.icon,k=R===void 0?SPe:R,N=function(B){return i(B.currentTarget)},F=I.useCallback(function(){return i(null)},[]),D=I.useMemo(function(){return{onClose:F}},[F]);if(!w)return null;var U=!!n;return I.createElement(wPe,{className:x},m&&!a&&p?.fullName?I.createElement(Mc,{"aria-label":T&&o(T,{_:T}),className:Nv.userButton,color:"inherit",startIcon:p.avatar?I.createElement(UP,{className:Nv.avatar,src:p.avatar,alt:p.fullName}):k,onClick:N,variant:"text"},p.fullName):I.createElement(Sg,{title:T&&o(T,{_:"Profile"})},I.createElement(Bo,{"aria-label":T&&o(T,{_:"Profile"}),"aria-owns":U?"menu-appbar":void 0,"aria-haspopup":!0,color:"inherit",onClick:N},!a&&p?.avatar?I.createElement(UP,{className:Nv.avatar,src:p.avatar,alt:p.fullName}):k)),I.createElement(rAe,{value:D},I.createElement(CI,{id:"menu-appbar",disableScrollLock:!0,anchorEl:n,anchorOrigin:EPe,transformOrigin:CPe,open:U,onClose:F},w)))},F1="RaUserMenu",Nv={userButton:"".concat(F1,"-userButton"),avatar:"".concat(F1,"-avatar")},wPe=nr("div",{name:F1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat(Nv.userButton)]={textTransform:"none",marginInlineStart:r.spacing(.5)},t["& .".concat(Nv.avatar)]={width:r.spacing(3),height:r.spacing(3)},t}),SPe=I.createElement(yPe,null),EPe={vertical:"bottom",horizontal:"right"},CPe={vertical:"top",horizontal:"right"},APe=function(e){var t=e.children,r=e.className,n=nq();return I.createElement(V9,{appear:!1,direction:"down",in:!n,className:r},t)},QT=function(){return QT=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},QT.apply(this,arguments)},PPe=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},TPe=function(e){return I.createElement(No,QT({variant:"h6",color:"inherit",id:"react-admin-title"},e,{sx:PPe([{flex:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}],Array.isArray(e.sx)?e.sx:[e.sx],!0)}))},iW=I.createContext({}),w2=function(e){var t={},r=t.lightTheme,n=t.darkTheme,i=t.defaultTheme,o=I.useContext(iW);return{lightTheme:r||o.lightTheme,darkTheme:n||o.darkTheme,defaultTheme:i??o.defaultTheme}};const IPe=Ci(ze.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"})),MPe=Ci(ze.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}));var aW=function(e){var t=w2().darkTheme,r=Du("(prefers-color-scheme: dark)",{noSsr:!0}),n=Op("theme",e??(r&&t?"dark":"light")),i=n[0],o=n[1];return[t!=null?i:"light",o]},RPe=function(e){var t=e.children,r=w2(),n=r.lightTheme,i=r.darkTheme,o=r.defaultTheme,u=Du("(prefers-color-scheme: dark)",{noSsr:!0}),a=aW(o||(u&&i?"dark":"light"))[0],p=I.useMemo(function(){try{return Jh(a==="dark"?i:n)}catch(h){return console.warn("Failed to reuse custom theme from store",h),Jh()}},[a,n,i]);return I.createElement(g9,{theme:p},t)},oW={typography:{h6:{fontWeight:400}},sidebar:{width:240,closedWidth:50},components:{MuiAutocomplete:{defaultProps:{fullWidth:!0},variants:[{props:{},style:function(e){var t,r=e.theme;return t={},t[r.breakpoints.down("sm")]={width:"100%"},t}}]},MuiTextField:{defaultProps:{variant:"filled",margin:"dense",size:"small",fullWidth:!0},variants:[{props:{},style:function(e){var t,r=e.theme;return t={},t[r.breakpoints.down("sm")]={width:"100%"},t}}]},MuiFormControl:{defaultProps:{variant:"filled",margin:"dense",size:"small",fullWidth:!0}},MuiTableCell:{styleOverrides:{root:{"&.MuiTableCell-paddingCheckbox":{padding:"0 8px 0 8px"}}}},RaSimpleFormIterator:{defaultProps:{fullWidth:!0}},RaTranslatableInputs:{defaultProps:{fullWidth:!0}}}},sW=es(oW,{palette:{background:{default:"#fafafb"},secondary:{light:"#6ec6ff",main:"#2196f3",dark:"#0069c0",contrastText:"#fff"}},components:{MuiFilledInput:{styleOverrides:{root:{backgroundColor:"rgba(0, 0, 0, 0.04)","&$disabled":{backgroundColor:"rgba(0, 0, 0, 0.04)"}}}}}}),OPe=es(oW,{palette:{mode:"dark",primary:{main:"#90caf9"},background:{default:"#313131"}}}),e3=function(){return e3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},e3.apply(this,arguments)},kPe=function(){var e=pi({props:{},name:lW}),t=Di(),r=w2(),n=r.darkTheme,i=r.defaultTheme,o=Du("(prefers-color-scheme: dark)",{noSsr:!0}),u=aW(i||(o&&n?"dark":"light")),a=u[0],p=u[1],h=function(){p(a==="dark"?"light":"dark")},m=t("ra.action.toggle_theme",{_:"Toggle Theme"});return je.createElement(Sg,{title:m,enterDelay:300},je.createElement(LPe,e3({color:"inherit",onClick:h,"aria-label":m},e),a==="dark"?je.createElement(MPe,null):je.createElement(IPe,null)))},lW="RaToggleThemeButton",LPe=nr(Bo,{name:lW,overridesResolver:function(e,t){return t.root}})({}),t3=function(){return t3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},t3.apply(this,arguments)},DPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},uW=I.memo(function(e){var t=pi({props:e,name:Hm}),r=t.alwaysOn,n=t.children,i=t.className,o=t.color,u=o===void 0?"secondary":o,a=t.toolbar,p=a===void 0?FPe:a,h=t.userMenu,m=h===void 0?BPe:h,v=t.container,w=v===void 0?r?"div":APe:v,x=DPe(t,["alwaysOn","children","className","color","toolbar","userMenu","container"]),P=Du(function(T){return T.breakpoints.down("sm")});return I.createElement(w,{className:i},I.createElement(jPe,t3({className:np.appBar,color:u},x),I.createElement(RI,{disableGutters:!0,variant:P?"regular":"dense",className:np.toolbar},I.createElement(hPe,{className:np.menuButton}),I.Children.count(n)===0?I.createElement(TPe,{className:np.title}):n,p,typeof m=="boolean"?m===!0?I.createElement(nW,null):null:m)))}),NPe=function(){var e=XG(),t=w2().darkTheme;return I.createElement(I.Fragment,null,e&&e.length>1?I.createElement(A3e,null):null,t&&I.createElement(kPe,null),I.createElement(mPe,null))},FPe=I.createElement(NPe,null),BPe=I.createElement(nW,null),Hm="RaAppBar",np={appBar:"".concat(Hm,"-appBar"),toolbar:"".concat(Hm,"-toolbar"),menuButton:"".concat(Hm,"-menuButton"),title:"".concat(Hm,"-title")},jPe=nr(Mte,{name:Hm,overridesResolver:function(e,t){return t.root}})(function(e){var t,r,n=e.theme;return t={},t["& .".concat(np.toolbar)]=(r={padding:"0 ".concat(n.spacing(1))},r[n.breakpoints.down("md")]={minHeight:n.spacing(6)},r),t["& .".concat(np.menuButton)]={marginRight:"0.2em"},t["& .".concat(np.title)]={},t});const zPe=Ci([ze.jsx("path",{d:"M12 5.99 19.53 19H4.47zM12 2 1 21h22z"},"0"),ze.jsx("path",{d:"M13 16h-2v2h2zm0-6h-2v5h2z"},"1")]);var B1=function(){return B1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},B1.apply(this,arguments)},$Pe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},cW=function(e){var t=e.title,r=e.defaultTitle,n=e.className,i=$Pe(e,["title","defaultTitle","className"]),o=Di();return I.createElement("span",{className:n},t?typeof t=="string"?I.createElement("span",B1({},i),o(t,{_:t})):t:I.createElement("span",B1({},i),r))};const qPe=Ci(ze.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}));var UPe=function(e){var t=pi({props:e,name:Fv}),r=t.children,n=t.editor,i=t.preferenceKey,o=t.openButtonLabel,u=o===void 0?"ra.configurable.customize":o,a=t.sx,p="preferences.".concat(i),h=SR(),m=!!h,v=Di(),w=h||{},x=w.isEnabled,P=w.setEditor,T=w.preferenceKey,R=w.setPreferenceKey,k=p===T,N=I.useRef(k),F=I.useRef(null),D=I.useState(!1),U=D[0],B=D[1];if(I.useEffect(function(){N.current=k},[k]),I.useEffect(function(){return function(){N.current&&(R&&R(null),P&&P(null))}},[P,R]),!m)return r;var Z=function(){if(!P)throw new Error("Configurable must be used inside a PreferencesEditorContextProvider");if(P(I.cloneElement(n,{preferenceKey:p,key:p})),!R)throw new Error("Configurable must be used inside a PreferencesEditorContextProvider");R(p)},J=function(){B(!0)},X=function(){B(!1)};return I.createElement(YH,{value:p},I.createElement(VPe,{className:Hr(rh.root,x&&rh.editMode,k&&rh.editorActive),sx:a,ref:F,onMouseEnter:x?J:void 0,onMouseLeave:x?X:void 0},r),I.createElement(Y9,{open:!!x&&(U||k),sx:{pointerEvents:"none","& .MuiPaper-root":{pointerEvents:"auto",borderRadius:10,padding:"2px",lineHeight:0,backgroundColor:"warning.light",color:"warning.contrastText","&:hover":{cursor:"pointer"}}},anchorEl:F.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"center"},onClose:X,PaperProps:{elevation:1,onMouseEnter:J,onMouseLeave:X,title:v(u),onClick:Z},disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:!0,disableScrollLock:!0,marginThreshold:8},I.createElement(qPe,{fontSize:"12px"})))},Fv="RaConfigurable",rh={root:"".concat(Fv,"-root"),editMode:"".concat(Fv,"-editMode"),editorActive:"".concat(Fv,"-editorActive")},VPe=nr("span",{name:Fv,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={position:"relative",display:"inline-block"},t["&.".concat(rh.editMode)]={transition:r.transitions.create("outline"),outline:"color-mix(in srgb, ".concat((r.vars||r).palette.warning.main,", transparent 30%) solid 2px")},t["&.".concat(rh.editMode,":hover ")]={outline:"color-mix(in srgb, ".concat((r.vars||r).palette.warning.main,", transparent 50%) solid 2px")},t["&.".concat(rh.editMode,".").concat(rh.editorActive," , &.").concat(rh.editMode,".").concat(rh.editorActive,":hover ")]={outline:"".concat((r.vars||r).palette.warning.main," solid 2px")},t});const GPe=Ci(ze.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"})),HPe=Ci(ze.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}));var WPe=function(){var e=Di();return YAe("ra.configurable.inspector.title",{_:"Inspector"}),I.createElement(No,null,e("ra.configurable.inspector.content",{_:"Hover the application UI elements to configure them"}))},fW=function(){var e=SR(),t=e.isEnabled,r=e.disable,n=e.title,i=e.titleOptions,o=e.editor,u=e.preferenceKey,a=I.useRef(!1),p=hAe(u),h=wf(),m=Di(),v=I.useState(0),w=v[0],x=v[1],P=Op("ra.inspector.position",{x:document?.body.clientWidth-h.breakpoints.values.sm/2-8,y:8}),T=P[0],R=P[1],k=I.useState(),N=k[0],F=k[1],D=function(Z){var J=document?.elementFromPoint(Z.clientX,Z.clientY);J?.id==="inspector-dialog-title"&&(a.current=!0,Z.dataTransfer.effectAllowed="move",Z.dataTransfer.setData("inspector",""),setTimeout(function(){Z.target.classList.add("hide")},0),F({x:Z.clientX-T.x,y:Z.clientY-T.y}))},U=function(Z){a.current&&N&&(R({x:Z.clientX-N.x,y:Z.clientY-N.y}),Z.target.classList.remove("hide"),a.current=!1)};I.useEffect(function(){if(t){var Z=function(J){J.dataTransfer.types.includes("inspector")&&J.preventDefault()};return document?.addEventListener("dragover",Z),function(){document?.removeEventListener("dragover",Z)}}},[t]),I.useEffect(function(){if(t){var Z=function(){window?.requestAnimationFrame(function(){R(function(J){return{x:Math.min(J.x,document?.body.clientWidth-h.breakpoints.values.sm/2-8),y:Math.min(J.y,window?.innerHeight-50)}})})};return Z(),window?.addEventListener("resize",Z),function(){window?.removeEventListener("resize",Z)}}},[t,R,h.breakpoints.values.sm]);var B=function(){p(),x(function(Z){return Z+1})};return t?I.createElement(ZPe,{className:Bv.modal,elevation:3,draggable:!0,onDragStart:D,onDragEnd:U,sx:{left:T.x,top:T.y}},I.createElement("div",{className:Bv.title},I.createElement(No,{id:"inspector-dialog-title",variant:"overline",component:"div",sx:{py:1,px:2,flex:"1"}},n&&m(n,i)),I.createElement("span",{id:"inspector-toolbar"}),u&&I.createElement(Bo,{"aria-label":m("ra.action.remove"),onClick:B,size:"small"},I.createElement(HPe,{fontSize:"inherit"})),I.createElement(Bo,{"aria-label":m("ra.action.close"),onClick:r,size:"small",sx:{mr:1}},I.createElement(GPe,{fontSize:"inherit"}))),I.createElement("div",{className:Bv.content,key:w},I.createElement(YH,{value:u},o||I.createElement(WPe,null)))):null},B_="RaInspector",Bv={modal:"".concat(B_,"-modal"),title:"".concat(B_,"-title"),content:"".concat(B_,"-content")},ZPe=nr(Lc,{name:B_,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={position:"fixed",zIndex:r.zIndex.modal+1,width:r.breakpoints.values.sm/2,transition:r.transitions.create(["height","width"]),"&.hide":{display:"none"}},t["& .".concat(Bv.title)]={display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move"},t["& .".concat(Bv.content)]={overflowY:"auto",maxHeight:"75vh",padding:r.spacing(2),paddingTop:0},t});fW.displayName="Inspector";var Hh=function(){return Hh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Hh.apply(this,arguments)},hW=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},KPe=function(){var e=XAe("","");return I.createElement("form",null,I.createElement(rq,Hh({label:"title",variant:"filled",size:"small",fullWidth:!0,sx:{mb:1}},e)))},XPe=function(e){var t=e.preferenceKey,r=e.title,n=e.defaultTitle,i=hW(e,["preferenceKey","title","defaultTitle"]),o=gl().pathname;return I.createElement(UPe,{editor:I.createElement(KPe,null),preferenceKey:t||"".concat(o,".title"),sx:{"&.RaConfigurable-editMode":{margin:"2px"}}},I.createElement(YPe,Hh({title:r,defaultTitle:n},i)))},YPe=function(e){var t=e.title,r=e.defaultTitle,n=hW(e,["title","defaultTitle"]),i=JH()[0],o=Di(),u=yl();return typeof i=="string"?I.createElement("span",Hh({className:n.className},n),o(i,Hh(Hh({},u),{_:i}))):I.createElement(I.Fragment,null,I.createElement(cW,Hh({title:t,defaultTitle:r},n)))},j1=function(){return j1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},j1.apply(this,arguments)},JPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Q0=function(e){var t=e.defaultTitle,r=e.title,n=e.preferenceKey,i=JPe(e,["defaultTitle","title","preferenceKey"]),o=I.useState(function(){return typeof document<"u"?document.getElementById("react-admin-title"):null}),u=o[0],a=o[1];if(I.useEffect(function(){a(function(h){var m=typeof document<"u"&&document.body.contains(h);return h&&m?h:typeof document<"u"?document.getElementById("react-admin-title"):null})},[]),!u)return null;xR(!t&&!r,"Missing title prop in <Title> element");var p=n===!1?I.createElement(cW,j1({title:r,defaultTitle:t},i)):I.createElement(XPe,j1({title:r,defaultTitle:t,preferenceKey:n},i));return I.createElement(I.Fragment,null,Rx.createPortal(p,u))},r3=function(){return r3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},r3.apply(this,arguments)},QPe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},o_,eTe=function(e){var t=pi({props:e,name:jv}),r=t.className,n=t.icon,i=n===void 0?rTe:n,o=t.textPrimary,u=o===void 0?"ra.page.authentication_error":o,a=t.textSecondary,p=a===void 0?"ra.message.authentication_error":a,h=QPe(t,["className","icon","textPrimary","textSecondary"]),m=Di(),v=bR();return I.createElement(tTe,r3({className:Hr(v0.root,r)},h),I.createElement(Q0,{defaultTitle:v}),I.createElement("div",{className:v0.message},i,I.createElement(No,{variant:"h5",sx:{mt:3,color:"text.secondary"}},m(u,{_:u})),I.createElement(No,{variant:"body2"},m(p,{_:p}))))},jv="RaAuthenticationError",v0={root:"".concat(jv,"-root"),icon:"".concat(jv,"-icon"),message:"".concat(jv,"-message")},tTe=nr("div",{name:jv,overridesResolver:function(e,t){return t.root}})((o_={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},o_["& .".concat(v0.message)]={textAlign:"center",paddingTop:"1em",paddingBottom:"1em",opacity:.5},o_["& .".concat(v0.icon)]={width:"9em",height:"9em"},o_)),rTe=I.createElement(zPe,{className:v0.icon});const nTe=Ci(ze.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),iTe=Ci(ze.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}));var zv=function(){return zv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},zv.apply(this,arguments)},aTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},oTe=function(e){var t,r=pi({props:e,name:z1}),n=r.className,i=r.isOpen,o=i===void 0?!1:i,u=r.loading,a=r.title,p=r.content,h=r.cancel,m=h===void 0?"ra.action.cancel":h,v=r.confirm,w=v===void 0?"ra.action.confirm":v,x=r.confirmColor,P=x===void 0?"primary":x,T=r.ConfirmIcon,R=T===void 0?nTe:T,k=r.CancelIcon,N=k===void 0?iTe:k,F=r.onClose,D=r.onConfirm,U=r.translateOptions,B=U===void 0?{}:U,Z=r.titleTranslateOptions,J=Z===void 0?B:Z,X=r.contentTranslateOptions,le=X===void 0?B:X,H=aTe(r,["className","isOpen","loading","title","content","cancel","confirm","confirmColor","ConfirmIcon","CancelIcon","onClose","onConfirm","translateOptions","titleTranslateOptions","contentTranslateOptions"]),G=Di(),ae=I.useCallback(function(ue){ue.stopPropagation(),D(ue)},[D]),se=I.useCallback(function(ue){ue.stopPropagation()},[]);return I.createElement(sTe,zv({className:n,open:o,onClose:F,onClick:se,"aria-labelledby":"alert-dialog-title"},H),I.createElement(Bie,{id:"alert-dialog-title"},typeof a=="string"?G(a,zv({_:a},J)):a),I.createElement(Rie,null,typeof p=="string"?I.createElement(Die,null,G(p,zv({_:p},le))):p),I.createElement(Cie,null,I.createElement(Mc,{disabled:u,onClick:F,startIcon:I.createElement(N,null)},G(m,{_:m})),I.createElement(Mc,{disabled:u,onClick:ae,className:Hr("ra-confirm",(t={},t[$1.confirmWarning]=P==="warning",t[$1.confirmPrimary]=P==="primary",t)),autoFocus:!0,startIcon:I.createElement(R,null)},G(w,{_:w}))))},z1="RaConfirm",$1={confirmPrimary:"".concat(z1,"-confirmPrimary"),confirmWarning:"".concat(z1,"-confirmWarning")},sTe=nr(xie,{name:z1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat($1.confirmPrimary)]={color:(r.vars||r).palette.primary.main},t["& .".concat($1.confirmWarning)]={color:(r.vars||r).palette.error.main,"&:hover":{backgroundColor:"color-mix(in srgb, ".concat((r.vars||r).palette.error.main,", transparent 12%)"),"@media (hover: none)":{backgroundColor:"transparent"}}},t});const lTe=Ci(ze.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"})),dW=["shift","alt","meta","mod","ctrl","control"],uTe={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Kh(e){return(uTe[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function pW(e){return dW.includes(e)}function yA(e,t=","){return e.toLowerCase().split(t)}function vA(e,t="+",r=">",n=!1,i){let o=[],u=!1;e.includes(r)?(u=!0,o=e.toLocaleLowerCase().split(r).map(h=>Kh(h))):o=e.toLocaleLowerCase().split(t).map(h=>Kh(h));const a={alt:o.includes("alt"),ctrl:o.includes("ctrl")||o.includes("control"),shift:o.includes("shift"),meta:o.includes("meta"),mod:o.includes("mod"),useKey:n},p=o.filter(h=>!dW.includes(h));return{...a,keys:p,description:i,isSequence:u}}typeof document<"u"&&(document.addEventListener("keydown",e=>{e.code!==void 0&&mW([Kh(e.code)])}),document.addEventListener("keyup",e=>{e.code!==void 0&&gW([Kh(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{sh.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{sh.clear()},0)}));const sh=new Set;function AR(e){return Array.isArray(e)}function cTe(e,t=","){return(AR(e)?e:e.split(t)).every(r=>sh.has(r.trim().toLowerCase()))}function mW(e){const t=Array.isArray(e)?e:[e];sh.has("meta")&&sh.forEach(r=>!pW(r)&&sh.delete(r.toLowerCase())),t.forEach(r=>sh.add(r.toLowerCase()))}function gW(e){const t=Array.isArray(e)?e:[e];e==="meta"?sh.clear():t.forEach(r=>sh.delete(r.toLowerCase()))}function fTe(e,t,r){(typeof r=="function"&&r(e,t)||r===!0)&&e.preventDefault()}function hTe(e,t,r){return typeof r=="function"?r(e,t):r===!0||r===void 0}function dTe(e){return yW(e,["input","textarea","select"])}function yW(e,t=!1){const{target:r,composed:n}=e;let i;return pTe(r)&&n?i=e.composedPath()[0]&&e.composedPath()[0].tagName:i=r&&r.tagName,AR(t)?!!(i&&t&&t.some(o=>o.toLowerCase()===i.toLowerCase())):!!(i&&t&&t)}function pTe(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function mTe(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(r=>t.includes(r))||e.includes("*"):!0}const gTe=(e,t,r=!1)=>{const{alt:n,meta:i,mod:o,shift:u,ctrl:a,keys:p,useKey:h}=t,{code:m,key:v,ctrlKey:w,metaKey:x,shiftKey:P,altKey:T}=e,R=Kh(m);if(h&&p?.length===1&&p.includes(v))return!0;if(!(p!=null&&p.includes(R))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(R))return!1;if(!r){if(n!==T&&R!=="alt"||u!==P&&R!=="shift")return!1;if(o){if(!x&&!w)return!1}else if(i!==x&&R!=="meta"&&R!=="os"||a!==w&&R!=="ctrl"&&R!=="control")return!1}return p&&p.length===1&&p.includes(R)?!0:p?cTe(p):!p},yTe=I.createContext(void 0),vTe=()=>I.useContext(yTe);function vW(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((r,n)=>r&&vW(e[n],t[n]),!0):e===t}const bTe=I.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),_Te=()=>I.useContext(bTe);function xTe(e){const t=I.useRef(void 0);return vW(t.current,e)||(t.current=e),t.current}const wz=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},wTe=typeof window<"u"?I.useLayoutEffect:I.useEffect;function STe(e,t,r,n){const i=I.useRef(null),o=I.useRef(!1),u=r instanceof Array?n instanceof Array?void 0:n:r,a=AR(e)?e.join(u?.delimiter):e,p=r instanceof Array?r:n instanceof Array?n:void 0,h=I.useCallback(t,p??[]),m=I.useRef(h);p?m.current=h:m.current=t;const v=xTe(u),{activeScopes:w}=_Te(),x=vTe();return wTe(()=>{if(v?.enabled===!1||!mTe(w,v?.scopes))return;let P=[],T;const R=(D,U=!1)=>{var B;if(!(dTe(D)&&!yW(D,v?.enableOnFormTags))){if(i.current!==null){const Z=i.current.getRootNode();if((Z instanceof Document||Z instanceof ShadowRoot)&&Z.activeElement!==i.current&&!i.current.contains(Z.activeElement)){wz(D);return}}(B=D.target)!=null&&B.isContentEditable&&!(v!=null&&v.enableOnContentEditable)||yA(a,v?.delimiter).forEach(Z=>{var J,X,le,H;if(Z.includes(v?.splitKey??"+")&&Z.includes(v?.sequenceSplitKey??">")){console.warn(`Hotkey ${Z} contains both ${v?.splitKey??"+"} and ${v?.sequenceSplitKey??">"} which is not supported.`);return}const G=vA(Z,v?.splitKey,v?.sequenceSplitKey,v?.useKey,v?.description);if(G.isSequence){T=setTimeout(()=>{P=[]},v?.sequenceTimeoutMs??1e3);const ae=G.useKey?D.key:Kh(D.code);if(pW(ae.toLowerCase()))return;P.push(ae);const se=(J=G.keys)==null?void 0:J[P.length-1];if(ae!==se){P=[],T&&clearTimeout(T);return}P.length===((X=G.keys)==null?void 0:X.length)&&(m.current(D,G),T&&clearTimeout(T),P=[])}else if(gTe(D,G,v?.ignoreModifiers)||(le=G.keys)!=null&&le.includes("*")){if((H=v?.ignoreEventWhen)!=null&&H.call(v,D)||U&&o.current)return;if(fTe(D,G,v?.preventDefault),!hTe(D,G,v?.enabled)){wz(D);return}m.current(D,G),U||(o.current=!0)}})}},k=D=>{D.code!==void 0&&(mW(Kh(D.code)),(v?.keydown===void 0&&v?.keyup!==!0||v!=null&&v.keydown)&&R(D))},N=D=>{D.code!==void 0&&(gW(Kh(D.code)),o.current=!1,v!=null&&v.keyup&&R(D,!0))},F=i.current||u?.document||document;return F.addEventListener("keyup",N,u?.eventListenerOptions),F.addEventListener("keydown",k,u?.eventListenerOptions),x&&yA(a,v?.delimiter).forEach(D=>x.addHotkey(vA(D,v?.splitKey,v?.sequenceSplitKey,v?.useKey,v?.description))),()=>{F.removeEventListener("keyup",N,u?.eventListenerOptions),F.removeEventListener("keydown",k,u?.eventListenerOptions),x&&yA(a,v?.delimiter).forEach(D=>x.removeHotkey(vA(D,v?.splitKey,v?.sequenceSplitKey,v?.useKey,v?.description))),P=[],T&&clearTimeout(T)}},[a,v,w]),i}var n3=function(){return n3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},n3.apply(this,arguments)},ETe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},CTe=function(e){var t=e.className,r=e.keyboardShortcut,n=ETe(e,["className","keyboardShortcut"]);return r?I.createElement(ATe,n3({className:Hr(i3.root,t)},n),r.split(">").map(function(i,o,u){return I.createElement(I.Fragment,{key:"".concat(i,"-").concat(o)},i.split("+").map(function(a,p){return I.createElement(I.Fragment,{key:"".concat(a,"-").concat(p)},I.createElement(No,{component:"kbd",className:i3.kbd,key:a},Sz[a]?Sz[a]:a.toUpperCase()))}),o<u.length-1?I.createElement(I.Fragment,null," "):null)})):null},Sz={meta:"⌘",mod:"⌘",ctrl:"⌃",shift:"⇧",alt:"⌥",enter:"⏎",esc:"⎋",escape:"⎋",backspace:"⌫",delete:"⌦",tab:"⇥",space:"␣",up:"↑",down:"↓",left:"←",right:"→",home:"↖",end:"↘",pageup:"⇞",pagedown:"⇟"},Ez="RaKeyboardShortcut",i3={root:"".concat(Ez,"-root"),kbd:"".concat(Ez,"-kbd")},ATe=nr("div")(function(e){var t,r=e.theme;return t={opacity:.7},t["& .".concat(i3.kbd)]={padding:"4px 5px",display:"inline-block",whiteSpace:"nowrap",margin:"0 1px",fontSize:"11px",lineHeight:"10px",color:r.palette.text.primary,verticalAlign:"middle",border:"1px solid ".concat(r.palette.divider),borderRadius:6,boxShadow:"inset 0 -1px 0 ".concat(r.palette.divider)},t}),b0=function(){return b0=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b0.apply(this,arguments)},PTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},PR=I.forwardRef(function(e,t){var r=pi({props:e,name:Wm}),n=r.className,i=r.primaryText,o=r.leftIcon,u=r.onClick;r.sidebarIsOpen;var a=r.tooltipProps,p=r.children,h=r.keyboardShortcut,m=r.keyboardShortcutRepresentation,v=PTe(r,["className","primaryText","leftIcon","onClick","sidebarIsOpen","tooltipProps","children","keyboardShortcut","keyboardShortcutRepresentation"]),w=Du(function(X){return X.breakpoints.down("md")}),x=Di(),P=yh(),T=J0(),R=T[0],k=T[1],N=I.useCallback(function(X){w&&k(!1),u&&u(X)},[k,w,u]),F=(typeof r.to=="string"?r.to:r.to.pathname)||"",D=gwe({path:F,end:F==="".concat(P,"/")}),U=I.useRef(null),B=So(U,t),Z=wo(function(){var X;return(X=U.current)===null||X===void 0?void 0:X.click()});STe(h??[],Z,{enabled:h!=null});var J=function(){var X;return je.createElement(TTe,b0({className:Hr(n,ff.root,(X={},X[ff.active]=!!D,X)),component:ITe,ref:B,tabIndex:0},v,{onClick:N}),o&&je.createElement(R0,{className:ff.icon},o),je.createElement(No,{variant:"inherit",noWrap:!0,sx:{flexGrow:1}},p||(typeof i=="string"?x(i,{_:i}):i)),h?m??je.createElement(CTe,{className:ff.shortcut,keyboardShortcut:h}):null)};return R?J():je.createElement(Sg,b0({title:typeof i=="string"?x(i,{_:i}):i,placement:"right"},a),J())}),Wm="RaMenuItemLink",ff={root:"".concat(Wm,"-root"),active:"".concat(Wm,"-active"),icon:"".concat(Wm,"-icon"),shortcut:"".concat(Wm,"-shortcut")},TTe=nr(AI,{name:Wm,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={color:(r.vars||r).palette.text.secondary},t["& .".concat(ff.icon)]={color:(r.vars||r).palette.text.secondary},t["& .".concat(ff.shortcut)]={color:(r.vars||r).palette.text.secondary,fontSize:r.typography.body2.fontSize,opacity:0,display:"none",transition:"opacity 0.3s"},t["&:hover .".concat(ff.shortcut)]={opacity:.7,display:"inline-flex"},t["&.".concat(ff.active)]={color:(r.vars||r).palette.text.primary},t["& .".concat(ff.icon)]={minWidth:r.spacing(5)},t[".MuiList-dense > & > .".concat(ff.icon)]={minWidth:r.spacing(3.5)},t}),ITe=I.forwardRef(function(e,t){return je.createElement(Fg,b0({ref:t},e))}),a3=function(){return a3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a3.apply(this,arguments)},MTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},bW=function(e){var t=yh(),r=e.leftIcon,n=r===void 0?je.createElement(lTe,null):r,i=e.to,o=i===void 0?"".concat(t,"/"):i,u=e.primaryText,a=u===void 0?"ra.page.dashboard":u,p=MTe(e,["leftIcon","to","primaryText"]);return je.createElement(PR,a3({leftIcon:n,to:o,primaryText:a},p))};const RTe=Ci(ze.jsx("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3s.58-1.3 1.3-1.3 1.3.58 1.3 1.3-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"})),_W=Ci(ze.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}));var o3=function(){return o3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},o3.apply(this,arguments)},OTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},xW=function(e){var t=pi({props:e,name:eh}),r=t.error,n=t.errorComponent,i=t.errorInfo,o=t.resetErrorBoundary,u=t.className,a=OTe(t,["error","errorComponent","errorInfo","resetErrorBoundary","className"]),p=Di(),h=bR();return tH(o),n?I.createElement(n,{error:r,errorInfo:i,title:h}):I.createElement(I.Fragment,null,h&&I.createElement(Q0,{title:h}),I.createElement(kTe,o3({className:u},a),I.createElement("h1",{className:sf.title,role:"alert"},I.createElement(RTe,{className:sf.icon}),p("ra.page.error")),I.createElement("div",null,p("ra.message.error")),!1,I.createElement("div",{className:sf.toolbar},I.createElement(Mc,{variant:"contained",startIcon:I.createElement(_W,null),onClick:LTe},p("ra.action.back")))))},eh="RaError",sf={title:"".concat(eh,"-title"),icon:"".concat(eh,"-icon"),panel:"".concat(eh,"-panel"),panelSummary:"".concat(eh,"-panelSummary"),panelDetails:"".concat(eh,"-panelDetails"),toolbar:"".concat(eh,"-toolbar"),advice:"".concat(eh,"-advice")},kTe=nr("div",{name:eh,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},t[r.breakpoints.down("md")]={padding:"1em"},t.fontFamily="Roboto, sans-serif",t.opacity=.5,t["& .".concat(sf.title)]={display:"flex",alignItems:"center"},t["& .".concat(sf.icon)]={width:"2em",height:"2em",marginRight:"0.5em"},t["& .".concat(sf.panel)]={marginTop:"1em",maxWidth:"60em"},t["& .".concat(sf.panelSummary)]={userSelect:"all"},t["& .".concat(sf.panelDetails)]={whiteSpace:"pre-wrap"},t["& .".concat(sf.toolbar)]={marginTop:"2em"},t["& .".concat(sf.advice)]={marginTop:"2em"},t});function LTe(){window.history.go(-1)}var q1=function(){return q1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},q1.apply(this,arguments)},DTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},wW=function(e){var t=pi({props:e,name:js}),r=t.appBarAlwaysOn,n=t.children;t.closedSize,t.size;var i=DTe(t,["appBarAlwaysOn","children","closedSize","size"]),o=Du(function(v){return v.breakpoints.down("sm")}),u=J0(),a=u[0],p=u[1];nSe();var h=nq(),m=function(){return p(!a)};return o?I.createElement(Cz,q1({variant:"temporary",open:a,onClose:m,classes:zs},i),n):I.createElement(Cz,q1({variant:"permanent",open:a,onClose:m,classes:zs,className:Hr(h&&!r?zs.appBarCollapsed:"",a?NTe:FTe)},i),I.createElement("div",{className:zs.fixed},n))},js="RaSidebar",zs={docked:"".concat(js,"-docked"),paper:"".concat(js,"-paper"),paperAnchorLeft:"".concat(js,"-paperAnchorLeft"),paperAnchorRight:"".concat(js,"-paperAnchorRight"),paperAnchorTop:"".concat(js,"-paperAnchorTop"),paperAnchorBottom:"".concat(js,"-paperAnchorBottom"),paperAnchorDockedLeft:"".concat(js,"-paperAnchorDockedLeft"),paperAnchorDockedTop:"".concat(js,"-paperAnchorDockedTop"),paperAnchorDockedRight:"".concat(js,"-paperAnchorDockedRight"),paperAnchorDockedBottom:"".concat(js,"-paperAnchorDockedBottom"),modal:"".concat(js,"-modal"),fixed:"".concat(js,"-fixed"),appBarCollapsed:"".concat(js,"-appBarCollapsed")},NTe="".concat(js,"-open"),FTe="".concat(js,"-closed"),Cz=nr(Zie,{name:js,slot:"Root",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(){return!0}})(function(e){var t,r,n,i=e.open,o=e.theme;return t={height:"calc(100vh - 3em)",marginTop:0,transition:o.transitions.create("margin",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.enteringScreen})},t["&.".concat(zs.appBarCollapsed)]=(r={marginTop:o.spacing(-6)},r[o.breakpoints.down("sm")]={marginTop:o.spacing(-7)},r.transition=o.transitions.create("margin",{easing:o.transitions.easing.sharp,duration:o.transitions.duration.leavingScreen}),r),t["& .".concat(zs.docked)]={},t["& .".concat(zs.paper)]={},t["& .".concat(zs.paperAnchorLeft)]={},t["& .".concat(zs.paperAnchorRight)]={},t["& .".concat(zs.paperAnchorTop)]={},t["& .".concat(zs.paperAnchorBottom)]={},t["& .".concat(zs.paperAnchorDockedLeft)]={},t["& .".concat(zs.paperAnchorDockedTop)]={},t["& .".concat(zs.paperAnchorDockedRight)]={},t["& .".concat(zs.paperAnchorDockedBottom)]={},t["& .".concat(zs.modal)]={},t["& .".concat(zs.fixed)]={position:"fixed",height:"calc(100vh - 3em)",overflowX:"hidden",scrollbarWidth:"none",msOverflowStyle:"none","&::-webkit-scrollbar":{display:"none"}},t["& .MuiPaper-root"]=(n={position:"relative",width:i?Pc(o,"sidebar.width",SW):Pc(o,"sidebar.closedWidth",EW),transition:o.transitions.create("width",{easing:o.transitions.easing.sharp,duration:o.transitions.duration.leavingScreen}),backgroundColor:"transparent",borderRight:"none"},n[o.breakpoints.only("xs")]={marginTop:0,height:"100vh",position:"inherit",backgroundColor:(o.vars||o).palette.background.default},n[o.breakpoints.up("md")]={border:"none"},n.zIndex="inherit",n),t}),SW=240,EW=55;const BTe=Ci(ze.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}));var s3=function(){return s3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s3.apply(this,arguments)},jTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},CW=function(e){var t=e.name,r=jTe(e,["name"]),n=G0(),i=Y0({action:"list",resource:t}),o=i.canAccess,u=i.error,a=i.isPending,p=Bg(),h=V0();return!n||!n[t]||a||o===!1||u!=null?null:I.createElement(PR,s3({to:h({resource:t,type:"list"}),state:{_scrollToTop:!0},primaryText:I.createElement(I.Fragment,null,p(t,2)),leftIcon:n[t].icon?I.createElement(n[t].icon):I.createElement(BTe,null)},r))},AW=function(){var e=G0();return I.createElement(I.Fragment,null,Object.keys(e).filter(function(t){return e[t].hasList}).map(function(t){return I.createElement(CW,{key:t,name:t})}))},l3=function(){return l3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},l3.apply(this,arguments)},zTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},qg=function(e){var t,r=pi({props:e,name:U1}),n=r.children,i=r.className;r.hasDashboard;var o=zTe(r,["children","className","hasDashboard"]),u=zCe(),a=J0()[0];return I.createElement($Te,l3({className:Hr((t={},t[V1.open]=a,t[V1.closed]=!a,t),i)},o),u&&!n&&I.createElement(bW,null),n??I.createElement(AW,null))};qg.Item=PR;qg.DashboardItem=bW;qg.ResourceItem=CW;qg.ResourceItems=AW;var U1="RaMenu",V1={open:"".concat(U1,"-open"),closed:"".concat(U1,"-closed")},$Te=nr(K9,{name:U1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"flex-start"},t[r.breakpoints.only("xs")]={marginTop:0},t.transition=r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.leavingScreen}),t["&.".concat(V1.open)]={width:Pc(r,"sidebar.width",SW)},t["&.".concat(V1.closed)]={width:Pc(r,"sidebar.closedWidth",EW)},t}),u3=function(){return u3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},u3.apply(this,arguments)},qTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Ug=function(e){var t=pi({props:e,name:G1}),r=t.className,n=t.loadingPrimary,i=n===void 0?"ra.page.loading":n,o=t.loadingSecondary,u=o===void 0?"ra.message.loading":o,a=t.timeout,p=a===void 0?1e3:a,h=qTe(t,["className","loadingPrimary","loadingSecondary","timeout"]),m=aEe(p),v=Di();return m?I.createElement(UTe,u3({className:r},h),I.createElement("div",{className:H1.message},I.createElement(xg,{className:H1.icon}),I.createElement(No,{variant:"h5",sx:{mt:3,color:"text.secondary"}},v(i,{_:i})),I.createElement(No,{variant:"body2"},v(u,{_:u})))):null},G1="RaLoading",H1={icon:"".concat(G1,"-icon"),message:"".concat(G1,"-message")},UTe=nr("div",{name:G1,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},t["& .".concat(H1.message)]={textAlign:"center",fontFamily:"Roboto, sans-serif",color:(r.vars||r).palette.text.disabled,paddingTop:"1em",paddingBottom:"1em"},t["& .".concat(H1.icon)]={width:"9em",height:"9em"},t}),c3=function(){return c3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},c3.apply(this,arguments)},VTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},GTe=function(e){var t=pi({props:e,name:$v}),r=t.appBar,n=r===void 0?uW:r,i=t.appBarAlwaysOn,o=t.children,u=t.className,a=t.error,p=t.menu,h=p===void 0?qg:p,m=t.sidebar,v=m===void 0?wW:m,w=VTe(t,["appBar","appBarAlwaysOn","children","className","error","menu","sidebar"]),x=I.useState(void 0),P=x[0],T=x[1],R=function(k,N){T(N)};return je.createElement(HTe,c3({className:Hr("layout",u)},w),je.createElement(z3e,null),je.createElement("div",{className:ig.appFrame},je.createElement(n,{alwaysOn:i}),je.createElement("main",{className:ig.contentWithSidebar},je.createElement(v,{appBarAlwaysOn:i},je.createElement(h,null)),je.createElement("div",{id:"main-content",className:ig.content},je.createElement(kH,{onError:R,fallbackRender:function(k){var N=k.error,F=k.resetErrorBoundary;return je.createElement(xW,{error:N,errorComponent:a,errorInfo:P,resetErrorBoundary:F})}},je.createElement(I.Suspense,{fallback:je.createElement(Ug,null)},o)))),je.createElement(fW,null)))},$v="RaLayout",ig={appFrame:"".concat($v,"-appFrame"),contentWithSidebar:"".concat($v,"-contentWithSidebar"),content:"".concat($v,"-content")},HTe=nr("div",{name:$v,overridesResolver:function(e,t){return t.root}})(function(e){var t,r,n,i=e.theme;return t={display:"flex",flexDirection:"column",zIndex:1,minHeight:"100vh",backgroundColor:(i.vars||i).palette.background.default,position:"relative",minWidth:"fit-content",width:"100%"},t["& .".concat(ig.appFrame)]=(r={display:"flex",flexDirection:"column",flexGrow:1,marginTop:i.spacing(6)},r[i.breakpoints.down("sm")]={marginTop:i.spacing(7)},r),t["& .".concat(ig.contentWithSidebar)]={display:"flex",flexGrow:1,transition:i.transitions.create("margin",{easing:i.transitions.easing.easeOut,duration:i.transitions.duration.enteringScreen})},t["& .".concat(ig.content)]=(n={backgroundColor:(i.vars||i).palette.background.default,zIndex:2,display:"flex",flexDirection:"column",flexGrow:1,flexBasis:0,padding:0},n[i.breakpoints.up("xs")]={paddingRight:i.spacing(1),paddingLeft:i.spacing(1)},n),t}),f3=function(){return f3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},f3.apply(this,arguments)},WTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},ZTe=function(e){var t=e.loadingPrimary,r=t===void 0?"ra.page.loading":t,n=e.loadingSecondary,i=n===void 0?"ra.message.loading":n,o=WTe(e,["loadingPrimary","loadingSecondary"]);return I.createElement(Ug,f3({loadingPrimary:r,loadingSecondary:i},o))};const KTe=Ci([ze.jsx("circle",{cx:"7",cy:"6",r:"2"},"0"),ze.jsx("path",{d:"M11.15 12c-.31-.22-.59-.46-.82-.72l-1.4-1.55c-.19-.21-.43-.38-.69-.5-.29-.14-.62-.23-.96-.23h-.03C6.01 9 5 10.01 5 11.25V12H2v8c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2v-8zM7 20H5v-6h2zm4 0H9v-6h2zm4 0h-2v-6h2zm4 0h-2v-6h2zm-.35-14.14-.07-.07c-.57-.62-.82-1.41-.67-2.2L18 3h-1.89l-.06.43c-.2 1.36.27 2.71 1.3 3.72l.07.06c.57.62.82 1.41.67 2.2l-.11.59h1.91l.06-.43c.21-1.36-.27-2.71-1.3-3.71m-4 0-.07-.07c-.57-.62-.82-1.41-.67-2.2L14 3h-1.89l-.06.43c-.2 1.36.27 2.71 1.3 3.72l.07.06c.57.62.82 1.41.67 2.2l-.11.59h1.91l.06-.43c.21-1.36-.27-2.71-1.3-3.71"},"1")]);var h3=function(){return h3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},h3.apply(this,arguments)},XTe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},YTe=function(e){var t=pi({props:e,name:qv}),r=Di(),n=X0().isPending,i=bR();return n?I.createElement(Ug,null):I.createElement(QTe,h3({},JTe(t)),I.createElement(Q0,{defaultTitle:i}),I.createElement("div",{className:ag.message},I.createElement(KTe,{className:ag.icon}),I.createElement("h1",null,r("ra.page.not_found")),I.createElement("div",null,r("ra.message.not_found"),".")),I.createElement("div",{className:ag.toolbar},I.createElement(Mc,{variant:"contained",startIcon:I.createElement(_W,null),onClick:e3e},r("ra.action.back"))))},JTe=function(e){e.staticContext,e.history,e.location,e.match;var t=XTe(e,["staticContext","history","location","match"]);return t},qv="RaNotFound",ag={icon:"".concat(qv,"-icon"),message:"".concat(qv,"-message"),toolbar:"".concat(qv,"-toolbar")},QTe=nr("div",{name:qv,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"center"},t[r.breakpoints.up("md")]={height:"100%"},t[r.breakpoints.down("md")]={height:"100vh",marginTop:"-3em"},t["& .".concat(ag.icon)]={width:"9em",height:"9em"},t["& .".concat(ag.message)]={textAlign:"center",fontFamily:"Roboto, sans-serif",opacity:.5,margin:"0 1em"},t["& .".concat(ag.toolbar)]={textAlign:"center",marginTop:"2em"},t});function e3e(){window.history.go(-1)}var d3=function(){return d3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},d3.apply(this,arguments)},Az=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},t3e={vertical:"bottom",horizontal:"center"},r3e=function(e){var t,r=pi({props:e,name:Zd}),n=r.className,i=r.type,o=i===void 0?"info":i,u=r.autoHideDuration,a=u===void 0?4e3:u,p=r.multiLine,h=p===void 0?!1:p,m=r.anchorOrigin,v=m===void 0?t3e:m,w=Az(r,["className","type","autoHideDuration","multiLine","anchorOrigin"]),x=$G(),P=x.notifications,T=x.takeNotification,R=wCe(),k=I.useState(!1),N=k[0],F=k[1],D=I.useState(void 0),U=D[0],B=D[1],Z=Di();I.useEffect(function(){var Fe;if(P.length&&!U){var Ke=T();Ke&&(B(Ke),F(!0))}if(U){var fe=function(_e){_e.preventDefault();var Pe="";return _e.returnValue=Pe,Pe};if(!((Fe=U?.notificationOptions)===null||Fe===void 0)&&Fe.undoable)return window.addEventListener("beforeunload",fe),function(){window.removeEventListener("beforeunload",fe)}}},[P,U,N,T]);var J=I.useCallback(function(){F(!1)},[F]),X=I.useCallback(function(){var Fe;if(U&&(!((Fe=U.notificationOptions)===null||Fe===void 0)&&Fe.undoable)){var Ke=R();Ke?Ke({isUndo:!1}):Tj.emit("end",{isUndo:!1})}B(void 0)},[U,R]),le=I.useCallback(function(){var Fe=R();Fe?Fe({isUndo:!0}):Tj.emit("end",{isUndo:!0}),F(!1)},[R]);if(!U)return null;var H=U.message,G=U.type,ae=U.notificationOptions,se=ae||{},ue=se.autoHideDuration,me=se.messageArgs,Ce=se.multiLine,pe=se.undoable,Ee=Az(se,["autoHideDuration","messageArgs","multiLine","undoable"]);return I.createElement(j5e.Provider,{value:J},I.createElement(n3e,d3({className:n,open:N,message:H&&typeof H=="string"&&Z(H,me),autoHideDuration:ue===void 0?a:ue??void 0,disableWindowBlurListener:pe,TransitionProps:{onExited:X},onClose:J,ContentProps:{className:Hr(qh[G||o],(t={},t[qh.multiLine]=Ce||h,t))},action:pe?I.createElement(Mc,{color:"primary",className:qh.undo,size:"small",onClick:le},I.createElement(I.Fragment,null,Z("ra.action.undo"))):null,anchorOrigin:v},w,Ee),H&&typeof H!="string"&&I.isValidElement(H)?H:void 0))},Zd="RaNotification",qh={success:"".concat(Zd,"-success"),error:"".concat(Zd,"-error"),warning:"".concat(Zd,"-warning"),undo:"".concat(Zd,"-undo"),multiLine:"".concat(Zd,"-multiLine")},n3e=nr(Loe,{name:Zd,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme,n=e.type;return t={},t["& .".concat(qh.success)]={backgroundColor:r?.palette.success.main,color:r?.palette.success.contrastText},t["& .".concat(qh.error)]={backgroundColor:r?.palette.error.main,color:r?.palette.error.contrastText},t["& .".concat(qh.warning)]={backgroundColor:r?.palette.warning.main,color:r?.palette.warning.contrastText},t["& .".concat(qh.undo)]={color:n==="success"?r?.palette.success.contrastText:r?.palette.primary.light},t["& .".concat(qh.multiLine)]={whiteSpace:"pre-wrap"},t}),p3=function(){return p3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},p3.apply(this,arguments)},i3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},PW=function(e){var t=pi({props:e,name:TW}),r=Du(function(n){return n.breakpoints.down("sm")});return I.createElement(a3e,p3({disableGutters:!0,variant:r?"regular":"dense"},o3e(t)))},TW="RaTopToolbar",a3e=nr(RI,{name:TW,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",justifyContent:"flex-end",alignItems:"flex-end",gap:r.spacing(1),whiteSpace:"nowrap",flex:"0 1 auto",padding:r.spacing(.5),paddingBottom:r.spacing(1)},t[r.breakpoints.down("md")]={flex:"0 1 100%"},t[r.breakpoints.down("sm")]={backgroundColor:(r.vars||r).palette.background.paper,padding:0,paddingBottom:0},t}),o3e=function(e){e.hasCreate;var t=i3e(e,["hasCreate"]);return t},m3=function(){return m3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},m3.apply(this,arguments)},s3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},l3e=function(e){var t=pi({props:e,name:IW}),r=t.label,n=t.className,i=t.icon,o=i===void 0?u3e:i,u=t.onClick,a=t.redirect,p=a===void 0?"list":a,h=t.mutationOptions,m=t.color,v=m===void 0?"error":m,w=t.successMessage,x=s3e(t,["label","className","icon","onClick","redirect","mutationOptions","color","successMessage"]),P=yl(t),T=su(t);if(!T)throw new Error("<DeleteWithUndoButton> components should be used inside a <Resource> component or provided with a resource prop. (The <Resource> component set the resource prop for all its children).");var R=oH({record:P,resource:T,redirect:p,mutationMode:"undoable",mutationOptions:h,successMessage:w}),k=R.isPending,N=R.handleDelete,F=function(X){X.stopPropagation(),N(),u&&u(X)},D=Di(),U=jg(T),B=U(P),Z=D("resources.".concat(T,".forcedCaseName"),{smart_count:1,_:bp.humanize(D("resources.".concat(T,".name"),{smart_count:1,_:T?bp.singularize(T):void 0}),!0)});I.isValidElement(B)&&(B="#".concat(P?.id));var J=lp({resourceI18nKey:"resources.".concat(T,".action.delete"),baseI18nKey:"ra.action.delete",options:{name:Z,recordRepresentation:B},userText:r});return I.createElement(c3e,m3({onClick:F,disabled:k,label:I.createElement(I.Fragment,null,J),"aria-label":typeof J=="string"?J:void 0,className:Hr("ra-delete-button",n),key:"button",color:v},x),o)},u3e=I.createElement(Qq,null),IW="RaDeleteWithUndoButton",c3e=nr($g,{name:IW,overridesResolver:function(e,t){return t.root}})({}),Kd=function(){return Kd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Kd.apply(this,arguments)},Pz=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},f3e=function(e){var t=pi({props:e,name:MW}),r=t.className,n=t.confirmTitle,i=t.confirmContent,o=t.confirmColor,u=o===void 0?"primary":o,a=t.icon,p=a===void 0?h3e:a,h=t.label,m=t.mutationMode,v=m===void 0?"pessimistic":m;t.onClick;var w=t.redirect,x=w===void 0?"list":w,P=t.translateOptions,T=P===void 0?{}:P,R=t.titleTranslateOptions,k=R===void 0?T:R,N=t.contentTranslateOptions,F=N===void 0?T:N,D=t.mutationOptions,U=t.color,B=U===void 0?"error":U,Z=t.successMessage,J=Pz(t,["className","confirmTitle","confirmContent","confirmColor","icon","label","mutationMode","onClick","redirect","translateOptions","titleTranslateOptions","contentTranslateOptions","mutationOptions","color","successMessage"]),X=Di(),le=yl(t),H=su(t),G=Mf(),ae=cH(H),se=H0(),ue=je.useState(!1),me=ue[0],Ce=ue[1];if(!H)throw new Error("<DeleteWithConfirmButton> components should be used inside a <Resource> component or provided with a resource prop. (The <Resource> component set the resource prop for all its children).");var pe=D||{},Ee=pe.onSuccess,Fe=pe.onError,Ke=Pz(pe,["onSuccess","onError"]),fe=oH({record:le,redirect:x,mutationMode:v,mutationOptions:Kd(Kd({},Ke),{onSuccess:function(It,gt,Le){Ce(!1),Ee?Ee(It,gt,Le):(G(Z??"resources.".concat(H,".notifications.deleted"),{type:"info",messageArgs:{smart_count:1,_:X("ra.notification.deleted",{smart_count:1})},undoable:v==="undoable"}),le&&ae([le.id]),se(x,H))},onError:function(It,gt,Le){Ce(!1),Fe?Fe(It,gt,Le):G(typeof It=="string"?It:It?.message||"ra.notification.http_error",{type:"error",messageArgs:{_:typeof It=="string"?It:It?.message?It.message:void 0}})}}),resource:H,successMessage:Z}),_e=fe.isPending,Pe=fe.handleDelete,ke=function(It){It.stopPropagation(),Ce(!0)},$e=function(){Ce(!1)},ht=jg(H),Ot=ht(le),mt=X("resources.".concat(H,".forcedCaseName"),{smart_count:1,_:bp.humanize(X("resources.".concat(H,".name"),{smart_count:1,_:H?bp.singularize(H):void 0}),!0)});I.isValidElement(Ot)&&(Ot="#".concat(le?.id));var nt=lp({resourceI18nKey:"resources.".concat(H,".action.delete"),baseI18nKey:"ra.action.delete",options:{name:mt,recordRepresentation:Ot},userText:h}),Nt=lp({resourceI18nKey:"resources.".concat(H,".message.delete_title"),baseI18nKey:"ra.message.delete_title",options:Kd({recordRepresentation:Ot,name:mt,id:le?.id},k),userText:n}),kt=lp({resourceI18nKey:"resources.".concat(H,".message.delete_content"),baseI18nKey:"ra.message.delete_content",options:Kd({recordRepresentation:Ot,name:mt,id:le?.id},F),userText:i});return je.createElement(I.Fragment,null,je.createElement(d3e,Kd({onClick:ke,label:je.createElement(je.Fragment,null,nt),"aria-label":typeof nt=="string"?nt:void 0,className:Hr("ra-delete-button",r),key:"button",color:B},J),p),je.createElement(oTe,{isOpen:me,loading:_e,title:je.createElement(je.Fragment,null,Nt),content:je.createElement(je.Fragment,null,kt),confirmColor:u,onConfirm:Pe,onClose:$e}))},h3e=je.createElement(Qq,null),MW="RaDeleteWithConfirmButton",d3e=nr($g,{name:MW,overridesResolver:function(e,t){return t.root}})({}),W1=function(){return W1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},W1.apply(this,arguments)},p3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},m3e=function(e){var t=pi({name:g3e,props:e}),r=t.mutationMode,n=p3e(t,["mutationMode"]),i=yl(t),o=su(t);if(!o)throw new Error("<DeleteButton> components should be used inside a <Resource> component or provided the resource prop.");var u=Y0({action:"delete",resource:o,record:i}),a=u.canAccess,p=u.isPending,h=uR();if(!i||i.id==null||!a||p)return null;var m=r||(h?.mutationMode?h.mutationMode:"undoable");return m==="undoable"?I.createElement(l3e,W1({record:i},n)):I.createElement(f3e,W1({mutationMode:m,record:i},n))},g3e="RaDeleteButton";const y3e=Ci(ze.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}));var g3=function(){return g3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},g3.apply(this,arguments)},v3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},b3e=function(e){var t=pi({props:e,name:TR}),r=t.icon,n=r===void 0?x3e:r,i=t.label,o=t.scrollToTop,u=o===void 0?!0:o,a=t.className,p=v3e(t,["icon","label","scrollToTop","className"]),h=su(t);if(!h)throw new Error("<EditButton> components should be used inside a <Resource> component or provided with a resource prop. (The <Resource> component set the resource prop for all its children).");var m=yl(t),v=V0(),w=Y0({action:"edit",resource:h,record:m}),x=w.canAccess,P=w.isPending,T=Bg(),R=jg(),k=R(m),N=typeof k=="string"?k:k?.toString(),F=lp({resourceI18nKey:"resources.".concat(h,".action.edit"),baseI18nKey:"ra.action.edit",options:{name:T(h,1),recordRepresentation:N},userText:i});return!m||!x||P?null:I.createElement(E3e,g3({component:Fg,to:v({type:"edit",resource:h,id:m.id}),state:_3e[String(u)],label:I.createElement(I.Fragment,null,F),"aria-label":typeof F=="string"?F:void 0,onClick:w3e,className:Hr(S3e.root,a)},p),n)},_3e={true:{_scrollToTop:!0},false:{}},x3e=I.createElement(y3e,null),w3e=function(e){return e.stopPropagation()},TR="RaEditButton",S3e={root:"".concat(TR,"-root")},E3e=nr($g,{name:TR,overridesResolver:function(e,t){return t.root}})({});const C3e=Ci(ze.jsx("path",{d:"m12.87 15.07-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"}));var A3e=function(e){var t=pi({props:e,name:RW}),r=t.icon,n=r===void 0?P3e:r,i=t.languages,o=I.useState(null),u=o[0],a=o[1],p=XG({locales:i}),h=KG(),m=h[0],v=h[1],w=function(R){var k=p.find(function(N){return N.locale===R});return k?k.name:""},x=function(R){return function(){v(R),a(null)}},P=function(R){a(R.currentTarget)},T=function(){a(null)};return I.createElement(T3e,{component:"span"},I.createElement(Mc,{color:"inherit",variant:"text","aria-controls":"simple-menu","aria-label":"","aria-haspopup":"true",onClick:P,startIcon:n,endIcon:I.createElement(Kue,{fontSize:"small"})},w(m)),I.createElement(CI,{id:"simple-menu",anchorEl:u,keepMounted:!0,open:!!u,onClose:T},p.map(function(R){return I.createElement(AI,{key:R.locale,onClick:x(R.locale),selected:R.locale===m},R.name)})))},P3e=I.createElement(C3e,null),RW="RaLocalesMenuButton",T3e=nr("span",{name:RW,overridesResolver:function(e,t){return t.root}})({});const I3e=Ci(ze.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}));var y3=function(){return y3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},y3.apply(this,arguments)},M3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},R3e=function(e){var t=e.label,r=t===void 0?"ra.action.refresh":t,n=e.icon,i=n===void 0?O3e:n,o=e.onClick,u=e.className,a=M3e(e,["label","icon","onClick","className"]),p=BSe(),h=Di(),m=I.useCallback(function(v){v.preventDefault(),p(),typeof o=="function"&&o(v)},[p,o]);return I.createElement(Sg,{title:r&&h(r,{_:"Refresh"})},I.createElement(Bo,y3({"aria-label":r&&h(r,{_:"Refresh"}),className:u,color:"inherit",onClick:m},a),i))},O3e=I.createElement(I3e,null);const k3e=Ci(ze.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}));var Uv=function(){return Uv=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Uv.apply(this,arguments)},Tz=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},Iz=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},L3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},D3e=function(e){var t=pi({props:e,name:OW}),r=t.color,n=r===void 0?"primary":r,i=t.icon,o=i===void 0?F3e:i;t.invalid;var u=t.label,a=u===void 0?"ra.action.save":u,p=t.onClick,h=t.mutationOptions,m=t.disabled,v=t.type,w=v===void 0?"submit":v,x=t.transform,P=t.variant,T=P===void 0?"contained":P,R=t.alwaysEnable,k=R===void 0?!1:R,N=L3e(t,["color","icon","invalid","label","onClick","mutationOptions","disabled","type","transform","variant","alwaysEnable"]),F=Di(),D=Z0(),U=uR(),B=x2(),Z=B.dirtyFields,J=B.isValidating,X=B.isSubmitting,le=Object.keys(Z).length>0,H=CH(),G=j3e(k===!1||k===void 0?void 0:!k,m||!le&&H==null||J||X);xR(w==="submit"&&(h&&(h.onSuccess||h.onError)||x),'Cannot use <SaveButton mutationOptions> props on a button of type "submit". To override the default mutation options on a particular save button, set the <SaveButton type="button"> prop, or set mutationOptions in the main view component (<Create> or <Edit>).');var ae=I.useCallback(function(me){return Tz(void 0,void 0,void 0,function(){var Ce;return Iz(this,function(pe){switch(pe.label){case 0:return U?.save?[4,U.save(me,Uv(Uv({},h),{transform:x}))]:[3,2];case 1:Ce=pe.sent(),pe.label=2;case 2:return Ce!=null&&EH(Ce,D.setError),[2]}})})},[D.setError,U,h,x]),se=I.useCallback(function(me){return Tz(void 0,void 0,void 0,function(){return Iz(this,function(Ce){switch(Ce.label){case 0:return p&&p(me),me.defaultPrevented?[2]:w!=="button"?[3,2]:(me.stopPropagation(),[4,D.handleSubmit(ae)(me)]);case 1:Ce.sent(),Ce.label=2;case 2:return[2]}})})},[p,w,D,ae]),ue=a&&F(a,{_:a});return I.createElement(B3e,Uv({variant:T,type:w,color:n,"aria-label":ue,disabled:G,onClick:se},N),X?I.createElement(xg,{sx:N3e,size:14,thickness:3,color:"inherit"}):o,ue)},N3e={"&.MuiCircularProgress-root":{marginRight:"10px",marginLeft:"2px"}},F3e=I.createElement(k3e,null),OW="RaSaveButton",B3e=nr(Mc,{name:OW,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={position:"relative"},t["& .MuiSvgIcon-root, & .MuiIcon-root, & .MuiCircularProgress-root"]={marginRight:r.spacing(1)},t["& .MuiSvgIcon-root, & .MuiIcon-root"]={fontSize:18},t}),j3e=function(e,t){return typeof e>"u"?t:e},v3=function(){return v3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},v3.apply(this,arguments)},z3e=function(e){var t=pi({props:e,name:kW});return je.createElement($3e,v3({onClick:q3e,className:"skip-nav-button",label:"ra.navigation.skip_nav",variant:"contained"},t))},kW="RaSkipNavigationButton",$3e=nr($g,{name:kW,overridesResolver:function(e,t){return t.root}})(function(e){var t=e.theme;return{position:"fixed",padding:t.spacing(1),backgroundColor:(t.vars||t).palette.background.default,color:(t.vars||t).palette.primary.contrastText,transition:t.transitions.create(["top","opacity"],{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.leavingScreen}),left:t.spacing(2),top:t.spacing(-10),zIndex:5e3,"&:hover":{opacity:.8,backgroundColor:(t.vars||t).palette.background.default},"&:focus":{top:t.spacing(2),transition:t.transitions.create(["top","opacity"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})}}}),q3e=function(){if(!(typeof document>"u")){var e=document.getElementById("main-content");e&&(e.setAttribute("tabIndex","-1"),e.focus(),e.blur(),e.removeAttribute("tabIndex"))}},b3=function(){return b3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b3.apply(this,arguments)},U3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},V3e=function(e){var t=pi({props:e,name:IR}),r=t.className,n=t.title,i=n===void 0?"ra.page.error":n,o=t.message,u=o===void 0?"ra.message.auth_error":o,a=U3e(t,["className","title","message"]),p=Di();return I.createElement(G3e,b3({className:r},a),I.createElement("div",{className:LW.message},I.createElement("h1",null,p(i,{_:i})),I.createElement("div",null,p(u,{_:u})),I.createElement($g,{component:Fg,to:"/login",label:"ra.auth.sign_in"},I.createElement(ER,null))))},IR="RaAuthError",LW={message:"".concat(IR,"-message")},G3e=nr("div",{name:IR,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",justifyContent:"center"},t[r.breakpoints.up("md")]={height:"100%"},t[r.breakpoints.down("xl")]={height:"100vh",marginTop:"-3em"},t["& .".concat(LW.message)]={textAlign:"center",fontFamily:"Roboto, sans-serif",opacity:.5,margin:"0 1em"},t}),H3e=function(){var e=VAe().error;return e?I.createElement(V3e,{message:e?e.message:void 0}):I.createElement(Ug,null)},W3e=function(e){var t=e.helperText,r=e.error,n=Di();return r?I.createElement(oCe,{error:r}):t===!1?null:I.isValidElement(t)?t:typeof t=="string"&&t.length>0?I.createElement(I.Fragment,null,n(t,{_:t})):I.createElement("span",{dangerouslySetInnerHTML:Z3e})},Z3e={__html:"&#8203;"},Z1=function(){return Z1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Z1.apply(this,arguments)},K3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},s_,DW=function(e){var t,r,n,i=Q3({props:e,name:K1}),o=i.children,u=i.className,a=u===void 0?"":u,p=i.color,h=i.component,m=h===void 0?"span":h,v=i.fullWidth,w=i.isRequired,x=i.label,P=i.resource,T=i.source,R=i.TypographyProps,k=K3e(i,["children","className","color","component","fullWidth","isRequired","label","resource","source","TypographyProps"]);return I.createElement(X3e,Z1({component:m,className:Hr(a,(t={},t[X1.fullWidth]=v,t))},k),x!==!1&&o.props.label!==!1&&typeof o.type!="string"&&((r=o.type)===null||r===void 0?void 0:r.displayName)!=="Labeled"&&((n=o.type)===null||n===void 0?void 0:n.displayName)!=="Labeled"?I.createElement(No,Z1({sx:p?{color:p}:{color:function(N){return(N.vars||N).palette.text.secondary}},className:X1.label},R),I.createElement(UH,{label:x||o.props.label,source:T||o.props.source,resource:P,isRequired:w})):null,o)};DW.displayName="Labeled";var K1="RaLabeled",X1={label:"".concat(K1,"-label"),fullWidth:"".concat(K1,"-fullWidth")},X3e=nr(MI,{name:K1,overridesResolver:function(e,t){return t.root}})((s_={display:"inline-flex",marginBottom:"0.2em"},s_["&.".concat(X1.fullWidth)]={width:"100%"},s_["& .".concat(X1.label)]={fontSize:"0.75em",marginBottom:"0.2em"},s_)),_3=function(){return _3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_3.apply(this,arguments)},Y3e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},NW=function(e){var t,r=e.icon,n=e.message,i=e.variant,o=i===void 0?"standard":i,u=Y3e(e,["icon","message","variant"]),a=su(e),p=Bg(),h=lp({baseI18nKey:"ra.notification.offline",resourceI18nKey:a?"resources.".concat(a,".notification.offline"):void 0,userText:n,options:{name:a?p(a,0):void 0,_:"No connectivity. Could not fetch data."}});return I.createElement(J3e,_3({className:Hr(w3.root,(t={},t[w3.inline]=o==="inline",t)),severity:"warning",variant:o==="inline"?"outlined":o,icon:o==="inline"?!1:r},u),I.createElement(No,{variant:"body2"},h))},x3="RaOffline",w3={root:"".concat(x3,"-root"),inline:"".concat(x3,"-inline")},J3e=nr(xte,{name:x3,overridesResolver:function(e,t){return t.root}})(function(){var e;return e={},e["&.".concat(w3.inline)]={border:"none",display:"inline-flex",padding:0,margin:0},e});const Mz=Ci(ze.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));var Y1=function(){return Y1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Y1.apply(this,arguments)},Rz=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Bd,FW=I.forwardRef(function(e,t){var r=pi({props:e,name:"MuiTextField"}),n=pi({props:r,name:Xd}),i=n.clearAlwaysVisible,o=n.InputProps,u=n.value,a=n.resettable,p=n.disabled,h=n.readOnly,m=n.variant,v=n.margin,w=n.className,x=Rz(n,["clearAlwaysVisible","InputProps","value","resettable","disabled","readOnly","variant","margin","className"]),P=Di(),T=n.onChange,R=I.useCallback(function(le){le.preventDefault(),T&&T("")},[T]),k=df.clearButton,N=df.clearIcon,F=df.inputAdornedEnd,D=df.selectAdornment,U=df.visibleClearIcon,B=o||{},Z=B.endAdornment,J=Rz(B,["endAdornment"]);if(i&&Z)throw new Error("ResettableTextField cannot display both an endAdornment and a clear button always visible");var X=function(){var le;return a?u?I.createElement(x_,{position:"end",className:n.select?D:void 0},I.createElement(Bo,{className:k,"aria-label":P("ra.action.clear_input_value"),title:P("ra.action.clear_input_value"),onClick:R,onMouseDown:Q3e,disabled:p||h,size:"large"},I.createElement(Mz,{className:Hr(N,(le={},le[U]=i||u,le))}))):i?I.createElement(x_,{position:"end",className:n.select?D:void 0},I.createElement(Bo,{className:k,"aria-label":P("ra.action.clear_input_value"),title:P("ra.action.clear_input_value"),disabled:!0,size:"large"},I.createElement(Mz,{className:Hr(N,U)}))):Z||I.createElement(x_,{position:"end",className:n.select?D:void 0},I.createElement("span",{className:k}," ")):Z};return I.createElement(tIe,Y1({value:u,InputProps:Y1({readOnly:h,classes:n.select&&m==="filled"?{adornedEnd:F}:{},endAdornment:X()},J),disabled:p||h,variant:m,margin:v,className:w},x,{inputRef:t}))});FW.displayName="ResettableTextField";var Q3e=function(e){e.preventDefault()},Xd="RaResettableTextField",df={clearIcon:"".concat(Xd,"-clearIcon"),visibleClearIcon:"".concat(Xd,"-visibleClearIcon"),clearButton:"".concat(Xd,"-clearButton"),selectAdornment:"".concat(Xd,"-selectAdornment"),inputAdornedEnd:"".concat(Xd,"-inputAdornedEnd")},eIe=(Bd={},Bd["& .".concat(df.clearIcon)]={height:16,width:0},Bd["& .".concat(df.visibleClearIcon)]={width:16},Bd["& .".concat(df.clearButton)]={height:24,width:24,padding:0},Bd["& .".concat(df.selectAdornment)]={position:"absolute",right:24},Bd["& .".concat(df.inputAdornedEnd)]={paddingRight:0},Bd),tIe=nr(rq,{name:Xd,overridesResolver:function(e,t){return t.root}})(eIe),rIe=function(e){var t,r=I.memo(e);return r.displayName=(t=e.displayName)===null||t===void 0?void 0:t.replace("Impl",""),r},S3=function(){return S3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},S3.apply(this,arguments)},nIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},BW=function(e){var t=pi({props:e,name:jW}),r=t.className,n=t.emptyText,i=nIe(t,["className","emptyText"]),o=Di(),u=cAe(t);return I.createElement(iIe,S3({component:"span",variant:"body2",className:r},cEe(i)),u!=null&&typeof u!="string"?u.toString():u||(n?o(n,{_:n}):null))};BW.displayName="TextFieldImpl";var ec=rIe(BW),jW="RaTextField",iIe=nr(No,{name:jW,overridesResolver:function(e,t){return t.root}})({}),J1=function(){return J1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},J1.apply(this,arguments)},aIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},nu=function(e){var t=pi({props:e,name:zW}),r=t.className,n=t.defaultValue,i=t.label,o=t.format,u=t.helperText,a=t.onBlur,p=t.onChange,h=t.parse,m=t.resource,v=t.source,w=t.validate,x=aIe(t,["className","defaultValue","label","format","helperText","onBlur","onChange","parse","resource","source","validate"]),P=TH(J1({defaultValue:n,format:o,parse:h,resource:m,source:v,type:"text",validate:w,onBlur:a,onChange:p},x)),T=P.field,R=P.fieldState,k=R.error,N=R.invalid,F=P.id,D=P.isRequired,U=u!==!1||N;return I.createElement(oIe,J1({id:F},T,{className:Hr("ra-input","ra-input-".concat(v),r),label:i!==""&&i!==!1?I.createElement(UH,{label:i,source:v,resource:m,isRequired:D}):null,error:N,helperText:U?I.createElement(W3e,{error:k?.message,helperText:u}):null},pCe(x)))},zW="RaTextInput",oIe=nr(FW,{name:zW,overridesResolver:function(e,t){return t.root}})({});const sIe=Ci(ze.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),lIe=Ci(ze.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}));var E3=function(){return E3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},E3.apply(this,arguments)},uIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},cIe=function(e){var t=pi({props:e,name:$W}),r=t.initiallyVisible,n=r===void 0?!1:r,i=uIe(t,["initiallyVisible"]),o=I.useState(n),u=o[0],a=o[1],p=Di(),h=function(){a(!u)};return I.createElement(fIe,E3({type:u?"text":"password",size:"small",InputProps:{endAdornment:I.createElement(x_,{position:"end"},I.createElement(Bo,{"aria-label":p(u?"ra.input.password.toggle_visible":"ra.input.password.toggle_hidden"),onClick:h,size:"small"},u?I.createElement(sIe,{fontSize:"small"}):I.createElement(lIe,{fontSize:"small"})))}},i))},$W="RaPasswordInput",fIe=nr(nu,{name:$W,overridesResolver:function(e,t){return t.root}})({}),hIe=function(e){var t=pi({props:e,name:Vv}),r=t.redirectTo,n=t.className,i=t.sx,o=t.children,u=I.useState(!1),a=u[0],p=u[1],h=wAe(),m=Di(),v=Mf(),w=function(x){p(!0),h(x,r).then(function(){p(!1)}).catch(function(P){p(!1),v(typeof P=="string"?P:typeof P>"u"||!P.message?"ra.auth.sign_in_error":P.message,{type:"error",messageArgs:{_:typeof P=="string"?P:P&&P.message?P.message:void 0}})})};return I.createElement(dIe,{onSubmit:w,mode:"onChange",noValidate:!0,className:n,sx:i},I.createElement(_I,{className:og.content},o||I.createElement(I.Fragment,null,I.createElement(nu,{autoFocus:!0,source:"username",label:m("ra.auth.username"),autoComplete:"username",validate:ez()}),I.createElement(cIe,{source:"password",label:m("ra.auth.password"),autoComplete:"current-password",validate:ez()})),I.createElement(Mc,{variant:"contained",type:"submit",color:"primary",disabled:a,fullWidth:!0,className:og.button},a?I.createElement(xg,{className:og.icon,size:19,thickness:3}):m("ra.auth.sign_in"))))},Vv="RaLoginForm",og={content:"".concat(Vv,"-content"),button:"".concat(Vv,"-button"),icon:"".concat(Vv,"-icon")},dIe=nr(AH,{name:Vv,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t["& .".concat(og.content)]={width:300,paddingBottom:"".concat(r.spacing(2),"!important")},t["& .".concat(og.button)]={marginTop:r.spacing(2)},t["& .".concat(og.icon)]={margin:r.spacing(.3)},t}),C3=function(){return C3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},C3.apply(this,arguments)},pIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},mIe=function(e){var t=pi({props:e,name:Gv}),r=t.children,n=r===void 0?gIe:r,i=t.backgroundImage,o=t.avatarIcon,u=o===void 0?yIe:o,a=pIe(t,["children","backgroundImage","avatarIcon"]),p=I.useRef(null),h=!1,m=LAe(),v=cd();I.useEffect(function(){m({},!1).then(function(){v("/")}).catch(function(){})},[m,v]);var w=function(){!h&&p.current&&(p.current.style.backgroundImage="url(".concat(i,")"),h=!0)},x=function(){if(i){var P=new Image;P.onload=w,P.src=i}};return I.useEffect(function(){h||x()}),I.createElement(vIe,C3({},a,{ref:p}),I.createElement(bI,{className:sg.card},I.createElement("div",{className:sg.avatar},I.createElement(UP,{className:sg.icon},u)),n))},gIe=I.createElement(hIe,null),yIe=I.createElement(ER,null),Gv="RaLogin",sg={card:"".concat(Gv,"-card"),avatar:"".concat(Gv,"-avatar"),icon:"".concat(Gv,"-icon")},vIe=nr("div",{name:Gv,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={display:"flex",flexDirection:"column",minHeight:"100vh",height:"1px",alignItems:"center",justifyContent:"flex-start",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundImage:"radial-gradient(circle at 50% 14em, #313264 0%, #00023b 60%, #00023b 100%)"},t["& .".concat(sg.card)]={minWidth:300,marginTop:"6em"},t["& .".concat(sg.avatar)]={margin:"1em",display:"flex",justifyContent:"center"},t["& .".concat(sg.icon)]={backgroundColor:(r.vars||r).palette.secondary[500]},t}),A3=function(){return A3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},A3.apply(this,arguments)},bIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},_Ie=function(e){var t=K0(e).hasShow;return I.createElement(PW,A3({},xIe(e)),t&&I.createElement(oPe,null))},xIe=function(e){e.hasCreate,e.hasEdit,e.hasShow,e.hasList,e.resource;var t=bIe(e,["hasCreate","hasEdit","hasShow","hasList","resource"]);return t},Q1=function(){return Q1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Q1.apply(this,arguments)},wIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Yy,SIe=I.createElement(_Ie,null),EIe=I.createElement(NW,null),CIe=function(e){var t,r=e.actions,n=e.aside,i=e.children,o=e.render,u=e.className,a=e.component,p=a===void 0?bI:a,h=e.emptyWhileLoading,m=h===void 0?!1:h,v=e.offline,w=v===void 0?EIe:v,x=e.title,P=wIe(e,["actions","aside","children","render","className","component","emptyWhileLoading","offline","title"]),T=K0().hasShow,R=nEe(),k=R.resource,N=R.defaultTitle,F=R.record,D=R.isPaused,U=R.isPending,B=typeof r>"u"&&T?SIe:r;return D&&U&&w!==void 0&&w!==!1?I.createElement(Oz,Q1({className:Hr("edit-page",u)},P),I.createElement("div",{className:Hr(nh.main,nh.noActions)},I.createElement(p,{className:nh.card},w),n)):!F&&U&&m?null:I.createElement(Oz,Q1({className:Hr("edit-page",u)},P),x!==!1&&I.createElement(Q0,{title:x,defaultTitle:N,preferenceKey:"".concat(k,".edit.title")}),B,I.createElement("div",{className:Hr(nh.main,(t={},t[nh.noActions]=!B,t))},I.createElement(p,{className:nh.card},o?o(R):F?i:I.createElement(_I,null," ")),n))},j_="RaEdit",nh={main:"".concat(j_,"-main"),noActions:"".concat(j_,"-noActions"),card:"".concat(j_,"-card")},Oz=nr("div",{name:j_,overridesResolver:function(e,t){return t.root}})((Yy={},Yy["& .".concat(nh.main)]={display:"flex",alignItems:"flex-start"},Yy["& .".concat(nh.noActions)]={marginTop:"1em"},Yy["& .".concat(nh.card)]={flex:"1 1 auto"},Yy)),P3=function(){return P3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},P3.apply(this,arguments)},AIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Vg=function(e){var t=pi({props:e,name:TIe}),r=t.resource,n=t.id,i=t.mutationMode,o=t.mutationOptions,u=t.queryOptions,a=t.redirect,p=t.transform,h=t.disableAuthentication,m=t.loading,v=m===void 0?PIe:m,w=AIe(t,["resource","id","mutationMode","mutationOptions","queryOptions","redirect","transform","disableAuthentication","loading"]);if(!t.render&&!t.children)throw new Error("<Edit> requires either a `render` prop or `children` prop");return I.createElement(rEe,{resource:r,id:n,mutationMode:i,mutationOptions:o,queryOptions:u,redirect:a,transform:p,disableAuthentication:h,loading:v,offline:!1},I.createElement(CIe,P3({},w)))},PIe=I.createElement(Ug,null),TIe="RaEdit",T3=function(){return T3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},T3.apply(this,arguments)},IIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},MIe=function(e){var t,r=pi({props:e,name:Hv}),n=r.children,i=r.className,o=r.resource,u=IIe(r,["children","className","resource"]),a=Du(function(p){return p.breakpoints.down("sm")});return I.createElement(RIe,T3({className:Hr((t={},t[lg.mobileToolbar]=a,t[lg.desktopToolbar]=!a,t),i),role:"toolbar"},u),I.Children.count(n)===0?I.createElement("div",{className:lg.defaultToolbar},I.createElement(D3e,null),I.createElement(m3e,{resource:o})):n)},Hv="RaToolbar",lg={desktopToolbar:"".concat(Hv,"-desktopToolbar"),mobileToolbar:"".concat(Hv,"-mobileToolbar"),defaultToolbar:"".concat(Hv,"-defaultToolbar")},RIe=nr(RI,{name:Hv,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={backgroundColor:(r.vars||r).palette.divider},t["&.".concat(lg.desktopToolbar)]={},t["&.".concat(lg.mobileToolbar)]={position:"fixed",bottom:0,left:0,right:0,padding:"16px",width:"100%",boxSizing:"border-box",flexShrink:0,zIndex:2},t["& .".concat(lg.defaultToolbar)]={flex:1,display:"flex",justifyContent:"space-between"},t}),ex=function(){return ex=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ex.apply(this,arguments)},qW=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Gg=function(e){var t=pi({props:e,name:UW}),r=t.children,n=t.className,i=t.component,o=i===void 0?OIe:i,u=t.sx,a=t.toolbar,p=a===void 0?kIe:a,h=qW(t,["children","className","component","sx","toolbar"]);return I.createElement(AH,ex({},h),I.createElement(o,{className:n,sx:u},I.createElement(MI,ex({},LIe(t),{sx:{alignItems:"flex-start"}}),r)),p!==!1?p:null)},UW="RaSimpleForm",OIe=nr(_I,{name:UW,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={},t[r.breakpoints.down("sm")]={paddingBottom:"5em"},t}),kIe=I.createElement(MIe,null),LIe=function(e){e.children,e.className,e.component,e.criteriaMode,e.defaultValues,e.delayError,e.onSubmit,e.record,e.resource,e.reValidateMode,e.sx,e.toolbar,e.validate,e.resetOptions,e.resolver,e.sanitizeEmptyValues,e.shouldFocusError,e.shouldUnregister,e.shouldUseNativeValidation,e.warnWhenUnsavedChanges;var t=qW(e,["children","className","component","criteriaMode","defaultValues","delayError","onSubmit","record","resource","reValidateMode","sx","toolbar","validate","resetOptions","resolver","sanitizeEmptyValues","shouldFocusError","shouldUnregister","shouldUseNativeValidation","warnWhenUnsavedChanges"]);return t},I3=function(){return I3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},I3.apply(this,arguments)},DIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},NIe=function(e){var t=K0(e).hasEdit;return I.createElement(PW,I3({},FIe(e)),t&&I.createElement(b3e,null))},FIe=function(e){e.hasCreate,e.hasEdit,e.hasShow,e.hasList,e.resource;var t=DIe(e,["hasCreate","hasEdit","hasShow","hasList","resource"]);return t},tx=function(){return tx=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tx.apply(this,arguments)},BIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Jy,jIe=I.createElement(NIe,null),zIe=I.createElement(NW,null),$Ie=function(e){var t,r=e.actions,n=e.aside,i=e.children,o=e.render,u=e.className,a=e.component,p=a===void 0?bI:a,h=e.emptyWhileLoading,m=h===void 0?!1:h,v=e.offline,w=v===void 0?zIe:v,x=e.title,P=BIe(e,["actions","aside","children","render","className","component","emptyWhileLoading","offline","title"]),T=_Ce(),R=T.resource,k=T.defaultTitle,N=T.isPaused,F=T.isPending,D=T.record,U=K0().hasEdit,B=typeof r>"u"&&U?jIe:r;return N&&F&&w!==void 0&&w!==!1?I.createElement(kz,tx({className:Hr("show-page",u)},P),I.createElement("div",{className:Hr(ih.main,ih.noActions)},I.createElement(p,{className:ih.card},w),n)):!D&&m?null:I.createElement(kz,tx({className:Hr("show-page",u)},P),x!==!1&&I.createElement(Q0,{title:x,defaultTitle:k,preferenceKey:"".concat(R,".show.title")}),B!==!1&&B,I.createElement("div",{className:Hr(ih.main,(t={},t[ih.noActions]=!B,t))},I.createElement(p,{className:ih.card},o?o(T):i),n))},z_="RaShow",ih={main:"".concat(z_,"-main"),noActions:"".concat(z_,"-noActions"),card:"".concat(z_,"-card")},kz=nr("div",{name:z_,overridesResolver:function(e,t){return t.root}})((Jy={},Jy["& .".concat(ih.main)]={display:"flex"},Jy["& .".concat(ih.noActions)]={marginTop:"1em"},Jy["& .".concat(ih.card)]={flex:"1 1 auto"},Jy)),M3=function(){return M3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},M3.apply(this,arguments)},qIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Hg=function(e){var t=pi({props:e,name:VIe}),r=t.id,n=t.resource,i=t.queryOptions,o=t.disableAuthentication,u=t.loading,a=u===void 0?UIe:u,p=qIe(t,["id","resource","queryOptions","disableAuthentication","loading"]);if(!t.render&&!t.children)throw new Error("<Show> requires either a `render` prop or `children` prop");return I.createElement(bCe,{id:r,disableAuthentication:o,queryOptions:i,resource:n,loading:a,offline:!1},I.createElement($Ie,M3({},p)))},UIe=I.createElement(Ug,null),VIe="RaShow",R3=function(){return R3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},R3.apply(this,arguments)},VW=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Wg=function(e){var t=pi({props:e,name:rx}),r=t.className,n=t.children,i=t.spacing,o=i===void 0?1:i,u=t.sx,a=VW(t,["className","children","spacing","sx"]),p=yl(t);return p?I.createElement(uH,{value:t.record},I.createElement(GIe,{className:r,sx:u},I.createElement(MI,R3({spacing:o},HIe(a),{className:nx.stack}),I.Children.map(n,function(h){return h&&I.isValidElement(h)?I.createElement(DW,{key:h.props.source,className:Hr("ra-field",h.props.source&&"ra-field-".concat(h.props.source),nx.row,h.props.className)},h):null})))):null},rx="RaSimpleShowLayout",nx={stack:"".concat(rx,"-stack"),row:"".concat(rx,"-row")},GIe=nr("div",{name:rx,overridesResolver:function(e,t){return t.root}})(function(e){var t,r=e.theme;return t={flex:1,padding:"".concat(r.spacing(1)," ").concat(r.spacing(2))},t["& .".concat(nx.stack)]={},t["& .".concat(nx.row)]={display:"inline"},t}),HIe=function(e){e.record,e.resource,e.initialValues,e.translate;var t=VW(e,["record","resource","initialValues","translate"]);return t},O3=function(){return O3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},O3.apply(this,arguments)},WIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},ZIe=function(e){var t=e.accessDenied,r=t===void 0?uPe:t,n=e.authCallbackPage,i=n===void 0?H3e:n,o=e.authenticationError,u=o===void 0?eTe:o,a=e.catchAll,p=a===void 0?YTe:a,h=e.error,m=h===void 0?xW:h,v=e.layout,w=v===void 0?GTe:v,x=e.loading,P=x===void 0?ZTe:x,T=e.loginPage,R=T===void 0?mIe:T,k=e.notification,N=k===void 0?r3e:k,F=WIe(e,["accessDenied","authCallbackPage","authenticationError","catchAll","error","layout","loading","loginPage","notification"]);return I.createElement(Kne,{enableColorScheme:!0},I.createElement(XCe,O3({accessDenied:r,authCallbackPage:i,authenticationError:u,catchAll:p,error:m,layout:w,loading:P,loginPage:R},F)),I.createElement(N))},k3=function(){return k3=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},k3.apply(this,arguments)},KIe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},GW=function(e){var t=e.theme,r=e.lightTheme,n=r===void 0?sW:r,i=e.darkTheme,o=e.defaultTheme,u=e.children,a=KIe(e,["theme","lightTheme","darkTheme","defaultTheme","children"]);return I.createElement(PCe,k3({},a),I.createElement(iW.Provider,{value:{lightTheme:t||n,darkTheme:t&&!i?void 0:!i&&i!==null?OPe:i??void 0,defaultTheme:o}},I.createElement(RPe,null,u)))};GW.displayName="AdminContext";var XIe={ra:{action:{add_filter:"Add filter",add:"Add",back:"Go Back",bulk_actions:"1 item selected |||| %{smart_count} items selected",cancel:"Cancel",clear_array_input:"Clear the list",clear_input_value:"Clear value",clone:"Clone",confirm:"Confirm",create:"Create",create_item:"Create %{item}",delete:"Delete",edit:"Edit",export:"Export",list:"List",refresh:"Refresh",remove_filter:"Remove this filter",remove_all_filters:"Remove all filters",remove:"Remove",save:"Save",search:"Search",search_columns:"Search columns",select_all:"Select all",select_all_button:"Select all",select_row:"Select this row",show:"Show",sort:"Sort",undo:"Undo",unselect:"Unselect",expand:"Expand",close:"Close",open_menu:"Open menu",close_menu:"Close menu",update:"Update",move_up:"Move up",move_down:"Move down",open:"Open",toggle_theme:"Toggle light/dark mode",select_columns:"Columns",update_application:"Reload Application"},boolean:{true:"Yes",false:"No",null:" "},page:{create:"Create %{name}",dashboard:"Dashboard",edit:"%{name} %{recordRepresentation}",error:"Something went wrong",list:"%{name}",loading:"Loading",not_found:"Not Found",show:"%{name} %{recordRepresentation}",empty:"No %{name} yet.",invite:"Do you want to add one?",access_denied:"Access denied",authentication_error:"Authentication error"},input:{file:{upload_several:"Drop some files to upload, or click to select one.",upload_single:"Drop a file to upload, or click to select it."},image:{upload_several:"Drop some pictures to upload, or click to select one.",upload_single:"Drop a picture to upload, or click to select it."},references:{all_missing:"Unable to find references data.",many_missing:"At least one of the associated references no longer appears to be available.",single_missing:"Associated reference no longer appears to be available."},password:{toggle_visible:"Hide password",toggle_hidden:"Show password"}},message:{about:"About",access_denied:"You don't have the right permissions to access this page",are_you_sure:"Are you sure?",authentication_error:"The authentication server returned an error and your credentials could not be checked.",auth_error:"An error occurred while validating the authentication token.",bulk_delete_content:"Are you sure you want to delete this %{name}? |||| Are you sure you want to delete these %{smart_count} items?",bulk_delete_title:"Delete %{name} |||| Delete %{smart_count} %{name}",bulk_update_content:"Are you sure you want to update %{name} %{recordRepresentation}? |||| Are you sure you want to update these %{smart_count} items?",bulk_update_title:"Update %{name} %{recordRepresentation} |||| Update %{smart_count} %{name}",clear_array_input:"Are you sure you want to clear the whole list?",delete_content:"Are you sure you want to delete this %{name}?",delete_title:"Delete %{name} %{recordRepresentation}",details:"Details",error:"A client error occurred and your request couldn't be completed.",invalid_form:"The form is not valid. Please check for errors",loading:"Please wait",no:"No",not_found:"Either you typed a wrong URL, or you followed a bad link.",select_all_limit_reached:"There are too many elements to select them all. Only the first %{max} elements were selected.",unsaved_changes:"Some of your changes weren't saved. Are you sure you want to ignore them?",yes:"Yes",placeholder_data_warning:"Network issue: Data refresh failed."},navigation:{clear_filters:"Clear filters",no_filtered_results:"No %{name} found using the current filters.",no_results:"No %{name} found",no_more_results:"The page number %{page} is out of boundaries. Try the previous page.",page_out_of_boundaries:"Page number %{page} out of boundaries",page_out_from_end:"Cannot go after last page",page_out_from_begin:"Cannot go before page 1",page_range_info:"%{offsetBegin}-%{offsetEnd} of %{total}",partial_page_range_info:"%{offsetBegin}-%{offsetEnd} of more than %{offsetEnd}",current_page:"Page %{page}",page:"Go to page %{page}",first:"Go to first page",last:"Go to last page",next:"Go to next page",previous:"Go to previous page",page_rows_per_page:"Rows per page:",skip_nav:"Skip to content"},sort:{sort_by:"Sort by %{field_lower_first} %{order}",ASC:"ascending",DESC:"descending"},auth:{auth_check_error:"Please login to continue",user_menu:"Profile",username:"Username",password:"Password",email:"Email",sign_in:"Sign in",sign_in_error:"Authentication failed, please retry",logout:"Logout"},notification:{updated:"Element updated |||| %{smart_count} elements updated",created:"Element created",deleted:"Element deleted |||| %{smart_count} elements deleted",bad_item:"Incorrect element",item_doesnt_exist:"Element does not exist",http_error:"Server communication error",data_provider_error:"dataProvider error. Check the console for details.",i18n_error:"Cannot load the translations for the specified language",canceled:"Action cancelled",logged_out:"Your session has ended, please reconnect.",not_authorized:"You're not authorized to access this resource.",application_update_available:"A new version is available.",offline:"No connectivity. Could not fetch data."},validation:{required:"Required",minLength:"Must be %{min} characters at least",maxLength:"Must be %{max} characters or less",minValue:"Must be at least %{min}",maxValue:"Must be %{max} or less",number:"Must be a number",email:"Must be a valid email",oneOf:"Must be one of: %{options}",regex:"Must match a specific format (regexp): %{pattern}",unique:"Must be unique"},saved_queries:{label:"Saved queries",query_name:"Query name",new_label:"Save current query...",new_dialog_title:"Save current query as",remove_label:"Remove saved query",remove_label_with_name:'Remove query "%{name}"',remove_dialog_title:"Remove saved query?",remove_message:"Are you sure you want to remove that item from your list of saved queries?",help:"Filter the list and save this query for later"},configurable:{customize:"Customize",configureMode:"Configure this page",inspector:{title:"Inspector",content:"Hover the application UI elements to configure them",reset:"Reset Settings",hideAll:"Hide All",showAll:"Show All"},Datagrid:{title:"Datagrid",unlabeled:"Unlabeled column #%{column}"},SimpleForm:{title:"Form",unlabeled:"Unlabeled input #%{input}"},SimpleList:{title:"List",primaryText:"Primary text",secondaryText:"Secondary text",tertiaryText:"Tertiary text"}}}},bA,Lz;function HW(){if(Lz)return bA;Lz=1;var e=Object.prototype.toString;return bA=function(r){var n=e.call(r),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&e.call(r.callee)==="[object Function]"),i},bA}var _A,Dz;function YIe(){if(Dz)return _A;Dz=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=HW(),i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),u=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(w){var x=w.constructor;return x&&x.prototype===w},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},m=(function(){if(typeof window>"u")return!1;for(var w in window)try{if(!h["$"+w]&&t.call(window,w)&&window[w]!==null&&typeof window[w]=="object")try{p(window[w])}catch{return!0}}catch{return!0}return!1})(),v=function(w){if(typeof window>"u"||!m)return p(w);try{return p(w)}catch{return!1}};e=function(x){var P=x!==null&&typeof x=="object",T=r.call(x)==="[object Function]",R=n(x),k=P&&r.call(x)==="[object String]",N=[];if(!P&&!T&&!R)throw new TypeError("Object.keys called on a non-object");var F=u&&T;if(k&&x.length>0&&!t.call(x,0))for(var D=0;D<x.length;++D)N.push(String(D));if(R&&x.length>0)for(var U=0;U<x.length;++U)N.push(String(U));else for(var B in x)!(F&&B==="prototype")&&t.call(x,B)&&N.push(String(B));if(o)for(var Z=v(x),J=0;J<a.length;++J)!(Z&&a[J]==="constructor")&&t.call(x,a[J])&&N.push(a[J]);return N}}return _A=e,_A}var xA,Nz;function JIe(){if(Nz)return xA;Nz=1;var e=Array.prototype.slice,t=HW(),r=Object.keys,n=r?function(u){return r(u)}:YIe(),i=Object.keys;return n.shim=function(){if(Object.keys){var u=(function(){var a=Object.keys(arguments);return a&&a.length===arguments.length})(1,2);u||(Object.keys=function(p){return t(p)?i(e.call(p)):i(p)})}else Object.keys=n;return Object.keys||n},xA=n,xA}var wA,Fz;function S2(){if(Fz)return wA;Fz=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return wA=e,wA}var SA,Bz;function WW(){return Bz||(Bz=1,SA=SyntaxError),SA}var EA,jz;function eb(){return jz||(jz=1,EA=TypeError),EA}var CA,zz;function QIe(){return zz||(zz=1,CA=Object.getOwnPropertyDescriptor),CA}var AA,$z;function E2(){if($z)return AA;$z=1;var e=QIe();if(e)try{e([],"length")}catch{e=null}return AA=e,AA}var PA,qz;function ZW(){if(qz)return PA;qz=1;var e=S2(),t=WW(),r=eb(),n=E2();return PA=function(o,u,a){if(!o||typeof o!="object"&&typeof o!="function")throw new r("`obj` must be an object or a function`");if(typeof u!="string"&&typeof u!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var p=arguments.length>3?arguments[3]:null,h=arguments.length>4?arguments[4]:null,m=arguments.length>5?arguments[5]:null,v=arguments.length>6?arguments[6]:!1,w=!!n&&n(o,u);if(e)e(o,u,{configurable:m===null&&w?w.configurable:!m,enumerable:p===null&&w?w.enumerable:!p,value:a,writable:h===null&&w?w.writable:!h});else if(v||!p&&!h&&!m)o[u]=a;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},PA}var TA,Uz;function KW(){if(Uz)return TA;Uz=1;var e=S2(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},TA=t,TA}var IA,Vz;function XW(){if(Vz)return IA;Vz=1;var e=JIe(),t=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r=Object.prototype.toString,n=Array.prototype.concat,i=ZW(),o=function(h){return typeof h=="function"&&r.call(h)==="[object Function]"},u=KW()(),a=function(h,m,v,w){if(m in h){if(w===!0){if(h[m]===v)return}else if(!o(w)||!w())return}u?i(h,m,v,!0):i(h,m,v)},p=function(h,m){var v=arguments.length>2?arguments[2]:{},w=e(m);t&&(w=n.call(w,Object.getOwnPropertySymbols(m)));for(var x=0;x<w.length;x+=1)a(h,w[x],m[w[x]],v[w[x]])};return p.supportsDescriptors=!!u,IA=p,IA}var MA={exports:{}},RA,Gz;function YW(){return Gz||(Gz=1,RA=Object),RA}var OA,Hz;function eMe(){return Hz||(Hz=1,OA=Error),OA}var kA,Wz;function tMe(){return Wz||(Wz=1,kA=EvalError),kA}var LA,Zz;function rMe(){return Zz||(Zz=1,LA=RangeError),LA}var DA,Kz;function nMe(){return Kz||(Kz=1,DA=ReferenceError),DA}var NA,Xz;function iMe(){return Xz||(Xz=1,NA=URIError),NA}var FA,Yz;function aMe(){return Yz||(Yz=1,FA=Math.abs),FA}var BA,Jz;function oMe(){return Jz||(Jz=1,BA=Math.floor),BA}var jA,Qz;function sMe(){return Qz||(Qz=1,jA=Math.max),jA}var zA,e7;function lMe(){return e7||(e7=1,zA=Math.min),zA}var $A,t7;function uMe(){return t7||(t7=1,$A=Math.pow),$A}var qA,r7;function cMe(){return r7||(r7=1,qA=Math.round),qA}var UA,n7;function fMe(){return n7||(n7=1,UA=Number.isNaN||function(t){return t!==t}),UA}var VA,i7;function hMe(){if(i7)return VA;i7=1;var e=fMe();return VA=function(r){return e(r)||r===0?r:r<0?-1:1},VA}var GA,a7;function dMe(){return a7||(a7=1,GA=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var u=Object.getOwnPropertySymbols(t);if(u.length!==1||u[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0}),GA}var HA,o7;function pMe(){if(o7)return HA;o7=1;var e=typeof Symbol<"u"&&Symbol,t=dMe();return HA=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},HA}var WA,s7;function JW(){return s7||(s7=1,WA=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),WA}var ZA,l7;function QW(){if(l7)return ZA;l7=1;var e=YW();return ZA=e.getPrototypeOf||null,ZA}var KA,u7;function mMe(){if(u7)return KA;u7=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,r=Math.max,n="[object Function]",i=function(p,h){for(var m=[],v=0;v<p.length;v+=1)m[v]=p[v];for(var w=0;w<h.length;w+=1)m[w+p.length]=h[w];return m},o=function(p,h){for(var m=[],v=h,w=0;v<p.length;v+=1,w+=1)m[w]=p[v];return m},u=function(a,p){for(var h="",m=0;m<a.length;m+=1)h+=a[m],m+1<a.length&&(h+=p);return h};return KA=function(p){var h=this;if(typeof h!="function"||t.apply(h)!==n)throw new TypeError(e+h);for(var m=o(arguments,1),v,w=function(){if(this instanceof v){var k=h.apply(this,i(m,arguments));return Object(k)===k?k:this}return h.apply(p,i(m,arguments))},x=r(0,h.length-m.length),P=[],T=0;T<x;T++)P[T]="$"+T;if(v=Function("binder","return function ("+u(P,",")+"){ return binder.apply(this,arguments); }")(w),h.prototype){var R=function(){};R.prototype=h.prototype,v.prototype=new R,R.prototype=null}return v},KA}var XA,c7;function tb(){if(c7)return XA;c7=1;var e=mMe();return XA=Function.prototype.bind||e,XA}var YA,f7;function MR(){return f7||(f7=1,YA=Function.prototype.call),YA}var JA,h7;function RR(){return h7||(h7=1,JA=Function.prototype.apply),JA}var QA,d7;function gMe(){return d7||(d7=1,QA=typeof Reflect<"u"&&Reflect&&Reflect.apply),QA}var eP,p7;function eZ(){if(p7)return eP;p7=1;var e=tb(),t=RR(),r=MR(),n=gMe();return eP=n||e.call(r,t),eP}var tP,m7;function OR(){if(m7)return tP;m7=1;var e=tb(),t=eb(),r=MR(),n=eZ();return tP=function(o){if(o.length<1||typeof o[0]!="function")throw new t("a function is required");return n(e,r,o)},tP}var rP,g7;function yMe(){if(g7)return rP;g7=1;var e=OR(),t=E2(),r;try{r=[].__proto__===Array.prototype}catch(u){if(!u||typeof u!="object"||!("code"in u)||u.code!=="ERR_PROTO_ACCESS")throw u}var n=!!r&&t&&t(Object.prototype,"__proto__"),i=Object,o=i.getPrototypeOf;return rP=n&&typeof n.get=="function"?e([n.get]):typeof o=="function"?function(a){return o(a==null?a:i(a))}:!1,rP}var nP,y7;function vMe(){if(y7)return nP;y7=1;var e=JW(),t=QW(),r=yMe();return nP=e?function(i){return e(i)}:t?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return t(i)}:r?function(i){return r(i)}:null,nP}var iP,v7;function tZ(){if(v7)return iP;v7=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=tb();return iP=r.call(e,t),iP}var aP,b7;function rZ(){if(b7)return aP;b7=1;var e,t=YW(),r=eMe(),n=tMe(),i=rMe(),o=nMe(),u=WW(),a=eb(),p=iMe(),h=aMe(),m=oMe(),v=sMe(),w=lMe(),x=uMe(),P=cMe(),T=hMe(),R=Function,k=function(mt){try{return R('"use strict"; return ('+mt+").constructor;")()}catch{}},N=E2(),F=S2(),D=function(){throw new a},U=N?(function(){try{return arguments.callee,D}catch{try{return N(arguments,"callee").get}catch{return D}}})():D,B=pMe()(),Z=vMe(),J=QW(),X=JW(),le=RR(),H=MR(),G={},ae=typeof Uint8Array>"u"||!Z?e:Z(Uint8Array),se={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":B&&Z?Z([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":G,"%AsyncGenerator%":G,"%AsyncGeneratorFunction%":G,"%AsyncIteratorPrototype%":G,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?e:Float16Array,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":R,"%GeneratorFunction%":G,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":B&&Z?Z(Z([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!B||!Z?e:Z(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":N,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":i,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!B||!Z?e:Z(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":B&&Z?Z(""[Symbol.iterator]()):e,"%Symbol%":B?Symbol:e,"%SyntaxError%":u,"%ThrowTypeError%":U,"%TypedArray%":ae,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet,"%Function.prototype.call%":H,"%Function.prototype.apply%":le,"%Object.defineProperty%":F,"%Object.getPrototypeOf%":J,"%Math.abs%":h,"%Math.floor%":m,"%Math.max%":v,"%Math.min%":w,"%Math.pow%":x,"%Math.round%":P,"%Math.sign%":T,"%Reflect.getPrototypeOf%":X};if(Z)try{null.error}catch(mt){var ue=Z(Z(mt));se["%Error.prototype%"]=ue}var me=function mt(nt){var Nt;if(nt==="%AsyncFunction%")Nt=k("async function () {}");else if(nt==="%GeneratorFunction%")Nt=k("function* () {}");else if(nt==="%AsyncGeneratorFunction%")Nt=k("async function* () {}");else if(nt==="%AsyncGenerator%"){var kt=mt("%AsyncGeneratorFunction%");kt&&(Nt=kt.prototype)}else if(nt==="%AsyncIteratorPrototype%"){var It=mt("%AsyncGenerator%");It&&Z&&(Nt=Z(It.prototype))}return se[nt]=Nt,Nt},Ce={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pe=tb(),Ee=tZ(),Fe=pe.call(H,Array.prototype.concat),Ke=pe.call(le,Array.prototype.splice),fe=pe.call(H,String.prototype.replace),_e=pe.call(H,String.prototype.slice),Pe=pe.call(H,RegExp.prototype.exec),ke=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$e=/\\(\\)?/g,ht=function(nt){var Nt=_e(nt,0,1),kt=_e(nt,-1);if(Nt==="%"&&kt!=="%")throw new u("invalid intrinsic syntax, expected closing `%`");if(kt==="%"&&Nt!=="%")throw new u("invalid intrinsic syntax, expected opening `%`");var It=[];return fe(nt,ke,function(gt,Le,pr,hr){It[It.length]=pr?fe(hr,$e,"$1"):Le||gt}),It},Ot=function(nt,Nt){var kt=nt,It;if(Ee(Ce,kt)&&(It=Ce[kt],kt="%"+It[0]+"%"),Ee(se,kt)){var gt=se[kt];if(gt===G&&(gt=me(kt)),typeof gt>"u"&&!Nt)throw new a("intrinsic "+nt+" exists, but is not available. Please file an issue!");return{alias:It,name:kt,value:gt}}throw new u("intrinsic "+nt+" does not exist!")};return aP=function(nt,Nt){if(typeof nt!="string"||nt.length===0)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Nt!="boolean")throw new a('"allowMissing" argument must be a boolean');if(Pe(/^%?[^%]*%?$/,nt)===null)throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var kt=ht(nt),It=kt.length>0?kt[0]:"",gt=Ot("%"+It+"%",Nt),Le=gt.name,pr=gt.value,hr=!1,vr=gt.alias;vr&&(It=vr[0],Ke(kt,Fe([0,1],vr)));for(var Qt=1,qe=!0;Qt<kt.length;Qt+=1){var rt=kt[Qt],ct=_e(rt,0,1),Ft=_e(rt,-1);if((ct==='"'||ct==="'"||ct==="`"||Ft==='"'||Ft==="'"||Ft==="`")&&ct!==Ft)throw new u("property names with quotes must have matching quotes");if((rt==="constructor"||!qe)&&(hr=!0),It+="."+rt,Le="%"+It+"%",Ee(se,Le))pr=se[Le];else if(pr!=null){if(!(rt in pr)){if(!Nt)throw new a("base intrinsic for "+nt+" exists, but the property is not available.");return}if(N&&Qt+1>=kt.length){var Yt=N(pr,rt);qe=!!Yt,qe&&"get"in Yt&&!("originalValue"in Yt.get)?pr=Yt.get:pr=pr[rt]}else qe=Ee(pr,rt),pr=pr[rt];qe&&!hr&&(se[Le]=pr)}}return pr},aP}var oP,_7;function bMe(){if(_7)return oP;_7=1;var e=rZ(),t=ZW(),r=KW()(),n=E2(),i=eb(),o=e("%Math.floor%");return oP=function(a,p){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof p!="number"||p<0||p>4294967295||o(p)!==p)throw new i("`length` must be a positive 32-bit integer");var h=arguments.length>2&&!!arguments[2],m=!0,v=!0;if("length"in a&&n){var w=n(a,"length");w&&!w.configurable&&(m=!1),w&&!w.writable&&(v=!1)}return(m||v||!h)&&(r?t(a,"length",p,!0,!0):t(a,"length",p)),a},oP}var sP,x7;function _Me(){if(x7)return sP;x7=1;var e=tb(),t=RR(),r=eZ();return sP=function(){return r(e,t,arguments)},sP}var w7;function xMe(){return w7||(w7=1,(function(e){var t=bMe(),r=S2(),n=OR(),i=_Me();e.exports=function(u){var a=n(arguments),p=u.length-(arguments.length-1);return t(a,1+(p>0?p:0),!0)},r?r(e.exports,"apply",{value:i}):e.exports.apply=i})(MA)),MA.exports}var lP,S7;function wMe(){if(S7)return lP;S7=1;var e=eb();return lP=function(r){if(r==null)throw new e(arguments.length>0&&arguments[1]||"Cannot call method on "+r);return r},lP}var uP,E7;function SMe(){if(E7)return uP;E7=1;var e=rZ(),t=OR(),r=t([e("%String.prototype.indexOf%")]);return uP=function(i,o){var u=e(i,!!o);return typeof u=="function"&&r(i,".prototype.")>-1?t([u]):u},uP}var cP,C7;function nZ(){if(C7)return cP;C7=1;var e=wMe(),t=SMe(),r=t("Object.prototype.propertyIsEnumerable"),n=t("Array.prototype.push");return cP=function(o){var u=e(o),a=[];for(var p in u)r(u,p)&&n(a,[p,u[p]]);return a},cP}var fP,A7;function iZ(){if(A7)return fP;A7=1;var e=nZ();return fP=function(){return typeof Object.entries=="function"?Object.entries:e},fP}var hP,P7;function EMe(){if(P7)return hP;P7=1;var e=iZ(),t=XW();return hP=function(){var n=e();return t(Object,{entries:n},{entries:function(){return Object.entries!==n}}),n},hP}var dP,T7;function CMe(){if(T7)return dP;T7=1;var e=XW(),t=xMe(),r=nZ(),n=iZ(),i=EMe(),o=t(n(),Object);return e(o,{getPolyfill:n,implementation:r,shim:i}),dP=o,dP}var pP,I7;function AMe(){if(I7)return pP;I7=1;var e=function(){};return pP=e,pP}var mP,M7;function PMe(){if(M7)return mP;M7=1;var e=CMe(),t=AMe(),r=tZ(),n=function(D){t(!1,D)},i=String.prototype.replace,o=String.prototype.split,u="||||",a=function(F){var D=F%100,U=D%10;return D!==11&&U===1?0:2<=U&&U<=4&&!(D>=12&&D<=14)?1:2},p={pluralTypes:{arabic:function(F){if(F<3)return F;var D=F%100;return D>=3&&D<=10?3:D>=11?4:5},bosnian_serbian:a,chinese:function(){return 0},croatian:a,french:function(F){return F>=2?1:0},german:function(F){return F!==1?1:0},russian:a,lithuanian:function(F){return F%10===1&&F%100!==11?0:F%10>=2&&F%10<=9&&(F%100<11||F%100>19)?1:2},czech:function(F){return F===1?0:F>=2&&F<=4?1:2},polish:function(F){if(F===1)return 0;var D=F%10;return 2<=D&&D<=4&&(F%100<10||F%100>=20)?1:2},icelandic:function(F){return F%10!==1||F%100===11?1:0},slovenian:function(F){var D=F%100;return D===1?0:D===2?1:D===3||D===4?2:3},romanian:function(F){if(F===1)return 0;var D=F%100;return F===0||D>=2&&D<=19?1:2},ukrainian:a},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"],ukrainian:["uk","ua"]}};function h(F){for(var D={},U=e(F),B=0;B<U.length;B+=1)for(var Z=U[B][0],J=U[B][1],X=0;X<J.length;X+=1)D[J[X]]=Z;return D}function m(F,D){var U=h(F.pluralTypeToLanguages);return U[D]||U[o.call(D,/-/,1)[0]]||U.en}function v(F,D,U){return F.pluralTypes[D](U)}function w(){var F={};return function(D,U){var B=F[U];return B&&!D.pluralTypes[B]&&(B=null,F[U]=B),B||(B=m(D,U),B&&(F[U]=B)),B}}function x(F){return F.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(F){var D=F&&F.prefix||"%{",U=F&&F.suffix||"}";if(D===u||U===u)throw new RangeError('"'+u+'" token is reserved for pluralization');return new RegExp(x(D)+"(.*?)"+x(U),"g")}var T=w(),R=/%\{(.*?)\}/g;function k(F,D,U,B,Z,J){if(typeof F!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(D==null)return F;var X=F,le=B||R,H=J||i,G=typeof D=="number"?{smart_count:D}:D;if(G.smart_count!=null&&F){var ae=Z||p,se=o.call(F,u),ue=U||"en",me=T(ae,ue),Ce=v(ae,me,G.smart_count);X=i.call(se[Ce]||se[0],/^[^\S]*|[^\S]*$/g,"")}return X=H.call(X,le,function(pe,Ee){return!r(G,Ee)||G[Ee]==null?pe:G[Ee]}),X}function N(F){var D=F||{};this.phrases={},this.extend(D.phrases||{}),this.currentLocale=D.locale||"en";var U=D.allowMissing?k:null;this.onMissingKey=typeof D.onMissingKey=="function"?D.onMissingKey:U,this.warn=D.warn||n,this.replaceImplementation=D.replace||i,this.tokenRegex=P(D.interpolation),this.pluralRules=D.pluralRules||p}return N.prototype.locale=function(F){return F&&(this.currentLocale=F),this.currentLocale},N.prototype.extend=function(F,D){for(var U=e(F||{}),B=0;B<U.length;B+=1){var Z=U[B][0],J=U[B][1],X=D?D+"."+Z:Z;typeof J=="object"?this.extend(J,X):this.phrases[X]=J}},N.prototype.unset=function(F,D){if(typeof F=="string")delete this.phrases[F];else for(var U=e(F||{}),B=0;B<U.length;B+=1){var Z=U[B][0],J=U[B][1],X=D?D+"."+Z:Z;typeof J=="object"?this.unset(J,X):delete this.phrases[X]}},N.prototype.clear=function(){this.phrases={}},N.prototype.replace=function(F){this.clear(),this.extend(F)},N.prototype.t=function(F,D){var U,B,Z=D??{};if(typeof this.phrases[F]=="string")U=this.phrases[F];else if(typeof Z._=="string")U=Z._;else if(this.onMissingKey){var J=this.onMissingKey;B=J(F,Z,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)}else this.warn('Missing translation for key: "'+F+'"'),B=F;return typeof U=="string"&&(B=k(U,Z,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),B},N.prototype.has=function(F){return r(this.phrases,F)},N.transformPhrase=function(D,U,B){return k(D,U,B)},mP=N,mP}var TMe=PMe();const R7=qs(TMe);var Zm=function(){return Zm=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Zm.apply(this,arguments)};const IMe=(function(e,t,r,n){r===void 0&&(r=[{locale:"en",name:"English"}]),n===void 0&&(n={});var i=t,o=e(t);if(o instanceof Promise)throw new Error("The i18nProvider returned a Promise for the messages of the default locale (".concat(t,"). Please update your i18nProvider to return the messages of the default locale in a synchronous way."));var u,a;Array.isArray(r)?(u=r,a=n):(u=[{locale:"en",name:"English"}],a=r);var p=new R7(Zm({locale:i,phrases:Zm({"":""},o)},a)),h=p.t.bind(p);return{translate:function(m,v){return v===void 0&&(v={}),h(m,v)},changeLocale:function(m){return Promise.resolve(e(m)).then(function(v){i=m;var w=new R7(Zm({locale:m,phrases:Zm({"":""},v)},n));h=w.t.bind(w)})},getLocale:function(){return i},getLocales:function(){return u}}});var MMe=IMe(function(){return XIe},"en",[{name:"en",value:"English"}],{allowMissing:!0}),RMe=x5e(),OMe=function(e){var t=e.accessDenied,r=e.authCallbackPage,n=e.authenticationError,i=e.authProvider,o=e.basename,u=e.catchAll,a=e.children,p=e.darkTheme,h=e.dashboard,m=e.dataProvider,v=e.defaultTheme,w=e.disableTelemetry,x=e.error,P=e.i18nProvider,T=P===void 0?MMe:P,R=e.layout,k=e.lightTheme,N=e.loading,F=e.loginPage,D=e.notification,U=e.queryClient,B=e.ready,Z=e.requireAuth,J=e.store,X=J===void 0?RMe:J,le=e.theme,H=e.title,G=H===void 0?"React Admin":H;return I.createElement(GW,{authProvider:i,basename:o,darkTheme:p,dataProvider:m,defaultTheme:v,i18nProvider:T,lightTheme:k,queryClient:U,store:X,theme:le},I.createElement(ZIe,{accessDenied:t,authCallbackPage:r,authenticationError:n,catchAll:u,dashboard:h,disableTelemetry:w,error:x,layout:R,loading:N,loginPage:F,notification:D,ready:B,requireAuth:Z,title:G},a))},Qy={exports:{}},O7;function kMe(){if(O7)return Qy.exports;O7=1,Qy.exports=r,Qy.exports.parse=r,Qy.exports.stringify=n;var e=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,t=new RegExp("^"+e.source+"(\\s"+e.source+"){1,}");function r(i){var o=i.split(";"),u=o.pop(),a=(o.shift()||"").split("=").pop(),p=0;function h(B){var Z=u.substring(p).match(B);return Z?(p+=Z[0].length,Z[0]):null}function m(B){return B&&a.match(/\d+/)&&(B.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+a}}),B}function v(){h(/^\s*/)}function w(){v();for(var B=0,Z=[],J=[Z],X=Z,le;le=h(/^(\()/)||h(/^(\))/)||h(/^(,)/)||h(t);){if(le==="(")J.push(X),X=[],J[J.length-1].push(X),B++;else if(le===")"){if(X.length===0||(X=J.pop(),!X))return null;if(B--,B===0)break}else if(le===",")X=[],J[J.length-1].push(X);else if(!le.split(/\s/g).some(isNaN))Array.prototype.push.apply(X,le.split(/\s/g).map(parseFloat));else return null;v()}return B!==0?null:Z}function x(){for(var B=[],Z,J;J=h(t)||h(/^(,)/);)J===","?(B.push(Z),Z=[]):J.split(/\s/g).some(isNaN)||(Z||(Z=[]),Array.prototype.push.apply(Z,J.split(/\s/g).map(parseFloat))),v();if(Z)B.push(Z);else return null;return B.length?B:null}function P(){if(!h(/^(point(\sz)?)/i)||(v(),!h(/^(\()/)))return null;var B=x();return!B||(v(),!h(/^(\))/))?null:{type:"Point",coordinates:B[0]}}function T(){if(!h(/^(multipoint)/i))return null;v();var B=u.substring(u.indexOf("(")+1,u.length-1).replace(/\(/g,"").replace(/\)/g,"");u="MULTIPOINT ("+B+")";var Z=w();return Z?(v(),{type:"MultiPoint",coordinates:Z}):null}function R(){if(!h(/^(multilinestring)/i))return null;v();var B=w();return B?(v(),{type:"MultiLineString",coordinates:B}):null}function k(){if(!h(/^(linestring(\sz)?)/i)||(v(),!h(/^(\()/)))return null;var B=x();return!B||!h(/^(\))/)?null:{type:"LineString",coordinates:B}}function N(){if(!h(/^(polygon(\sz)?)/i))return null;v();var B=w();return B?{type:"Polygon",coordinates:B}:null}function F(){if(!h(/^(multipolygon)/i))return null;v();var B=w();return B?{type:"MultiPolygon",coordinates:B}:null}function D(){var B=[],Z;if(!h(/^(geometrycollection)/i)||(v(),!h(/^(\()/)))return null;for(;Z=U();)B.push(Z),v(),h(/^(,)/),v();return h(/^(\))/)?{type:"GeometryCollection",geometries:B}:null}function U(){return P()||k()||N()||T()||R()||F()||D()}return m(U())}function n(i){i.type==="Feature"&&(i=i.geometry);function o(m){return m.join(" ")}function u(m){return m.map(o).join(", ")}function a(m){return m.map(u).map(h).join(", ")}function p(m){return m.map(a).map(h).join(", ")}function h(m){return"("+m+")"}switch(i.type){case"Point":return"POINT ("+o(i.coordinates)+")";case"LineString":return"LINESTRING ("+u(i.coordinates)+")";case"Polygon":return"POLYGON ("+a(i.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+u(i.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+p(i.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+a(i.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+i.geometries.map(n).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}return Qy.exports}var Uh=kMe();function ix(e){const t=e?.source,r=yl(),n=P0({mapId:e?.mapId}),[i,o]=I.useState(),[u,a]=I.useState(),p=TH(e),{field:{onChange:h}}=p;return I.useEffect(()=>{if(typeof r>"u"||!r[t])return;const m={type:"Feature",properties:{},geometry:Uh.parse(r[t])};o(m),a(m)},[r,e.source]),I.useEffect(()=>{if(n.map&&typeof r<"u"&&r[t]){const m=Yq(Uh.parse(r[t]));m?.geometry?.coordinates&&n.map.setCenter(m.geometry.coordinates)}},[n.map]),ze.jsxs(ze.Fragment,{children:[e.embeddedMap&&ze.jsx(A0,{...e?.MapLibreMapProps,options:{zoom:14,style:"https://wms.wheregroup.com/tileserver/style/klokantech-basic.json",center:Array.isArray(e?.MapLibreMapProps?.options?.center)&&e.MapLibreMapProps.options.center.length===2?[e.MapLibreMapProps.options.center[0],e.MapLibreMapProps.options.center[1]]:[0,0],...e?.MapLibreMapProps?.options},style:{width:"100%",height:"400px",...e?.MapLibreMapProps?.style}}),e.type==="point"&&ze.jsxs(ze.Fragment,{children:[u&&ze.jsx(Ev,{mapId:e?.mapId,geojson:u,options:{paint:{"circle-radius":8,"circle-color":"#6f6f96","circle-stroke-color":"white","circle-stroke-width":3,"circle-opacity":.8}},type:"circle",insertBeforeLayer:"gl-draw-polygon-fill-inactive.cold"}),ze.jsx(I_,{mapId:e?.mapId,geojson:i,mode:i?"simple_select":"draw_point",onChange:m=>{typeof m[0]<"u"&&h(Uh.stringify(m[0]))}})]}),e.type==="polygon"&&ze.jsxs(ze.Fragment,{children:[u&&ze.jsx(Ev,{mapId:e?.mapId,geojson:u,options:{paint:{"fill-color":"#6f6f96","fill-opacity":.6}},type:"fill",insertBeforeLayer:"gl-draw-polygon-fill-inactive.cold"}),ze.jsx(I_,{mapId:e?.mapId,geojson:i,mode:i?"simple_select":"draw_polygon",onChange:m=>{typeof m[0]<"u"&&h(Uh.stringify(m[0]))}})]}),e.type==="line"&&ze.jsxs(ze.Fragment,{children:[u&&ze.jsx(Ev,{mapId:e?.mapId,geojson:u,options:{paint:{"line-width":6,"line-color":"#6f6f96","line-opacity":.6}},type:"line",insertBeforeLayer:"gl-draw-polygon-fill-inactive.cold"}),ze.jsx(I_,{mapId:e?.mapId,geojson:i,mode:i?"simple_select":"draw_line_string",onChange:m=>{typeof m[0]<"u"&&h(Uh.stringify(m[0]))}})]})]})}ix.defaultProps={type:"point",embeddedMap:!0};ix.__docgenInfo={description:"",methods:[],displayName:"GeospatialInputMap",props:{MapLibreMapProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof MapLibreMap>",elements:[{name:"MapLibreMap"}]},description:""},geometrytype:{required:!1,tsType:{name:"union",raw:"'point' | 'line' | 'polygon'",elements:[{name:"literal",value:"'point'"},{name:"literal",value:"'line'"},{name:"literal",value:"'polygon'"}]},description:""},embeddedMap:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},mapId:{required:!1,tsType:{name:"string"},description:""},type:{defaultValue:{value:"'point'",computed:!1},required:!1}},composes:["InputProps"]};function pd(e){return ze.jsx(ze.Fragment,{children:e.embeddedMap?ze.jsx(Mx,{children:ze.jsx(ix,{...e})}):ze.jsx(ix,{...e})})}pd.defaultProps={embeddedMap:!0};pd.__docgenInfo={description:"",methods:[],displayName:"GeospatialInput",props:{embeddedMap:{defaultValue:{value:"true",computed:!1},required:!1}}};var LMe=Object.defineProperty,DMe=(e,t,r)=>t in e?LMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Pu=(e,t,r)=>DMe(e,typeof t!="symbol"?t+"":t,r),l_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var NMe=Array.isArray,kp=NMe,FMe=typeof l_=="object"&&l_&&l_.Object===Object&&l_,aZ=FMe,BMe=aZ,jMe=typeof self=="object"&&self&&self.Object===Object&&self,zMe=BMe||jMe||Function("return this")(),Rf=zMe,$Me=Rf,qMe=$Me.Symbol,rb=qMe,k7=rb,oZ=Object.prototype,UMe=oZ.hasOwnProperty,VMe=oZ.toString,ev=k7?k7.toStringTag:void 0;function GMe(e){var t=UMe.call(e,ev),r=e[ev];try{e[ev]=void 0;var n=!0}catch{}var i=VMe.call(e);return n&&(t?e[ev]=r:delete e[ev]),i}var HMe=GMe,WMe=Object.prototype,ZMe=WMe.toString;function KMe(e){return ZMe.call(e)}var XMe=KMe,L7=rb,YMe=HMe,JMe=XMe,QMe="[object Null]",eRe="[object Undefined]",D7=L7?L7.toStringTag:void 0;function tRe(e){return e==null?e===void 0?eRe:QMe:D7&&D7 in Object(e)?YMe(e):JMe(e)}var nb=tRe;function rRe(e){return e!=null&&typeof e=="object"}var Lp=rRe,nRe=nb,iRe=Lp,aRe="[object Symbol]";function oRe(e){return typeof e=="symbol"||iRe(e)&&nRe(e)==aRe}var LR=oRe,sRe=kp,lRe=LR,uRe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cRe=/^\w*$/;function fRe(e,t){if(sRe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||lRe(e)?!0:cRe.test(e)||!uRe.test(e)||t!=null&&e in Object(t)}var hRe=fRe;function dRe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zg=dRe,pRe=nb,mRe=Zg,gRe="[object AsyncFunction]",yRe="[object Function]",vRe="[object GeneratorFunction]",bRe="[object Proxy]";function _Re(e){if(!mRe(e))return!1;var t=pRe(e);return t==yRe||t==vRe||t==gRe||t==bRe}var sZ=_Re,xRe=Rf,wRe=xRe["__core-js_shared__"],SRe=wRe,gP=SRe,N7=(function(){var e=/[^.]+$/.exec(gP&&gP.keys&&gP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function ERe(e){return!!N7&&N7 in e}var CRe=ERe,ARe=Function.prototype,PRe=ARe.toString;function TRe(e){if(e!=null){try{return PRe.call(e)}catch{}try{return e+""}catch{}}return""}var lZ=TRe,IRe=sZ,MRe=CRe,RRe=Zg,ORe=lZ,kRe=/[\\^$.*+?()[\]{}|]/g,LRe=/^\[object .+?Constructor\]$/,DRe=Function.prototype,NRe=Object.prototype,FRe=DRe.toString,BRe=NRe.hasOwnProperty,jRe=RegExp("^"+FRe.call(BRe).replace(kRe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zRe(e){if(!RRe(e)||MRe(e))return!1;var t=IRe(e)?jRe:LRe;return t.test(ORe(e))}var $Re=zRe;function qRe(e,t){return e?.[t]}var URe=qRe,VRe=$Re,GRe=URe;function HRe(e,t){var r=GRe(e,t);return VRe(r)?r:void 0}var Dp=HRe,WRe=Dp,ZRe=WRe(Object,"create"),C2=ZRe,F7=C2;function KRe(){this.__data__=F7?F7(null):{},this.size=0}var XRe=KRe;function YRe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var JRe=YRe,QRe=C2,eOe="__lodash_hash_undefined__",tOe=Object.prototype,rOe=tOe.hasOwnProperty;function nOe(e){var t=this.__data__;if(QRe){var r=t[e];return r===eOe?void 0:r}return rOe.call(t,e)?t[e]:void 0}var iOe=nOe,aOe=C2,oOe=Object.prototype,sOe=oOe.hasOwnProperty;function lOe(e){var t=this.__data__;return aOe?t[e]!==void 0:sOe.call(t,e)}var uOe=lOe,cOe=C2,fOe="__lodash_hash_undefined__";function hOe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=cOe&&t===void 0?fOe:t,this}var dOe=hOe,pOe=XRe,mOe=JRe,gOe=iOe,yOe=uOe,vOe=dOe;function Kg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Kg.prototype.clear=pOe;Kg.prototype.delete=mOe;Kg.prototype.get=gOe;Kg.prototype.has=yOe;Kg.prototype.set=vOe;var bOe=Kg;function _Oe(){this.__data__=[],this.size=0}var xOe=_Oe;function wOe(e,t){return e===t||e!==e&&t!==t}var DR=wOe,SOe=DR;function EOe(e,t){for(var r=e.length;r--;)if(SOe(e[r][0],t))return r;return-1}var A2=EOe,COe=A2,AOe=Array.prototype,POe=AOe.splice;function TOe(e){var t=this.__data__,r=COe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():POe.call(t,r,1),--this.size,!0}var IOe=TOe,MOe=A2;function ROe(e){var t=this.__data__,r=MOe(t,e);return r<0?void 0:t[r][1]}var OOe=ROe,kOe=A2;function LOe(e){return kOe(this.__data__,e)>-1}var DOe=LOe,NOe=A2;function FOe(e,t){var r=this.__data__,n=NOe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var BOe=FOe,jOe=xOe,zOe=IOe,$Oe=OOe,qOe=DOe,UOe=BOe;function Xg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Xg.prototype.clear=jOe;Xg.prototype.delete=zOe;Xg.prototype.get=$Oe;Xg.prototype.has=qOe;Xg.prototype.set=UOe;var P2=Xg,VOe=Dp,GOe=Rf,HOe=VOe(GOe,"Map"),NR=HOe,B7=bOe,WOe=P2,ZOe=NR;function KOe(){this.size=0,this.__data__={hash:new B7,map:new(ZOe||WOe),string:new B7}}var XOe=KOe;function YOe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var JOe=YOe,QOe=JOe;function eke(e,t){var r=e.__data__;return QOe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var T2=eke,tke=T2;function rke(e){var t=tke(this,e).delete(e);return this.size-=t?1:0,t}var nke=rke,ike=T2;function ake(e){return ike(this,e).get(e)}var oke=ake,ske=T2;function lke(e){return ske(this,e).has(e)}var uke=lke,cke=T2;function fke(e,t){var r=cke(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var hke=fke,dke=XOe,pke=nke,mke=oke,gke=uke,yke=hke;function Yg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Yg.prototype.clear=dke;Yg.prototype.delete=pke;Yg.prototype.get=mke;Yg.prototype.has=gke;Yg.prototype.set=yke;var FR=Yg,uZ=FR,vke="Expected a function";function BR(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(vke);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var u=e.apply(this,n);return r.cache=o.set(i,u)||o,u};return r.cache=new(BR.Cache||uZ),r}BR.Cache=uZ;var bke=BR,_ke=bke,xke=500;function wke(e){var t=_ke(e,function(n){return r.size===xke&&r.clear(),n}),r=t.cache;return t}var Ske=wke,Eke=Ske,Cke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ake=/\\(\\)?/g,Pke=Eke(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Cke,function(r,n,i,o){t.push(i?o.replace(Ake,"$1"):n||r)}),t}),Tke=Pke;function Ike(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var Mke=Ike,j7=rb,Rke=Mke,Oke=kp,kke=LR,z7=j7?j7.prototype:void 0,$7=z7?z7.toString:void 0;function cZ(e){if(typeof e=="string")return e;if(Oke(e))return Rke(e,cZ)+"";if(kke(e))return $7?$7.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Lke=cZ,Dke=Lke;function Nke(e){return e==null?"":Dke(e)}var Fke=Nke,Bke=kp,jke=hRe,zke=Tke,$ke=Fke;function qke(e,t){return Bke(e)?e:jke(e,t)?[e]:zke($ke(e))}var Uke=qke,Vke=LR;function Gke(e){if(typeof e=="string"||Vke(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Hke=Gke,Wke=Uke,Zke=Hke;function Kke(e,t){t=Wke(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Zke(t[r++])];return r&&r==n?e:void 0}var Xke=Kke,Yke=Xke;function Jke(e,t,r){var n=e==null?void 0:Yke(e,t);return n===void 0?r:n}var Qke=Jke;const to=kR(Qke);var eLe=P2;function tLe(){this.__data__=new eLe,this.size=0}var rLe=tLe;function nLe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var iLe=nLe;function aLe(e){return this.__data__.get(e)}var oLe=aLe;function sLe(e){return this.__data__.has(e)}var lLe=sLe,uLe=P2,cLe=NR,fLe=FR,hLe=200;function dLe(e,t){var r=this.__data__;if(r instanceof uLe){var n=r.__data__;if(!cLe||n.length<hLe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new fLe(n)}return r.set(e,t),this.size=r.size,this}var pLe=dLe,mLe=P2,gLe=rLe,yLe=iLe,vLe=oLe,bLe=lLe,_Le=pLe;function Jg(e){var t=this.__data__=new mLe(e);this.size=t.size}Jg.prototype.clear=gLe;Jg.prototype.delete=yLe;Jg.prototype.get=vLe;Jg.prototype.has=bLe;Jg.prototype.set=_Le;var jR=Jg;function xLe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var wLe=xLe,SLe=Dp,ELe=(function(){try{var e=SLe(Object,"defineProperty");return e({},"",{}),e}catch{}})(),CLe=ELe,q7=CLe;function ALe(e,t,r){t=="__proto__"&&q7?q7(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var fZ=ALe,PLe=fZ,TLe=DR,ILe=Object.prototype,MLe=ILe.hasOwnProperty;function RLe(e,t,r){var n=e[t];(!(MLe.call(e,t)&&TLe(n,r))||r===void 0&&!(t in e))&&PLe(e,t,r)}var hZ=RLe,OLe=hZ,kLe=fZ;function LLe(e,t,r,n){var i=!r;r||(r={});for(var o=-1,u=t.length;++o<u;){var a=t[o],p=n?n(r[a],e[a],a,r,e):void 0;p===void 0&&(p=e[a]),i?kLe(r,a,p):OLe(r,a,p)}return r}var I2=LLe;function DLe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var NLe=DLe,FLe=nb,BLe=Lp,jLe="[object Arguments]";function zLe(e){return BLe(e)&&FLe(e)==jLe}var $Le=zLe,U7=$Le,qLe=Lp,dZ=Object.prototype,ULe=dZ.hasOwnProperty,VLe=dZ.propertyIsEnumerable,GLe=U7((function(){return arguments})())?U7:function(e){return qLe(e)&&ULe.call(e,"callee")&&!VLe.call(e,"callee")},HLe=GLe,ax={exports:{}};function WLe(){return!1}var ZLe=WLe;ax.exports;(function(e,t){var r=Rf,n=ZLe,i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,u=o&&o.exports===i,a=u?r.Buffer:void 0,p=a?a.isBuffer:void 0,h=p||n;e.exports=h})(ax,ax.exports);var zR=ax.exports,KLe=9007199254740991,XLe=/^(?:0|[1-9]\d*)$/;function YLe(e,t){var r=typeof e;return t=t??KLe,!!t&&(r=="number"||r!="symbol"&&XLe.test(e))&&e>-1&&e%1==0&&e<t}var JLe=YLe,QLe=9007199254740991;function e4e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=QLe}var pZ=e4e,t4e=nb,r4e=pZ,n4e=Lp,i4e="[object Arguments]",a4e="[object Array]",o4e="[object Boolean]",s4e="[object Date]",l4e="[object Error]",u4e="[object Function]",c4e="[object Map]",f4e="[object Number]",h4e="[object Object]",d4e="[object RegExp]",p4e="[object Set]",m4e="[object String]",g4e="[object WeakMap]",y4e="[object ArrayBuffer]",v4e="[object DataView]",b4e="[object Float32Array]",_4e="[object Float64Array]",x4e="[object Int8Array]",w4e="[object Int16Array]",S4e="[object Int32Array]",E4e="[object Uint8Array]",C4e="[object Uint8ClampedArray]",A4e="[object Uint16Array]",P4e="[object Uint32Array]",Va={};Va[b4e]=Va[_4e]=Va[x4e]=Va[w4e]=Va[S4e]=Va[E4e]=Va[C4e]=Va[A4e]=Va[P4e]=!0;Va[i4e]=Va[a4e]=Va[y4e]=Va[o4e]=Va[v4e]=Va[s4e]=Va[l4e]=Va[u4e]=Va[c4e]=Va[f4e]=Va[h4e]=Va[d4e]=Va[p4e]=Va[m4e]=Va[g4e]=!1;function T4e(e){return n4e(e)&&r4e(e.length)&&!!Va[t4e(e)]}var I4e=T4e;function M4e(e){return function(t){return e(t)}}var $R=M4e,ox={exports:{}};ox.exports;(function(e,t){var r=aZ,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,u=o&&r.process,a=(function(){try{var p=i&&i.require&&i.require("util").types;return p||u&&u.binding&&u.binding("util")}catch{}})();e.exports=a})(ox,ox.exports);var qR=ox.exports,R4e=I4e,O4e=$R,V7=qR,G7=V7&&V7.isTypedArray,k4e=G7?O4e(G7):R4e,mZ=k4e,L4e=NLe,D4e=HLe,N4e=kp,F4e=zR,B4e=JLe,j4e=mZ,z4e=Object.prototype,$4e=z4e.hasOwnProperty;function q4e(e,t){var r=N4e(e),n=!r&&D4e(e),i=!r&&!n&&F4e(e),o=!r&&!n&&!i&&j4e(e),u=r||n||i||o,a=u?L4e(e.length,String):[],p=a.length;for(var h in e)(t||$4e.call(e,h))&&!(u&&(h=="length"||i&&(h=="offset"||h=="parent")||o&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||B4e(h,p)))&&a.push(h);return a}var gZ=q4e,U4e=Object.prototype;function V4e(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||U4e;return e===r}var UR=V4e;function G4e(e,t){return function(r){return e(t(r))}}var yZ=G4e,H4e=yZ,W4e=H4e(Object.keys,Object),Z4e=W4e,K4e=UR,X4e=Z4e,Y4e=Object.prototype,J4e=Y4e.hasOwnProperty;function Q4e(e){if(!K4e(e))return X4e(e);var t=[];for(var r in Object(e))J4e.call(e,r)&&r!="constructor"&&t.push(r);return t}var eDe=Q4e,tDe=sZ,rDe=pZ;function nDe(e){return e!=null&&rDe(e.length)&&!tDe(e)}var vZ=nDe,iDe=gZ,aDe=eDe,oDe=vZ;function sDe(e){return oDe(e)?iDe(e):aDe(e)}var M2=sDe,lDe=I2,uDe=M2;function cDe(e,t){return e&&lDe(t,uDe(t),e)}var fDe=cDe;function hDe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var dDe=hDe,pDe=Zg,mDe=UR,gDe=dDe,yDe=Object.prototype,vDe=yDe.hasOwnProperty;function bDe(e){if(!pDe(e))return gDe(e);var t=mDe(e),r=[];for(var n in e)n=="constructor"&&(t||!vDe.call(e,n))||r.push(n);return r}var _De=bDe,xDe=gZ,wDe=_De,SDe=vZ;function EDe(e){return SDe(e)?xDe(e,!0):wDe(e)}var VR=EDe,CDe=I2,ADe=VR;function PDe(e,t){return e&&CDe(t,ADe(t),e)}var TDe=PDe,sx={exports:{}};sx.exports;(function(e,t){var r=Rf,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,u=o?r.Buffer:void 0,a=u?u.allocUnsafe:void 0;function p(h,m){if(m)return h.slice();var v=h.length,w=a?a(v):new h.constructor(v);return h.copy(w),w}e.exports=p})(sx,sx.exports);var IDe=sx.exports;function MDe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var RDe=MDe;function ODe(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var u=e[r];t(u,r,e)&&(o[i++]=u)}return o}var kDe=ODe;function LDe(){return[]}var bZ=LDe,DDe=kDe,NDe=bZ,FDe=Object.prototype,BDe=FDe.propertyIsEnumerable,H7=Object.getOwnPropertySymbols,jDe=H7?function(e){return e==null?[]:(e=Object(e),DDe(H7(e),function(t){return BDe.call(e,t)}))}:NDe,GR=jDe,zDe=I2,$De=GR;function qDe(e,t){return zDe(e,$De(e),t)}var UDe=qDe;function VDe(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var _Z=VDe,GDe=yZ,HDe=GDe(Object.getPrototypeOf,Object),xZ=HDe,WDe=_Z,ZDe=xZ,KDe=GR,XDe=bZ,YDe=Object.getOwnPropertySymbols,JDe=YDe?function(e){for(var t=[];e;)WDe(t,KDe(e)),e=ZDe(e);return t}:XDe,wZ=JDe,QDe=I2,e6e=wZ;function t6e(e,t){return QDe(e,e6e(e),t)}var r6e=t6e,n6e=_Z,i6e=kp;function a6e(e,t,r){var n=t(e);return i6e(e)?n:n6e(n,r(e))}var SZ=a6e,o6e=SZ,s6e=GR,l6e=M2;function u6e(e){return o6e(e,l6e,s6e)}var EZ=u6e,c6e=SZ,f6e=wZ,h6e=VR;function d6e(e){return c6e(e,h6e,f6e)}var p6e=d6e,m6e=Dp,g6e=Rf,y6e=m6e(g6e,"DataView"),v6e=y6e,b6e=Dp,_6e=Rf,x6e=b6e(_6e,"Promise"),w6e=x6e,S6e=Dp,E6e=Rf,C6e=S6e(E6e,"Set"),A6e=C6e,P6e=Dp,T6e=Rf,I6e=P6e(T6e,"WeakMap"),M6e=I6e,L3=v6e,D3=NR,N3=w6e,F3=A6e,B3=M6e,CZ=nb,Qg=lZ,W7="[object Map]",R6e="[object Object]",Z7="[object Promise]",K7="[object Set]",X7="[object WeakMap]",Y7="[object DataView]",O6e=Qg(L3),k6e=Qg(D3),L6e=Qg(N3),D6e=Qg(F3),N6e=Qg(B3),Ud=CZ;(L3&&Ud(new L3(new ArrayBuffer(1)))!=Y7||D3&&Ud(new D3)!=W7||N3&&Ud(N3.resolve())!=Z7||F3&&Ud(new F3)!=K7||B3&&Ud(new B3)!=X7)&&(Ud=function(e){var t=CZ(e),r=t==R6e?e.constructor:void 0,n=r?Qg(r):"";if(n)switch(n){case O6e:return Y7;case k6e:return W7;case L6e:return Z7;case D6e:return K7;case N6e:return X7}return t});var R2=Ud,F6e=Object.prototype,B6e=F6e.hasOwnProperty;function j6e(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&B6e.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var z6e=j6e,$6e=Rf,q6e=$6e.Uint8Array,AZ=q6e,J7=AZ;function U6e(e){var t=new e.constructor(e.byteLength);return new J7(t).set(new J7(e)),t}var HR=U6e,V6e=HR;function G6e(e,t){var r=t?V6e(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var H6e=G6e,W6e=/\w*$/;function Z6e(e){var t=new e.constructor(e.source,W6e.exec(e));return t.lastIndex=e.lastIndex,t}var K6e=Z6e,Q7=rb,e$=Q7?Q7.prototype:void 0,t$=e$?e$.valueOf:void 0;function X6e(e){return t$?Object(t$.call(e)):{}}var Y6e=X6e,J6e=HR;function Q6e(e,t){var r=t?J6e(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var eNe=Q6e,tNe=HR,rNe=H6e,nNe=K6e,iNe=Y6e,aNe=eNe,oNe="[object Boolean]",sNe="[object Date]",lNe="[object Map]",uNe="[object Number]",cNe="[object RegExp]",fNe="[object Set]",hNe="[object String]",dNe="[object Symbol]",pNe="[object ArrayBuffer]",mNe="[object DataView]",gNe="[object Float32Array]",yNe="[object Float64Array]",vNe="[object Int8Array]",bNe="[object Int16Array]",_Ne="[object Int32Array]",xNe="[object Uint8Array]",wNe="[object Uint8ClampedArray]",SNe="[object Uint16Array]",ENe="[object Uint32Array]";function CNe(e,t,r){var n=e.constructor;switch(t){case pNe:return tNe(e);case oNe:case sNe:return new n(+e);case mNe:return rNe(e,r);case gNe:case yNe:case vNe:case bNe:case _Ne:case xNe:case wNe:case SNe:case ENe:return aNe(e,r);case lNe:return new n;case uNe:case hNe:return new n(e);case cNe:return nNe(e);case fNe:return new n;case dNe:return iNe(e)}}var ANe=CNe,PNe=Zg,r$=Object.create,TNe=(function(){function e(){}return function(t){if(!PNe(t))return{};if(r$)return r$(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})(),INe=TNe,MNe=INe,RNe=xZ,ONe=UR;function kNe(e){return typeof e.constructor=="function"&&!ONe(e)?MNe(RNe(e)):{}}var LNe=kNe,DNe=R2,NNe=Lp,FNe="[object Map]";function BNe(e){return NNe(e)&&DNe(e)==FNe}var jNe=BNe,zNe=jNe,$Ne=$R,n$=qR,i$=n$&&n$.isMap,qNe=i$?$Ne(i$):zNe,UNe=qNe,VNe=R2,GNe=Lp,HNe="[object Set]";function WNe(e){return GNe(e)&&VNe(e)==HNe}var ZNe=WNe,KNe=ZNe,XNe=$R,a$=qR,o$=a$&&a$.isSet,YNe=o$?XNe(o$):KNe,JNe=YNe,QNe=jR,eFe=wLe,tFe=hZ,rFe=fDe,nFe=TDe,iFe=IDe,aFe=RDe,oFe=UDe,sFe=r6e,lFe=EZ,uFe=p6e,cFe=R2,fFe=z6e,hFe=ANe,dFe=LNe,pFe=kp,mFe=zR,gFe=UNe,yFe=Zg,vFe=JNe,bFe=M2,_Fe=VR,xFe=1,wFe=2,SFe=4,PZ="[object Arguments]",EFe="[object Array]",CFe="[object Boolean]",AFe="[object Date]",PFe="[object Error]",TZ="[object Function]",TFe="[object GeneratorFunction]",IFe="[object Map]",MFe="[object Number]",IZ="[object Object]",RFe="[object RegExp]",OFe="[object Set]",kFe="[object String]",LFe="[object Symbol]",DFe="[object WeakMap]",NFe="[object ArrayBuffer]",FFe="[object DataView]",BFe="[object Float32Array]",jFe="[object Float64Array]",zFe="[object Int8Array]",$Fe="[object Int16Array]",qFe="[object Int32Array]",UFe="[object Uint8Array]",VFe="[object Uint8ClampedArray]",GFe="[object Uint16Array]",HFe="[object Uint32Array]",La={};La[PZ]=La[EFe]=La[NFe]=La[FFe]=La[CFe]=La[AFe]=La[BFe]=La[jFe]=La[zFe]=La[$Fe]=La[qFe]=La[IFe]=La[MFe]=La[IZ]=La[RFe]=La[OFe]=La[kFe]=La[LFe]=La[UFe]=La[VFe]=La[GFe]=La[HFe]=!0;La[PFe]=La[TZ]=La[DFe]=!1;function $_(e,t,r,n,i,o){var u,a=t&xFe,p=t&wFe,h=t&SFe;if(r&&(u=i?r(e,n,i,o):r(e)),u!==void 0)return u;if(!yFe(e))return e;var m=pFe(e);if(m){if(u=fFe(e),!a)return aFe(e,u)}else{var v=cFe(e),w=v==TZ||v==TFe;if(mFe(e))return iFe(e,a);if(v==IZ||v==PZ||w&&!i){if(u=p||w?{}:dFe(e),!a)return p?sFe(e,nFe(u,e)):oFe(e,rFe(u,e))}else{if(!La[v])return i?e:{};u=hFe(e,v,a)}}o||(o=new QNe);var x=o.get(e);if(x)return x;o.set(e,u),vFe(e)?e.forEach(function(R){u.add($_(R,t,r,R,e,o))}):gFe(e)&&e.forEach(function(R,k){u.set(k,$_(R,t,r,k,e,o))});var P=h?p?uFe:lFe:p?_Fe:bFe,T=m?void 0:P(e);return eFe(T||e,function(R,k){T&&(k=R,R=e[k]),tFe(u,k,$_(R,t,r,k,e,o))}),u}var MZ=$_,WFe="__lodash_hash_undefined__";function ZFe(e){return this.__data__.set(e,WFe),this}var KFe=ZFe;function XFe(e){return this.__data__.has(e)}var YFe=XFe,JFe=FR,QFe=KFe,e8e=YFe;function lx(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new JFe;++t<r;)this.add(e[t])}lx.prototype.add=lx.prototype.push=QFe;lx.prototype.has=e8e;var t8e=lx;function r8e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var n8e=r8e;function i8e(e,t){return e.has(t)}var a8e=i8e,o8e=t8e,s8e=n8e,l8e=a8e,u8e=1,c8e=2;function f8e(e,t,r,n,i,o){var u=r&u8e,a=e.length,p=t.length;if(a!=p&&!(u&&p>a))return!1;var h=o.get(e),m=o.get(t);if(h&&m)return h==t&&m==e;var v=-1,w=!0,x=r&c8e?new o8e:void 0;for(o.set(e,t),o.set(t,e);++v<a;){var P=e[v],T=t[v];if(n)var R=u?n(T,P,v,t,e,o):n(P,T,v,e,t,o);if(R!==void 0){if(R)continue;w=!1;break}if(x){if(!s8e(t,function(k,N){if(!l8e(x,N)&&(P===k||i(P,k,r,n,o)))return x.push(N)})){w=!1;break}}else if(!(P===T||i(P,T,r,n,o))){w=!1;break}}return o.delete(e),o.delete(t),w}var RZ=f8e;function h8e(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var d8e=h8e;function p8e(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var m8e=p8e,s$=rb,l$=AZ,g8e=DR,y8e=RZ,v8e=d8e,b8e=m8e,_8e=1,x8e=2,w8e="[object Boolean]",S8e="[object Date]",E8e="[object Error]",C8e="[object Map]",A8e="[object Number]",P8e="[object RegExp]",T8e="[object Set]",I8e="[object String]",M8e="[object Symbol]",R8e="[object ArrayBuffer]",O8e="[object DataView]",u$=s$?s$.prototype:void 0,yP=u$?u$.valueOf:void 0;function k8e(e,t,r,n,i,o,u){switch(r){case O8e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R8e:return!(e.byteLength!=t.byteLength||!o(new l$(e),new l$(t)));case w8e:case S8e:case A8e:return g8e(+e,+t);case E8e:return e.name==t.name&&e.message==t.message;case P8e:case I8e:return e==t+"";case C8e:var a=v8e;case T8e:var p=n&_8e;if(a||(a=b8e),e.size!=t.size&&!p)return!1;var h=u.get(e);if(h)return h==t;n|=x8e,u.set(e,t);var m=y8e(a(e),a(t),n,i,o,u);return u.delete(e),m;case M8e:if(yP)return yP.call(e)==yP.call(t)}return!1}var L8e=k8e,c$=EZ,D8e=1,N8e=Object.prototype,F8e=N8e.hasOwnProperty;function B8e(e,t,r,n,i,o){var u=r&D8e,a=c$(e),p=a.length,h=c$(t),m=h.length;if(p!=m&&!u)return!1;for(var v=p;v--;){var w=a[v];if(!(u?w in t:F8e.call(t,w)))return!1}var x=o.get(e),P=o.get(t);if(x&&P)return x==t&&P==e;var T=!0;o.set(e,t),o.set(t,e);for(var R=u;++v<p;){w=a[v];var k=e[w],N=t[w];if(n)var F=u?n(N,k,w,t,e,o):n(k,N,w,e,t,o);if(!(F===void 0?k===N||i(k,N,r,n,o):F)){T=!1;break}R||(R=w=="constructor")}if(T&&!R){var D=e.constructor,U=t.constructor;D!=U&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof U=="function"&&U instanceof U)&&(T=!1)}return o.delete(e),o.delete(t),T}var j8e=B8e,vP=jR,z8e=RZ,$8e=L8e,q8e=j8e,f$=R2,h$=kp,d$=zR,U8e=mZ,V8e=1,p$="[object Arguments]",m$="[object Array]",u_="[object Object]",G8e=Object.prototype,g$=G8e.hasOwnProperty;function H8e(e,t,r,n,i,o){var u=h$(e),a=h$(t),p=u?m$:f$(e),h=a?m$:f$(t);p=p==p$?u_:p,h=h==p$?u_:h;var m=p==u_,v=h==u_,w=p==h;if(w&&d$(e)){if(!d$(t))return!1;u=!0,m=!1}if(w&&!m)return o||(o=new vP),u||U8e(e)?z8e(e,t,r,n,i,o):$8e(e,t,p,r,n,i,o);if(!(r&V8e)){var x=m&&g$.call(e,"__wrapped__"),P=v&&g$.call(t,"__wrapped__");if(x||P){var T=x?e.value():e,R=P?t.value():t;return o||(o=new vP),i(T,R,r,n,o)}}return w?(o||(o=new vP),q8e(e,t,r,n,i,o)):!1}var W8e=H8e,Z8e=W8e,y$=Lp;function OZ(e,t,r,n,i){return e===t?!0:e==null||t==null||!y$(e)&&!y$(t)?e!==e&&t!==t:Z8e(e,t,r,n,OZ,i)}var K8e=OZ,X8e=jR,Y8e=K8e,J8e=1,Q8e=2;function eBe(e,t,r,n){var i=r.length,o=i,u=!n;if(e==null)return!o;for(e=Object(e);i--;){var a=r[i];if(u&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=r[i];var p=a[0],h=e[p],m=a[1];if(u&&a[2]){if(h===void 0&&!(p in e))return!1}else{var v=new X8e;if(n)var w=n(h,m,p,e,t,v);if(!(w===void 0?Y8e(m,h,J8e|Q8e,n,v):w))return!1}}return!0}var tBe=eBe,rBe=Zg;function nBe(e){return e===e&&!rBe(e)}var iBe=nBe,aBe=iBe,oBe=M2;function sBe(e){for(var t=oBe(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,aBe(i)]}return t}var lBe=sBe;function uBe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var cBe=uBe,fBe=tBe,hBe=lBe,dBe=cBe;function pBe(e){var t=hBe(e);return t.length==1&&t[0][2]?dBe(t[0][0],t[0][1]):function(r){return r===e||fBe(r,e,t)}}var mBe=pBe,gBe=MZ,yBe=mBe,vBe=1;function bBe(e){return yBe(gBe(e,vBe))}var _Be=bBe;const xBe=kR(_Be);var wBe=MZ,SBe=1,EBe=4;function CBe(e){return wBe(e,SBe|EBe)}var ABe=CBe;const kZ=kR(ABe);class v${constructor({items:t=[],identifierName:r="id",getNewId:n}={}){if(Pu(this,"sequence",0),Pu(this,"items",[]),Pu(this,"database",null),Pu(this,"name",null),Pu(this,"identifierName","id"),Pu(this,"getNewId"),!Array.isArray(t))throw new Error("Can't initialize a Collection with anything else than an array of items");this.identifierName=r,this.getNewId=n||this.getNewIdFromSequence,t.map(this.addOne.bind(this))}setDatabase(t){this.database=t}setName(t){this.name=t}_oneToManyEmbedder(t){if(this.name==null)throw new Error("Can't embed references without a collection name");const r=`${this.name.slice(0,-1)}_id`;return n=>{if(this.database==null)throw new Error("Can't embed references without a database");const i=this.database.collections[t];if(!i)throw new Error(`Can't embed a non-existing collection ${t}`);return Array.isArray(n[t])?n[t]=i.getAll({filter:o=>n[t].indexOf(o[i.identifierName])!==-1}):n[t]=i.getAll({filter:o=>o[r]===n[this.identifierName]}),n}}_manyToOneEmbedder(t){const r=`${t}s`,n=`${t}_id`;return i=>{if(this.database==null)throw new Error("Can't embed references without a database");const o=this.database.collections[r];if(!o)throw new Error(`Can't embed a non-existing collection ${t}`);try{i[t]=o.getOne(i[n])}catch{}return i}}_itemEmbedder(t){const r=(Array.isArray(t)?t:[t]).map(n=>n.endsWith("s")?this._oneToManyEmbedder(n):this._manyToOneEmbedder(n));return n=>r.reduce((i,o)=>o(i),n)}getCount(t){return this.getAll(t).length}getAll(t){let r=this.items.slice(0);return t&&(r=r.map(n=>Object.assign({},n)),t.embed&&this.database&&(r=r.map(this._itemEmbedder(t.embed))),t.filter&&(r=LZ(r,t.filter)),t.sort&&(r=MBe(r,t.sort)),t.range&&(r=RBe(r,t.range))),r}getIndex(t){return this.items.findIndex(r=>r[this.identifierName]==t)}getOne(t,r){const n=this.getIndex(t);if(n===-1)throw new Error(`No item with identifier ${t}`);let i=this.items[n];return i=Object.assign({},i),r!=null&&r.embed&&this.database&&(i=this._itemEmbedder(r.embed)(i)),i}getNewIdFromSequence(){return this.sequence++}addOne(t){const r=kZ(t),n=r[this.identifierName];if(n!=null){if(this.getIndex(n)!==-1)throw new Error(`An item with the identifier ${n} already exists`);typeof n=="number"&&(this.sequence=Math.max(this.sequence,n)+1)}else r[this.identifierName]=this.getNewId();return this.items.push(r),r}updateOne(t,r){const n=this.getIndex(t);if(n===-1)throw new Error(`No item with identifier ${t}`);for(const i in r)this.items[n][i]=r[i];return Object.assign({},this.items[n])}removeOne(t){const r=this.getIndex(t);if(r===-1)throw new Error(`No item with identifier ${t}`);const n=this.items[r];return this.items.splice(r,1),typeof t=="number"&&t==this.sequence-1&&this.sequence--,n}}const PBe=(e,t)=>e.reduce((r,n)=>r&&t(n),!0),TBe=(e,t)=>e.reduce((r,n)=>r||t(n),!1),IBe=(e,t)=>e.reduce((r,n,i)=>{if(r!=null)return r;const o=e.slice(0,i+1).join("."),u=e.slice(i+1).join("."),a=to(t,o);return Array.isArray(a)&&i<e.length-1?[o,u]:void 0},void 0),b$=(e,t)=>{if(e.indexOf("_q")!==-1){const r=e.replace(/(_q)$/,""),n=new RegExp(t.toString(),"i");return i=>{var o;return((o=to(i,r))==null?void 0:o.toString().match(n))!==null}}if(e.indexOf("_lte")!==-1){const r=e.replace(/(_lte)$/,"");return n=>to(n,r)<=t}if(e.indexOf("_gte")!==-1){const r=e.replace(/(_gte)$/,"");return n=>to(n,r)>=t}if(e.indexOf("_lt")!==-1){const r=e.replace(/(_lt)$/,"");return n=>to(n,r)<t}if(e.indexOf("_gt")!==-1){const r=e.replace(/(_gt)$/,"");return n=>to(n,r)>t}if(e.indexOf("_neq_any")!==-1){const r=e.replace(/(_neq_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.every(o=>to(i,r)!=o)}if(e.indexOf("_neq")!==-1){const r=e.replace(/(_neq)$/,"");return n=>to(n,r)!=t}if(e.indexOf("_eq_any")!==-1){const r=e.replace(/(_eq_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.some(o=>to(i,r)==o)}if(e.indexOf("_eq")!==-1){const r=e.replace(/(_eq)$/,"");return n=>to(n,r)==t}if(e.indexOf("_inc_any")!==-1){const r=e.replace(/(_inc_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.some(o=>{const u=to(i,r);return Array.isArray(u)||typeof u=="string"?u.includes(o):!1})}if(e.indexOf("_inc")!==-1){const r=e.replace(/(_inc)$/,""),n=Array.isArray(t)?t:[t];return i=>n.every(o=>{const u=to(i,r);return Array.isArray(u)||typeof u=="string"?u.includes(o):!1})}if(e.indexOf("_ninc_any")!==-1){const r=e.replace(/(_ninc_any)$/,""),n=Array.isArray(t)?t:[t];return i=>n.every(o=>{const u=to(i,r);return Array.isArray(u)||typeof u=="string"?!u.includes(o):!1})}return Array.isArray(t)?r=>Array.isArray(to(r,e))?PBe(t,n=>{const i=to(r,e);return Array.isArray(i)?TBe(i,o=>o==n):!1}):t.filter(n=>n==to(r,e)).length>0:t==null?r=>to(r,e)==null:typeof t=="object"?r=>xBe(t)(to(r,e)):r=>{const n=to(r,e);return Array.isArray(n)&&typeof t=="string"?n.indexOf(t)!==-1:typeof n=="boolean"&&typeof t=="string"?n===(t==="true"):n==t}};function LZ(e,t){if(typeof t=="function")return e.filter(t);if(t instanceof Object){const r=Object.keys(t).map(n=>{if(n==="q"&&typeof t.q=="string"){const u=OBe(t.q),a=p=>{for(const h in p){const m=p[h];if(typeof m=="object"&&a(m)||m&&typeof m=="string"&&m.match&&m.match(u)!==null)return!0}return!1};return a}const i=n.split("."),o=t[n];return i.length>1?u=>{const a=IBe(i,u);if(a){const[p,h]=a,m=to(u,p);return Array.isArray(m)?LZ(m,{[h]:o}).length>0:!1}return b$(n,o)(u)}:b$(n,o)});return e.filter(n=>r.reduce((i,o)=>i&&o(n),!0))}throw new Error("Unsupported filter type")}function MBe(e,t){if(typeof t=="function")return e.sort(t);if(typeof t=="string")return e.sort((r,n)=>{const i=to(r,t),o=to(n,t);return i>o?1:i<o?-1:0});if(Array.isArray(t)){const r=t[0],n=t[1].toLowerCase()==="asc"?1:-1;return e.sort((i,o)=>{const u=to(i,r),a=to(o,r);return u>a?n:u<a?-1*n:0})}throw new Error("Unsupported sort type")}function RBe(e,t){if(Array.isArray(t))return e.slice(t[0],t[1]!==void 0?t[1]+1:void 0);throw new Error("Unsupported range type")}function OBe(e){const t=e.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&").split(" ").map(r=>`(${r})`).join("|");return new RegExp(t,"i")}class kBe{constructor(t){if(Pu(this,"obj",null),Pu(this,"database",null),Pu(this,"name",null),!(t instanceof Object))throw new Error("Can't initialize a Single with anything except an object");this.obj=kZ(t)}setDatabase(t){this.database=t}setName(t){this.name=t}_oneToManyEmbedder(t){return r=>{if(this.database==null)throw new Error("Can't embed references without a database");const n=this.database.collections[t];if(!n)throw new Error(`Can't embed a non-existing collection ${t}`);return r[t]=n.getAll({filter:i=>r[t].indexOf(i[n.identifierName])!==-1}),r}}_manyToOneEmbedder(t){const r=`${t}s`,n=`${t}_id`;return i=>{if(this.database==null)throw new Error("Can't embed references without a database");const o=this.database.collections[r];if(!o)throw new Error(`Can't embed a non-existing collection ${t}`);try{i[t]=o.getOne(i[n])}catch{}return i}}_itemEmbedder(t){const r=(Array.isArray(t)?t:[t]).map(n=>n.endsWith("s")?this._oneToManyEmbedder(n):this._manyToOneEmbedder(n));return n=>r.reduce((i,o)=>o(i),n)}getOnly(t){let r=this.obj;return t!=null&&t.embed&&this.database&&(r=Object.assign({},r),r=this._itemEmbedder(t.embed)(r)),r}updateOnly(t){if(this.obj==null)throw new Error("Can't update a non-existing object");for(const r in t)this.obj[r]=t[r];return this.obj}}class LBe{constructor({data:t,identifierName:r="id",getNewId:n}={}){Pu(this,"identifierName","id"),Pu(this,"collections",{}),Pu(this,"singles",{}),Pu(this,"getNewId"),this.getNewId=n,this.identifierName=r,t&&this.init(t)}init(t){for(const r in t){const n=t[r];Array.isArray(n)?this.addCollection(r,new v$({items:n,identifierName:this.identifierName,getNewId:this.getNewId})):this.addSingle(r,new kBe(n))}}addCollection(t,r){this.collections[t]=r,r.setDatabase(this),r.setName(t)}getCollection(t){return this.collections[t]}getCollectionNames(){return Object.keys(this.collections)}addSingle(t,r){this.singles[t]=r,r.setDatabase(this),r.setName(t)}getSingle(t){return this.singles[t]}getSingleNames(){return Object.keys(this.singles)}getCount(t,r){return this.collections[t].getCount(r)}getAll(t,r){return this.collections[t].getAll(r)}getOne(t,r,n){return this.collections[t].getOne(r,n)}addOne(t,r){return Object.prototype.hasOwnProperty.call(this.collections,t)||this.addCollection(t,new v$({items:[],identifierName:this.identifierName,getNewId:this.getNewId})),this.collections[t].addOne(r)}updateOne(t,r,n){return this.collections[t].updateOne(r,n)}removeOne(t,r){return this.collections[t].removeOne(r)}getOnly(t,r){return this.singles[t].getOnly()}updateOnly(t,r){return this.singles[t].updateOnly(r)}}var DBe=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),jh=function(){return jh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jh.apply(this,arguments)},NBe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function a(m){try{h(n.next(m))}catch(v){u(v)}}function p(m){try{h(n.throw(m))}catch(v){u(v)}}function h(m){m.done?o(m.value):i(m.value).then(a,p)}h((n=n.apply(e,t||[])).next())})},FBe=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=a(0),u.throw=a(1),u.return=a(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,h[0]&&(r=0)),r;)try{if(n=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],i=0}finally{n=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},BBe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function jBe(e,t,r,n){console.group?(console.groupCollapsed(e,t,JSON.stringify(r)),console.log(n),console.groupEnd()):(console.log("FakeRest request ",e,t,r),console.log("FakeRest response",n))}function Jf(e,t){return t?new Promise(function(r){setTimeout(function(){return r(e)},t)}):e}const _$=(function(e,t,r){t===void 0&&(t=!1);var n=new LBe({data:e});typeof window<"u"&&(window._database=n);function i(u,a,p){var h,m,v,w,x,P,T,R,k,N,F,D,U,B,Z,J,X,le,H;switch(u){case"getList":{var G=p.pagination,ae=G.page,se=G.perPage,ue=p.sort,me=ue.field,Ce=ue.order,pe={sort:[me,Ce],range:[(ae-1)*se,ae*se-1],filter:p.filter,embed:c_((m=p.meta)===null||m===void 0?void 0:m.embed,(v=p.meta)===null||v===void 0?void 0:v.prefetch)},Ee=n.getAll(a,pe),Fe=f_(Ee,(w=p.meta)===null||w===void 0?void 0:w.prefetch);return Jf({data:h_(Ee,(x=p.meta)===null||x===void 0?void 0:x.prefetch),total:n.getCount(a,{filter:p.filter}),meta:!((P=p.meta)===null||P===void 0)&&P.prefetch?{prefetched:Fe}:void 0},r)}case"getOne":{var Ke=n.getOne(a,p.id,jh(jh({},p),{embed:c_((T=p.meta)===null||T===void 0?void 0:T.embed,(R=p.meta)===null||R===void 0?void 0:R.prefetch)})),Fe=f_(Ke,(k=p.meta)===null||k===void 0?void 0:k.prefetch);return Jf({data:h_(Ke,(N=p.meta)===null||N===void 0?void 0:N.prefetch),meta:!((F=p.meta)===null||F===void 0)&&F.prefetch?{prefetched:Fe}:void 0},r)}case"getMany":{var fe=p.ids.map(function(ht){var Ot,mt;return n.getOne(a,ht,jh(jh({},p),{embed:c_((Ot=p.meta)===null||Ot===void 0?void 0:Ot.embed,(mt=p.meta)===null||mt===void 0?void 0:mt.prefetch)}))}),Fe=f_(fe,(D=p.meta)===null||D===void 0?void 0:D.prefetch);return Jf({data:h_(fe,(U=p.meta)===null||U===void 0?void 0:U.prefetch),meta:!((B=p.meta)===null||B===void 0)&&B.prefetch?{prefetched:Fe}:void 0},r)}case"getManyReference":{var _e=p.pagination,ae=_e.page,se=_e.perPage,Pe=p.sort,me=Pe.field,Ce=Pe.order,pe={sort:[me,Ce],range:[(ae-1)*se,ae*se-1],filter:jh(jh({},p.filter),(h={},h[p.target]=p.id,h)),embed:c_((Z=p.meta)===null||Z===void 0?void 0:Z.embed,(J=p.meta)===null||J===void 0?void 0:J.prefetch)},ke=n.getAll(a,pe),Fe=f_(ke,(X=p.meta)===null||X===void 0?void 0:X.prefetch);return Jf({data:h_(ke,(le=p.meta)===null||le===void 0?void 0:le.prefetch),total:n.getCount(a,{filter:pe.filter}),meta:!((H=p.meta)===null||H===void 0)&&H.prefetch?{prefetched:Fe}:void 0},r)}case"update":return Jf({data:n.updateOne(a,p.id,bP(p.data))},r);case"updateMany":return p.ids.forEach(function($e){return n.updateOne(a,$e,bP(p.data))}),Jf({data:p.ids},r);case"create":return Jf({data:n.addOne(a,bP(p.data))},r);case"delete":return Jf({data:n.removeOne(a,p.id)},r);case"deleteMany":return p.ids.forEach(function($e){return n.removeOne(a,$e)}),Jf({data:p.ids},r);default:return!1}}var o=function(u,a,p){return NBe(void 0,void 0,void 0,function(){var h,m,v,w,x;return FBe(this,function(P){switch(P.label){case 0:if(h=n.getCollection(a),!h&&u!=="create")throw m=new zBe('Undefined collection "'.concat(a,'"')),m.code=1,m;P.label=1;case 1:return P.trys.push([1,3,,4]),[4,i(u,a,p)];case 2:return v=P.sent(),[3,4];case 3:throw w=P.sent(),console.error(w),w;case 4:return t&&(p.signal,x=BBe(p,["signal"]),jBe(u,a,x,v)),[2,v]}})})};return{getList:function(u,a){return o("getList",u,a)},getOne:function(u,a){return o("getOne",u,a)},getMany:function(u,a){return o("getMany",u,a)},getManyReference:function(u,a){return o("getManyReference",u,a)},update:function(u,a){return o("update",u,a)},updateMany:function(u,a){return o("updateMany",u,a)},create:function(u,a){return o("create",u,a)},delete:function(u,a){return o("delete",u,a)},deleteMany:function(u,a){return o("deleteMany",u,a)}}});function c_(e,t){if(!(!e&&!t)){var r=new Set;return e&&e.forEach(function(n){return r.add(n)}),t&&t.forEach(function(n){return r.add(n)}),Array.from(r)}}var f_=function(e,t){if(t){var r={},n=Array.isArray(e)?e:[e];return t.forEach(function(i){var o=i.endsWith("s")?i:"".concat(i,"s");n.forEach(function(u){r[o]||(r[o]=[]),!r[o].some(function(a){return a.id===u[i].id})&&r[o].push(u[i])})}),r}},h_=function(e,t){if(!t)return e;var r=Array.isArray(e)?e:[e],n=r.map(function(i){var o={};for(var u in i)t.includes(u)||(o[u]=i[u]);return o});return Array.isArray(e)?n:n[0]},bP=function(e){return JSON.parse(JSON.stringify(e))},zBe=(function(e){DBe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(Error),_P,x$;function $Be(){if(x$)return _P;x$=1;var e=JI();function t(r,n){for(var i=-1,o=n.length,u=Array(o),a=r==null;++i<o;)u[i]=a?void 0:e(r,n[i]);return u}return _P=t,_P}var xP,w$;function qBe(){if(w$)return xP;w$=1;var e=NG(),t=Ag(),r=Array.prototype,n=r.splice;function i(o,u){for(var a=o?u.length:0,p=a-1;a--;){var h=u[a];if(a==p||h!==m){var m=h;t(h)?n.call(o,h,1):e(o,h)}}return o}return xP=i,xP}var wP,S$;function UBe(){if(S$)return wP;S$=1;var e=Yx();function t(r,n){if(r!==n){var i=r!==void 0,o=r===null,u=r===r,a=e(r),p=n!==void 0,h=n===null,m=n===n,v=e(n);if(!h&&!v&&!a&&r>n||a&&p&&m&&!h&&!v||o&&p&&m||!i&&m||!u)return 1;if(!o&&!a&&!v&&r<n||v&&i&&u&&!o&&!a||h&&i&&u||!p&&u||!m)return-1}return 0}return wP=t,wP}var SP,E$;function VBe(){if(E$)return SP;E$=1;var e=GI(),t=$Be(),r=qBe(),n=UBe(),i=lH(),o=Ag(),u=i(function(a,p){var h=a==null?0:a.length,m=t(a,p);return r(a,e(p,function(v){return o(v,h)?+v:v}).sort(n)),m});return SP=u,SP}var GBe=VBe();const C$=qs(GBe);function HBe(e){const{defaultData:t={},localStorageKey:r="ra-data-local-storage",loggingEnabled:n=!1,localStorageUpdateDelay:i=10}=e||{},o=localStorage.getItem(r);let u=o?JSON.parse(o):t;const a=h=>{setTimeout(()=>{h(),localStorage.setItem(r,JSON.stringify(u));const m=new Event("storageItemUpdated",{bubbles:!0,cancelable:!1});document.dispatchEvent(m)},i)};let p=_$(u,n);return window?.addEventListener("storage",h=>{if(h.key===r){const m=JSON.parse(h.newValue);u=m,p=_$(m,n)}}),{getList:(h,m)=>p.getList(h,m).catch(v=>{if(v.code===1)return{data:[],total:0};throw v}),getOne:(h,m)=>p.getOne(h,m),getMany:(h,m)=>p.getMany(h,m),getManyReference:(h,m)=>p.getManyReference(h,m).catch(v=>{if(v.code===1)return{data:[],total:0};throw v}),update:(h,m)=>(a(()=>{const v=u[h].findIndex(w=>w.id===m.data.id);u[h][v]={...m.data}}),p.update(h,m)),updateMany:(h,m)=>(a(()=>{m.ids.forEach(v=>{const w=u[h]?.findIndex(x=>x.id===v);u[h][w]={...u[h][w],...m.data}})}),p.updateMany(h,m)),create:(h,m)=>p.create(h,m).then(v=>(a(()=>{Object.prototype.hasOwnProperty.call(u,h)||(u[h]=[]),u[h].push(v.data)}),v)),delete:(h,m)=>(a(()=>{const v=u[h]?.findIndex(w=>w.id===m.id);C$(u[h],[v])}),p.delete(h,m)),deleteMany:(h,m)=>(a(()=>{const v=m.ids.map(w=>u[h]?.findIndex(x=>x.id===w));C$(u[h],v)}),p.deleteMany(h,m))}}const DZ={pois:[{id:0,title:"poi",geom:"POINT (7.077808464010502 50.74294216203171)"}],properties:[{id:0,title:"property",geom:"POLYGON ((7.066952151714986 50.740002740511244, 7.0639480776189885 50.74065454154203, 7.064291400372213 50.74198527380986, 7.067381305157255 50.742121060690465, 7.067381305157255 50.740518750408825, 7.0669092363712025 50.73997558193838, 7.066952151714986 50.740002740511244))"}],routes:[{id:0,title:"route",geom:"LINESTRING (7.072968944094811 50.737892872017426, 7.0724677647124565 50.73921232584979, 7.0719866325044904 50.7409250229731, 7.071808100376245 50.742318711300925, 7.072108808006249 50.7425470593881, 7.076779799853682 50.742876893548384, 7.077140649009607 50.742775406362085, 7.0774413566381895 50.74257243132925, 7.077862347320121 50.74252168743365, 7.078343479528058 50.74269929082783, 7.078503856930212 50.742889579431534, 7.079466121344723 50.74290226531082, 7.080187819656601 50.742876893548384, 7.08082932926672 50.74281346408284)"}]},WBe=HBe({localStorageUpdateDelay:2,defaultData:DZ}),ZBe=je.createContext();function NZ(e){const[t,r]=I.useState({});I.useEffect(()=>{n();const o=()=>{console.log("refreshing data from localStorage"),n()};return window.addEventListener("storageItemUpdated",o),()=>{window.removeEventListener("storageItemUpdated",o)}},[]);const n=()=>{const o=localStorage.getItem("ra-data-local-storage");if(o){const u=JSON.parse(o),a=Object.keys(u).map(p=>{const h=u[p].map(m=>Kq(Uh.parse(m.geom)));return{name:p,featureCollection:h?.[0]?jue(h):void 0}});r(a)}else{const u=[];let a=0;Object.values(DZ).map(p=>{u.push({name:a===0?"pois":a===1?"properties":"routes",featureCollection:{type:"FeatureCollection",features:p.map(h=>({type:"Feature",properties:{},geometry:Uh.parse(h.geom)}))}}),a++}),r(u)}},i={data:t,refreshData:n};return ze.jsx(ZBe.Provider,{value:i,children:e.children})}NZ.__docgenInfo={description:"",methods:[],displayName:"DataContextProvider"};const KBe=(e,t)=>ze.jsx(NZ,{children:ze.jsxs(Mx,{children:[ze.jsx(OMe,{dataProvider:WBe,layout:t.parameters?.layout,theme:sW,children:ze.jsx(jH,{children:ze.jsx(Eu,{path:"/",element:ze.jsx(e,{})})})},t.parameters?.name),!t.args.embeddedMap&&ze.jsx(A0,{mapId:"map_1",options:{zoom:14.5,style:"https://wms.wheregroup.com/tileserver/style/klokantech-basic.json",center:[7.080590113226776,50.740545567043426]},style:{position:"absolute",top:0,right:0,left:0,bottom:0}})]})});KBe.__docgenInfo={description:"",methods:[],displayName:"ReactAdminDefaultDecorator"};function j3(e){const t=e.source,r=yl(),n=P0(),[i,o]=I.useState();return I.useEffect(()=>{if(!r?.[t])return;const u=Uh.parse(r[t]);u&&o({type:"Feature",properties:{},geometry:u})},[r]),I.useEffect(()=>{if(!n.map||!i)return;const u=Yq(i);u?.geometry?.coordinates&&n.map.setCenter(u.geometry.coordinates)},[n.map,i]),ze.jsxs(ze.Fragment,{children:[e.embeddedMap&&ze.jsx(A0,{...e?.MapLibreMapProps,options:{zoom:14,style:"https://wms.wheregroup.com/tileserver/style/klokantech-basic.json",center:[0,0],...e?.MapLibreMapProps?.options},style:{width:"100%",height:"400px",...e?.MapLibreMapProps?.style}}),i&&ze.jsx(Ev,{geojson:i})]})}j3.__docgenInfo={description:"",methods:[],displayName:"GeospatialShowMap",props:{MapLibreMapProps:{required:!1,tsType:{name:"ReactComponentProps",raw:"React.ComponentProps<typeof MapLibreMap>",elements:[{name:"MapLibreMap"}]},description:""},embeddedMap:{required:!1,tsType:{name:"boolean"},description:""},mapId:{required:!1,tsType:{name:"string"},description:""}},composes:["InputProps"]};function md(e){return ze.jsx(ze.Fragment,{children:e.embeddedMap?ze.jsx(Mx,{children:ze.jsx(j3,{...e})}):ze.jsx(j3,{...e})})}md.defaultProps={embeddedMap:!0};md.__docgenInfo={description:"",methods:[],displayName:"GeospatialShow",props:{embeddedMap:{defaultValue:{value:"true",computed:!1},required:!1}}};const ey={MapLibreMapProps:{options:{zoom:14,center:[7.0851268,50.73884]}},embeddedMap:!0,source:"geom"},ty={MapLibreMapProps:{options:{zoom:14,center:[7.0851268,50.73884]}},embeddedMap:!1,source:"geom"},XBe=()=>ze.jsx(Vg,{mutationMode:"optimistic",resource:"pois",id:"0",redirect:!1,children:ze.jsxs(Gg,{children:[ze.jsx(nu,{source:"title"}),ze.jsx(nu,{source:"geom"}),ze.jsx(pd,{...ey,type:"point"})]})}),YBe=()=>ze.jsx(Vg,{mutationMode:"optimistic",resource:"pois",id:"0",redirect:!1,children:ze.jsxs(Gg,{children:[ze.jsx(nu,{source:"title"}),ze.jsx(nu,{source:"geom"}),ze.jsx(pd,{...ty,type:"point"})]})}),JBe=()=>ze.jsx(Hg,{resource:"pois",id:"0",children:ze.jsxs(Wg,{children:[ze.jsx(ec,{source:"id"}),ze.jsx(ec,{source:"title"}),ze.jsx(md,{...ey})]})}),QBe=()=>ze.jsx(Hg,{resource:"pois",id:"0",children:ze.jsxs(Wg,{children:[ze.jsx(ec,{source:"id"}),ze.jsx(ec,{source:"title"}),ze.jsx(md,{...ty})]})});XBe.__docgenInfo={description:"",methods:[],displayName:"PoiEdit"};YBe.__docgenInfo={description:"",methods:[],displayName:"PoiEditWebGis"};JBe.__docgenInfo={description:"",methods:[],displayName:"PoiShow"};QBe.__docgenInfo={description:"",methods:[],displayName:"PoiShowWebGis"};const eje=()=>ze.jsx(Vg,{mutationMode:"optimistic",resource:"properties",id:"0",redirect:!1,children:ze.jsxs(Gg,{children:[ze.jsx(nu,{source:"title"}),ze.jsx(nu,{source:"geom"}),ze.jsx(pd,{...ey,type:"polygon"})]})}),tje=()=>ze.jsx(Vg,{mutationMode:"optimistic",resource:"properties",id:"0",redirect:!1,children:ze.jsxs(Gg,{children:[ze.jsx(nu,{source:"title"}),ze.jsx(nu,{source:"geom"}),ze.jsx(pd,{...ty,type:"polygon"})]})}),rje=()=>ze.jsx(Hg,{resource:"properties",id:"0",children:ze.jsxs(Wg,{children:[ze.jsx(ec,{source:"id"}),ze.jsx(ec,{source:"title"}),ze.jsx(md,{...ey})]})}),nje=()=>ze.jsx(Hg,{resource:"properties",id:"0",children:ze.jsxs(Wg,{children:[ze.jsx(ec,{source:"id"}),ze.jsx(ec,{source:"title"}),ze.jsx(md,{...ty})]})});eje.__docgenInfo={description:"",methods:[],displayName:"PropertyEdit"};tje.__docgenInfo={description:"",methods:[],displayName:"PropertyEditWebGis"};rje.__docgenInfo={description:"",methods:[],displayName:"PropertyShow"};nje.__docgenInfo={description:"",methods:[],displayName:"PropertyShowWebGis"};const ije=()=>ze.jsx(Vg,{mutationMode:"optimistic",resource:"routes",id:"0",redirect:!1,children:ze.jsxs(Gg,{children:[ze.jsx(nu,{source:"title"}),ze.jsx(nu,{source:"geom"}),ze.jsx(pd,{...ey,type:"line"})]})}),aje=()=>ze.jsx(Vg,{mutationMode:"optimistic",resource:"routes",id:"0",redirect:!1,children:ze.jsxs(Gg,{children:[ze.jsx(nu,{source:"title"}),ze.jsx(nu,{source:"geom"}),ze.jsx(pd,{...ty,type:"line"})]})}),oje=()=>ze.jsx(Hg,{resource:"routes",id:"0",children:ze.jsxs(Wg,{children:[ze.jsx(ec,{source:"id"}),ze.jsx(ec,{source:"title"}),ze.jsx(md,{...ey})]})}),sje=()=>ze.jsx(Hg,{resource:"routes",id:"0",children:ze.jsxs(Wg,{children:[ze.jsx(ec,{source:"id"}),ze.jsx(ec,{source:"title"}),ze.jsx(md,{...ty})]})});ije.__docgenInfo={description:"",methods:[],displayName:"RouteEdit"};aje.__docgenInfo={description:"",methods:[],displayName:"RouteEditWebGis"};oje.__docgenInfo={description:"",methods:[],displayName:"RouteShow"};sje.__docgenInfo={description:"",methods:[],displayName:"RouteShowWebGis"};const lje=nr("div")(()=>({display:"flex",flexDirection:"column",zIndex:1,minHeight:"100%",position:"relative",backgroundColor:"transparent",pointerEvents:"none"})),uje=nr("div")(()=>({display:"flex",flexDirection:"column"})),cje=nr("main")(()=>({display:"flex",flexGrow:1,marginTop:"3em"})),fje=nr("div")(()=>({display:"flex",flexDirection:"row",justifyContent:"center",maxHeight:"50vh",position:"fixed",bottom:"0",width:"100%",backgroundColor:"#fafafa",overflow:"auto",pointerEvents:"all",boxShadow:"0px 0px 8px rgba(0,0,0,0.2)"})),hje=nr(od)(()=>({maxWidth:"600px",width:"100%",height:"100%"})),dje=({children:e,title:t})=>{const[r]=J0(),[n,i]=I.useState(!0);return I.useEffect(()=>{i(!0)},[e]),ze.jsx(lje,{children:ze.jsxs(uje,{children:[ze.jsx(uW,{title:t,open:r,sx:{pointerEvents:"all"}}),ze.jsxs(cje,{children:[ze.jsx(wW,{sx:{backgroundColor:"#f0f0f0",pointerEvents:"all",overflow:"hidden"},children:ze.jsx(qg,{})}),ze.jsxs(fje,{sx:{...n?{}:{height:"40px",overflow:"hidden"}},children:[ze.jsx(Bo,{onClick:()=>i(o=>!o),sx:{position:"absolute",top:0,zIndex:100},children:n?ze.jsx(U1e,{}):ze.jsx(V1e,{})}),ze.jsx(hje,{children:e})]})]})]})})};dje.__docgenInfo={description:"",methods:[],displayName:"GisLayout"};export{pd as G,XBe as P,KBe as R,ha as _,eje as a,ije as b,YBe as c,tje as d,aje as e,dje as f,md as g,JBe as h,rje as i,oje as j,QBe as k,nje as l,sje as m};
