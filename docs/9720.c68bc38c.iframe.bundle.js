/*! For license information please see 9720.c68bc38c.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_mapcomponents_react_maplibre=self.webpackChunk_mapcomponents_react_maplibre||[]).push([[9720],{30128:(t,e,n)=>{"use strict";function r(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function i(t){return t instanceof r(t).Element||t instanceof Element}function o(t){return t instanceof r(t).HTMLElement||t instanceof HTMLElement}function s(t){return"undefined"!=typeof ShadowRoot&&(t instanceof r(t).ShadowRoot||t instanceof ShadowRoot)}n.d(e,{uV:()=>ft});var l=Math.max,u=Math.min,a=Math.round;function f(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function c(){return!/^((?!chrome|android).)*safari/i.test(f())}function h(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var s=t.getBoundingClientRect(),l=1,u=1;e&&o(t)&&(l=t.offsetWidth>0&&a(s.width)/t.offsetWidth||1,u=t.offsetHeight>0&&a(s.height)/t.offsetHeight||1);var f=(i(t)?r(t):window).visualViewport,h=!c()&&n,p=(s.left+(h&&f?f.offsetLeft:0))/l,d=(s.top+(h&&f?f.offsetTop:0))/u,g=s.width/l,y=s.height/u;return{width:g,height:y,top:d,right:p+g,bottom:d+y,left:p,x:p,y:d}}function p(t){var e=r(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function d(t){return t?(t.nodeName||"").toLowerCase():null}function g(t){return((i(t)?t.ownerDocument:t.document)||window.document).documentElement}function y(t){return h(g(t)).left+p(t).scrollLeft}function m(t){return r(t).getComputedStyle(t)}function x(t){var e=m(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function v(t,e,n){void 0===n&&(n=!1);var i,s,l=o(e),u=o(e)&&function(t){var e=t.getBoundingClientRect(),n=a(e.width)/t.offsetWidth||1,r=a(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),f=g(e),c=h(t,u,n),m={scrollLeft:0,scrollTop:0},v={x:0,y:0};return(l||!l&&!n)&&(("body"!==d(e)||x(f))&&(m=(i=e)!==r(i)&&o(i)?{scrollLeft:(s=i).scrollLeft,scrollTop:s.scrollTop}:p(i)),o(e)?((v=h(e,!0)).x+=e.clientLeft,v.y+=e.clientTop):f&&(v.x=y(f))),{x:c.left+m.scrollLeft-v.x,y:c.top+m.scrollTop-v.y,width:c.width,height:c.height}}function b(t){var e=h(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function w(t){return"html"===d(t)?t:t.assignedSlot||t.parentNode||(s(t)?t.host:null)||g(t)}function E(t){return["html","body","#document"].indexOf(d(t))>=0?t.ownerDocument.body:o(t)&&x(t)?t:E(w(t))}function S(t,e){var n;void 0===e&&(e=[]);var i=E(t),o=i===(null==(n=t.ownerDocument)?void 0:n.body),s=r(i),l=o?[s].concat(s.visualViewport||[],x(i)?i:[]):i,u=e.concat(l);return o?u:u.concat(S(w(l)))}function _(t){return["table","td","th"].indexOf(d(t))>=0}function O(t){return o(t)&&"fixed"!==m(t).position?t.offsetParent:null}function k(t){for(var e=r(t),n=O(t);n&&_(n)&&"static"===m(n).position;)n=O(n);return n&&("html"===d(n)||"body"===d(n)&&"static"===m(n).position)?e:n||function(t){var e=/firefox/i.test(f());if(/Trident/i.test(f())&&o(t)&&"fixed"===m(t).position)return null;var n=w(t);for(s(n)&&(n=n.host);o(n)&&["html","body"].indexOf(d(n))<0;){var r=m(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var R="top",P="bottom",I="right",A="left",L="auto",j=[R,P,I,A],M="start",B="end",N="viewport",D="popper",T=j.reduce((function(t,e){return t.concat([e+"-"+M,e+"-"+B])}),[]),z=[].concat(j,[L]).reduce((function(t,e){return t.concat([e,e+"-"+M,e+"-"+B])}),[]),W=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function C(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}var $={placement:"bottom",modifiers:[],strategy:"absolute"};function q(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function H(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,o=e.defaultOptions,s=void 0===o?$:o;return function(t,e,n){void 0===n&&(n=s);var o,l,u={placement:"bottom",orderedModifiers:[],options:Object.assign({},$,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],f=!1,c={state:u,setOptions:function(n){var o="function"==typeof n?n(u.options):n;h(),u.options=Object.assign({},s,u.options,o),u.scrollParents={reference:i(t)?S(t):t.contextElement?S(t.contextElement):[],popper:S(e)};var l,f,p=function(t){var e=C(t);return W.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((l=[].concat(r,u.options.modifiers),f=l.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(f).map((function(t){return f[t]}))));return u.orderedModifiers=p.filter((function(t){return t.enabled})),u.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,i=t.effect;if("function"==typeof i){var o=i({state:u,name:e,instance:c,options:r});a.push(o||function(){})}})),c.update()},forceUpdate:function(){if(!f){var t=u.elements,e=t.reference,n=t.popper;if(q(e,n)){u.rects={reference:v(e,k(n),"fixed"===u.options.strategy),popper:b(n)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach((function(t){return u.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<u.orderedModifiers.length;r++)if(!0!==u.reset){var i=u.orderedModifiers[r],o=i.fn,s=i.options,l=void 0===s?{}:s,a=i.name;"function"==typeof o&&(u=o({state:u,options:l,name:a,instance:c})||u)}else u.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(t){c.forceUpdate(),t(u)}))},function(){return l||(l=new Promise((function(t){Promise.resolve().then((function(){l=void 0,t(o())}))}))),l}),destroy:function(){h(),f=!0}};if(!q(t,e))return c;function h(){a.forEach((function(t){return t()})),a=[]}return c.setOptions(n).then((function(t){!f&&n.onFirstUpdate&&n.onFirstUpdate(t)})),c}}var V={passive:!0};function G(t){return t.split("-")[0]}function F(t){return t.split("-")[1]}function U(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Y(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?G(i):null,s=i?F(i):null,l=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(o){case R:e={x:l,y:n.y-r.height};break;case P:e={x:l,y:n.y+n.height};break;case I:e={x:n.x+n.width,y:u};break;case A:e={x:n.x-r.width,y:u};break;default:e={x:n.x,y:n.y}}var a=o?U(o):null;if(null!=a){var f="y"===a?"height":"width";switch(s){case M:e[a]=e[a]-(n[f]/2-r[f]/2);break;case B:e[a]=e[a]+(n[f]/2-r[f]/2)}}return e}var X={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Q(t){var e,n=t.popper,i=t.popperRect,o=t.placement,s=t.variation,l=t.offsets,u=t.position,f=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,p=t.isFixed,d=l.x,y=void 0===d?0:d,x=l.y,v=void 0===x?0:x,b="function"==typeof h?h({x:y,y:v}):{x:y,y:v};y=b.x,v=b.y;var w=l.hasOwnProperty("x"),E=l.hasOwnProperty("y"),S=A,_=R,O=window;if(c){var L=k(n),j="clientHeight",M="clientWidth";L===r(n)&&"static"!==m(L=g(n)).position&&"absolute"===u&&(j="scrollHeight",M="scrollWidth"),(o===R||(o===A||o===I)&&s===B)&&(_=P,v-=(p&&L===O&&O.visualViewport?O.visualViewport.height:L[j])-i.height,v*=f?1:-1),o!==A&&(o!==R&&o!==P||s!==B)||(S=I,y-=(p&&L===O&&O.visualViewport?O.visualViewport.width:L[M])-i.width,y*=f?1:-1)}var N,D=Object.assign({position:u},c&&X),T=!0===h?function(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:a(n*i)/i||0,y:a(r*i)/i||0}}({x:y,y:v},r(n)):{x:y,y:v};return y=T.x,v=T.y,f?Object.assign({},D,((N={})[_]=E?"0":"",N[S]=w?"0":"",N.transform=(O.devicePixelRatio||1)<=1?"translate("+y+"px, "+v+"px)":"translate3d("+y+"px, "+v+"px, 0)",N)):Object.assign({},D,((e={})[_]=E?v+"px":"",e[S]=w?y+"px":"",e.transform="",e))}var Z={left:"right",right:"left",bottom:"top",top:"bottom"};function J(t){return t.replace(/left|right|bottom|top/g,(function(t){return Z[t]}))}var K={start:"end",end:"start"};function tt(t){return t.replace(/start|end/g,(function(t){return K[t]}))}function et(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&s(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function nt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function rt(t,e,n){return e===N?nt(function(t,e){var n=r(t),i=g(t),o=n.visualViewport,s=i.clientWidth,l=i.clientHeight,u=0,a=0;if(o){s=o.width,l=o.height;var f=c();(f||!f&&"fixed"===e)&&(u=o.offsetLeft,a=o.offsetTop)}return{width:s,height:l,x:u+y(t),y:a}}(t,n)):i(e)?function(t,e){var n=h(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):nt(function(t){var e,n=g(t),r=p(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=l(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=l(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-r.scrollLeft+y(t),a=-r.scrollTop;return"rtl"===m(i||n).direction&&(u+=l(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:u,y:a}}(g(t)))}function it(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function ot(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function st(t,e){void 0===e&&(e={});var n=e,r=n.placement,s=void 0===r?t.placement:r,a=n.strategy,f=void 0===a?t.strategy:a,c=n.boundary,p=void 0===c?"clippingParents":c,y=n.rootBoundary,x=void 0===y?N:y,v=n.elementContext,b=void 0===v?D:v,E=n.altBoundary,_=void 0!==E&&E,O=n.padding,A=void 0===O?0:O,L=it("number"!=typeof A?A:ot(A,j)),M=b===D?"reference":D,B=t.rects.popper,T=t.elements[_?M:b],z=function(t,e,n,r){var s="clippingParents"===e?function(t){var e=S(w(t)),n=["absolute","fixed"].indexOf(m(t).position)>=0&&o(t)?k(t):t;return i(n)?e.filter((function(t){return i(t)&&et(t,n)&&"body"!==d(t)})):[]}(t):[].concat(e),a=[].concat(s,[n]),f=a[0],c=a.reduce((function(e,n){var i=rt(t,n,r);return e.top=l(i.top,e.top),e.right=u(i.right,e.right),e.bottom=u(i.bottom,e.bottom),e.left=l(i.left,e.left),e}),rt(t,f,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}(i(T)?T:T.contextElement||g(t.elements.popper),p,x,f),W=h(t.elements.reference),C=Y({reference:W,element:B,strategy:"absolute",placement:s}),$=nt(Object.assign({},B,C)),q=b===D?$:W,H={top:z.top-q.top+L.top,bottom:q.bottom-z.bottom+L.bottom,left:z.left-q.left+L.left,right:q.right-z.right+L.right},V=t.modifiersData.offset;if(b===D&&V){var G=V[s];Object.keys(H).forEach((function(t){var e=[I,P].indexOf(t)>=0?1:-1,n=[R,P].indexOf(t)>=0?"y":"x";H[t]+=G[n]*e}))}return H}function lt(t,e,n){return l(t,u(e,n))}function ut(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function at(t){return[R,I,P,A].some((function(e){return t[e]>=0}))}var ft=H({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,o=i.scroll,s=void 0===o||o,l=i.resize,u=void 0===l||l,a=r(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&f.forEach((function(t){t.addEventListener("scroll",n.update,V)})),u&&a.addEventListener("resize",n.update,V),function(){s&&f.forEach((function(t){t.removeEventListener("scroll",n.update,V)})),u&&a.removeEventListener("resize",n.update,V)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Y({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,l=n.roundOffsets,u=void 0===l||l,a={placement:G(e.placement),variation:F(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Q(Object.assign({},a,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:u})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Q(Object.assign({},a,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];o(i)&&d(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});o(r)&&d(r)&&(Object.assign(r.style,s),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,s=z.reduce((function(t,n){return t[n]=function(t,e,n){var r=G(t),i=[A,R].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],l=o[1];return s=s||0,l=(l||0)*i,[A,I].indexOf(r)>=0?{x:l,y:s}:{x:s,y:l}}(n,e.rects,o),t}),{}),l=s[e.placement],u=l.x,a=l.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=a),e.modifiersData[r]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,l=void 0===s||s,u=n.fallbackPlacements,a=n.padding,f=n.boundary,c=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,d=void 0===p||p,g=n.allowedAutoPlacements,y=e.options.placement,m=G(y),x=u||(m!==y&&d?function(t){if(G(t)===L)return[];var e=J(t);return[tt(t),e,tt(e)]}(y):[J(y)]),v=[y].concat(x).reduce((function(t,n){return t.concat(G(n)===L?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,l=n.flipVariations,u=n.allowedAutoPlacements,a=void 0===u?z:u,f=F(r),c=f?l?T:T.filter((function(t){return F(t)===f})):j,h=c.filter((function(t){return a.indexOf(t)>=0}));0===h.length&&(h=c);var p=h.reduce((function(e,n){return e[n]=st(t,{placement:n,boundary:i,rootBoundary:o,padding:s})[G(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:f,rootBoundary:c,padding:a,flipVariations:d,allowedAutoPlacements:g}):n)}),[]),b=e.rects.reference,w=e.rects.popper,E=new Map,S=!0,_=v[0],O=0;O<v.length;O++){var k=v[O],B=G(k),N=F(k)===M,D=[R,P].indexOf(B)>=0,W=D?"width":"height",C=st(e,{placement:k,boundary:f,rootBoundary:c,altBoundary:h,padding:a}),$=D?N?I:A:N?P:R;b[W]>w[W]&&($=J($));var q=J($),H=[];if(o&&H.push(C[B]<=0),l&&H.push(C[$]<=0,C[q]<=0),H.every((function(t){return t}))){_=k,S=!1;break}E.set(k,H)}if(S)for(var V=function(t){var e=v.find((function(e){var n=E.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return _=e,"break"},U=d?3:1;U>0&&"break"!==V(U);U--);e.placement!==_&&(e.modifiersData[r]._skip=!0,e.placement=_,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,f=n.boundary,c=n.rootBoundary,h=n.altBoundary,p=n.padding,d=n.tether,g=void 0===d||d,y=n.tetherOffset,m=void 0===y?0:y,x=st(e,{boundary:f,rootBoundary:c,padding:p,altBoundary:h}),v=G(e.placement),w=F(e.placement),E=!w,S=U(v),_="x"===S?"y":"x",O=e.modifiersData.popperOffsets,L=e.rects.reference,j=e.rects.popper,B="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,N="number"==typeof B?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,T={x:0,y:0};if(O){if(o){var z,W="y"===S?R:A,C="y"===S?P:I,$="y"===S?"height":"width",q=O[S],H=q+x[W],V=q-x[C],Y=g?-j[$]/2:0,X=w===M?L[$]:j[$],Q=w===M?-j[$]:-L[$],Z=e.elements.arrow,J=g&&Z?b(Z):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},tt=K[W],et=K[C],nt=lt(0,L[$],J[$]),rt=E?L[$]/2-Y-nt-tt-N.mainAxis:X-nt-tt-N.mainAxis,it=E?-L[$]/2+Y+nt+et+N.mainAxis:Q+nt+et+N.mainAxis,ot=e.elements.arrow&&k(e.elements.arrow),ut=ot?"y"===S?ot.clientTop||0:ot.clientLeft||0:0,at=null!=(z=null==D?void 0:D[S])?z:0,ft=q+it-at,ct=lt(g?u(H,q+rt-at-ut):H,q,g?l(V,ft):V);O[S]=ct,T[S]=ct-q}if(a){var ht,pt="x"===S?R:A,dt="x"===S?P:I,gt=O[_],yt="y"===_?"height":"width",mt=gt+x[pt],xt=gt-x[dt],vt=-1!==[R,A].indexOf(v),bt=null!=(ht=null==D?void 0:D[_])?ht:0,wt=vt?mt:gt-L[yt]-j[yt]-bt+N.altAxis,Et=vt?gt+L[yt]+j[yt]-bt-N.altAxis:xt,St=g&&vt?function(t,e,n){var r=lt(t,e,n);return r>n?n:r}(wt,gt,Et):lt(g?wt:mt,gt,g?Et:xt);O[_]=St,T[_]=St-gt}e.modifiersData[r]=T}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,l=G(n.placement),u=U(l),a=[A,I].indexOf(l)>=0?"height":"width";if(o&&s){var f=function(t,e){return it("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:ot(t,j))}(i.padding,n),c=b(o),h="y"===u?R:A,p="y"===u?P:I,d=n.rects.reference[a]+n.rects.reference[u]-s[u]-n.rects.popper[a],g=s[u]-n.rects.reference[u],y=k(o),m=y?"y"===u?y.clientHeight||0:y.clientWidth||0:0,x=d/2-g/2,v=f[h],w=m-c[a]-f[p],E=m/2-c[a]/2+x,S=lt(v,E,w),_=u;n.modifiersData[r]=((e={})[_]=S,e.centerOffset=S-E,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=e.elements.popper.querySelector(r)))&&et(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=st(e,{elementContext:"reference"}),l=st(e,{altBoundary:!0}),u=ut(s,r),a=ut(l,i,o),f=at(u),c=at(a);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:a,isReferenceHidden:f,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":c})}}]})},85012:t=>{t.exports=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var l=(r-n)/2,u=0,a=l-1;u<l;a=u++){var f=e[n+2*u+0],c=e[n+2*u+1],h=e[n+2*a+0],p=e[n+2*a+1];c>o!=p>o&&i<(h-f)*(o-c)/(p-c)+f&&(s=!s)}return s}},29836:(t,e,n)=>{var r=n(85012),i=n(76e3);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?i(t,e,n,o):r(t,e,n,o)},t.exports.nested=i,t.exports.flat=r},76e3:t=>{t.exports=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var l=r-n,u=0,a=l-1;u<l;a=u++){var f=e[u+n][0],c=e[u+n][1],h=e[a+n][0],p=e[a+n][1];c>o!=p>o&&i<(h-f)*(o-c)/(p-c)+f&&(s=!s)}return s}},31972:function(t,e,n){var r=n(26512);t.exports=function(){"use strict";function t(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var e=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function n(t,e){return t>e?1:t<e?-1:0}function i(t,n,r){for(var i=new e(null,null),o=i,s=i;;){var l=r(t,n.key);if(l<0){if(null===n.left)break;if(r(t,n.left.key)<0){var u=n.left;if(n.left=u.right,u.right=n,null===(n=u).left)break}s.left=n,s=n,n=n.left}else{if(!(l>0))break;if(null===n.right)break;if(r(t,n.right.key)>0&&(u=n.right,n.right=u.left,u.left=n,null===(n=u).right))break;o.right=n,o=n,n=n.right}}return o.right=n.left,s.left=n.right,n.left=i.right,n.right=i.left,n}function o(t,n,r,o){var s=new e(t,n);if(null===r)return s.left=s.right=null,s;var l=o(t,(r=i(t,r,o)).key);return l<0?(s.left=r.left,s.right=r,r.left=null):l>=0&&(s.right=r.right,s.left=r,r.right=null),s}function s(t,e,n){var r=null,o=null;if(e){var s=n((e=i(t,e,n)).key,t);0===s?(r=e.left,o=e.right):s<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}function l(t,e,n,r,i){if(t){r(e+(n?"└── ":"├── ")+i(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&l(t.left,o,!1,r,i),t.right&&l(t.right,o,!0,r,i)}}var u=function(){function r(t){void 0===t&&(t=n),this._root=null,this._size=0,this._comparator=t}return r.prototype.insert=function(t,e){return this._size++,this._root=o(t,e,this._root,this._comparator)},r.prototype.add=function(t,n){var r=new e(t,n);null===this._root&&(r.left=r.right=null,this._size++,this._root=r);var o=this._comparator,s=i(t,this._root,o),l=o(t,s.key);return 0===l?this._root=s:(l<0?(r.left=s.left,r.right=s,s.left=null):l>0&&(r.right=s.right,r.left=s,s.right=null),this._size++,this._root=r),this._root},r.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},r.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=i(t,e,n)).key)?(null===e.left?r=e.right:(r=i(t,e.left,n)).right=e.right,this._size--,r):e},r.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=i(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},r.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},r.prototype.find=function(t){return this._root&&(this._root=i(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},r.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},r.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},r.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},r.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},r.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},r.prototype.min=function(){return this._root?this.minNode(this._root).key:null},r.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},r.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},r.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},r.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},r.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},r.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},r.prototype.clear=function(){return this._root=null,this._size=0,this},r.prototype.toList=function(){return function(t){for(var n=t,r=[],i=!1,o=new e(null,null),s=o;!i;)n?(r.push(n),n=n.left):r.length>0?n=(n=s=s.next=r.pop()).right:i=!0;return s.next=null,o.next}(this._root)},r.prototype.load=function(t,n,r){void 0===n&&(n=[]),void 0===r&&(r=!1);var i=t.length,o=this._comparator;if(r&&c(t,n,0,i-1,o),null===this._root)this._root=a(t,n,0,i),this._size=i;else{var s=function(t,n,r){for(var i=new e(null,null),o=i,s=t,l=n;null!==s&&null!==l;)r(s.key,l.key)<0?(o.next=s,s=s.next):(o.next=l,l=l.next),o=o.next;return null!==s?o.next=s:null!==l&&(o.next=l),i.next}(this.toList(),function(t,n){for(var r=new e(null,null),i=r,o=0;o<t.length;o++)i=i.next=new e(t[o],n[o]);return i.next=null,r.next}(t,n),o);i=this._size+i,this._root=f({head:s},0,i)}return this},r.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(r.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),r.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return l(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},r.prototype.update=function(t,e,n){var r=this._comparator,l=s(t,this._root,r),u=l.left,a=l.right;r(t,e)<0?a=o(e,n,a,r):u=o(e,n,u,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=i(t.key,e,n)).left=t),e)}(u,a,r)},r.prototype.split=function(t){return s(t,this._root,this._comparator)},r.prototype[Symbol.iterator]=function(){var e,n,r;return t(this,(function(t){switch(t.label){case 0:e=this._root,n=[],r=!1,t.label=1;case 1:return r?[3,6]:null===e?[3,2]:(n.push(e),e=e.left,[3,5]);case 2:return 0===n.length?[3,4]:[4,e=n.pop()];case 3:return t.sent(),e=e.right,[3,5];case 4:r=!0,t.label=5;case 5:return[3,1];case 6:return[2]}}))},r}();function a(t,n,r,i){var o=i-r;if(o>0){var s=r+Math.floor(o/2),l=t[s],u=n[s],f=new e(l,u);return f.left=a(t,n,r,s),f.right=a(t,n,s+1,i),f}return null}function f(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=f(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=f(t,i+1,n),s}return null}function c(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,l=r+1;;){do{s++}while(i(t[s],o)<0);do{l--}while(i(t[l],o)>0);if(s>=l)break;var u=t[s];t[s]=t[l],t[l]=u,u=e[s],e[s]=e[l],e[l]=u}c(t,e,n,l,i),c(t,e,l+1,r,i)}}const h=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,p=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;const n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}};let d=Number.EPSILON;void 0===d&&(d=Math.pow(2,-52));const g=d*d,y=(t,e)=>{if(-d<t&&t<d&&-d<e&&e<d)return 0;const n=t-e;return n*n<g*t*e?0:t<e?-1:1};class m{constructor(){this.tree=new u,this.round(0)}round(t){const e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===y(e.key,n.key))return this.tree.remove(t),n.key;const r=this.tree.next(e);return null!==r&&0===y(e.key,r.key)?(this.tree.remove(t),r.key):t}}const x=new class{constructor(){this.reset()}reset(){this.xRounder=new m,this.yRounder=new m}round(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}},v=11102230246251565e-32,b=134217729,w=(3+8*v)*v;function E(t,e,n,r,i){let o,s,l,u,a=e[0],f=r[0],c=0,h=0;f>a==f>-a?(o=a,a=e[++c]):(o=f,f=r[++h]);let p=0;if(c<t&&h<n)for(f>a==f>-a?(s=a+o,l=o-(s-a),a=e[++c]):(s=f+o,l=o-(s-f),f=r[++h]),o=s,0!==l&&(i[p++]=l);c<t&&h<n;)f>a==f>-a?(s=o+a,u=s-o,l=o-(s-u)+(a-u),a=e[++c]):(s=o+f,u=s-o,l=o-(s-u)+(f-u),f=r[++h]),o=s,0!==l&&(i[p++]=l);for(;c<t;)s=o+a,u=s-o,l=o-(s-u)+(a-u),a=e[++c],o=s,0!==l&&(i[p++]=l);for(;h<n;)s=o+f,u=s-o,l=o-(s-u)+(f-u),f=r[++h],o=s,0!==l&&(i[p++]=l);return 0===o&&0!==p||(i[p++]=o),p}function S(t){return new Float64Array(t)}const _=22204460492503146e-32,O=11093356479670487e-47,k=S(4),R=S(8),P=S(12),I=S(16),A=S(4);function L(t,e,n,r,i,o){const s=(e-o)*(n-i),l=(t-i)*(r-o),u=s-l,a=Math.abs(s+l);return Math.abs(u)>=33306690738754716e-32*a?u:-function(t,e,n,r,i,o,s){let l,u,a,f,c,h,p,d,g,y,m,x,v,S,L,j,M,B;const N=t-i,D=n-i,T=e-o,z=r-o;S=N*z,h=b*N,p=h-(h-N),d=N-p,h=b*z,g=h-(h-z),y=z-g,L=d*y-(S-p*g-d*g-p*y),j=T*D,h=b*T,p=h-(h-T),d=T-p,h=b*D,g=h-(h-D),y=D-g,M=d*y-(j-p*g-d*g-p*y),m=L-M,c=L-m,k[0]=L-(m+c)+(c-M),x=S+m,c=x-S,v=S-(x-c)+(m-c),m=v-j,c=v-m,k[1]=v-(m+c)+(c-j),B=x+m,c=B-x,k[2]=x-(B-c)+(m-c),k[3]=B;let W=function(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}(4,k),C=_*s;if(W>=C||-W>=C)return W;if(c=t-N,l=t-(N+c)+(c-i),c=n-D,a=n-(D+c)+(c-i),c=e-T,u=e-(T+c)+(c-o),c=r-z,f=r-(z+c)+(c-o),0===l&&0===u&&0===a&&0===f)return W;if(C=O*s+w*Math.abs(W),W+=N*f+z*l-(T*a+D*u),W>=C||-W>=C)return W;S=l*z,h=b*l,p=h-(h-l),d=l-p,h=b*z,g=h-(h-z),y=z-g,L=d*y-(S-p*g-d*g-p*y),j=u*D,h=b*u,p=h-(h-u),d=u-p,h=b*D,g=h-(h-D),y=D-g,M=d*y-(j-p*g-d*g-p*y),m=L-M,c=L-m,A[0]=L-(m+c)+(c-M),x=S+m,c=x-S,v=S-(x-c)+(m-c),m=v-j,c=v-m,A[1]=v-(m+c)+(c-j),B=x+m,c=B-x,A[2]=x-(B-c)+(m-c),A[3]=B;const $=E(4,k,4,A,R);S=N*f,h=b*N,p=h-(h-N),d=N-p,h=b*f,g=h-(h-f),y=f-g,L=d*y-(S-p*g-d*g-p*y),j=T*a,h=b*T,p=h-(h-T),d=T-p,h=b*a,g=h-(h-a),y=a-g,M=d*y-(j-p*g-d*g-p*y),m=L-M,c=L-m,A[0]=L-(m+c)+(c-M),x=S+m,c=x-S,v=S-(x-c)+(m-c),m=v-j,c=v-m,A[1]=v-(m+c)+(c-j),B=x+m,c=B-x,A[2]=x-(B-c)+(m-c),A[3]=B;const q=E($,R,4,A,P);S=l*f,h=b*l,p=h-(h-l),d=l-p,h=b*f,g=h-(h-f),y=f-g,L=d*y-(S-p*g-d*g-p*y),j=u*a,h=b*u,p=h-(h-u),d=u-p,h=b*a,g=h-(h-a),y=a-g,M=d*y-(j-p*g-d*g-p*y),m=L-M,c=L-m,A[0]=L-(m+c)+(c-M),x=S+m,c=x-S,v=S-(x-c)+(m-c),m=v-j,c=v-m,A[1]=v-(m+c)+(c-j),B=x+m,c=B-x,A[2]=x-(B-c)+(m-c),A[3]=B;const H=E(q,P,4,A,I);return I[H-1]}(t,e,n,r,i,o,a)}const j=(t,e)=>t.x*e.y-t.y*e.x,M=(t,e)=>t.x*e.x+t.y*e.y,B=(t,e,n)=>{const r=L(t.x,t.y,e.x,e.y,n.x,n.y);return r>0?-1:r<0?1:0},N=t=>Math.sqrt(M(t,t)),D=(t,e,n)=>{const r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return j(i,r)/N(i)/N(r)},T=(t,e,n)=>{const r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return M(i,r)/N(i)/N(r)},z=(t,e,n)=>0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n},W=(t,e,n)=>0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)};class C{static compare(t,e){const n=C.comparePoints(t.point,e.point);return 0!==n?n:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:q.compare(t.segment,e.segment))}static comparePoints(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}constructor(t,e){void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const e=t.point.events;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.point.events.push(n),n.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let e=0;e<t;e++){const n=this.point.events[e];if(void 0===n.segment.consumedBy)for(let r=e+1;r<t;r++){const t=this.point.events[r];void 0===t.consumedBy&&n.otherSE.point.events===t.otherSE.point.events&&n.segment.consume(t.segment)}}}getAvailableLinkedEvents(){const t=[];for(let e=0,n=this.point.events.length;e<n;e++){const n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}getLeftmostComparator(t){const e=new Map,n=n=>{const r=n.otherSE;e.set(n,{sine:D(this.point,t.point,r.point),cosine:T(this.point,t.point,r.point)})};return(t,r)=>{e.has(t)||n(t),e.has(r)||n(r);const{sine:i,cosine:o}=e.get(t),{sine:s,cosine:l}=e.get(r);return i>=0&&s>=0?o<l?1:o>l?-1:0:i<0&&s<0?o<l?-1:o>l?1:0:s<i?-1:s>i?1:0}}}let $=0;class q{static compare(t,e){const n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;const s=t.leftSE.point.y,l=e.leftSE.point.y,u=t.rightSE.point.y,a=e.rightSE.point.y;if(n<r){if(l<s&&l<u)return 1;if(l>s&&l>u)return-1;const n=t.comparePoint(e.leftSE.point);if(n<0)return 1;if(n>0)return-1;const r=e.comparePoint(t.rightSE.point);return 0!==r?r:-1}if(n>r){if(s<l&&s<a)return-1;if(s>l&&s>a)return 1;const n=e.comparePoint(t.leftSE.point);if(0!==n)return n;const r=t.comparePoint(e.rightSE.point);return r<0?1:r>0?-1:1}if(s<l)return-1;if(s>l)return 1;if(i<o){const n=e.comparePoint(t.rightSE.point);if(0!==n)return n}if(i>o){const n=t.comparePoint(e.rightSE.point);if(n<0)return 1;if(n>0)return-1}if(i!==o){const t=u-s,e=i-n,f=a-l,c=o-r;if(t>e&&f<c)return 1;if(t<e&&f>c)return-1}return i>o?1:i<o||u<a?-1:u>a?1:t.id<e.id?-1:t.id>e.id?1:0}constructor(t,e,n,r){this.id=++$,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=n,this.windings=r}static fromRing(t,e,n){let r,i,o;const s=C.comparePoints(t,e);if(s<0)r=t,i=e,o=1;else{if(!(s>0))throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);r=e,i=t,o=-1}const l=new C(r,!0),u=new C(i,!1);return new q(l,u,[n],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;const i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;const s=(t.x-e.x)/r.x,l=e.y+s*r.y;return t.y===l?0:t.y<l?-1:1}getIntersection(t){const e=this.bbox(),n=t.bbox(),r=p(e,n);if(null===r)return null;const i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,l=t.rightSE.point,u=h(e,s)&&0===this.comparePoint(s),a=h(n,i)&&0===t.comparePoint(i),f=h(e,l)&&0===this.comparePoint(l),c=h(n,o)&&0===t.comparePoint(o);if(a&&u)return c&&!f?o:!c&&f?l:null;if(a)return f&&i.x===l.x&&i.y===l.y?null:i;if(u)return c&&o.x===s.x&&o.y===s.y?null:s;if(c&&f)return null;if(c)return o;if(f)return l;const d=((t,e,n,r)=>{if(0===e.x)return W(n,r,t.x);if(0===r.x)return W(t,e,n.x);if(0===e.y)return z(n,r,t.y);if(0===r.y)return z(t,e,n.y);const i=j(e,r);if(0==i)return null;const o={x:n.x-t.x,y:n.y-t.y},s=j(o,e)/i,l=j(o,r)/i;return{x:(t.x+l*e.x+(n.x+s*r.x))/2,y:(t.y+l*e.y+(n.y+s*r.y))/2}})(i,this.vector(),s,t.vector());return null===d?null:h(r,d)?x.round(d.x,d.y):null}split(t){const e=[],n=void 0!==t.events,r=new C(t,!0),i=new C(t,!1),o=this.rightSE;this.replaceRightSE(i),e.push(i),e.push(r);const s=new q(r,o,this.rings.slice(),this.windings.slice());return C.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),C.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(r.checkForConsuming(),i.checkForConsuming()),e}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,e=this.windings.length;t<e;t++)this.windings[t]*=-1}consume(t){let e=this,n=t;for(;e.consumedBy;)e=e.consumedBy;for(;n.consumedBy;)n=n.consumedBy;const r=q.compare(e,n);if(0!==r){if(r>0){const t=e;e=n,n=t}if(e.prev===n){const t=e;e=n,n=t}for(let t=0,r=n.rings.length;t<r;t++){const r=n.rings[t],i=n.windings[t],o=e.rings.indexOf(r);-1===o?(e.rings.push(r),e.windings.push(i)):e.windings[o]+=i}n.rings=null,n.windings=null,n.consumedBy=e,n.leftSE.consumedBy=e.leftSE,n.rightSE.consumedBy=e.rightSE}}prevInResult(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}afterState(){if(void 0!==this._afterState)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys;for(let t=0,r=this.rings.length;t<r;t++){const r=this.rings[t],i=this.windings[t],o=e.indexOf(r);-1===o?(e.push(r),n.push(i)):n[o]+=i}const i=[],o=[];for(let t=0,r=e.length;t<r;t++){if(0===n[t])continue;const r=e[t],s=r.poly;if(-1===o.indexOf(s))if(r.isExterior)i.push(s);else{-1===o.indexOf(s)&&o.push(s);const t=i.indexOf(r.poly);-1!==t&&i.splice(t,1)}}for(let t=0,e=i.length;t<e;t++){const e=i[t].multiPoly;-1===r.indexOf(e)&&r.push(e)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;const t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(J.type){case"union":{const n=0===t.length,r=0===e.length;this._isInResult=n!==r;break}case"intersection":{let n,r;t.length<e.length?(n=t.length,r=e.length):(n=e.length,r=t.length),this._isInResult=r===J.numMultiPolys&&n<r;break}case"xor":{const n=Math.abs(t.length-e.length);this._isInResult=n%2==1;break}case"difference":{const n=t=>1===t.length&&t[0].isSubject;this._isInResult=n(t)!==n(e);break}default:throw new Error(`Unrecognized operation type found ${J.type}`)}return this._isInResult}}class H{constructor(t,e,n){if(!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=x.round(t[0][0],t[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let e=1,n=t.length;e<n;e++){if("number"!=typeof t[e][0]||"number"!=typeof t[e][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let n=x.round(t[e][0],t[e][1]);n.x===i.x&&n.y===i.y||(this.segments.push(q.fromRing(i,n,this)),n.x<this.bbox.ll.x&&(this.bbox.ll.x=n.x),n.y<this.bbox.ll.y&&(this.bbox.ll.y=n.y),n.x>this.bbox.ur.x&&(this.bbox.ur.x=n.x),n.y>this.bbox.ur.y&&(this.bbox.ur.y=n.y),i=n)}r.x===i.x&&r.y===i.y||this.segments.push(q.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}class V{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new H(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let e=1,n=t.length;e<n;e++){const n=new H(t[e],this,!1);n.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=n.bbox.ll.x),n.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=n.bbox.ll.y),n.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=n.bbox.ur.x),n.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=n.bbox.ur.y),this.interiorRings.push(n)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const n=this.interiorRings[e].getSweepEvents();for(let e=0,r=n.length;e<r;e++)t.push(n[e])}return t}}class G{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof t[0][0][0]&&(t=[t])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let e=0,n=t.length;e<n;e++){const n=new V(t[e],this);n.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=n.bbox.ll.x),n.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=n.bbox.ll.y),n.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=n.bbox.ur.x),n.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=n.bbox.ur.y),this.polys.push(n)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const n=this.polys[e].getSweepEvents();for(let e=0,r=n.length;e<r;e++)t.push(n[e])}return t}}class F{static factory(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!r.isInResult()||r.ringOut)continue;let i=null,o=r.leftSE,s=r.rightSE;const l=[o],u=o.point,a=[];for(;i=o,o=s,l.push(o),o.point!==u;)for(;;){const t=o.getAvailableLinkedEvents();if(0===t.length){const t=l[0].point,e=l[l.length-1].point;throw new Error(`Unable to complete output ring starting at [${t.x}, ${t.y}]. Last matching segment found ends at [${e.x}, ${e.y}].`)}if(1===t.length){s=t[0].otherSE;break}let n=null;for(let t=0,e=a.length;t<e;t++)if(a[t].point===o.point){n=t;break}if(null!==n){const t=a.splice(n)[0],r=l.splice(t.index);r.unshift(r[0].otherSE),e.push(new F(r.reverse()));continue}a.push({index:l.length,point:o.point});const r=o.getLeftmostComparator(i);s=t.sort(r)[0].otherSE;break}e.push(new F(l))}return e}constructor(t){this.events=t;for(let e=0,n=t.length;e<n;e++)t[e].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const e=[t];for(let n=1,r=this.events.length-1;n<r;n++){const r=this.events[n].point,i=this.events[n+1].point;0!==B(r,t,i)&&(e.push(r),t=r)}if(1===e.length)return null;const n=e[0],r=e[1];0===B(n,t,r)&&e.shift(),e.push(e[0]);const i=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:e.length-1,s=this.isExteriorRing()?e.length:-1,l=[];for(let t=o;t!=s;t+=i)l.push([e[t].x,e[t].y]);return l}isExteriorRing(){if(void 0===this._isExteriorRing){const t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}enclosingRing(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let e=1,n=this.events.length;e<n;e++){const n=this.events[e];C.compare(t,n)>0&&(t=n)}let e=t.segment.prevInResult(),n=e?e.prevInResult():null;for(;;){if(!e)return null;if(!n)return e.ringOut;if(n.ringOut!==e.ringOut)return n.ringOut.enclosingRing()!==e.ringOut?e.ringOut:e.ringOut.enclosingRing();e=n.prevInResult(),n=e?e.prevInResult():null}}}class U{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(let e=0,n=this.interiorRings.length;e<n;e++){const n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}class Y{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}_composePolys(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!r.poly)if(r.isExteriorRing())e.push(new U(r));else{const t=r.enclosingRing();t.poly||e.push(new U(t)),t.poly.addInterior(r)}}return e}}class X{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q.compare;this.queue=t,this.tree=new u(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;const r=t.isLeft?this.tree.add(e):this.tree.find(e);if(!r)throw new Error(`Unable to find segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] in SweepLine tree.`);let i,o,s=r,l=r;for(;void 0===i;)s=this.tree.prev(s),null===s?i=null:void 0===s.key.consumedBy&&(i=s.key);for(;void 0===o;)l=this.tree.next(l),null===l?o=null:void 0===l.key.consumedBy&&(o=l.key);if(t.isLeft){let r=null;if(i){const t=i.getIntersection(e);if(null!==t&&(e.isAnEndpoint(t)||(r=t),!i.isAnEndpoint(t))){const e=this._splitSafely(i,t);for(let t=0,r=e.length;t<r;t++)n.push(e[t])}}let s=null;if(o){const t=o.getIntersection(e);if(null!==t&&(e.isAnEndpoint(t)||(s=t),!o.isAnEndpoint(t))){const e=this._splitSafely(o,t);for(let t=0,r=e.length;t<r;t++)n.push(e[t])}}if(null!==r||null!==s){let t=null;t=null===r?s:null===s||C.comparePoints(r,s)<=0?r:s,this.queue.remove(e.rightSE),n.push(e.rightSE);const i=e.split(t);for(let t=0,e=i.length;t<e;t++)n.push(i[t])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=i)}else{if(i&&o){const t=i.getIntersection(o);if(null!==t){if(!i.isAnEndpoint(t)){const e=this._splitSafely(i,t);for(let t=0,r=e.length;t<r;t++)n.push(e[t])}if(!o.isAnEndpoint(t)){const e=this._splitSafely(o,t);for(let t=0,r=e.length;t<r;t++)n.push(e[t])}}}this.tree.remove(e)}return n}_splitSafely(t,e){this.tree.remove(t);const n=t.rightSE;this.queue.remove(n);const r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.add(t),r}}const Q=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Z=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;const J=new class{run(t,e,n){J.type=t,x.reset();const r=[new G(e,!0)];for(let t=0,e=n.length;t<e;t++)r.push(new G(n[t],!1));if(J.numMultiPolys=r.length,"difference"===J.type){const t=r[0];let e=1;for(;e<r.length;)null!==p(r[e].bbox,t.bbox)?e++:r.splice(e,1)}if("intersection"===J.type)for(let t=0,e=r.length;t<e;t++){const e=r[t];for(let n=t+1,i=r.length;n<i;n++)if(null===p(e.bbox,r[n].bbox))return[]}const i=new u(C.compare);for(let t=0,e=r.length;t<e;t++){const e=r[t].getSweepEvents();for(let t=0,n=e.length;t<n;t++)if(i.insert(e[t]),i.size>Q)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const o=new X(i);let s=i.size,l=i.pop();for(;l;){const t=l.key;if(i.size===s){const e=t.segment;throw new Error(`Unable to pop() ${t.isLeft?"left":"right"} SweepEvent [${t.point.x}, ${t.point.y}] from segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] from queue.`)}if(i.size>Q)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(o.segments.length>Z)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const e=o.process(t);for(let t=0,n=e.length;t<n;t++){const n=e[t];void 0===n.consumedBy&&i.insert(n)}s=i.size,l=i.pop()}x.reset();const a=F.factory(o.segments);return new Y(a).getGeom()}};return{union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return J.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return J.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return J.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return J.run("difference",t,n)}}}()}}]);