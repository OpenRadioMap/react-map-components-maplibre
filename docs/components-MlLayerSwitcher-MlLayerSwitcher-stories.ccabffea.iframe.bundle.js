"use strict";(self.webpackChunk_mapcomponents_react_maplibre=self.webpackChunk_mapcomponents_react_maplibre||[]).push([[3472],{8024:(e,r,n)=>{n.r(r),n.d(r,{ExampleConfig:()=>$,__namedExportsOrder:()=>Z,default:()=>U});var t=n(11504),a=n(62344),i=n(14596),o=n.n(i),l=n(86520),s=n.n(l),c=n(36176),u=n.n(c),y=n(65120),d=n.n(y),p=n(66808),m=n.n(p),f=n(61936),b=n.n(f),g=n(21104),h={};h.styleTagTransform=b(),h.setAttributes=d(),h.insert=u().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=m(),o()(g.c,h),g.c&&g.c.locals&&g.c.locals;var v=n(4992),x=n(72584),S=n(68857),j=n(49792),w=n(11664),L=n(45544),I=n(58130),C=n(55400),O=n(17624);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function _(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function E(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_(Object(n),!0).forEach((function(r){var t,a,i,o;t=e,a=r,i=n[r],o=function(e,r){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=A(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==A(o)?o:String(o))in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function B(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var M=function(e){var r,n,a=(r=(0,t.useState)("loading"),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;s=!1}else for(;!(s=(t=i.call(n)).done)&&(l.push(t.value),l.length!==r);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(r,n)||function(e,r){if(e){if("string"==typeof e)return B(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,r):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],o=a[1];(0,t.useEffect)((function(){e.src?fetch(e.src).then((function(e){var r=e.ok;o(r?"ready":"error")})).catch((function(e){console.error(e),o("error")})):o("error")}),[e.src]);var l={border:2,borderRadius:"8px",display:"flex"},s=function(){return(0,O.jsx)(L.c,{className:e.className,sx:E(E({},l),e.sx),children:(0,O.jsx)(I.c,{})})},c=function(){return(0,O.jsx)(L.c,{component:"img",className:e.className,sx:E(E({},l),e.sx),src:e.src,alt:e.alt||""})},u=function(){return(0,O.jsx)(L.c,{className:e.className,sx:E(E({},l),e.sx),children:(0,O.jsx)(C.c,{sx:{display:"block",margin:"auto"}})})};return(0,O.jsx)(O.Fragment,{children:function(e){switch(e){case"ready":return(0,O.jsx)(c,{});case"error":return(0,O.jsx)(u,{});default:return(0,O.jsx)(s,{})}}(i)})};const P=M;try{M.displayName="ImageLoader",M.__docgenInfo={description:"",displayName:"ImageLoader",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},alt:{defaultValue:null,description:"",name:"alt",required:!1,type:{name:"string | undefined"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui_components/ImageLoader.tsx#ImageLoader"]={docgenInfo:M.__docgenInfo,name:"ImageLoader",path:"src/ui_components/ImageLoader.tsx#ImageLoader"})}catch(e){}var V,T=n(40096),k=function(e){var r,n,t,a=(0,T.c)({mapId:e.mapId,watch:{viewport:!1,layers:!0,sources:!1},filter:{matchLayerIds:e.layerId}}).layers,i="40px",o=(0,w.gV)(V||(n=["\n\t\t& img:hover {\n\t\t}\n\t"],t||(t=n.slice(0)),V=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}})))),l={border:"2px solid ".concat(null!=a&&null!==(r=a[0])&&void 0!==r&&r.visible?"#64c864":"#fd720f"),borderRadius:"8px",height:"40px",width:"40px"};return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(L.c,{className:o,sx:{width:i,height:"53px",justifyContent:"center",py:.25,px:"1rem",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"stretch"},onClick:function(){var r;null==e||null===(r=e.handleLayerBoxClick)||void 0===r||r.call(e,e.layerId)},children:[(null==e?void 0:e.thumbnail)&&(0,O.jsx)(P,{sx:l,src:e.thumbnail}),(0,O.jsx)("div",{className:"mllayerswitcher-layer-text",style:{textAlign:"center",color:"rgb(112, 117, 122)",fontFamily:"Roboto, Arial",width:i,fontSize:"0.60rem"},children:e.label})]},e.layerId)})};const N=k;try{k.displayName="LayerBox",k.__docgenInfo={description:"",displayName:"LayerBox",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!0,type:{name:"string"}},thumbnail:{defaultValue:null,description:"",name:"thumbnail",required:!1,type:{name:"string | undefined"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},handleLayerBoxClick:{defaultValue:null,description:"",name:"handleLayerBoxClick",required:!1,type:{name:"((layerId: string) => void) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlLayerSwitcher/components/LayerBox.tsx#LayerBox"]={docgenInfo:k.__docgenInfo,name:"LayerBox",path:"src/components/MlLayerSwitcher/components/LayerBox.tsx#LayerBox"})}catch(e){}var R=n(5420),q=function(e){var r,n,a=(0,t.useContext)(j.c),i=!(null===(r=e.baseSourceConfig)||void 0===r||null===(r=r.layers)||void 0===r||!r.length),o=!(null===(n=e.detailLayerConfig)||void 0===n||null===(n=n.layers)||void 0===n||!n.length),l=(0,T.c)({mapId:e.mapId,watch:{viewport:!1,layers:!0,sources:!1},filter:{}}).layers,s=(0,v.Gy)().t;(0,t.useEffect)((function(){if(a.map){var r=function(e,r){var n=c(e.layerId),t=0===r?"visible":"none";n.forEach((function(e){e&&y(e,t)}))};e.baseSourceConfig.layers.forEach((function(e,n){return r(e,n)})),e.detailLayerConfig.layers.forEach((function(e,n){return r(e,n)}))}return function(){}}),[a.map]),(0,t.useEffect)((function(){var r;if(null!==(r=a.map)&&void 0!==r&&null!==(r=r.style)&&void 0!==r&&r._layers){var n=[],t=[];e.baseSourceConfig.layers.forEach((function(e){c(e.layerId).forEach((function(e){var r;if(null!=a&&a.map){var t=e&&(null===(r=a.map)||void 0===r?void 0:r.getLayoutProperty(e,"visibility"));-1!==a.map.baseLayers.indexOf(e)&&(e="styleBase"),e&&-1===n.indexOf(e)&&"visible"===t&&n.push(e)}}))})),e.detailLayerConfig.layers.forEach((function(e){var r,n=e.layerId,i=null===(r=a.map)||void 0===r?void 0:r.getLayoutProperty(n,"visibility");-1===t.indexOf(n)&&"visible"===i&&t.push(n)}))}}),[l]);var c=function(e){return"styleBase"===e&&null!=a&&a.map?null==a?void 0:a.map.baseLayers:[e]},u=function(r){var n,t=c(r),i=null!=a&&a.map&&null!=t&&t[0]&&"visible"===(null==a||null===(n=a.map.getLayer(t[0]))||void 0===n?void 0:n.getLayoutProperty("visibility"))?"none":"visible";e.baseSourceConfig.layers.forEach((function(e,n){var t=c(e.layerId),a="none"===i&&0===n?"visible":e.layerId===r?i:"none";t.forEach((function(e){e&&["visible","none"].includes(a)&&y(e,a)}))}))},y=function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";null===(r=a.map)||void 0===r||r.setLayoutProperty(e,"visibility",n)};return(0,O.jsxs)(O.Fragment,{children:[i&&(0,O.jsxs)(x.c,{sx:{minHeight:"150px"},children:[(0,O.jsx)(S.c,{variant:"h6",children:s(e.baseSourceConfig.label||"Map type")}),(0,O.jsx)(R.c,{}),(0,O.jsx)(x.c,{sx:{display:"flex",paddingTop:"1rem"},children:e.baseSourceConfig.layers.map((function(r){var n=r.src,t=r.label,a=r.layerId;return(0,O.jsx)(N,{mapId:e.mapId,label:s(t),layerId:a,thumbnail:n,handleLayerBoxClick:function(){u(a)}},a)}))})]}),o&&(0,O.jsxs)(x.c,{sx:{minHeight:"150px"},children:[(0,O.jsx)(S.c,{variant:"h6",children:s("Map details")}),(0,O.jsx)(R.c,{}),(0,O.jsx)(x.c,{sx:{display:"flex",paddingTop:"1rem"},children:e.detailLayerConfig.layers.map((function(r){var n=r.src,t=r.label,i=r.layerId;return(0,O.jsx)(N,{mapId:e.mapId,label:s(t),layerId:i,thumbnail:n,handleLayerBoxClick:function(){!function(r){var n,t=e.detailLayerConfig.layers.find((function(e){return e.layerId===r}));null!=t&&t.linkedTo&&u(t.linkedTo);var i=null!=a&&a.map&&"visible"===(null==a||null===(n=a.map.getLayer(r))||void 0===n?void 0:n.getLayoutProperty("visibility"))?"none":"visible";y(r,i)}(i)}},i)}))})]})]})};const D=q;try{q.displayName="MlLayerSwitcher",q.__docgenInfo={description:"",displayName:"MlLayerSwitcher",props:{baseSourceConfig:{defaultValue:null,description:"",name:"baseSourceConfig",required:!0,type:{name:"BaseSourceConfig"}},detailLayerConfig:{defaultValue:null,description:"",name:"detailLayerConfig",required:!0,type:{name:"DetailLayerConfig"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlLayerSwitcher/MlLayerSwitcher.tsx#MlLayerSwitcher"]={docgenInfo:q.__docgenInfo,name:"MlLayerSwitcher",path:"src/components/MlLayerSwitcher/MlLayerSwitcher.tsx#MlLayerSwitcher"})}catch(e){}var F=n(49376),z=n(95316);const H=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.1074676513671875,50.74340774029213],[7.0992279052734375,50.756441089372665],[7.079315185546874,50.764693667025014],[7.045669555664062,50.77945780529241],[7.030563354492187,50.79161300845443],[7.0291900634765625,50.80940599750376],[7.0236968994140625,50.820685846099174],[7.0085906982421875,50.825891011253546],[6.9879913330078125,50.826758482363275],[6.97906494140625,50.835432306955276],[6.9824981689453125,50.84583876895451],[6.9962310791015625,50.85147463352982],[7.012023925781249,50.85710981721644],[7.021636962890625,50.86664473085768],[7.0367431640625,50.872278081520406],[7.0477294921875,50.877044231111014],[7.052536010742187,50.88397594225127]]}}'),J=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.0635223388671875,50.71385204707258],[7.06146240234375,50.709721458354075],[7.063865661621094,50.70298129536074],[7.064552307128906,50.69906720767511],[7.059059143066406,50.69428287906098],[7.05596923828125,50.68797551838366],[7.0580291748046875,50.680797145321655],[7.062835693359375,50.67514068397085],[7.060432434082031,50.6686131506577],[7.051849365234375,50.659255436656736],[7.044639587402344,50.6512019574539],[7.0484161376953125,50.64271166020676],[7.0566558837890625,50.63748609931014]]}}');var G=n(42084),K=n(93240),W=n(59476);function Y(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}const U={title:"MapComponents/MlLayerSwitcher",component:D,argTypes:{url:{},layer:{}},decorators:z.c};var $=function(e){var r,n,i=(r=(0,t.useState)(!0),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;s=!1}else for(;!(s=(t=i.call(n)).done)&&(l.push(t.value),l.length!==r);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(r,n)||function(e,r){if(e){if("string"==typeof e)return Y(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,r):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],l=i[1];return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(K.c,{buttons:(0,O.jsx)(W.c,{variant:o?"contained":"outlined",onClick:function(){return l(!o)},sx:{marginRight:{xs:"0px",sm:"10px"}},children:"Layer Switcher"})}),(0,O.jsxs)(G.c,{open:o,setOpen:l,name:"Layer Switcher",children:[(0,O.jsx)(a.c,{url:e.url,urlParameters:{layers:e.layer},sourceOptions:e.sourceOptions,layerId:"historic",visible:e.layerVisible}),(0,O.jsx)(a.c,{url:e.url2,urlParameters:{layers:e.layer2},sourceOptions:e.sourceOptions,layerId:e.layer2,visible:e.layer2Visible}),(0,O.jsx)(F.c,{type:"line",options:{layout:{visibility:e.geojsonLayerVisible?"visible":"none"}},geojson:H,layerId:"geojson1"}),(0,O.jsx)(F.c,{type:"line",options:{layout:{visibility:e.geojson2LayerVisible?"visible":"none"}},geojson:J,layerId:"geojson2"}),(0,O.jsx)(D,{baseSourceConfig:{active:e.baseSourcesActive,layers:e.layers},detailLayerConfig:e.detailLayerConfig})]})]})}.bind({});$.parameters={},$.args={url:"https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme",layer:"nw_uraufnahme_rw",layerVisible:!0,url2:"https://www.wms.nrw.de/geobasis/wms_nw_dop",layer2:"WMS_NW_DOP",layer2Visible:!1,geojsonLayerVisible:!0,geojson2LayerVisible:!0,sourceOptions:{minzoom:13,maxzoom:20},baseSourcesActive:!0,layers:[{label:"Historic",layerId:"historic",src:"assets/historic.png"},{label:"Straßenkarte",layerId:"styleBase",src:"assets/osm.png"},{label:"DOP",layerId:"WMS_NW_DOP",src:"assets/dop.png"}],detailLayerConfig:{layers:[{label:"GeoJson 1",layerId:"geojson1",src:"assets/historic.png",active:!0}]}},$.parameters={...$.parameters,docs:{...$.parameters?.docs,source:{originalSource:"(args: any) => {\n  const [openSidebar, setOpenSidebar] = useState(true);\n  return <>\n            <TopToolbar buttons={<Button variant={openSidebar ? 'contained' : 'outlined'} onClick={() => setOpenSidebar(!openSidebar)} sx={{\n      marginRight: {\n        xs: '0px',\n        sm: '10px'\n      }\n    }}>\n                        Layer Switcher\n                    </Button>} />\n            <Sidebar open={openSidebar} setOpen={setOpenSidebar} name={'Layer Switcher'}>\n                <MlWmsLayer url={args.url} urlParameters={{\n        layers: args.layer\n      }} sourceOptions={args.sourceOptions} layerId=\"historic\" visible={args.layerVisible} />\n                <MlWmsLayer url={args.url2} urlParameters={{\n        layers: args.layer2\n      }} sourceOptions={args.sourceOptions} layerId={args.layer2} visible={args.layer2Visible} />\n                <MlGeoJsonLayer type=\"line\" options={{\n        layout: {\n          visibility: args.geojsonLayerVisible ? 'visible' : 'none'\n        }\n      }} geojson={(sample_geojson_1 as GeoJSON.Feature)} layerId=\"geojson1\" />\n                <MlGeoJsonLayer type=\"line\" options={{\n        layout: {\n          visibility: args.geojson2LayerVisible ? 'visible' : 'none'\n        }\n      }} geojson={(sample_geojson_2 as GeoJSON.Feature)} layerId=\"geojson2\" />\n                <MlLayerSwitcher baseSourceConfig={{\n        active: args.baseSourcesActive,\n        layers: args.layers\n      }} detailLayerConfig={args.detailLayerConfig} />\n            </Sidebar>\n        </>;\n}",...$.parameters?.docs?.source}}};const Z=["ExampleConfig"]},95316:(e,r,n)=>{n.d(r,{c:()=>u});var t=n(11504),a=n(77288),i=n(24732),o=(n(47634),n(21200)),l=n(54656),s=n(76508),c=n(17624);const u=[function(e,r){var n,u=(0,t.useMemo)((function(){var e;return(0,s.c)(null==r||null===(e=r.globals)||void 0===e?void 0:e.theme)}),[null==r||null===(n=r.globals)||void 0===n?void 0:n.theme]);return(0,c.jsx)("div",{className:"fullscreen_map",children:(0,c.jsx)(a.y4,{children:(0,c.jsxs)(l.c,{theme:u,children:[(0,c.jsx)(e,{}),(0,c.jsx)(i.c,{options:{zoom:14.5,style:"https://wms.wheregroup.com/tileserver/style/osm-bright.json",center:[7.0851268,50.73884]},mapId:"map_1"}),(0,c.jsx)(o.c,{showZoomButtons:!1,mapId:"map_1"})]})})})}]},21104:(e,r,n)=>{n.d(r,{c:()=>l});var t=n(25648),a=n.n(t),i=n(2312),o=n.n(i)()(a());o.push([e.id,".mllayerswitcher-layer-box.activeHighlight > .mllayerswitcher-layer-image {\n    border-color:  rgb(181, 215, 238);\n    border-radius: 8px;\n}\n.mllayerswitcher-layer-box.activeHighlight > .mllayerswitcher-layer-text {\n    color:  rgb(181, 215, 238) !important;\n  \n}\n\n.mllayerswitcher-layer-box.active > .mllayerswitcher-layer-image {\n    border-color:  rgb(196, 240, 0);\n    border-radius: 8px;\n}\n.mllayerswitcher-layer-box.active > .mllayerswitcher-layer-text {\n    color:  rgb(252, 0, 0) !important;\n  \n}","",{version:3,sources:["webpack://./src/components/MlLayerSwitcher/MlLayerSwitcher.css"],names:[],mappings:"AAAA;IACI,iCAAiC;IACjC,kBAAkB;AACtB;AACA;IACI,qCAAqC;;AAEzC;;AAEA;IACI,+BAA+B;IAC/B,kBAAkB;AACtB;AACA;IACI,iCAAiC;;AAErC",sourcesContent:[".mllayerswitcher-layer-box.activeHighlight > .mllayerswitcher-layer-image {\n    border-color:  rgb(181, 215, 238);\n    border-radius: 8px;\n}\n.mllayerswitcher-layer-box.activeHighlight > .mllayerswitcher-layer-text {\n    color:  rgb(181, 215, 238) !important;\n  \n}\n\n.mllayerswitcher-layer-box.active > .mllayerswitcher-layer-image {\n    border-color:  rgb(196, 240, 0);\n    border-radius: 8px;\n}\n.mllayerswitcher-layer-box.active > .mllayerswitcher-layer-text {\n    color:  rgb(252, 0, 0) !important;\n  \n}"],sourceRoot:""}]);const l=o}}]);