"use strict";(self.webpackChunk_mapcomponents_react_maplibre=self.webpackChunk_mapcomponents_react_maplibre||[]).push([[272],{87875:(e,t,n)=>{n.r(t),n.d(t,{CircleConfig:()=>M,FillConfig:()=>L,LineConfig:()=>q,__namedExportsOrder:()=>x,default:()=>B});var a=n(67294),r=n(31072),l=n(76956),o=n(30062),i=n(24701),u=n(74714),s=n(59702),d=n(81919),p=n(2734);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],u=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);u=!0);}catch(e){s=!0,r=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var f=function(e){var t,n,m,f=(0,r.Z)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),y=e.labelField||(null===(t=e.geojson)||void 0===t||null===(n=t.features[0])||void 0===n||null===(m=n.properties)||void 0===m?void 0:m[0])||"",b=(0,d.Z)({geojson:e.geojson,timeField:e.timeField,minVal:e.minVal,maxVal:e.maxVal,initialVal:e.initialVal,mapId:e.mapId}),h=b.filteredData,v=b.minVal,g=b.maxVal,C=(0,p.Z)(),S=c((0,a.useState)(e.initialVal||v),2),V=S[0],w=S[1],T=e.featuresColor||C.palette.primary.main,O=e.labelColor||C.palette.text.primary,j=c((0,a.useState)(!1),2),E=j[0],F=j[1],I=(0,i.Z)({type:e.type,timeField:e.timeField,currentVal:V,minVal:v,isPlaying:E,fadeIn:e.fadeIn,fadeOut:e.fadeOut,step:e.step,featuresColor:T,accumulate:e.accumulate,userPaint:e.paint});return(0,a.useEffect)((function(){!e.initialVal&&v?w(v):e.initialVal&&w(e.initialVal)}),[]),"function"==typeof e.onStateChange&&e.onStateChange({current:V,paint:I}),(0,a.useEffect)((function(){if(e.fitBounds&&void 0!==h){var t,n=(0,o.VWR)(h);null===(t=f.map)||void 0===t||t.map.fitBounds(n)}}),[h]),(0,a.useEffect)((function(){var t,n,a,r,l,o;if(f.map)return e.onClick&&(t=e.onClick,null===(r=f.map)||void 0===r||r.on("click","timeController",t)),e.onHover&&(n=e.onHover,null===(l=f.map)||void 0===l||l.on("mouseenter","timeController",n)),e.onLeave&&(a=e.onLeave,null===(o=f.map)||void 0===o||o.on("mouseleave","timeController",a)),function(){var e,r,l;t&&(null===(e=f.map)||void 0===e||e.off("click","timeController",t)),n&&(null===(r=f.map)||void 0===r||r.off("mouseenter","timeController",n)),a&&(null===(l=f.map)||void 0===l||l.off("mouseleave","timeController",a))}}),[f.map,e.onClick,e.onHover,e.onLeave]),a.createElement(a.Fragment,null,h&&e.ownLayer&&a.createElement(l.Z,{type:e.type,mapId:e.mapId,layerId:"timeController",insertBeforeLayer:e.insertBeforeLayer||"timeControllerLabels",geojson:h,paint:e.paint||I,options:{source:{attribution:e.attribution}}}),e.label&&a.createElement(u.Z,{data:h,currentVal:V,fadeIn:e.labelFadeIn,fadeOut:e.labelFadeOut,step:e.step,labelField:y,labelColor:O,timeField:e.timeField,minVal:v,accumulate:e.accumulate,isPlaying:E}),a.createElement(s.Z,{currentVal:V,isPlaying:E,step:e.step,minVal:v,maxVal:g,returnCurrent:w,returnPlaying:F,open:!1,fadeIn:e.fadeIn,fadeOut:e.fadeOut,featuresColor:T,labels:e.label,labelColor:O,labelFadeIn:e.labelFadeIn,labelFadeOut:e.labelFadeOut,accumulate:e.accumulate}))};f.defaultProps={mapId:void 0,ownLayer:!0,type:"circle",step:1,fadeIn:5,fadeOut:5,labelFadeIn:5,labelFadeOut:5,accumulate:!1,fitBounds:!0,label:!0,attribution:""};const y=f;try{f.displayName="MlTemporalController",f.__docgenInfo={description:"",displayName:"MlTemporalController",props:{mapId:{defaultValue:{value:"undefined"},description:"Id of the target MapLibre instance in mapContext",name:"mapId",required:!1,type:{name:"string | undefined"}},insertBeforeLayer:{defaultValue:null,description:'Id of an existing layer in the mapLibre instance to help specify the layer order.\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.',name:"insertBeforeLayer",required:!1,type:{name:"string | undefined"}},geojson:{defaultValue:null,description:"GeoJSON data that is supposed to be rendered by this component.",name:"geojson",required:!0,type:{name:"FeatureCollection<Geometry | GeometryCollection, Properties>"}},ownLayer:{defaultValue:{value:"true"},description:"If true,the component creates and loads a MlGeoJsonLayer to show the data.",name:"ownLayer",required:!1,type:{name:"boolean | undefined"}},attribution:{defaultValue:{value:""},description:"MapLibre attribution shown in the bottom right of the map, if this layer is visible",name:"attribution",required:!1,type:{name:"string | undefined"}},type:{defaultValue:{value:"circle"},description:'Type of the layer that will be added to the MapLibre instance.\nPossible values: "line", "circle", "fill"',name:"type",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"circle"'},{value:'"line"'},{value:'"fill"'}]}},timeField:{defaultValue:null,description:"Property field where the time informations is available.",name:"timeField",required:!0,type:{name:"string"}},minVal:{defaultValue:null,description:"Lowest time value to be shown in the time line.\nBy default, it is set to the lowest value in the time field.",name:"minVal",required:!1,type:{name:"number | undefined"}},label:{defaultValue:{value:"true"},description:'When true, a label layer will be added by the component. In that case, the "labelField" propertie is mandatory.',name:"label",required:!1,type:{name:"boolean | undefined"}},labelField:{defaultValue:null,description:"Property field where the label information is available.",name:"labelField",required:!1,type:{name:"string | undefined"}},maxVal:{defaultValue:null,description:"Highest time value to be shown in the time line.\nBy default, it is set to the highest value in the time field.",name:"maxVal",required:!1,type:{name:"number | undefined"}},initialVal:{defaultValue:null,description:"the value at which the component is to be loaded.\nIf not specified, the component starts at the minimum value.",name:"initialVal",required:!1,type:{name:"number | undefined"}},accumulate:{defaultValue:{value:"false"},description:"When true, the features will be accumulated in the map.\nThis option ist by default false.",name:"accumulate",required:!1,type:{name:"boolean | undefined"}},fitBounds:{defaultValue:{value:"true"},description:"When true, the component will fit the map bounds to the shown features.\nThis option ist by default true.",name:"fitBounds",required:!1,type:{name:"boolean | undefined"}},showControls:{defaultValue:null,description:"Boolean value that disables and enables the controls drawer.",name:"showControls",required:!1,type:{name:"boolean | undefined"}},paint:{defaultValue:null,description:"Paint property object for the features layer.\nPossible props depend on the layer type.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill",name:"paint",required:!1,type:{name:'{ "fill-antialias"?: PropertyValueSpecification<boolean> | undefined; "fill-opacity"?: DataDrivenPropertyValueSpecification<number> | undefined; ... 4 more ...; "fill-pattern"?: DataDrivenPropertyValueSpecification<...> | undefined; } | { ...; } | { ...; } | undefined'}},featuresColor:{defaultValue:null,description:"Sets the color of the features rendered by this component.",name:"featuresColor",required:!1,type:{name:"string | undefined"}},step:{defaultValue:{value:"1"},description:"How many units the timeline runs through at each step.\nBy default it is set to 1.",name:"step",required:!1,type:{name:"number | undefined"}},fadeIn:{defaultValue:{value:"5"},description:"A numeric value that sets how many steps before the feature starts to appear.\nBy default it is set to 5 steps.",name:"fadeIn",required:!1,type:{name:"number | undefined"}},fadeOut:{defaultValue:{value:"5"},description:"A numeric value that sets how many steps the feature fades out after it proper time value.\nBy default it is set to 5 steps.",name:"fadeOut",required:!1,type:{name:"number | undefined"}},labelColor:{defaultValue:null,description:"Sets the color of the features rendered by this component.",name:"labelColor",required:!1,type:{name:"string | undefined"}},labelLayout:{defaultValue:null,description:"Layout property object, that is passed to the labels layer.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#symbol",name:"labelLayout",required:!1,type:{name:"SymbolLayoutProps | undefined"}},labelPaint:{defaultValue:null,description:"Paint property object for the features layer.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#symbol",name:"labelPaint",required:!1,type:{name:"SymbolPaintProps | undefined"}},labelFadeIn:{defaultValue:{value:"5"},description:"A numeric value that sets how many steps before the labels start to appear.\nBy default it is set to 5 steps.",name:"labelFadeIn",required:!1,type:{name:"number | undefined"}},labelFadeOut:{defaultValue:{value:"5"},description:"A numeric value that sets how many steps the labels fade out after their proper time value.\nBy default it is set to 5 steps.",name:"labelFadeOut",required:!1,type:{name:"number | undefined"}},onClick:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked.",name:"onClick",required:!1,type:{name:"((ev: MapEventType) => void | Map) | undefined"}},onHover:{defaultValue:null,description:"Click event handler that is executed whenever a geometry rendered by this component is hovered.",name:"onHover",required:!1,type:{name:"((ev: MapEventType) => void | Map) | undefined"}},onLeave:{defaultValue:null,description:"Leave event handler that is executed whenever a geometry rendered by this component is\nleft/unhovered.",name:"onLeave",required:!1,type:{name:"((ev: MapEventType) => void | Map) | undefined"}},onStateChange:{defaultValue:null,description:"Callback function defined by the user to recive the current time value and paint property in the parent component.",name:"onStateChange",required:!1,type:{name:"Dispatch<SetStateAction<TemporalControllerValues | undefined>> | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlTemporalController/MlTemporalController.tsx#MlTemporalController"]={docgenInfo:f.__docgenInfo,name:"MlTemporalController",path:"src/components/MlTemporalController/MlTemporalController.tsx#MlTemporalController"})}catch(e){}var b=n(54553),h=n(99226),v=n(2658),g=n(18434),C=n(30026),S=n(89893),V=n(27700);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!==w(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===w(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},E.apply(this,arguments)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],u=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);u=!0);}catch(e){s=!0,r=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const B={title:"MapComponents/MlTemporalController",component:y,argTypes:{},decorators:b.Z,parameters:{sourceLink:"components/MlTemporalController/MlTemporalController.tsx"}};var P=function(e){var t;return"number"==typeof(null===(t=e.value)||void 0===t?void 0:t.current)?a.createElement(a.Fragment,null,a.createElement(h.Z,{sx:{position:"absolute",zIndex:500,top:"20%",width:"100px",backgroundColor:"white"}},a.createElement(v.Z,{sx:{padding:"0 5px",textAlign:"center"},variant:"h4"},Math.floor(e.value.current)))):a.createElement(a.Fragment,null)},L=function(e){var t=F((0,a.useState)(),2),n=t[0],r=t[1];return a.createElement(a.Fragment,null,a.createElement(g.Z,{unmovableButtons:a.createElement(v.Z,{variant:"h6",color:"ButtonText"},"African countries by independecy year")}),a.createElement(P,{value:n}),a.createElement(y,E({},e,{onStateChange:r})))}.bind({});L.parameters={},L.args={geojson:C,path:"african_independency.json",timeField:"africa_independency_year",type:"fill",labelField:"africa_independency_year",accumulate:!0,initialVal:1904,fitBounds:!0,showControls:!0,attribution:"Made with Natural Earth."};var M=function(e){var t=F((0,a.useState)(),2),n=t[0],r=t[1];return a.createElement(a.Fragment,null,a.createElement(g.Z,{unmovableButtons:a.createElement(v.Z,{variant:"h6",color:"ButtonText"},"Earthquakes with 5 or more magnitude in the mediterranean area")}),a.createElement(y,E({},e,{onStateChange:r})),a.createElement(P,{value:n}))}.bind({});M.parameters={},M.args={geojson:S,timeField:"Year",labelField:"LocationName",accumulate:!1,minVal:1900,fitBounds:!0,showControls:!0,onClick:function(){return console.log("clicked")},attribution:"National Geophysical Data Center / World Data Service (NGDC/WDS): NCEI/WDS Global Significant Earthquake Database. NOAA National Centers for Environmental Information. doi:10.7289/V5TD9V7K"};var q=function(e){var t=F((0,a.useState)(),2),n=t[0],r=t[1];return a.createElement(a.Fragment,null,a.createElement(g.Z,{unmovableButtons:a.createElement(v.Z,{variant:"h6",color:"ButtonText"},"The French Way of Saint James by stage number")}),a.createElement(y,E({},e,{onStateChange:r})),a.createElement(P,{value:n}))}.bind({});q.parameters={},q.args={geojson:V,timeField:"stage",type:"line",labelField:"name",accumulate:!0,featuresColor:"#1731F1",fitBounds:!0,showControls:!0,attribution:"Source: "},L.parameters=O({storySource:{source:"(props: MlTemporalControllerProps) => {\n\tconst [current, setCurrent] = useState<TemporalControllerValues>();\n\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tunmovableButtons={\n\t\t\t\t\t<Typography variant=\"h6\" color={'ButtonText'}>\n\t\t\t\t\t\tAfrican countries by independecy year\n\t\t\t\t\t</Typography>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<TimeDisplay value={current} />\n\t\t\t<MlTemporalController {...props} onStateChange={setCurrent} />\n\t\t</>\n\t);\n}"}},L.parameters),M.parameters=O({storySource:{source:"(props: MlTemporalControllerProps) => {\n\tconst [current, setCurrent] = useState();\n\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tunmovableButtons={\n\t\t\t\t\t<Typography variant=\"h6\" color={'ButtonText'}>\n\t\t\t\t\t\tEarthquakes with 5 or more magnitude in the mediterranean area\n\t\t\t\t\t</Typography>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<MlTemporalController {...props} onStateChange={setCurrent} />\n\t\t\t<TimeDisplay value={current} />\n\t\t</>\n\t);\n}"}},M.parameters),q.parameters=O({storySource:{source:"(props: MlTemporalControllerProps) => {\n\tconst [current, setCurrent] = useState();\n\n\treturn (\n\t\t<>\n\t\t\t<TopToolbar\n\t\t\t\tunmovableButtons={\n\t\t\t\t\t<Typography variant=\"h6\" color={'ButtonText'}>\n\t\t\t\t\t\tThe French Way of Saint James by stage number\n\t\t\t\t\t</Typography>\n\t\t\t\t}\n\t\t\t/>\n\t\t\t<MlTemporalController {...props} onStateChange={setCurrent} />\n\t\t\t<TimeDisplay value={current} />\n\t\t</>\n\t);\n}"}},q.parameters);var x=["FillConfig","CircleConfig","LineConfig"]}}]);