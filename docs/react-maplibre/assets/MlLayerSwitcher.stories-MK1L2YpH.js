import{j as n}from"./index-nGUg9nSI.js";import{r as m}from"./iframe-O9DyGZK0.js";import{a6 as U,a7 as D,a8 as V,a9 as K,k as X,aa as _,C as Y,ab as $,ac as Q,o as E,p as F,ad as R,b as Z,B as ee,S as ae,a4 as k,c as z}from"./style-DnMtoM4T.js";import{m as re}from"./MapContextDecorator-BzRI4COS.js";import"./index-CYTFyfAa.js";import"./preload-helper-D9Z9MdNV.js";const te=(e,r,a,i)=>{const l=[a,{code:r,...i||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);j(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...l):console?.warn&&console.warn(...l)},q={},B=(e,r,a,i)=>{j(a)&&q[a]||(j(a)&&(q[a]=new Date),te(e,r,a,i))},H=(e,r)=>()=>{if(e.isInitialized)r();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),r()};e.on("initialized",a)}},M=(e,r,a)=>{e.loadNamespaces(r,H(e,a))},A=(e,r,a,i)=>{if(j(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(r)>-1)return M(e,a,i);a.forEach(l=>{e.options.ns.indexOf(l)<0&&e.options.ns.push(l)}),e.loadLanguages(r,H(e,i))},se=(e,r,a={})=>!r.languages||!r.languages.length?(B(r,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:r.languages}),!0):r.hasLoadedNamespace(e,{lng:a.lng,precheck:(i,l)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!l(i.isLanguageChangingTo,e))return!1}}),j=e=>typeof e=="string",ne=e=>typeof e=="object"&&e!==null,ie=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,oe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},le=e=>oe[e],ce=e=>e.replace(ie,le);let ue={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ce};const de=()=>ue;let ye;const me=()=>ye,fe=m.createContext();class ge{constructor(){this.usedNamespaces={}}addUsedNamespaces(r){r.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const pe=(e,r)=>{const a=m.useRef();return m.useEffect(()=>{a.current=e},[e,r]),a.current},J=(e,r,a,i)=>e.getFixedT(r,a,i),he=(e,r,a,i)=>m.useCallback(J(e,r,a,i),[e,r,a,i]),be=(e,r={})=>{const{i18n:a}=r,{i18n:i,defaultNS:l}=m.useContext(fe)||{},s=a||i||me();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new ge),!s){B(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const g=(x,S)=>j(S)?S:ne(S)&&j(S.defaultValue)?S.defaultValue:Array.isArray(x)?x[x.length-1]:x,b=[g,{},!1];return b.t=g,b.i18n={},b.ready=!1,b}s.options.react?.wait&&B(s,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const y={...de(),...s.options.react,...r},{useSuspense:f,keyPrefix:d}=y;let o=l||s.options?.defaultNS;o=j(o)?[o]:o||["translation"],s.reportNamespaces.addUsedNamespaces?.(o);const t=(s.isInitialized||s.initializedStoreOnce)&&o.every(g=>se(g,s,y)),c=he(s,r.lng||null,y.nsMode==="fallback"?o:o[0],d),u=()=>c,p=()=>J(s,r.lng||null,y.nsMode==="fallback"?o:o[0],d),[C,h]=m.useState(u);let v=o.join();r.lng&&(v=`${r.lng}${v}`);const I=pe(v),L=m.useRef(!0);m.useEffect(()=>{const{bindI18n:g,bindI18nStore:b}=y;L.current=!0,!t&&!f&&(r.lng?A(s,r.lng,o,()=>{L.current&&h(p)}):M(s,o,()=>{L.current&&h(p)})),t&&I&&I!==v&&L.current&&h(p);const x=()=>{L.current&&h(p)};return g&&s?.on(g,x),b&&s?.store.on(b,x),()=>{L.current=!1,s&&g&&g?.split(" ").forEach(S=>s.off(S,x)),b&&s&&b.split(" ").forEach(S=>s.store.off(S,x))}},[s,v]),m.useEffect(()=>{L.current&&t&&h(u)},[s,d,t]);const N=[C,s,t];if(N.t=C,N.i18n=s,N.ready=t,t||!t&&!f)return N;throw new Promise(g=>{r.lng?A(s,r.lng,o,()=>g()):M(s,o,()=>g())})};function G(e,r){if(e.inserted[r.name]===void 0)return e.insert("",r,e.sheet,!0)}function W(e,r,a){var i=[],l=D(e,i,a);return i.length<2?a:l+r(i)}var xe=function(r){var a=U(r);a.sheet.speedy=function(f){this.isSpeedy=f},a.compat=!0;var i=function(){for(var d=arguments.length,o=new Array(d),t=0;t<d;t++)o[t]=arguments[t];var c=V(o,a.registered,void 0);return K(a,c,!1),a.key+"-"+c.name},l=function(){for(var d=arguments.length,o=new Array(d),t=0;t<d;t++)o[t]=arguments[t];var c=V(o,a.registered),u="animation-"+c.name;return G(a,{name:c.name,styles:"@keyframes "+u+"{"+c.styles+"}"}),u},s=function(){for(var d=arguments.length,o=new Array(d),t=0;t<d;t++)o[t]=arguments[t];var c=V(o,a.registered);G(a,c)},y=function(){for(var d=arguments.length,o=new Array(d),t=0;t<d;t++)o[t]=arguments[t];return W(a.registered,i,Se(o))};return{css:i,cx:y,injectGlobal:s,keyframes:l,hydrate:function(d){d.forEach(function(o){a.inserted[o]=!0})},flush:function(){a.registered={},a.inserted={},a.sheet.flush()},sheet:a.sheet,cache:a,getRegisteredStyles:D.bind(null,a.registered),merge:W.bind(null,a.registered,i)}},Se=function e(r){for(var a="",i=0;i<r.length;i++){var l=r[i];if(l!=null){var s=void 0;switch(typeof l){case"boolean":break;case"object":{if(Array.isArray(l))s=e(l);else{s="";for(var y in l)l[y]&&y&&(s&&(s+=" "),s+=y)}break}default:s=l}s&&(a&&(a+=" "),a+=s)}}return a},ve=xe({key:"css"}),Le=ve.css;const je=X(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),P=e=>{const[r,a]=m.useState("loading");m.useEffect(()=>{if(!e.src){a("error");return}fetch(e.src).then(({ok:d})=>{a(d?"ready":"error")}).catch(d=>{console.error(d),a("error")})},[e.src]);const i={border:2,borderRadius:"8px",display:"flex"},l=()=>n.jsx(_,{className:e.className,sx:{...i,...e.sx},children:n.jsx(Y,{})}),s=()=>n.jsx(_,{component:"img",className:e.className,sx:{...i,...e.sx},src:e.src,alt:e.alt||""}),y=()=>n.jsx(_,{className:e.className,sx:{...i,...e.sx},children:n.jsx(je,{sx:{display:"block",margin:"auto"}})}),f=d=>{switch(d){case"ready":return n.jsx(s,{});case"error":return n.jsx(y,{});default:return n.jsx(l,{})}};return n.jsx(n.Fragment,{children:f(r)})};try{P.displayName="ImageLoader",P.__docgenInfo={description:"",displayName:"ImageLoader",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},alt:{defaultValue:null,description:"",name:"alt",required:!1,type:{name:"string | undefined"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"SxProps | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}}}}}catch{}const T=e=>{const{layers:r}=$({mapId:e.mapId,watch:{viewport:!1,layers:!0,sources:!1},filter:{matchLayerIds:e.layerId}}),a="40px",i=Le`
		& img:hover {
		}
	`,l={border:`2px solid ${r?.[0]?.visible?"#64c864":"#fd720f"}`,borderRadius:"8px",height:"40px",width:"40px"};return n.jsx(n.Fragment,{children:n.jsxs(_,{className:i,sx:{width:a,height:"53px",justifyContent:"center",py:.25,px:"1rem",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"stretch"},onClick:()=>{e?.handleLayerBoxClick?.(e.layerId)},children:[e?.thumbnail&&n.jsx(P,{sx:l,src:e.thumbnail}),n.jsx("div",{className:"mllayerswitcher-layer-text",style:{textAlign:"center",color:"rgb(112, 117, 122)",fontFamily:"Roboto, Arial",width:a,fontSize:"0.60rem"},children:e.label})]},e.layerId)})};try{T.displayName="LayerBox",T.__docgenInfo={description:"",displayName:"LayerBox",props:{mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!0,type:{name:"string"}},thumbnail:{defaultValue:null,description:"",name:"thumbnail",required:!1,type:{name:"string | undefined"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},handleLayerBoxClick:{defaultValue:null,description:"",name:"handleLayerBoxClick",required:!1,type:{name:"((layerId: string) => void) | undefined"}}}}}catch{}const O=e=>{const r=m.useContext(Q),a=!!e.baseSourceConfig?.layers?.length,i=!!e.detailLayerConfig?.layers?.length,{layers:l}=$({mapId:e.mapId,watch:{viewport:!1,layers:!0,sources:!1},filter:{}}),{t:s}=be();m.useEffect(()=>{if(r.map){const t=(c,u)=>{const p=y(c.layerId),C=u===0?"visible":"none";p.forEach(h=>{h&&o(h,C)})};e.baseSourceConfig.layers.forEach((c,u)=>t(c,u)),e.detailLayerConfig.layers.forEach((c,u)=>t(c,u))}return()=>{}},[r.map]),m.useEffect(()=>{r.map?.style?._layers&&(e.baseSourceConfig.layers.forEach(t=>{y(t.layerId).forEach(u=>{r?.map&&(u&&r.map?.getLayoutProperty(u,"visibility"),r.map.baseLayers.indexOf(u)!==-1&&(u="styleBase"))})}),e.detailLayerConfig.layers.forEach(({layerId:t})=>{r.map?.getLayoutProperty(t,"visibility")}))},[l]);const y=t=>t==="styleBase"&&r?.map?r?.map.baseLayers:[t],f=t=>{const c=e.detailLayerConfig.layers.find(p=>p.layerId===t);c?.linkedTo&&d(c.linkedTo);const u=r?.map&&r?.map.getLayer(t)?.getLayoutProperty("visibility")==="visible"?"none":"visible";o(t,u)},d=t=>{const c=y(t),u=r?.map&&c?.[0]&&r?.map.getLayer(c[0])?.getLayoutProperty("visibility")==="visible"?"none":"visible";e.baseSourceConfig.layers.forEach((p,C)=>{const h=y(p.layerId),v=u==="none"&&C===0?"visible":p.layerId===t?u:"none";h.forEach(I=>{I&&["visible","none"].includes(v)&&o(I,v)})})},o=(t,c="none")=>{r.map?.getLayer(t)?r.map.setLayoutProperty(t,"visibility",c):console.warn(`Layer "${t}" does not exist on the map.`)};return n.jsxs(n.Fragment,{children:[a&&n.jsxs(E,{sx:{minHeight:"150px"},children:[n.jsx(F,{variant:"h6",children:s(e.baseSourceConfig.label||"Map type")}),n.jsx(R,{}),n.jsx(E,{sx:{display:"flex",paddingTop:"1rem"},children:e.baseSourceConfig.layers.map(({src:t,label:c,layerId:u})=>n.jsx(T,{mapId:e.mapId,label:s(c),layerId:u,thumbnail:t,handleLayerBoxClick:()=>{d(u)}},u))})]}),i&&n.jsxs(E,{sx:{minHeight:"150px"},children:[n.jsx(F,{variant:"h6",children:s("Map details")}),n.jsx(R,{}),n.jsx(E,{sx:{display:"flex",paddingTop:"1rem"},children:e.detailLayerConfig.layers.map(({src:t,label:c,layerId:u})=>n.jsx(T,{mapId:e.mapId,label:s(c),layerId:u,thumbnail:t,handleLayerBoxClick:()=>{f(u)}},u))})]})]})};try{O.displayName="MlLayerSwitcher",O.__docgenInfo={description:"",displayName:"MlLayerSwitcher",props:{baseSourceConfig:{defaultValue:null,description:"",name:"baseSourceConfig",required:!0,type:{name:"BaseSourceConfig"}},detailLayerConfig:{defaultValue:null,description:"",name:"detailLayerConfig",required:!0,type:{name:"DetailLayerConfig"}},mapId:{defaultValue:null,description:"",name:"mapId",required:!1,type:{name:"string | undefined"}}}}}catch{}const Ce="Feature",we={},Ie={type:"LineString",coordinates:[[7.1074676513671875,50.74340774029213],[7.0992279052734375,50.756441089372665],[7.079315185546874,50.764693667025014],[7.045669555664062,50.77945780529241],[7.030563354492187,50.79161300845443],[7.0291900634765625,50.80940599750376],[7.0236968994140625,50.820685846099174],[7.0085906982421875,50.825891011253546],[6.9879913330078125,50.826758482363275],[6.97906494140625,50.835432306955276],[6.9824981689453125,50.84583876895451],[6.9962310791015625,50.85147463352982],[7.012023925781249,50.85710981721644],[7.021636962890625,50.86664473085768],[7.0367431640625,50.872278081520406],[7.0477294921875,50.877044231111014],[7.052536010742187,50.88397594225127]]},Ne={type:Ce,properties:we,geometry:Ie},Ee="Feature",_e={},Te={type:"LineString",coordinates:[[7.0635223388671875,50.71385204707258],[7.06146240234375,50.709721458354075],[7.063865661621094,50.70298129536074],[7.064552307128906,50.69906720767511],[7.059059143066406,50.69428287906098],[7.05596923828125,50.68797551838366],[7.0580291748046875,50.680797145321655],[7.062835693359375,50.67514068397085],[7.060432434082031,50.6686131506577],[7.051849365234375,50.659255436656736],[7.044639587402344,50.6512019574539],[7.0484161376953125,50.64271166020676],[7.0566558837890625,50.63748609931014]]},Oe={type:Ee,properties:_e,geometry:Te},ze={title:"MapComponents/MlLayerSwitcher",component:O,argTypes:{url:{},layer:{}},decorators:re},Ve=e=>{const[r,a]=m.useState(!0);return n.jsxs(n.Fragment,{children:[n.jsx(Z,{buttons:n.jsx(ee,{variant:r?"contained":"outlined",onClick:()=>a(!r),sx:{marginRight:{xs:"0px",sm:"10px"}},children:"Layer Switcher"})}),n.jsxs(ae,{open:r,setOpen:a,name:"Layer Switcher",children:[n.jsx(k,{url:e.url,urlParameters:{layers:e.layer},sourceOptions:e.sourceOptions,layerId:"historic",visible:e.layerVisible}),n.jsx(k,{url:e.url2,urlParameters:{layers:e.layer2},sourceOptions:e.sourceOptions,layerId:e.layer2,visible:e.layer2Visible}),n.jsx(z,{type:"line",options:{layout:{visibility:e.geojsonLayerVisible?"visible":"none"}},geojson:Ne,layerId:"geojson1"}),n.jsx(z,{type:"line",options:{layout:{visibility:e.geojson2LayerVisible?"visible":"none"}},geojson:Oe,layerId:"geojson2"}),n.jsx(O,{baseSourceConfig:{active:e.baseSourcesActive,layers:e.layers},detailLayerConfig:e.detailLayerConfig})]})]})},w=Ve.bind({});w.parameters={};w.args={url:"https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme",layer:"nw_uraufnahme_rw",layerVisible:!0,url2:"https://www.wms.nrw.de/geobasis/wms_nw_dop",layer2:"WMS_NW_DOP",layer2Visible:!1,geojsonLayerVisible:!0,geojson2LayerVisible:!0,sourceOptions:{minzoom:13,maxzoom:20},baseSourcesActive:!0,layers:[{label:"Historic",layerId:"historic",src:"assets/historic.png"},{label:"Straßenkarte",layerId:"styleBase",src:"assets/osm.png"},{label:"DOP",layerId:"WMS_NW_DOP",src:"assets/dop.png"}],detailLayerConfig:{layers:[{label:"GeoJson 1",layerId:"geojson1",src:"assets/historic.png",active:!0}]}};w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:`(args: any) => {
  const [openSidebar, setOpenSidebar] = useState(true);
  return <>
            <TopToolbar buttons={<Button variant={openSidebar ? 'contained' : 'outlined'} onClick={() => setOpenSidebar(!openSidebar)} sx={{
      marginRight: {
        xs: '0px',
        sm: '10px'
      }
    }}>
                        Layer Switcher
                    </Button>} />
            <Sidebar open={openSidebar} setOpen={setOpenSidebar} name={'Layer Switcher'}>
                <MlWmsLayer url={args.url} urlParameters={{
        layers: args.layer
      }} sourceOptions={args.sourceOptions} layerId="historic" visible={args.layerVisible} />
                <MlWmsLayer url={args.url2} urlParameters={{
        layers: args.layer2
      }} sourceOptions={args.sourceOptions} layerId={args.layer2} visible={args.layer2Visible} />
                <MlGeoJsonLayer type="line" options={{
        layout: {
          visibility: args.geojsonLayerVisible ? 'visible' : 'none'
        }
      }} geojson={sample_geojson_1 as Feature} layerId="geojson1" />
                <MlGeoJsonLayer type="line" options={{
        layout: {
          visibility: args.geojson2LayerVisible ? 'visible' : 'none'
        }
      }} geojson={sample_geojson_2 as Feature} layerId="geojson2" />
                <MlLayerSwitcher baseSourceConfig={{
        active: args.baseSourcesActive,
        layers: args.layers
      }} detailLayerConfig={args.detailLayerConfig} />
            </Sidebar>
        </>;
}`,...w.parameters?.docs?.source}}};const qe=["ExampleConfig"];export{w as ExampleConfig,qe as __namedExportsOrder,ze as default};
