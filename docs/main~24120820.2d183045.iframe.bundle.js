!function(e){function t(t){for(var n,s,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(p&&p(t);d.length;)d.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={3:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r=o[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=n);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=function(e){return s.p+""+({}[e]||e)+"."+{0:"c35ff5dd",1:"bf330302",2:"09f15de5",17:"b90e559b",18:"9b09b366",19:"f44f9a2d",20:"45086110",21:"0757a4cf",22:"f3c29cf2"}[e]+".iframe.bundle.js"}(e);var c=new Error;a=function(t){i.onerror=i.onload=null,clearTimeout(l);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",c.name="ChunkLoadError",c.type=n,c.request=a,r[1](c)}o[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:i})}),12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var p=c;a.push([696,7,5,14,15,6,16,4,13,11,9,10,12,8]),r()}({1017:function(e,t,r){},1018:function(e,t,r){"use strict";(function(e){(0,r(488).configure)([r(1019),r(1059)],e,!1)}).call(this,r(290)(e))},1019:function(e,t,r){var n={"./stories/IntroductionCore.stories.mdx":1020};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id=1019},1020:function(e,t,r){"use strict";r.r(t),r.d(t,"__page",(function(){return l}));r(0);var n=r(108),o=r(600),a=r(606);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const i={};function c({components:e,...t}){return Object(n.b)("wrapper",s({},i,t,{components:e,mdxType:"MDXLayout"}),Object(n.b)(a.a,{title:"Core/Introduction",mdxType:"Meta"}))}c.isMDXComponent=!0;const l=()=>{throw new Error("Docs-only story")};l.parameters={docsOnly:!0};const p={title:"Core/Introduction",includeStories:["__page"]},u={};p.parameters=p.parameters||{},p.parameters.docs={...p.parameters.docs||{},page:()=>Object(n.b)(o.a,{mdxStoryNameToKey:u,mdxComponentAnnotations:p},Object(n.b)(c,null))},t.default=p},1059:function(e,t,r){var n={"./components/MapLibreMap/MapLibreMap.stories.js":1060,"./components/MlComponentTemplate/MlComponentTemplate.stories.js":1112,"./components/MlCreatePdfButton/MlCreatePdfButton.stories.js":1099,"./components/MlFeatureEditor/MlFeatureEditor.stories.js":1095,"./components/MlFillExtrusionLayer/MlFillExtrusionLayer.stories.js":1113,"./components/MlFollowGps/MlFollowGps.stories.js":1069,"./components/MlGPXViewer/MlGPXViewer.stories.js":1070,"./components/MlGeoJsonLayer/MlGeoJsonLayer.stories.js":1074,"./components/MlImageMarkerLayer/MlImageMarkerLayer.stories.js":1104,"./components/MlLayer/MlLayer.stories.js":1075,"./components/MlLayerMagnify/MlLayerMagnify.stories.js":1114,"./components/MlLayerSwipe/MlLayerSwipe.stories.js":1115,"./components/MlLayerSwitcher/MlLayerSwitcher.stories.js":1100,"./components/MlMarker/MlMarker.stories.js":1087,"./components/MlNavigationCompass/MlNavigationCompass.stories.js":1088,"./components/MlNavigationTools/MlNavigationTools.stories.js":1089,"./components/MlOsmLayer/MlOsmLayer.stories.js":1116,"./components/MlScaleReference/MlScaleReference.stories.js":1117,"./components/MlShareMapState/MlShareMapState.stories.js":1118,"./components/MlSpatialElevationProfile/MlSpatialElevationProfile.stories.js":1119,"./components/MlThreeJsLayer/MlThreeJsLayer.stories.js":1101,"./components/MlTransitionGeoJsonLayer/MlTransitionGeoJsonLayer.stories.js":1105,"./components/MlUseMapDebugger/MlUseMapDebugger.stories.js":1120,"./components/MlVectorTileLayer/MlVectorTileLayer.stories.js":1121,"./components/MlWmsFeatureInfoPopup/MlWmsFeatureInfoPopup.stories.js":1122,"./components/MlWmsLayer/MlWmsLayer.stories.js":1090,"./components/MlWmsLoader/MlWmsLoader.stories.js":1106,"./hooks/useMapState.stories.js":1093};function o(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=a,e.exports=o,o.id=1059},1060:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return i}));r(0);var n=r(139),o=r(40),a=r(1);const s={title:"Core/MapLibreMap",component:n.a,argTypes:{options:{control:{type:"object"}}}};t.default=s;const i=(e=>Object(a.jsx)(o.a,{children:Object(a.jsx)(n.a,{options:e.options})})).bind({});i.args={options:{style:"https://wms.wheregroup.com/tileserver/style/osm-bright.json",center:[8.607,53.1409349],maxBounds:[[1.40625,43.452919],[17.797852,55.973798]]}},i.parameters={},i.parameters={storySource:{source:"(args) => (\n  <MapComponentsProvider>\n    <MapLibreMap options={args.options} />\n  </MapComponentsProvider>\n)"},...i.parameters}},1061:function(e,t,r){},1069:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return i}));r(0);var n=r(245),o=r(37),a=r(1);const s={title:"MapComponents/MlFollowGps",component:n.a,argTypes:{url:{},layer:{}},decorators:o.a};t.default=s;const i=(e=>Object(a.jsx)(n.a,{})).bind({});i.parameters={},i.args={},i.parameters={storySource:{source:"(args) => <MlFollowGps />"},...i.parameters}},107:function(e,t,r){"use strict";var n=r(0),o=r(51),a=r(3),s=r.n(a),i=r(1);const c={visible:!0,urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:256,height:256,styles:""},attribution:"",sourceOptions:{minZoom:0,maxZoom:20},layerOptions:{minZoom:0,maxZoom:20}},l=e=>{const t=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(!1),a=Object(n.useRef)(e.layerId||"MlWmsLayer-"+t.componentId);return Object(n.useEffect)(()=>{var n;if(!t.map||r.current)return;let o;r.current=!0;let s=e.url;-1!==e.url.indexOf("?")&&(o=e.url.split("?"),s=o[0]);let i=new URLSearchParams(null===(n=o)||void 0===n?void 0:n[1]),l={...c.urlParameters,...Object.fromEntries(i),...e.urlParameters},p=new URLSearchParams(l),u=decodeURIComponent(p.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");t.map.addSource(a.current,{type:"raster",tiles:[s+"?"+u],tileSize:l.width,attribution:e.attribution,...e.sourceOptions},t.componentId),t.map.addLayer({id:a.current,type:"raster",source:a.current,...e.layerOptions},e.insertBeforeLayer,t.componentId),e.visible||t.map.setLayoutProperty(a.current,"visibility","none")},[t,e]),Object(n.useEffect)(()=>{t.map&&r.current&&(e.visible?t.map.setLayoutProperty(a.current,"visibility","visible"):t.map.setLayoutProperty(a.current,"visibility","none"))},[e.visible,t.map]),Object(i.jsx)(i.Fragment,{})};l.defaultProps={...c},l.propTypes={url:s.a.string.isRequired,urlParameters:s.a.shape({layers:s.a.string.isRequired,bbox:s.a.string,format:s.a.string,service:s.a.string,version:s.a.string,request:s.a.string,srs:s.a.string,width:s.a.number,height:s.a.number}),mapId:s.a.string,attribution:s.a.string,layerOptions:s.a.object,sourceOptions:s.a.object,insertBeforeLayer:s.a.string,visible:s.a.bool},l.__docgenInfo={description:'Adds a WMS raster source & layer to the maplibre-gl instance\n\n@param {object} props\n@param {object} props.urlParameters URL query parameters that will be added to the WMS URL. A layers property (string) is mandatory. Any value defined on this attribute will extend the default object\n@param {string} props.url WMS URL\n@param {bool} props.visible Sets layer "visibility" property to "visible" if true or "none" if false\n@param {string} props.attribution MapLibre attribution shown in the bottom right of the map, if this layer is visible\n@param {string} props.mapId Id of the target MapLibre instance in mapContext\n@param {object} props.sourceOptions Object that is passed to the MapLibre.addSource call as config option parameter\n@param {object} props.layerOptions Object that is passed to the MapLibre.addLayer call as config option parameter\n@param {string} props.insertBeforeLayer Id of an existing layer in the mapLibre instance to help specify the layer order\n                                           This layer will be visually beneath the layer with the "insertBeforeLayer" id\n\n@component',methods:[],displayName:"MlWmsLayer",props:{visible:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:'Sets layer "visibility" property to "visible" if true or "none" if false'},urlParameters:{defaultValue:{value:'{\n  bbox: "{bbox-epsg-3857}",\n  format: "image/png",\n  service: "WMS",\n  version: "1.1.1",\n  request: "GetMap",\n  srs: "EPSG:3857",\n  width: 256,\n  height: 256,\n  styles: "",\n}',computed:!1},type:{name:"shape",value:{layers:{name:"string",required:!0},bbox:{name:"string",required:!1},format:{name:"string",required:!1},service:{name:"string",required:!1},version:{name:"string",required:!1},request:{name:"string",required:!1},srs:{name:"string",required:!1},width:{name:"number",required:!1},height:{name:"number",required:!1}}},required:!1,description:"URL query parameters that will be added to the WMS URL. A layers property (string) is mandatory. Any value defined on this attribute will extend the default object."},attribution:{defaultValue:{value:'""',computed:!1},type:{name:"string"},required:!1,description:"MapLibre attribution shown in the bottom right of the map, if this layer is visible"},sourceOptions:{defaultValue:{value:"{\n  minZoom: 0,\n  maxZoom: 20,\n}",computed:!1},type:{name:"object"},required:!1,description:"Object that is passed to the MapLibre.addSource call as config option parameter"},layerOptions:{defaultValue:{value:"{\n  minZoom: 0,\n  maxZoom: 20,\n}",computed:!1},type:{name:"object"},required:!1,description:"Object that is passed to the MapLibre.addLayer call as config option parameter"},url:{type:{name:"string"},required:!0,description:"WMS URL"},mapId:{type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"},insertBeforeLayer:{type:{name:"string"},required:!1,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.'}}},t.a=l,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlWmsLayer/MlWmsLayer.js"]={name:"MlWmsLayer",docgenInfo:l.__docgenInfo,path:"src/components/MlWmsLayer/MlWmsLayer.js"})},1070:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return c}));r(0);var n=r(246),o=r(37),a=r(319),s=r(1);const i={title:"MapComponents/MlGPXViewer",component:n.a,argTypes:{options:{control:{type:"object"}}},decorators:o.a};t.default=i;const c=(e=>Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(a.a,{children:Object(s.jsx)(n.a,{})})})).bind({});c.parameters={},c.parameters={storySource:{source:"(args) => (\n  <>\n    <GeoJsonProvider>\n      <MlGPXViewer />\n    </GeoJsonProvider>\n  </>\n)"},...c.parameters}},1074:function(e,t,r){"use strict";r.r(t),r.d(t,"Linestring",(function(){return p})),r.d(t,"Polygon",(function(){return u})),r.d(t,"DefaultPaintOverrides",(function(){return d}));r(0);var n=r(78),o=r(37),a=r(320),s=r(328),i=r(1);console.log(s);const c={title:"MapComponents/MlGeoJsonLayer",component:n.a,argTypes:{url:{},layer:{}},decorators:o.a};t.default=c;const l=e=>Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(n.a,{...e})}),p=(e=>Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(n.a,{type:"line",geojson:a})})).bind({});p.parameters={},p.args={};const u=l.bind({});u.parameters={},u.args={geojson:s};const d=l.bind({});d.parameters={},d.args={defaultPaintOverrides:{fill:{"fill-color":"blue"},circle:{"circle-color":"red"},line:{"line-color":"orange"}},geojson:s},p.parameters={storySource:{source:'(props) => {\n  return (\n    <>\n      <MlGeoJsonLayer type="line" geojson={sample_geojson_1} />\n    </>\n  );\n}'},...p.parameters},u.parameters={storySource:{source:"(props) => {\n  return (\n    <>\n      <MlGeoJsonLayer {...props} />\n    </>\n  );\n}"},...u.parameters},d.parameters={storySource:{source:"(props) => {\n  return (\n    <>\n      <MlGeoJsonLayer {...props} />\n    </>\n  );\n}"},...d.parameters}},1075:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return i}));r(0);var n=r(247),o=r(37),a=r(1);const s={title:"MapComponents/MlLayer",component:n.a,argTypes:{url:{},layer:{}},decorators:o.a};t.default=s;const i=(e=>Object(a.jsx)(n.a,{})).bind({});i.parameters={},i.args={},i.parameters={storySource:{source:"(args) => <MlLayer />"},...i.parameters}},1076:function(e,t,r){},1077:function(e,t,r){},1081:function(e,t,r){},1087:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return i}));r(0);var n=r(248),o=r(37),a=r(1);const s={title:"MapComponents/MlMarker",component:n.a,decorators:o.a};t.default=s;const i=(e=>Object(a.jsx)(n.a,{...e})).bind({});i.args={content:"WhereGroup",lng:7.0851268,lat:50.73884,mapId:"map_1"},i.parameters={storySource:{source:"(args) => <MlMarker {...args}/>"},...i.parameters}},1088:function(e,t,r){"use strict";r.r(t),r.d(t,"Standard",(function(){return c})),r.d(t,"StyleExample",(function(){return l}));r(0);var n=r(249),o=r(37),a=r(1);const s={title:"MapComponents/MlNavigationCompass",component:n.a,decorators:o.a};t.default=s;const i=e=>Object(a.jsx)(n.a,{...e}),c=i.bind({});c.args={style:{transform:"scale(4)",left:"50%",marginLeft:"-100px",top:"50%",marginTop:"-100px"}};const l=i.bind({});l.args={style:{transform:"scale(4)",left:"50%",marginLeft:"-100px",top:"50%",marginTop:"-100px"},backgroundStyle:{border:"12px solid #adad44",background:"radial-gradient(#417741, #111)"},needleStyle:{":hover svg path:nth-of-type(1)":{fill:"#eded66"},":hover svg path:nth-of-type(2)":{fill:"#252f1b"},"svg path:nth-of-type(1)":{fill:"#adad44"},"svg path:nth-of-type(2)":{fill:"#1a1d15"}},rotateRightStyle:{"svg:hover path":{fill:"#ededb1"}},rotateLeftStyle:{"svg:hover path":{fill:"#ededb1"}}},c.parameters={storySource:{source:"(props) => <MlNavigationCompass {...props} />"},...c.parameters},l.parameters={storySource:{source:"(props) => <MlNavigationCompass {...props} />"},...l.parameters}},1089:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return i}));r(0);var n=r(175),o=r(37),a=r(1);const s={title:"MapComponents/MlNavigationTools",component:n.a,argTypes:{url:{},layer:{}},decorators:o.a};t.default=s;const i=(e=>Object(a.jsx)(n.a,{})).bind({});i.parameters={},i.args={},i.parameters={storySource:{source:"(args) => <MlNavigationTools />"},...i.parameters}},1090:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return p}));var n=r(0),o=r(107),a=r(86),s=r(210),i=r(201),c=(r(1091),r(1));const l={title:"MapComponents/MlWmsLayer",component:o.a,argTypes:{url:{},layer:{}},decorators:i.a};t.default=l;const p=(e=>{const[t,r]=Object(n.useState)(!0);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(a.a,{children:Object(c.jsx)(s.a,{color:"primary",variant:t?"contained":"outlined",onClick:()=>r(!t),children:"WMS"})}),Object(c.jsx)(o.a,{visible:t,...e})]})}).bind({});p.parameters={},p.args={mapId:"map_2",url:"https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme",urlParameters:{layers:"nw_uraufnahme_rw"}},p.parameters={storySource:{source:'(props) => {\n  const [showLayer, setShowLayer] = useState(true);\n\n  return (\n    <>\n      <TopToolbar>\n        <Button\n          color="primary"\n          variant={showLayer ? "contained" : "outlined"}\n          onClick={() => setShowLayer(!showLayer)}\n        >\n          WMS\n        </Button>\n      </TopToolbar>\n      <MlWmsLayer visible={showLayer} {...props} />\n    </>\n  );\n}'},...p.parameters}},1091:function(e,t,r){},1093:function(e,t,r){"use strict";r.r(t),r.d(t,"ViewportOnly",(function(){return l})),r.d(t,"IncludeBaseLayers",(function(){return p})),r.d(t,"MatchLayerIdString",(function(){return u})),r.d(t,"MatchLayerIdRegexp",(function(){return d})),r.d(t,"NonBaseLayersOnly",(function(){return m}));var n=r(0),o=r(68),a=r(37),s=r(1);const i={title:"Hooks/UseMapState",component:o.a,argTypes:{},decorators:a.a};t.default=i;const c=e=>{const t=Object(o.a)({...e});return Object(n.useEffect)(()=>{},[t.layers]),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{style:{position:"fixed",zIndex:1e4,display:"flex",flexWrap:"wrap",top:0,left:0,right:0,bottom:0,maxHeight:"100VH",backgroundColor:"rgba(80,80,80,.8)",padding:"50px",fontSize:"20px",color:"#51ff09",overflow:"hidden",pointerEvents:"none"},children:Object(s.jsx)("pre",{children:JSON.stringify(t,null,"  ")})})})},l=c.bind({});l.parameters={},l.args={mapId:"map_1",watch:{viewport:!0,layers:!1,sources:!1}};const p=c.bind({});p.parameters={},p.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0}};const u=c.bind({});u.parameters={},u.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0,matchLayerIds:"water"}};const d=c.bind({});d.parameters={},d.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!0,matchLayerIds:/water/}};const m=c.bind({});m.parameters={},m.args={mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}},l.parameters={storySource:{source:'(props) => {\n  const mapState = useMapState({ ...props });\n\n  useEffect(() => {\n\n  \n  }, [mapState.layers])\n\n  return (\n    <>\n    <div\n        style={{\n          position: "fixed",\n          zIndex: 10000,\n          display: "flex",\n          flexWrap: "wrap",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          maxHeight:\'100VH\',\n          backgroundColor: "rgba(80,80,80,.8)",\n          padding: "50px",\n          fontSize: "20px",\n          color: "#51ff09",\n          overflow:\'hidden\',\n          pointerEvents: "none",\n        }}\n    >\n\n        <pre>{JSON.stringify(mapState, null, "  ")}</pre>\n\n\n    </div>\n    </>\n  );\n}'},...l.parameters},p.parameters={storySource:{source:'(props) => {\n  const mapState = useMapState({ ...props });\n\n  useEffect(() => {\n\n  \n  }, [mapState.layers])\n\n  return (\n    <>\n    <div\n        style={{\n          position: "fixed",\n          zIndex: 10000,\n          display: "flex",\n          flexWrap: "wrap",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          maxHeight:\'100VH\',\n          backgroundColor: "rgba(80,80,80,.8)",\n          padding: "50px",\n          fontSize: "20px",\n          color: "#51ff09",\n          overflow:\'hidden\',\n          pointerEvents: "none",\n        }}\n    >\n\n        <pre>{JSON.stringify(mapState, null, "  ")}</pre>\n\n\n    </div>\n    </>\n  );\n}'},...p.parameters},u.parameters={storySource:{source:'(props) => {\n  const mapState = useMapState({ ...props });\n\n  useEffect(() => {\n\n  \n  }, [mapState.layers])\n\n  return (\n    <>\n    <div\n        style={{\n          position: "fixed",\n          zIndex: 10000,\n          display: "flex",\n          flexWrap: "wrap",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          maxHeight:\'100VH\',\n          backgroundColor: "rgba(80,80,80,.8)",\n          padding: "50px",\n          fontSize: "20px",\n          color: "#51ff09",\n          overflow:\'hidden\',\n          pointerEvents: "none",\n        }}\n    >\n\n        <pre>{JSON.stringify(mapState, null, "  ")}</pre>\n\n\n    </div>\n    </>\n  );\n}'},...u.parameters},d.parameters={storySource:{source:'(props) => {\n  const mapState = useMapState({ ...props });\n\n  useEffect(() => {\n\n  \n  }, [mapState.layers])\n\n  return (\n    <>\n    <div\n        style={{\n          position: "fixed",\n          zIndex: 10000,\n          display: "flex",\n          flexWrap: "wrap",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          maxHeight:\'100VH\',\n          backgroundColor: "rgba(80,80,80,.8)",\n          padding: "50px",\n          fontSize: "20px",\n          color: "#51ff09",\n          overflow:\'hidden\',\n          pointerEvents: "none",\n        }}\n    >\n\n        <pre>{JSON.stringify(mapState, null, "  ")}</pre>\n\n\n    </div>\n    </>\n  );\n}'},...d.parameters},m.parameters={storySource:{source:'(props) => {\n  const mapState = useMapState({ ...props });\n\n  useEffect(() => {\n\n  \n  }, [mapState.layers])\n\n  return (\n    <>\n    <div\n        style={{\n          position: "fixed",\n          zIndex: 10000,\n          display: "flex",\n          flexWrap: "wrap",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          maxHeight:\'100VH\',\n          backgroundColor: "rgba(80,80,80,.8)",\n          padding: "50px",\n          fontSize: "20px",\n          color: "#51ff09",\n          overflow:\'hidden\',\n          pointerEvents: "none",\n        }}\n    >\n\n        <pre>{JSON.stringify(mapState, null, "  ")}</pre>\n\n\n    </div>\n    </>\n  );\n}'},...m.parameters}},1095:function(e,t,r){"use strict";r.r(t),r.d(t,"EditPolygon",(function(){return me})),r.d(t,"EditPoint",(function(){return fe})),r.d(t,"EditLineString",(function(){return he})),r.d(t,"DrawPolygon",(function(){return ge})),r.d(t,"DrawPoint",(function(){return ye})),r.d(t,"DrawLineString",(function(){return be}));var n={};r.r(n),r.d(n,"classes",(function(){return i})),r.d(n,"sources",(function(){return c})),r.d(n,"cursors",(function(){return l})),r.d(n,"types",(function(){return p})),r.d(n,"geojsonTypes",(function(){return u})),r.d(n,"modes",(function(){return d})),r.d(n,"events",(function(){return m})),r.d(n,"updateActions",(function(){return f})),r.d(n,"meta",(function(){return h})),r.d(n,"activeStates",(function(){return g})),r.d(n,"interactions",(function(){return y})),r.d(n,"LAT_MIN",(function(){return b})),r.d(n,"LAT_RENDERED_MIN",(function(){return v})),r.d(n,"LAT_MAX",(function(){return x})),r.d(n,"LAT_RENDERED_MAX",(function(){return O})),r.d(n,"LNG_MIN",(function(){return j})),r.d(n,"LNG_MAX",(function(){return S}));var o=r(0),a=(r(1061),r(1062),r(426)),s=r.n(a);const i={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},c={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},l={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},p={POLYGON:"polygon",LINE:"line_string",POINT:"point"},u={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},d={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},m={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},f={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},h={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},g={ACTIVE:"true",INACTIVE:"false"},y=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],b=-90,v=-85,x=90,O=85,j=-270,S=270;function M(e){return function(t){const r=t.featureTarget;return!!r&&(!!r.properties&&r.properties.meta===e)}}function L(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===g.ACTIVE&&e.featureTarget.properties.meta===h.FEATURE))}function E(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===g.INACTIVE&&e.featureTarget.properties.meta===h.FEATURE))}function C(e){return void 0===e.featureTarget}function I(e){const t=e.featureTarget;return!!t&&(!!t.properties&&t.properties.meta===h.VERTEX)}function w(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}var T={enable(e){setTimeout(()=>{e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()},0)}};var _=function(e,t){return!!e.lngLat&&(e.lngLat.lng===t[0]&&e.lngLat.lat===t[1])};var R=function(e,t,r,n){return{type:u.FEATURE,properties:{meta:h.VERTEX,parent:e,coord_path:r,active:n?g.ACTIVE:g.INACTIVE},geometry:{type:u.POINT,coordinates:t}}};const A={onSetup:function(){console.log("Change mode: custom polygon");const e=this.newFeature({type:u.FEATURE,properties:{},geometry:{type:u.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),T.disable(this),this.updateUIClasses({mouse:l.ADD}),this.activateUIButton(p.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&_(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode("custom_select",{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:l.ADD}),e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),this.map.fire(m.CREATE,{features:[e.polygon.toGeoJSON()]})},clickOnVertex:function(e){return this.changeMode("custom_select",{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0.".concat(e.currentVertexPosition),t.lngLat.lng,t.lngLat.lat),I(t)&&this.updateUIClasses({mouse:l.POINTER})}};A.onTap=A.onClick=function(e,t){return I(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},A.onKeyUp=function(e,t){!function(e){return 27===e.keyCode}(t)?function(e){return 13===e.keyCode}(t)&&this.changeMode("custom_select",{featureIds:[e.polygon.id]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode("custom_select"))},A.onStop=function(e){this.updateUIClasses({mouse:l.NONE}),T.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0.".concat(e.currentVertexPosition)),e.polygon.isValid()?this.map.fire(m.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode("custom_select",{},{silent:!0})))},A.toDisplayFeatures=function(e,t,r){const n=t.properties.id===e.polygon.id;if(t.properties.active=n?g.ACTIVE:g.INACTIVE,!n)return r(t);if(0===t.geometry.coordinates.length)return;const o=t.geometry.coordinates[0].length;if(!(o<3)){if(t.properties.meta=h.FEATURE,r(R(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),o>3){const n=t.geometry.coordinates[0].length-3;r(R(e.polygon.id,t.geometry.coordinates[0][n],"0.".concat(n),!1))}if(o<=4){const e=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:u.FEATURE,properties:t.properties,geometry:{coordinates:e,type:u.LINE_STRING}}),3===o)return}return r(t)}},A.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode("custom_select")};var P=A,k=r(612),N=r.n(k);var H=function(e,t){const r=t.getBoundingClientRect();return new N.a(e.clientX-r.left-(t.clientLeft||0),e.clientY-r.top-(t.clientTop||0))};var F=function(e,t,r){const n=t.geometry.coordinates,o=r.geometry.coordinates;if(n[1]>O||n[1]<v||o[1]>O||o[1]<v)return null;const a={lng:(n[0]+o[0])/2,lat:(n[1]+o[1])/2};return{type:u.FEATURE,properties:{meta:h.MIDPOINT,parent:e,lng:a.lng,lat:a.lat,coord_path:r.properties.coord_path},geometry:{type:u.POINT,coordinates:[a.lng,a.lat]}}};var U=function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{type:o,coordinates:a}=t.geometry,s=t.properties&&t.properties.id;let i=[];function c(e,t){let n="",o=null;e.forEach((e,a)=>{const c=null!=t?"".concat(t,".").concat(a):String(a),p=R(s,e,c,l(c));if(r.midpoints&&o){const e=F(s,o,p);e&&i.push(e)}o=p;const u=JSON.stringify(e);n!==u&&i.push(p),0===a&&(n=u)})}function l(e){return!!r.selectedPaths&&-1!==r.selectedPaths.indexOf(e)}function p(){const n=o.replace(u.MULTI_PREFIX,"");a.forEach((o,a)=>{const s={type:u.FEATURE,properties:t.properties,geometry:{type:n,coordinates:o}};i=i.concat(e(s,r,a))})}return o===u.POINT?i.push(R(s,a,n,l(n))):o===u.POLYGON?a.forEach((e,t)=>{c(e,null!==n?"".concat(n,".").concat(t):String(t))}):o===u.LINE_STRING?c(a,n):0===o.indexOf(u.MULTI_PREFIX)&&p(),i};function B(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(let t=0,r=e.length;t<r;t++)this.add(e[t]),void 0!==e[t]&&("string"==typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}B.prototype.add=function(e){return this.has(e)||(this._length++,"string"==typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},B.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},B.prototype.has=function(e){return("string"==typeof e||"number"==typeof e)&&(void 0!==this._items[e]||void 0!==this._nums[e])},B.prototype.values=function(){const e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((e,t)=>e.v-t.v).map(e=>e.k)},B.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var G=B,D=r(613),V=r.n(D);const{LAT_MIN:q,LAT_MAX:z,LAT_RENDERED_MIN:W,LAT_RENDERED_MAX:K,LNG_MIN:J,LNG_MAX:Y}=n;var X=function(e,t){let r=q,n=z,o=q,a=z,s=Y,i=J;e.forEach(e=>{const t=V()(e),c=t[1],l=t[3],p=t[0],u=t[2];c>r&&(r=c),l<n&&(n=l),l>o&&(o=l),c<a&&(a=c),p<s&&(s=p),u>i&&(i=u)});const c=t;return r+c.lat>K&&(c.lat=K-r),o+c.lat>z&&(c.lat=z-o),n+c.lat<W&&(c.lat=W-n),a+c.lat<q&&(c.lat=q-a),s+c.lng<=J&&(c.lng+=360*Math.ceil(Math.abs(c.lng)/360)),i+c.lng>=Y&&(c.lng-=360*Math.ceil(Math.abs(c.lng)/360)),c},Z=function(e,t){const r=X(e.map(e=>e.toGeoJSON()),t);e.forEach(e=>{const t=e.getCoordinates(),n=e=>{const t={lng:e[0]+r.lng,lat:e[1]+r.lat};return[t.lng,t.lat]},o=e=>e.map(e=>n(e)),a=e=>e.map(e=>o(e));let s;e.type===u.POINT?s=n(t):e.type===u.LINE_STRING||e.type===u.MULTI_POINT?s=t.map(n):e.type===u.POLYGON||e.type===u.MULTI_LINE_STRING?s=t.map(o):e.type===u.MULTI_POLYGON&&(s=t.map(a)),e.incomingCoords(s)})};const Q={onSetup:function(e){console.log("Change mode: custom select");const t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(e=>void 0!==this.getFeature(e))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t},fireUpdate:function(){this.map.fire(m.UPDATE,{action:f.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})},fireActionable:function(){const e=this.getSelected(),t=e.filter(e=>this.isInstanceOf("MultiFeature",e));let r=!1;if(e.length>1){r=!0;const t=e[0].type.replace("Multi","");e.forEach(e=>{e.type.replace("Multi","")!==t&&(r=!1)})}const n=t.length>0,o=e.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:n,trash:o})},getUniqueIds:function(e){if(!e.length)return[];return e.map(e=>e.properties.id).filter(e=>void 0!==e).reduce((e,t)=>(e.add(t),e),new G).values()},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){T.enable(this)},onMouseMove:function(e){return this.stopExtendedInteractions(e)},onMouseOut:function(e){if(e.dragMoving)return this.fireUpdate()}};Q.onTap=Q.onClick=function(e,t){return C(t)?this.clickAnywhere(e,t):M(h.VERTEX)(t)?this.clickOnVertex(e,t):function(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&e.featureTarget.properties.meta===h.FEATURE)}(t)?this.clickOnFeature(e,t):void 0},Q.clickAnywhere=function(e){const t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(e=>this.doRender(e))),T.enable(this),this.stopExtendedInteractions(e)},Q.clickOnVertex=function(e,t){this.changeMode("custom_direct_select",{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:l.MOVE})},Q.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},Q.clickOnFeature=function(e,t){T.disable(this),this.stopExtendedInteractions(e);const r=w(t),n=this.getSelectedIds(),o=t.featureTarget.properties.id,a=this.isSelected(o);if(!r&&a&&this.getFeature(o).type!==u.POINT)return this.changeMode("custom_direct_select",{featureId:o});a&&r?(this.deselect(o),this.updateUIClasses({mouse:l.POINTER}),1===n.length&&T.enable(this)):!a&&r?(this.select(o),this.updateUIClasses({mouse:l.MOVE})):a||r||(n.forEach(e=>this.doRender(e)),this.setSelected(o),this.updateUIClasses({mouse:l.MOVE})),this.doRender(o)},Q.onMouseDown=function(e,t){return L(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&function(e){return!!e.originalEvent&&(!!e.originalEvent.shiftKey&&0===e.originalEvent.button)}(t)?this.startBoxSelect(e,t):void 0},Q.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=H(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},Q.onTouchStart=function(e,t){if(L(t))return this.startOnActiveFeature(e,t)},Q.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},Q.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:l.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(i.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));const r=H(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,r.x),o=Math.max(e.boxSelectStartLocation.x,r.x),a=Math.min(e.boxSelectStartLocation.y,r.y),s=Math.max(e.boxSelectStartLocation.y,r.y),c="translate(".concat(n,"px, ").concat(a,"px)");e.boxSelectElement.style.transform=c,e.boxSelectElement.style.WebkitTransform=c,e.boxSelectElement.style.width="".concat(o-n,"px"),e.boxSelectElement.style.height="".concat(s-a,"px")},Q.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};Z(this.getSelected(),r),e.dragMoveLocation=t.lngLat},Q.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){const r=[e.boxSelectStartLocation,H(t.originalEvent,this.map.getContainer())],n=this.featuresAt(null,r,"click"),o=this.getUniqueIds(n).filter(e=>!this.isSelected(e));o.length&&(this.select(o),o.forEach(e=>this.doRender(e)),this.updateUIClasses({mouse:l.MOVE}))}this.stopExtendedInteractions(e)},Q.toDisplayFeatures=function(e,t,r){t.properties.active=this.isSelected(t.properties.id)?g.ACTIVE:g.INACTIVE,r(t),this.fireActionable(),t.properties.active===g.ACTIVE&&t.geometry.type!==u.POINT&&U(t).forEach(r)},Q.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Q.onCombineFeatures=function(){const e=this.getSelected();if(0===e.length||e.length<2)return;const t=[],r=[],n=e[0].type.replace("Multi","");for(let o=0;o<e.length;o++){const a=e[o];if(a.type.replace("Multi","")!==n)return;a.type.includes("Multi")?a.getCoordinates().forEach(e=>{t.push(e)}):t.push(a.getCoordinates()),r.push(a.toGeoJSON())}if(r.length>1){const e=this.newFeature({type:u.FEATURE,properties:r[0].properties,geometry:{type:"Multi".concat(n),coordinates:t}});this.addFeature(e),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([e.id]),this.map.fire(m.COMBINE_FEATURES,{createdFeatures:[e.toGeoJSON()],deletedFeatures:r})}this.fireActionable()},Q.onUncombineFeatures=function(){const e=this.getSelected();if(0===e.length)return;const t=[],r=[];for(let n=0;n<e.length;n++){const o=e[n];this.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach(e=>{this.addFeature(e),e.properties=o.properties,t.push(e.toGeoJSON()),this.select([e.id])}),this.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))}t.length>1&&this.map.fire(m.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:r}),this.fireActionable()};var $=Q;var ee={getMatchingVertices:(e,t,r,n)=>{let o=[],a=e[0].toFixed(5),s=e[1].toFixed(5);for(var i=0;i<r.length;i++)if(r[i].id!==t)for(var c=0;c<r[i].geometry.coordinates.length;c++)for(var l=0;l<r[i].geometry.coordinates[c].length;l++)a===r[i].geometry.coordinates[c][l][0].toFixed(5)&&s===r[i].geometry.coordinates[c][l][1].toFixed(5)&&o.push({featureId:r[i].id,coord_path:c+"."+l,lng:r[i].geometry.coordinates[c][l][0],lat:r[i].geometry.coordinates[c][l][1]});return o},getDrawInstance:e=>{for(var t=e._controls.length-1;t>=0;t--)if(e._controls[t].options&&"custom_select"===e._controls[t].options.defaultMode)return e._controls[t];return null}};const te=M(h.VERTEX),re=M(h.MIDPOINT),ne={fireUpdate:function(){this.map.fire(m.UPDATE,{action:f.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);const r=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(r.coord_path);w(t)||-1!==n?w(t)&&-1===n&&e.selectedCoordPaths.push(r.coord_path):e.selectedCoordPaths=[r.coord_path];let o=ee.getDrawInstance(this.map).getAll(),a=ee.getMatchingVertices(t.featureTarget._geometry.coordinates,t.featureTarget.properties.parent,o.features,this.map);e.groupMove_vertices=a;for(let t=0;t<e.groupMove_vertices.length;t++)e.groupMove_vertices[t].feature=this.getFeature(e.groupMove_vertices[t].featureId);const s=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(s)},onMidpoint:function(e,t){this.startDragging(e,t);const r=t.featureTarget.properties;e.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),e.selectedCoordPaths=[r.coord_path]},pathsToCoordinates:function(e,t){return t.map(t=>({feature_id:e,coord_path:t}))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,r){Z(this.getSelected(),r),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,r){const n=e.selectedCoordPaths.map(t=>e.feature.getCoordinate(t)),o=n.map(e=>({type:u.FEATURE,properties:{},geometry:{type:u.POINT,coordinates:e}})),a=X(o,r);for(let t=0;t<n.length;t++){const r=n[t];e.feature.updateCoordinate(e.selectedCoordPaths[t],r[0]+a.lng,r[1]+a.lat);for(let t=0;t<e.groupMove_vertices.length;t++){let r=e.groupMove_vertices[t].coord_path.split(".");if(void 0!==r[0]&&void 0!==r[1]&&void 0!==e.groupMove_vertices[t].feature.coordinates[r[0]]&&void 0!==e.groupMove_vertices[t].feature.coordinates[r[0]][r[1]]){let n=e.groupMove_vertices[t].feature.coordinates[r[0]][r[1]];e.groupMove_vertices[t].feature.updateCoordinate(e.groupMove_vertices[t].coord_path,n[0]+a.lng,n[1]+a.lat)}}}},clickNoTarget:function(){this.changeMode("custom_select")},clickInactive:function(){this.changeMode("custom_select")},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){const t=e.featureId,r=this.getFeature(t);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===u.POINT)throw new TypeError("direct_select mode doesn't handle point features");const n={featureId:t,feature:r,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[],groupMove_vertices:e.groupMove_vertices?e.groupMove_vertices:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),T.disable(this),this.setActionableState({trash:!0}),n},onStop:function(){T.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,r){e.featureId===t.properties.id?(t.properties.active=g.ACTIVE,r(t),U(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(r)):(t.properties.active=g.INACTIVE,r(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort((e,t)=>t.localeCompare(e,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode("custom_select",{}))},onMouseMove:function(e,t){const r=L(t),n=te(t),o=0===e.selectedCoordPaths.length;r&&o||n&&!o?this.updateUIClasses({mouse:l.MOVE}):this.updateUIClasses({mouse:l.NONE}),this.stopDragging(e)},onMouseOut:function(e){e.dragMoving&&this.fireUpdate()}};ne.onTouchStart=ne.onMouseDown=function(e,t){return te(t)?this.onVertex(e,t):L(t)?this.onFeature(e,t):re(t)?this.onMidpoint(e,t):void 0},ne.onDrag=function(e,t){if(!0!==e.canDragMove)return;e.dragMoving=!0,t.originalEvent.stopPropagation();const r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,r):this.dragFeature(e,t,r),e.dragMoveLocation=t.lngLat},ne.onClick=function(e,t){return C(t)?this.clickNoTarget(e,t):L(t)?this.clickActiveFeature(e,t):E(t)?this.clickInactive(e,t):void this.stopDragging(e)},ne.onTap=function(e,t){return C(t)?this.clickNoTarget(e,t):L(t)?this.clickActiveFeature(e,t):E(t)?this.clickInactive(e,t):void 0},ne.onTouchEnd=ne.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var oe=ne,ae=r(331),se=r(40),ie=r(1);function ce(e){const t=Object(o.useRef)(null),r=Object(o.useRef)(null),n=Object(o.useContext)(se.b),a=Object(o.useRef)((e.idPrefix?e.idPrefix:"MlFeatureEditor-")+Object(ae.a)()),i=Object(o.useRef)(e.onChange),[c,l]=Object(o.useState)(!1),[p,u]=Object(o.useState)(!1),[d,m]=Object(o.useState)(!1),f=e=>{console.log("MlFeatureEditor mode change to "+e.mode)},h=()=>{m(Math.random())};return Object(o.useEffect)(()=>{let e=a.current;return()=>{t.current&&(t.current.cleanup(e),t.current=null)}},[]),Object(o.useEffect)(()=>{n.mapExists(e.mapId)&&n.getMap(e.mapId).style&&!c&&(t.current=n.getMap(e.mapId),l(!0),t.current&&t.current.style&&t.current.getSource("mapbox-gl-draw-cold")&&r.current&&void 0!==r.current.remove&&r.current.remove(),r.current=new s.a({displayControlsDefault:!1,defaultMode:e.mode||"custom_select",modes:Object.assign({custom_polygon:P,custom_select:$,custom_direct_select:oe},s.a.modes)}),t.current.on("draw.modechange",f,a.current),t.current.addControl(r.current,"top-left",a.current),t.current.on("mouseup",h,a.current),u(!0))},[n.map,n,e,c]),Object(o.useEffect)(()=>{r.current&&e.geojson&&e.geojson.geometry&&e.geojson.geometry.coordinates&&r.current.set({type:"FeatureCollection",features:[e.geojson]})},[e.geojson,p]),Object(o.useEffect)(()=>{if(r.current&&d){let e=r.current.getAll();"function"==typeof i.current&&i.current(e.features)}},[d]),Object(o.useEffect)(()=>{e.mode&&r.current&&r.current.changeMode(e.mode)},[e.mode]),Object(ie.jsx)(ie.Fragment,{})}ce.__docgenInfo={description:"",methods:[],displayName:"MlFeatureEditor"};var le=ce;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlFeatureEditor/MlFeatureEditor.js"]={name:"MlFeatureEditor",docgenInfo:ce.__docgenInfo,path:"src/components/MlFeatureEditor/MlFeatureEditor.js"});var pe=r(37);const ue={title:"MapComponents/MlFeatureEditor",component:le,argTypes:{},decorators:pe.a};t.default=ue;const de=e=>Object(ie.jsx)(le,{debug:!0,onChange:e=>{console.log(e)},...e}),me=de.bind({});me.args={mode:"custom_select",geojson:{type:"Feature",properties:{},geometry:{coordinates:[[[7.0904979943736635,50.73948334574527],[7.087554458473562,50.73827346433987],[7.093562913197076,50.73723639825727],[7.096294028980594,50.7387727842636],[7.0904979943736635,50.73948334574527]]],type:"Polygon"}}};const fe=de.bind({});fe.args={mode:"custom_select",geojson:{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[7.0904979943736635,50.73948334574527]}}};const he=de.bind({});he.args={mode:"simple_select",geojson:{type:"Feature",properties:{},geometry:{coordinates:[[7.0904979943736635,50.73948334574527],[7.087554458473562,50.73827346433987],[7.093562913197076,50.73723639825727],[7.096294028980594,50.7387727842636]],type:"LineString"}}};const ge=de.bind({});ge.args={mode:"custom_polygon"};const ye=de.bind({});ye.args={mode:"draw_point"};const be=de.bind({});be.args={mode:"draw_line_string"},me.parameters={storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"},...me.parameters},fe.parameters={storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"},...fe.parameters},he.parameters={storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"},...he.parameters},ge.parameters={storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"},...ge.parameters},ye.parameters={storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"},...ye.parameters},be.parameters={storySource:{source:"(args) => {\n  return (\n    <MlFeatureEditor\n      debug={true}\n      onChange={(features) => {\n        console.log(features);\n      }}\n      {...args}\n    />\n  );\n}"},...be.parameters}},1099:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return O}));var n=r(0),o=r(40),a=r(152),s=r.n(a),i=r(610);const c={street:["footway","street","road","street_name","residential","path","pedestrian","road_reference","road_reference_intl","square","place"],number:["house_number","street_number"],place:["city","village","hamlet","locality","croft","neighbourhood","suburb","city_district","district","quarter","borough","city_block","residential","commercial","industrial","houses","subdivision","allotments","postal_city","town","municipality","local_administrative_area"],zip:["postcode","partial_postcode"],state:["state","province","state_code"]};var l=e=>{const t=[];for(let r in c)c[r].some(r=>!!e.hasOwnProperty(r)&&(t.push(e[r]),!0));return t.join(", ")};const p=e=>{let t=96;return t/=25.4,96/25.4*e+"px"};var u=(e,t,r)=>{r(!0);const n=window.devicePixelRatio,o=document.createElement("div");o.className="hidden-map",document.body.appendChild(o);const a=document.createElement("div");a.style.width=p(210),a.style.height=p(297),o.appendChild(a);var c=new s.a.Map({container:a,center:e.getCenter(),zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1});let u=e.getStyle();for(let e in u.sources){let t=u.sources[e];Object.keys(t).forEach(e=>{t[e]||delete t[e]})}c.setStyle(u),c.once("idle",(function(){var e;const a=new i.a({orientation:"p",unit:"mm",compress:!0});Object.defineProperty(window,"devicePixelRatio",{get:function(){return 3.125}});const s=(t?l(t.address):"").split(","),p=[];p.length&&s.forEach(e=>{const t=e.match(/.{1,34}/g);p.push(...t)}),a.addImage(c.getCanvas().toDataURL("image/png"),"png",0,0,210,297,null,"FAST"),a.setFillColor("white"),a.rect(138,287,297,10,"F"),a.setFontSize(10),a.text("Datenquelle: © OpenStreetMap-Mitwirkende",140,a.internal.pageSize.height-3),a.setFillColor("white");const u=3.25*p.length+3+3+6.5+4+1;a.rect(2.5,2,66.5,u,"F"),a.setFontSize(10),a.text("Karten PDF:",6,5.5),a.rect(6,7,60,3.25*p.length+4+1),a.setFontSize(10),p.forEach((e,t)=>{a.text(e.trim(),8,10+3.5*t+2)}),a.addImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAACxCAMAAABnTAbVAAAC8VBMVEUAAAD/AACAAACqAFW/AECZMzOqK1W2JEm/IECqHDmzGk25F0aqFUCxJzu2JEmqIkSvIEC0HjyqHEeuG0OzGkC2GD2uI0axIUO1IECtHz2xHUWzHEKtG0CwGj6zIkS1IUKyHz60HkSvHUKxHECzHD6uG0OxIUGzIECuHz6wHkOyHkG0HUCwHD6xHEOzIUGvIECxHz6zH0KvHkGxHUCyHT+vHEKwHEGyIECzHz+wH0KxHkGzHkCwHT+xHUKyHEGvIECxHz+yH0KzHkGwHkCxHj+zHUKwHUGxHECyHz+wH0GxH0GyHkCwHj+xHUGyHUGzHUCwHz+xH0GyH0GwHkCxHj+yHkGwHUCxHUCyHT+wH0GxH0CxHkCyHj+wHkGxHkCyHUCwHT+xH0GyH0CwH0CxHj+yHkGwHkCxHUCxHT+yHUGwH0CxH0CyHj+wHkGxHkCyHkCwHT+xHUGxH0CyH0CxHz+xHkGyHkCwHkCxHj+yHUGwHUCxH0CwHkGxHkCxHkCyHj+xHUGxHUCyH0CwHz+xHkGyHkCwHkCxHj+xHkGwHUCxHUCxHz+yH0GxHkCyHj+wHkGxHUCxHUCwHz+xH0GxHkCyHkCxHj+xHkGyHkCxHUCxHT+yH0GwHkCxHkCxHj+wHkGxHkCxHkCyHT+xH0GxH0CyHkCxHj+xHkGxHkCwHkCxHT+xHUCwH0CxHkCxHj+yHkCxHkCxHkCyHj+xHUCxH0CxHkCwHj+xHkCxHkCwHkCxHj+xHkCyHUCxH0CxHj+xHkCxHkCxHkCxHj+wHkCxHUCxH0CyHj+xHkCxHkCyHkCxHj+xHkCxHUCxHz+xHkCwHkCxHkCxHj+yHkCxHkCxHkCxHkCxHkCxHkCxHj+xHkCwHkCxHT+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xH0CxHkCxHkCyHj+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xHkCxHkCxHkCxHj+xHkCxHkD///9g21WfAAAA+XRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyEiIyQlJicoKSorLC0uLzAxMjM0NTY3ODk6Ozw9Pj9AQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fn+AgYKDhIWGh4iJiouMjY6PkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc/Q0dLT1NXW19ja29zd3uDh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7v1AMKAAAAAWJLR0T61W0GSgAACWZJREFUGBnVwXlAVHUCB/DvmxkuD0QswFo3TcwzS0p01RVMpUytLKxMSVNpLUsLj7VDo7btsNTssrTMdAtWNjNbkyzF3EotwrXMI7XwAAxE5Jz5/rcaMMx782Z452/p84GV2na+ZmRqasrwxE4OtFRhI/+29SS9qn/86PGUKLQ4CW+X0p/n+xeTnGhB4v/NgIpXj3aihZhRyaCOPNYRwrW+KwkKmWxWTVYfiBRy49qzxW0hN5FaeLLiIUrv5UUkl0Au9iy1qXk1BgJIIzZ7eMG1kHuBmpVMkWCz0LQC1itzQkb6hTpsiYOdQmcfZ6M8yPWmLoWDYBsp9SCbZENuDPWpmgKbJO+mr9WQm0y95sEO8Zso9z7k7qJuj8JyzofPUeFjyA2nfvfDYl23089eyPWkfrXDYCXXI1X0Vy5BxllC/U50hHU676aqbpDLogEfoEFUR5g0qoTqJkJuAo0YjQZPpcIMab6bAayBXMgxGrDfiXrhBVnRMOyiTxhQkQtyGTTidjS4quZIEgzqfYRBjIFc2Pc0YCcaLWbdXyUY8acSBrMBCgPqqJ+nExpEniL/FQn9hpczKHdPKCyiAfeh0SMkf+wDvSbWsBlroCCtpX6volFkOcmzqdBntofN8QyGQkQudcuF12qe554DPWZRg70hUAjNoV6fwyuFv1nuhGYT3dRiDpRCVlCnHHiFlfM3m9tCo5trqUlFX/hJO0ddFqJJLut9HQ1NrquiRoc7wM/V31GPa9DkGTbIvwga9C+nZrlO+Al9opqabYWPqWy0NwbNuvQEdXgJKuI/oEaVfeFjFL32xaEZYV+yQeWBbVlZq15f9sp7W/YcrmYAS6AmOY9aeCbA13Vssv8SBPcazzuaPS/5Yvhy9bhtYfZxqlgiQU3SFg+bUzUJMtfTR0EUgpnK2s/n9oQ6qe+cT85R6SUnVPVYXsag9iVCLo2+dkQgsKv3zI9FUBGpuR7KbY6CulZ3bqplICfmhUHhWcpsdCGgi6FB16dOUeaHeATSbtyKI/Tn2TEtAn7yKLdSgkmt55ygr9M3I4ies9fkV7PJwXVTO0HFxbVUWAjTWj10kr7eikRQIb3vSJ8//5l5aSN7RyGAJ6nkuQXmRS1108eRZJgUeZp+yvvAAoP20od7VRxMeZEqDkXDAiFPuumjLCMExo3yUM2nLljhhhL6+iHVAYO6nqK6TFii05eU2ZfmhBHdf2YA7mRYIiybcnvTwqDbgJMM6Gh7WML5JhVOPvNH6CLNqmYQ62ENaSmVatbfFArNEvIoV7Phvmti2rXukrJgazXPmw6LLKa/4uUDHdAi/h8eylQtjoNX1H355JlOsIb0PtUUrhgTgeAcoza5KfddD8hIN37LjbBI+BdUV/HJI4NCEIBr2LKjVNrcFkquhypvh0UuOsCAzm5bktYnBHLRQx/d9Cv9veeCir550bBI3yoGVXv40xWZGdNT09LTH12yZmcR1X0VDlVtR8Aqc2mBXzrCdo7PaN44CHBZKc36CELMpUk1XSBE6EGa8xYEmUBT3L0giLSLZnwIYW6iGbdCGMdhGlcaAXHm07g3IVCHczRsHER6l0bVRkGk22jUTgjVpooGPQuxttCg8RDrARp0OcTqRWPKJYjlqqQh+RBtDw1ZD9FW0pDnIdqDNCQDoo2iIVMgWiINGQvRLqchwyBaFA35M0STamjEIAh3mkYMhnClNOJ6CHeGRqRCuCoakQ7RImhIJkSLoyFvQbSraMhWiDaWhhyFaDNpiKcdBFtOYwZCsG00ZjrEkoppzGsQqzsNyodY99CgukgI9TaNSoZIUiGNWgSREmjYfyDSszSsrj3EcRyjceMgTgpNWAlx1tGEYhdEiaygGddBlIdoyisQJKKQphx3QYxZNGk0hAj7mSblQIiZNKs2DgJEn6RpcyDACpr3kwu2S3TTAnfAbq58WmEP7PYYgzq1fdXf56anT5/ycOayNZ8WMaChsNeQWgZy4NXJie0hFzciY2MF1WyDrWJ/oaritfdchgAiRr18jP5ugI0cW6jCnZsWgaAcwzd6qPCdA/Z5mv4Ozr8EGvR4pZpyE2CbSR4qHU53QaP4LA99FbaDTW6po8L+iU7oMHg3fS2DPYZVUe50uhP6uBbWsom7P+xw7RnKrYuFfgMPsUl+KKw39FfKHEqBIW3Xs8lSWC61ijKrW8Egx1I2uQ0We8BNX1WzYMIsNxuVd4eVnIspc6gfTJnkZqP/RsM6l26nTG4UTHqAXl+1gVWGn6DMhnCYlkmvz8JhidDFHsqsdMICb9BrUxtY4M97KbdMghXCvqFXwWUwq+NaKjwHi3Qto1dhf5gSOruMCu9IsMqdbFI11wnDwmcepdLmEFhnHX18PQDGtM44Tj+72sBCl5yhD88/+0G/K18sor/CWFhqDuV2psfCq/UMNCdm9rdUU5cMa4V8TwVP/uszRicmJAyZ9m5ZJfCXpBAE4Lx2wWc1VLcQVhvHIN4DxrM0J2NwBBRikmdmlzCgrQ5YzbGfgaUA0k6eV1OQ8/y9qSMHJQy96e4HH389r5hBFcXBelMZ0DEngEQPdZsCG4T9zECewgUrqdcOCXZYyACqL8UFHYqoT21f2OJyD9WtQr1p1Oc52GQ3VXl6oZ6URz1OtYFNHqaqj9AovoI6LIBd/kBVQ+E1m9qVRMI2P1LFDjRx5FGzx2GfN+nPMxA+OpVQo7L2sM9k+suGzHhq9AJs1Jl+arpBbhW1uRJ2KqXSMii0LqAWu2Crb6hQGgOlrr9Sgxmw1ftUSIe/MR42q7I9bPU05bZLUPEEm5UDe02jTGU3qJHWsjn3wl7jKbMA6iK+YjO6wF430te3IQgg9hCDOgCbJdNH+RUIqMtxBvMybDaAPiYhiH5lDOJW2Kwfm7yBoJIqGFhX2CyJXgURCG74OQZS4YDNxrJR6RVozohKBrAHdpvEBjUj0LyUCqpbDbvdzwaTocWQUqqaB7stYr1MaJNQRDV3wG7v8DdrJGjU7SBVXA+7fcELPgyFZh2+oL/+sJmjjOd9HAYdWuXQzxWwWS+e92EodJEWeagQA5tNJ7khFHrdUk65cNgsh8wOhX4991GmFewVVs7nHTAiYil9tYO9Uuruh1F3n2GTONjr6dEwrnMevfrBXrEwwzGvig3GomXrvoP1HkQLJ6WV8II30OJ1XO0huQu/AwN3k5Vh+B1wpP3EIfhdCE2fhv+X/wF/AO+L9vuzfwAAAABJRU5ErkJggg==","png",5,12+3*p.length+4,3,3,null,"FAST"),a.setFontSize(10),a.text("wheregroup.com",40,12+3.25*p.length+4+1),a.setProperties({title:"Map export",subject:"Map export",creator:"WhereGroup GmbH",author:"(c)WhereGroup GmbH, (c)OpenStreetMap"}),a.save("Map.pdf"),c.remove(),null===(e=o.parentNode)||void 0===e||e.removeChild(o),Object.defineProperty(window,"devicePixelRatio",{get:function(){return n}}),r(!1)}))},d=r(611),m=r.n(d),f=r(210),h=r(1);const g=e=>{const t=Object(n.useContext)(o.b),r=Object(n.useRef)(!1),a=Object(n.useRef)(void 0);return Object(n.useEffect)(()=>{t.mapExists(e.mapId)&&!r.current&&(r.current=!0,a.current=t.getMap(e.mapId))},[t.mapIds,t,e.mapId]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(f.a,{color:"primary",variant:"contained",onClick:()=>{u(a.current,null,()=>{})},children:Object(h.jsx)(m.a,{})})})};g.defaultProps={mapId:void 0},g.__docgenInfo={description:"Renders a button that will create a PDF version of the current map view (dimensions adjusted to fit Din A4 Paper).\n\n@component",methods:[],displayName:"MlCreatePdfButton",props:{mapId:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"}}};var y=g;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlCreatePdfButton/MlCreatePdfButton.js"]={name:"MlCreatePdfButton",docgenInfo:g.__docgenInfo,path:"src/components/MlCreatePdfButton/MlCreatePdfButton.js"});var b=r(86),v=r(37);const x={title:"MapComponents/MlCreatePdfButton",component:y,argTypes:{options:{control:{type:"object"}}},decorators:v.a};t.default=x;const O=(e=>Object(h.jsx)(b.a,{children:Object(h.jsx)(y,{})})).bind({});O.parameters={storySource:{source:"(args) => (\n  <TopToolbar>\n    <MlCreatePdfButton />\n  </TopToolbar>\n)"},...O.parameters}},1100:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return R}));var n=r(0),o=r(107),a=(r(1078),r(1079),r(1080),r(1081),r(1206)),s=r(1210),i=r(1211),c=r(1200),l=r(645),p=r(40),u=r(206),d=r(157),m=r(1199),f=r(1209),h=r(617),g=r.n(h),y=r(1);const b=e=>{const[t,r]=Object(n.useState)("loading");Object(n.useEffect)(()=>{e.src?fetch(e.src).then(e=>{let{ok:t}=e;r(t?"ready":"error")}).catch(e=>{console.error(e),r("error")}):r("error")},[e.src]);const o={width:"100%",height:"100%",border:2,borderRadius:"8px",textAlign:"center",display:"flex"},a=()=>Object(y.jsx)(m.a,{className:e.className,sx:{...o,...e.style},children:Object(y.jsx)(f.a,{})}),s=()=>Object(y.jsx)("img",{className:e.className,style:{...o,...e.style},src:e.src,alt:e.alt||""}),i=()=>Object(y.jsx)(m.a,{className:e.className,sx:{boxStyle:o,...e.style},children:Object(y.jsx)(g.a,{sx:{display:"block",margin:"auto"}})});return Object(y.jsx)(y.Fragment,{children:(e=>{switch(e){case"ready":return Object(y.jsx)(s,{});case"error":return Object(y.jsx)(i,{});default:return Object(y.jsx)(a,{})}})(t)})};b.__docgenInfo={description:"",methods:[],displayName:"ImageLoader"};var v=b;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui_components/ImageLoader.js"]={name:"ImageLoader",docgenInfo:b.__docgenInfo,path:"src/ui_components/ImageLoader.js"});var x,O=r(68);const j=e=>{var t;const{layers:r}=Object(O.a)({mapId:e.mapId,watch:{viewport:!1,layers:!0,sources:!1},filter:{matchLayerIds:e.layerId}}),n=Object(d.a)(x||(x=Object(u.a)(["\n    & img:hover {\n    }\n  "])));return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(m.a,{className:n,sx:{width:"40px",height:"53px",justifyContent:"center",py:.25,px:"1rem",cursor:"pointer"},onClick:()=>{var t;null==e||null===(t=e.handleLayerBoxClick)||void 0===t||t.call(e,e.layerId)},children:[Object(y.jsx)(v,{style:{border:"2px solid "+(null!=r&&null!==(t=r[0])&&void 0!==t&&t.visible?"#64c864":"#fd720f"),borderRadius:"8px",height:"40px",width:"40px"},src:e.thumbnail}),Object(y.jsx)("div",{className:"mllayerswitcher-layer-text",style:{textAlign:"center",color:"rgb(112, 117, 122)",fontFamily:"Roboto, Arial",width:"40px",fontSize:"0.60rem"},children:e.label})]},e.layerId)})};j.__docgenInfo={description:"@component",methods:[],displayName:"LayerBox"};var S=j;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlLayerSwitcher/components/LayerBox.js"]={name:"LayerBox",docgenInfo:j.__docgenInfo,path:"src/components/MlLayerSwitcher/components/LayerBox.js"});var M=r(1141);const L=e=>{var t,r,o,u;const d=Object(n.useContext)(p.b),m=!(null===(t=e.baseSourceConfig)||void 0===t||null===(r=t.layers)||void 0===r||!r.length),f=!(null===(o=e.detailLayerConfig)||void 0===o||null===(u=o.layers)||void 0===u||!u.length),{layers:h}=Object(O.a)({mapId:e.mapId,watch:{viewport:!1,layers:!0,sources:!1},filter:{}}),[g,b]=Object(n.useState)([]),[v,x]=Object(n.useState)([]),{t:j}=Object(a.a)();Object(n.useEffect)(()=>{if(d.map){const t=(e,t)=>{const r=L(e.layerId),n=0===t?"visible":"none";r.forEach(e=>{e&&C(e,n)})};e.baseSourceConfig.layers.forEach((e,r)=>t(e,r)),e.detailLayerConfig.layers.forEach((e,r)=>t(e,r))}return()=>{}},[d.map]),Object(n.useEffect)(()=>{var t,r;if(null!==(t=d.map)&&void 0!==t&&null!==(r=t.style)&&void 0!==r&&r._layers){let t=[],r=[];e.baseSourceConfig.layers.forEach(e=>{L(e.layerId).forEach(e=>{var r;const n=null===(r=d.map)||void 0===r?void 0:r.getLayoutProperty(e,"visibility");-1!==d.map.baseLayers.indexOf(e)&&(e="styleBase"),-1===t.indexOf(e)&&"visible"===n&&t.push(e)})}),e.detailLayerConfig.layers.forEach(e=>{var t;let{layerId:n}=e;const o=null===(t=d.map)||void 0===t?void 0:t.getLayoutProperty(n,"visibility");-1===r.indexOf(n)&&"visible"===o&&r.push(n)}),b(t),x(r)}},[h]);const L=e=>"styleBase"===e?null==d?void 0:d.map.baseLayers:[e],E=t=>{var r;let n=L(t);const o="visible"===(null==d||null===(r=d.map.getLayer(n[0]))||void 0===r?void 0:r.getLayoutProperty("visibility"))?"none":"visible";e.baseSourceConfig.layers.forEach((e,r)=>{let n=L(e.layerId),a="none";e.layerId===t&&(a=o),"none"===o&&0===r&&(a="visible"),n.forEach(e=>{e&&C(e,a)})})},C=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";null===(t=d.map)||void 0===t||t.setLayoutProperty(e,"visibility",r)};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(s.a,{sx:{zIndex:101,position:"absolute",minWidth:"200px"},children:[Object(y.jsxs)(i.a,{children:[m&&Object(y.jsxs)(c.a,{sx:{minHeight:"150px"},children:[Object(y.jsx)(l.a,{variant:"h6",children:j(e.baseSourceConfig.label||"Map type")}),Object(y.jsx)(M.a,{}),Object(y.jsx)(c.a,{sx:{display:"flex",paddingTop:"1rem"},children:e.baseSourceConfig.layers.map(t=>{let{src:r,label:n,layerId:o}=t;return Object(y.jsx)(S,{mapId:e.mapId,activeLayers:g,label:j(n),layerId:o,thumbnail:r,handleLayerBoxClick:()=>{E(o)}},o)})})]}),f&&Object(y.jsxs)(c.a,{sx:{minHeight:"150px"},children:[Object(y.jsx)(l.a,{variant:"h6",children:j("Map details")}),Object(y.jsx)(M.a,{}),Object(y.jsx)(c.a,{sx:{display:"flex",paddingTop:"1rem"},children:e.detailLayerConfig.layers.map(t=>{let{src:r,label:n,layerId:o}=t;return Object(y.jsx)(S,{mapId:e.mapId,activeLayers:v,label:j(n),layerId:o,thumbnail:r,handleLayerBoxClick:()=>{(t=>{var r;const n=e.detailLayerConfig.layers.find(e=>e.layerId===t);n.linkedTo&&E(n.linkedTo);const o="visible"===(null==d||null===(r=d.map.getLayer(t))||void 0===r?void 0:r.getLayoutProperty("visibility"))?"none":"visible";C(t,o)})(o)}},o)})})]})]})," "]})})};L.__docgenInfo={description:"@component",methods:[],displayName:"MlLayerSwitcher",props:{baseSourceConfig:{type:{name:"shape",value:{label:{name:"string",required:!1},layers:{name:"arrayOf",value:{name:"shape",value:{layerId:{name:"string",required:!0},src:{name:"string",required:!1},label:{name:"string",required:!0}}},required:!1}}},required:!1,description:""},detailLayerConfig:{type:{name:"shape",value:{label:{name:"string",required:!1},layers:{name:"arrayOf",value:{name:"shape",value:{layerId:{name:"string",required:!0},src:{name:"string",required:!1},label:{name:"string",required:!0},linkedTo:{name:"string",required:!1}}},required:!1}}},required:!1,description:""},mapId:{type:{name:"string"},required:!1,description:""}}};var E=L;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlLayerSwitcher/MlLayerSwitcher.js"]={name:"MlLayerSwitcher",docgenInfo:L.__docgenInfo,path:"src/components/MlLayerSwitcher/MlLayerSwitcher.js"});var C=r(78),I=r(37),w=r(621),T=r(622);const _={title:"MapComponents/MlLayerSwitcher",component:E,argTypes:{url:{},layer:{}},decorators:I.a};t.default=_;const R=(e=>Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(o.a,{url:e.url,urlParameters:{layers:e.layer},sourceOptions:e.sourceOptions,layerId:"historic",visible:e.layerVisible}),Object(y.jsx)(o.a,{url:e.url2,urlParameters:{layers:e.layer2},sourceOptions:e.sourceOptions,layerId:e.layer2,visible:e.layer2Visible}),Object(y.jsx)(C.a,{type:"line",layout:{visibility:e.geojsonLayerVisible?"visible":"none"},geojson:w,layerId:"geojson1"}),Object(y.jsx)(C.a,{type:"line",layout:{visibility:e.geojson2LayerVisible?"visible":"none"},geojson:T,layerId:"geojson2"}),Object(y.jsx)(E,{baseSourceConfig:{active:e.baseSourcesActive,layers:e.layers},detailLayerConfig:e.detailLayerConfig}),";"]})).bind({});R.parameters={},R.args={url:"https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme",layer:"nw_uraufnahme_rw",layerVisible:!0,url2:"https://www.wms.nrw.de/geobasis/wms_nw_dop",layer2:"WMS_NW_DOP",layer2Visible:!1,geojsonLayerVisible:!0,geojson2LayerVisible:!0,sourceOptions:{minzoom:13,maxzoom:20},baseSourcesActive:!0,layers:[{label:"Historic",layerId:"historic",src:"assets/historic.png"},{label:"Straßenkarte",layerId:"styleBase",src:"assets/osm.png"},{label:"DOP",layerId:"WMS_NW_DOP",src:"assets/dop.png"}],detailLayerConfig:{layers:[{label:"GeoJson 1",layerId:"geojson1",src:"assets/historic.png",active:!0}]}},R.parameters={storySource:{source:'(args) => {\n  return (\n    <>\n      <MlWmsLayer\n        url={args.url}\n        urlParameters={{ layers: args.layer }}\n        sourceOptions={args.sourceOptions}\n        layerId="historic"\n        visible={args.layerVisible}\n      />\n      <MlWmsLayer\n        url={args.url2}\n        urlParameters={{ layers: args.layer2 }}\n        sourceOptions={args.sourceOptions}\n        layerId={args.layer2}\n        visible={args.layer2Visible}\n      />\n      <MlGeoJsonLayer\n        type="line"\n        layout={{ visibility: args.geojsonLayerVisible ? "visible" : "none" }}\n        geojson={sample_geojson_1}\n        layerId="geojson1"\n      />\n      <MlGeoJsonLayer\n        type="line"\n        layout={{ visibility: args.geojson2LayerVisible ? "visible" : "none" }}\n        geojson={sample_geojson_2}\n        layerId="geojson2"\n      />\n      <MlLayerSwitcher\n        baseSourceConfig={{\n          active: args.baseSourcesActive,\n          layers: args.layers,\n        }}\n        detailLayerConfig={args.detailLayerConfig}\n      />\n      ;\n    </>\n  );\n}'},...R.parameters}},1101:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return ve}));var n=r(0),o=r.n(n),a=r(86),s=r(40),i=r(210),c=r(152),l=r.n(c),p=r(6);class u extends p.A{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new g(e)})),this.register((function(e){return new j(e)})),this.register((function(e){return new S(e)})),this.register((function(e){return new y(e)})),this.register((function(e){return new b(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new x(e)})),this.register((function(e){return new O(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new M(e)}))}load(e,t,r,n){const o=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:p.B.extractUrlBase(e),this.manager.itemStart(e);const s=function(t){n?n(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},i=new p.k(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(r){try{o.parse(r,a,(function(r){t(r),o.manager.itemEnd(e)}),s)}catch(e){s(e)}}),r,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,n){let o;const a={},s={};if("string"==typeof e)o=e;else{if(p.B.decodeText(new Uint8Array(e,0,4))===L){try{a[m.KHR_BINARY_GLTF]=new I(e)}catch(e){return void(n&&n(e))}o=a[m.KHR_BINARY_GLTF].content}else o=p.B.decodeText(new Uint8Array(e))}const i=JSON.parse(o);if(void 0===i.asset||i.asset.version[0]<2)return void(n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new se(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](c);s[t.name]=t,a[t.name]=!0}if(i.extensionsUsed)for(let e=0;e<i.extensionsUsed.length;++e){const t=i.extensionsUsed[e],r=i.extensionsRequired||[];switch(t){case m.KHR_MATERIALS_UNLIT:a[t]=new h;break;case m.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[t]=new R;break;case m.KHR_DRACO_MESH_COMPRESSION:a[t]=new w(i,this.dracoLoader);break;case m.KHR_TEXTURE_TRANSFORM:a[t]=new T;break;case m.KHR_MESH_QUANTIZATION:a[t]=new A;break;default:r.indexOf(t)>=0&&void 0===s[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}c.setExtensions(a),c.setPlugins(s),c.parse(r,n)}parseAsync(e,t){const r=this;return new Promise((function(n,o){r.parse(e,t,n,o)}))}}function d(){let e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const m={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class f{constructor(e){this.parser=e,this.name=m.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,n=t.length;r<n;r++){const n=t[r];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let n=t.cache.get(r);if(n)return n;const o=t.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let s;const i=new p.h(16777215);void 0!==a.color&&i.fromArray(a.color);const c=void 0!==a.range?a.range:0;switch(a.type){case"directional":s=new p.i(i),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new p.R(i),s.distance=c;break;case"spot":s=new p.cb(i),s.distance=c,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,s.angle=a.spot.outerConeAngle,s.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return s.position.set(0,0,0),s.decay=2,void 0!==a.intensity&&(s.intensity=a.intensity),s.name=t.createUniqueName(a.name||"light_"+e),n=Promise.resolve(s),t.cache.add(r,n),n}createNodeAttachment(e){const t=this,r=this.parser,n=r.json.nodes[e],o=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===o?null:this._loadLight(o).then((function(e){return r._getNodeRef(t.cache,o,e)}))}}class h{constructor(){this.name=m.KHR_MATERIALS_UNLIT}getMaterialType(){return p.G}extendParams(e,t,r){const n=[];e.color=new p.h(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const t=o.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==o.baseColorTexture&&n.push(r.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(n)}}class g{constructor(e){this.parser=e,this.name=m.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p.H:null}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[],a=n.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(r.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(r.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(r.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new p.ib(e,e)}return Promise.all(o)}}class y{constructor(e){this.parser=e,this.name=m.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p.H:null}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new p.h(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=n.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&o.push(r.assignTexture(t,"sheenColorMap",a.sheenColorTexture)),void 0!==a.sheenRoughnessTexture&&o.push(r.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(o)}}class b{constructor(e){this.parser=e,this.name=m.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p.H:null}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[],a=n.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&o.push(r.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(o)}}class v{constructor(e){this.parser=e,this.name=m.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p.H:null}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[],a=n.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&o.push(r.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const s=a.attenuationColor||[1,1,1];return t.attenuationColor=new p.h(s[0],s[1],s[2]),Promise.all(o)}}class x{constructor(e){this.parser=e,this.name=m.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p.H:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class O{constructor(e){this.parser=e,this.name=m.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?p.H:null}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const o=[],a=n.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&o.push(r.assignTexture(t,"specularIntensityMap",a.specularTexture));const s=a.specularColorFactor||[1,1,1];return t.specularColor=new p.h(s[0],s[1],s[2]),void 0!==a.specularColorTexture&&o.push(r.assignTexture(t,"specularColorMap",a.specularColorTexture).then((function(e){e.encoding=p.mb}))),Promise.all(o)}}class j{constructor(e){this.parser=e,this.name=m.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const o=n.extensions[this.name],a=r.images[o.source],s=t.options.ktx2Loader;if(!s){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,s)}}class S{constructor(e){this.parser=e,this.name=m.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,n=r.json,o=n.textures[e];if(!o.extensions||!o.extensions[t])return null;const a=o.extensions[t],s=n.images[a.source];let i=r.textureLoader;if(s.uri){const e=r.options.manager.getHandler(s.uri);null!==e&&(i=e)}return this.detectSupport().then((function(o){if(o)return r.loadTextureImage(e,s,i);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class M{constructor(e){this.name=m.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const e=r.extensions[this.name],n=this.parser.getDependency("buffer",e.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([n,o.ready]).then((function(t){const r=e.byteOffset||0,n=e.byteLength||0,a=e.count,s=e.byteStride,i=new ArrayBuffer(a*s),c=new Uint8Array(t[0],r,n);return o.decodeGltfBuffer(new Uint8Array(i),a,s,c,e.mode,e.filter),i}))}return null}}const L="glTF",E=1313821514,C=5130562;class I{constructor(e){this.name=m.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:p.B.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==L)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,n=new DataView(e,12);let o=0;for(;o<r;){const t=n.getUint32(o,!0);o+=4;const r=n.getUint32(o,!0);if(o+=4,r===E){const r=new Uint8Array(e,12+o,t);this.content=p.B.decodeText(r)}else if(r===C){const r=12+o;this.body=e.slice(r,r+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class w{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=m.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,n=this.dracoLoader,o=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},i={},c={};for(const e in a){const t=J[e]||e.toLowerCase();s[t]=a[e]}for(const t in e.attributes){const n=J[t]||t.toLowerCase();if(void 0!==a[t]){const o=r.accessors[e.attributes[t]],a=q[o.componentType];c[n]=a,i[n]=!0===o.normalized}}return t.getDependency("bufferView",o).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(const t in e.attributes){const r=e.attributes[t],n=i[t];void 0!==n&&(r.normalized=n)}t(e)}),s,c)}))}))}}class T{constructor(){this.name=m.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class _ extends p.I{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),r=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new p.h).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(const t in s)e.uniforms[t]=s[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",n).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class R{constructor(){this.name=m.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return _}extendParams(e,t,r){const n=t.extensions[this.name];e.color=new p.h(1,1,1),e.opacity=1;const o=[];if(Array.isArray(n.diffuseFactor)){const t=n.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==n.diffuseTexture&&o.push(r.assignTexture(e,"map",n.diffuseTexture)),e.emissive=new p.h(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new p.h(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){const t=n.specularGlossinessTexture;o.push(r.assignTexture(e,"glossinessMap",t)),o.push(r.assignTexture(e,"specularMap",t))}return Promise.all(o)}createMaterial(e){const t=new _(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=p.db,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class A{constructor(){this.name=m.KHR_MESH_QUANTIZATION}}class P extends p.q{constructor(e,t,r,n){super(e,t,r,n)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,o=e*n*3+n;for(let e=0;e!==n;e++)t[e]=r[o+e];return t}}P.prototype.beforeStart_=P.prototype.copySampleValue_,P.prototype.afterEnd_=P.prototype.copySampleValue_,P.prototype.interpolate_=function(e,t,r,n){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,i=2*s,c=3*s,l=n-t,p=(r-t)/l,u=p*p,d=u*p,m=e*c,f=m-c,h=-2*d+3*u,g=d-u,y=1-h,b=g-u+p;for(let e=0;e!==s;e++){const t=a[f+e+s],r=a[f+e+i]*l,n=a[m+e+s],c=a[m+e]*l;o[e]=y*t+b*r+h*n+g*c}return o};const k=new p.V;class N extends P{interpolate_(e,t,r,n){const o=super.interpolate_(e,t,r,n);return k.fromArray(o).normalize().toArray(o),o}}const H=0,F=1,U=2,B=3,G=4,D=5,V=6,q={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},z={9728:p.K,9729:p.x,9984:p.M,9985:p.z,9986:p.L,9987:p.y},W={33071:p.g,33648:p.J,10497:p.X},K={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},J={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Y={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},X={CUBICSPLINE:void 0,LINEAR:p.s,STEP:p.r},Z="OPAQUE",Q="MASK",$="BLEND";function ee(e,t,r){for(const n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function te(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function re(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(let t=0,n=r.length;t<n;t++)e.morphTargetDictionary[r[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ne(e){const t=e.extensions&&e.extensions[m.KHR_DRACO_MESH_COMPRESSION];let r;return r=t?"draco:"+t.bufferView+":"+t.indices+":"+oe(t.attributes):e.indices+":"+oe(e.attributes)+":"+e.mode,r}function oe(e){let t="";const r=Object.keys(e).sort();for(let n=0,o=r.length;n<o;n++)t+=r[n]+":"+e[r[n]]+";";return t}function ae(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class se{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new d,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.textureLoader=new p.n(this.options.manager):this.textureLoader=new p.fb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new p.k(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,n=this.json,o=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])})).then((function(t){const a={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};ee(o,a,n),te(a,n),Promise.all(r._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let r=0,n=t.length;r<n;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let t=0,n=e.length;t<n;t++){const n=e[t];void 0!==n.mesh&&(this._addNodeRef(this.meshCache,n.mesh),void 0!==n.skin&&(r[n.mesh].isSkinnedMesh=!0)),void 0!==n.camera&&this._addNodeRef(this.cameraCache,n.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const n=r.clone(),o=(e,t)=>{const r=this.associations.get(e);null!=r&&this.associations.set(t,r);for(const[r,n]of e.children.entries())o(n,t.children[r])};return o(r,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const n=e(t[r]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let n=0;n<t.length;n++){const o=e(t[n]);o&&r.push(o)}return r}getDependency(e,t){const r=e+":"+t;let n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return r.getDependency(e,n)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[m.KHR_BINARY_GLTF].body);const n=this.options;return new Promise((function(e,o){r.load(p.B.resolveURL(t.uri,n.path),e,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)}))}loadAccessor(e){const t=this,r=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);const o=[];return void 0!==n.bufferView?o.push(this.getDependency("bufferView",n.bufferView)):o.push(null),void 0!==n.sparse&&(o.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(o).then((function(e){const o=e[0],a=K[n.type],s=q[n.componentType],i=s.BYTES_PER_ELEMENT,c=i*a,l=n.byteOffset||0,u=void 0!==n.bufferView?r.bufferViews[n.bufferView].byteStride:void 0,d=!0===n.normalized;let m,f;if(u&&u!==c){const e=Math.floor(l/u),r="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+e+":"+n.count;let c=t.cache.get(r);c||(m=new s(o,e*u,n.count*u/i),c=new p.o(m,u/i),t.cache.add(r,c)),f=new p.p(c,a,l%u/i,d)}else m=null===o?new s(n.count*a):new s(o,l,n.count*a),f=new p.d(m,a,d);if(void 0!==n.sparse){const t=K.SCALAR,r=q[n.sparse.indices.componentType],i=n.sparse.indices.byteOffset||0,c=n.sparse.values.byteOffset||0,l=new r(e[1],i,n.sparse.count*t),u=new s(e[2],c,n.sparse.count*a);null!==o&&(f=new p.d(f.array.slice(),f.itemSize,f.normalized));for(let e=0,t=l.length;e<t;e++){const t=l[e];if(f.setX(t,u[e*a]),a>=2&&f.setY(t,u[e*a+1]),a>=3&&f.setZ(t,u[e*a+2]),a>=4&&f.setW(t,u[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse THREE.BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,r=this.options,n=t.textures[e],o=t.images[n.source];let a=this.textureLoader;if(o.uri){const e=r.manager.getHandler(o.uri);null!==e&&(a=e)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,r){const n=this,o=this.json,a=this.options,s=o.textures[e],i=(t.uri||t.bufferView)+":"+s.sampler;if(this.textureCache[i])return this.textureCache[i];const c=this.URL||this.webkitURL;let l=t.uri||"",u=!1;if(void 0!==t.bufferView)l=n.getDependency("bufferView",t.bufferView).then((function(e){u=!0;const r=new Blob([e],{type:t.mimeType});return l=c.createObjectURL(r),l}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then((function(e){return new Promise((function(t,n){let o=t;!0===r.isImageBitmapLoader&&(o=function(e){const r=new p.eb(e);r.needsUpdate=!0,t(r)}),r.load(p.B.resolveURL(e,a.path),o,void 0,n)}))})).then((function(t){!0===u&&c.revokeObjectURL(l),t.flipY=!1,s.name&&(t.name=s.name);const r=(o.samplers||{})[s.sampler]||{};return t.magFilter=z[r.magFilter]||p.x,t.minFilter=z[r.minFilter]||p.y,t.wrapS=W[r.wrapS]||p.X,t.wrapT=W[r.wrapT]||p.X,n.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",l),null}));return this.textureCache[i]=d,d}assignTexture(e,t,r){const n=this;return this.getDependency("texture",r.index).then((function(o){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),n.extensions[m.KHR_TEXTURE_TRANSFORM]){const e=void 0!==r.extensions?r.extensions[m.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=n.associations.get(o);o=n.extensions[m.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),n.associations.set(o,t)}}return e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const n=void 0===t.attributes.tangent,o=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+r.uuid;let t=this.cache.get(e);t||(t=new p.T,p.C.prototype.copy.call(t,r),t.color.copy(r.color),t.map=r.map,t.sizeAttenuation=!1,this.cache.add(e,t)),r=t}else if(e.isLine){const e="LineBasicMaterial:"+r.uuid;let t=this.cache.get(e);t||(t=new p.u,p.C.prototype.copy.call(t,r),t.color.copy(r.color),this.cache.add(e,t)),r=t}if(n||o||a){let e="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),n&&(e+="derivative-tangents:"),o&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=r.clone(),o&&(t.vertexColors=!0),a&&(t.flatShading=!0),n&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(r))),r=t}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return p.I}loadMaterial(e){const t=this,r=this.json,n=this.extensions,o=r.materials[e];let a;const s={},i=o.extensions||{},c=[];if(i[m.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=n[m.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=e.getMaterialType(),c.push(e.extendParams(s,o,t))}else if(i[m.KHR_MATERIALS_UNLIT]){const e=n[m.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),c.push(e.extendParams(s,o,t))}else{const r=o.pbrMetallicRoughness||{};if(s.color=new p.h(1,1,1),s.opacity=1,Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;s.color.fromArray(e),s.opacity=e[3]}void 0!==r.baseColorTexture&&c.push(t.assignTexture(s,"map",r.baseColorTexture)),s.metalness=void 0!==r.metallicFactor?r.metallicFactor:1,s.roughness=void 0!==r.roughnessFactor?r.roughnessFactor:1,void 0!==r.metallicRoughnessTexture&&(c.push(t.assignTexture(s,"metalnessMap",r.metallicRoughnessTexture)),c.push(t.assignTexture(s,"roughnessMap",r.metallicRoughnessTexture))),a=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),c.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===o.doubleSided&&(s.side=p.j);const l=o.alphaMode||Z;if(l===$?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,l===Q&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&a!==p.G&&(c.push(t.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new p.ib(1,1),void 0!==o.normalTexture.scale)){const e=o.normalTexture.scale;s.normalScale.set(e,e)}return void 0!==o.occlusionTexture&&a!==p.G&&(c.push(t.assignTexture(s,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(s.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&a!==p.G&&(s.emissive=(new p.h).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&a!==p.G&&c.push(t.assignTexture(s,"emissiveMap",o.emissiveTexture)),Promise.all(c).then((function(){let r;return r=a===_?n[m.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new a(s),o.name&&(r.name=o.name),r.map&&(r.map.encoding=p.mb),r.emissiveMap&&(r.emissiveMap.encoding=p.mb),te(r,o),t.associations.set(r,{materials:e}),o.extensions&&ee(n,r,o),r}))}createUniqueName(e){const t=p.U.sanitizeNodeName(e||"");let r=t;for(let e=1;this.nodeNamesUsed[r];++e)r=t+"_"+e;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,n=this.primitiveCache;function o(e){return r[m.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(r){return ce(r,e,t)}))}const a=[];for(let r=0,s=e.length;r<s;r++){const s=e[r],i=ne(s),c=n[i];if(c)a.push(c.promise);else{let e;e=s.extensions&&s.extensions[m.KHR_DRACO_MESH_COMPRESSION]?o(s):ce(new p.e,s,t),n[i]={primitive:s,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,r=this.json,n=this.extensions,o=r.meshes[e],a=o.primitives,s=[];for(let e=0,t=a.length;e<t;e++){const t=void 0===a[e].material?(void 0===(i=this.cache).DefaultMaterial&&(i.DefaultMaterial=new p.I({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:p.l})),i.DefaultMaterial):this.getDependency("material",a[e].material);s.push(t)}var i;return s.push(t.loadGeometries(a)),Promise.all(s).then((function(r){const s=r.slice(0,r.length-1),i=r[r.length-1],c=[];for(let r=0,l=i.length;r<l;r++){const l=i[r],u=a[r];let d;const m=s[r];if(u.mode===G||u.mode===D||u.mode===V||void 0===u.mode)d=!0===o.isSkinnedMesh?new p.ab(l,m):new p.F(l,m),!0!==d.isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),u.mode===D?d.geometry=le(d.geometry,p.hb):u.mode===V&&(d.geometry=le(d.geometry,p.gb));else if(u.mode===F)d=new p.w(l,m);else if(u.mode===B)d=new p.t(l,m);else if(u.mode===U)d=new p.v(l,m);else{if(u.mode!==H)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);d=new p.S(l,m)}Object.keys(d.geometry.morphAttributes).length>0&&re(d,o),d.name=t.createUniqueName(o.name||"mesh_"+e),te(d,o),u.extensions&&ee(n,d,u),t.assignFinalMaterial(d),c.push(d)}for(let r=0,n=c.length;r<n;r++)t.associations.set(c[r],{meshes:e,primitives:r});if(1===c.length)return c[0];const l=new p.m;t.associations.set(l,{meshes:e});for(let e=0,t=c.length;e<t;e++)l.add(c[e]);return l}))}loadCamera(e){let t;const r=this.json.cameras[e],n=r[r.type];if(n)return"perspective"===r.type?t=new p.Q(p.D.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===r.type&&(t=new p.P(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),te(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return r.inverseBindMatrices=e,r}))}loadAnimation(e){const t=this.json.animations[e],r=[],n=[],o=[],a=[],s=[];for(let e=0,i=t.channels.length;e<i;e++){const i=t.channels[e],c=t.samplers[i.sampler],l=i.target,p=void 0!==l.node?l.node:l.id,u=void 0!==t.parameters?t.parameters[c.input]:c.input,d=void 0!==t.parameters?t.parameters[c.output]:c.output;r.push(this.getDependency("node",p)),n.push(this.getDependency("accessor",u)),o.push(this.getDependency("accessor",d)),a.push(c),s.push(l)}return Promise.all([Promise.all(r),Promise.all(n),Promise.all(o),Promise.all(a),Promise.all(s)]).then((function(r){const n=r[0],o=r[1],a=r[2],s=r[3],i=r[4],c=[];for(let e=0,t=n.length;e<t;e++){const t=n[e],r=o[e],l=a[e],u=s[e],d=i[e];if(void 0===t)continue;let m;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,Y[d.path]){case Y.weights:m=p.N;break;case Y.rotation:m=p.W;break;case Y.position:case Y.scale:default:m=p.kb}const f=t.name?t.name:t.uuid,h=void 0!==u.interpolation?X[u.interpolation]:p.s,g=[];Y[d.path]===Y.weights?t.traverse((function(e){e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(f);let y=l.array;if(l.normalized){const e=ae(y.constructor),t=new Float32Array(y.length);for(let r=0,n=y.length;r<n;r++)t[r]=y[r]*e;y=t}for(let e=0,t=g.length;e<t;e++){const t=new m(g[e]+"."+Y[d.path],r.array,y,h);"CUBICSPLINE"===u.interpolation&&(t.createInterpolant=function(e){return new(this instanceof p.W?N:P)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(t)}}const l=t.name?t.name:"animation_"+e;return new p.a(l,void 0,c)}))}createNodeMesh(e){const t=this.json,r=this,n=t.nodes[e];return void 0===n.mesh?null:r.getDependency("mesh",n.mesh).then((function(e){const t=r._getNodeRef(r.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,r=n.weights.length;t<r;t++)e.morphTargetInfluences[t]=n.weights[t]})),t}))}loadNode(e){const t=this.json,r=this.extensions,n=this,o=t.nodes[e],a=o.name?n.createUniqueName(o.name):"";return function(){const t=[],r=n._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return r&&t.push(r),void 0!==o.camera&&t.push(n.getDependency("camera",o.camera).then((function(e){return n._getNodeRef(n.cameraCache,o.camera,e)}))),n._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let s;if(s=!0===o.isBone?new p.b:t.length>1?new p.m:1===t.length?t[0]:new p.O,s!==t[0])for(let e=0,r=t.length;e<r;e++)s.add(t[e]);if(o.name&&(s.userData.name=o.name,s.name=a),te(s,o),o.extensions&&ee(r,s,o),void 0!==o.matrix){const e=new p.E;e.fromArray(o.matrix),s.applyMatrix4(e)}else void 0!==o.translation&&s.position.fromArray(o.translation),void 0!==o.rotation&&s.quaternion.fromArray(o.rotation),void 0!==o.scale&&s.scale.fromArray(o.scale);return n.associations.has(s)||n.associations.set(s,{}),n.associations.get(s).nodes=e,s}))}loadScene(e){const t=this.json,r=this.extensions,n=this.json.scenes[e],o=this,a=new p.m;n.name&&(a.name=o.createUniqueName(n.name)),te(a,n),n.extensions&&ee(r,a,n);const s=n.nodes||[],i=[];for(let e=0,r=s.length;e<r;e++)i.push(ie(s[e],a,t,o));return Promise.all(i).then((function(){return o.associations=(e=>{const t=new Map;for(const[e,r]of o.associations)(e instanceof p.C||e instanceof p.eb)&&t.set(e,r);return e.traverse(e=>{const r=o.associations.get(e);null!=r&&t.set(e,r)}),t})(a),a}))}}function ie(e,t,r,n){const o=r.nodes[e];return n.getDependency("node",e).then((function(e){if(void 0===o.skin)return e;let t;return n.getDependency("skin",o.skin).then((function(e){t=e;const r=[];for(let e=0,o=t.joints.length;e<o;e++)r.push(n.getDependency("node",t.joints[e]));return Promise.all(r)})).then((function(r){return e.traverse((function(e){if(!e.isMesh)return;const n=[],o=[];for(let e=0,a=r.length;e<a;e++){const a=r[e];if(a){n.push(a);const r=new p.E;void 0!==t.inverseBindMatrices&&r.fromArray(t.inverseBindMatrices.array,16*e),o.push(r)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}e.bind(new p.Z(n,o),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const a=[];if(o.children){const t=o.children;for(let o=0,s=t.length;o<s;o++){const s=t[o];a.push(ie(s,e,r,n))}}return Promise.all(a)}))}function ce(e,t,r){const n=t.attributes,o=[];function a(t,n){return r.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(const t in n){const r=J[t]||t.toLowerCase();r in e.attributes||o.push(a(n[t],r))}if(void 0!==t.indices&&!e.index){const n=r.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(n)}return te(e,t),function(e,t,r){const n=t.attributes,o=new p.c;if(void 0===n.POSITION)return;{const e=r.json.accessors[n.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(o.set(new p.jb(t[0],t[1],t[2]),new p.jb(a[0],a[1],a[2])),e.normalized){const t=ae(q[e.componentType]);o.min.multiplyScalar(t),o.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new p.jb,t=new p.jb;for(let n=0,o=a.length;n<o;n++){const o=a[n];if(void 0!==o.POSITION){const n=r.json.accessors[o.POSITION],a=n.min,s=n.max;if(void 0!==a&&void 0!==s){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),n.normalized){const e=ae(q[n.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(e)}e.boundingBox=o;const s=new p.bb;o.getCenter(s.center),s.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=s}(e,t,r),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,r){let n=!1,o=!1;for(let e=0,r=t.length;e<r;e++){const r=t[e];if(void 0!==r.POSITION&&(n=!0),void 0!==r.NORMAL&&(o=!0),n&&o)break}if(!n&&!o)return Promise.resolve(e);const a=[],s=[];for(let i=0,c=t.length;i<c;i++){const c=t[i];if(n){const t=void 0!==c.POSITION?r.getDependency("accessor",c.POSITION):e.attributes.position;a.push(t)}if(o){const t=void 0!==c.NORMAL?r.getDependency("accessor",c.NORMAL):e.attributes.normal;s.push(t)}}return Promise.all([Promise.all(a),Promise.all(s)]).then((function(t){const r=t[0],a=t[1];return n&&(e.morphAttributes.position=r),o&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,r):e}))}function le(e,t){let r=e.getIndex();if(null===r){const t=[],n=e.getAttribute("position");if(void 0===n)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),r=e.getIndex()}const n=r.count-2,o=[];if(t===p.gb)for(let e=1;e<=n;e++)o.push(r.getX(0)),o.push(r.getX(e)),o.push(r.getX(e+1));else for(let e=0;e<n;e++)e%2==0?(o.push(r.getX(e)),o.push(r.getX(e+1)),o.push(r.getX(e+2))):(o.push(r.getX(e+2)),o.push(r.getX(e+1)),o.push(r.getX(e)));o.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=e.clone();return a.setIndex(o),a}var pe=u,ue=r(1);const de=e=>{const t=Object(n.useContext)(s.b),[r,o]=Object(n.useState)(!0),a=Object(n.useRef)(!0),c=Object(n.useRef)(!1),u=Object(n.useRef)(null),d=Object(n.useRef)(e.init),m=()=>{u.current&&u.current.style&&(u.current.getLayer("3d-model")&&u.current.removeLayer("3d-model"),u.current=null)};return Object(n.useEffect)(()=>("function"==typeof d.current&&d.current(),m),[]),Object(n.useEffect)(()=>{if(t.mapExists(e.mapId)&&!c.current){c.current=!0,u.current=t.getMap(e.mapId),u.current.setCenter([7.099771581806502,50.73395746209983]),u.current.setZoom(15),u.current.setPitch(45);var r=[Math.PI/2,90,0],n=l.a.MercatorCoordinate.fromLngLat([7.099771581806502,50.73395746209983],0),o={translateX:n.x+8e-7,translateY:n.y+18e-7,translateZ:n.z,rotateX:r[0],rotateY:r[1],rotateZ:r[2],scale:n.meterInMercatorCoordinateUnits()+3e-8},a={id:"3d-model",type:"custom",renderingMode:"3d",onAdd:function(t,r){this.camera=new p.f,this.scene=new p.Y;var n=new p.i(16777215);n.position.set(0,-70,100).normalize(),this.scene.add(n);var o=new p.i(16777215);o.position.set(0,70,100).normalize(),this.scene.add(o),(new pe).load("assets/3D/godzilla_simple.glb",function(t){this.scene.add(t.scene),"function"==typeof e.onDone&&e.onDone()}.bind(this)),this.map=t,this.renderer=new p.lb({canvas:t.getCanvas(),context:r,antialias:!0}),this.renderer.autoClear=!1},render:function(e,t){var r=(new p.E).makeRotationAxis(new p.jb(1,0,0),o.rotateX),n=(new p.E).makeRotationAxis(new p.jb(0,1,0),o.rotateY),a=(new p.E).makeRotationAxis(new p.jb(0,0,1),o.rotateZ),s=(new p.E).fromArray(t),i=(new p.E).makeTranslation(o.translateX,o.translateY,o.translateZ).scale(new p.jb(o.scale,-o.scale,o.scale)).multiply(r).multiply(n).multiply(a);this.camera.projectionMatrix=s.multiply(i),this.renderer.resetState(),this.renderer.render(this.scene,this.camera),this.map.triggerRepaint()}};u.current.addLayer(a),u.current.getLayer("3d-model")&&u.current.setLayoutProperty("3d-model","visibility","visible")}},[t.mapIds,t,e]),Object(n.useEffect)(()=>{u.current&&u.current.getLayer("3d-model")&&(r?u.current.setLayoutProperty("3d-model","visibility","visible"):u.current.setLayoutProperty("3d-model","visibility","none"))},[r,t]),Object(ue.jsx)(ue.Fragment,{children:Object(ue.jsx)(i.a,{color:"primary",variant:r?"contained":"outlined",onClick:()=>{o(!r),a.current=!r},children:"3D"})})};de.__docgenInfo={description:"Renders obj or gltf 3D Models on the MapLibreMap referenced by props.mapId\n\n@component",methods:[],displayName:"MlThreeJsLayer",props:{mapId:{type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"},init:{type:{name:"func"},required:!1,description:"function that gets called when initialized"},onDone:{type:{name:"func"},required:!1,description:"function that gets called when models are loaded"}}};var me=de;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlThreeJsLayer/MlThreeJsLayer.js"]={name:"MlThreeJsLayer",docgenInfo:de.__docgenInfo,path:"src/components/MlThreeJsLayer/MlThreeJsLayer.js"});var fe=r(37);const he=o.a.createContext({}),ge=he.Provider,ye=e=>{let{children:t}=e;const r=Object(n.useContext)(s.b),[o,a]=Object(n.useState)(!1),[i,c]=Object(n.useState)(!1),[l,p]=Object(n.useState)(!0),[u,d]=Object(n.useState)(!1),m=Object(n.useRef)({}),[f,h]=Object(n.useState)(0),g=e=>()=>{m.current[e]=!0,h(Math.random())},y=()=>{setTimeout(()=>{d(!0),setTimeout(()=>{p(!1)},1700)},900)};Object(n.useEffect)(()=>{if(r.map&&!o){for(var e in m.current)if(!m.current[e])return;y()}},[f,o,r]),Object(n.useEffect)(()=>{for(var e=0,t=r.mapIds.length;e<t;e++)if(-1===Object.keys(m.current).indexOf(r.mapIds[e])){let t=r.mapIds[e]+"";r.getMap(t)&&(m.current[t]=!1,r.getMap(t).on("idle",g(t)))}},[r,r.mapIds]),Object(n.useEffect)(()=>{i&&y()},[i]);const b={setControlled:a,controlled:o,visible:l,fadeoutAnimation:u,setLoadingDone:c};return Object(ue.jsx)(ge,{value:b,children:t})};ye.__docgenInfo={description:"",methods:[],displayName:"LoadingOverlayProvider",props:{children:{type:{name:"node"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui_components/LoadingOverlayContext.js"]={name:"LoadingOverlayProvider",docgenInfo:ye.__docgenInfo,path:"src/ui_components/LoadingOverlayContext.js"});const be={title:"MapComponents/MlThreeJsLayer",component:me,argTypes:{options:{control:{type:"object"}}},decorators:fe.a};t.default=be;const ve=(e=>{const t=Object(n.useContext)(he);return Object(ue.jsx)(a.a,{children:Object(ue.jsx)(me,{init:()=>{var e;return null==t||null===(e=t.setControlled)||void 0===e?void 0:e.call(t,!0)},onDone:()=>setTimeout(()=>{var e;return null==t||null===(e=t.setLoadingDone)||void 0===e?void 0:e.call(t,!0)},1200)})})}).bind({});ve.parameters={},ve.parameters={storySource:{source:"(args) => {\n  const loadingOverlayContext = useContext(LoadingOverlayContext);\n\n  return (\n    <TopToolbar>\n      <MlThreeJsLayer\n        init={() => loadingOverlayContext?.setControlled?.(true)}\n        onDone={() =>\n          setTimeout(() => loadingOverlayContext?.setLoadingDone?.(true), 1200)\n        }\n      />\n    </TopToolbar>\n  );\n}"},...ve.parameters}},1104:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return u}));var n=r(0),o=r(51),a=r(1);const s=e=>{const t=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(!1),s=Object(n.useRef)(e.imageId||"img_"+(new Date).getTime()),i=Object(n.useRef)(e.layerId||"MlImageMarkerLayer-"+t.componentId);Object(n.useEffect)(()=>{if(t.mapIsReady&&(!t.map||t.map.getLayer(i.current))&&e.options){var r;if(e.options.layout)for(r in e.options.layout)t.map.setLayoutProperty(i.current,r,e.options.layout[r]);if(e.options.paint)for(r in e.options.paint)t.map.setPaintProperty(i.current,r,e.options.paint[r])}},[e.options,i.current,e.mapId]);const c=Object(n.useCallback)(()=>{let r={id:i.current,layout:{},...e.options};r.layout["icon-image"]=s.current,t.map.addLayer(r,e.insertBeforeLayer,t.componentId)},[e,t.mapIsReady,t.map]);return Object(n.useEffect)(()=>{e.options&&t.mapIsReady&&!r.current&&(r.current=!0,e.imgSrc&&t.map.loadImage(e.imgSrc,(function(e,r){if(e)throw e;t.map.addImage(s.current,r,t.componentId)})),c())},[t.mapIsReady,t.map,c,e]),Object(n.useEffect)(()=>{t.mapIsReady&&(!t.map||t.map.getLayer(i.current))&&e.options&&t.map.getSource(i.current).setData(e.options.source.data)},[e.options.source.data,e]),Object(a.jsx)(a.Fragment,{})};s.__docgenInfo={description:"",methods:[],displayName:"MlImageMarkerLayer"};var i=s;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlImageMarkerLayer/MlImageMarkerLayer.js"]={name:"MlImageMarkerLayer",docgenInfo:s.__docgenInfo,path:"src/components/MlImageMarkerLayer/MlImageMarkerLayer.js"});var c=r(37),l=r.p+"static/media/wg-marker.bf3eeb2d.png";const p={title:"MapComponents/MlImageMarkerLayer",component:i,argTypes:{url:{},layer:{}},decorators:c.a};t.default=p;const u=(e=>Object(a.jsx)(i,{options:{type:"symbol",source:{type:"geojson",data:{type:"Feature",properties:{id:"test"},geometry:{type:"Point",coordinates:[7.0847929969609424,50.73855193187643]}}},layout:{"icon-allow-overlap":!0,"icon-size":.14,"icon-offset":[0,-180]}},imgSrc:l})).bind({});u.parameters={},u.args={},u.parameters={storySource:{source:'(args) => (\n  <MlImageMarkerLayer\n    options={{\n      type: "symbol",\n      source: {\n        type: "geojson",\n        data: {\n          type: "Feature",\n          properties: {\n            id: "test",\n          },\n          geometry: {\n            type: "Point",\n            coordinates: [7.0847929969609424, 50.73855193187643],\n          },\n        },\n      },\n      layout: {\n        "icon-allow-overlap": true,\n        "icon-size": 0.14,\n        "icon-offset": [0, -180],\n      },\n    }}\n    imgSrc={wgMarker}\n  />\n)'},...u.parameters}},1105:function(e,t,r){"use strict";r.r(t),r.d(t,"Linestring",(function(){return b}));var n=r(0),o=r(59),a=r(51);const s=function(e,t,r,n,a,i,c,l,p){if(void 0!==n.current[i.current]){let t=i.current+1===n.current.length?e.geojson:o.lineString([...a.current,...n.current[i.current].geometry.coordinates]);p(t),"function"==typeof e.onTransitionFrame&&e.onTransitionFrame(t),i.current++,r.current&&i.current<n.current.length?l.current=setTimeout(()=>s(...arguments),c):("function"==typeof e.onTransitionEnd&&e.onTransitionEnd(e.geojson),r.current=!1)}};let i=(e,t,r)=>{let n=[];if(e.length>1){let a=o.lineChunk(o.lineString(e),t),s=a.features[0];for(let e=0;e<r&&(n.push(s),void 0!==a.features[e]);e++)s=o.lineString([...s.geometry.coordinates,...a.features[e].geometry.coordinates])}return n};var c=r(78),l=r(1);const p=e=>{const{geojson:t,...r}=e,p=Object(a.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),u=Object(n.useRef)(!1),d=Object(n.useRef)(null),m=Object(n.useRef)(!1),f=Object(n.useRef)(void 0),h=Object(n.useRef)(!1),g=Object(n.useRef)([]),y=Object(n.useRef)([]),[b,v]=Object(n.useState)(o.featureCollection([]));Object(n.useEffect)(()=>()=>{f.current&&clearTimeout(f.current)},[]);const x=Object(n.useCallback)(()=>{((e,t,r,n,a,c,l,p,u,d)=>{let m=[],f=[],h=[],g=[];t.current=[];let y=a.current||{geometry:{type:"LineString",coordinates:[]},properties:{},type:"Feature"},b=e.geojson,v=b,x=y,O=!1;if(void 0===v.geometry&&void 0!==x.geometry&&x.geometry.coordinates.length>1)v=o.lineString(x.geometry.coordinates.slice(0,2));else if(void 0===x.geometry&&void 0!==v.geometry&&v.geometry.coordinates.length>1)x=o.lineString(v.geometry.coordinates.slice(0,2));else if(void 0===x.geometry&&void 0===v.geometry)return;if(v.geometry.coordinates.length<x.geometry.coordinates.length&&(v=y,x=b,O=!0),v&&x)for(var j=0,S=v.geometry.coordinates.length;j<S;j++)void 0!==x.geometry.coordinates[j]&&v.geometry.coordinates[j][0]===x.geometry.coordinates[j][0]&&v.geometry.coordinates[j][1]===x.geometry.coordinates[j][1]?t.current.push(v.geometry.coordinates[j]):(void 0!==v.geometry.coordinates[j]&&f.push(v.geometry.coordinates[j]),void 0!==x.geometry.coordinates[j]&&m.push(x.geometry.coordinates[j]));if(O?(h=m,g=f):(h=f,g=m),h.length<2&&g<2)return;let M,L=e.transitionTime/c,E=g.length>1?Math.round(o.length(o.lineString(g))):0,C=h.length>1?Math.round(o.length(o.lineString(h))):0,I=C+E,w=E/I,T=Math.round(L*w),_=Math.round(E/T*100)/100,R=C/I,A=Math.round(L*R),P=Math.round(C/A*100)/100,k=E;E<=0&&(k=.1),M=[...i(g,_,T)],M.reverse(),M=[...M,...i(h,P,A)],M.push(b),r.current=M,l.current=1,n.current=!0,u.current=setTimeout(()=>s(e,p,n,r,t,l,c,u,d),c)})(e,y,g,m,d,50,h,p.map,f,v)},[e,p.map]);Object(n.useEffect)(()=>{p.map&&u.current&&(void 0!==e.transitionTime&&"line"===e.type&&d.current&&(m.current=!1,h.current=!1,g.current=[],y.current=[],x()),d.current=e.geojson)},[p.map,x,e]);const O=Object(n.useCallback)(()=>{"line"===e.type&&void 0!==e.transitionTime&&e.transitionTime&&void 0!==e.geojson.geometry&&JSON.stringify(d.current)!==JSON.stringify(e.geojson)&&(x(e.geojson),d.current=e.geojson)},[e,x]);return Object(n.useEffect)(()=>{p.mapIsReady&&e.geojson&&(u.current=!0,O())},[p.mapIsReady,O,e]),Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(c.a,{...r,geojson:b})})};p.__docgenInfo={description:'Adds source and layer of types "line", "fill" or "circle" to display GeoJSON data on the map.\n\n@component',methods:[],displayName:"MlTransitionGeoJsonLayer",props:{mapId:{type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"},type:{type:{name:"string"},required:!1,description:'Type of the layer that will be added to the MapLibre instance.\nPossible values: "line", "circle", "fill"'},layout:{type:{name:"object"},required:!1,description:"Layout property object, that is passed to the addLayer call.\nPossible props depend on the layer type.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill"},paint:{type:{name:"object"},required:!1,description:"Paint property object, that is passed to the addLayer call.\nPossible props depend on the layer type.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill"},defaultPaintOverrides:{type:{name:"object"},required:!1,description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.'},options:{type:{name:"object"},required:!1,description:"Javascript object that is spread into the addLayer commands first parameter."},geojson:{type:{name:"object"},required:!1,description:"GeoJSON data that is supposed to be rendered by this component."},insertBeforeLayer:{type:{name:"string"},required:!1,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.'},onClick:{type:{name:"func"},required:!1,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked."},onHover:{type:{name:"func"},required:!1,description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered."},onLeave:{type:{name:"func"},required:!1,description:"Leave event handler that is executed whenever a geometry rendered by this component is\nleft/unhovered."},transitionTime:{type:{name:"number"},required:!1,description:'Creates transition animation whenever the geojson prop changes.\nOnly works with layer type "line" and LineString GeoJSON data.'}}};var u=p;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlTransitionGeoJsonLayer/MlTransitionGeoJsonLayer.js"]={name:"MlTransitionGeoJsonLayer",docgenInfo:p.__docgenInfo,path:"src/components/MlTransitionGeoJsonLayer/MlTransitionGeoJsonLayer.js"});var d=r(37),m=r(40),f=r(635),h=r(636),g=r(637);console.log(g);const y={title:"MapComponents/MlTransitionGeoJsonLayer",component:u,argTypes:{url:{},layer:{}},decorators:d.a};t.default=y;const b=(e=>{const t=Object(n.useContext)(m.b),[r,o]=Object(n.useState)(f),a=Object(n.useRef)(!1);return Object(n.useEffect)(()=>{t.getMap()&&!a.current&&(a.current=!0,t.getMap().setCenter({lng:7.137609868988648,lat:50.74746799549129}),t.getMap().setZoom(9.5),setTimeout(()=>{o(h)},4e3))},[r,t]),Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(u,{type:"line",geojson:r,transitionTime:2e3,...e})})}).bind({});b.parameters={},b.args={paint:{"line-color":"red","line-width":4}},b.parameters={storySource:{source:'(props) => {\n  const mapContext = useContext(MapContext);\n  const [geojson, setGeojson] = useState(sample_geojson_1);\n  const initializedRef = useRef(false);\n\n  useEffect(() => {\n    if (!mapContext.getMap() || initializedRef.current) return;\n\n    initializedRef.current = true;\n    mapContext.getMap().setCenter({ lng: 7.137609868988648, lat: 50.74746799549129 });\n    mapContext.getMap().setZoom(9.5);\n\n    setTimeout(() => {\n      setGeojson(sample_geojson_2);\n    }, 4000);\n  }, [geojson, mapContext]);\n\n  return (\n    <>\n      <MlTransitionGeoJsonLayer type="line" geojson={geojson} transitionTime={2000} {...props} />\n    </>\n  );\n}'},...b.parameters}},1106:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return T}));var n=r(0),o=r(40),a=r(331),s=r(107),i=r(248),c=r(247),l=r(638),p=r.n(l);function u(e){const[t,r]=Object(n.useState)(void 0),[o,a]=Object(n.useState)(e.url),[s,i]=Object(n.useState)(""),[c,l]=Object(n.useState)(void 0),[u,d]=Object(n.useState)(void 0),m=()=>{r(void 0),l(void 0),i("")};return Object(n.useEffect)(()=>{var t;if(m(),d(void 0),!o)return;let r,n=o;-1!==o.indexOf("?")&&(r=o.split("?"),n=r[0]);let a=new URLSearchParams(null===(t=r)||void 0===t?void 0:t[1]),s={...Object.fromEntries(a),...e.urlParameters},i=new URLSearchParams(s),c=decodeURIComponent(i.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");fetch(n+"?"+c).then(e=>{if(e.ok)return e.text();throw Error(e.statusText+" ("+e.status+" - "+e.type+")")}).then(e=>{l(new p.a(e).toJSON())}).catch(e=>{m(),console.log(e),d(e.message)})},[o,e.urlParameters]),Object(n.useEffect)(()=>{var e,t,n,o,a,s,l,p,u,d,m,f,h,g;null!=c&&c.Service&&(i(null===(e=c.Capability)||void 0===e||null===(t=e.Request)||void 0===t||null===(n=t.GetMap)||void 0===n||null===(o=n.DCPType)||void 0===o||null===(a=o[0])||void 0===a||null===(s=a.HTTP)||void 0===s||null===(l=s.Get)||void 0===l?void 0:l.OnlineResource),r(null===(p=c.Capability)||void 0===p||null===(u=p.Request)||void 0===u||null===(d=u.GetFeatureInfo)||void 0===d||null===(m=d.DCPType)||void 0===m||null===(f=m[0])||void 0===f||null===(h=f.HTTP)||void 0===h||null===(g=h.Get)||void 0===g?void 0:g.OnlineResource))},[c]),{capabilities:c,getFeatureInfoUrl:t,wmsUrl:s,error:u,setUrl:a}}u.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"getCapabilities"}};var d=u,m=r(323),f=r.n(m),h=r(324),g=r.n(h),y=r(1135),b=r(1133),v=r(1136),x=r(332),O=r(1),j=2*Math.PI*6378137/2;const S=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enable:!0,decimal:1};var n=e.lng,o=e.lat,a=n*j/180,s=Math.log(Math.tan((90+o)*Math.PI/360))/(Math.PI/180);return s=s*j/180,r.enable&&(a=Number(a.toFixed(r.decimal)),s=Number(s.toFixed(r.decimal))),[a,s]},M=e=>{var t,r,l,p,u,m;const h=Object(n.useContext)(o.b),{capabilities:j,error:M,setUrl:L,getFeatureInfoUrl:E,wmsUrl:C}=d({url:void 0,urlParameters:e.urlParameters}),I=Object(n.useRef)(!1),w=Object(n.useRef)(void 0),T=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlWmsLoader-")+Object(a.a)()),[_,R]=Object(n.useState)([]),[A,P]=Object(n.useState)(void 0),[k,N]=Object(n.useState)(void 0);Object(n.useEffect)(()=>{let e=T.current;return()=>{w.current&&(w.current.cleanup(e),w.current=void 0),I.current=!1}},[]),Object(n.useEffect)(()=>{I.current&&L(e.url)},[e.url]);const H=Object(n.useCallback)(t=>{var r,n,o,a,s;P(void 0),N(void 0);let i,c=w.current.getBounds(),l=S(c._sw),p=S(c._ne),u={REQUEST:"GetFeatureInfo",BBOX:[l[0],l[1],p[0],p[1]].join(","),SERVICE:"WMS",INFO_FORMAT:-1!==(null==j||null===(r=j.Capability)||void 0===r||null===(n=r.Request)||void 0===n?void 0:n.GetFeatureInfo.Format.indexOf("text/html"))?"text/html":"text/plain",FEATURE_COUNT:"10",LAYERS:_.map((e,t)=>e.visible&&e.queryable?e.Name:void 0).filter(e=>e),QUERY_LAYERS:_.map((e,t)=>e.visible&&e.queryable?e.Name:void 0).filter(e=>e),WIDTH:w.current._container.clientWidth,HEIGHT:w.current._container.clientHeight,srs:"EPSG:3857",CRS:"EPSG:3857",version:"1.3.0",X:t.point.x,Y:t.point.y,I:t.point.x,J:t.point.y,buffer:"50"},d=E;-1!==(null===(o=d)||void 0===o||null===(a=o.indexOf)||void 0===a?void 0:a.call(o,"?"))&&(i=e.url.split("?"),d=i[0]);let m=new URLSearchParams(null===(s=i)||void 0===s?void 0:s[1]),f={...Object.fromEntries(m),...u},h=new URLSearchParams(f);fetch(e.url+"?"+h.toString()).then(e=>{if(!e.ok)throw new Error("FeatureInfo could not be fetched");return e.text()}).then(e=>{P(t.lngLat),N(e)}).catch(e=>console.log(e))},[j,E]);return Object(n.useEffect)(()=>{if(!w.current)return;const e=H;return w.current.on("click",e,T.current),()=>{var t,r;null===(t=w.current)||void 0===t||null===(r=t.off)||void 0===r||r.call(t,"click",e)}},[E]),Object(n.useEffect)(()=>{var e,t,r,n;if(null!=j&&j.Service)if(-1===(null==j||null===(e=j.Capability)||void 0===e||null===(t=e.Layer)||void 0===t||null===(r=t.SRS)||void 0===r||null===(n=r.indexOf)||void 0===n?void 0:n.call(r,"EPSG:3857")))console.log("MlWmsLoader ("+j.Service.Title+"): No WGS 84/Pseudo-Mercator support");else{var o,a,s;let e;console.log("MlWmsLoader ("+j.Service.Title+"): WGS 84/Pseudo-Mercator supported"),R(null==j||null===(o=j.Capability)||void 0===o||null===(a=o.Layer)||void 0===a?void 0:a.Layer.map((t,r)=>{var n,o,a;return 0===r&&(e=t.LatLonBoundingBox,e||(e=t.EX_GeographicBoundingBox)),t.visible=!((null==j||null===(n=j.Capability)||void 0===n||null===(o=n.Layer)||void 0===o||null===(a=o.Layer)||void 0===a?void 0:a.length)>2)||r>1,t})),w.current&&(null===(s=e)||void 0===s?void 0:s.length)>3&&w.current.fitBounds([[e[0],e[1]],[e[2],e[3]]])}},[j]),Object(n.useEffect)(()=>{var t;null!=h&&null!==(t=h.mapExists)&&void 0!==t&&t.call(h,e.mapId)&&!I.current&&(I.current=!0,w.current=h.getMap(e.mapId),console.log("set url "+e.url),L(e.url))},[h.mapIds,h,e.mapId,e.url]),Object(O.jsxs)(O.Fragment,{children:[M&&Object(O.jsx)("p",{children:M}),Object(O.jsx)("h3",{children:null==j||null===(t=j.Service)||void 0===t?void 0:t.Title},"title"),console.log(T.current),null==j||null===(r=j.Capability)||void 0===r||null===(l=r.Layer)||void 0===l?void 0:l.Layer.map((e,t)=>Object(O.jsx)(c.a,{layerId:"Order-"+T.current+"-"+t,...t>0?{insertBeforeLayer:"Order-"+T.current+"-"+(t-1)}:void 0},T.current+"-"+t)),Object(O.jsx)(y.a,{dense:!0,children:C&&(null==_||null===(p=_.map)||void 0===p?void 0:p.call(_,(t,r)=>null!=t&&t.Name?Object(O.jsxs)(b.a,{secondaryAction:Object(O.jsx)(x.a,{edge:"end","aria-label":"toggle visibility",onClick:()=>{let e=[..._];e[r].visible=!e[r].visible,R([...e])},children:_[r].visible?Object(O.jsx)(f.a,{}):Object(O.jsx)(g.a,{})}),children:[Object(O.jsx)(v.a,{primary:null==t?void 0:t.Title,secondary:null==t?void 0:t.Abstract}),Object(O.jsx)(s.a,{url:C,urlParameters:{...e.wmsUrlParameters,layers:null==t?void 0:t.Name},visible:_[r].visible,insertBeforeLayer:"Order-"+T.current+"-"+r},(null==t?void 0:t.Name)+r)]},t.Name+r):Object(O.jsx)(O.Fragment,{})))},"layers"),Object(O.jsx)("p",{style:{fontSize:".7em"},children:null==j||null===(u=j.Capability)||void 0===u||null===(m=u.Layer)||void 0===m?void 0:m.Abstract},"description"),A&&Object(O.jsx)(i.a,{...A,content:k})]})};M.defaultProps={url:"",urlParameters:{SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"getCapabilities"},wmsUrlParameters:{TRANSPARENT:"TRUE"}},M.__docgenInfo={description:"Loads a WMS getCapabilities xml document and adds a MlWmsLayer component for each layer that is\noffered by the WMS.\n\nTODO: EaseTo the extend offered by the WMS in a zoom level that is supported\n\n@component",methods:[],displayName:"MlWmsLoader",props:{url:{defaultValue:{value:'""',computed:!1},type:{name:"string"},required:!1,description:"WMS URL"},urlParameters:{defaultValue:{value:'{\n  SERVICE: "WMS",\n  VERSION: "1.3.0",\n  REQUEST: "getCapabilities",\n}',computed:!1},type:{name:"object"},required:!1,description:"URL parameters that will be used in the getCapabilities request"},wmsUrlParameters:{defaultValue:{value:'{\n  TRANSPARENT: "TRUE",\n}',computed:!1},type:{name:"object"},required:!1,description:"URL parameters that will be added when requesting WMS capabilities"},mapId:{type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"},layerUrlParameters:{type:{name:"object"},required:!1,description:"URL parameters that will be added when requesting tiles"}}};var L=M;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlWmsLoader/MlWmsLoader.js"]={name:"MlWmsLoader",docgenInfo:M.__docgenInfo,path:"src/components/MlWmsLoader/MlWmsLoader.js"});var E=r(1201),C=r(37),I=r(322);const w={title:"MapComponents/MlWmsLoader",component:L,argTypes:{url:{},layer:{}},decorators:C.a};t.default=w;const T=(e=>{const[t,r]=Object(n.useState)(e.url);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(I.a,{sx:{wordBreak:"break-word"},children:[Object(O.jsx)(E.a,{label:"WMS Url",variant:"standard",value:t,onChange:e=>r(e.target.value)}),Object(O.jsx)(L,{...e,url:t})]})})}).bind({});T.parameters={},T.args={url:"https://www.wms.nrw.de/wms/kitas"},T.parameters={storySource:{source:'(props) => {\n  const [url, setUrl] = useState(props.url);\n\n  return (\n    <>\n      <Sidebar sx={{ wordBreak: "break-word" }}>\n        <TextField\n          label="WMS Url"\n          variant="standard"\n          value={url}\n          onChange={(ev) => setUrl(ev.target.value)}\n        />\n        <MlWmsLoader {...props} url={url} />\n      </Sidebar>\n    </>\n  );\n}'},...T.parameters}},1111:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"parameters",(function(){return s}));var o=r(1207),a=r(11);r(0),r(40),r(139),r(1017);const s={docs:{inlineStories:!1},actions:{argTypesRegex:"^on[A-Z].*"}};function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.keys(n).forEach((function(e){var t=n[e];switch(e){case"args":case"argTypes":return a.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(t));case"decorators":return t.forEach((function(e){return Object(o.d)(e,!1)}));case"loaders":return t.forEach((function(e){return Object(o.e)(e,!1)}));case"parameters":return Object(o.f)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t),!1);case"argTypesEnhancers":return t.forEach((function(e){return Object(o.b)(e)}));case"argsEnhancers":return t.forEach((function(e){return Object(o.c)(e)}));case"render":return Object(o.g)(t);case"globals":case"globalTypes":var r={};return r[e]=t,Object(o.f)(r,!1);case"decorateStory":case"renderToDOM":return null;default:return console.log(e+" was not supported :( !")}}))},1112:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return d}));var n=r(0),o=r(3),a=r.n(o),s=r(51),i=r(1);const c=e=>{const t=Object(s.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(!1);return Object(n.useEffect)(()=>{t.mapIsReady&&!r.current&&(r.current=!0,t.map.setCenter([7.132122000552613,50.716405378037706]))},[t.map,t.mapIsReady,e.mapId]),Object(i.jsx)(i.Fragment,{})};c.defaultProps={mapId:void 0},c.propTypes={mapId:a.a.string},c.__docgenInfo={description:"TODO: Add short & useful description\n\n@param {object} props\n@param {string} props.mapId Id of the target MapLibre instance in mapContext\n\n@component",methods:[],displayName:"MlComponentTemplate",props:{mapId:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"}}};var l=c;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlComponentTemplate/MlComponentTemplate.js"]={name:"MlComponentTemplate",docgenInfo:c.__docgenInfo,path:"src/components/MlComponentTemplate/MlComponentTemplate.js"});var p=r(37);const u={title:"MapComponents/MlComponentTemplate",component:l,argTypes:{url:{},layer:{}},decorators:p.a};t.default=u;const d=(e=>Object(i.jsx)(l,{})).bind({});d.parameters={},d.args={},d.parameters={storySource:{source:"(args) => <MlComponentTemplate />"},...d.parameters}},1113:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return m}));var n=r(0),o=r(86),a=r(40),s=r(331),i=r(210),c=r(1);const l=e=>{const t=Object(n.useContext)(a.b),r=Object(n.useRef)(null),[o,l]=Object(n.useState)(!0),p=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlFillExtrusionLayer-")+Object(s.a)()),u=Object(n.useRef)(!1),d=Object(n.useRef)(e.layerId||"MlFillExtrusionLayer-"+Object(s.a)());return Object(n.useEffect)(()=>{let e=p.current;return()=>{r.current&&(r.current.cleanup(e),r.current=void 0),u.current=!1}},[]),Object(n.useEffect)(()=>{if(!t.mapExists(e.mapId)||u.current)return;u.current=!0,r.current=t.getMap(e.mapId);let n=void 0;t.map.getLayer("waterway-name")&&(n="waterway-name"),t.map.getLayer("poi_label")&&(n="poi_label"),t.map.addLayer({id:d.current,type:"fill-extrusion",source:e.sourceId||"openmaptiles","source-layer":e.sourceLayer||"building",minzoom:e.minZoom||14,paint:{...e.paint}},e.insertBeforeLayer||n,p.current)},[t,e.insertBeforeLayer,e.mapId,e.minZoom,e.paint,e.sourceId,e.sourceLayer]),Object(n.useEffect)(()=>{u.current&&r.current.setLayoutProperty(d.current,"visibility",o?"visible":"none")},[o,t]),Object(c.jsx)(i.a,{color:"primary",variant:o?"contained":"outlined",onClick:()=>l(!o),children:"Composite"})};l.defaultProps={mapId:void 0,paint:{"fill-extrusion-color":"hsl(196, 61%, 83%)","fill-extrusion-height":{property:"render_height",type:"identity"},"fill-extrusion-base":{property:"render_min_height",type:"identity"},"fill-extrusion-opacity":1}},l.__docgenInfo={description:"Adds a fill extrusion layer to the MapLibre instance reference by props.mapId\n\n@Component",methods:[],displayName:"MlFillExtrusionLayer",props:{mapId:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"},paint:{defaultValue:{value:'{\n  "fill-extrusion-color": "hsl(196, 61%, 83%)",\n  "fill-extrusion-height": {\n    property: "render_height",\n    type: "identity",\n  },\n  "fill-extrusion-base": {\n    property: "render_min_height",\n    type: "identity",\n  },\n  "fill-extrusion-opacity": 1,\n}',computed:!1},type:{name:"object"},required:!1,description:"Paint properties of the config object that is passed to the MapLibreGl.addLayer call. All\navailable properties are documented in the MapLibreGl documentation\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill-extrusion"},layerId:{type:{name:"string"},required:!1,description:"Id of the layer that will be added by this component"},idPrefix:{type:{name:"string"},required:!1,description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance"},sourceId:{type:{name:"string"},required:!1,description:"Source id of a vector tile source containing the geometries to use for this fill-extrusion\nlayer.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#source-layer"},sourceLayer:{type:{name:"string"},required:!1,description:"Layer id from a vector tile source containing the geometries to use for this fill-extrusion\nlayer.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#source-layer"},minZoom:{type:{name:"number"},required:!1,description:"This layer will be hidde for zoom levels lower than defined on this property\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#minzoom"},insertBeforeLayer:{type:{name:"string"},required:!1,description:'The layerId of an existing layer this layer should be rendered visually beneath\nhttps://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property'}}};var p=l;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlFillExtrusionLayer/MlFillExtrusionLayer.js"]={name:"MlFillExtrusionLayer",docgenInfo:l.__docgenInfo,path:"src/components/MlFillExtrusionLayer/MlFillExtrusionLayer.js"});var u=r(37);const d={title:"MapComponents/MlFillExtrusionLayer",component:p,argTypes:{options:{control:{type:"object"}}},decorators:u.a};t.default=d;const m=(e=>Object(c.jsx)(o.a,{children:Object(c.jsx)(p,{})})).bind({});m.parameters={},m.parameters={storySource:{source:"(args) => (\n  <TopToolbar>\n    <MlFillExtrusionLayer />\n  </TopToolbar>\n)"},...m.parameters}},1114:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return m}));var n=r(0),o=r(321),a=r.n(o),s=(r(1076),r(40)),i=r(1);const c=e=>{const t=Object(n.useContext)(s.b),r=Object(n.useRef)(!1),o=Object(n.useRef)(null),[c,l]=Object(n.useState)(50),p=Object(n.useRef)(50),[u,d]=Object(n.useState)(50),m=Object(n.useRef)(50),f=Object(n.useRef)(e.magnifierRadius),[h,g]=Object(n.useState)(f.current),y=Object(n.useCallback)(()=>!(!e.map1Id||!e.map2Id)&&!(!t.getMap(e.map1Id)||!t.getMap(e.map2Id)),[e,t]),b=Object(n.useRef)(()=>{y()&&v({clientX:p.current,clientY:m.current})});Object(n.useEffect)(()=>{window.addEventListener("resize",b.current);let e=b.current;return()=>{window.removeEventListener("resize",e),o.current&&o.current()}},[]);const v=Object(n.useCallback)(r=>{if(!y())return;let n=t.maps[e.map1Id].getCanvas().getBoundingClientRect(),o=r.clientX||(void 0!==r.touches&&void 0!==r.touches[0]?r.touches[0].clientX:0),a=r.clientY||(void 0!==r.touches&&void 0!==r.touches[0]?r.touches[0].clientY:0);o-=n.x,a-=n.y;let s=(o/n.width*100).toFixed(2),i=(a/n.height*100).toFixed(2);p.current===s&&m.current===i||(l(s),p.current=s,d(i),m.current=i,t.maps[e.map2Id].getContainer().style.clipPath="circle(".concat(f.current,"px at ")+p.current*n.width/100+"px "+m.current*n.height/100+"px)")},[t,y,e]);Object(n.useEffect)(()=>{y()&&!r.current&&(r.current=!0,o.current=a()(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),t.maps[e.map1Id].getCanvas().clientWidth>t.maps[e.map1Id].getCanvas().clientHeight&&2*f.current>t.maps[e.map1Id].getCanvas().clientHeight&&(f.current=Math.floor(t.maps[e.map1Id].getCanvas().clientHeight/2),g(f.current)),t.maps[e.map1Id].getCanvas().clientHeight>t.maps[e.map1Id].getCanvas().clientWidth&&2*f.current>t.maps[e.map1Id].getCanvas().clientWidth&&(f.current=Math.floor(t.maps[e.map1Id].getCanvas().clientWidth/2),g(f.current)),v({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2,clientY:t.maps[e.map1Id].getCanvas().clientHeight/2}))},[t.mapIds,t,y,e,v]);const x=e=>{e.touches?(document.addEventListener("touchmove",v),document.addEventListener("touchend",O)):(document.addEventListener("mousemove",v),document.addEventListener("mouseup",j))},O=()=>{document.removeEventListener("touchmove",v),document.removeEventListener("touchend",O)},j=()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",j)};return Object(i.jsx)("div",{style:{position:"absolute",left:c+"%",top:u+"%",borderRadius:"50%",width:2*h+1+"px",height:2*h+1+"px",background:"rgba(0,0,0,0)",border:"2px solid #fafafa",boxShadow:"1px 2px 2px rgba(19, 19, 19, .5), inset 1px 1px 1px rgba(19, 19, 19, .2)",cursor:"pointer",zIndex:"110",marginLeft:-1*h-1+"px",marginTop:-1*h-1+"px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none"},onTouchStart:x,onMouseDown:x,onWheel:e=>{let r=new WheelEvent(e.type,e);t.map.getCanvas().dispatchEvent(r)}})};c.defaultProps={magnifierRadius:200},c.__docgenInfo={description:'Hides the MapLibreMap referenced by props.map2Id except for the "magnifier"-circle that reveals\nthe map and can be dragged around on top of the MapLibreMap referenced by props.map1Id\n\n@component',methods:[],displayName:"MlLayerMagnify",props:{magnifierRadius:{defaultValue:{value:"200",computed:!1},type:{name:"number"},required:!1,description:'Size of the "magnifier"-circle'},map1Id:{type:{name:"string"},required:!1,description:"Id of the first MapLibre instance"},map2Id:{type:{name:"string"},required:!1,description:"Id of the second MapLibre instance"}}};var l=c;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlLayerMagnify/MlLayerMagnify.js"]={name:"MlLayerMagnify",docgenInfo:c.__docgenInfo,path:"src/components/MlLayerMagnify/MlLayerMagnify.js"});var p=r(107),u=r(201);const d={title:"MapComponents/MlLayerMagnify",component:l,argTypes:{url:{},layer:{}},decorators:u.a};t.default=d;const m=(e=>Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p.a,{url:"https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme",urlParameters:{layers:"nw_uraufnahme_rw"},sourceOptions:{minzoom:13,maxzoom:20},mapId:e.wmsLayerMapId}),Object(i.jsx)(l,{map1Id:"map_1",map2Id:"map_2",magnifierRadius:e.magnifierRadius})]})).bind({});m.parameters={},m.args={wmsLayerMapId:"map_2",magnifierRadius:200},m.parameters={storySource:{source:'(args) => (\n  <>\n    <MlWmsLayer\n      url="https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme"\n      urlParameters={{\n        layers: "nw_uraufnahme_rw",\n      }}\n      sourceOptions={{\n        minzoom: 13,\n        maxzoom: 20,\n      }}\n      mapId={args.wmsLayerMapId}\n    />\n    <MlLayerMagnify map1Id="map_1" map2Id="map_2" magnifierRadius={args.magnifierRadius} />\n  </>\n)'},...m.parameters}},1115:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return m}));var n=r(0),o=r(321),a=r.n(o),s=(r(1077),r(40)),i=r(1);const c=e=>{const t=Object(n.useContext)(s.b),r=Object(n.useRef)(!1),[o,c]=Object(n.useState)(50),l=Object(n.useRef)(50),p=Object(n.useRef)(null),u=Object(n.useCallback)(()=>!(!e.map1Id||!e.map2Id)&&!(!t.getMap(e.map1Id)||!t.getMap(e.map2Id)),[t,e.map1Id,e.map2Id]),d=()=>{p.current&&p.current()},m=Object(n.useCallback)(r=>{if(!u())return;let n=t.maps[e.map1Id].getCanvas().getBoundingClientRect(),o=r.clientX||(void 0!==r.touches&&void 0!==r.touches[0]?r.touches[0].clientX:0);o-=n.x;let a=(o/n.width*100).toFixed(2);if(l.current!==a){c(a),l.current=a;var s="rect(0, "+l.current*n.width/100+"px, 999em, 0)";t.maps[e.map2Id].getContainer().style.clip=s}},[t,u,e.map1Id,e.map2Id]);Object(n.useEffect)(()=>d,[]),Object(n.useEffect)(()=>{u()&&!r.current&&(r.current=!0,p.current=a()(t.getMap(e.map1Id).map,t.getMap(e.map2Id).map),m({clientX:t.maps[e.map1Id].getCanvas().clientWidth/2}))},[t.mapIds,t,e,m,u]);const f=e=>{e.touches?(document.addEventListener("touchmove",m),document.addEventListener("touchend",h)):(document.addEventListener("mousemove",m),document.addEventListener("mouseup",g))},h=()=>{document.removeEventListener("touchmove",m),document.removeEventListener("touchend",h)},g=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",g)};return Object(i.jsx)("div",{style:{position:"absolute",left:o+"%",top:"50%",borderRadius:"50%",width:"100px",height:"100px",background:"#0066ff",border:"3px solid #eaebf1",cursor:"pointer",zIndex:"110",marginLeft:"-50px",marginTop:"-50px",textAlign:"center",lineHeight:"91px",fontSize:"2em",color:"#fafafa",userSelect:"none"},onTouchStart:f,onMouseDown:f})};c.__docgenInfo={description:"MlLayerSwipe returns a Button that will add a standard OSM tile layer to the maplibre-gl instance, that you can move like a curtain.\n\n@component",methods:[],displayName:"MlLayerSwipe",props:{map1Id:{type:{name:"string"},required:!1,description:"Id of the first MapLibre instance."},map2Id:{type:{name:"string"},required:!1,description:"Id of the second MapLibre instance."}}};var l=c;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlLayerSwipe/MlLayerSwipe.js"]={name:"MlLayerSwipe",docgenInfo:c.__docgenInfo,path:"src/components/MlLayerSwipe/MlLayerSwipe.js"});var p=r(107),u=r(201);const d={title:"MapComponents/MlLayerSwipe",name:"MlLayerSwipe",component:l,argTypes:{url:{},layer:{}},decorators:u.a};t.default=d;const m=(e=>Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p.a,{url:"https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme",urlParameters:{layers:"nw_uraufnahme_rw"},sourceOptions:{minzoom:13,maxzoom:20},mapId:"map_2"}),Object(i.jsx)(l,{map1Id:"map_1",map2Id:"map_2"})]})).bind({});m.parameters={},m.args={},m.parameters={storySource:{source:'(args) => (\n  <>\n    <MlWmsLayer\n      url="https://www.wms.nrw.de/geobasis/wms_nw_uraufnahme"\n      urlParameters={{\n        layers: "nw_uraufnahme_rw",\n      }}\n      sourceOptions={{\n        minzoom: 13,\n        maxzoom: 20,\n      }}\n      mapId="map_2"\n    />\n    <MlLayerSwipe map1Id="map_1" map2Id="map_2" />\n  </>\n)'},...m.parameters}},1116:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return f}));var n=r(0),o=r(3),a=r.n(o),s=r(51),i=r(1);const c=e=>{const t=Object(s.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(e.layerId||"MlOsmLayer-"+t.componentId);return Object(n.useEffect)(()=>{t.map&&(t.map.addSource(r.current,{type:"raster",tileSize:256,...e.sourceOptions},t.componentId),t.map.addLayer({id:r.current,type:"raster",source:r.current,minzoom:0,maxzoom:22,...e.layerOptions},e.insertBeforeLayer,t.componentId))},[e,t.map]),Object(i.jsx)(i.Fragment,{})};c.propTypes={mapId:a.a.string,idPrefix:a.a.string,sourceOptions:a.a.object,layerOptions:a.a.object,insertBeforeLayer:a.a.string},c.__docgenInfo={description:"Adds a standard OSM tile layer to the maplibre-gl instancereference by\nprops.mapId\n\n@component",methods:[],displayName:"MlOsmLayer",props:{mapId:{type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapHook"},idPrefix:{type:{name:"string"},required:!1,description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance"},sourceOptions:{type:{name:"object"},required:!1,description:"Options object that will be used as first parameter on the MapLibreGl.addSource call see MapLibre source options documentation."},layerOptions:{type:{name:"object"},required:!1,description:"Options object that will be used as first parameter on the MapLibreGl.addLayer call see MapLibre layer options documentation."},insertBeforeLayer:{type:{name:"string"},required:!1,description:'The layerId of an existing layer this layer should be rendered visually beneath\nhttps://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property'}}};var l=c;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlOsmLayer/MlOsmLayer.js"]={name:"MlOsmLayer",docgenInfo:c.__docgenInfo,path:"src/components/MlOsmLayer/MlOsmLayer.js"});var p=r(86),u=r(210),d=r(37);const m={title:"MapComponents/MlOsmLayer",component:l,argTypes:{options:{control:{type:"object"}}},decorators:d.a};t.default=m;const f=(e=>{const[t,r]=Object(n.useState)(!0);return Object(i.jsxs)(p.a,{children:[Object(i.jsx)(u.a,{color:"primary",variant:t?"contained":"outlined",onClick:()=>r(!t),children:"OSM"}),t&&Object(i.jsx)(l,{...e})]})}).bind({});f.args={sourceOptions:{tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg"],attribution:'Map tiles by <a target="_top" rel="noopener" href="http://stamen.com">Stamen Design</a>, under <a target="_top" rel="noopener" href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a target="_top" rel="noopener" href="http://openstreetmap.org">OpenStreetMap</a>, under <a target="_top" rel="noopener" href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'},layerOptions:{}},f.parameters={storySource:{source:'(props) => {\n  const [showLayer, setShowLayer] = useState(true);\n\n  return (\n    <TopToolbar>\n      <Button\n        color="primary"\n        variant={showLayer ? "contained" : "outlined"}\n        onClick={() => setShowLayer(!showLayer)}\n      >\n        OSM\n      </Button>\n      {showLayer && <MlOsmLayer {...props} />}\n    </TopToolbar>\n  );\n}'},...f.parameters}},1117:function(e,t,r){"use strict";r.r(t),r.d(t,"Toolbar",(function(){return m})),r.d(t,"Overlay",(function(){return f}));var n=r(0),o=r(51),a=r(1);const s=e=>{const t=Object(n.useRef)(0),r=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[s,i]=Object(n.useState)(0),[c,l]=Object(n.useState)(""),p=Object(n.useCallback)(()=>{var n,o;if((null===(n=r.map)||void 0===n?void 0:n.map.getZoom())===t.current)return;if(!r.map)return;t.current=null===(o=r.map)||void 0===o?void 0:o.map.getZoom();const a=e.maxWidth||100,s=r.map._container.clientHeight/2,i=r.map.unproject([0,s]),c=r.map.unproject([a,s]),l=i.distanceTo(c);if("imperial"===e.unit){const e=3.2808*l;if(e>5280){u(a,e/5280,r.map._getUIString("ScaleControl.Miles"))}else u(a,e,r.map._getUIString("ScaleControl.Feet"))}else if("nautical"===e.unit){u(a,l/1852,r.map._getUIString("ScaleControl.NauticalMiles"))}else l>=1e3?u(a,l/1e3,r.map._getUIString("ScaleControl.Kilometers")):u(a,l,r.map._getUIString("ScaleControl.Meters"))},[r.map,e.unit,e.maxWidth]);Object(n.useEffect)(()=>{if(!r.map)return;let e=p;return r.map.on("move",e,r.componentId),p(),()=>{r.map.off("move",e)}},[r.map,p]);const u=(e,t,r)=>{const n=d(t);i(e*(n/t)),l(n+"&nbsp;"+r)},d=e=>{const t=Math.pow(10,"".concat(Math.floor(e)).length-1);let r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:(e=>{const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t})(r),t*r};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{style:{backgroundColor:"hsla(0,0%,100%,.75)",fontSize:"10px",border:"2px solid #333",borderTop:"#333",padding:"0 5px",color:"#333",boxSizing:"border-box",width:s+"px",fontFamily:"sans-serif"},dangerouslySetInnerHTML:{__html:c}})})};s.__docgenInfo={description:"",methods:[],displayName:"MlScaleReference"};var i=s;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlScaleReference/MlScaleReference.js"]={name:"MlScaleReference",docgenInfo:s.__docgenInfo,path:"src/components/MlScaleReference/MlScaleReference.js"});var c=r(86),l=r(37),p=r(430);const u={title:"MapComponents/MlScaleReference",component:i,argTypes:{url:{},layer:{}},decorators:l.a};t.default=u;const d=e=>{const t=Object(p.a)("(max-width:900px)");return Object(a.jsxs)(a.Fragment,{children:["toolbar"===e.show&&Object(a.jsx)(c.a,{children:Object(a.jsx)(i,{...e})}),"overlay"===e.show&&Object(a.jsx)("div",{style:{position:"absolute",zIndex:1e5,bottom:t?"40px":"20px",right:"20px"},children:Object(a.jsx)(i,{...e})})]})},m=d.bind({});m.args={show:"toolbar"};const f=d.bind({});f.args={show:"overlay"},m.parameters={storySource:{source:'(props) => {\n  const mediaIsMobile = useMediaQuery("(max-width:900px)");\n  return(\n    <>\n      {props.show === "toolbar" && (\n        <TopToolbar>\n          <MlScaleReference {...props} />\n        </TopToolbar>\n      )}\n      {props.show === "overlay" && (\n        <div\n          style={{\n            position: "absolute",\n            zIndex: 100000,\n            bottom: mediaIsMobile ? "40px" : "20px",\n            right: "20px",\n          }}\n        >\n          <MlScaleReference {...props} />\n        </div>\n      )}\n    </>\n  );\n}'},...m.parameters},f.parameters={storySource:{source:'(props) => {\n  const mediaIsMobile = useMediaQuery("(max-width:900px)");\n  return(\n    <>\n      {props.show === "toolbar" && (\n        <TopToolbar>\n          <MlScaleReference {...props} />\n        </TopToolbar>\n      )}\n      {props.show === "overlay" && (\n        <div\n          style={{\n            position: "absolute",\n            zIndex: 100000,\n            bottom: mediaIsMobile ? "40px" : "20px",\n            right: "20px",\n          }}\n        >\n          <MlScaleReference {...props} />\n        </div>\n      )}\n    </>\n  );\n}'},...f.parameters}},1118:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return P}));var n=r(0),o=r(3),a=r.n(o),s=r(40),i=r(331),c=r(68),l=r(1);const p=()=>{let e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(null!=e&&e.layers?e.layers:"[]"),e},u=p(),d=e=>{const t=Object(n.useContext)(s.b),r=Object(n.useRef)(!1),o=Object(n.useRef)(void 0),[a,d]=Object(n.useState)(void 0),m=Object(n.useRef)({}),f=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlShareMapState-")+Object(i.a)()),h=Object(c.a)({watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}}),g=Object(n.useRef)(!1),y=Object(n.useRef)(void 0),b=Object(n.useRef)({viewport:{center:!1,bearing:!1,pitch:!1,zoom:!1},layers:{...m}}),v=Object(n.useRef)({}),x=Object(n.useCallback)(()=>{if(!e.active)return;let t=[];for(let e in h.layers)t.push({id:h.layers[e].id,type:h.layers[e].type,visible:h.layers[e].visible});O();let r=new URLSearchParams({...p(),...v.current,layers:JSON.stringify(t)});JSON.parse(Object.fromEntries(r).layers).forEach(e=>{m.current[e.id]=!1});let n=new URLSearchParams(window.location.search);j(h.layers),r.toString()!==n.toString()&&window.history.pushState({...v.current},document.title,"?"+r.toString())},[h.layers,e.active]);Object(n.useEffect)(()=>{let e=f.current;return v.current=p(),()=>{o.current&&(o.current.cleanup(e),o.current=void 0),r.current=!1}},[]),Object(n.useEffect)(()=>{o.current&&x()},[x]),Object(n.useEffect)(()=>{if(!o.current)return;let e=x;return o.current.on("moveend",e,f.current),()=>{var t;null===(t=o.current)||void 0===t||t.off("moveend",e)}},[x,a]),Object(n.useEffect)(()=>{t.mapExists(e.mapId)&&!r.current&&(r.current=!0,o.current=t.getMap(e.mapId),d(o.current),v.current.lat&&v.current.lng&&S())},[t.mapIds,t,e.mapId,e.active]),Object(n.useEffect)(()=>{var e;if(null!=h&&null!==(e=h.layers)&&void 0!==e&&e.length){void 0===y.current&&(y.current={},null==u||u.layers.forEach(e=>{y.current[e.id]=!1}));for(let e in y.current){let t=!0;if(!1===y.current[e]&&(t=!1),t)return}u.layers&&u.layers.forEach(e=>{var t,r,n;null!==(t=o.current)&&void 0!==t&&t.getLayer(e.id)&&!1===y.current[e.id]&&(y.current[e.id]=!0,null===(r=o.current)||void 0===r||null===(n=r.getLayer(e.id))||void 0===n||n.setLayoutProperty("visibility",e.visible?"visible":"none"))})}},[h.layers,e.mapId,e.active]),Object(n.useEffect)(()=>{a&&h.layers&&(e.active||a.cleanup(f.current))},[e.active,a,h.layers]);const O=()=>{v.current.lat=o.current.getCenter().lat,v.current.lng=o.current.getCenter().lng,v.current.zoom=o.current.getZoom(),v.current.bearing=o.current.getBearing(),v.current.pitch=o.current.getPitch()},j=e=>{let t={};e.forEach((e,r,n)=>{n[e.key]||(t[e.key]=!0)})},S=()=>{b.current.viewport.center||(b.current.viewport.center=!0,o.current.setCenter([v.current.lng,v.current.lat]),o.current.setZoom(v.current.zoom),o.current.setBearing(v.current.bearing),o.current.setPitch(v.current.pitch)),g.current=!0};return window.onpopstate=e=>{e.state&&e.state.lng&&e.state.lat&&e.state.zoom&&o.current.easeTo({zoom:e.state.zoom,center:[e.state.lng,e.state.lat]})},Object(l.jsx)(l.Fragment,{})};d.defaultProps={mapId:void 0},d.propTypes={mapId:a.a.string},d.__docgenInfo={description:"TODO: Add short & useful description\n\n@param {object} props\n@param {string} props.mapId Id of the target MapLibre instance in mapContext\n\n@component",methods:[],displayName:"MlShareMapState",props:{mapId:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"}}};var m=d;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlShareMapState/MlShareMapState.js"]={name:"MlShareMapState",docgenInfo:d.__docgenInfo,path:"src/components/MlShareMapState/MlShareMapState.js"});var f=r(37),h=r(51),g=r(322),y=r(1133),b=r(332),v=r(323),x=r.n(v),O=r(324),j=r.n(O),S=r(1136),M=r(320),L=r(631),E=r(1135),C=r(78),I=r(1212),w=r(632),T=r.n(w),_=r(633),R=r.n(_);const A={title:"MapComponents/MlShareMapState",component:m,argTypes:{},decorators:f.a};t.default=A;const P=(()=>{var e;const t=[M,L],[r,o]=Object(n.useState)(!0),a=Object(h.a)({mapId:"map_1"}),s=Object(c.a)({mapId:"map_1",watch:{viewport:!1,layers:!0,sources:!1},filter:{includeBaseLayers:!1}});return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m,{active:r}),t.map((e,t)=>Object(l.jsx)(C.a,{layerId:"GeoJson_"+t,type:"line",geojson:e},"GeoJson_"+t)),Object(l.jsxs)(g.a,{sx:{wordBreak:"break-word"},children:[Object(l.jsxs)(I.a,{size:"small",selected:r,value:r,onChange:()=>{o(!r)},children:[r?Object(l.jsx)(T.a,{}):Object(l.jsx)(R.a,{}),r?"active":"inactive"]}),Object(l.jsx)(E.a,{dense:!0,children:null===(e=s.layers)||void 0===e?void 0:e.map(e=>Object(l.jsx)(y.a,{secondaryAction:Object(l.jsx)(b.a,{edge:"end","aria-label":"toggle visibility",onClick:()=>{var t,r,n,o,s,i;let c=null===(t=a.map)||void 0===t||null===(r=t.getLayer)||void 0===r||null===(n=r.call(t,e.id))||void 0===n?void 0:n.getLayoutProperty("visibility");null===(o=a.map)||void 0===o||null===(s=o.getLayer)||void 0===s||null===(i=s.call(o,e.id))||void 0===i||i.setLayoutProperty("visibility","none"===c?"visible":"none"),a.map.map.fire("zoom")},children:e.visible?Object(l.jsx)(x.a,{}):Object(l.jsx)(j.a,{})}),children:Object(l.jsx)(S.a,{primary:e.id,secondary:""})},e.id))},"layers")]})]})}).bind({});P.parameters={},P.args={},P.parameters={storySource:{source:'() => {\n  const geoJsonArray = [sample_geojson_1, sample_geojson_2];\n  const [watchState, setWatchState] = useState(true);\n  const mapHook = useMap({ mapId: "map_1" });\n  const mapState = useMapState({\n    mapId: "map_1",\n    watch: {\n      viewport: false,\n      layers: true,\n      sources: false,\n    },\n    filter: {\n      includeBaseLayers: false,\n    },\n  });\n\n  return (\n    <>\n      <MlShareMapState active={watchState} />\n      {geoJsonArray.map((el, i) => (\n        <MlGeoJsonLayer layerId={"GeoJson_" + i} type="line" geojson={el} key={"GeoJson_" + i} />\n      ))}\n      <Sidebar sx={{ wordBreak: "break-word" }}>\n        <ToggleButton\n          size="small"\n          selected={watchState}\n          value={watchState}\n          onChange={() => {\n            setWatchState(!watchState);\n          }}\n        >\n          {watchState ? <CheckCircleOutlineIcon /> : <ErrorOutlineIcon />}\n\n          {watchState ? "active" : "inactive"}\n        </ToggleButton>\n        <List dense key="layers">\n          {mapState.layers?.map((el) => (\n            <ListItem\n              key={el.id}\n              secondaryAction={\n                <IconButton\n                  edge="end"\n                  aria-label="toggle visibility"\n                  onClick={() => {\n                    let currentVisibility = mapHook.map\n                      ?.getLayer?.(el.id)\n                      ?.getLayoutProperty("visibility");\n                    mapHook.map\n                      ?.getLayer?.(el.id)\n                      ?.setLayoutProperty(\n                        "visibility",\n                        currentVisibility === "none" ? "visible" : "none"\n                      );\n                    mapHook.map.map.fire("zoom");\n                  }}\n                >\n                  {el.visible ? <VisibilityIcon /> : <VisibilityOffIcon />}\n                </IconButton>\n              }\n            >\n              <ListItemText primary={el.id} secondary={""} />\n            </ListItem>\n          ))}\n        </List>\n      </Sidebar>\n    </>\n  );\n}'},...P.parameters}},1119:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return j}));var n=r(0),o=r(40),a=r(200),s=r(428),i=r(59),c=r(331),l=r(3),p=r.n(l),u=r(1);const d=e=>{const t=Object(n.useContext)(o.b),r=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlSpatialElevationProfile-")+Object(c.a)()),l=Object(n.useRef)(null),p=Object(n.useRef)(!1),d=Object(n.useContext)(a.b),m=Object(n.useRef)("elevationprofile-"+Object(c.a)()),f=Object(n.useRef)("elevationprofile-layer-"+Object(c.a)()),h=Object(n.useCallback)((t,r,n,o,a)=>{const c=Object(s.a)([[t,r],[o,a]]),l=Object(i.lineOffset)(c,5,{units:"meters"}),p=l.geometry.coordinates[0][0],u=l.geometry.coordinates[0][1],d=l.geometry.coordinates[1][0],m=l.geometry.coordinates[1][1];return Object(s.b)([[[t,r],[o,a],[d,m],[p,u],[t,r]]],{height:n*e.elevationFactor})},[e.elevationFactor]);return Object(n.useEffect)(()=>{let e=r.current;return()=>{l.current&&(l.current.cleanup(e),l.current=null)}},[]),Object(n.useEffect)(()=>{t.mapExists(e.mapId)&&!p.current&&(p.current=!0,l.current=t.getMap(e.mapId),l.current.addSource(m.current,{type:"geojson",data:d.data},r.current),l.current.addLayer({id:f.current,source:m.current,type:"fill-extrusion",paint:{"fill-extrusion-height":["get","height"],"fill-extrusion-opacity":.9,"fill-extrusion-color":["interpolate",["linear"],["get","height"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"yellow"]}},e.insertBeforeLayer,r.current))},[t.mapIds,e.insertBeforeLayer,e.mapId,d,t]),Object(n.useEffect)(()=>{var t;if(!l.current||!l.current.getLayer(f.current))return;const{data:r}=d;if(!r||!r.features)return;const n=r.features.find(e=>"LineString"===e.geometry.type);if(!n||!n.geometry)return;const o=n.geometry.coordinates.map((e,t)=>e[2]),a=Math.min(...o);let s=Math.max(...o)-a;s=0===s?1:s,l.current.setPaintProperty(f.current,"fill-extrusion-color",["interpolate",["linear"],["get","height"],0,"rgb(0,255,55)",s*e.elevationFactor,"rgb(255,0,0)"]);const c=(e,t,r)=>e*(1-r)+t*r,p=[];n.geometry.coordinates.forEach((e,t)=>{if(n.geometry.coordinates[t+1]){let r=~~(1e3*Object(i.distance)([e[0],e[1]],[n.geometry.coordinates[t+1][0],n.geometry.coordinates[t+1][1]],{units:"kilometers"})/10);r=r<1?1:r;for(let e=0;e<r;e++){const o=c(n.geometry.coordinates[t][0],n.geometry.coordinates[t+1][0],e/r),s=c(n.geometry.coordinates[t][1],n.geometry.coordinates[t+1][1],e/r),i=c(n.geometry.coordinates[t][2]-a,n.geometry.coordinates[t+1][2]-a,e/r),l=c(n.geometry.coordinates[t][0],n.geometry.coordinates[t+1][0],(e+1)/r),u=c(n.geometry.coordinates[t][1],n.geometry.coordinates[t+1][1],(e+1)/r),d=h(o,s,i,l,u);p.push(d)}}});const u=d.getEmptyFeatureCollection();u.features=p,null===(t=l.current.getSource(m.current))||void 0===t||t.setData(u)},[d.data,h,d,e.elevationFactor,t]),Object(u.jsx)(u.Fragment,{})};d.defaultProps={elevationFactor:1},d.propTypes={mapId:p.a.string,idPrefix:p.a.string,elevationFactor:p.a.number,insertBeforeLayer:p.a.string},d.__docgenInfo={description:"MlSpatialElevationProfile returns a Button that will add a standard OSM tile layer to the maplibre-gl instance.\n\n@component",methods:[],displayName:"MlSpatialElevationProfile",props:{elevationFactor:{defaultValue:{value:"1",computed:!1},type:{name:"number"},required:!1,description:"Number describes the factor of the height of the elevation"},mapId:{type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"},idPrefix:{type:{name:"string"},required:!1,description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance"},insertBeforeLayer:{type:{name:"string"},required:!1,description:'The layerId of an existing layer this layer should be rendered visually beneath\nhttps://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property'}}};var m=d;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlSpatialElevationProfile/MlSpatialElevationProfile.js"]={name:"MlSpatialElevationProfile",docgenInfo:d.__docgenInfo,path:"src/components/MlSpatialElevationProfile/MlSpatialElevationProfile.js"});var f=r(246),h=r(37),g=r(319),y=r(634),b=r.n(y),v=r(332),x=r(430);const O={title:"MapComponents/MlSpatialElevationProfile",component:m,argTypes:{options:{control:{type:"object"}}},decorators:h.a};t.default=O;const j=(e=>{const t=Object(x.a)("(max-width:900px)");return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(v.a,{style:{position:"absolute",right:"5px",bottom:t?"145px":"125px",backgroundColor:"rgba(255,255,255,1)",zIndex:1e3},title:"Download sample-data",size:"large",href:"assets/sample.gpx",target:"blank",children:Object(u.jsx)(b.a,{})}),Object(u.jsxs)(g.a,{children:[Object(u.jsx)(f.a,{}),Object(u.jsx)(m,{})]})]})}).bind({});j.parameters={},j.parameters={storySource:{source:'(args) => {\n\n  const mediaIsMobile = useMediaQuery("(max-width:900px)");\n\n  return(\n  <>\n    <IconButton\n      style={{\n        position: "absolute",\n        right: "5px",\n        bottom: mediaIsMobile ? "145px" : "125px",\n        backgroundColor: "rgba(255,255,255,1)",\n\n        zIndex: 1000,\n      }}\n      title="Download sample-data"\n      size="large"\n      href="assets/sample.gpx"\n      target="blank"\n    >\n      <FileDownloadIcon />\n    </IconButton>\n    <GeoJsonProvider>\n      <MlGPXViewer />\n      <MlSpatialElevationProfile />\n    </GeoJsonProvider>\n  </>\n);\n}'},...j.parameters}},1120:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return p}));var n=r(0),o=r(68),a=r(1);const s=e=>{const t=Object(o.a)({mapId:e.mapId,watch:{layers:!0,sources:!1,viewport:!1,...e.watch},filter:{...e.filter}}),r=Object(n.useRef)(0);return r.current=r.current+1,Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{style:{overflow:"hidden",width:"100px",height:"20px"},children:["Render: ",r.current,Object(a.jsx)("br",{}),Object(a.jsx)("pre",{children:JSON.stringify(t,null," ")})]})})};s.defaultProps={mapId:void 0},s.__docgenInfo={description:"Renders a collapsable top-drawer containing live map debug information\n\n@param {object} props\n@param {string} props.mapId Id of the target MapLibre instance in mapContext\n\n@component",methods:[],displayName:"MlUseMapDebugger",props:{mapId:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"}}};var i=s;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlUseMapDebugger/MlUseMapDebugger.js"]={name:"MlUseMapDebugger",docgenInfo:s.__docgenInfo,path:"src/components/MlUseMapDebugger/MlUseMapDebugger.js"});var c=r(37);const l={title:"MapComponents/MlUseMapDebugger",component:i,argTypes:{url:{},layer:{}},decorators:c.a};t.default=l;const p=(e=>Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(i,{...e})})).bind({});p.parameters={},p.args={mapId:"map_1"},p.parameters={storySource:{source:"(props) => {\n  return (\n    <>\n      <MlUseMapDebugger {...props} />\n    </>\n  );\n}"},...p.parameters}},1121:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return m}));var n=r(0),o=r(51),a=r(3),s=r.n(a),i=r(1);const c=e=>{const t=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)({}),a=Object(n.useRef)(e.layerId||"MlVectorTileLayer-"+t.componentId),s=Object(n.useRef)({}),c=Object(n.useRef)({}),l=Object(n.useRef)(!1);return Object(n.useEffect)(()=>{if(t.map&&!l.current){l.current=!0,t.map.addSource(a.current,{type:"vector",tiles:[e.url],tileSize:512,attribution:"",...e.sourceOptions},t.componentId);for(let n in e.layers){let o=a.current+"_"+n;r.current[n]=o,t.map.addLayer({id:o,source:a.current,type:"line",minzoom:0,maxzoom:22,layout:{},paint:{"line-opacity":.5,"line-color":"rgb(80, 80, 80)","line-width":2},...e.layers[n]},e.insertBeforeLayer,t.componentId),s.current[n]=JSON.stringify(e.layers[n].paint),c.current[n]=JSON.stringify(e.layers[n].layout)}}},[t.map,e]),Object(n.useEffect)(()=>{if(t.map&&l.current)for(var n in e.layers)if(t.map.getLayer(r.current[n])){let o=JSON.stringify(e.layers[n].paint);if(o!==s.current[n])for(let o in e.layers[n].paint)t.map.setPaintProperty(r.current[n],o,e.layers[n].paint[o]);s.current[n]=o;let a=JSON.stringify(e.layers[n].layout);if(a!==c.current[n])for(let o in e.layers[n].layout)t.map.setLayoutProperty(r.current[n],o,e.layers[n].layout[o]);c.current[n]=a}},[e.layers,t.map]),Object(i.jsx)(i.Fragment,{})};c.propTypes={mapId:s.a.string,sourceOptions:s.a.object,layers:s.a.object,url:s.a.string},c.__docgenInfo={description:"Adds a vector-tile source and 0...n vector-tile-layers to the MapLibre instance referenced by\nprops.mapId\n\n@component",methods:[],displayName:"MlVectorTileLayer",props:{mapId:{type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"},sourceOptions:{type:{name:"object"},required:!1,description:"Options object that will be used as first parameter on the MapLibreGl.addSource call see MapLibre source options documentation."},layers:{type:{name:"object"},required:!1,description:"Object that hold layers"},url:{type:{name:"string"},required:!1,description:"String of the URL of a wms layer"}}};var l=c;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlVectorTileLayer/MlVectorTileLayer.js"]={name:"MlVectorTileLayer",docgenInfo:c.__docgenInfo,path:"src/components/MlVectorTileLayer/MlVectorTileLayer.js"});var p=r(86),u=r(37);const d={title:"MapComponents/MlVectorTileLayer",component:l,argTypes:{url:{},layer:{}},decorators:u.a};t.default=d;const m=(e=>Object(i.jsx)(p.a,{children:Object(i.jsx)(l,{...e})})).bind({});m.parameters={},m.args={mapId:"map_1",url:"https://wms.wheregroup.com/tileserver/tile/tileserver.php?/europe-0-14/index.json?/europe-0-14/{z}/{x}/{y}.pbf",layers:{landuseLine:{"source-layer":"landuse",layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":2,"line-color":"#ff0000"}}},sourceOptions:{minzoom:0,maxzoom:20}},m.parameters={storySource:{source:"(args) => (\n  <TopToolbar>\n    <MlVectorTileLayer {...args} />\n  </TopToolbar>\n)"},...m.parameters}},1122:function(e,t,r){"use strict";r.r(t),r.d(t,"ExampleConfig",(function(){return m}));var n=r(0),o=r(3),a=r.n(o),s=r(40),i=r(331),c=r(1);const l=e=>{const t=Object(n.useContext)(s.b),r=Object(n.useRef)(!1),o=Object(n.useRef)(void 0),a=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlWmsFeatureInfoPopup-")+Object(i.a)());return Object(n.useEffect)(()=>{let e=a.current;return()=>{o.current&&(o.current.cleanup(e),o.current=void 0),r.current=!1}},[]),Object(n.useEffect)(()=>{t.mapExists(e.mapId)&&!r.current&&(r.current=!0,o.current=t.getMap(e.mapId),o.current.setCenter([7.132122000552613,50.716405378037706]))},[t.mapIds,t,e.mapId]),Object(c.jsx)(c.Fragment,{})};l.defaultProps={mapId:void 0},l.propTypes={mapId:a.a.string},l.__docgenInfo={description:"TODO: Add short & useful description\n\n@param {object} props\n@param {string} props.mapId Id of the target MapLibre instance in mapContext\n\n@component",methods:[],displayName:"MlWmsFeatureInfoPopup",props:{mapId:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"}}};var p=l;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlWmsFeatureInfoPopup/MlWmsFeatureInfoPopup.js"]={name:"MlWmsFeatureInfoPopup",docgenInfo:l.__docgenInfo,path:"src/components/MlWmsFeatureInfoPopup/MlWmsFeatureInfoPopup.js"});var u=r(37);const d={title:"MapComponents/MlWmsFeatureInfoPopup",component:p,argTypes:{url:{},layer:{}},decorators:u.a};t.default=d;const m=(e=>Object(c.jsx)(p,{})).bind({});m.parameters={},m.args={},m.parameters={storySource:{source:"(args) => <MlWmsFeatureInfoPopup />"},...m.parameters}},139:function(e,t,r){"use strict";var n=r(0),o=r(40),a=r(152),s=r.n(a);var i=function(e){var t=this;let r=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[]},this.wrapper={on:(e,t,n,o)=>{if(!r.eventHandlers[e])return;"string"==typeof n&&(o=n,n={}),r.eventHandlers[e].push({handler:t,options:n});let a=[e,t];o&&"string"==typeof o&&(r.initRegisteredElements(o),r.registeredElements[o].wrapperEvents.push(a))},off:(e,t)=>{r.eventHandlers[e]&&(r.eventHandlers[e]=r.eventHandlers[e].filter(e=>!Object.is(e.handler,t)&&e))},fire:(e,t)=>{if(!r.eventHandlers[e])return;var n=t||window;let o=new Event(e);o.data=r,r.eventHandlers[e].forEach((function(e){e.handler.call(n,o)}))},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:e=>({id:e.id,type:e.type,visible:"none"!==e.visibility,baseLayer:-1!==r.baseLayers.indexOf(e.id)}),buildLayerObjects:()=>r.style._order.map(e=>r.wrapper.buildLayerObject(r.map.style._layers[e])).filter(e=>e),refreshLayerState:()=>{r.wrapper.layerState=r.wrapper.buildLayerObjects(),JSON.stringify(r.wrapper.layerState)!==r.wrapper.layerStateString&&(r.wrapper.fire("layerchange"),r.wrapper.layerStateString=JSON.stringify(r.wrapper.layerState))},viewportState:{},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:()=>"function"==typeof r.map.getCenter?{center:(e=>{let{lng:t,lat:r,...n}=e;return{lng:t,lat:r}})(r.map.getCenter()),zoom:r.map.getZoom(),bearing:r.map.getBearing(),pitch:r.map.getPitch()}:{},refreshViewport:()=>{r.wrapper.viewportState=r.wrapper.getViewport()}},this.initRegisteredElements=(e,t)=>{(void 0===r.registeredElements[e]||"undefined"!==t&&t)&&(r.registeredElements[e]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=(e,t,n)=>{r.map.style&&(n&&"string"==typeof n&&void 0!==e.id&&(r.initRegisteredElements(n),r.registeredElements[n].layers.push(e.id),"object"==typeof e.source&&r.registeredElements[n].sources.push(e.id)),r.map.addLayer(e,t))},this.addSource=(e,t,n,o)=>{if(r.map.style){if("string"==typeof n&&void 0===o)return r.addSource.call(r,e,t,void 0,n);o&&"string"==typeof o&&void 0!==e&&(r.initRegisteredElements(o),r.registeredElements[o].sources.push(e)),r.map.addSource(e,t,n)}},this.addImage=(e,t,n,o)=>{if(r.map.style){if("string"==typeof n&&void 0===o)return r.addImage.call(r,e,t,void 0,n);o&&"string"==typeof o&&void 0!==e&&(r.initRegisteredElements(o),r.registeredElements[o].images.push(e)),r.map.addImage(e,t,n)}},this.on=(e,t,n,o)=>{if("string"==typeof n&&"function"==typeof t)return r.on.call(r,e,void 0,t,n);let a=[e,t,n];t||(a=[e,n]),o&&"string"==typeof o&&(r.initRegisteredElements(o),r.registeredElements[o].events.push(a)),r.map.on(...a)},this.addControl=(e,t,n)=>{n&&"string"==typeof n&&(r.initRegisteredElements(n),r.registeredElements[n].controls.push(e)),r.map.addControl(e,t)},this.cleanup=e=>{r.map.style&&void 0!==r.registeredElements[e]&&(r.registeredElements[e].layers.forEach(e=>{r.map.style.getLayer(e)&&r.map.style.removeLayer(e)}),r.registeredElements[e].sources.forEach(e=>{r.map.style.getSource(e)&&r.map.style.removeSource(e)}),r.registeredElements[e].images.forEach(e=>{r.map.hasImage(e)&&r.map.style.removeImage(e)}),r.registeredElements[e].events.forEach(e=>{r.map.off(...e)}),r.registeredElements[e].controls.forEach(e=>{r.map.removeControl(e)}),r.registeredElements[e].wrapperEvents.forEach(e=>{r.wrapper.off(...e)}),r.initRegisteredElements(e,!0))};["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"].forEach(e=>{this[e]=function(){return r.map&&t.map.style&&"function"==typeof r.map.style[e]&&r.map.style[e](...arguments),r.map._update?r.map._update(!0):void 0}});["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"].forEach(e=>{this[e]=function(){return!(!r.map||!r.map.style)&&r.map.style[e](...arguments)}}),this.addNativeMaplibreFunctionsAndProps=()=>{Object.getOwnPropertyNames(Object.getPrototypeOf(this.map)).forEach(e=>{void 0===this[e]&&(this[e]=function(){return r.map[e](...arguments)})}),Object.keys(this.map).forEach(e=>{void 0===this[e]&&(this[e]=r.map[e])})};["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"].forEach(e=>{this[e]=function(){if("function"==typeof r.map[e]){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.map[e].call(r.map,...n)}}});(async()=>{"string"==typeof e.mapOptions.style&&-1===e.mapOptions.style.indexOf("mapbox://")&&await fetch(e.mapOptions.style).then(e=>{if(e.ok)return e.json();throw new Error("error loading map style.json")}).then(t=>{t.layers.forEach(e=>{r.baseLayers.push(e.id),r.firstSymbolLayer||"symbol"!==e.type||(r.firstSymbolLayer=e.id)}),r.styleJson=t,e.mapOptions.style=t}).catch(e=>{console.log(e)}),r.map=new s.a.Map(e.mapOptions),r.addNativeMaplibreFunctionsAndProps(),r.wrapper.refreshViewport(),r.wrapper.fire("viewportchange"),r.map.on("load",()=>{r.addNativeMaplibreFunctionsAndProps()}),r.map.on("move",()=>{r.wrapper.viewportState=r.wrapper.getViewport(),r.wrapper.fire("viewportchange")}),r.map.on("idle",()=>{r.wrapper.refreshLayerState()}),r.map.on("data",()=>{r.wrapper.refreshLayerState()}),"function"==typeof e.onReady&&e.onReady(r.map,r)})()},c=(r(1015),r(1));const l=e=>{const t=Object(n.useRef)(null),r=Object(n.useRef)(null),a=Object(n.useContext)(o.b),s=Object(n.useRef)(a),l=Object(n.useRef)(e.mapId),p=e.options;return Object(n.useEffect)(()=>{let e=l.current,r=s.current;return()=>{var n,o;r.removeMap(e),null===(n=t.current)||void 0===n||null===(o=n.remove)||void 0===o||o.call(n),t.current=null}},[]),Object(n.useEffect)(()=>{r.current&&(t.current=new i({mapOptions:{container:r.current,...p},onReady:(t,r)=>{t.once("load",()=>{e.mapId?a.registerMap(e.mapId,r):a.setMap(r)}),window.map=r}}))},[r]),Object(c.jsx)("div",{ref:r,className:"mapContainer"})};l.defaultProps={mapId:void 0,options:{lng:8.607,lat:53.1409349,zoom:10,accessToken:"pk.eyJ1IjoibWF4dG9iaSIsImEiOiJjaW1rcWQ5bWMwMDJvd2hrbWZ2ZTBhcnM5In0.NcGt5NmLP5Q1WC7P5u6qUA"}},l.__docgenInfo={description:"Creates a MapLibreGlWrapper instance and registers it in MapContext\nafter the MapLibre-gl load event has fired.\n\nMapLibreMap returns the html node that will be used by MapLibre-gl to render the map.\nThis Component must be kept unaware of any related components that interact with the MapLibre-gl\ninstance.\n\n@component",methods:[],displayName:"MapLibreMap",props:{mapId:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:"Id of the MapLibreGl(Wrapper) instance in mapContext"},options:{defaultValue:{value:'{\n  lng: 8.607,\n  lat: 53.1409349,\n  zoom: 10,\n  accessToken:\n    "pk.eyJ1IjoibWF4dG9iaSIsImEiOiJjaW1rcWQ5bWMwMDJvd2hrbWZ2ZTBhcnM5In0.NcGt5NmLP5Q1WC7P5u6qUA",\n}',computed:!1},type:{name:"object"},required:!1,description:"Config object that is passed to the MapLibreGl constructor as first parameter.\nSee https://maplibre.org/maplibre-gl-js-docs/api/map/ for a formal documentation of al\navailable properties."}}};t.a=l;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MapLibreMap/MapLibreMap.js"]={name:"MapLibreMap",docgenInfo:l.__docgenInfo,path:"src/components/MapLibreMap/MapLibreMap.js"})},175:function(e,t,r){"use strict";var n=r(0),o=r(210),a=r(1137),s=r(607),i=r.n(s),c=r(608),l=r.n(c),p=r(317),u=r.n(p),d=r(249),m=r(245),f=r(430),h=r(51),g=r(1);const y=e=>{const t=Object(h.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,s]=Object(n.useState)(0),[c,p]=Object(n.useState)(!1),y=Object(f.a)("(max-width:900px)"),b={minWidth:"20px",minHeight:"20px",width:y?"50px":"30px",height:y?"50px":"30px",backgroundColor:"#414141",borderRadius:"23%",margin:.15,fontSize:y?"1.5em":"1.2em",":hover":{backgroundColor:"#515151"},color:"#ececec"};Object(n.useEffect)(()=>{t.map&&(t.map.on("pitchend",()=>{s(t.map.getPitch())}),s(t.map.getPitch()))},[t.map,e.mapId]);const v=e=>{t.map.setCenter([e.coords.longitude,e.coords.latitude])},x=()=>{console.log("Access of user location denied"),p(!0)};return Object(g.jsxs)("div",{style:{zIndex:501,position:"absolute",right:y?"15px":"5px",bottom:y?"40px":"20px",display:"flex",flexDirection:"column"},children:[Object(g.jsx)(d.a,{style:{width:"31px",position:"relative",height:y?"55px":"45px",marginLeft:y?"3px":"-5px",transform:y?"scale(1.6)":"scale(1)"},backgroundStyle:{boxShadow:"0px 0px 18px rgba(0,0,0,.5)"}}),Object(g.jsx)(o.a,{sx:{...b,fontWeight:600},onClick:()=>{if(!t.map)return;let e=60;0!==t.map.getPitch()&&(e=0),t.map.easeTo({pitch:e})},children:r?"2D":"3D"}),Object(g.jsx)(o.a,{sx:b,onClick:()=>{navigator.geolocation.getCurrentPosition(v,x)},disabled:c,children:Object(g.jsx)(u.a,{sx:{fontSize:y?"1.5em":"1.2em"}})}),Object(g.jsx)(m.a,{style:{...(e=>{let{color:t,...r}=e;return r})(b)}}),Object(g.jsxs)(a.a,{orientation:"vertical",sx:{width:"50px",border:"none",Button:{minWidth:"20px !important",border:"none",padding:0},"Button:hover":{border:"none"}},children:[Object(g.jsx)(o.a,{sx:{...b,color:"#ececec"},onClick:()=>{t.map&&t.map.transform._zoom+.5<=t.map.transform._maxZoom&&t.map.easeTo({zoom:t.map.transform._zoom+.5})},children:Object(g.jsx)(i.a,{sx:{fontSize:y?"1.5em":"1.2em"}})}),Object(g.jsx)(o.a,{sx:{...b,color:"#ececec"},onClick:()=>{t.map&&t.map.transform._zoom-.5>=t.map.transform._minZoom&&t.map.easeTo({zoom:t.map.transform._zoom-.5})},children:Object(g.jsx)(l.a,{sx:{fontSize:y?"1.5em":"1.2em"}})})]})]})};y.__docgenInfo={description:"",methods:[],displayName:"MlNavigationTools"},t.a=y,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlNavigationTools/MlNavigationTools.js"]={name:"MlNavigationTools",docgenInfo:y.__docgenInfo,path:"src/components/MlNavigationTools/MlNavigationTools.js"})},200:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0);const o=r.n(n).a.createContext({}),a=o.Provider;t.b=o},201:function(e,t,r){"use strict";r(0);var n=r(40),o=r(139),a=(r(576),r(253)),s=r(646),i=r(175),c=r(1);const l=Object(a.a)({}),p=[e=>Object(c.jsx)("div",{className:"fullscreen_map",children:Object(c.jsx)(s.a,{theme:l,children:Object(c.jsx)(n.a,{children:Object(c.jsxs)("div",{style:{overflow:"hidden",position:"absolute",top:"0",bottom:"0",left:"0",right:"0"},children:[Object(c.jsx)(e,{}),Object(c.jsxs)("div",{className:"maps",children:[Object(c.jsx)(o.a,{mapId:"map_1",options:{zoom:14.5,style:"https://wms.wheregroup.com/tileserver/style/osm-liberty.json",center:[7.0851268,50.73884]}}),Object(c.jsx)(o.a,{mapId:"map_2",options:{zoom:14.5,style:"https://wms.wheregroup.com/tileserver/style/osm-bright.json",center:[7.0851268,50.73884]}}),Object(c.jsx)(i.a,{mapId:"map_1"})]})]})})})})];t.a=p},245:function(e,t,r){"use strict";var n=r(0),o=r(51),a=r(210),s=r(317),i=r.n(s),c=r(59),l=r(78),p=r(1);const u=e=>{const t=Object(o.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,s]=Object(n.useState)(!1),[u,d]=Object(n.useState)(void 0),[m,f]=Object(n.useState)(!1),[h,g]=Object(n.useState)(),[y,b]=Object(n.useState)(0),v=Object(n.useCallback)(r=>{if(!t.map)return;if(t.map.flyTo({center:[r.coords.longitude,r.coords.latitude],zoom:18,speed:1,curve:1}),!e.showUserLocation)return;const n=Object(c.point)([r.coords.longitude,r.coords.latitude]);d(n),g(Object(c.circle)(n,r.coords.accuracy/1e3))},[t.map,e]),x=e=>{console.log("Access of user location denied"),f(!0)},O=Object(n.useMemo)(()=>{if(!u)return;let e=y-15,t=y+15;let r=Object(c.lineArc)(u,.02,e,t,{steps:65});return r.geometry.coordinates.push(u.geometry.coordinates),r.geometry.coordinates.slice(0,0,u.geometry.coordinates),r},[y,u]),j=e=>{b(-e.alpha)};return Object(n.useEffect)(()=>{if(r){let e=j;return window.addEventListener("deviceorientation",e),()=>{window.removeEventListener("deviceorientation",e)}}},[r]),Object(n.useEffect)(()=>{if(t.map&&r){let e=navigator.geolocation.watchPosition(v,x);return()=>{navigator.geolocation.clearWatch(e)}}},[t.map,r,v]),Object(p.jsxs)(p.Fragment,{children:[r&&u&&Object(p.jsx)(l.a,{geojson:h,type:"fill",paint:{"fill-color":"#cbd300","fill-opacity":.3,...e.accuracyPaint},insertBeforeLayer:e.insertBeforeLayer}),r&&O&&Object(p.jsx)(l.a,{geojson:O,type:"fill",paint:{"fill-color":"#0000ff","fill-antialias":!1,"fill-opacity":.3},insertBeforeLayer:e.insertBeforeLayer}),r&&u&&Object(p.jsx)(l.a,{geojson:u,type:"circle",paint:{"circle-color":"#009ee0","circle-radius":5,"circle-stroke-color":"#fafaff","circle-stroke-width":1,...e.circlePaint},insertBeforeLayer:e.insertBeforeLayer}),Object(p.jsxs)(a.a,{sx:{zIndex:1002,color:r?e.onColor:e.offColor,...e.style},disabled:m,onClick:()=>{s(!r)},children:[" ",Object(p.jsx)(i.a,{sx:{fontSize:e.style.fontSize}})," "]})]})};u.defaultProps={mapId:void 0,style:{minWidth:"30px",minHeight:"30px",width:"30px",height:"30px",backgroundColor:"#414141",borderRadius:"23%",margin:.15,fontSize:"1.3em",":hover":{backgroundColor:"#515151",color:"#ececec"}},onColor:"#ececec",offColor:"#666",showAccuracyCircle:!0,showUserLocation:!0,showOrientation:!0},u.__docgenInfo={description:"Adds a button that makes the map follow the users GPS position using\nnavigator.geolocation.watchPosition if activated\n\n@param {object} props\n@param {string} props.mapId Id of the target MapLibre instance in mapContext\n\n@component",methods:[],displayName:"MlFollowGps",props:{mapId:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"},style:{defaultValue:{value:'{\n  minWidth: "30px",\n  minHeight: "30px",\n  width: "30px",\n  height: "30px",\n  backgroundColor: "#414141",\n  borderRadius: "23%",\n  margin: 0.15,\n  fontSize: "1.3em",\n  ":hover": {\n    backgroundColor: "#515151",\n    color: "#ececec",\n  },\n}',computed:!1},type:{name:"object"},required:!1,description:"CSS style object that is applied to the button component"},onColor:{defaultValue:{value:'"#ececec"',computed:!1},type:{name:"string"},required:!1,description:"Active button font color"},offColor:{defaultValue:{value:'"#666"',computed:!1},type:{name:"string"},required:!1,description:"Inactive button font color"},showAccuracyCircle:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:"By default, if showUserLocation is true, a transparent circle will be drawn around the user location \nindicating the accuracy (95% confidence level) of the user's location. Set to false to disable."},showUserLocation:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:"By default a dot will be shown on the map at the user's location. Set to false to disable."},showOrientation:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:"By default a cone will be shown on the map at the user's location to indicate the device's orientation.\nSet to false to disable."},accuracyPaint:{type:{name:"object"},required:!1,description:'Accuracy paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the accuracy circle.\nUse any available paint prop from layer type "fill".\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill'},circlePaint:{type:{name:"object"},required:!1,description:'position circle paint property object, that is passed to the MlGeoJsonLayer responsible for drawing the accuracy circle.\nUse any available paint prop from layer type "fill".\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill'}}},t.a=u,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlFollowGps/MlFollowGps.js"]={name:"MlFollowGps",docgenInfo:u.__docgenInfo,path:"src/components/MlFollowGps/MlFollowGps.js"})},246:function(e,t,r){"use strict";var n=r(0),o=r(59),a=r(1141),s=r(645),i=r(644),c=r(332),l=r(616),p=r.n(l),u=r(615),d=r.n(u),m=r(152),f=r(1135),h=r(1133),g=r(1136),y=r(200),b=r(614),v=r(430),x=r(51),O=r(1);const j=e=>{const t=Object(n.useContext)(y.b),r=Object(n.useRef)(!1),l=Object(x.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),u="importer-layer-lines",j="importer-layer-points",[S,M]=Object(n.useState)(!1),L=Object(n.useRef)(null),[E,C]=Object(n.useState)(0),[I,w]=Object(n.useState)([]),T=Object(n.useRef)(null),_=Object(v.a)("(max-width:900px)"),R=Object(n.useRef)(new m.Popup({closeButton:!1,closeOnClick:!0}));Object(n.useEffect)(()=>{l.map&&!r.current&&(r.current=!0,l.map.addSource("import-source",{type:"geojson",data:t.data},l.componentId),l.map.addLayer({id:u,source:"import-source",type:"line",paint:{"line-width":4,"line-color":"rgba(212, 55, 23,0.5)"}},e.insertBeforeLayer,l.componentId),l.map.addLayer({id:j,source:"import-source",type:"circle",paint:{"circle-color":"rgba(72, 77, 99,0.5)","circle-radius":7},filter:["==","$type","Point"]},e.insertBeforeLayer,l.componentId),[u,j].forEach(e=>{l.map.setLayoutProperty(e,"visibility","visible")}),l.map.on("mouseenter",j,e=>{const t=e.features[0].geometry.coordinates.slice(),r=e.features[0].properties.name;for(;Math.abs(e.lngLat.lng-t[0])>180;)t[0]+=e.lngLat.lng>t[0]?360:-360;R.current.setLngLat(t).setHTML(r).addTo(l.map)},l.componentId),l.map.on("mouseleave","places",(function(){l.map.getCanvas().style.cursor="",R.current.remove()}),l.componentId),l.map.setZoom(10))},[l.map]),Object(n.useEffect)(()=>{const e=L.current,t=e=>{C(1e3),A(e)},r=()=>{C(0)},n=e=>{C(0),A(e)};return window.addEventListener("dragenter",t),window.addEventListener("dragover",A),e.addEventListener("dragleave",r),window.addEventListener("drop",n),()=>{window.removeEventListener("dragenter",t),window.removeEventListener("dragover",A),e.removeEventListener("dragleave",r),window.removeEventListener("drop",n)}});const A=e=>{e.preventDefault(),e.stopPropagation()};Object(n.useEffect)(()=>{if(!l.map)return;const t=e.visible?"visible":"none";[u,j].forEach(e=>{l.map.setLayoutProperty(e,"visibility",t)})},[e.visible]);const P=e=>{if(l.map)try{w([]);const r=(new DOMParser).parseFromString(e,"application/xml");r.querySelector("metadata").childNodes.forEach(e=>{let t=e.textContent;const r=e.nodeName;if("link"===e.nodeName&&(t=e.getAttribute("href")),t.trim().length){const e={title:r,value:t,id:(new Date).getTime()};w(t=>[...t,e])}});const n=b.a.gpx(r);t.setData(n),l.map.getSource("import-source").setData(n);const a=Object(o.bbox)(n);l.map.fitBounds(a)}catch(e){console.log(e)}};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{style:{position:"fixed",right:"5px",bottom:_?"40px":"25px",display:"flex",flexDirection:"column",gap:"5px",zIndex:1e3},children:[Object(O.jsxs)(c.a,{onClick:()=>{T.current.click()},style:{backgroundColor:"rgba(255,255,255,1)"},size:"large",children:[Object(O.jsx)("input",{ref:T,onChange:()=>{const e=T.current.files[0];if(!e)return!1;const t=new FileReader;t.onload=e=>{P(e.currentTarget.result)},t.readAsText(e)},type:"file",id:"input",multiple:!0,style:{display:"none"}}),Object(O.jsx)(d.a,{})]}),Object(O.jsx)(c.a,{onClick:()=>{M(e=>!e)},style:{backgroundColor:"rgba(255,255,255,1)"},size:"large",children:Object(O.jsx)(p.a,{})})]}),Object(O.jsxs)(i.a,{variant:"persistent",anchor:"left",open:S,children:[Object(O.jsx)(s.a,{variant:"h6",style:{textAlign:"center",padding:"1em"},noWrap:!0,children:"Informationen zur Route"}),Object(O.jsx)(a.a,{}),Object(O.jsx)(f.a,{children:I.map(e=>Object(O.jsx)(h.a,{children:Object(O.jsx)(g.a,{primary:e.value})},"item--".concat(e.id)))})]}),Object(O.jsx)("div",{onDrop:e=>{if(e.preventDefault(),e.dataTransfer.items){if(e.dataTransfer.items.length>1)return!1;if("file"===e.dataTransfer.items[0].kind){const t=new FileReader;t.onload=e=>{P(e.currentTarget.result)};const r=e.dataTransfer.items[0].getAsFile();t.readAsText(r)}}},ref:L,style:{position:"absolute",left:"0",top:"0",backgroundColor:"rgba(255,255,255,0.5)",width:"100%",height:"100%",zIndex:E},children:Object(O.jsx)(s.a,{variant:"h6",style:{top:"50%",position:"absolute",left:"50%",msTransform:"translate(-50%, -50%)",transform:" translate(-50%, -50%)"},noWrap:!0,children:"Gpx-Datei ablegen"})})]})};j.defaultProps={visible:!0},j.__docgenInfo={description:"MlGPXViewer returns a dropzone and a button to load a GPX Track into the map.\n\n@component",methods:[],displayName:"MlGPXViewer",props:{visible:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:'Sets the layers layout-property "visibility" to "none" if false or "visible" if true'},mapId:{type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapHook"},idPrefix:{type:{name:"string"},required:!1,description:"Prefix of the component id this component uses when adding elements to the MapLibreGl-instance"},insertBeforeLayer:{type:{name:"string"},required:!1,description:'The layerId of an existing layer this layer should be rendered visually beneath\nhttps://maplibre.org/maplibre-gl-js-docs/api/map/#map#addlayer - see "beforeId" property'}}},t.a=j,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlGPXViewer/MlGPXViewer.js"]={name:"MlGPXViewer",docgenInfo:j.__docgenInfo,path:"src/components/MlGPXViewer/MlGPXViewer.js"})},247:function(e,t,r){"use strict";var n=r(0),o=r(331),a=r(40),s=r(68),i=r(1);const c=e=>{const t=Object(n.useContext)(a.b),r=Object(s.a)({mapId:e.mapId,watch:{viewport:!1,layers:!0,sources:!1}}),c=Object(n.useRef)(!1),l=Object(n.useRef)(null),p=Object(n.useRef)((e.layerId?e.layerId:"MlLayer-")+Object(o.a)()),u=Object(n.useRef)(e.layerId||p.current),d=Object(n.useRef)(void 0),m=Object(n.useRef)(void 0);return Object(n.useEffect)(()=>{let e=p.current;return()=>{l.current&&(l.current.cleanup(e),l.current=null)}},[]),Object(n.useEffect)(()=>{var r,n,o;if(!(t.mapExists(e.mapId)&&null!==(r=t.getMap(e.mapId))&&void 0!==r&&null!==(n=r.getLayer)&&void 0!==n&&n.call(r,u)&&c.current&&e.options))return;let a=JSON.stringify(e.options.layout);if(e.options.layout&&a!==m.current){for(o in e.options.layout)l.current.setLayoutProperty(u,o,e.options.layout[o]);m.current=a}let s=JSON.stringify(e.options.paint);if(e.options.paint&&s===d.current)for(o in e.options.paint)l.current.setPaintProperty(u,o,e.options.paint[o])},[e.options,u,t,e]),Object(n.useEffect)(()=>{if(t.mapExists(e.mapId)&&!c.current){if(e.insertBeforeLayer){var n;let t=!1;if(null==r||null===(n=r.layers)||void 0===n||n.forEach(r=>{r.id===e.insertBeforeLayer&&(t=!0)}),!t)return}var o,a;if(l.current=t.getMap(e.mapId),l.current)c.current=!0,l.current.addLayer({id:u.current,type:"background",paint:{"background-color":"rgba(0,0,0,0)"},...e.options},e.insertBeforeLayer,p.current),d.current=JSON.stringify(null===(o=e.options)||void 0===o?void 0:o.paint),m.current=JSON.stringify(null===(a=e.options)||void 0===a?void 0:a.layout)}},[t.mapIds,t,e,r.layers]),Object(i.jsx)(i.Fragment,{})};c.__docgenInfo={description:"",methods:[],displayName:"MlLayer"},t.a=c,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlLayer/MlLayer.js"]={name:"MlLayer",docgenInfo:c.__docgenInfo,path:"src/components/MlLayer/MlLayer.js"})},248:function(e,t,r){"use strict";var n=r(0),o=r(78),a=r(1139),s=r(68),i=r(40),c=r(331),l=r(1);const p=e=>{const t=Object(n.useContext)(i.b),r=Object(s.a)({mapId:e.mapId,watch:{viewport:!0}}),p=Object(n.useRef)(void 0),u=Object(n.useRef)(!1),d=Object(n.useRef)(void 0),m=Object(n.useRef)((e.idPrefix?e.idPrefix:"MlMarker-")+Object(c.a)()),[f,h]=Object(n.useState)({width:"400px",height:"500px"}),[g,y]=Object(n.useState)(void 0);return Object(n.useEffect)(()=>{let e=m.current;return()=>{d.current&&(d.current.cleanup(e),d.current=void 0),u.current=!1}},[]),Object(n.useEffect)(()=>{t.mapExists(e.mapId)&&!u.current&&(u.current=!0,d.current=t.getMap(e.mapId))},[t.mapIds,t,e.mapId]),Object(n.useEffect)(()=>{var t;if(null===(t=d.current)||void 0===t||!t.project)return;const r=d.current.project([e.lng,e.lat]);y(r)},[e.lng,e.lat,r.viewport]),Object(n.useEffect)(()=>{var t,r,n,o;d.current&&null!==(t=p.current)&&void 0!==t&&null!==(r=t.contentWindow)&&void 0!==r&&null!==(n=r.document)&&void 0!==n&&null!==(o=n.body)&&void 0!==o&&o.scrollHeight&&setTimeout(()=>{var t,r,n,o,a,s,i,c;let l=d.current._container.clientHeight-d.current.project([e.lng,e.lat]).y,u=null===(t=p.current)||void 0===t||null===(r=t.contentWindow)||void 0===r||null===(n=r.document)||void 0===n||null===(o=n.body)||void 0===o?void 0:o.scrollHeight,m=null===(a=p.current)||void 0===a||null===(s=a.contentWindow)||void 0===s||null===(i=s.document)||void 0===i||null===(c=i.body)||void 0===c?void 0:c.scrollWidth;h({width:m,height:l<u?l:u})},100)},[e.lng,e.lat,e.content]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(o.a,{geojson:{type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},properties:{}},paint:{"circle-radius":14,"circle-color":"rgba(40,200,20,0.5)"},type:"circle",mapId:e.mapId}),g&&Object(l.jsx)(a.a,{sx:{opacity:.7,position:"fixed",display:"flex",left:g.x,top:g.y,width:f.width,height:f.height,"&:hover":{opacity:1},zIndex:-1},children:Object(l.jsx)("iframe",{style:{width:"100%"},srcDoc:e.content,ref:p,sandbox:"allow-same-origin allow-popups-to-escape-sandbox",frameBorder:"0",title:m.current})})]})};p.defaultProps={mapId:void 0},p.__docgenInfo={description:"Adds a marker to the map and displays a marker description next to it\n\n@param {object} props\n@param {string} props.mapId Id of the target MapLibre instance in mapContext\n@param {number} props.lng\n@param {number} props.lat\n@param {string} props.content\n\n@component",methods:[],displayName:"MlMarker",props:{mapId:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"},lng:{type:{name:"number"},required:!1,description:"Longitude of the marker position"},lat:{type:{name:"number"},required:!1,description:"Latitude of the marker position"},content:{type:{name:"string"},required:!1,description:"Content of the description popup"}}},t.a=p,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlMarker/MlMarker.js"]={name:"MlMarker",docgenInfo:p.__docgenInfo,path:"src/components/MlMarker/MlMarker.js"})},249:function(e,t,r){"use strict";var n=r(206),o=r(0);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){let{title:r,titleId:n,...s}=e;return o.createElement("svg",a({width:"39.675098mm",height:"104.27064mm",viewBox:"0 0 39.675098 104.27064",ref:t,"aria-labelledby":n},s),r?o.createElement("title",{id:n},r):null,o.createElement("g",{transform:"translate(-86.019554,-58.032633)"},o.createElement("path",{style:{strokeWidth:.744756},d:"m 442.74023,219.33594 -117.62695,32.32422 54.71094,31.12304 c -21.99397,41.5931 -32.8507,84.88283 -38.33008,127.89649 -6.86182,50.94051 -5.95715,103.99765 20.23828,155.46484 5.97246,11.72776 13.65817,23.59773 24.38867,35.06641 2.6597,2.84073 5.65602,5.75455 9.12891,8.68164 0.87557,0.7378 1.85363,1.52609 2.95117,2.35547 0.29669,0.22563 0.63616,0.47742 1.02149,0.75586 l 0.58203,0.42578 34.57812,-15.12305 -0.33789,-0.2207 c -0.0265,-0.0151 -0.0842,-0.0587 -0.18359,-0.13086 -0.46723,-0.34885 -0.9819,-0.76796 -1.56055,-1.25 -2.29757,-1.91343 -4.46539,-4.04643 -6.64062,-6.33985 -8.80052,-9.27114 -15.30333,-19.4993 -20.83985,-30.13867 -24.42289,-46.90715 -24.77465,-97.03535 -18.58008,-146.68164 4.94388,-37.37493 13.65299,-74.4847 30.20508,-109.92969 l 58.6211,33.34766 z",transform:"scale(0.26458333)"})))}const i=o.forwardRef(s);var c;r.p;function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){let{title:r,titleId:n,...a}=e;return o.createElement("svg",l({width:"39.675098mm",height:"104.27064mm",viewBox:"0 0 39.675098 104.27064",ref:t,"aria-labelledby":n},a),r?o.createElement("title",{id:n},r):null,c||(c=o.createElement("g",{transform:"translate(-86.019554,-58.032633)"},o.createElement("path",{d:"m 94.572523,58.032633 31.122127,8.55245 -14.4756,8.234638 c 5.81924,11.004841 8.69175,22.458582 10.1415,33.839279 1.81552,13.47801 1.57616,27.51604 -5.35471,41.13341 -1.58021,3.10296 -3.61373,6.24356 -6.45284,9.27798 -0.70371,0.75161 -1.49649,1.52256 -2.41535,2.29702 -0.23167,0.19521 -0.49044,0.40378 -0.78083,0.62322 -0.0785,0.0597 -0.16832,0.12632 -0.27027,0.19999 l -0.154,0.11265 -9.148793,-4.00131 0.0894,-0.0584 c 0.007,-0.004 0.02228,-0.0155 0.04857,-0.0346 0.123621,-0.0923 0.259794,-0.20319 0.412895,-0.33073 0.607899,-0.50626 1.181468,-1.07062 1.756997,-1.67742 2.328481,-2.45299 4.049011,-5.15919 5.513881,-7.97419 6.46189,-12.41085 6.55496,-25.67394 4.91598,-38.80952 -1.30807,-9.888781 -3.61235,-19.707408 -7.99176,-29.085561 l -15.510171,8.823235 z"}))))}const u=o.forwardRef(p);var d;r.p;function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){let{title:r,titleId:n,...a}=e;return o.createElement("svg",m({width:"75.967445mm",height:"234.71339mm",viewBox:"0 0 75.967445 234.71339",ref:t,"aria-labelledby":n},a),r?o.createElement("title",{id:n},r):null,d||(d=o.createElement("g",{transform:"translate(-76.705281,-29.77268)"},o.createElement("path",{d:"m 114.68901,29.77268 37.98372,117.3567 H 76.705281 Z"}),o.createElement("path",{d:"m 114.68901,264.48608 37.98372,-117.3567 H 76.705281 Z"}))))}const h=o.forwardRef(f);r.p;var g,y,b,v=r(155),x=r(157),O=r(51),j=r(1);const S=v.a.div(g||(g=Object(n.a)(["\n  width: 40%;\n  display: flex;\n  align-items: center;\n\n  &:hover {\n    cursor: pointer;\n  }\n  path {\n    filter: drop-shadow(0px 0px 15px rgba(0, 0, 0, 0.2));\n  }\n  &:hover path {\n    filter: drop-shadow(0px 0px 13px rgba(255, 255, 255, 0.1));\n  }\n  path:nth-of-type(2) {\n    fill: #343434;\n  }\n  &:hover path:nth-of-type(2) {\n    fill: #434343;\n  }\n  path:nth-of-type(1) {\n    fill: #e90318;\n  }\n  &:hover path:nth-of-type(1) {\n    fill: #fb4052;\n  }\n"]))),M=v.a.div(y||(y=Object(n.a)(["\n  pointer-events: none;\n  display: flex;\n  z-index: 1002;\n  position: absolute;\n  align-items: center;\n\n  margin-left: -30%;\n  path:nth-of-type(2) {\n  }\n  svg g {\n    transform: translate(-76.7053, -29.7727) scale(2, 1);\n  }\n  svg {\n    z-index: 9990;\n    height: 150px;\n    width: 200px;\n  }\n"]))),L=v.a.div(b||(b=Object(n.a)(["\n  width: 30%;\n  margin-top: 14px;\n  z-index: 999;\n  display: flex;\n\n  svg:hover {\n    cursor: pointer;\n  }\n  svg:hover path {\n    fill: #ececec;\n    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.1));\n  }\n  path {\n    fill: #bbb;\n  }\n  svg {\n    transform: scale(0.6);\n    z-index: 9990;\n    height: 172px;\n  }\n"]))),E=e=>{const t=Object(O.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),[r,n]=Object(o.useState)(0);return Object(o.useEffect)(()=>{if(!t.map)return;let e=()=>{n(Math.round(t.map.getBearing()))};return t.map.on("rotate",e,t.componentId),e(),()=>{t.map.off("rotate",e)}},[t.map,e.mapId]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:Object(x.a)({zIndex:1e3,top:0,position:"absolute",...e.style}),children:Object(j.jsxs)("div",{className:Object(x.a)({position:"absolute",border:"10px solid #bcbcbc",backgroundColor:"#717171",background:"radial-gradient(#717171, #414141)",height:"200px",width:"200px",borderRadius:"50%",display:"flex",justifyContent:"center",transform:"scale(0.2) translateX(-448px) translateY(-448px)",...e.backgroundStyle}),children:[Object(j.jsx)(L,{className:Object(x.a)({...e.rotateRightStyle}),children:Object(j.jsx)(i,{onClick:()=>{var e,r;let n=Math.round(null===(e=t.map)||void 0===e?void 0:e.getBearing()),o=Math.round(n%90);n>0&&(o=90-o),0===o&&(o=90),null===(r=t.map)||void 0===r||r.setBearing(Math.round(n+Math.abs(o)))}})}),Object(j.jsx)(S,{className:Object(x.a)({...e.needleStyle}),onClick:()=>{var e;null===(e=t.map)||void 0===e||e.setBearing(0)},children:Object(j.jsx)(M,{style:{transform:"rotate("+r+"deg)"},children:Object(j.jsx)(h,{})})}),Object(j.jsx)(L,{className:Object(x.a)({...e.rotateLeftStyle}),children:Object(j.jsx)(u,{onClick:()=>{var e,r;let n=Math.round(null===(e=t.map)||void 0===e?void 0:e.getBearing()),o=Math.round(n%90);n<0&&(o=90+o),0===o&&(o=90),null===(r=t.map)||void 0===r||r.setBearing(Math.round(n-Math.abs(o)))}})})]})})})};E.__docgenInfo={description:"Navigation component that displays a compass component which indicates the current oriantation of the map it is registered for and offers controls to turn the bearing 90° left/right or reset north to point up.\n\nAll style props are applied using @emotion/css to allow more complex css selectors.\n\n@component",methods:[],displayName:"MlNavigationCompass",props:{idPrefix:{type:{name:"string"},required:!1,description:"Component id prefix"},style:{type:{name:"object"},required:!1,description:"Style object to adjust css definitions of the component."},backgroundStyle:{type:{name:"object"},required:!1,description:"Style object to adjust css definitions of the background."},needleStyle:{type:{name:"object"},required:!1,description:"Style object to adjust css definitions of the compass needle."},rotateRightStyle:{type:{name:"object"},required:!1,description:"Style object to adjust css definitions of the rotate right button."},rotateLeftStyle:{type:{name:"object"},required:!1,description:"Style object to adjust css definitions of the rotate left button."}}};t.a=E;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlNavigationCompass/MlNavigationCompass.js"]={name:"MlNavigationCompass",docgenInfo:E.__docgenInfo,path:"src/components/MlNavigationCompass/MlNavigationCompass.js"})},319:function(e,t,r){"use strict";var n=r(0),o=r(200),a=r(1);const s=e=>{let{children:t}=e;const[r,s]=Object(n.useState)({type:"FeatureCollection",features:[]}),i={data:r,setData:s,getEmptyFeatureCollection:()=>({type:"FeatureCollection",features:[]})};return Object(a.jsx)(o.a,{value:i,children:t})};s.__docgenInfo={description:"",methods:[],displayName:"GeoJsonProvider",props:{children:{type:{name:"node"},required:!0,description:""}}},t.a=s,"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlGPXViewer/util/GeoJsonProvider.js"]={name:"GeoJsonProvider",docgenInfo:s.__docgenInfo,path:"src/components/MlGPXViewer/util/GeoJsonProvider.js"})},320:function(e){e.exports=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.1074676513671875,50.74340774029213],[7.0992279052734375,50.756441089372665],[7.079315185546874,50.764693667025014],[7.045669555664062,50.77945780529241],[7.030563354492187,50.79161300845443],[7.0291900634765625,50.80940599750376],[7.0236968994140625,50.820685846099174],[7.0085906982421875,50.825891011253546],[6.9879913330078125,50.826758482363275],[6.97906494140625,50.835432306955276],[6.9824981689453125,50.84583876895451],[6.9962310791015625,50.85147463352982],[7.012023925781249,50.85710981721644],[7.021636962890625,50.86664473085768],[7.0367431640625,50.872278081520406],[7.0477294921875,50.877044231111014],[7.052536010742187,50.88397594225127]]}}')},322:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(0),o=r(9),a=r(1132),s=r(644),i=r(630),c=r.n(i),l=r(629),p=r.n(l),u=r(332),d=r(430),m=r(1);const f=Object(a.a)(e=>({drawer:{flexGrow:1,zIndex:105,position:"absolute",top:0,left:0,bottom:0,backgroundColor:"#fafafa",display:"flex",flexDirection:"column",alignItems:"stretch",alignContent:"stretch"},drawerPaper:{position:"initial !important",boxSizing:"border-box",padding:"40px",visibility:"visible !important",zIndex:"initial !important"},drawerHeader:{alignContent:"flex-start",display:"flex"},drawerContent:{}})),h=Object(o.a)("div")(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center"}});function g(e){const t=f(),r=Object(d.a)("(max-width:900px)"),[o,a]=Object(n.useState)(!0);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(u.a,{onClick:()=>{a(!0)},style:{zIndex:101,position:"relative",padding:"20px"},children:Object(m.jsx)(p.a,{})}),Object(m.jsxs)(s.a,{transitionDuration:0,className:t.drawer,variant:"persistent",anchor:"left",open:o,classes:{paper:t.drawerPaper},sx:{...e.sx,maxWidth:r?"90vw":"20vw",...o?{}:{left:r?"-90vw":"-20vw"}},children:[Object(m.jsx)(h,{className:t.drawerHeader,children:Object(m.jsx)(u.a,{onClick:()=>{a(!1)},children:Object(m.jsx)(c.a,{style:{}})})}),Object(m.jsx)("div",{style:{maxWidth:"100%"},children:e.children})]})]})}g.__docgenInfo={description:"",methods:[],displayName:"Sidebar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui_components/Sidebar.js"]={name:"Sidebar",docgenInfo:g.__docgenInfo,path:"src/ui_components/Sidebar.js"})},328:function(e){e.exports=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"coordinates":[[[7.08646747303149,50.74485058672653],[7.084287513691095,50.74371917250187],[7.084437772332876,50.743610683782215],[7.084640903561933,50.743721758552354],[7.085805654941254,50.74293993704128],[7.087023278906713,50.74218320888983],[7.087791368229503,50.74258090834434],[7.088796806075749,50.743261830692745],[7.089275088452752,50.743701110992674],[7.088087117762917,50.74409411011173],[7.087662548338368,50.743784963165815],[7.087184330538875,50.7440368518605],[7.087233860417484,50.744077781245316],[7.08714938625954,50.744122118772154],[7.087057544749172,50.74427276821896],[7.087104984084277,50.744509715654885],[7.08646747303149,50.74485058672653]]],"type":"Polygon"}}]}')},37:function(e,t,r){"use strict";r(0);var n=r(40),o=r(139),a=(r(576),r(253)),s=r(646),i=r(175),c=r(1);const l=Object(a.a)({}),p=[e=>Object(c.jsx)("div",{className:"fullscreen_map",children:Object(c.jsx)(s.a,{theme:l,children:Object(c.jsxs)(n.a,{children:[Object(c.jsx)(e,{}),Object(c.jsx)(o.a,{options:{zoom:14.5,style:"https://wms.wheregroup.com/tileserver/style/osm-bright.json",center:[7.0851268,50.73884]},mapId:"map_1"}),Object(c.jsx)(i.a,{mapId:"map_1"})]})})})];t.a=p},51:function(e,t,r){"use strict";var n=r(0),o=r(331),a=r(40),s=r(68);t.a=function(e){const t=Object(n.useContext)(a.b),r=Object(s.a)({mapId:e.mapId,watch:{viewport:!1,layers:!!e.waitForLayer,sources:!1},filter:{includeBaseLayers:!0}}),i=Object(n.useRef)(!1),c=Object(n.useRef)(void 0),l=Object(n.useRef)(Object(o.a)()),[p,u]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{let e=l.current;return()=>{c.current&&(c.current.cleanup(e),c.current=void 0),i.current=!1,u(!1)}},[]),Object(n.useEffect)(()=>{if(t.mapExists(e.mapId)&&!i.current){if(e.waitForLayer){var n;let t=!1;if(null==r||null===(n=r.layers)||void 0===n||n.forEach(r=>{r.id===e.waitForLayer&&(t=!0)}),!t)return}i.current=!0,c.current=t.getMap(e.mapId),u(!0)}},[t.mapIds,r.layers,t,e.waitForLayer,e.mapId]),{map:c.current,mapIsReady:p,componentId:l.current,layers:r.layers}}},576:function(e,t,r){},614:function(e,t,r){"use strict";(function(e){var n=function(){var t,n=/\s*/g,o=/^\s*|\s*$/g,a=/\s+/;function s(e){if(!e||!e.length)return 0;for(var t=0,r=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}function i(e,t){return e.getElementsByTagName(t)}function c(e,t){return e.getAttribute(t)}function l(e,t){return parseFloat(c(e,t))}function p(e,t){var r=i(e,t);return r.length?r[0]:null}function u(e){for(var t=0,r=[];t<e.length;t++)r[t]=parseFloat(e[t]);return r}function d(e){var t;return e&&(t=e).normalize&&t.normalize(),e&&e.textContent||""}function m(e,t){var r,n,o={};for(n=0;n<t.length;n++)(r=p(e,t[n]))&&(o[t[n]]=d(r));return o}function f(e,t){for(var r in t)e[r]=t[r]}function h(e){return u(e.replace(n,"").split(","))}function g(e){for(var t=e.replace(o,"").split(a),r=[],n=0;n<t.length;n++)r.push(h(t[n]));return r}function y(e){var t,r=[l(e,"lon"),l(e,"lat")],n=p(e,"ele"),o=p(e,"gpxtpx:hr")||p(e,"hr"),a=p(e,"time");return n&&(t=parseFloat(d(n)),isNaN(t)||r.push(t)),{coordinates:r,time:a?d(a):null,heartRate:o?parseFloat(d(o)):null}}if("undefined"!=typeof XMLSerializer)t=new XMLSerializer;else{var b="object"==typeof e&&!e.browser,v="object"==typeof Titanium;if("object"!=typeof exports||!b&&!v)throw new Error("Unable to initialize serializer");t=new(r(1071).XMLSerializer)}function x(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}return{kml:function(e){for(var t={type:"FeatureCollection",features:[]},r={},n={},o={},a=["Polygon","LineString","Point","Track","gx:Track"],l=i(e,"Placemark"),m=i(e,"Style"),f=i(e,"StyleMap"),y=0;y<m.length;y++){var b=s(x(m[y])).toString(16);r["#"+c(m[y],"id")]=b,n[b]=m[y]}for(var v=0;v<f.length;v++){r["#"+c(f[v],"id")]=s(x(f[v])).toString(16);for(var O=i(f[v],"Pair"),j={},S=0;S<O.length;S++)j[d(p(O[S],"key"))]=d(p(O[S],"styleUrl"));o["#"+c(f[v],"id")]=j}for(var M=0;M<l.length;M++)t.features=t.features.concat(C(l[M]));function L(e){var t,r;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(r=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(r)?void 0:r]}function E(e){var t=i(e,"coord"),r=[],n=[];0===t.length&&(t=i(e,"gx:coord"));for(var o=0;o<t.length;o++)r.push(u(d(t[o]).split(" ")));for(var a=i(e,"when"),s=0;s<a.length;s++)n.push(d(a[s]));return{coords:r,times:n}}function C(e){var t,s=function e(t){var r,n,o,s,c,l=[],u=[];if(p(t,"MultiGeometry"))return e(p(t,"MultiGeometry"));if(p(t,"MultiTrack"))return e(p(t,"MultiTrack"));if(p(t,"gx:MultiTrack"))return e(p(t,"gx:MultiTrack"));for(o=0;o<a.length;o++)if(n=i(t,a[o]))for(s=0;s<n.length;s++)if(r=n[s],"Point"===a[o])l.push({type:"Point",coordinates:h(d(p(r,"coordinates")))});else if("LineString"===a[o])l.push({type:"LineString",coordinates:g(d(p(r,"coordinates")))});else if("Polygon"===a[o]){var m=i(r,"LinearRing"),f=[];for(c=0;c<m.length;c++)f.push(g(d(p(m[c],"coordinates"))));l.push({type:"Polygon",coordinates:f})}else if("Track"===a[o]||"gx:Track"===a[o]){var y=E(r);l.push({type:"LineString",coordinates:y.coords}),y.times.length&&u.push(y.times)}return{geoms:l,coordTimes:u}}(e),l={},u=d(p(e,"name")),m=d(p(e,"address")),f=d(p(e,"styleUrl")),y=d(p(e,"description")),b=p(e,"TimeSpan"),v=p(e,"TimeStamp"),x=p(e,"ExtendedData"),O=p(e,"LineStyle"),j=p(e,"PolyStyle"),S=p(e,"visibility");if(!s.geoms.length)return[];if(u&&(l.name=u),m&&(l.address=m),f){"#"!==f[0]&&(f="#"+f),l.styleUrl=f,r[f]&&(l.styleHash=r[f]),o[f]&&(l.styleMapHash=o[f],l.styleHash=r[o[f].normal]);var M=n[l.styleHash];if(M){O||(O=p(M,"LineStyle")),j||(j=p(M,"PolyStyle"));var C=p(M,"IconStyle");if(C){var I=p(C,"Icon");if(I){var w=d(p(I,"href"));w&&(l.icon=w)}}}}if(y&&(l.description=y),b){var T=d(p(b,"begin")),_=d(p(b,"end"));l.timespan={begin:T,end:_}}if(v&&(l.timestamp=d(p(v,"when"))),O){var R=L(d(p(O,"color"))),A=R[0],P=R[1],k=parseFloat(d(p(O,"width")));A&&(l.stroke=A),isNaN(P)||(l["stroke-opacity"]=P),isNaN(k)||(l["stroke-width"]=k)}if(j){var N=L(d(p(j,"color"))),H=N[0],F=N[1],U=d(p(j,"fill")),B=d(p(j,"outline"));H&&(l.fill=H),isNaN(F)||(l["fill-opacity"]=F),U&&(l["fill-opacity"]="1"===U?l["fill-opacity"]||1:0),B&&(l["stroke-opacity"]="1"===B?l["stroke-opacity"]||1:0)}if(x){var G=i(x,"Data"),D=i(x,"SimpleData");for(t=0;t<G.length;t++)l[G[t].getAttribute("name")]=d(p(G[t],"value"));for(t=0;t<D.length;t++)l[D[t].getAttribute("name")]=d(D[t])}S&&(l.visibility=d(S)),s.coordTimes.length&&(l.coordTimes=1===s.coordTimes.length?s.coordTimes[0]:s.coordTimes);var V={type:"Feature",geometry:1===s.geoms.length?s.geoms[0]:{type:"GeometryCollection",geometries:s.geoms},properties:l};return c(e,"id")&&(V.id=c(e,"id")),[V]}return t},gpx:function(e){var t,r,n=i(e,"trk"),o=i(e,"rte"),a=i(e,"wpt"),s={type:"FeatureCollection",features:[]};for(t=0;t<n.length;t++)(r=h(n[t]))&&s.features.push(r);for(t=0;t<o.length;t++)(r=g(o[t]))&&s.features.push(r);for(t=0;t<a.length;t++)s.features.push(b(a[t]));function l(e,t){for(var r=0;r<t;r++)e.push(null);return e}function u(e,t){var r=i(e,t),n=[],o=[],a=[],s=r.length;if(s<2)return{};for(var c=0;c<s;c++){var p=y(r[c]);n.push(p.coordinates),p.time&&o.push(p.time),(p.heartRate||a.length)&&(a.length||l(a,c),a.push(p.heartRate||null))}return{line:n,times:o,heartRates:a}}function h(e){for(var t,r=i(e,"trkseg"),n=[],o=[],a=[],s=0;s<r.length;s++)if((t=u(r[s],"trkpt"))&&(t.line&&n.push(t.line),t.times&&t.times.length&&o.push(t.times),a.length||t.heartRates&&t.heartRates.length)){if(!a.length)for(var c=0;c<s;c++)a.push(l([],n[c].length));t.heartRates&&t.heartRates.length?a.push(t.heartRates):a.push(l([],t.line.length||0))}if(0!==n.length){var d=x(e);return f(d,v(p(e,"extensions"))),o.length&&(d.coordTimes=1===n.length?o[0]:o),a.length&&(d.heartRates=1===n.length?a[0]:a),{type:"Feature",properties:d,geometry:{type:1===n.length?"LineString":"MultiLineString",coordinates:1===n.length?n[0]:n}}}}function g(e){var t=u(e,"rtept");if(t.line){var r=x(e);return f(r,v(p(e,"extensions"))),{type:"Feature",properties:r,geometry:{type:"LineString",coordinates:t.line}}}}function b(e){var t=x(e);return f(t,m(e,["sym"])),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:y(e).coordinates}}}function v(e){var t={};if(e){var r=p(e,"line");if(r){var n=d(p(r,"color")),o=parseFloat(d(p(r,"opacity"))),a=parseFloat(d(p(r,"width")));n&&(t.stroke=n),isNaN(o)||(t["stroke-opacity"]=o),isNaN(a)||(t["stroke-width"]=96*a/25.4)}}return t}function x(e){var t=m(e,["name","cmt","desc","type","time","keywords"]),r=i(e,"link");r.length&&(t.links=[]);for(var n,o=0;o<r.length;o++)f(n={href:c(r[o],"href")},m(r[o],["text","type"])),t.links.push(n);return t}return s}}}();t.a=n}).call(this,r(159))},621:function(e){e.exports=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.1074676513671875,50.74340774029213],[7.0992279052734375,50.756441089372665],[7.079315185546874,50.764693667025014],[7.045669555664062,50.77945780529241],[7.030563354492187,50.79161300845443],[7.0291900634765625,50.80940599750376],[7.0236968994140625,50.820685846099174],[7.0085906982421875,50.825891011253546],[6.9879913330078125,50.826758482363275],[6.97906494140625,50.835432306955276],[6.9824981689453125,50.84583876895451],[6.9962310791015625,50.85147463352982],[7.012023925781249,50.85710981721644],[7.021636962890625,50.86664473085768],[7.0367431640625,50.872278081520406],[7.0477294921875,50.877044231111014],[7.052536010742187,50.88397594225127]]}}')},622:function(e){e.exports=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.0635223388671875,50.71385204707258],[7.06146240234375,50.709721458354075],[7.063865661621094,50.70298129536074],[7.064552307128906,50.69906720767511],[7.059059143066406,50.69428287906098],[7.05596923828125,50.68797551838366],[7.0580291748046875,50.680797145321655],[7.062835693359375,50.67514068397085],[7.060432434082031,50.6686131506577],[7.051849365234375,50.659255436656736],[7.044639587402344,50.6512019574539],[7.0484161376953125,50.64271166020676],[7.0566558837890625,50.63748609931014]]}}')},631:function(e){e.exports=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.0635223388671875,50.71385204707258],[7.06146240234375,50.709721458354075],[7.063865661621094,50.70298129536074],[7.064552307128906,50.69906720767511],[7.059059143066406,50.69428287906098],[7.05596923828125,50.68797551838366],[7.0580291748046875,50.680797145321655],[7.062835693359375,50.67514068397085],[7.060432434082031,50.6686131506577],[7.051849365234375,50.659255436656736],[7.044639587402344,50.6512019574539],[7.0484161376953125,50.64271166020676],[7.0566558837890625,50.63748609931014]]}}')},635:function(e){e.exports=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.1074676513671875,50.74340774029213],[7.0992279052734375,50.756441089372665],[7.079315185546874,50.764693667025014],[7.045669555664062,50.77945780529241],[7.030563354492187,50.79161300845443],[7.0291900634765625,50.80940599750376],[7.0236968994140625,50.820685846099174],[7.0085906982421875,50.825891011253546],[6.9879913330078125,50.826758482363275],[6.97906494140625,50.835432306955276],[6.9824981689453125,50.84583876895451],[6.9962310791015625,50.85147463352982],[7.012023925781249,50.85710981721644],[7.021636962890625,50.86664473085768],[7.0367431640625,50.872278081520406],[7.0477294921875,50.877044231111014],[7.052536010742187,50.88397594225127]]}}')},636:function(e){e.exports=JSON.parse('{"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[7.0635223388671875,50.71385204707258],[7.06146240234375,50.709721458354075],[7.063865661621094,50.70298129536074],[7.064552307128906,50.69906720767511],[7.059059143066406,50.69428287906098],[7.05596923828125,50.68797551838366],[7.0580291748046875,50.680797145321655],[7.062835693359375,50.67514068397085],[7.060432434082031,50.6686131506577],[7.051849365234375,50.659255436656736],[7.044639587402344,50.6512019574539],[7.0484161376953125,50.64271166020676],[7.0566558837890625,50.63748609931014]]}}')},637:function(e){e.exports=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"coordinates":[[[7.08646747303149,50.74485058672653],[7.084287513691095,50.74371917250187],[7.084437772332876,50.743610683782215],[7.084640903561933,50.743721758552354],[7.085805654941254,50.74293993704128],[7.087023278906713,50.74218320888983],[7.087791368229503,50.74258090834434],[7.088796806075749,50.743261830692745],[7.089275088452752,50.743701110992674],[7.088087117762917,50.74409411011173],[7.087662548338368,50.743784963165815],[7.087184330538875,50.7440368518605],[7.087233860417484,50.744077781245316],[7.08714938625954,50.744122118772154],[7.087057544749172,50.74427276821896],[7.087104984084277,50.744509715654885],[7.08646747303149,50.74485058672653]]],"type":"Polygon"}}]}')},68:function(e,t,r){"use strict";var n=r(0),o=r(3),a=r.n(o),s=r(331),i=r(40);function c(e){const t=Object(n.useContext)(i.b),r=Object(n.useRef)(!1),o=Object(n.useRef)(void 0),[a,c]=Object(n.useState)(void 0),l=Object(n.useRef)(void 0),[p,u]=Object(n.useState)(void 0),d=Object(n.useRef)(void 0),m=Object(n.useRef)(Object(s.a)()),f=Object(n.useCallback)(t=>{var r,n;return!((null==e||null===(r=e.filter)||void 0===r||!r.includeBaseLayers)&&t.baseLayer)&&(void 0===(null===(n=e.filter)||void 0===n?void 0:n.matchLayerIds)||(e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(t.id):t.id.includes(e.filter.matchLayerIds)))},[e.filter]),h=Object(n.useCallback)(()=>{let e=o.current.wrapper.layerState.filter(f),t=JSON.stringify(e);d.current!==t&&(d.current=t,u(e))},[f]);return Object(n.useEffect)(()=>{let e=m.current;return()=>{o.current&&(o.current.cleanup(e),o.current=void 0),r.current=!1}},[]),Object(n.useEffect)(()=>{var n,a,s,i;t.mapExists(e.mapId)&&!r.current&&(r.current=!0,o.current=t.getMap(e.mapId),null!=e&&null!==(n=e.watch)&&void 0!==n&&n.viewport&&(c(o.current.wrapper.viewportState),o.current.wrapper.on("viewportchange",()=>{var e,t;l.current!==(null===(e=o.current)||void 0===e?void 0:e.wrapper.viewportStateString)&&c(null===(t=o.current)||void 0===t?void 0:t.wrapper.viewportState)},m.current)),null!=e&&null!==(a=e.watch)&&void 0!==a&&a.layers&&(h(),o.current.wrapper.on("layerchange",h,{includeBaseLayers:null==e||null===(s=e.filter)||void 0===s?void 0:s.includeBaseLayers,matchLayerIds:null==e||null===(i=e.filter)||void 0===i?void 0:i.matchLayerIds},m.current)))},[t.mapIds,t,e.mapId,h,e]),{layers:p,viewport:a}}c.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}},c.propTypes={mapId:a.a.string,watch:a.a.shape({layers:a.a.bool,sources:a.a.bool,viewport:a.a.bool}),filter:a.a.shape({includeBaseLayers:a.a.bool,matchLayerIds:a.a.oneOfType([a.a.string,a.a.instanceOf(RegExp)]),matchSourceIds:a.a.oneOfType([a.a.string,a.a.instanceOf(RegExp)])})},t.a=c},696:function(e,t,r){r(697),r(853),r(854),r(1102),r(1094),r(1107),r(1108),r(1109),r(1103),r(1097),r(1110),r(1096),r(1098),r(1111),e.exports=r(1018)},763:function(e,t){},78:function(e,t,r){"use strict";var n=r(0),o=r(3),a=r.n(o),s=r(51);var i=(e,t)=>{switch(e){case"fill":return null!=t&&t.fill?t.fill:{"fill-color":"rgba(10,240,256,0.6)"};case"line":return null!=t&&t.line?t.line:{"line-color":"rgb(203,211,2)","line-width":5};case"circle":default:return null!=t&&t.circle?t.circle:{"circle-color":"rgba(10,240,256)","circle-stroke-color":"#fff","circle-stroke-width":2}}};const c={Position:"circle",Point:"circle",MultiPoint:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill",GeometryCollection:"circle"},l=e=>{var t;return"Feature"===(null==e?void 0:e.type)?null!=c&&c[null==e||null===(t=e.geometry)||void 0===t?void 0:t.type]?c[e.geometry.type]:"circle":"FeatureCollection"===(null==e?void 0:e.type)?e.features.length?l(e.features[0]):"circle":void 0};var p=l,u=r(1);const d=["circle","fill","line"],m=e=>{const t=Object(s.a)({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=Object(n.useRef)(!1),o=Object(n.useRef)(e.layerId||"MlGeoJsonLayer-"+t.componentId),a=Object(n.useRef)(void 0);Object(n.useEffect)(()=>{if(t.map&&r.current)for(var n in e.layout)t.map.setLayoutProperty(o.current,n,e.layout[n])},[e.layout,t.map,e.mapId]),Object(n.useEffect)(()=>{if(!t.map||!r.current)return;let n=e.paint||i(a.current,e.defaultPaintOverrides);for(var s in n)t.map.setPaintProperty(o.current,s,n[s])},[e.paint,t.map,e.mapId,e.defaultPaintOverrides]),Object(n.useEffect)(()=>{var n;null!=t&&null!==(n=t.map)&&void 0!==n&&n.getSource(o.current)&&r.current&&t.map.getSource(o.current).setData(e.geojson)},[e.geojson,t.map,e.type]);const c=Object(n.useCallback)(()=>{let r=e.geojson;a.current=e.type||p(e.geojson),t.map.addLayer({id:o.current,source:{type:"geojson",data:r},type:a.current,paint:e.paint||i(a.current,e.defaultPaintOverrides),layout:e.layout||{},...e.options},e.insertBeforeLayer,t.componentId),void 0!==e.onHover&&t.map.on("mousemove",o.current,e.onHover,t.componentId),void 0!==e.onClick&&t.map.on("click",o.current,e.onClick,t.componentId),void 0!==e.onLeave&&t.map.on("mouseleave",o.current,e.onLeave,t.componentId)},[t,e]);return Object(n.useEffect)(()=>{if(t.map&&e.geojson){if(r.current&&-1!==d.indexOf(e.type)&&a.current&&e.type!==a.current)t.map.cleanup(t.componentId);else if(r.current&&(-1===d.indexOf(e.type)||-1!==d.indexOf(e.type)&&e.type===a.current))return;r.current=!0,c()}},[t,c,e]),Object(u.jsx)(u.Fragment,{})};m.propTypes={mapId:a.a.string,type:a.a.string,layout:a.a.object,paint:a.a.object,defaultPaintOverrides:a.a.object,options:a.a.object,geojson:a.a.object,insertBeforeLayer:a.a.string,layerId:a.a.string,onClick:a.a.func,onHover:a.a.func,onLeave:a.a.func},m.__docgenInfo={description:'Adds source and layer of types "line", "fill" or "circle" to display GeoJSON data on the map.\n\n@component',methods:[],displayName:"MlGeoJsonLayer",props:{mapId:{type:{name:"string"},required:!1,description:"Id of the target MapLibre instance in mapContext"},type:{type:{name:"string"},required:!1,description:'Type of the layer that will be added to the MapLibre instance.\nPossible values: "line", "circle", "fill"'},layout:{type:{name:"object"},required:!1,description:"Layout property object, that is passed to the addLayer call.\nPossible props depend on the layer type.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill"},paint:{type:{name:"object"},required:!1,description:"Paint property object, that is passed to the addLayer call.\nPossible props depend on the layer type.\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#line\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#circle\nhttps://maplibre.org/maplibre-gl-js-docs/style-spec/layers/#fill"},defaultPaintOverrides:{type:{name:"object"},required:!1,description:'Javascript object with optional properties "fill", "line", "circle" to override implicit layer type default paint properties.'},options:{type:{name:"object"},required:!1,description:"Javascript object that is spread into the addLayer commands first parameter."},geojson:{type:{name:"object"},required:!1,description:"GeoJSON data that is supposed to be rendered by this component."},insertBeforeLayer:{type:{name:"string"},required:!1,description:'Id of an existing layer in the mapLibre instance to help specify the layer order\nThis layer will be visually beneath the layer with the "insertBeforeLayer" id.'},layerId:{type:{name:"string"},required:!1,description:"Id of the new layer and source that are added to the MapLibre instance"},onClick:{type:{name:"func"},required:!1,description:"Click event handler that is executed whenever a geometry rendered by this component is clicked."},onHover:{type:{name:"func"},required:!1,description:"Hover event handler that is executed whenever a geometry rendered by this component is hovered."},onLeave:{type:{name:"func"},required:!1,description:"Leave event handler that is executed whenever a geometry rendered by this component is\nleft/unhovered."}}};t.a=m;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MlGeoJsonLayer/MlGeoJsonLayer.js"]={name:"MlGeoJsonLayer",docgenInfo:m.__docgenInfo,path:"src/components/MlGeoJsonLayer/MlGeoJsonLayer.js"})},854:function(e,t,r){"use strict";r.r(t);r(488)},86:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r(0);var n=r(1138),o=r(1140),a=r(1);function s(e){return Object(a.jsx)("div",{style:{flexGrow:1,zIndex:120,position:"absolute",top:0,left:0,right:0},children:Object(a.jsx)(n.a,{sx:{minHeight:"62px",backgroundColor:"#f1f1f1"},color:"primary",position:"static",children:Object(a.jsx)(o.a,{children:e.children})})})}s.__docgenInfo={description:"",methods:[],displayName:"TopToolbar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ui_components/TopToolbar.js"]={name:"TopToolbar",docgenInfo:s.__docgenInfo,path:"src/ui_components/TopToolbar.js"})}});
//# sourceMappingURL=main~24120820.2d183045.iframe.bundle.js.map